{"version":3,"file":"static/js/701.7e50b0d6.chunk.js","mappings":"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","sources":["components/FinancialManagement.js"],"sourcesContent":["import { logger } from '../utils/logger';\n\nimport React, { useState, useMemo, useEffect } from 'react';\nimport useAuditLog from '../hooks/useAuditLog';\nimport subscriptionService from '../services/SubscriptionService';\nimport { validatePlannedValue, calculateDeliveredValue } from '../utils/businessValueCalculator';\n\n// ===== Utilidades de d√≠as laborables =====\nconst toISO = (d) => {\n  if (!d) return new Date().toISOString().split('T')[0];\n  const date = new Date(d);\n  if (isNaN(date.getTime())) {\n    logger.warn('Invalid date in toISO:', d);\n    return new Date().toISOString().split('T')[0];\n  }\n  return date.toISOString().split('T')[0];\n};\n\n// Funci√≥n para verificar si un d√≠a es laboral (lunes a viernes)\nconst isWorkingDay = (date) => {\n  const dayOfWeek = new Date(date).getDay();\n  return dayOfWeek >= 1 && dayOfWeek <= 5; // 1=Lunes, 5=Viernes\n};\n\n// Funci√≥n para calcular diferencia de d√≠as laborales (exclusivo)\nconst diffWorkingDaysExclusive = (a, b) => {\n  const startDate = new Date(toISO(a));\n  const endDate = new Date(toISO(b));\n  let workingDays = 0;\n\n  let currentDate = new Date(startDate);\n  currentDate.setDate(currentDate.getDate() + 1); // Empezar desde el d√≠a siguiente\n\n  while (currentDate < endDate) {\n    if (isWorkingDay(currentDate)) {\n      workingDays++;\n    }\n    currentDate.setDate(currentDate.getDate() + 1);\n  }\n\n  return workingDays;\n};\n\n// Funci√≥n para calcular duraci√≥n de d√≠as laborales (inclusivo)\nconst durationWorkingDaysInclusive = (start, end) => {\n  const startDate = new Date(toISO(start));\n  const endDate = new Date(toISO(end));\n  let workingDays = 0;\n\n  let currentDate = new Date(startDate);\n  while (currentDate <= endDate) {\n    if (isWorkingDay(currentDate)) {\n      workingDays++;\n    }\n    currentDate.setDate(currentDate.getDate() + 1);\n  }\n\n  return workingDays;\n};\n\n// Funci√≥n para calcular diferencia de d√≠as (exclusivo) - respeta configuraci√≥n de d√≠as laborables\nconst diffDaysExclusive = (a, b, includeWeekends = false) => {\n  if (includeWeekends) {\n    // Comportamiento original: incluye s√°bados y domingos\n    const d1 = new Date(toISO(a));\n    const d2 = new Date(toISO(b));\n    const DAY = 1000 * 60 * 60 * 24;\n    return Math.max(0, Math.round((d2.getTime() - d1.getTime()) / DAY));\n  } else {\n    // Nuevo comportamiento: solo d√≠as laborales\n    return diffWorkingDaysExclusive(a, b);\n  }\n};\n\n// Funci√≥n para calcular duraci√≥n de d√≠as (inclusivo) - respeta configuraci√≥n de d√≠as laborables\nconst durationDaysInclusive = (start, end, includeWeekends = false) => {\n  if (includeWeekends) {\n    // Comportamiento original: incluye s√°bados y domingos\n    const startDate = new Date(toISO(start));\n    const endDate = new Date(toISO(end));\n    const DAY = 1000 * 60 * 60 * 24;\n    return Math.max(1, Math.round((endDate.getTime() - startDate.getTime()) / DAY) + 1);\n  } else {\n    // Nuevo comportamiento: solo d√≠as laborales\n    return durationWorkingDaysInclusive(start, end);\n  }\n};\n\nconst FinancialManagement = ({\n  workPackages,\n  setWorkPackages,\n  currentProject,\n  risks = [], // Agregar riesgos como prop\n  scheduleData = null, // Nuevo prop para datos del cronograma\n  includeWeekends = false, // Configuraci√≥n de d√≠as laborables\n  purchaseOrders = [], // Recibir √≥rdenes de compra como prop\n  setPurchaseOrders, // Funci√≥n para actualizar √≥rdenes de compra\n  advances = [], // Recibir anticipos como prop\n  setAdvances, // Funci√≥n para actualizar anticipos\n  invoices = [], // Recibir facturas como prop\n  setInvoices, // Funci√≥n para actualizar facturas\n  contracts = [], // Recibir contratos como prop\n  setContracts, // Funci√≥n para actualizar contratos\n  useSupabase = false // Prop para habilitar Supabase\n}) => {\n  const [showPOModal, setShowPOModal] = useState(false);\n  const [showAdvanceModal, setShowAdvanceModal] = useState(false);\n  const [showInvoiceModal, setShowInvoiceModal] = useState(false);\n  const [editingPO, setEditingPO] = useState(null);\n  const [editingAdvance, setEditingAdvance] = useState(null);\n  const [editingInvoice, setEditingInvoice] = useState(null);\n\n  // NOTA: Los estados purchaseOrders, advances, invoices, contracts ahora vienen como props\n  // desde el componente padre para mantener la persistencia correcta\n\n  // Estados para gesti√≥n de contratos PMBOK (solo modales)\n  const [showContractModal, setShowContractModal] = useState(false);\n  const [editingContract, setEditingContract] = useState(null);\n\n  // Estado para modo read-only (cuando se exceden l√≠mites del plan)\n  const [isReadOnlyMode, setIsReadOnlyMode] = useState(false);\n\n  // Hook de auditor√≠a\n  const { logFinancialEvent } = useAuditLog(currentProject?.id, useSupabase);\n\n  // Verificar modo read-only al cargar (cuando se exceden l√≠mites del plan)\n  useEffect(() => {\n    const checkReadOnlyMode = async () => {\n      if (useSupabase && currentProject?.organizationId) {\n        try {\n          const editPermission = await subscriptionService.canEdit(currentProject.organizationId);\n          setIsReadOnlyMode(!editPermission.allowed);\n          if (!editPermission.allowed) {\n            logger.warn('[READ-ONLY MODE] Edici√≥n financiera deshabilitada:', editPermission.message);\n          }\n        } catch (error) {\n          logger.error('[READ-ONLY MODE] Error verificando permisos:', error);\n          setIsReadOnlyMode(false);\n        }\n      }\n    };\n    checkReadOnlyMode();\n  }, [useSupabase, currentProject?.organizationId]);\n\n  // Funci√≥n para sincronizar con cronograma\n  const syncWithSchedule = (scheduleUpdates) => {\n    if (!scheduleUpdates || !scheduleUpdates.tasks) return;\n\n    logger.debug('üîÑ Sincronizando m√©tricas financieras con cronograma...');\n\n    // Actualizar work packages basado en progreso del cronograma\n    const updatedWorkPackages = workPackages.map(wp => {\n      const scheduleTask = scheduleUpdates.tasks.find(task => task.workPackageId === wp.id);\n      if (scheduleTask) {\n        return {\n          id: wp.id,\n          name: wp.name,\n          description: wp.description,\n          budget: wp.budget,\n          actualCost: wp.actualCost,\n          priority: wp.priority,\n          percentComplete: scheduleTask.progress || wp.percentComplete,\n          plannedValue: wp.plannedValue,\n          earnedValue: scheduleTask.progress ? (wp.plannedValue * scheduleTask.progress / 100) : wp.earnedValue,\n          resources: wp.resources,\n          startDate: scheduleTask.startDate || wp.startDate,\n          endDate: scheduleTask.endDate || wp.endDate,\n          status: scheduleTask.status || wp.status\n        };\n      }\n      return wp;\n    });\n\n    setWorkPackages(updatedWorkPackages);\n    logger.debug('‚úÖ Work packages actualizados desde cronograma');\n  };\n\n  // Sincronizar cuando cambien los datos del cronograma\n  React.useEffect(() => {\n    if (scheduleData) {\n      syncWithSchedule(scheduleData);\n    }\n  }, [scheduleData]);\n\n  // Funciones para c√°lculo de reservas (deben estar antes del useMemo)\n  const calculateContingencyReserve = () => {\n    if (!risks || !Array.isArray(risks)) return (currentProject?.budget || 0) * 0.05;\n\n    const activeRisks = risks.filter(r => r.status === 'active');\n    if (activeRisks.length === 0) return (currentProject?.budget || 0) * 0.05;\n\n    // C√°lculo base (5% del presupuesto)\n    const baseContingency = (currentProject?.budget || 0) * 0.05;\n\n    // C√°lculo basado en riesgos (suma de impactos esperados)\n    const riskBasedContingency = activeRisks.reduce((sum, risk) => {\n      const expectedImpact = (risk.probability || 0) * (risk.costImpact || 0);\n      const priorityFactor = risk.priority === 'high' ? 1.5 : risk.priority === 'medium' ? 1.2 : 1.0;\n      return sum + (expectedImpact * priorityFactor);\n    }, 0);\n\n    return baseContingency + riskBasedContingency;\n  };\n\n  const calculateManagementReserve = () => {\n    if (!currentProject) return 0;\n    const projectBudget = currentProject.budget || 0;\n\n    if (!risks || !Array.isArray(risks)) return projectBudget * 0.1;\n\n    const activeRisks = risks.filter(r => r.status === 'active');\n\n    // Base 10% del presupuesto\n    let managementReserve = projectBudget * 0.1;\n\n    // Ajustar seg√∫n complejidad de riesgos\n    if (activeRisks.length > 10) {\n      managementReserve *= 1.2;\n    } else if (activeRisks.length > 5) {\n      managementReserve *= 1.1;\n    }\n\n    // Ajustar por riesgos de alta prioridad\n    const highPriorityRisks = activeRisks.filter(r => r.priority === 'high').length;\n    if (highPriorityRisks > 3) {\n      managementReserve *= 1.15;\n    }\n\n    return managementReserve;\n  };\n\n  // Calcular m√©tricas financieras\n  const financialMetrics = useMemo(() => {\n    // Validar que los arrays existan y sean arrays v√°lidos\n    const safePurchaseOrders = Array.isArray(purchaseOrders) ? purchaseOrders : [];\n    const safeAdvances = Array.isArray(advances) ? advances : [];\n    const safeInvoices = Array.isArray(invoices) ? invoices : [];\n\n    logger.debug('üîç FINANCIAL METRICS DEBUG:', {\n      purchaseOrdersType: typeof purchaseOrders,\n      purchaseOrdersIsArray: Array.isArray(purchaseOrders),\n      purchaseOrdersLength: safePurchaseOrders.length,\n      advancesType: typeof advances,\n      advancesIsArray: Array.isArray(advances),\n      advancesLength: safeAdvances.length,\n      invoicesType: typeof invoices,\n      invoicesIsArray: Array.isArray(invoices),\n      invoicesLength: safeInvoices.length\n    });\n\n    const totalPO = safePurchaseOrders.reduce((sum, po) => sum + (po.totalAmount || 0), 0);\n    const totalAdvances = safeAdvances.reduce((sum, adv) => sum + (adv.amount || 0), 0);\n    const totalInvoices = safeInvoices.reduce((sum, inv) => sum + (inv.amount || 0), 0);\n    const paidInvoices = safeInvoices.filter(inv => inv.status === 'paid').reduce((sum, inv) => sum + (inv.amount || 0), 0);\n    const pendingInvoices = totalInvoices - paidInvoices;\n\n    // M√©tricas EVM completas\n    const BAC = currentProject?.budget || 0;\n    const AC = totalInvoices; // Costo real incurrido\n    const EV = paidInvoices; // Valor ganado (facturas pagadas)\n    const PV = totalPO + totalAdvances; // Valor planificado (√≥rdenes de compra + anticipos)\n\n    // Incluir contratos en las m√©tricas\n    const totalContracts = contracts.reduce((sum, contract) => sum + (contract.value || 0), 0);\n    const activeContracts = contracts.filter(contract => contract.status === 'active').reduce((sum, contract) => sum + (contract.value || 0), 0);\n\n    const CV = EV - AC; // Cost Variance\n    const SV = EV - PV; // Schedule Variance\n    const CPI = AC > 0 ? EV / AC : 1; // Cost Performance Index\n    const SPI = PV > 0 ? EV / PV : 1; // Schedule Performance Index\n\n    // Proyecciones PMBOK\n    const ETC = BAC - EV; // Estimate to Complete\n    const EAC = AC + ETC; // Estimate at Completion\n    const VAC = BAC - EAC; // Variance at Completion\n    const TCPI = (BAC - EV) / (BAC - AC); // To Complete Performance Index\n\n    return {\n      // M√©tricas b√°sicas\n      totalPO,\n      totalAdvances,\n      totalInvoices,\n      paidInvoices,\n      pendingInvoices,\n      totalContracts,\n      activeContracts,\n      committedBudget: totalPO + totalAdvances + activeContracts,\n      availableBudget: BAC - (totalPO + totalAdvances + activeContracts),\n\n      // M√©tricas EVM completas\n      BAC,\n      AC,\n      EV,\n      PV,\n      CV,\n      SV,\n      CPI,\n      SPI,\n      ETC,\n      EAC,\n      VAC,\n      TCPI,\n\n      // Porcentajes\n      percentComplete: BAC > 0 ? (EV / BAC) * 100 : 0,\n      percentSpent: BAC > 0 ? (AC / BAC) * 100 : 0,\n\n      // Reservas\n      contingencyReserve: calculateContingencyReserve(),\n      managementReserve: calculateManagementReserve(),\n      totalReserves: calculateContingencyReserve() + calculateManagementReserve(),\n      totalProjectBudget: (currentProject?.budget || 0) + calculateContingencyReserve() + calculateManagementReserve()\n    };\n  }, [purchaseOrders, advances, invoices, contracts, currentProject, risks]);\n\n  // ===== M√âTRICAS DE VALOR ENTREGADO (PMBOK 7 - Value Principle) =====\n  const valueMetrics = useMemo(() => {\n    // ‚úÖ CAMBIO: Usar tareas del cronograma en vez de work packages\n    const safeTasks = Array.isArray(scheduleData?.tasks) ? scheduleData.tasks : [];\n\n    // Calcular valor planificado total de tareas\n    const totalPlannedValueFromTasks = safeTasks.reduce((sum, task) => {\n      return sum + (task.businessValue || 0);\n    }, 0);\n\n    // Obtener plannedValue del proyecto (si existe)\n    const projectPlannedValue = currentProject?.plannedValue || 0;\n\n    // Usar el mayor entre plannedValue del proyecto o suma de tareas\n    const plannedBusinessValue = Math.max(projectPlannedValue, totalPlannedValueFromTasks);\n\n    // Calcular valor entregado basado en tareas completadas\n    const deliveredValue = safeTasks.reduce((sum, task) => {\n      const businessValue = task.businessValue || 0;\n      const progress = task.progress || 0;  // ‚úÖ USAR progress (no percentComplete)\n      return sum + (businessValue * (progress / 100));\n    }, 0);\n\n    // Validar coherencia entre plannedValue y suma de tareas\n    const validation = validatePlannedValue(projectPlannedValue, safeTasks);\n\n    // Value Efficiency Index (VEI) - M√©trica PMBOK 7\n    // VEI = Valor Entregado / Costo Real\n    // VEI > 1 significa que se est√° entregando m√°s valor del que se gasta\n    const VEI = financialMetrics.AC > 0 ? deliveredValue / financialMetrics.AC : 0;\n\n    // ROI Proyectado (Return on Investment)\n    // ROI = (Valor Total Esperado - Costo Estimado Final) / Costo Estimado Final\n    const projectedROI = financialMetrics.EAC > 0\n      ? ((plannedBusinessValue - financialMetrics.EAC) / financialMetrics.EAC) * 100\n      : 0;\n\n    // Brecha de valor (cu√°nto valor falta por entregar)\n    const valueGap = plannedBusinessValue - deliveredValue;\n\n    // Porcentaje de valor entregado\n    const valueDeliveryRate = plannedBusinessValue > 0\n      ? (deliveredValue / plannedBusinessValue) * 100\n      : 0;\n\n    // Cost-to-Value Ratio (cu√°nto cuesta generar cada unidad de valor)\n    const costToValueRatio = deliveredValue > 0\n      ? financialMetrics.AC / deliveredValue\n      : 0;\n\n    logger.debug('üìä VALUE METRICS DEBUG:', {\n      plannedBusinessValue,\n      deliveredValue,\n      VEI,\n      projectedROI,\n      valueGap,\n      valueDeliveryRate,\n      costToValueRatio\n    });\n\n    return {\n      plannedBusinessValue,\n      deliveredValue,\n      VEI,\n      projectedROI,\n      valueGap,\n      valueDeliveryRate,\n      costToValueRatio,\n      validation,  // ‚úÖ A√ëADIDO: Validaci√≥n de coherencia\n      totalPlannedValueFromTasks  // ‚úÖ A√ëADIDO: Total calculado desde tareas\n    };\n  }, [scheduleData, currentProject, financialMetrics]);\n\n  // Handlers para √≥rdenes de compra\n  const handleSavePO = () => {\n    logger.debug('üíæ GUARDANDO OC - editingPO:', editingPO);\n\n    // Validaci√≥n: Si est√° aprobada, debe tener fecha de aprobaci√≥n\n    if (editingPO.status === 'approved' && (!editingPO.approvalDate || editingPO.approvalDate.trim() === '')) {\n      alert('‚ö†Ô∏è Error: Las √≥rdenes de compra aprobadas deben tener una fecha de aprobaci√≥n para el c√°lculo del flujo de caja.');\n      return;\n    }\n\n    // Asegurar que purchaseOrders sea un array v√°lido\n    const currentOrders = Array.isArray(purchaseOrders) ? purchaseOrders : [];\n\n    if (editingPO.id) {\n      // Editar orden existente\n      const updatedOrders = currentOrders.map(po => po.id === editingPO.id ? editingPO : po);\n      logger.debug('üìù EDITANDO OC EXISTENTE:', editingPO.id, 'Total √≥rdenes:', updatedOrders.length);\n      setPurchaseOrders(updatedOrders);\n    } else {\n      // Crear nueva orden\n      const newPO = {\n        id: Date.now().toString(),\n        number: editingPO.number,\n        supplier: editingPO.supplier,\n        description: editingPO.description,\n        totalAmount: editingPO.totalAmount,\n        currency: editingPO.currency || 'USD',\n        status: editingPO.status,\n        requestDate: editingPO.requestDate,\n        approvalDate: editingPO.approvalDate,\n        expectedDate: editingPO.expectedDate,\n        projectId: editingPO.projectId\n      };\n      const newOrders = [...currentOrders, newPO];\n      logger.debug('‚ûï CREANDO NUEVA OC:', newPO.id, 'Total √≥rdenes:', newOrders.length);\n      setPurchaseOrders(newOrders);\n\n      // Registrar evento de auditor√≠a\n      if (logFinancialEvent && currentProject) {\n        logFinancialEvent('purchase-order', newPO, currentProject);\n      }\n    }\n    setShowPOModal(false);\n    setEditingPO(null);\n  };\n\n  const handleDeletePO = async (id) => {\n    if (window.confirm('¬øEst√°s seguro de que quieres eliminar esta orden de compra?')) {\n      try {\n        // Importar el servicio de Supabase din√°micamente\n        const { default: supabaseService } = await import('../services/SupabaseService');\n\n        // Eliminar de Supabase primero\n        const result = await supabaseService.deletePurchaseOrder(id);\n\n        if (result.success) {\n          // Si se elimin√≥ correctamente de Supabase, eliminar del estado local\n          const currentOrders = Array.isArray(purchaseOrders) ? purchaseOrders : [];\n          const filteredOrders = currentOrders.filter(po => po.id !== id);\n          logger.debug('üóëÔ∏è ELIMINANDO OC:', id, '√ìrdenes restantes:', filteredOrders.length);\n          setPurchaseOrders(filteredOrders);\n          logger.debug('‚úÖ Orden de compra eliminada localmente y de Supabase');\n        } else {\n          logger.error('‚ùå Error eliminando orden de compra de Supabase:', result.error);\n          alert('Error eliminando la orden de compra. Int√©ntalo de nuevo.');\n        }\n      } catch (error) {\n        logger.error('‚ùå Error inesperado eliminando orden de compra:', error);\n        alert('Error inesperado eliminando la orden de compra. Int√©ntalo de nuevo.');\n      }\n    }\n  };\n\n  // Handlers para anticipos\n  const handleSaveAdvance = () => {\n    const currentAdvances = Array.isArray(advances) ? advances : [];\n\n    if (editingAdvance.id) {\n      const updatedAdvances = currentAdvances.map(adv => adv.id === editingAdvance.id ? editingAdvance : adv);\n      setAdvances(updatedAdvances);\n    } else {\n      const newAdvance = {\n        id: Date.now().toString(),\n        number: editingAdvance.number,\n        supplier: editingAdvance.supplier,\n        amount: editingAdvance.amount,\n        paymentDate: editingAdvance.paymentDate,\n        description: editingAdvance.description,\n        projectId: editingAdvance.projectId\n      };\n      const newAdvances = [...currentAdvances, newAdvance];\n      setAdvances(newAdvances);\n\n      // Registrar evento de auditor√≠a\n      if (logFinancialEvent && currentProject) {\n        logFinancialEvent('advance', newAdvance, currentProject);\n      }\n    }\n    setShowAdvanceModal(false);\n    setEditingAdvance(null);\n  };\n\n  const handleDeleteAdvance = async (id) => {\n    if (window.confirm('¬øEst√°s seguro de que quieres eliminar este anticipo?')) {\n      try {\n        // Importar el servicio de Supabase din√°micamente\n        const { default: supabaseService } = await import('../services/SupabaseService');\n\n        // Eliminar de Supabase primero\n        const result = await supabaseService.deleteAdvance(id);\n\n        if (result.success) {\n          // Si se elimin√≥ correctamente de Supabase, eliminar del estado local\n          const currentAdvances = Array.isArray(advances) ? advances : [];\n          const filteredAdvances = currentAdvances.filter(adv => adv.id !== id);\n          setAdvances(filteredAdvances);\n          logger.debug('‚úÖ Anticipo eliminado localmente y de Supabase');\n        } else {\n          logger.error('‚ùå Error eliminando anticipo de Supabase:', result.error);\n          alert('Error eliminando el anticipo. Int√©ntalo de nuevo.');\n        }\n      } catch (error) {\n        logger.error('‚ùå Error inesperado eliminando anticipo:', error);\n        alert('Error inesperado eliminando el anticipo. Int√©ntalo de nuevo.');\n      }\n    }\n  };\n\n  // Handlers para facturas\n  const handleSaveInvoice = () => {\n    const currentInvoices = Array.isArray(invoices) ? invoices : [];\n\n    if (editingInvoice.id) {\n      const updatedInvoices = currentInvoices.map(inv => inv.id === editingInvoice.id ? editingInvoice : inv);\n      setInvoices(updatedInvoices);\n    } else {\n      const newInvoice = {\n        id: Date.now().toString(),\n        number: editingInvoice.number,\n        supplier: editingInvoice.supplier,\n        amount: editingInvoice.amount,\n        dueDate: editingInvoice.dueDate,\n        description: editingInvoice.description,\n        projectId: editingInvoice.projectId\n      };\n      const newInvoices = [...currentInvoices, newInvoice];\n      setInvoices(newInvoices);\n\n      // Registrar evento de auditor√≠a\n      if (logFinancialEvent && currentProject) {\n        logFinancialEvent('invoice', newInvoice, currentProject);\n      }\n    }\n    setShowInvoiceModal(false);\n    setEditingInvoice(null);\n  };\n\n  const handleDeleteInvoice = async (id) => {\n    if (window.confirm('¬øEst√°s seguro de que quieres eliminar esta factura?')) {\n      try {\n        // Importar el servicio de Supabase din√°micamente\n        const { default: supabaseService } = await import('../services/SupabaseService');\n\n        // Eliminar de Supabase primero\n        const result = await supabaseService.deleteInvoice(id);\n\n        if (result.success) {\n          // Si se elimin√≥ correctamente de Supabase, eliminar del estado local\n          const currentInvoices = Array.isArray(invoices) ? invoices : [];\n          const filteredInvoices = currentInvoices.filter(inv => inv.id !== id);\n          setInvoices(filteredInvoices);\n          logger.debug('‚úÖ Factura eliminada localmente y de Supabase');\n        } else {\n          logger.error('‚ùå Error eliminando factura de Supabase:', result.error);\n          alert('Error eliminando la factura. Int√©ntalo de nuevo.');\n        }\n      } catch (error) {\n        logger.error('‚ùå Error inesperado eliminando factura:', error);\n        alert('Error inesperado eliminando la factura. Int√©ntalo de nuevo.');\n      }\n    }\n  };\n\n  // Handlers para contratos\n  const handleSaveContract = () => {\n    if (editingContract.id) {\n      setContracts(prev => prev.map(contract => contract.id === editingContract.id ? editingContract : contract));\n    } else {\n      setContracts(prev => {\n        const newContracts = prev.slice();\n        const newContract = {\n          id: Date.now().toString(),\n          number: editingContract.number,\n          supplier: editingContract.supplier,\n          value: editingContract.value,\n          type: editingContract.type,\n          status: editingContract.status,\n          startDate: editingContract.startDate,\n          endDate: editingContract.endDate,\n          description: editingContract.description,\n          projectId: editingContract.projectId\n        };\n        newContracts.push(newContract);\n        return newContracts;\n      });\n\n      // Registrar evento de auditor√≠a\n      if (logFinancialEvent && currentProject) {\n        logFinancialEvent('contract', editingContract, currentProject);\n      }\n    }\n    setShowContractModal(false);\n    setEditingContract(null);\n  };\n\n  const handleDeleteContract = (id) => {\n    setContracts(prev => prev.filter(contract => contract.id !== id));\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'paid': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'overdue': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header Principal - Dise√±o Verde Pastel */}\n      <div className=\"bg-gradient-to-r from-green-50 to-emerald-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden\">\n        {/* Elementos decorativos de fondo */}\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-green-100/30 rounded-full -translate-y-16 translate-x-16\"></div>\n        <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-emerald-100/30 rounded-full translate-y-12 -translate-x-12\"></div>\n\n        <div className=\"relative z-10\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <div className=\"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm\">\n                <span className=\"text-3xl\">üí∞</span>\n              </div>\n              <div>\n                <h1 className=\"text-4xl font-bold mb-2 text-gray-800\">Gesti√≥n Financiera</h1>\n                <p className=\"text-gray-600 text-lg\">Control de costos, √≥rdenes de compra, anticipos y facturas</p>\n              </div>\n            </div>\n\n            {/* Indicador de configuraci√≥n de d√≠as laborables */}\n            <div className=\"bg-white/60 backdrop-blur rounded-2xl px-4 py-2 shadow-sm\">\n              <div className=\"flex items-center space-x-2 text-sm\">\n                <span className=\"text-gray-600\">üìÖ D√≠as laborables:</span>\n                <span className={`px-2 py-1 rounded-full text-xs font-medium ${includeWeekends\n                  ? 'bg-blue-100 text-blue-800'\n                  : 'bg-green-100 text-green-800'\n                  }`}>\n                  {includeWeekends ? 'Lunes a Domingo' : 'Lunes a Viernes'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Primera Fila - M√©tricas Principales EVM */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                BAC (Presupuesto)\n                <span className=\"ml-1 text-blue-500 cursor-help\" title=\"Budget at Completion: Presupuesto total aprobado para el proyecto\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                ${(financialMetrics.BAC / 1000).toFixed(0)}K\n              </div>\n            </div>\n            <div className=\"text-blue-500 text-2xl\">üí∞</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                EV (Valor Ganado)\n                <span className=\"ml-1 text-green-500 cursor-help\" title=\"Earned Value: Valor del trabajo realmente completado\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-green-600\">\n                ${(financialMetrics.EV / 1000).toFixed(0)}K\n              </div>\n            </div>\n            <div className=\"text-green-500 text-2xl\">üìà</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-yellow-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                AC (Costo Real)\n                <span className=\"ml-1 text-yellow-500 cursor-help\" title=\"Actual Cost: Costo real incurrido hasta la fecha\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-yellow-600\">\n                ${(financialMetrics.AC / 1000).toFixed(0)}K\n              </div>\n            </div>\n            <div className=\"text-yellow-500 text-2xl\">üí∏</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                EAC (Estimaci√≥n Final)\n                <span className=\"ml-1 text-purple-500 cursor-help\" title=\"Estimate at Completion: Estimaci√≥n del costo total al terminar\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-purple-600\">\n                ${(financialMetrics.EAC / 1000).toFixed(0)}K\n              </div>\n            </div>\n            <div className=\"text-purple-500 text-2xl\">üéØ</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Segunda Fila - √çndices de Rendimiento */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                CPI\n                <span className=\"ml-1 text-blue-500 cursor-help\" title=\"Cost Performance Index: EV/AC\">‚ùì</span>\n              </div>\n              <div className={`text-2xl font-bold ${financialMetrics.CPI >= 1 ? 'text-green-600' : 'text-red-600'}`}>\n                {financialMetrics.CPI.toFixed(2)}\n              </div>\n              <div className=\"text-xs text-gray-600\">Cost Performance</div>\n            </div>\n            <div className=\"text-blue-500 text-2xl\">üìä</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-orange-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                SPI\n                <span className=\"ml-1 text-orange-500 cursor-help\" title=\"Schedule Performance Index: EV/PV\">‚ùì</span>\n              </div>\n              <div className={`text-2xl font-bold ${financialMetrics.SPI >= 1 ? 'text-green-600' : 'text-red-600'}`}>\n                {financialMetrics.SPI.toFixed(2)}\n              </div>\n              <div className=\"text-xs text-gray-600\">Schedule Performance</div>\n            </div>\n            <div className=\"text-orange-500 text-2xl\">‚è±Ô∏è</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                VAC\n                <span className=\"ml-1 text-red-500 cursor-help\" title=\"Variance at Completion: BAC-EAC\">‚ùì</span>\n              </div>\n              <div className={`text-2xl font-bold ${financialMetrics.VAC >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                ${(financialMetrics.VAC / 1000).toFixed(0)}K\n              </div>\n              <div className=\"text-xs text-gray-600\">Variance at Completion</div>\n            </div>\n            <div className=\"text-red-500 text-2xl\">üìâ</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-teal-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                TCPI\n                <span className=\"ml-1 text-teal-500 cursor-help\" title=\"To Complete Performance Index\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-gray-800\">\n                {financialMetrics.TCPI.toFixed(2)}\n              </div>\n              <div className=\"text-xs text-gray-600\">To Complete Performance</div>\n            </div>\n            <div className=\"text-teal-500 text-2xl\">üéØ</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tercera Fila - M√©tricas de Proyecto */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                Contratos Activos\n                <span className=\"ml-1 text-purple-500 cursor-help\" title=\"Valor total de contratos activos\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-gray-800\">\n                ${(financialMetrics.activeContracts / 1000).toFixed(0)}K\n              </div>\n              <div className=\"text-xs text-gray-600\">Valor total</div>\n            </div>\n            <div className=\"text-purple-500 text-2xl\">üìã</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                % Completado\n                <span className=\"ml-1 text-green-500 cursor-help\" title=\"Porcentaje de trabajo completado\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-green-600\">\n                {financialMetrics.percentComplete.toFixed(1)}%\n              </div>\n              <div className=\"text-xs text-gray-600\">Progreso del proyecto</div>\n            </div>\n            <div className=\"text-green-500 text-2xl\">üìà</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-orange-500\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                % Gastado\n                <span className=\"ml-1 text-orange-500 cursor-help\" title=\"Porcentaje del presupuesto utilizado\">‚ùì</span>\n              </div>\n              <div className=\"text-2xl font-bold text-gray-800\">\n                {financialMetrics.percentSpent.toFixed(1)}%\n              </div>\n              <div className=\"text-xs text-gray-600\">Presupuesto utilizado</div>\n            </div>\n            <div className=\"text-orange-500 text-2xl\">üí∏</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Secci√≥n de Reservas y Contingencias */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-800\">üõ°Ô∏è Reservas y Contingencias</h3>\n          <span className=\"text-sm text-gray-500\">Basado en an√°lisis de riesgos</span>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Presupuesto Base\n                  <span className=\"ml-1 text-gray-500 cursor-help\" title=\"Presupuesto inicial aprobado del proyecto\">‚ùì</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-800\">\n                  ${((currentProject?.budget || 0) / 1000).toFixed(0)}K\n                </div>\n              </div>\n              <div className=\"text-gray-500 text-2xl\">üí∞</div>\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Reserva de Contingencia\n                  <span className=\"ml-1 text-blue-500 cursor-help\" title=\"Reserva para riesgos identificados. F√≥rmula: 5% base + impacto esperado de riesgos activos\">‚ùì</span>\n                </div>\n                <div className=\"text-2xl font-bold text-blue-800\">\n                  ${(financialMetrics.contingencyReserve / 1000).toFixed(0)}K\n                </div>\n              </div>\n              <div className=\"text-blue-500 text-2xl\">üõ°Ô∏è</div>\n            </div>\n          </div>\n\n          <div className=\"bg-green-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Reserva de Gesti√≥n\n                  <span className=\"ml-1 text-green-500 cursor-help\" title=\"Reserva para riesgos no identificados. F√≥rmula: 10% base + ajustes por complejidad\">‚ùì</span>\n                </div>\n                <div className=\"text-2xl font-bold text-green-800\">\n                  ${(financialMetrics.managementReserve / 1000).toFixed(0)}K\n                </div>\n              </div>\n              <div className=\"text-green-500 text-2xl\">üìä</div>\n            </div>\n          </div>\n\n          <div className=\"bg-purple-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Presupuesto Total\n                  <span className=\"ml-1 text-purple-500 cursor-help\" title=\"Presupuesto base + reservas de contingencia y gesti√≥n\">‚ùì</span>\n                </div>\n                <div className=\"text-2xl font-bold text-purple-800\">\n                  ${(financialMetrics.totalProjectBudget / 1000).toFixed(0)}K\n                </div>\n              </div>\n              <div className=\"text-purple-500 text-2xl\">üéØ</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Detalles de c√°lculo */}\n        <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n          <h4 className=\"text-sm font-medium text-gray-700 mb-2\">üìã Detalles del C√°lculo</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-600\">\n            <div>\n              <p><strong>Reserva de Contingencia:</strong> 5% del presupuesto base + impacto esperado de riesgos activos</p>\n              <p><strong>Riesgos Activos:</strong> {risks?.filter(r => r.status === 'active').length || 0} identificados</p>\n            </div>\n            <div>\n              <p><strong>Reserva de Gesti√≥n:</strong> 10% del presupuesto base + ajustes por complejidad</p>\n              <p><strong>Riesgos de Alta Prioridad:</strong> {risks?.filter(r => r.status === 'active' && r.priority === 'high').length || 0} identificados</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* ===== SECCI√ìN DE ENTREGA DE VALOR (PMBOK 7 - Value Principle) ===== */}\n      <div className=\"bg-gradient-to-r from-indigo-50 via-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 mb-6 border-l-4 border-indigo-500\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center\">\n            <div className=\"bg-white/60 backdrop-blur rounded-xl p-2 mr-3\">\n              <span className=\"text-2xl\">üéØ</span>\n            </div>\n            <div>\n              <h3 className=\"text-xl font-bold text-gray-800\">Entrega de Valor (PMBOK 7)</h3>\n              <p className=\"text-sm text-gray-600\">Alineaci√≥n con Principio 4: Focus on Value</p>\n            </div>\n          </div>\n          <div className=\"bg-white/60 backdrop-blur rounded-lg px-3 py-1\">\n            <span className=\"text-xs font-medium text-indigo-700\">Value-Driven PM</span>\n          </div>\n        </div>\n\n        {/* Alerta de validaci√≥n si hay discrepancia */}\n        {valueMetrics.validation && !valueMetrics.validation.isValid && (\n          <div className=\"mb-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg\">\n            <div className=\"flex items-start\">\n              <div className=\"flex-shrink-0\">\n                <span className=\"text-2xl\">‚ö†Ô∏è</span>\n              </div>\n              <div className=\"ml-3 flex-1\">\n                <h3 className=\"text-sm font-medium text-yellow-800\">\n                  Discrepancia en Valor Planificado\n                </h3>\n                <div className=\"mt-2 text-sm text-yellow-700\">\n                  <p>\n                    El <strong>Valor Planificado del Proyecto</strong> (${(valueMetrics.validation.plannedValue / 1000).toFixed(0)}K)\n                    {' '}difiere de la <strong>suma de valores de tareas</strong> (${(valueMetrics.validation.totalTasksValue / 1000).toFixed(0)}K)\n                    {' '}en un <strong>{Math.abs(valueMetrics.validation.percentageDiff).toFixed(1)}%</strong>.\n                  </p>\n                  <p className=\"mt-1\">\n                    üí° <em>Sugerencia: Recalcula los valores de negocio de las tareas en el Cronograma para que la suma coincida con el Valor Planificado.</em>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Primera fila - M√©tricas principales de valor */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\n          <div className=\"bg-white/80 backdrop-blur rounded-lg p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Valor Planificado\n                  <span className=\"ml-1 text-blue-500 cursor-help\" title=\"Valor de negocio total esperado del proyecto al completarse\">‚ùì</span>\n                </div>\n                <div className=\"text-2xl font-bold text-blue-800\">\n                  ${(valueMetrics.plannedBusinessValue / 1000).toFixed(0)}K\n                </div>\n                <div className=\"text-xs text-gray-600 mt-1\">Meta del proyecto</div>\n              </div>\n              <div className=\"text-blue-500 text-2xl\">üìä</div>\n            </div>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur rounded-lg p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Valor Entregado\n                  <span className=\"ml-1 text-green-500 cursor-help\" title=\"Valor de negocio entregado hasta la fecha basado en completitud de work packages\">‚ùì</span>\n                </div>\n                <div className=\"text-2xl font-bold text-green-800\">\n                  ${(valueMetrics.deliveredValue / 1000).toFixed(0)}K\n                </div>\n                <div className=\"text-xs text-gray-600 mt-1\">\n                  {valueMetrics.valueDeliveryRate.toFixed(1)}% completado\n                </div>\n              </div>\n              <div className=\"text-green-500 text-2xl\">‚úÖ</div>\n            </div>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur rounded-lg p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  VEI (Value Efficiency)\n                  <span className=\"ml-1 text-purple-500 cursor-help\" title=\"Value Efficiency Index: Valor Entregado √∑ Costo Real. VEI > 1 = Eficiente. M√©trica PMBOK 7\">‚ùì</span>\n                </div>\n                <div className={`text-2xl font-bold ${valueMetrics.VEI >= 1.2 ? 'text-green-600' :\n                  valueMetrics.VEI >= 1.0 ? 'text-blue-600' :\n                    valueMetrics.VEI >= 0.8 ? 'text-yellow-600' :\n                      'text-red-600'\n                  }`}>\n                  {valueMetrics.VEI.toFixed(2)}\n                </div>\n                <div className=\"text-xs text-gray-600 mt-1\">\n                  {valueMetrics.VEI >= 1 ? '‚úÖ Eficiente' : '‚ö†Ô∏è Ineficiente'}\n                </div>\n              </div>\n              <div className=\"text-purple-500 text-2xl\">‚ö°</div>\n            </div>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur rounded-lg p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  ROI Proyectado\n                  <span className=\"ml-1 text-orange-500 cursor-help\" title=\"Return on Investment proyectado: (Valor Planificado - EAC) √∑ EAC √ó 100\">‚ùì</span>\n                </div>\n                <div className={`text-2xl font-bold ${valueMetrics.projectedROI >= 20 ? 'text-green-800' :\n                  valueMetrics.projectedROI >= 0 ? 'text-blue-800' :\n                    'text-red-800'\n                  }`}>\n                  {valueMetrics.projectedROI.toFixed(1)}%\n                </div>\n                <div className=\"text-xs text-gray-600 mt-1\">\n                  {valueMetrics.projectedROI >= 0 ? 'üìà Positivo' : 'üìâ Negativo'}\n                </div>\n              </div>\n              <div className=\"text-orange-500 text-2xl\">üíé</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Segunda fila - M√©tricas complementarias */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-white/80 backdrop-blur rounded-lg p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Brecha de Valor\n                  <span className=\"ml-1 text-amber-500 cursor-help\" title=\"Valor planificado - Valor entregado. Indica cu√°nto valor falta por entregar\">‚ùì</span>\n                </div>\n                <div className=\"text-xl font-bold text-amber-800\">\n                  ${(valueMetrics.valueGap / 1000).toFixed(0)}K\n                </div>\n                <div className=\"text-xs text-gray-600 mt-1\">Pendiente por entregar</div>\n              </div>\n              <div className=\"text-amber-500 text-xl\">üìè</div>\n            </div>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur rounded-lg p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Tasa de Entrega\n                  <span className=\"ml-1 text-teal-500 cursor-help\" title=\"Porcentaje del valor planificado que ha sido entregado\">‚ùì</span>\n                </div>\n                <div className=\"text-xl font-bold text-teal-800\">\n                  {valueMetrics.valueDeliveryRate.toFixed(1)}%\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-2 mt-2\">\n                  <div\n                    className=\"bg-teal-600 h-2 rounded-full transition-all duration-300\"\n                    style={{ width: `${Math.min(valueMetrics.valueDeliveryRate, 100)}%` }}\n                  ></div>\n                </div>\n              </div>\n              <div className=\"text-teal-500 text-xl\">üìà</div>\n            </div>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur rounded-lg p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-xs text-gray-500 mb-1 flex items-center\">\n                  Ratio Costo-Valor\n                  <span className=\"ml-1 text-cyan-500 cursor-help\" title=\"Costo Real √∑ Valor Entregado. Cu√°nto cuesta generar cada unidad de valor. Menor es mejor\">‚ùì</span>\n                </div>\n                <div className=\"text-xl font-bold text-cyan-800\">\n                  {valueMetrics.costToValueRatio > 0 ? valueMetrics.costToValueRatio.toFixed(2) : 'N/A'}\n                </div>\n                <div className=\"text-xs text-gray-600 mt-1\">\n                  {valueMetrics.costToValueRatio < 1 ? '‚úÖ Excelente' :\n                    valueMetrics.costToValueRatio < 1.5 ? '‚úì Bueno' : '‚ö†Ô∏è Alto'}\n                </div>\n              </div>\n              <div className=\"text-cyan-500 text-xl\">‚öñÔ∏è</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Explicaci√≥n PMBOK 7 */}\n        <div className=\"mt-4 p-4 bg-white/60 backdrop-blur rounded-lg border border-indigo-200\">\n          <h4 className=\"text-sm font-semibold text-indigo-800 mb-2 flex items-center\">\n            <span className=\"mr-2\">üìö</span>\n            Alineaci√≥n con PMBOK 7 - Principio de Valor\n          </h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs text-gray-700\">\n            <div>\n              <p className=\"mb-1\"><strong>‚úì Enfoque en Resultados:</strong> Mide valor entregado, no solo tareas completadas</p>\n              <p className=\"mb-1\"><strong>‚úì Eficiencia de Valor:</strong> VEI mide cu√°nto valor se genera por cada unidad monetaria gastada</p>\n            </div>\n            <div>\n              <p className=\"mb-1\"><strong>‚úì ROI Transparente:</strong> Visibilidad del retorno de inversi√≥n esperado del proyecto</p>\n              <p className=\"mb-1\"><strong>‚úì Toma de Decisiones:</strong> M√©tricas que gu√≠an decisiones basadas en valor, no solo en costo</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Secciones de Gesti√≥n */}\n      <div className=\"grid grid-cols-1 gap-6\">\n        {/* √ìrdenes de Compra */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">üìã √ìrdenes de Compra</h3>\n            <button\n              onClick={() => {\n                setEditingPO({\n                  id: '',\n                  number: '',\n                  supplier: '',\n                  description: '',\n                  totalAmount: 0,\n                  currency: 'USD',\n                  status: 'pending',\n                  requestDate: new Date().toISOString().split('T')[0],\n                  approvalDate: '',\n                  expectedDate: '',\n                  projectId: currentProject?.id || ''\n                });\n                setShowPOModal(true);\n              }}\n              disabled={isReadOnlyMode}\n              className={`px-3 py-1 rounded text-sm ${isReadOnlyMode\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                : 'bg-blue-600 text-white hover:bg-blue-700'\n                }`}\n              title={isReadOnlyMode ? \"No disponible (modo solo lectura)\" : \"Crear nueva orden de compra\"}\n            >\n              + Nueva\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {(!Array.isArray(purchaseOrders) || purchaseOrders.length === 0) ? (\n              <p className=\"text-gray-500 text-sm\">No hay √≥rdenes de compra</p>\n            ) : (\n              purchaseOrders.map(po => (\n                <div key={po.id} className=\"border rounded p-3\">\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium text-sm\">{po.number}</div>\n                      <div className=\"text-xs text-gray-600\">{po.supplier}</div>\n                      <div className=\"text-xs text-gray-600\">${po.totalAmount?.toLocaleString()}</div>\n                      <div className=\"flex items-center space-x-2 mt-1\">\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${po.status === 'approved' ? 'bg-green-100 text-green-800' :\n                          po.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                            'bg-red-100 text-red-800'\n                          }`}>\n                          {po.status === 'approved' ? 'Aprobada' :\n                            po.status === 'pending' ? 'Pendiente' : 'Rechazada'}\n                        </span>\n                        {po.status === 'approved' && (\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${po.approvalDate && po.approvalDate.trim() !== ''\n                            ? 'bg-blue-100 text-blue-800'\n                            : 'bg-red-100 text-red-800'\n                            }`}>\n                            {po.approvalDate && po.approvalDate.trim() !== ''\n                              ? `‚úÖ ${new Date(po.approvalDate + 'T00:00:00').toLocaleDateString('es-ES')}`\n                              : '‚ö†Ô∏è Sin fecha de aprobaci√≥n'}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-1\">\n                      <button\n                        onClick={() => {\n                          setEditingPO(po);\n                          setShowPOModal(true);\n                        }}\n                        className=\"text-blue-600 hover:text-blue-800 text-sm\"\n                      >\n                        ‚úèÔ∏è\n                      </button>\n                      <button\n                        onClick={() => handleDeletePO(po.id)}\n                        className=\"text-red-600 hover:text-red-800 text-sm\"\n                      >\n                        üóëÔ∏è\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        {/* Anticipos */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">üí≥ Anticipos</h3>\n            <button\n              onClick={() => {\n                setEditingAdvance({});\n                setShowAdvanceModal(true);\n              }}\n              disabled={isReadOnlyMode}\n              className={`px-3 py-1 rounded text-sm ${isReadOnlyMode\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                : 'bg-green-600 text-white hover:bg-green-700'\n                }`}\n              title={isReadOnlyMode ? \"No disponible (modo solo lectura)\" : \"Crear nuevo anticipo\"}\n            >\n              + Nuevo\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {advances.length === 0 ? (\n              <p className=\"text-gray-500 text-sm\">No hay anticipos</p>\n            ) : (\n              advances.map(adv => (\n                <div key={adv.id} className=\"border rounded p-3\">\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <div className=\"font-medium text-sm\">{adv.number}</div>\n                      <div className=\"text-xs text-gray-600\">{adv.supplier}</div>\n                      <div className=\"text-xs text-gray-600\">${adv.amount?.toLocaleString()}</div>\n                    </div>\n                    <div className=\"flex space-x-1\">\n                      <button\n                        onClick={() => {\n                          setEditingAdvance(adv);\n                          setShowAdvanceModal(true);\n                        }}\n                        className=\"text-blue-600 hover:text-blue-800 text-sm\"\n                      >\n                        ‚úèÔ∏è\n                      </button>\n                      <button\n                        onClick={() => handleDeleteAdvance(adv.id)}\n                        className=\"text-red-600 hover:text-red-800 text-sm\"\n                      >\n                        üóëÔ∏è\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        {/* Facturas */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">üìÑ Facturas</h3>\n            <button\n              onClick={() => {\n                setEditingInvoice({});\n                setShowInvoiceModal(true);\n              }}\n              disabled={isReadOnlyMode}\n              className={`px-3 py-1 rounded text-sm ${isReadOnlyMode\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                : 'bg-purple-600 text-white hover:bg-purple-700'\n                }`}\n              title={isReadOnlyMode ? \"No disponible (modo solo lectura)\" : \"Crear nueva factura\"}\n            >\n              + Nueva\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {invoices.length === 0 ? (\n              <p className=\"text-gray-500 text-sm\">No hay facturas</p>\n            ) : (\n              invoices.map(inv => (\n                <div key={inv.id} className=\"border rounded p-3\">\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <div className=\"font-medium text-sm\">{inv.number}</div>\n                      <div className=\"text-xs text-gray-600\">{inv.supplier}</div>\n                      <div className=\"text-xs text-gray-600\">${inv.amount?.toLocaleString()}</div>\n                      <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(inv.status)}`}>\n                        {inv.status}\n                      </span>\n                    </div>\n                    <div className=\"flex space-x-1\">\n                      <button\n                        onClick={() => {\n                          setEditingInvoice(inv);\n                          setShowInvoiceModal(true);\n                        }}\n                        className=\"text-blue-600 hover:text-blue-800 text-sm\"\n                      >\n                        ‚úèÔ∏è\n                      </button>\n                      <button\n                        onClick={() => handleDeleteInvoice(inv.id)}\n                        className=\"text-red-600 hover:text-red-800 text-sm\"\n                      >\n                        üóëÔ∏è\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n      </div>\n\n      {/* Modal de Orden de Compra */}\n      {showPOModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-xl font-bold\">\n                  {editingPO?.id ? 'Editar Orden de Compra' : 'Nueva Orden de Compra'}\n                </h2>\n                <button\n                  onClick={() => setShowPOModal(false)}\n                  className=\"text-gray-500 hover:text-gray-700 text-xl\"\n                >\n                  ‚úï\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">N√∫mero de OC *</label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingPO?.number || ''}\n                    onChange={(e) => setEditingPO({\n                      ...editingPO,\n                      number: e.target.value\n                    })}\n                    placeholder=\"PO-2025-XXX\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Proveedor *</label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingPO?.supplier || ''}\n                    onChange={(e) => setEditingPO({\n                      ...editingPO,\n                      supplier: e.target.value\n                    })}\n                    placeholder=\"Nombre del proveedor\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Monto Total *</label>\n                  <input\n                    type=\"number\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingPO?.totalAmount || ''}\n                    onChange={(e) => setEditingPO({\n                      ...editingPO,\n                      totalAmount: Number(e.target.value)\n                    })}\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Estado</label>\n                  <select\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingPO?.status || 'pending'}\n                    onChange={(e) => setEditingPO({\n                      ...editingPO,\n                      status: e.target.value\n                    })}\n                  >\n                    <option value=\"pending\">Pendiente</option>\n                    <option value=\"approved\">Aprobada</option>\n                    <option value=\"rejected\">Rechazada</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Fecha de Aprobaci√≥n *\n                    <span className=\"text-red-500 ml-1\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    value={editingPO?.approvalDate || ''}\n                    onChange={(e) => setEditingPO({\n                      ...editingPO,\n                      approvalDate: e.target.value\n                    })}\n                    required\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Fecha cuando la orden fue aprobada (usada para flujo de caja)\n                  </p>\n                </div>\n\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Descripci√≥n</label>\n                  <textarea\n                    className=\"w-full border rounded px-3 py-2\"\n                    rows=\"3\"\n                    value={editingPO?.description || ''}\n                    onChange={(e) => setEditingPO({\n                      ...editingPO,\n                      description: e.target.value\n                    })}\n                    placeholder=\"Descripci√≥n de los productos/servicios\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end space-x-3 mt-6\">\n                <button\n                  onClick={() => setShowPOModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  onClick={handleSavePO}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n                >\n                  Guardar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal de Anticipo */}\n      {showAdvanceModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-xl font-bold\">\n                  {editingAdvance?.id ? 'Editar Anticipo' : 'Nuevo Anticipo'}\n                </h2>\n                <button\n                  onClick={() => setShowAdvanceModal(false)}\n                  className=\"text-gray-500 hover:text-gray-700 text-xl\"\n                >\n                  ‚úï\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">N√∫mero de Anticipo *</label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingAdvance?.number || ''}\n                    onChange={(e) => setEditingAdvance({\n                      ...editingAdvance,\n                      number: e.target.value\n                    })}\n                    placeholder=\"ADV-2025-XXX\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Proveedor *</label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingAdvance?.supplier || ''}\n                    onChange={(e) => setEditingAdvance({\n                      ...editingAdvance,\n                      supplier: e.target.value\n                    })}\n                    placeholder=\"Nombre del proveedor\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Monto *</label>\n                  <input\n                    type=\"number\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingAdvance?.amount || ''}\n                    onChange={(e) => setEditingAdvance({\n                      ...editingAdvance,\n                      amount: Number(e.target.value)\n                    })}\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fecha de Pago</label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingAdvance?.paymentDate || ''}\n                    onChange={(e) => setEditingAdvance({\n                      id: editingAdvance.id,\n                      number: editingAdvance.number,\n                      supplier: editingAdvance.supplier,\n                      amount: editingAdvance.amount,\n                      description: editingAdvance.description,\n                      projectId: editingAdvance.projectId,\n                      paymentDate: e.target.value\n                    })}\n                  />\n                </div>\n\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Descripci√≥n</label>\n                  <textarea\n                    className=\"w-full border rounded px-3 py-2\"\n                    rows=\"3\"\n                    value={editingAdvance?.description || ''}\n                    onChange={(e) => setEditingAdvance({\n                      id: editingAdvance.id,\n                      number: editingAdvance.number,\n                      supplier: editingAdvance.supplier,\n                      amount: editingAdvance.amount,\n                      paymentDate: editingAdvance.paymentDate,\n                      projectId: editingAdvance.projectId,\n                      description: e.target.value\n                    })}\n                    placeholder=\"Descripci√≥n del anticipo\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end space-x-3 mt-6\">\n                <button\n                  onClick={() => setShowAdvanceModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  onClick={handleSaveAdvance}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700\"\n                >\n                  Guardar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal de Factura */}\n      {showInvoiceModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-xl font-bold\">\n                  {editingInvoice?.id ? 'Editar Factura' : 'Nueva Factura'}\n                </h2>\n                <button\n                  onClick={() => setShowInvoiceModal(false)}\n                  className=\"text-gray-500 hover:text-gray-700 text-xl\"\n                >\n                  ‚úï\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">N√∫mero de Factura *</label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingInvoice?.number || ''}\n                    onChange={(e) => setEditingInvoice({\n                      id: editingInvoice.id,\n                      number: editingInvoice.number,\n                      supplier: editingInvoice.supplier,\n                      amount: editingInvoice.amount,\n                      status: editingInvoice.status,\n                      receivedDate: editingInvoice.receivedDate,\n                      dueDate: editingInvoice.dueDate,\n                      description: editingInvoice.description,\n                      projectId: editingInvoice.projectId, number: e.target.value\n                    })}\n                    placeholder=\"INV-2025-XXX\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Proveedor *</label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingInvoice?.supplier || ''}\n                    onChange={(e) => setEditingInvoice({\n                      ...editingInvoice,\n                      supplier: e.target.value\n                    })}\n                    placeholder=\"Nombre del proveedor\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Monto *</label>\n                  <input\n                    type=\"number\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingInvoice?.amount || ''}\n                    onChange={(e) => setEditingInvoice({\n                      ...editingInvoice,\n                      amount: Number(e.target.value)\n                    })}\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Estado</label>\n                  <select\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingInvoice?.status || 'pending'}\n                    onChange={(e) => setEditingInvoice({\n                      id: editingInvoice.id,\n                      number: editingInvoice.number,\n                      supplier: editingInvoice.supplier,\n                      amount: editingInvoice.amount,\n                      receivedDate: editingInvoice.receivedDate,\n                      dueDate: editingInvoice.dueDate,\n                      description: editingInvoice.description,\n                      status: e.target.value\n                    })}\n                  >\n                    <option value=\"pending\">Pendiente</option>\n                    <option value=\"paid\">Pagada</option>\n                    <option value=\"overdue\">Vencida</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fecha de Recepci√≥n</label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingInvoice?.receivedDate || ''}\n                    onChange={(e) => setEditingInvoice({\n                      ...editingInvoice,\n                      receivedDate: e.target.value\n                    })}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fecha de Vencimiento</label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full border rounded px-3 py-2\"\n                    value={editingInvoice?.dueDate || ''}\n                    onChange={(e) => setEditingInvoice({\n                      ...editingInvoice,\n                      dueDate: e.target.value\n                    })}\n                  />\n                </div>\n\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Descripci√≥n</label>\n                  <textarea\n                    className=\"w-full border rounded px-3 py-2\"\n                    rows=\"3\"\n                    value={editingInvoice?.description || ''}\n                    onChange={(e) => setEditingInvoice({\n                      ...editingInvoice,\n                      description: e.target.value\n                    })}\n                    placeholder=\"Descripci√≥n de la factura\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end space-x-3 mt-6\">\n                <button\n                  onClick={() => setShowInvoiceModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  onClick={handleSaveInvoice}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700\"\n                >\n                  Guardar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n\n      {/* Secci√≥n de Proyecci√≥n de Flujo de Caja */}\n\n\n    </div>\n  );\n};\n\nexport default FinancialManagement;\n"],"names":["_ref","workPackages","setWorkPackages","currentProject","risks","scheduleData","includeWeekends","purchaseOrders","setPurchaseOrders","advances","setAdvances","invoices","setInvoices","contracts","setContracts","useSupabase","showPOModal","setShowPOModal","useState","showAdvanceModal","setShowAdvanceModal","showInvoiceModal","setShowInvoiceModal","editingPO","setEditingPO","editingAdvance","setEditingAdvance","editingInvoice","setEditingInvoice","showContractModal","setShowContractModal","editingContract","setEditingContract","isReadOnlyMode","setIsReadOnlyMode","logFinancialEvent","useAuditLog","id","useEffect","async","organizationId","editPermission","subscriptionService","canEdit","allowed","logger","warn","message","error","checkReadOnlyMode","React","scheduleUpdates","tasks","debug","updatedWorkPackages","map","wp","scheduleTask","find","task","workPackageId","name","description","budget","actualCost","priority","percentComplete","progress","plannedValue","earnedValue","resources","startDate","endDate","status","syncWithSchedule","calculateContingencyReserve","Array","isArray","activeRisks","filter","r","length","reduce","sum","risk","probability","costImpact","calculateManagementReserve","projectBudget","managementReserve","financialMetrics","useMemo","safePurchaseOrders","safeAdvances","safeInvoices","purchaseOrdersType","purchaseOrdersIsArray","purchaseOrdersLength","advancesType","advancesIsArray","advancesLength","invoicesType","invoicesIsArray","invoicesLength","totalPO","po","totalAmount","totalAdvances","adv","amount","totalInvoices","inv","paidInvoices","pendingInvoices","BAC","AC","EV","PV","totalContracts","contract","value","activeContracts","ETC","EAC","committedBudget","availableBudget","CV","SV","CPI","SPI","VAC","TCPI","percentSpent","contingencyReserve","totalReserves","totalProjectBudget","valueMetrics","safeTasks","totalPlannedValueFromTasks","businessValue","projectPlannedValue","plannedBusinessValue","Math","max","deliveredValue","validation","validatePlannedValue","VEI","projectedROI","valueGap","valueDeliveryRate","costToValueRatio","getStatusColor","_jsxs","className","children","_jsx","concat","title","toFixed","isValid","totalTasksValue","abs","percentageDiff","style","width","min","onClick","number","supplier","currency","requestDate","Date","toISOString","split","approvalDate","expectedDate","projectId","disabled","_po$totalAmount","toLocaleString","trim","toLocaleDateString","window","confirm","default","supabaseService","result","deletePurchaseOrder","success","filteredOrders","alert","handleDeletePO","_adv$amount","deleteAdvance","filteredAdvances","handleDeleteAdvance","_inv$amount","deleteInvoice","filteredInvoices","handleDeleteInvoice","type","onChange","e","_objectSpread","target","placeholder","Number","step","required","rows","handleSavePO","currentOrders","updatedOrders","newPO","now","toString","newOrders","paymentDate","handleSaveAdvance","currentAdvances","updatedAdvances","newAdvance","newAdvances","receivedDate","dueDate","handleSaveInvoice","currentInvoices","updatedInvoices","newInvoice","newInvoices"],"sourceRoot":""}