{"version":3,"file":"static/js/188.275d6936.chunk.js","mappings":"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","sources":["components/ProjectArchive.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport useFileStorage from '../hooks/useFileStorage';\n\nconst ProjectArchive = ({ \n  project, \n  workPackages, \n  risks, \n  tasks, \n  purchaseOrders, \n  advances, \n  invoices, \n  contracts,\n  resourceAssignments,\n  onArchiveProject \n}) => {\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [archiveProgress, setArchiveProgress] = useState(0);\n\n  // Obtener audit log del proyecto\n  const getProjectAuditLog = () => {\n    if (!project) return [];\n    try {\n      const savedLog = localStorage.getItem(`audit-log-${project.id}`);\n      return savedLog ? JSON.parse(savedLog) : [];\n    } catch (error) {\n      console.error('Error loading audit log:', error);\n      return [];\n    }\n  };\n\n  const auditLog = getProjectAuditLog();\n\n  // Obtener archivos del proyecto\n  const { files: projectFiles, getFileStats } = useFileStorage(project?.id);\n  const fileStats = getFileStats();\n\n  // Calcular m√©tricas finales del proyecto\n  const finalMetrics = useMemo(() => {\n    if (!project) return {};\n\n    const totalWorkPackages = workPackages.length;\n    const completedWorkPackages = workPackages.filter(wp => wp.status === 'completed').length;\n    const totalBudget = workPackages.reduce((sum, wp) => sum + (wp.budget || 0), 0);\n    const totalEarned = workPackages.reduce((sum, wp) => sum + (wp.earnedValue || 0), 0);\n    const totalActual = workPackages.reduce((sum, wp) => sum + (wp.actualCost || 0), 0);\n\n    const completionPercentage = totalWorkPackages > 0 ? (completedWorkPackages / totalWorkPackages) * 100 : 0;\n    const budgetUtilization = totalBudget > 0 ? (totalActual / totalBudget) * 100 : 0;\n    const cpi = totalActual > 0 ? totalEarned / totalActual : 1;\n\n    return {\n      totalWorkPackages,\n      completedWorkPackages,\n      completionPercentage,\n      totalBudget,\n      totalEarned,\n      totalActual,\n      budgetUtilization,\n      cpi,\n      totalRisks: risks.length,\n      activeRisks: risks.filter(r => r.status === 'active').length,\n      totalTasks: tasks.length,\n      completedTasks: tasks.filter(t => t.status === 'completed').length,\n      totalFinancialItems: purchaseOrders.length + advances.length + invoices.length + contracts.length,\n      totalResourceAssignments: resourceAssignments.length,\n      totalAuditEvents: auditLog.length,\n      totalFiles: projectFiles.length,\n      totalFileSize: fileStats.totalSizeMB\n    };\n      }, [project, workPackages, risks, tasks, purchaseOrders, advances, invoices, contracts, resourceAssignments, auditLog, projectFiles, fileStats]);\n\n  // Validar que el proyecto est√© listo para archivado\n  const canArchive = useMemo(() => {\n    if (!project) return false;\n    \n    // El proyecto debe estar completado\n    if (project.status !== 'completed') return false;\n    \n    // Debe tener al menos 90% de completitud\n    if (finalMetrics.completionPercentage < 90) return false;\n    \n    // Debe tener al menos algunos work packages\n    if (finalMetrics.totalWorkPackages === 0) return false;\n    \n    return true;\n  }, [project, finalMetrics]);\n\n  // Generar expediente del proyecto\n  const generateProjectArchive = async () => {\n    if (!canArchive) return;\n\n    setIsGenerating(true);\n    setArchiveProgress(0);\n\n    try {\n      // Simular progreso de generaci√≥n\n      const steps = [\n        'Validando datos del proyecto...',\n        'Generando m√©tricas finales...',\n        'Compilando documentaci√≥n...',\n        'Creando expediente...',\n        'Finalizando archivado...'\n      ];\n\n      for (let i = 0; i < steps.length; i++) {\n        setArchiveProgress((i / steps.length) * 100);\n        await new Promise(resolve => setTimeout(resolve, 500));\n      }\n\n      // Crear objeto del expediente\n      const projectArchive = {\n        metadata: {\n          archiveDate: new Date().toISOString(),\n          archiveVersion: '1.0.0',\n          projectId: project.id,\n          projectName: project.name,\n          archiveType: 'project-completion'\n        },\n        project: {\n          ...project,\n          archivedAt: new Date().toISOString(),\n          finalMetrics: finalMetrics\n        },\n        workPackages,\n        risks,\n        tasks,\n        financial: {\n          purchaseOrders,\n          advances,\n          invoices,\n          contracts\n        },\n        resources: resourceAssignments,\n        auditLog,\n        files: projectFiles,\n        summary: {\n          totalDuration: Math.round((new Date(project.endDate) - new Date(project.startDate)) / (1000 * 60 * 60 * 24)),\n          finalBudget: finalMetrics.totalBudget,\n          finalCost: finalMetrics.totalActual,\n          completionRate: finalMetrics.completionPercentage,\n          performanceIndex: finalMetrics.cpi,\n          lessonsLearned: generateLessonsLearned()\n        }\n      };\n\n      // Exportar expediente\n      const dataStr = JSON.stringify(projectArchive, null, 2);\n      const dataBlob = new Blob([dataStr], { type: 'application/json' });\n      \n      const url = URL.createObjectURL(dataBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `expediente-${project.name.replace(/[^a-zA-Z0-9]/g, '-')}-${new Date().toISOString().split('T')[0]}.json`;\n      link.click();\n      URL.revokeObjectURL(url);\n\n      setArchiveProgress(100);\n      \n      // Llamar funci√≥n de archivado\n      if (onArchiveProject) {\n        onArchiveProject(project.id, projectArchive);\n      }\n\n    } catch (error) {\n      console.error('Error generando expediente:', error);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  // Generar lecciones aprendidas basadas en m√©tricas\n  const generateLessonsLearned = () => {\n    const lessons = [];\n    \n    if (finalMetrics.cpi < 0.9) {\n      lessons.push('El proyecto tuvo sobrecostos significativos. Revisar estimaciones de costos para futuros proyectos similares.');\n    }\n    \n    if (finalMetrics.completionPercentage < 95) {\n      lessons.push('Algunos entregables no se completaron al 100%. Mejorar el seguimiento de work packages.');\n    }\n    \n    if (finalMetrics.activeRisks > 0) {\n      lessons.push('Quedaron riesgos activos al finalizar. Implementar mejor gesti√≥n de riesgos desde el inicio.');\n    }\n    \n    if (finalMetrics.totalAuditEvents > 100) {\n      lessons.push('El proyecto tuvo muchos cambios. Implementar mejor control de cambios.');\n    }\n    \n    if (lessons.length === 0) {\n      lessons.push('El proyecto se ejecut√≥ exitosamente. Replicar buenas pr√°cticas en futuros proyectos.');\n    }\n    \n    return lessons;\n  };\n\n  if (!project) {\n    return (\n      <div className=\"text-center py-12 text-gray-500\">\n        <div className=\"text-4xl mb-4\">üìÅ</div>\n        <div className=\"text-lg mb-2\">Selecciona un proyecto para generar su expediente</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-purple-50 to-indigo-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden\">\n        {/* Elementos decorativos de fondo */}\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-purple-100/30 rounded-full -translate-y-16 translate-x-16\"></div>\n        <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-indigo-100/30 rounded-full translate-y-12 -translate-x-12\"></div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <div className=\"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm\">\n                <span className=\"text-3xl\">üìÅ</span>\n              </div>\n              <div>\n                <h1 className=\"text-4xl font-bold mb-2 text-gray-800\">Archivado de Proyecto</h1>\n                <p className=\"text-gray-600 text-lg\">\n                  Generar expediente completo y archivar \"{project.name}\"\n                </p>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-4xl font-bold text-gray-800\">\n                {finalMetrics.completionPercentage.toFixed(1)}%\n              </div>\n              <div className=\"text-gray-600\">Completitud</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Estado del Proyecto */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Estado del Proyecto</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <div className=\"text-sm text-gray-600 mb-1\">Estado Actual</div>\n            <div className=\"flex items-center space-x-2\">\n              <span className={`px-2 py-1 rounded-full text-xs font-medium border ${getStatusColor(project.status)}`}>\n                {getStatusIcon(project.status)} {project.status}\n              </span>\n            </div>\n          </div>\n          <div>\n            <div className=\"text-sm text-gray-600 mb-1\">Manager</div>\n            <div className=\"font-medium\">{project.manager}</div>\n          </div>\n          <div>\n            <div className=\"text-sm text-gray-600 mb-1\">Presupuesto Original</div>\n            <div className=\"font-medium\">${(project.budget / 1000).toFixed(0)}K USD</div>\n          </div>\n          <div>\n            <div className=\"text-sm text-gray-600 mb-1\">Per√≠odo</div>\n            <div className=\"font-medium\">{project.startDate} - {project.endDate}</div>\n          </div>\n        </div>\n      </div>\n\n      {/* M√©tricas Finales */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">M√©tricas Finales</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n            <div className=\"text-2xl font-bold text-blue-600\">{finalMetrics.totalWorkPackages}</div>\n            <div className=\"text-sm text-gray-600\">Work Packages</div>\n            <div className=\"text-xs text-gray-500\">{finalMetrics.completedWorkPackages} completados</div>\n          </div>\n          <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n            <div className=\"text-2xl font-bold text-green-600\">${(finalMetrics.totalBudget / 1000).toFixed(0)}K</div>\n            <div className=\"text-sm text-gray-600\">Presupuesto Total</div>\n            <div className=\"text-xs text-gray-500\">${(finalMetrics.totalActual / 1000).toFixed(0)}K gastado</div>\n          </div>\n          <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n            <div className=\"text-2xl font-bold text-purple-600\">{finalMetrics.totalAuditEvents}</div>\n            <div className=\"text-sm text-gray-600\">Eventos de Auditor√≠a</div>\n            <div className=\"text-xs text-gray-500\">Registros completos</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Informaci√≥n del Audit Log */}\n      {auditLog.length > 0 && (\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">üìã Registro de Auditor√≠a</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600\">Total de eventos registrados:</span>\n              <span className=\"font-semibold text-purple-600\">{auditLog.length}</span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600\">Primer evento:</span>\n              <span className=\"text-sm text-gray-500\">\n                {auditLog.length > 0 ? new Date(auditLog[auditLog.length - 1].timestamp).toLocaleDateString() : 'N/A'}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600\">√öltimo evento:</span>\n              <span className=\"text-sm text-gray-500\">\n                {auditLog.length > 0 ? new Date(auditLog[0].timestamp).toLocaleDateString() : 'N/A'}\n              </span>\n            </div>\n            <div className=\"mt-3 p-3 bg-purple-50 border border-purple-200 rounded-lg\">\n              <div className=\"text-sm text-purple-800\">\n                <strong>‚úÖ Audit Log incluido:</strong> El expediente incluir√° todos los eventos de auditor√≠a registrados \n                desde la activaci√≥n del proyecto hasta su completitud.\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Validaci√≥n de Archivado */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Validaci√≥n de Archivado</h3>\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center space-x-3\">\n            <span className={`text-xl ${project.status === 'completed' ? 'text-green-500' : 'text-red-500'}`}>\n              {project.status === 'completed' ? '‚úÖ' : '‚ùå'}\n            </span>\n            <span className=\"text-sm\">Proyecto marcado como completado</span>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <span className={`text-xl ${finalMetrics.completionPercentage >= 90 ? 'text-green-500' : 'text-red-500'}`}>\n              {finalMetrics.completionPercentage >= 90 ? '‚úÖ' : '‚ùå'}\n            </span>\n            <span className=\"text-sm\">Completitud m√≠nima del 90% ({finalMetrics.completionPercentage.toFixed(1)}%)</span>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <span className={`text-xl ${finalMetrics.totalWorkPackages > 0 ? 'text-green-500' : 'text-red-500'}`}>\n              {finalMetrics.totalWorkPackages > 0 ? '‚úÖ' : '‚ùå'}\n            </span>\n            <span className=\"text-sm\">Work packages definidos ({finalMetrics.totalWorkPackages})</span>\n          </div>\n        </div>\n        \n        {!canArchive && (\n          <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n            <div className=\"text-sm text-red-800\">\n              <strong>No se puede archivar:</strong> El proyecto no cumple con los criterios m√≠nimos de archivado.\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Contenido del Expediente */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Contenido del Expediente</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Informaci√≥n del proyecto</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Work packages completos</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Gesti√≥n de riesgos</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Cronograma y tareas</span>\n            </div>\n          </div>\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Documentaci√≥n financiera</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Asignaci√≥n de recursos</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Auditor√≠a completa ({auditLog.length} eventos)</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Archivos adjuntos ({projectFiles.length} archivos, {fileStats.totalSizeMB}MB)</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-green-500\">‚úÖ</span>\n              <span className=\"text-sm\">Lecciones aprendidas</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Progreso de Generaci√≥n */}\n      {isGenerating && (\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Generando Expediente</h3>\n          <div className=\"space-y-4\">\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div \n                className=\"bg-blue-600 h-2 rounded-full transition-all duration-500\"\n                style={{ width: `${archiveProgress}%` }}\n              ></div>\n            </div>\n            <div className=\"text-sm text-gray-600 text-center\">\n              {archiveProgress.toFixed(0)}% completado\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Bot√≥n de Archivado */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-800\">Archivar Proyecto</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Generar expediente completo y cambiar estado a \"Archivado\"\n            </p>\n          </div>\n          <button\n            onClick={generateProjectArchive}\n            disabled={!canArchive || isGenerating}\n            className={`\n              px-6 py-3 rounded-lg font-medium transition-colors\n              ${canArchive && !isGenerating\n                ? 'bg-purple-600 text-white hover:bg-purple-700'\n                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              }\n            `}\n          >\n            {isGenerating ? 'Generando...' : 'üìÅ Generar Expediente y Archivar'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Funciones helper\nconst getStatusColor = (status) => {\n  switch(status) {\n    case 'active': return 'bg-green-100 text-green-800 border-green-200';\n    case 'inactive': return 'bg-gray-100 text-gray-600 border-gray-300';\n    case 'completed': return 'bg-blue-100 text-blue-800 border-blue-200';\n    case 'on-hold': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n    case 'cancelled': return 'bg-red-100 text-red-800 border-red-200';\n    case 'archived': return 'bg-purple-100 text-purple-800 border-purple-200';\n    default: return 'bg-gray-100 text-gray-800 border-gray-200';\n  }\n};\n\nconst getStatusIcon = (status) => {\n  switch(status) {\n    case 'active': return 'üü¢';\n    case 'inactive': return '‚ö´';\n    case 'completed': return '‚úÖ';\n    case 'on-hold': return '‚è∏Ô∏è';\n    case 'cancelled': return '‚ùå';\n    case 'archived': return 'üìÅ';\n    default: return '‚è∏Ô∏è';\n  }\n};\n\nexport default ProjectArchive;\n"],"names":["getStatusColor","status","getStatusIcon","_ref","project","workPackages","risks","tasks","purchaseOrders","advances","invoices","contracts","resourceAssignments","onArchiveProject","isGenerating","setIsGenerating","useState","archiveProgress","setArchiveProgress","auditLog","getProjectAuditLog","savedLog","localStorage","getItem","concat","id","JSON","parse","error","console","files","projectFiles","getFileStats","useFileStorage","fileStats","finalMetrics","useMemo","totalWorkPackages","length","completedWorkPackages","filter","wp","totalBudget","reduce","sum","budget","totalEarned","earnedValue","totalActual","actualCost","completionPercentage","budgetUtilization","cpi","totalRisks","activeRisks","r","totalTasks","completedTasks","t","totalFinancialItems","totalResourceAssignments","totalAuditEvents","totalFiles","totalFileSize","totalSizeMB","canArchive","generateLessonsLearned","lessons","push","_jsxs","className","children","_jsx","name","toFixed","manager","startDate","endDate","Date","timestamp","toLocaleDateString","style","width","onClick","async","steps","i","Promise","resolve","setTimeout","projectArchive","metadata","archiveDate","toISOString","archiveVersion","projectId","projectName","archiveType","_objectSpread","archivedAt","financial","resources","summary","totalDuration","Math","round","finalBudget","finalCost","completionRate","performanceIndex","lessonsLearned","dataStr","stringify","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","replace","split","click","revokeObjectURL","disabled"],"sourceRoot":""}