{"version":3,"file":"static/js/644.cc5bf0b8.chunk.js","mappings":"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","sources":["components/BackupManager.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst BackupManager = ({ projects, workPackagesByProject, risksByProject, tasksByProject, purchaseOrdersByProject, advancesByProject, invoicesByProject, contractsByProject, globalResources, resourceAssignmentsByProject, viewMode, currentProjectId }) => {\n  const [backups, setBackups] = useState([]);\n  const [showBackupManager, setShowBackupManager] = useState(false);\n\n  // Cargar backups existentes al montar el componente\n  useEffect(() => {\n    loadBackups();\n  }, []);\n\n  // ELIMINADO: Backup automÃ¡tico - ahora solo se usan backups manuales y auto-save\n\n  const loadBackups = () => {\n    const savedBackups = localStorage.getItem('mi-dashboard-backups');\n    if (savedBackups) {\n      try {\n        setBackups(JSON.parse(savedBackups));\n      } catch (error) {\n        console.error('Error cargando backups:', error);\n      }\n    }\n  };\n\n  const saveBackups = (newBackups) => {\n    localStorage.setItem('mi-dashboard-backups', JSON.stringify(newBackups));\n    setBackups(newBackups);\n  };\n\n  const createBackup = (isAutomatic = false) => {\n    const timestamp = new Date().toISOString();\n    const backupData = {\n      id: `backup-${Date.now()}`,\n      name: isAutomatic ? `Backup AutomÃ¡tico - ${new Date().toLocaleString()}` : `Backup Manual - ${new Date().toLocaleString()}`,\n      timestamp,\n      data: {\n        projects,\n        currentProjectId,\n        workPackagesByProject,\n        risksByProject,\n        tasksByProject,\n        purchaseOrdersByProject,\n        advancesByProject,\n        invoicesByProject,\n        contractsByProject,\n        globalResources,\n        resourceAssignmentsByProject,\n        viewMode\n      },\n      size: JSON.stringify({\n        projects,\n        workPackagesByProject,\n        risksByProject,\n        tasksByProject,\n        purchaseOrdersByProject,\n        advancesByProject,\n        invoicesByProject,\n        contractsByProject,\n        globalResources,\n        resourceAssignmentsByProject\n      }).length,\n      isAutomatic\n    };\n\n    // Crear archivo de respaldo descargable\n    const fileName = `mi-dashboard-backup-${new Date().toISOString().split('T')[0]}-${Date.now()}.json`;\n    const dataStr = JSON.stringify(backupData.data, null, 2);\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\n    \n    // Crear enlace de descarga automÃ¡tica\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n\n    const newBackups = [backupData, ...backups].slice(0, 10); // Mantener solo los Ãºltimos 10 backups\n    saveBackups(newBackups);\n\n    // Disparar evento de backup creado\n    const backupEvent = new CustomEvent('backupCreated', {\n      detail: { backupId: backupData.id, isAutomatic, timestamp, fileName }\n    });\n    window.dispatchEvent(backupEvent);\n\n    return backupData;\n  };\n\n  const createAutomaticBackup = () => {\n    createBackup(true);\n  };\n\n  const restoreBackup = (backupId) => {\n    const backup = backups.find(b => b.id === backupId);\n    if (!backup) return;\n\n    if (window.confirm(`Â¿EstÃ¡ seguro de restaurar el backup \"${backup.name}\"? Esto reemplazarÃ¡ todos los datos actuales.`)) {\n      // Restaurar datos\n      const { data } = backup;\n      \n      // Disparar evento de restauraciÃ³n\n      const restoreEvent = new CustomEvent('dataRestore', {\n        detail: { \n          backupId, \n          backupName: backup.name,\n          timestamp: new Date().toISOString(),\n          data \n        }\n      });\n      window.dispatchEvent(restoreEvent);\n\n      alert(`âœ… Backup \"${backup.name}\" restaurado exitosamente. Recarga la pÃ¡gina para ver los cambios.`);\n    }\n  };\n\n  const deleteBackup = (backupId) => {\n    if (window.confirm('Â¿EstÃ¡ seguro de eliminar este backup?')) {\n      const newBackups = backups.filter(b => b.id !== backupId);\n      saveBackups(newBackups);\n    }\n  };\n\n  const importBackup = () => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = (e) => {\n      const file = e.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          try {\n            const importedData = JSON.parse(e.target.result);\n            \n            if (window.confirm('Â¿EstÃ¡ seguro de importar este backup? Esto reemplazarÃ¡ todos los datos actuales.')) {\n              // Disparar evento de importaciÃ³n\n              const importEvent = new CustomEvent('dataImport', {\n                detail: { \n                  fileName: file.name,\n                  timestamp: new Date().toISOString(),\n                  data: importedData \n                }\n              });\n              window.dispatchEvent(importEvent);\n\n              alert(`âœ… Backup \"${file.name}\" importado exitosamente. Recarga la pÃ¡gina para ver los cambios.`);\n            }\n          } catch (error) {\n            alert('âŒ Error al importar el backup. Verifique que el archivo sea vÃ¡lido.');\n            console.error('Error importing backup:', error);\n          }\n        };\n        reader.readAsText(file);\n      }\n    };\n    input.click();\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const formatDate = (timestamp) => {\n    return new Date(timestamp).toLocaleString('es-ES', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit'\n    });\n  };\n\n  if (!showBackupManager) {\n    return null; // BotÃ³n de backups removido - ahora se usa el indicador de nube en su lugar\n    // return (\n    //   <button\n    //     onClick={() => setShowBackupManager(true)}\n    //     className=\"fixed bottom-4 left-4 bg-purple-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-purple-700 transition-colors z-40\"\n    //     title=\"Gestionar Backups\"\n    //   >\n    //     ğŸ’¾ Backups ({backups.length})\n    //   </button>\n    // );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden\">\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <h2 className=\"text-2xl font-bold text-gray-800\">ğŸ’¾ GestiÃ³n de Backups</h2>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => createBackup(false)}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              ğŸ“¥ Crear Backup Manual\n            </button>\n            <button\n              onClick={importBackup}\n              className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              ğŸ“¤ Importar Backup\n            </button>\n            <button\n              onClick={() => setShowBackupManager(false)}\n              className=\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors\"\n            >\n              âœ• Cerrar\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\n          {backups.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              <div className=\"text-4xl mb-4\">ğŸ’¾</div>\n              <div>No hay backups disponibles</div>\n              <div className=\"text-sm mt-2\">Los backups automÃ¡ticos se crean cada 30 minutos</div>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {backups.map((backup) => (\n                <div key={backup.id} className=\"border rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2\">\n                        <h3 className=\"font-semibold text-gray-800\">{backup.name}</h3>\n                        {backup.isAutomatic && (\n                          <span className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                            AutomÃ¡tico\n                          </span>\n                        )}\n                      </div>\n                      <div className=\"text-sm text-gray-600 mt-1\">\n                        <div>ğŸ“… {formatDate(backup.timestamp)}</div>\n                        <div>ğŸ“Š {formatFileSize(backup.size)}</div>\n                        <div>ğŸ†” {backup.id}</div>\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <button\n                        onClick={() => restoreBackup(backup.id)}\n                        className=\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors\"\n                        title=\"Restaurar este backup\"\n                      >\n                        ğŸ”„ Restaurar\n                      </button>\n                      <button\n                        onClick={() => deleteBackup(backup.id)}\n                        className=\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors\"\n                        title=\"Eliminar este backup\"\n                      >\n                        ğŸ—‘ï¸ Eliminar\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        <div className=\"p-6 border-t bg-gray-50\">\n          <div className=\"text-sm text-gray-600\">\n            <div className=\"flex items-center space-x-4\">\n              <span>ğŸ“Š Total de backups: {backups.length}</span>\n              <span>ğŸ”„ Backups automÃ¡ticos cada 30 minutos</span>\n              <span>ğŸ’¾ MÃ¡ximo 10 backups guardados</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BackupManager;\n"],"names":["_ref","projects","workPackagesByProject","risksByProject","tasksByProject","purchaseOrdersByProject","advancesByProject","invoicesByProject","contractsByProject","globalResources","resourceAssignmentsByProject","viewMode","currentProjectId","backups","setBackups","useState","showBackupManager","setShowBackupManager","useEffect","loadBackups","savedBackups","localStorage","getItem","JSON","parse","error","console","saveBackups","newBackups","setItem","stringify","createBackup","isAutomatic","arguments","length","undefined","timestamp","Date","toISOString","backupData","id","concat","now","name","toLocaleString","data","size","fileName","split","dataStr","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","slice","backupEvent","CustomEvent","detail","backupId","window","dispatchEvent","formatFileSize","bytes","i","Math","floor","log","parseFloat","pow","toFixed","_jsx","className","children","_jsxs","onClick","importBackup","input","accept","onchange","e","file","target","files","reader","FileReader","onload","importedData","result","confirm","importEvent","alert","readAsText","map","backup","year","month","day","hour","minute","second","find","b","restoreEvent","backupName","restoreBackup","title","filter","deleteBackup"],"sourceRoot":""}