{"version":3,"file":"static/js/954.56ec5058.chunk.js","mappings":"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","sources":["components/ConsolidatedCashFlow.js","components/dashboard/CashFlowChart.jsx","components/ConsolidatedDashboard.js"],"sourcesContent":["import { logger } from '../utils/logger';\n\nimport React, { useState, useMemo } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport * as XLSX from 'xlsx';\n\n// Registrar los componentes de Chart.js\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\n\nconst ConsolidatedCashFlow = ({ \n  projects = [],\n  tasksByProject = {},\n  purchaseOrdersByProject = {},\n  advancesByProject = {},\n  invoicesByProject = {}\n}) => {\n  const [projectionPeriod, setProjectionPeriod] = useState('12'); // meses\n  const [projectionStartDate, setProjectionStartDate] = useState(new Date().toISOString().split('T')[0]);\n  \n  // Filtrar solo proyectos activos\n  const activeProjects = projects.filter(p => p.status === 'active');\n  \n  // Logs de depuraciÃ³n\n  logger.debug('ðŸ” CONSOLIDATED CASHFLOW DEBUG:', {\n    projects: projects?.length || 0,\n    activeProjects: activeProjects.length,\n    tasksByProject: Object.keys(tasksByProject || {}).length,\n    purchaseOrdersByProject: Object.keys(purchaseOrdersByProject || {}).length,\n    advancesByProject: Object.keys(advancesByProject || {}).length,\n    invoicesByProject: Object.keys(invoicesByProject || {}).length,\n    activeProjectIds: activeProjects.map(p => p.id)\n  });\n  \n  // Log detallado de Ã³rdenes de compra\n  Object.keys(purchaseOrdersByProject || {}).forEach(projectId => {\n    const pos = purchaseOrdersByProject[projectId] || [];\n    logger.debug(`ðŸ” Ã“RDENES DE COMPRA para proyecto ${projectId}:`, {\n      total: pos.length,\n      orders: pos.map(po => ({\n        id: po.id,\n        number: po.number,\n        approvalDate: po.approvalDate,\n        date: po.date,\n        status: po.status,\n        totalAmount: po.totalAmount\n      }))\n    });\n  });\n  \n  // Calcular gasto planificado del mes basado en costos del cronograma\n  const calculateMonthPlannedExpense = (tasks, monthDate) => {\n    if (!tasks || tasks.length === 0) return 0;\n    \n    const monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    const monthEnd = new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0);\n    \n    return tasks.reduce((total, task) => {\n      const taskStart = new Date(task.startDate);\n      const taskEnd = new Date(task.endDate);\n      \n      // Verificar si la tarea se ejecuta en este mes\n      if (taskStart <= monthEnd && taskEnd >= monthStart) {\n        return total + (task.cost || 0);\n      }\n      return total;\n    }, 0);\n  };\n  \n  // Calcular gasto comprometido del mes (ordenes de compra aprobadas)\n  const calculateMonthCommittedExpense = (purchaseOrders, monthDate) => {\n    logger.debug('ðŸ” CALCULANDO GASTO COMPROMETIDO - Iniciando funciÃ³n:', {\n      purchaseOrdersLength: purchaseOrders?.length || 0,\n      monthDate: monthDate.toISOString().substring(0, 7),\n      purchaseOrders: purchaseOrders\n    });\n    \n    if (!purchaseOrders || purchaseOrders.length === 0) {\n      logger.debug('ðŸ” No hay Ã³rdenes de compra para calcular gasto comprometido');\n      return 0;\n    }\n    \n    const monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    const monthEnd = new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0);\n    \n    // Ajustar las fechas para incluir todo el dÃ­a\n    monthStart.setHours(0, 0, 0, 0);\n    monthEnd.setHours(23, 59, 59, 999);\n    \n    logger.debug('ðŸ” Calculando gasto comprometido para mes:', {\n      month: monthDate.toISOString().substring(0, 7),\n      monthStart: monthStart.toISOString().split('T')[0],\n      monthEnd: monthEnd.toISOString().split('T')[0],\n      totalPOs: purchaseOrders.length\n    });\n    \n    // Log detallado de cada orden de compra ANTES del reduce\n    logger.debug('ðŸ” DETALLE COMPLETO DE Ã“RDENES DE COMPRA:');\n    purchaseOrders.forEach((po, index) => {\n      logger.debug(`ðŸ” OC ${index + 1}:`, {\n        id: po.id,\n        number: po.number,\n        approvalDate: po.approvalDate,\n        date: po.date,\n        status: po.status,\n        totalAmount: po.totalAmount,\n        allFields: Object.keys(po)\n      });\n    });\n    \n    return purchaseOrders.reduce((total, po) => {\n      // Validar que la orden estÃ© aprobada\n      const isApproved = po.status === 'approved' || po.status === 'delivered';\n      if (!isApproved) return total;\n      \n      // Validar y crear fecha de forma segura\n      let poDate;\n      if (po.approvalDate && po.approvalDate.trim() !== '') {\n        poDate = new Date(po.approvalDate + 'T00:00:00');\n      } else if (po.date && po.date.trim() !== '') {\n        poDate = new Date(po.date + 'T00:00:00');\n      } else {\n        logger.debug('âš ï¸ OC sin fecha vÃ¡lida:', {\n          id: po.id,\n          number: po.number,\n          approvalDate: po.approvalDate,\n          date: po.date\n        });\n        return total;\n      }\n      \n      // Verificar que la fecha sea vÃ¡lida\n      if (isNaN(poDate.getTime())) {\n        logger.debug('âš ï¸ OC con fecha invÃ¡lida:', {\n          id: po.id,\n          number: po.number,\n          approvalDate: po.approvalDate,\n          date: po.date,\n          poDate: poDate\n        });\n        return total;\n      }\n      \n      const isInMonth = poDate >= monthStart && poDate <= monthEnd;\n      \n      logger.debug('ðŸ” Evaluando OC:', {\n        id: po.id,\n        number: po.number,\n        approvalDate: po.approvalDate,\n        date: po.date,\n        poDate: poDate.toISOString().split('T')[0],\n        monthStart: monthStart.toISOString().split('T')[0],\n        monthEnd: monthEnd.toISOString().split('T')[0],\n        status: po.status,\n        totalAmount: po.totalAmount,\n        isInMonth,\n        isApproved,\n        willInclude: isInMonth && isApproved\n      });\n      \n      if (isInMonth) {\n        logger.debug(`âœ… INCLUYENDO OC ${po.number}: $${po.totalAmount} en mes ${monthDate.toISOString().substring(0, 7)}`);\n        return total + (po.totalAmount || 0);\n      }\n      return total;\n    }, 0);\n  };\n  \n  // Calcular gasto real del mes (anticipos pagados + facturas pagadas)\n  const calculateMonthRealExpense = (advances, invoices, monthDate) => {\n    if (!advances && !invoices) return 0;\n    \n    const monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    const monthEnd = new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0);\n    \n    let totalReal = 0;\n    \n    // Sumar anticipos pagados\n    if (advances && advances.length > 0) {\n      totalReal += advances.reduce((sum, advance) => {\n        if (!advance.paymentDate || advance.paymentDate.trim() === '') return sum;\n        \n        const advanceDate = new Date(advance.paymentDate + 'T00:00:00');\n        if (isNaN(advanceDate.getTime())) return sum;\n        \n        const isInMonth = advanceDate >= monthStart && advanceDate <= monthEnd;\n        const isPaid = advance.status === 'paid';\n        \n        if (isInMonth && isPaid) {\n          return sum + (advance.amount || 0);\n        }\n        return sum;\n      }, 0);\n    }\n    \n    // Sumar facturas pagadas\n    if (invoices && invoices.length > 0) {\n      totalReal += invoices.reduce((sum, invoice) => {\n        if (!invoice.paymentDate || invoice.paymentDate.trim() === '') return sum;\n        \n        const invoiceDate = new Date(invoice.paymentDate + 'T00:00:00');\n        if (isNaN(invoiceDate.getTime())) return sum;\n        \n        const isInMonth = invoiceDate >= monthStart && invoiceDate <= monthEnd;\n        const isPaid = invoice.status === 'pagada';\n        \n        if (isInMonth && isPaid) {\n          return sum + (invoice.amount || 0);\n        }\n        return sum;\n      }, 0);\n    }\n    \n    return totalReal;\n  };\n  \n  // Calcular flujo de caja consolidado\n  const consolidatedCashFlow = useMemo(() => {\n    if (activeProjects.length === 0) return { projection: [], metrics: {} };\n    \n    const months = [];\n    const startDate = new Date(projectionStartDate);\n    \n    for (let i = 0; i < parseInt(projectionPeriod); i++) {\n      const monthDate = new Date(startDate.getFullYear(), startDate.getMonth() + i, 1);\n      const monthKey = monthDate.toISOString().split('T')[0].substring(0, 7); // YYYY-MM\n      \n      let totalPlannedExpense = 0;\n      let totalCommittedExpense = 0;\n      let totalRealExpense = 0;\n      \n      // Consolidar datos de todos los proyectos activos\n      activeProjects.forEach(project => {\n        const projectTasks = tasksByProject[project.id] || [];\n        const projectPurchaseOrders = purchaseOrdersByProject[project.id] || [];\n        const projectAdvances = advancesByProject[project.id] || [];\n        const projectInvoices = invoicesByProject[project.id] || [];\n        \n        logger.debug(`ðŸ” Proyecto ${project.id} (${project.name}):`, {\n          tasks: projectTasks.length,\n          purchaseOrders: projectPurchaseOrders.length,\n          advances: projectAdvances.length,\n          invoices: projectInvoices.length\n        });\n        \n        // Calcular gasto planificado del mes (basado en costos del cronograma)\n        const monthPlannedExpense = calculateMonthPlannedExpense(projectTasks, monthDate);\n        totalPlannedExpense += monthPlannedExpense;\n        \n        // Calcular gasto comprometido del mes (ordenes de compra aprobadas)\n        logger.debug(`ðŸ” LLAMANDO calculateMonthCommittedExpense para proyecto ${project.id} en mes ${monthKey}`);\n        const monthCommittedExpense = calculateMonthCommittedExpense(projectPurchaseOrders, monthDate);\n        logger.debug(`ðŸ” RESULTADO calculateMonthCommittedExpense: $${monthCommittedExpense}`);\n        totalCommittedExpense += monthCommittedExpense;\n        \n        // Calcular gasto real del mes (anticipos pagados + facturas pagadas)\n        const monthRealExpense = calculateMonthRealExpense(projectAdvances, projectInvoices, monthDate);\n        totalRealExpense += monthRealExpense;\n        \n        logger.debug(`ðŸ” Gastos del mes ${monthKey} para proyecto ${project.id}:`, {\n          planned: monthPlannedExpense,\n          committed: monthCommittedExpense,\n          real: monthRealExpense\n        });\n      });\n      \n      months.push({\n        month: monthDate.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' }),\n        monthKey,\n        revenue: totalPlannedExpense, // Gasto planificado\n        expenses: totalCommittedExpense, // Gasto comprometido\n        realExpenses: totalRealExpense, // Gasto real\n        netFlow: totalPlannedExpense - totalRealExpense // Flujo neto (planificado - real)\n      });\n    }\n    \n    return {\n      projection: months,\n      metrics: {\n        totalPlannedExpense: months.reduce((sum, m) => sum + m.revenue, 0),\n        totalCommittedExpenses: months.reduce((sum, m) => sum + m.expenses, 0),\n        totalRealExpenses: months.reduce((sum, m) => sum + m.realExpenses, 0),\n        totalNetCashFlow: months.reduce((sum, m) => sum + m.netFlow, 0)\n      }\n    };\n  }, [activeProjects, tasksByProject, purchaseOrdersByProject, advancesByProject, invoicesByProject, projectionPeriod, projectionStartDate]);\n  \n  // Exportar a Excel\n  const exportToExcel = () => {\n    const data = consolidatedCashFlow.projection.map(month => ({\n      'Mes': month.month,\n      'Gasto Planificado': month.revenue,\n      'Gasto Comprometido (OCs)': month.expenses,\n      'Gasto Real': month.realExpenses,\n      'Flujo Neto': month.netFlow\n    }));\n    \n    const ws = XLSX.utils.json_to_sheet(data);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'Flujo de Caja Consolidado');\n    \n    const fileName = `Flujo_Caja_Consolidado_${new Date().toISOString().split('T')[0]}.xlsx`;\n    XLSX.writeFile(wb, fileName);\n  };\n  \n  if (activeProjects.length === 0) {\n    return (\n      <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸ’°</span>\n          Flujo de Caja Consolidado\n        </h2>\n        <div className=\"text-center py-8\">\n          <div className=\"text-gray-500 text-lg\">No hay proyectos activos para mostrar el flujo de caja consolidado</div>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-800 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸ’°</span>\n          Flujo de Caja Consolidado\n        </h2>\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <label className=\"text-sm font-medium text-gray-700\">PerÃ­odo:</label>\n            <select\n              value={projectionPeriod}\n              onChange={(e) => setProjectionPeriod(e.target.value)}\n              className=\"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"6\">6 meses</option>\n              <option value=\"12\">12 meses</option>\n              <option value=\"18\">18 meses</option>\n              <option value=\"24\">24 meses</option>\n            </select>\n          </div>\n          <button\n            onClick={exportToExcel}\n            className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors\"\n          >\n            <span>ðŸ“Š</span>\n            <span>Exportar Excel</span>\n          </button>\n        </div>\n      </div>\n      \n      {/* MÃ©tricas consolidadas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <div className=\"bg-orange-50 rounded-lg p-4 border border-orange-200\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-lg\">ðŸ’°</span>\n            <span className=\"text-sm font-medium text-orange-600\">Gasto Planificado Total</span>\n          </div>\n          <div className=\"text-2xl font-bold text-orange-800\">\n            ${(consolidatedCashFlow.metrics.totalPlannedExpense / 1000).toFixed(0)}K\n          </div>\n        </div>\n        \n        <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-lg\">ðŸ“‹</span>\n            <span className=\"text-sm font-medium text-blue-600\">Gasto Comprometido Total</span>\n          </div>\n          <div className=\"text-2xl font-bold text-blue-800\">\n            ${(consolidatedCashFlow.metrics.totalCommittedExpenses / 1000).toFixed(0)}K\n          </div>\n        </div>\n        \n        <div className=\"bg-red-50 rounded-lg p-4 border border-red-200\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-lg\">ðŸ’¸</span>\n            <span className=\"text-sm font-medium text-red-600\">Gasto Real Total</span>\n          </div>\n          <div className=\"text-2xl font-bold text-red-800\">\n            ${(consolidatedCashFlow.metrics.totalRealExpenses / 1000).toFixed(0)}K\n          </div>\n        </div>\n        \n        <div className=\"bg-green-50 rounded-lg p-4 border border-green-200\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-lg\">ðŸ“ˆ</span>\n            <span className=\"text-sm font-medium text-green-600\">Flujo Neto Total</span>\n          </div>\n          <div className=\"text-2xl font-bold text-green-800\">\n            ${(consolidatedCashFlow.metrics.totalNetCashFlow / 1000).toFixed(0)}K\n          </div>\n        </div>\n      </div>\n      \n      {/* GrÃ¡fico de barras */}\n      <div className=\"mb-8\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Gasto Planificado vs Gasto Comprometido vs Gasto Real</h3>\n        <div className=\"bg-gray-50 rounded-lg p-4\">\n          <Bar \n            data={{\n              labels: consolidatedCashFlow.projection.map(month => month.month),\n              datasets: [\n                {\n                  label: 'Gasto Planificado',\n                  data: consolidatedCashFlow.projection.map(month => month.revenue),\n                  backgroundColor: 'rgba(255, 159, 64, 0.8)',\n                  borderColor: 'rgba(255, 159, 64, 1)',\n                  borderWidth: 1\n                },\n                {\n                  label: 'Gasto Comprometido (OCs)',\n                  data: consolidatedCashFlow.projection.map(month => month.expenses),\n                  backgroundColor: 'rgba(54, 162, 235, 0.8)',\n                  borderColor: 'rgba(54, 162, 235, 1)',\n                  borderWidth: 1\n                },\n                {\n                  label: 'Gasto Real',\n                  data: consolidatedCashFlow.projection.map(month => month.realExpenses),\n                  backgroundColor: 'rgba(255, 99, 132, 0.8)',\n                  borderColor: 'rgba(255, 99, 132, 1)',\n                  borderWidth: 1\n                }\n              ]\n            }}\n            options={{\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: {\n                title: {\n                  display: false\n                },\n                legend: {\n                  position: 'bottom',\n                  labels: {\n                    padding: 20,\n                    usePointStyle: true\n                  }\n                }\n              },\n              scales: {\n                x: {\n                  stacked: false,\n                  title: {\n                    display: true,\n                    text: 'Meses'\n                  },\n                  ticks: {\n                    maxRotation: 60,\n                    minRotation: 60,\n                    padding: 15,\n                    font: {\n                      size: 9\n                    }\n                  }\n                },\n                y: {\n                  stacked: false,\n                  beginAtZero: true,\n                  title: {\n                    display: true,\n                    text: 'Monto (USD)'\n                  },\n                  ticks: {\n                    callback: function(value) {\n                      return '$' + value.toLocaleString();\n                    }\n                  }\n                }\n              }\n            }}\n            height={400}\n          />\n        </div>\n      </div>\n      \n      {/* Tabla de proyecciÃ³n mensual */}\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full border-collapse\">\n          <thead>\n            <tr className=\"bg-gray-50\">\n              <th className=\"w-1/5 border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700\">Mes</th>\n              <th className=\"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700\">Gasto Planificado</th>\n              <th className=\"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700\">Gasto Comprometido (OCs)</th>\n              <th className=\"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700\">Gasto Real</th>\n              <th className=\"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700\">Flujo Neto</th>\n            </tr>\n          </thead>\n          <tbody>\n            {consolidatedCashFlow.projection.map((month, index) => (\n              <tr key={index} className=\"hover:bg-gray-50\">\n                <td className=\"w-1/5 border border-gray-300 px-4 py-3 font-medium text-gray-800\">\n                  {month.month}\n                </td>\n                <td className=\"w-1/5 border border-gray-300 px-4 py-3 text-right text-orange-600 font-medium\">\n                  ${month.revenue.toLocaleString()}\n                </td>\n                <td className=\"w-1/5 border border-gray-300 px-4 py-3 text-right text-blue-600 font-medium\">\n                  ${month.expenses.toLocaleString()}\n                </td>\n                <td className=\"w-1/5 border border-gray-300 px-4 py-3 text-right text-red-600 font-medium\">\n                  ${month.realExpenses.toLocaleString()}\n                </td>\n                <td className={`w-1/5 border border-gray-300 px-4 py-3 text-right font-medium ${\n                  month.netFlow >= 0 ? 'text-green-600' : 'text-red-600'\n                }`}>\n                  ${month.netFlow.toLocaleString()}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default ConsolidatedCashFlow;\n","import React, { useMemo } from 'react';\nimport { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from 'recharts';\nimport { formatCurrency } from '../../utils/formatters';\n\nconst CashFlowChart = ({ totalPurchaseOrders, totalAdvances, totalInvoices }) => {\n  const chartData = useMemo(() => {\n    const porPagar = totalPurchaseOrders - (totalAdvances + totalInvoices);\n    \n    return [\n      { name: 'Anticipos', value: totalAdvances, color: '#3B82F6' },\n      { name: 'FacturaciÃ³n', value: totalInvoices, color: '#9CA3AF' },\n      { name: 'Por pagar', value: Math.max(0, porPagar), color: '#1E3A8A' }\n    ];\n  }, [totalPurchaseOrders, totalAdvances, totalInvoices]);\n\n  const CustomTooltip = ({ active, payload }) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"bg-white p-3 rounded-lg shadow-lg border border-gray-200\">\n          <p className=\"font-semibold text-gray-800\">{payload[0].name}</p>\n          <p className=\"text-lg font-bold\" style={{ color: payload[0].payload.color }}>\n            {formatCurrency(payload[0].value)}\n          </p>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  const renderCustomLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, value }) => {\n    const RADIAN = Math.PI / 180;\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\n\n    return (\n      <text\n        x={x}\n        y={y}\n        fill=\"black\"\n        textAnchor={x > cx ? 'start' : 'end'}\n        dominantBaseline=\"central\"\n        className=\"font-bold text-sm\"\n      >\n        {formatCurrency(value)}\n      </text>\n    );\n  };\n\n  const renderLegend = (props) => {\n    const { payload } = props;\n    return (\n      <div className=\"flex justify-center items-center space-x-6 mt-4\">\n        {payload.map((entry, index) => (\n          <div key={`legend-${index}`} className=\"flex items-center space-x-2\">\n            <div\n              className=\"w-4 h-4 rounded-full\"\n              style={{ backgroundColor: entry.color }}\n            />\n            <span className=\"text-sm font-medium text-gray-700\">{entry.value}</span>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-cyan-500\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n        <span className=\"text-3xl mr-3\">ðŸ’µ</span>\n        Flujo de Caja $M MXN\n      </h2>\n      \n      <div className=\"w-full\" style={{ height: '400px' }}>\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <PieChart>\n            <Pie\n              data={chartData}\n              cx=\"50%\"\n              cy=\"50%\"\n              labelLine={false}\n              label={renderCustomLabel}\n              outerRadius={120}\n              innerRadius={70}\n              fill=\"#8884d8\"\n              dataKey=\"value\"\n            >\n              {chartData.map((entry, index) => (\n                <Cell key={`cell-${index}`} fill={entry.color} />\n              ))}\n            </Pie>\n            <Tooltip content={<CustomTooltip />} />\n            <Legend content={renderLegend} />\n          </PieChart>\n        </ResponsiveContainer>\n      </div>\n\n      {/* Resumen numÃ©rico debajo de la grÃ¡fica */}\n      <div className=\"mt-6 pt-6 border-t border-gray-200\">\n        <div className=\"grid grid-cols-3 gap-4\">\n          {chartData.map((item, index) => (\n            <div key={index} className=\"text-center\">\n              <div className=\"flex items-center justify-center mb-2\">\n                <div\n                  className=\"w-3 h-3 rounded-full mr-2\"\n                  style={{ backgroundColor: item.color }}\n                />\n                <span className=\"text-sm font-medium text-gray-600\">{item.name}</span>\n              </div>\n              <div className=\"text-xl font-bold\" style={{ color: item.color }}>\n                {formatCurrency(item.value)}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CashFlowChart;\n","import React, { useEffect, useState } from 'react';\nimport PortfolioCharts from './PortfolioCharts';\nimport CorporateAlerts from './CorporateAlerts';\nimport ConsolidatedCashFlow from './ConsolidatedCashFlow';\nimport CashFlowChart from './dashboard/CashFlowChart';\n\nconst ConsolidatedDashboard = ({ \n  projects, \n  portfolioMetrics, \n  workPackages = [], \n  risks = [], \n  purchaseOrders = [], \n  advances = [], \n  invoices = [],\n  tasksByProject = {},\n  purchaseOrdersByProject = {},\n  advancesByProject = {},\n  invoicesByProject = {}\n}) => {\n  \n  // ðŸš€ NUEVO: Estado para forzar re-render cuando cambien las tareas de minutas\n  const [dashboardRefreshKey, setDashboardRefreshKey] = useState(0);\n  \n  // ðŸš€ NUEVO: Escuchar eventos de actualizaciÃ³n de tareas de minutas\n  useEffect(() => {\n    const handleMinutaStatusChanged = (event) => {\n      const { tareaId, newStatus, projectId, timestamp } = event.detail;\n      console.log('ðŸ”„ ConsolidatedDashboard: Evento minutaStatusChanged recibido:', { tareaId, newStatus, projectId, timestamp });\n      \n      // Forzar re-render del Dashboard\n      console.log('ðŸ”„ ConsolidatedDashboard: Forzando re-render del Dashboard...');\n      setDashboardRefreshKey(prev => prev + 1);\n    };\n\n    // Agregar listener\n    window.addEventListener('minutaStatusChanged', handleMinutaStatusChanged);\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('minutaStatusChanged', handleMinutaStatusChanged);\n    };\n  }, []);\n  \n  // Calcular mÃ©tricas del portfolio (solo proyectos activos)\n  const activeProjects = projects?.filter(p => p.status === 'active') || [];\n  const totalBudget = activeProjects.reduce((sum, p) => sum + (p.budget || 0), 0);\n  const totalReserves = activeProjects.reduce((sum, p) => sum + ((p.budget || 0) * 0.15), 0); // 15% total reserves\n  \n  // Calcular fechas del portfolio\n  const projectDates = activeProjects.map(p => ({\n    start: p.startDate ? new Date(p.startDate) : null,\n    end: p.endDate ? new Date(p.endDate) : null\n  })).filter(d => d.start && d.end);\n  \n  const earliestStart = projectDates.length > 0 ? \n    new Date(Math.min(...projectDates.map(d => d.start.getTime()))) : null;\n  const latestEnd = projectDates.length > 0 ? \n    new Date(Math.max(...projectDates.map(d => d.end.getTime()))) : null;\n\n  // Calcular mÃ©tricas financieras consolidadas\n  const totalPurchaseOrders = purchaseOrders?.reduce((sum, po) => sum + (po.totalAmount || 0), 0) || 0;\n  const totalAdvances = advances?.reduce((sum, adv) => sum + (adv.amount || 0), 0) || 0;\n  const totalInvoices = invoices?.reduce((sum, inv) => sum + (inv.amount || 0), 0) || 0;\n\n  // Calcular mÃ©tricas de riesgos\n  const activeRisks = risks?.filter(r => r.status === 'active') || [];\n  const highPriorityRisks = activeRisks.filter(r => r.priority === 'high');\n  const mediumPriorityRisks = activeRisks.filter(r => r.priority === 'medium');\n  const lowPriorityRisks = activeRisks.filter(r => r.priority === 'low');\n\n  // Calcular mÃ©tricas de hitos del portfolio\n  // Los hitos vienen de la secciÃ³n \"Hitos del Proyecto\" en cada proyecto\n  const allTasks = Object.values(tasksByProject || {}).flat();\n  const milestones = allTasks.filter(task => task.isMilestone);\n  \n  // CORRECCIÃ“N MEJORADA: ClasificaciÃ³n mÃ¡s precisa de hitos\n  // Un hito estÃ¡ completado si su progreso es 100%\n  // Un hito estÃ¡ en proceso si tiene algÃºn progreso (mayor a 0%)\n  // Un hito estÃ¡ retrasado solo si tiene fecha de fin pasada y progreso < 100%\n  const completedMilestones = milestones.filter(m => (m.progress || 0) >= 100);\n  const inProgressMilestones = milestones.filter(m => (m.progress || 0) > 0);\n  \n  // Para hitos retrasados: verificar si la fecha de fin ya pasÃ³ y no estÃ¡ completado\n  const currentDate = new Date();\n  const delayedMilestones = milestones.filter(m => {\n    const progress = m.progress || 0;\n    if (progress >= 100) return false; // Si estÃ¡ completado, no estÃ¡ retrasado\n    \n    // Si tiene fecha de fin, verificar si ya pasÃ³\n    if (m.endDate) {\n      const endDate = new Date(m.endDate);\n      return endDate < currentDate && progress < 100;\n    }\n    \n    // Si no tiene fecha de fin, no considerarlo retrasado\n    return false;\n  });\n  \n  // Hitos pendientes: los que no estÃ¡n en ninguna de las categorÃ­as anteriores\n  const pendingMilestones = milestones.filter(m => {\n    const progress = m.progress || 0;\n    return progress === 0 && !delayedMilestones.includes(m);\n  });\n  \n  // Logs de depuraciÃ³n mejorados\n  console.log('ðŸ” DEBUG HITOS PORTFOLIO MEJORADO:', {\n    totalTasks: allTasks.length,\n    totalMilestones: milestones.length,\n    completed: completedMilestones.length,\n    inProgress: inProgressMilestones.length,\n    delayed: delayedMilestones.length,\n    pending: pendingMilestones.length,\n    currentDate: currentDate.toISOString().split('T')[0],\n    milestonesData: milestones.slice(0, 5).map(m => ({\n      id: m.id,\n      name: m.name,\n      progress: m.progress,\n      endDate: m.endDate,\n      isDelayed: m.endDate ? new Date(m.endDate) < currentDate && (m.progress || 0) < 100 : false,\n      classification: (m.progress || 0) >= 100 ? 'completed' : \n                     (m.progress || 0) > 0 ? 'in-progress' : 'pending'\n    })),\n    progressDistribution: {\n      '0%': milestones.filter(m => (m.progress || 0) === 0).length,\n      '1-99%': milestones.filter(m => (m.progress || 0) > 0 && (m.progress || 0) < 100).length,\n      '100%': milestones.filter(m => (m.progress || 0) >= 100).length\n    },\n    dateAnalysis: {\n      milestonesWithEndDate: milestones.filter(m => m.endDate).length,\n      milestonesPastDueDate: milestones.filter(m => m.endDate && new Date(m.endDate) < currentDate).length,\n      milestonesPastDueAndIncomplete: delayedMilestones.length\n    }\n  });\n\n  // Calcular mÃ©tricas EVM consolidadas basadas en tareas reales\n  // Si no hay workPackages, calcular basado en tareas del cronograma\n  let totalWorkPackageBudget, totalWorkPackageEarned, totalWorkPackageActual;\n  \n  if (workPackages && workPackages.length > 0) {\n    // Usar datos de workPackages si estÃ¡n disponibles\n    totalWorkPackageBudget = workPackages.reduce((sum, wp) => sum + (wp.budget || 0), 0);\n    totalWorkPackageEarned = workPackages.reduce((sum, wp) => sum + (wp.earnedValue || 0), 0);\n    totalWorkPackageActual = workPackages.reduce((sum, wp) => sum + (wp.actualCost || 0), 0);\n  } else {\n    // Calcular basado en tareas del cronograma\n    const allTasks = Object.values(tasksByProject || {}).flat();\n    \n    // Presupuesto total: suma de costos de todas las tareas\n    totalWorkPackageBudget = allTasks.reduce((sum, task) => sum + (task.cost || 0), 0);\n    \n    // Valor ganado: suma de costos * progreso de tareas completadas\n    totalWorkPackageEarned = allTasks.reduce((sum, task) => {\n      const progress = (task.progress || 0) / 100;\n      return sum + ((task.cost || 0) * progress);\n    }, 0);\n    \n    // Costo actual: estimaciÃ³n basada en progreso (simplificado)\n    // En un sistema real, esto vendrÃ­a de Ã³rdenes de compra, facturas, etc.\n    totalWorkPackageActual = allTasks.reduce((sum, task) => {\n      const progress = (task.progress || 0) / 100;\n      // Asumir que el costo actual es proporcional al progreso\n      return sum + ((task.cost || 0) * progress * 0.8); // Factor de 0.8 para simular eficiencia\n    }, 0);\n  }\n\n  const consolidatedCPI = totalWorkPackageActual > 0 ? totalWorkPackageEarned / totalWorkPackageActual : 1;\n  const consolidatedSPI = totalWorkPackageBudget > 0 ? totalWorkPackageEarned / totalWorkPackageBudget : 1;\n  const consolidatedCV = totalWorkPackageEarned - totalWorkPackageActual;\n  const consolidatedSV = totalWorkPackageEarned - totalWorkPackageBudget;\n  const consolidatedVAC = totalWorkPackageBudget - (totalWorkPackageActual + (totalWorkPackageBudget - totalWorkPackageEarned));\n  const consolidatedEAC = totalWorkPackageBudget / consolidatedCPI;\n\n  // Logging para debug de mÃ©tricas EVM\n  console.log('ðŸ“Š MÃ‰TRICAS EVM CALCULADAS:', {\n    dataSource: workPackages && workPackages.length > 0 ? 'workPackages' : 'tasks',\n    workPackagesCount: workPackages?.length || 0,\n    tasksCount: Object.values(tasksByProject || {}).flat().length,\n    totalWorkPackageBudget,\n    totalWorkPackageEarned,\n    totalWorkPackageActual,\n    consolidatedCPI,\n    consolidatedSPI,\n    consolidatedVAC,\n    consolidatedEAC\n  });\n\n  // FunciÃ³n para obtener el color del indicador\n  const getIndicatorColor = (value, type) => {\n    if (type === 'cpi' || type === 'spi') {\n      return value >= 1 ? 'text-green-600' : value >= 0.9 ? 'text-yellow-600' : 'text-red-600';\n    }\n    if (type === 'variance') {\n      return value >= 0 ? 'text-green-600' : 'text-red-600';\n    }\n    return 'text-gray-600';\n  };\n\n  // FunciÃ³n para obtener el icono de estatus\n  const getStatusIcon = (status) => {\n    switch(status) {\n      case 'active': return 'ðŸ”„';\n      case 'completed': return 'âœ…';\n      case 'on-hold': return 'â¸ï¸';\n      case 'cancelled': return 'âŒ';\n      default: return 'â¸ï¸';\n    }\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header Ejecutivo */}\n      <div className=\"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-xl shadow-lg p-6 text-white\">\n        <h1 className=\"text-3xl font-bold mb-2\">ðŸ“ˆ Dashboard Consolidado</h1>\n        <p className=\"text-indigo-100 text-lg\">\n          Vista ejecutiva del estado general del portfolio de proyectos\n        </p>\n      </div>\n\n      {/* 1. Vista General del Portfolio */}\n      <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸ¢</span>\n          Vista General del Portfolio\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n          <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ“Š</span>\n              <span className=\"text-sm font-medium text-blue-600\">Proyectos Activos</span>\n            </div>\n            <div className=\"text-3xl font-bold text-blue-800\">\n              {activeProjects.length}\n            </div>\n            <div className=\"text-sm text-blue-600 mt-1\">\n              de {projects?.length || 0} total\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ’°</span>\n              <span className=\"text-sm font-medium text-green-600\">Presupuesto Total</span>\n            </div>\n            <div className=\"text-3xl font-bold text-green-800\">\n              ${(totalBudget / 1000).toFixed(0)}K\n            </div>\n            <div className=\"text-sm text-green-600 mt-1\">\n              Presupuesto asignado\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ“…</span>\n              <span className=\"text-sm font-medium text-purple-600\">Inicio MÃ¡s Temprano</span>\n            </div>\n            <div className=\"text-xl font-bold text-purple-800\">\n              {earliestStart ? earliestStart.toLocaleDateString('es-ES') : 'N/A'}\n            </div>\n            <div className=\"text-sm text-purple-600 mt-1\">\n              Fecha de inicio del portfolio\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ</span>\n              <span className=\"text-sm font-medium text-orange-600\">Fin MÃ¡s TardÃ­o</span>\n            </div>\n            <div className=\"text-xl font-bold text-orange-800\">\n              {latestEnd ? latestEnd.toLocaleDateString('es-ES') : 'N/A'}\n            </div>\n            <div className=\"text-sm text-orange-600 mt-1\">\n              Fecha de fin del portfolio\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 2. Indicadores por Proyecto */}\n      <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸ“Š</span>\n          Indicadores por Proyecto\n        </h2>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm\">\n            <thead>\n              <tr className=\"bg-gray-50\">\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Proyecto</th>\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Estatus</th>\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Presupuesto</th>\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Inicio</th>\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Fin</th>\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Progreso</th>\n              </tr>\n            </thead>\n            <tbody>\n              {activeProjects.map((project, index) => (\n                <tr key={project.id} className=\"border-b border-gray-200 hover:bg-gray-50\">\n                  <td className=\"px-4 py-3\">\n                    <div className=\"flex items-center space-x-3\">\n                      <span className=\"text-lg\">{getStatusIcon(project.status)}</span>\n                      <span className=\"font-medium text-gray-800\">{project.name}</span>\n                    </div>\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                      project.status === 'active' ? 'bg-green-100 text-green-800' :\n                      project.status === 'completed' ? 'bg-blue-100 text-blue-800' :\n                      project.status === 'on-hold' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {project.status === 'active' ? 'Activo' :\n                       project.status === 'completed' ? 'Completado' :\n                       project.status === 'on-hold' ? 'En Pausa' : 'Cancelado'}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-3 font-medium text-gray-800\">\n                    ${((project.budget || 0) / 1000).toFixed(0)}K\n                  </td>\n                  <td className=\"px-4 py-3 text-gray-600\">\n                    {project.startDate ? new Date(project.startDate).toLocaleDateString('es-ES') : 'N/A'}\n                  </td>\n                  <td className=\"px-4 py-3 text-gray-600\">\n                    {project.endDate ? new Date(project.endDate).toLocaleDateString('es-ES') : 'N/A'}\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"bg-blue-600 h-2 rounded-full\" \n                          style={{ width: `${Math.min(100, Math.max(0, (project.progress || 0)))}%` }}\n                        />\n                      </div>\n                      <span className=\"text-xs text-gray-600\">\n                        {Math.round(project.progress || 0)}%\n                      </span>\n          </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* 3. Indicadores Financieros Consolidados */}\n      <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-emerald-500\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸ’³</span>\n          Indicadores Financieros Consolidados\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n          <div className=\"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-lg border border-emerald-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ“‹</span>\n              <span className=\"text-sm font-medium text-emerald-600\">Ã“rdenes de Compra</span>\n              </div>\n            <div className=\"text-3xl font-bold text-emerald-800\">\n              ${(totalPurchaseOrders / 1000).toFixed(0)}K\n              </div>\n            <div className=\"text-sm text-emerald-600 mt-1\">\n              Total en OC aprobadas\n          </div>\n        </div>\n\n          <div className=\"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-lg border border-amber-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ’¸</span>\n              <span className=\"text-sm font-medium text-amber-600\">Anticipos</span>\n              </div>\n            <div className=\"text-3xl font-bold text-amber-800\">\n              ${(totalAdvances / 1000).toFixed(0)}K\n              </div>\n            <div className=\"text-sm text-amber-600 mt-1\">\n              Anticipos solicitados\n          </div>\n        </div>\n\n          <div className=\"bg-gradient-to-br from-cyan-50 to-cyan-100 p-6 rounded-lg border border-cyan-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ§¾</span>\n              <span className=\"text-sm font-medium text-cyan-600\">Facturas</span>\n              </div>\n            <div className=\"text-3xl font-bold text-cyan-800\">\n              ${(totalInvoices / 1000).toFixed(0)}K\n              </div>\n            <div className=\"text-sm text-cyan-600 mt-1\">\n              Facturas ingresadas\n          </div>\n        </div>\n\n          <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ›¡ï¸</span>\n              <span className=\"text-sm font-medium text-purple-600\">Reservas</span>\n            </div>\n            <div className=\"text-3xl font-bold text-purple-800\">\n              ${(totalReserves / 1000).toFixed(0)}K\n            </div>\n            <div className=\"text-sm text-purple-600 mt-1\">\n              Contingencia + GestiÃ³n\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 4. Indicadores de Riesgos del Portfolio */}\n      <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸ›¡ï¸</span>\n          Indicadores de Riesgos del Portfolio\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-lg border border-red-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸš¨</span>\n              <span className=\"text-sm font-medium text-red-600\">Riesgos Activos</span>\n                  </div>\n            <div className=\"text-3xl font-bold text-red-800\">\n              {activeRisks.length}\n                    </div>\n            <div className=\"text-sm text-red-600 mt-1\">\n              Total de riesgos identificados\n                  </div>\n                </div>\n\n          <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">âš ï¸</span>\n              <span className=\"text-sm font-medium text-orange-600\">Alta Prioridad</span>\n            </div>\n            <div className=\"text-3xl font-bold text-orange-800\">\n              {highPriorityRisks.length}\n            </div>\n            <div className=\"text-sm text-orange-600 mt-1\">\n              Requieren atenciÃ³n inmediata\n            </div>\n        </div>\n\n          <div className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-lg border border-yellow-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-2xl\">ðŸ“Š</span>\n              <span className=\"text-sm font-medium text-yellow-600\">DistribuciÃ³n</span>\n                  </div>\n            <div className=\"text-sm text-yellow-800\">\n              <div className=\"flex justify-between mb-1\">\n                <span>Alta: {highPriorityRisks.length}</span>\n                <span>Media: {mediumPriorityRisks.length}</span>\n                    </div>\n              <div className=\"flex justify-between\">\n                <span>Baja: {lowPriorityRisks.length}</span>\n                <span>Total: {activeRisks.length}</span>\n                  </div>\n                </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 5. Hitos del Portafolio por Proyecto */}\n      <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸŽ¯</span>\n          Hitos del Portafolio\n        </h2>\n        \n        {/* Mostrar hitos por proyecto individual */}\n        <div className=\"space-y-6\">\n          {projects && projects.length > 0 ? (\n            projects\n              .filter(project => project.status === 'active')\n              .map(project => {\n                const projectTasks = tasksByProject?.[project.id] || [];\n                const projectMilestones = projectTasks.filter(task => task.isMilestone);\n                \n                // CORRECCIÃ“N MEJORADA: LÃ³gica consistente con el resumen consolidado\n                const projectCompleted = projectMilestones.filter(m => (m.progress || 0) >= 100);\n                const projectInProgress = projectMilestones.filter(m => (m.progress || 0) > 0);\n                \n                // Para hitos retrasados del proyecto: verificar fecha de fin pasada\n                const currentDate = new Date();\n                const projectDelayed = projectMilestones.filter(m => {\n                  const progress = m.progress || 0;\n                  if (progress >= 100) return false; // Si estÃ¡ completado, no estÃ¡ retrasado\n                  \n                  // Si tiene fecha de fin, verificar si ya pasÃ³\n                  if (m.endDate) {\n                    const endDate = new Date(m.endDate);\n                    return endDate < currentDate && progress < 100;\n                  }\n                  \n                  // Si no tiene fecha de fin, no considerarlo retrasado\n                  return false;\n                });\n                const projectProgress = projectMilestones.length > 0 \n                  ? Math.round((projectCompleted.length / projectMilestones.length) * 100) \n                  : 0;\n                \n                return (\n                  <div key={project.id} className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\n                      <span className=\"text-xl mr-2\">ðŸ“‹</span>\n                      {project.name}\n                      <span className=\"ml-2 text-sm font-normal text-gray-500\">\n                        ({projectMilestones.length} hitos)\n                      </span>\n                    </h3>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                      <div className=\"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"text-xl\">âœ…</span>\n                          <span className=\"text-xs font-medium text-green-600\">Completados</span>\n                        </div>\n                        <div className=\"text-2xl font-bold text-green-800\">\n                          {projectCompleted.length}\n                        </div>\n                        <div className=\"text-xs text-green-600 mt-1\">\n                          Hitos realizados\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"text-xl\">ðŸ”„</span>\n                          <span className=\"text-xs font-medium text-yellow-600\">En Proceso</span>\n                        </div>\n                        <div className=\"text-2xl font-bold text-yellow-800\">\n                          {projectInProgress.length}\n                        </div>\n                        <div className=\"text-xs text-yellow-600 mt-1\">\n                          Hitos en ejecuciÃ³n\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg border border-red-200\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"text-xl\">âš ï¸</span>\n                          <span className=\"text-xs font-medium text-red-600\">Atrasados</span>\n                        </div>\n                        <div className=\"text-2xl font-bold text-red-800\">\n                          {projectDelayed.length}\n                        </div>\n                        <div className=\"text-xs text-red-600 mt-1\">\n                          Hitos retrasados\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"text-xl\">ðŸ“ˆ</span>\n                          <span className=\"text-xs font-medium text-blue-600\">Progreso</span>\n                        </div>\n                        <div className=\"text-2xl font-bold text-blue-800\">\n                          {projectProgress}%\n                        </div>\n                        <div className=\"text-xs text-blue-600 mt-1\">\n                          Completitud\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })\n          ) : (\n            <div className=\"text-center py-8 text-gray-500\">\n              <span className=\"text-4xl mb-4 block\">ðŸ“‹</span>\n              <p>No hay proyectos activos con hitos</p>\n            </div>\n          )}\n        </div>\n        \n        {/* Resumen consolidado */}\n        {projects && projects.filter(p => p.status === 'active').length > 1 && (\n          <div className=\"mt-6 pt-6 border-t border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\n              <span className=\"text-xl mr-2\">ðŸ“Š</span>\n              Resumen Consolidado\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <div className=\"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-xl\">âœ…</span>\n                  <span className=\"text-xs font-medium text-green-600\">Total Completados</span>\n                </div>\n                <div className=\"text-2xl font-bold text-green-800\">\n                  {completedMilestones.length}\n                </div>\n                <div className=\"text-xs text-green-600 mt-1\">\n                  Hitos realizados\n                </div>\n              </div>\n              \n              <div className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-xl\">ðŸ”„</span>\n                  <span className=\"text-xs font-medium text-yellow-600\">Total En Proceso</span>\n                </div>\n                <div className=\"text-2xl font-bold text-yellow-800\">\n                  {inProgressMilestones.length}\n                </div>\n                <div className=\"text-xs text-yellow-600 mt-1\">\n                  Hitos en ejecuciÃ³n\n                </div>\n              </div>\n              \n              <div className=\"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg border border-red-200\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-xl\">âš ï¸</span>\n                  <span className=\"text-xs font-medium text-red-600\">Total Atrasados</span>\n                </div>\n                <div className=\"text-2xl font-bold text-red-800\">\n                  {delayedMilestones.length}\n                </div>\n                <div className=\"text-xs text-red-600 mt-1\">\n                  Hitos retrasados\n                </div>\n              </div>\n              \n              <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-xl\">ðŸ“ˆ</span>\n                  <span className=\"text-xs font-medium text-blue-600\">Progreso General</span>\n                </div>\n                <div className=\"text-2xl font-bold text-blue-800\">\n                  {milestones.length > 0 ? Math.round((completedMilestones.length / milestones.length) * 100) : 0}%\n                </div>\n                <div className=\"text-xs text-blue-600 mt-1\">\n                  Completitud general\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* 6. Indicadores PMBOK v7 con Explicaciones */}\n      <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-indigo-500\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n          <span className=\"text-3xl mr-3\">ðŸ“Š</span>\n          Indicadores PMBOK v7 - GestiÃ³n de Costos\n        </h2>\n        \n        {/* Nota informativa sobre el cÃ¡lculo */}\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n          <div className=\"flex items-center\">\n            <div className=\"text-blue-600 text-xl mr-3\">â„¹ï¸</div>\n            <div className=\"text-blue-800\">\n              <strong>Fuente de datos:</strong> {workPackages && workPackages.length > 0 \n                ? `Calculado basado en ${workPackages.length} paquetes de trabajo` \n                : `Calculado basado en ${Object.values(tasksByProject || {}).flat().length} tareas del cronograma`}\n              {!(workPackages && workPackages.length > 0) && (\n                <span className=\"block text-sm mt-1\">\n                  Los costos se estiman basÃ¡ndose en el campo \"Costo\" de cada tarea y su progreso actual.\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n          <div className=\"space-y-6\">\n            <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-blue-800\">CPI - Cost Performance Index</h3>\n                <span className=\"text-2xl\">ðŸ’°</span>\n              </div>\n              <div className=\"text-3xl font-bold text-blue-800 mb-2\">\n                {consolidatedCPI.toFixed(2)}\n              </div>\n              <div className={`text-sm font-medium mb-2 ${getIndicatorColor(consolidatedCPI, 'cpi')}`}>\n                {consolidatedCPI >= 1 ? 'âœ… Eficiencia de costos positiva' : \n                 consolidatedCPI >= 0.9 ? 'âš ï¸ Eficiencia de costos aceptable' : \n                 'âŒ Eficiencia de costos deficiente'}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                <strong>Â¿QuÃ© significa?</strong> Mide la eficiencia del costo del trabajo realizado. \n                Valores â‰¥ 1.0 indican que el proyecto estÃ¡ dentro del presupuesto.\n              </div>\n            </div>\n\n            <div className=\"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-green-800\">SPI - Schedule Performance Index</h3>\n                <span className=\"text-2xl\">ðŸ“…</span>\n              </div>\n              <div className=\"text-3xl font-bold text-green-800 mb-2\">\n                {consolidatedSPI.toFixed(2)}\n              </div>\n              <div className={`text-sm font-medium mb-2 ${getIndicatorColor(consolidatedSPI, 'spi')}`}>\n                {consolidatedSPI >= 1 ? 'âœ… Eficiencia de cronograma positiva' : \n                 consolidatedSPI >= 0.9 ? 'âš ï¸ Eficiencia de cronograma aceptable' : \n                 'âŒ Eficiencia de cronograma deficiente'}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                <strong>Â¿QuÃ© significa?</strong> Mide la eficiencia del cronograma del trabajo realizado. \n                Valores â‰¥ 1.0 indican que el proyecto estÃ¡ adelantado.\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-purple-800\">VAC - Variance at Completion</h3>\n                <span className=\"text-2xl\">ðŸ“Š</span>\n              </div>\n              <div className={`text-3xl font-bold mb-2 ${getIndicatorColor(consolidatedVAC, 'variance')}`}>\n                ${(consolidatedVAC / 1000).toFixed(0)}K\n              </div>\n              <div className={`text-sm font-medium mb-2 ${getIndicatorColor(consolidatedVAC, 'variance')}`}>\n                {consolidatedVAC >= 0 ? 'âœ… Proyecto dentro del presupuesto' : \n                 'âŒ Proyecto excederÃ¡ el presupuesto'}\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                <strong>Â¿QuÃ© significa?</strong> Predice la diferencia entre el presupuesto total y el costo final estimado. \n                Valores positivos indican ahorro proyectado.\n              </div>\n            </div>\n\n            <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-orange-800\">EAC - Estimate at Completion</h3>\n                <span className=\"text-2xl\">ðŸŽ¯</span>\n              </div>\n              <div className=\"text-3xl font-bold text-orange-800 mb-2\">\n                ${(consolidatedEAC / 1000).toFixed(0)}K\n              </div>\n              <div className=\"text-sm font-medium mb-2 text-orange-700\">\n                Costo total estimado del proyecto\n              </div>\n              <div className=\"text-xs text-gray-600\">\n                <strong>Â¿QuÃ© significa?</strong> Predice el costo total del proyecto basado en el rendimiento actual. \n                Se calcula como: Presupuesto Total Ã· CPI.\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 6.5. GrÃ¡fica de Flujo de Caja */}\n      <CashFlowChart \n        totalPurchaseOrders={totalPurchaseOrders}\n        totalAdvances={totalAdvances}\n        totalInvoices={totalInvoices}\n      />\n\n      {/* 7. Flujo de Caja Consolidado */}\n      <ConsolidatedCashFlow \n        projects={projects}\n        tasksByProject={tasksByProject}\n        purchaseOrdersByProject={purchaseOrdersByProject}\n        advancesByProject={advancesByProject}\n        invoicesByProject={invoicesByProject}\n      />\n    </div>\n  );\n};\n\nexport default ConsolidatedDashboard;"],"names":["ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","_ref","projects","tasksByProject","purchaseOrdersByProject","advancesByProject","invoicesByProject","projectionPeriod","setProjectionPeriod","useState","projectionStartDate","setProjectionStartDate","Date","toISOString","split","activeProjects","filter","p","status","logger","debug","length","Object","keys","activeProjectIds","map","id","forEach","projectId","pos","concat","total","orders","po","number","approvalDate","date","totalAmount","calculateMonthPlannedExpense","tasks","monthDate","monthStart","getFullYear","getMonth","monthEnd","reduce","task","taskStart","startDate","taskEnd","endDate","cost","calculateMonthCommittedExpense","purchaseOrders","purchaseOrdersLength","substring","setHours","month","totalPOs","index","allFields","isApproved","poDate","trim","isNaN","getTime","isInMonth","willInclude","calculateMonthRealExpense","advances","invoices","totalReal","sum","advance","paymentDate","advanceDate","isPaid","amount","invoice","invoiceDate","consolidatedCashFlow","useMemo","projection","metrics","months","i","parseInt","monthKey","totalPlannedExpense","totalCommittedExpense","totalRealExpense","project","projectTasks","projectPurchaseOrders","projectAdvances","projectInvoices","name","monthPlannedExpense","monthCommittedExpense","monthRealExpense","planned","committed","real","push","toLocaleDateString","year","revenue","expenses","realExpenses","netFlow","m","totalCommittedExpenses","totalRealExpenses","totalNetCashFlow","_jsxs","className","children","_jsx","value","onChange","e","target","onClick","exportToExcel","data","ws","XLSX","json_to_sheet","wb","book_new","book_append_sheet","fileName","toFixed","Bar","labels","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","plugins","title","display","legend","position","padding","usePointStyle","scales","x","stacked","text","ticks","maxRotation","minRotation","font","size","y","beginAtZero","callback","toLocaleString","height","totalPurchaseOrders","totalAdvances","totalInvoices","chartData","porPagar","color","Math","max","CustomTooltip","_ref2","active","payload","style","formatCurrency","ResponsiveContainer","width","PieChart","Pie","cx","cy","labelLine","_ref3","midAngle","innerRadius","outerRadius","RADIAN","PI","radius","cos","sin","fill","textAnchor","dominantBaseline","dataKey","entry","Cell","content","props","item","portfolioMetrics","workPackages","risks","dashboardRefreshKey","setDashboardRefreshKey","useEffect","handleMinutaStatusChanged","event","tareaId","newStatus","timestamp","detail","console","log","prev","window","addEventListener","removeEventListener","totalBudget","budget","totalReserves","projectDates","start","end","d","earliestStart","min","latestEnd","adv","inv","activeRisks","r","highPriorityRisks","priority","mediumPriorityRisks","lowPriorityRisks","allTasks","values","flat","milestones","isMilestone","completedMilestones","progress","inProgressMilestones","currentDate","delayedMilestones","pendingMilestones","includes","totalWorkPackageBudget","totalWorkPackageEarned","totalWorkPackageActual","totalTasks","totalMilestones","completed","inProgress","delayed","pending","milestonesData","slice","isDelayed","classification","progressDistribution","dateAnalysis","milestonesWithEndDate","milestonesPastDueDate","milestonesPastDueAndIncomplete","wp","earnedValue","actualCost","consolidatedCPI","consolidatedSPI","consolidatedVAC","consolidatedEAC","dataSource","workPackagesCount","tasksCount","getIndicatorColor","type","getStatusIcon","round","projectMilestones","projectCompleted","projectInProgress","projectDelayed","projectProgress","CashFlowChart","ConsolidatedCashFlow"],"sourceRoot":""}