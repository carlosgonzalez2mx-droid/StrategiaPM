/*! For license information please see main.c6ecf41e.js.LICENSE.txt */
(()=>{var e={11:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const a=e[n],s=t(a);r.has(s)||r.set(s,a)}return Array.from(r.values())}},47:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(4011));t.default=class{constructor(e,t){let{headers:r={},schema:n,fetch:a}=t;this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t?"HEAD":"GET";let s=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer","count=".concat(r)),new a.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(t&&this.headers.append("Prefer","count=".concat(t)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(r?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer","count=".concat(n)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer","count=".concat(t)),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},225:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},759:(e,t,r)=>{"use strict";var n=r(9950);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=n.useState,i=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(n){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),a=n[0].inst,d=n[1];return o(function(){a.value=r,a.getSnapshot=t,c(a)&&d({inst:a})},[e,r,t]),i(function(){return c(a)&&d({inst:a}),e(function(){c(a)&&d({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},830:(e,t,r)=>{e.exports=r(5497).sortBy},1047:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},1053:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=n(r(5071));t.PostgrestClient=a.default;const s=n(r(47));t.PostgrestQueryBuilder=s.default;const i=n(r(4011));t.PostgrestFilterBuilder=i.default;const o=n(r(7427));t.PostgrestTransformBuilder=o.default;const l=n(r(6569));t.PostgrestBuilder=l.default;const c=n(r(5732));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},1083:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},1085:(e,t,r)=>{"use strict";var n=r(5340),a=r(9950),s=r(7119);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(i(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var C=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case N:return"Suspense";case _:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return D(e(t))}catch(r){}}return null}var O=Array.isArray,I=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},L=[],F=-1;function B(e){return{current:e}}function z(e){0>F||(e.current=L[F],L[F]=null,F--)}function U(e,t){F++,L[F]=e.current,e.current=t}var q=B(null),W=B(null),H=B(null),V=B(null);function G(e,t){switch(U(H,t),U(W,e),U(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?au(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=su(t=au(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(q),U(q,e)}function K(){z(q),z(W),z(H)}function $(e){null!==e.memoizedState&&U(V,e);var t=q.current,r=su(t,e.type);t!==r&&(U(W,e),U(q,r))}function Y(e){W.current===e&&(z(q),z(W)),V.current===e&&(z(V),$u._currentValue=R)}var X=Object.prototype.hasOwnProperty,J=n.unstable_scheduleCallback,Z=n.unstable_cancelCallback,Q=n.unstable_shouldYield,ee=n.unstable_requestPaint,te=n.unstable_now,re=n.unstable_getCurrentPriorityLevel,ne=n.unstable_ImmediatePriority,ae=n.unstable_UserBlockingPriority,se=n.unstable_NormalPriority,ie=n.unstable_LowPriority,oe=n.unstable_IdlePriority,le=n.log,ce=n.unstable_setDisableYieldValue,de=null,ue=null;function he(e){if("function"===typeof le&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&n;return 0!==o?0!==(n=o&~s)?a=be(n):0!==(i&=o)?a=be(i):r||0!==(r=o&~e)&&(a=be(r)):0!==(o=n&~s)?a=be(o):0!==i?a=be(i):r||0!==(r=n&~e)&&(a=be(r)),0===a?0:0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(r=t&-t)||32===s&&0!==(4194048&r))?t:a}function ye(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Ne(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function _e(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-fe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Ae(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-fe(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ce(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Pe=Math.random().toString(36).slice(2),De="__reactFiber$"+Pe,Oe="__reactProps$"+Pe,Ie="__reactContainer$"+Pe,Me="__reactEvents$"+Pe,Re="__reactListeners$"+Pe,Le="__reactHandles$"+Pe,Fe="__reactResources$"+Pe,Be="__reactMarker$"+Pe;function ze(e){delete e[De],delete e[Oe],delete e[Me],delete e[Re],delete e[Le]}function Ue(e){var t=e[De];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ie]||r[De]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=xu(e);null!==e;){if(r=e[De])return r;e=xu(e)}return t}r=(e=r).parentNode}return null}function qe(e){if(e=e[De]||e[Ie]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Be]=!0}var Ge=new Set,Ke={};function $e(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Xe,Je,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},et={};function tt(e,t,r){if(a=t,X.call(et,a)||!X.call(Qe,a)&&(Ze.test(a)?et[a]=!0:(Qe[a]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var a}function rt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function nt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function at(e){if(void 0===Xe)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var st=!1;function it(e,t){if(!e||st)return"";st=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(a){var n=a}Reflect.construct(e,[],r)}else{try{r.call()}catch(s){n=s}e.call(r.prototype)}}else{try{throw Error()}catch(i){n=i}(r=e())&&"function"===typeof r.catch&&r.catch(function(){})}}catch(o){if(o&&n&&"string"===typeof o.stack)return[o.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),i=s[0],o=s[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(a=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(n===l.length||a===c.length)for(n=l.length-1,a=c.length-1;1<=n&&0<=a&&l[n]!==c[a];)a--;for(;1<=n&&0<=a;n--,a--)if(l[n]!==c[a]){if(1!==n||1!==a)do{if(n--,0>--a||l[n]!==c[a]){var d="\n"+l[n].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=n&&0<=a);break}}}finally{st=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?at(r):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return at("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=dt(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,r,n,a,s,i,o){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?bt(e,i,ct(t)):null!=r?bt(e,i,ct(r)):null!=n&&e.removeAttribute("value"),null==a&&null!=s&&(e.defaultChecked=!!s),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,r,n,a,s,i,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=r){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;r=null!=r?""+ct(r):"",t=null!=t?""+ct(t):r,o||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:a)&&"symbol"!==typeof n&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i)}function bt(e,t,r){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function xt(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ct(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function yt(e,t,r){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ct(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(i(92));if(O(n)){if(1<n.length)throw Error(i(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ct(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function jt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"===typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!==typeof r||0===r||Nt.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function St(e,t,r){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&r[a]!==n&&_t(e,a,n)}else for(var s in t)t.hasOwnProperty(s)&&_t(e,s,t[s])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ct(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Ot=null;function It(e){var t=qe(e);if(t&&(e=t.stateNode)){var r=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n[Oe]||null;if(!a)throw Error(i(90));gt(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&ht(n)}break e;case"textarea":yt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&xt(e,!!r.multiple,t,!1)}}}var Mt=!1;function Rt(e,t,r){if(Mt)return e(t,r);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Dt||null!==Ot)&&(Uc(),Dt&&(t=Dt,e=Ot,Ot=Dt=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Lt(e,t){var r=e.stateNode;if(null===r)return null;var n=r[Oe]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Ft)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Oh){Bt=!1}var Ut=null,qt=null,Wt=null;function Ht(){if(Wt)return Wt;var e,t,r=qt,n=r.length,a="value"in Ut?Ut.value:Ut.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Wt=a.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Kt(){return!1}function $t(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Gt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,Xt,Jt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=$t(Zt),er=h({},Zt,{view:0,detail:0}),tr=$t(er),rr=h({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),nr=$t(rr),ar=$t(h({},rr,{dataTransfer:0})),sr=$t(h({},er,{relatedTarget:0})),ir=$t(h({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),or=$t(h({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),lr=$t(h({},Zt,{data:0})),cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ur={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ur[e])&&!!t[e]}function fr(){return hr}var pr=$t(h({},er,{key:function(e){if(e.key){var t=cr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fr,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mr=$t(h({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gr=$t(h({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fr})),vr=$t(h({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),br=$t(h({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xr=$t(h({},Zt,{newState:0,oldState:0})),yr=[9,13,27,32],wr=Ft&&"CompositionEvent"in window,jr=null;Ft&&"documentMode"in document&&(jr=document.documentMode);var Nr=Ft&&"TextEvent"in window&&!jr,_r=Ft&&(!wr||jr&&8<jr&&11>=jr),Sr=String.fromCharCode(32),kr=!1;function Ar(e,t){switch(e){case"keyup":return-1!==yr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Er(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Cr=!1;var Tr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Tr[e.type]:"textarea"===t}function Dr(e,t,r,n){Dt?Ot?Ot.push(n):Ot=[n]:Dt=n,0<(t=Hd(t,"onChange")).length&&(r=new Qt("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Or=null,Ir=null;function Mr(e){Rd(e,0)}function Rr(e){if(ht(We(e)))return e}function Lr(e,t){if("change"===e)return t}var Fr=!1;if(Ft){var Br;if(Ft){var zr="oninput"in document;if(!zr){var Ur=document.createElement("div");Ur.setAttribute("oninput","return;"),zr="function"===typeof Ur.oninput}Br=zr}else Br=!1;Fr=Br&&(!document.documentMode||9<document.documentMode)}function qr(){Or&&(Or.detachEvent("onpropertychange",Wr),Ir=Or=null)}function Wr(e){if("value"===e.propertyName&&Rr(Ir)){var t=[];Dr(t,Ir,e,Pt(e)),Rt(Mr,t)}}function Hr(e,t,r){"focusin"===e?(qr(),Ir=r,(Or=t).attachEvent("onpropertychange",Wr)):"focusout"===e&&qr()}function Vr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rr(Ir)}function Gr(e,t){if("click"===e)return Rr(t)}function Kr(e,t){if("input"===e||"change"===e)return Rr(t)}var $r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yr(e,t){if($r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!X.call(t,a)||!$r(e[a],t[a]))return!1}return!0}function Xr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jr(e,t){var r,n=Xr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xr(n)}}function Zr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=ft((e=t.contentWindow).document)}return t}function en(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tn=Ft&&"documentMode"in document&&11>=document.documentMode,rn=null,nn=null,an=null,sn=!1;function on(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;sn||null==rn||rn!==ft(n)||("selectionStart"in(n=rn)&&en(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&Yr(an,n)||(an=n,0<(n=Hd(nn,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rn)))}function ln(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cn={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},dn={},un={};function hn(e){if(dn[e])return dn[e];if(!cn[e])return e;var t,r=cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in un)return dn[e]=r[t];return e}Ft&&(un=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);var fn=hn("animationend"),pn=hn("animationiteration"),mn=hn("animationstart"),gn=hn("transitionrun"),vn=hn("transitionstart"),bn=hn("transitioncancel"),xn=hn("transitionend"),yn=new Map,wn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,t){yn.set(e,t),$e(t,[e])}wn.push("scrollEnd");var Nn=new WeakMap;function _n(e,t){if("object"===typeof e&&null!==e){var r=Nn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:lt(t)},Nn.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Sn=[],kn=0,An=0;function En(){for(var e=kn,t=An=kn=0;t<e;){var r=Sn[t];Sn[t++]=null;var n=Sn[t];Sn[t++]=null;var a=Sn[t];Sn[t++]=null;var s=Sn[t];if(Sn[t++]=null,null!==n&&null!==a){var i=n.pending;null===i?a.next=a:(a.next=i.next,i.next=a),n.pending=a}0!==s&&Dn(r,a,s)}}function Cn(e,t,r,n){Sn[kn++]=e,Sn[kn++]=t,Sn[kn++]=r,Sn[kn++]=n,An|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Tn(e,t,r,n){return Cn(e,t,r,n),On(e)}function Pn(e,t){return Cn(e,null,null,t),On(e)}function Dn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var a=!1,s=e.return;null!==s;)s.childLanes|=r,null!==(n=s.alternate)&&(n.childLanes|=r),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(a=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,a&&null!==t&&(a=31-fe(r),null===(n=(e=s.hiddenUpdates)[a])?e[a]=[t]:n.push(t),t.lane=536870912|r),s):null}function On(e){if(50<Dc)throw Dc=0,Oc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var In={};function Mn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,t,r,n){return new Mn(e,t,r,n)}function Ln(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fn(e,t){var r=e.alternate;return null===r?((r=Rn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Bn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zn(e,t,r,n,a,s){var o=0;if(n=e,"function"===typeof e)Ln(e)&&(o=1);else if("string"===typeof e)o=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,r,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Rn(31,r,t,a)).elementType=A,e.lanes=s,e;case g:return Un(r.children,a,s,t);case v:o=8,a|=24;break;case b:return(e=Rn(12,r,t,2|a)).elementType=b,e.lanes=s,e;case N:return(e=Rn(13,r,t,a)).elementType=N,e.lanes=s,e;case _:return(e=Rn(19,r,t,a)).elementType=_,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:case w:o=10;break e;case y:o=9;break e;case j:o=11;break e;case S:o=14;break e;case k:o=16,n=null;break e}o=29,r=Error(i(130,null===e?"null":typeof e,"")),n=null}return(t=Rn(o,r,t,a)).elementType=e,t.type=n,t.lanes=s,t}function Un(e,t,r,n){return(e=Rn(7,e,n,t)).lanes=r,e}function qn(e,t,r){return(e=Rn(6,e,null,t)).lanes=r,e}function Wn(e,t,r){return(t=Rn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hn=[],Vn=0,Gn=null,Kn=0,$n=[],Yn=0,Xn=null,Jn=1,Zn="";function Qn(e,t){Hn[Vn++]=Kn,Hn[Vn++]=Gn,Gn=e,Kn=t}function ea(e,t,r){$n[Yn++]=Jn,$n[Yn++]=Zn,$n[Yn++]=Xn,Xn=e;var n=Jn;e=Zn;var a=32-fe(n)-1;n&=~(1<<a),r+=1;var s=32-fe(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Jn=1<<32-fe(t)+a|r<<a|n,Zn=s+e}else Jn=1<<s|r<<a|n,Zn=e}function ta(e){null!==e.return&&(Qn(e,1),ea(e,1,0))}function ra(e){for(;e===Gn;)Gn=Hn[--Vn],Hn[Vn]=null,Kn=Hn[--Vn],Hn[Vn]=null;for(;e===Xn;)Xn=$n[--Yn],$n[Yn]=null,Zn=$n[--Yn],$n[Yn]=null,Jn=$n[--Yn],$n[Yn]=null}var na=null,aa=null,sa=!1,ia=null,oa=!1,la=Error(i(519));function ca(e){throw ma(_n(Error(i(418,"")),e)),la}function da(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[De]=e,t[Oe]=n,r){case"dialog":Ld("cancel",t),Ld("close",t);break;case"iframe":case"object":case"embed":Ld("load",t);break;case"video":case"audio":for(r=0;r<Id.length;r++)Ld(Id[r],t);break;case"source":Ld("error",t);break;case"img":case"image":case"link":Ld("error",t),Ld("load",t);break;case"details":Ld("toggle",t);break;case"input":Ld("invalid",t),vt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ut(t);break;case"select":Ld("invalid",t);break;case"textarea":Ld("invalid",t),wt(t,n.value,n.defaultValue,n.children),ut(t)}"string"!==typeof(r=n.children)&&"number"!==typeof r&&"bigint"!==typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Xd(t.textContent,r)?(null!=n.popover&&(Ld("beforetoggle",t),Ld("toggle",t)),null!=n.onScroll&&Ld("scroll",t),null!=n.onScrollEnd&&Ld("scrollend",t),null!=n.onClick&&(t.onclick=Jd),t=!0):t=!1,t||ca(e)}function ua(e){for(na=e.return;na;)switch(na.tag){case 5:case 13:return void(oa=!1);case 27:case 3:return void(oa=!0);default:na=na.return}}function ha(e){if(e!==na)return!1;if(!sa)return ua(e),sa=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||iu(e.type,e.memoizedProps)),t=!t),t&&aa&&ca(e),ua(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){aa=vu(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}aa=null}}else 27===r?(r=aa,fu(e.type)?(e=bu,bu=null,aa=e):aa=r):aa=na?vu(e.stateNode.nextSibling):null;return!0}function fa(){aa=na=null,sa=!1}function pa(){var e=ia;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),ia=null),e}function ma(e){null===ia?ia=[e]:ia.push(e)}var ga=B(null),va=null,ba=null;function xa(e,t,r){U(ga,t._currentValue),t._currentValue=r}function ya(e){e._currentValue=ga.current,z(ga)}function wa(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ja(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var o=a.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),wa(s.return,r,e),n||(o=null);break e}s=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=r,null!==(s=o.alternate)&&(s.lanes|=r),wa(o,r,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Na(e,t,r,n){e=null;for(var a=t,s=!1;null!==a;){if(!s)if(0!==(524288&a.flags))s=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=a.type;$r(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===V.current){if(null===(o=a.alternate))throw Error(i(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push($u):e=[$u])}a=a.return}null!==e&&ja(t,e,r,n),t.flags|=262144}function _a(e){for(e=e.firstContext;null!==e;){if(!$r(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Sa(e){va=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ka(e){return Ea(va,e)}function Aa(e,t){return null===va&&Sa(e),Ea(e,t)}function Ea(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===ba){if(null===e)throw Error(i(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return r}var Ca="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ta=n.unstable_scheduleCallback,Pa=n.unstable_NormalPriority,Da={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oa(){return{controller:new Ca,data:new Map,refCount:0}}function Ia(e){e.refCount--,0===e.refCount&&Ta(Pa,function(){e.controller.abort()})}var Ma=null,Ra=0,La=0,Fa=null;function Ba(){if(0===--Ra&&null!==Ma){null!==Fa&&(Fa.status="fulfilled");var e=Ma;Ma=null,La=0,Fa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var za=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ma){var r=Ma=[];Ra=0,La=Cd(),Fa={status:"pending",value:void 0,then:function(e){r.push(e)}}}Ra++,t.then(Ba,Ba)}(0,t),null!==za&&za(e,t)};var Ua=B(null);function qa(){var e=Ua.current;return null!==e?e:nc.pooledCache}function Wa(e,t){U(Ua,null===t?Ua.current:t.pool)}function Ha(){var e=qa();return null===e?null:{parent:Da._currentValue,pool:e}}var Va=Error(i(460)),Ga=Error(i(474)),Ka=Error(i(542)),$a={then:function(){}};function Ya(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xa(){}function Ja(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Xa,Xa),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xa,Xa);else{if(null!==(e=nc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Za=t,Va}}var Za=null;function Qa(){if(null===Za)throw Error(i(459));var e=Za;return Za=null,e}function es(e){if(e===Va||e===Ka)throw Error(i(483))}var ts=!1;function rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ns(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function as(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&rc)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=On(e),Dn(e,null,r),t}return Cn(e,n,t,r),On(e)}function is(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ae(e,r)}}function os(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Fa)throw Fa}}function ds(e,t,r,n){ls=!1;var a=e.updateQueue;ts=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(sc&f)===f:(n&f)===f){0!==f&&f===La&&(ls=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var v=r;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){u=m.call(v,u,f);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,u,f):m)||void 0===f)break e;u=h({},u,f);break e;case 2:ts=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,i|=f;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===s&&(a.shared.lanes=0),fc|=i,e.lanes=i,e.memoizedState=u}}function us(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function hs(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)us(r[e],t)}var fs=B(null),ps=B(0);function ms(e,t){U(ps,e=uc),U(fs,t),uc=e|t.baseLanes}function gs(){U(ps,uc),U(fs,fs.current)}function vs(){uc=ps.current,z(fs),z(ps)}var bs=0,xs=null,ys=null,ws=null,js=!1,Ns=!1,_s=!1,Ss=0,ks=0,As=null,Es=0;function Cs(){throw Error(i(321))}function Ts(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$r(e[r],t[r]))return!1;return!0}function Ps(e,t,r,n,a,s){return bs=s,xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Vi:Gi,_s=!1,s=r(n,a),_s=!1,Ns&&(s=Os(t,r,n,a)),Ds(e),s}function Ds(e){I.H=Hi;var t=null!==ys&&null!==ys.next;if(bs=0,ws=ys=xs=null,js=!1,ks=0,As=null,t)throw Error(i(300));null===e||Ao||null!==(e=e.dependencies)&&_a(e)&&(Ao=!0)}function Os(e,t,r,n){xs=e;var a=0;do{if(Ns&&(As=null),ks=0,Ns=!1,25<=a)throw Error(i(301));if(a+=1,ws=ys=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}I.H=Ki,s=t(r,n)}while(Ns);return s}function Is(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?zs(t):t,e=e.useState()[0],(null!==ys?ys.memoizedState:null)!==e&&(xs.flags|=1024),t}function Ms(){var e=0!==Ss;return Ss=0,e}function Rs(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Ls(e){if(js){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}js=!1}bs=0,ws=ys=xs=null,Ns=!1,ks=Ss=0,As=null}function Fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ws?xs.memoizedState=ws=e:ws=ws.next=e,ws}function Bs(){if(null===ys){var e=xs.alternate;e=null!==e?e.memoizedState:null}else e=ys.next;var t=null===ws?xs.memoizedState:ws.next;if(null!==t)ws=t,ys=e;else{if(null===e){if(null===xs.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(ys=e).memoizedState,baseState:ys.baseState,baseQueue:ys.baseQueue,queue:ys.queue,next:null},null===ws?xs.memoizedState=ws=e:ws=ws.next=e}return ws}function zs(e){var t=ks;return ks+=1,null===As&&(As=[]),e=Ja(As,e,t),t=xs,null===(null===ws?t.memoizedState:ws.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Vi:Gi),e}function Us(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zs(e);if(e.$$typeof===w)return ka(e)}throw Error(i(438,String(e)))}function qs(e){var t=null,r=xs.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=xs.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=E;return t.index++,r}function Ws(e,t){return"function"===typeof t?t(e):t}function Hs(e){return Vs(Bs(),ys,e)}function Vs(e,t,r){var n=e.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=r;var a=e.baseQueue,s=n.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}t.baseQueue=a=s,n.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{var l=o=null,c=null,d=t=a.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(sc&h)===h:(bs&h)===h){var f=d.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===La&&(u=!0);else{if((bs&f)===f){d=d.next,f===La&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,xs.lanes|=f,fc|=f}h=d.action,_s&&r(s,h),s=d.hasEagerState?d.eagerState:r(s,h)}else f={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,xs.lanes|=h,fc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=s:c.next=l,!$r(s,e.memoizedState)&&(Ao=!0,u&&null!==(r=Fa)))throw r;e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Gs(e){var t=Bs(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);$r(s,t.memoizedState)||(Ao=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Ks(e,t,r){var n=xs,a=Bs(),s=sa;if(s){if(void 0===r)throw Error(i(407));r=r()}else r=t();var o=!$r((ys||a).memoizedState,r);if(o&&(a.memoizedState=r,Ao=!0),a=a.queue,gi(2048,8,Xs.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||null!==ws&&1&ws.memoizedState.tag){if(n.flags|=2048,fi(9,{destroy:void 0,resource:void 0},Ys.bind(null,n,a,r,t),null),null===nc)throw Error(i(349));s||0!==(124&bs)||$s(n,t,r)}return r}function $s(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=xs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ys(e,t,r,n){t.value=r,t.getSnapshot=n,Js(t)&&Zs(e)}function Xs(e,t,r){return r(function(){Js(t)&&Zs(e)})}function Js(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$r(e,r)}catch(n){return!0}}function Zs(e){var t=Pn(e,2);null!==t&&Rc(t,e,2)}function Qs(e){var t=Fs();if("function"===typeof e){var r=e;if(e=r(),_s){he(!0);try{r()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:e},t}function ei(e,t,r,n){return e.baseState=r,Vs(e,ys,"function"===typeof n?n:Ws)}function ti(e,t,r,n,a){if(Ui(e))throw Error(i(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==I.T?r(!0):s.isTransition=!1,n(s),null===(r=t.pending)?(s.next=t.pending=s,ri(t,s)):(s.next=r.next,t.pending=r.next=s)}}function ri(e,t){var r=t.action,n=t.payload,a=e.state;if(t.isTransition){var s=I.T,i={};I.T=i;try{var o=r(a,n),l=I.S;null!==l&&l(i,o),ni(e,t,o)}catch(c){si(e,t,c)}finally{I.T=s}}else try{ni(e,t,s=r(a,n))}catch(d){si(e,t,d)}}function ni(e,t,r){null!==r&&"object"===typeof r&&"function"===typeof r.then?r.then(function(r){ai(e,t,r)},function(r){return si(e,t,r)}):ai(e,t,r)}function ai(e,t,r){t.status="fulfilled",t.value=r,ii(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,ri(e,r)))}function si(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,ii(t),t=t.next}while(t!==n)}e.action=null}function ii(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oi(e,t){return t}function li(e,t){if(sa){var r=nc.formState;if(null!==r){e:{var n=xs;if(sa){if(aa){t:{for(var a=aa,s=oa;8!==a.nodeType;){if(!s){a=null;break t}if(null===(a=vu(a.nextSibling))){a=null;break t}}a="F!"===(s=a.data)||"F"===s?a:null}if(a){aa=vu(a.nextSibling),n="F!"===a.data;break e}}ca(n)}n=!1}n&&(t=r[0])}}return(r=Fs()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:t},r.queue=n,r=Fi.bind(null,xs,n),n.dispatch=r,n=Qs(!1),s=zi.bind(null,xs,!1,n.queue),a={state:t,dispatch:null,action:e,pending:null},(n=Fs()).queue=a,r=ti.bind(null,xs,a,s,r),a.dispatch=r,n.memoizedState=e,[t,r,!1]}function ci(e){return di(Bs(),ys,e)}function di(e,t,r){if(t=Vs(e,t,oi)[0],e=Hs(Ws)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=zs(t)}catch(i){if(i===Va)throw Ka;throw i}else n=t;var a=(t=Bs()).queue,s=a.dispatch;return r!==t.memoizedState&&(xs.flags|=2048,fi(9,{destroy:void 0,resource:void 0},ui.bind(null,a,r),null)),[n,s,e]}function ui(e,t){e.action=t}function hi(e){var t=Bs(),r=ys;if(null!==r)return di(t,r,e);Bs(),t=t.memoizedState;var n=(r=Bs()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function fi(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=xs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function pi(){return Bs().memoizedState}function mi(e,t,r,n){var a=Fs();n=void 0===n?null:n,xs.flags|=e,a.memoizedState=fi(1|t,{destroy:void 0,resource:void 0},r,n)}function gi(e,t,r,n){var a=Bs();n=void 0===n?null:n;var s=a.memoizedState.inst;null!==ys&&null!==n&&Ts(n,ys.memoizedState.deps)?a.memoizedState=fi(t,s,r,n):(xs.flags|=e,a.memoizedState=fi(1|t,s,r,n))}function vi(e,t){mi(8390656,8,e,t)}function bi(e,t){gi(2048,8,e,t)}function xi(e,t){return gi(4,2,e,t)}function yi(e,t){return gi(4,4,e,t)}function wi(e,t){if("function"===typeof t){e=e();var r=t(e);return function(){"function"===typeof r?r():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ji(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,gi(4,4,wi.bind(null,t,e),r)}function Ni(){}function _i(e,t){var r=Bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Ts(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Si(e,t){var r=Bs();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Ts(t,n[1]))return n[0];if(n=e(),_s){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n}function ki(e,t,r){return void 0===r||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=r,e=Mc(),xs.lanes|=e,fc|=e,r)}function Ai(e,t,r,n){return $r(r,t)?r:null!==fs.current?(e=ki(e,r,n),$r(e,t)||(Ao=!0),e):0===(42&bs)?(Ao=!0,e.memoizedState=r):(e=Mc(),xs.lanes|=e,fc|=e,t)}function Ei(e,t,r,n,a){var s=M.p;M.p=0!==s&&8>s?s:8;var i=I.T,o={};I.T=o,zi(e,!1,t,r);try{var l=a(),c=I.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Bi(e,t,function(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(e){r.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<r.length;e++)(0,r[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)}),n}(l,n),Ic());else Bi(e,t,n,Ic())}catch(d){Bi(e,t,{then:function(){},status:"rejected",reason:d},Ic())}finally{M.p=s,I.T=i}}function Ci(){}function Ti(e,t,r,n){if(5!==e.tag)throw Error(i(476));var a=Pi(e).queue;Ei(e,a,t,R,null===r?Ci:function(){return Di(e),r(n)})}function Pi(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:R},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Di(e){Bi(e,Pi(e).next.queue,{},Ic())}function Oi(){return ka($u)}function Ii(){return Bs().memoizedState}function Mi(){return Bs().memoizedState}function Ri(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Ic(),n=ss(t,e=as(r),r);return null!==n&&(Rc(n,t,r),is(n,t,r)),t={cache:Oa()},void(e.payload=t)}t=t.return}}function Li(e,t,r){var n=Ic();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ui(e)?qi(t,r):null!==(r=Tn(e,t,r,n))&&(Rc(r,e,n),Wi(r,t,n))}function Fi(e,t,r){Bi(e,t,r,Ic())}function Bi(e,t,r,n){var a={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ui(e))qi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,$r(o,i))return Cn(e,t,a,0),null===nc&&En(),!1}catch(l){}if(null!==(r=Tn(e,t,a,n)))return Rc(r,e,n),Wi(r,t,n),!0}return!1}function zi(e,t,r,n){if(n={lane:2,revertLane:Cd(),action:n,hasEagerState:!1,eagerState:null,next:null},Ui(e)){if(t)throw Error(i(479))}else null!==(t=Tn(e,r,n,2))&&Rc(t,e,2)}function Ui(e){var t=e.alternate;return e===xs||null!==t&&t===xs}function qi(e,t){Ns=js=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Wi(e,t,r){if(0!==(4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ae(e,r)}}var Hi={readContext:ka,use:Us,useCallback:Cs,useContext:Cs,useEffect:Cs,useImperativeHandle:Cs,useLayoutEffect:Cs,useInsertionEffect:Cs,useMemo:Cs,useReducer:Cs,useRef:Cs,useState:Cs,useDebugValue:Cs,useDeferredValue:Cs,useTransition:Cs,useSyncExternalStore:Cs,useId:Cs,useHostTransitionStatus:Cs,useFormState:Cs,useActionState:Cs,useOptimistic:Cs,useMemoCache:Cs,useCacheRefresh:Cs},Vi={readContext:ka,use:Us,useCallback:function(e,t){return Fs().memoizedState=[e,void 0===t?null:t],e},useContext:ka,useEffect:vi,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,mi(4194308,4,wi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return mi(4194308,4,e,t)},useInsertionEffect:function(e,t){mi(4,2,e,t)},useMemo:function(e,t){var r=Fs();t=void 0===t?null:t;var n=e();if(_s){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Fs();if(void 0!==r){var a=r(t);if(_s){he(!0);try{r(t)}finally{he(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=Li.bind(null,xs,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Fs().memoizedState=e},useState:function(e){var t=(e=Qs(e)).queue,r=Fi.bind(null,xs,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Ni,useDeferredValue:function(e,t){return ki(Fs(),e,t)},useTransition:function(){var e=Qs(!1);return e=Ei.bind(null,xs,e.queue,!0,!1),Fs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=xs,a=Fs();if(sa){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===nc)throw Error(i(349));0!==(124&sc)||$s(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,vi(Xs.bind(null,n,s,e),[e]),n.flags|=2048,fi(9,{destroy:void 0,resource:void 0},Ys.bind(null,n,s,r,t),null),r},useId:function(){var e=Fs(),t=nc.identifierPrefix;if(sa){var r=Zn;t="\xab"+t+"R"+(r=(Jn&~(1<<32-fe(Jn)-1)).toString(32)+r),0<(r=Ss++)&&(t+="H"+r.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(r=Es++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oi,useFormState:li,useActionState:li,useOptimistic:function(e){var t=Fs();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=zi.bind(null,xs,!0,r),r.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return Fs().memoizedState=Ri.bind(null,xs)}},Gi={readContext:ka,use:Us,useCallback:_i,useContext:ka,useEffect:bi,useImperativeHandle:ji,useInsertionEffect:xi,useLayoutEffect:yi,useMemo:Si,useReducer:Hs,useRef:pi,useState:function(){return Hs(Ws)},useDebugValue:Ni,useDeferredValue:function(e,t){return Ai(Bs(),ys.memoizedState,e,t)},useTransition:function(){var e=Hs(Ws)[0],t=Bs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Ks,useId:Ii,useHostTransitionStatus:Oi,useFormState:ci,useActionState:ci,useOptimistic:function(e,t){return ei(Bs(),0,e,t)},useMemoCache:qs,useCacheRefresh:Mi},Ki={readContext:ka,use:Us,useCallback:_i,useContext:ka,useEffect:bi,useImperativeHandle:ji,useInsertionEffect:xi,useLayoutEffect:yi,useMemo:Si,useReducer:Gs,useRef:pi,useState:function(){return Gs(Ws)},useDebugValue:Ni,useDeferredValue:function(e,t){var r=Bs();return null===ys?ki(r,e,t):Ai(r,ys.memoizedState,e,t)},useTransition:function(){var e=Gs(Ws)[0],t=Bs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Ks,useId:Ii,useHostTransitionStatus:Oi,useFormState:hi,useActionState:hi,useOptimistic:function(e,t){var r=Bs();return null!==ys?ei(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:qs,useCacheRefresh:Mi},$i=null,Yi=0;function Xi(e){var t=Yi;return Yi+=1,null===$i&&($i=[]),Ja($i,e,t)}function Ji(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zi(e,t){if(t.$$typeof===f)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qi(e){return(0,e._init)(e._payload)}function eo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Fn(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=qn(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===g?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===k&&Qi(s)===t.type)?(Ji(t=a(t,r.props),r),t.return=e,t):(Ji(t=zn(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Wn(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Un(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qn(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Ji(r=zn(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case m:return(t=Wn(t,e.mode,r)).return=e,t;case k:return h(e,t=(0,t._init)(t._payload),r)}if(O(t)||T(t))return(t=Un(t,e.mode,r,null)).return=e,t;if("function"===typeof t.then)return h(e,Xi(t),r);if(t.$$typeof===w)return h(e,Aa(e,t),r);Zi(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return r.key===a?c(e,t,r,n):null;case m:return r.key===a?d(e,t,r,n):null;case k:return f(e,t,r=(a=r._init)(r._payload),n)}if(O(r)||T(r))return null!==a?null:u(e,t,r,n,null);if("function"===typeof r.then)return f(e,t,Xi(r),n);if(r.$$typeof===w)return f(e,t,Aa(e,r),n);Zi(e,r)}return null}function v(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case m:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case k:return v(e,t,r,n=(0,n._init)(n._payload),a)}if(O(n)||T(n))return u(t,e=e.get(r)||null,n,a,null);if("function"===typeof n.then)return v(e,t,r,Xi(n),a);if(n.$$typeof===w)return v(e,t,r,Aa(t,n),a);Zi(t,n)}return null}function b(l,c,d,u){if("object"===typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case p:e:{for(var x=d.key;null!==c;){if(c.key===x){if((x=d.type)===g){if(7===c.tag){r(l,c.sibling),(u=a(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===x||"object"===typeof x&&null!==x&&x.$$typeof===k&&Qi(x)===c.type){r(l,c.sibling),Ji(u=a(c,d.props),d),u.return=l,l=u;break e}r(l,c);break}t(l,c),c=c.sibling}d.type===g?((u=Un(d.props.children,l.mode,u,d.key)).return=l,l=u):(Ji(u=zn(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return o(l);case m:e:{for(x=d.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(l,c.sibling),(u=a(c,d.children||[])).return=l,l=u;break e}r(l,c);break}t(l,c),c=c.sibling}(u=Wn(d,l.mode,u)).return=l,l=u}return o(l);case k:return b(l,c,d=(x=d._init)(d._payload),u)}if(O(d))return function(a,i,o,l){for(var c=null,d=null,u=i,p=i=0,m=null;null!==u&&p<o.length;p++){u.index>p?(m=u,u=null):m=u.sibling;var g=f(a,u,o[p],l);if(null===g){null===u&&(u=m);break}e&&u&&null===g.alternate&&t(a,u),i=s(g,i,p),null===d?c=g:d.sibling=g,d=g,u=m}if(p===o.length)return r(a,u),sa&&Qn(a,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(a,o[p],l))&&(i=s(u,i,p),null===d?c=u:d.sibling=u,d=u);return sa&&Qn(a,p),c}for(u=n(u);p<o.length;p++)null!==(m=v(u,a,p,o[p],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?p:m.key),i=s(m,i,p),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach(function(e){return t(a,e)}),sa&&Qn(a,p),c}(l,c,d,u);if(T(d)){if("function"!==typeof(x=T(d)))throw Error(i(150));return function(a,o,l,c){if(null==l)throw Error(i(151));for(var d=null,u=null,p=o,m=o=0,g=null,b=l.next();null!==p&&!b.done;m++,b=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var x=f(a,p,b.value,c);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(a,p),o=s(x,o,m),null===u?d=x:u.sibling=x,u=x,p=g}if(b.done)return r(a,p),sa&&Qn(a,m),d;if(null===p){for(;!b.done;m++,b=l.next())null!==(b=h(a,b.value,c))&&(o=s(b,o,m),null===u?d=b:u.sibling=b,u=b);return sa&&Qn(a,m),d}for(p=n(p);!b.done;m++,b=l.next())null!==(b=v(p,a,m,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?m:b.key),o=s(b,o,m),null===u?d=b:u.sibling=b,u=b);return e&&p.forEach(function(e){return t(a,e)}),sa&&Qn(a,m),d}(l,c,d=x.call(d),u)}if("function"===typeof d.then)return b(l,c,Xi(d),u);if(d.$$typeof===w)return b(l,c,Aa(l,d),u);Zi(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(r(l,c.sibling),(u=a(c,d)).return=l,l=u):(r(l,c),(u=qn(d,l.mode,u)).return=l,l=u),o(l)):r(l,c)}return function(e,t,r,n){try{Yi=0;var a=b(e,t,r,n);return $i=null,a}catch(i){if(i===Va||i===Ka)throw i;var s=Rn(29,i,null,e.mode);return s.lanes=n,s.return=e,s}}}var to=eo(!0),ro=eo(!1),no=B(null),ao=null;function so(e){var t=e.alternate;U(co,1&co.current),U(no,e),null===ao&&(null===t||null!==fs.current||null!==t.memoizedState)&&(ao=e)}function io(e){if(22===e.tag){if(U(co,co.current),U(no,e),null===ao){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ao=e)}}else oo()}function oo(){U(co,co.current),U(no,no.current)}function lo(e){z(no),ao===e&&(ao=null),z(co)}var co=B(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||gu(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:h({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var fo={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ic(),a=as(n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ss(e,a,n))&&(Rc(t,e,n),is(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ic(),a=as(n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ss(e,a,n))&&(Rc(t,e,n),is(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ic(),n=as(r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=ss(e,n,r))&&(Rc(t,e,r),is(t,e,r))}};function po(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!Yr(r,n)||!Yr(a,s))}function mo(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function go(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var a in r===t&&(r=h({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){vo(e)}function xo(e){console.error(e)}function yo(e){vo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function jo(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function No(e,t,r){return(r=as(r)).tag=3,r.payload={element:null},r.callback=function(){wo(e,t)},r}function _o(e){return(e=as(e)).tag=3,e}function So(e,t,r,n){var a=r.type.getDerivedStateFromError;if("function"===typeof a){var s=n.value;e.payload=function(){return a(s)},e.callback=function(){jo(t,r,n)}}var i=r.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){jo(t,r,n),"function"!==typeof a&&(null===_c?_c=new Set([this]):_c.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var ko=Error(i(461)),Ao=!1;function Eo(e,t,r,n){t.child=null===e?ro(t,null,r,n):to(t,e.child,r,n)}function Co(e,t,r,n,a){r=r.render;var s=t.ref;if("ref"in n){var i={};for(var o in n)"ref"!==o&&(i[o]=n[o])}else i=n;return Sa(t),n=Ps(e,t,r,i,s,a),o=Ms(),null===e||Ao?(sa&&o&&ta(t),t.flags|=1,Eo(e,t,n,a),t.child):(Rs(e,t,a),Yo(e,t,a))}function To(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Ln(s)||void 0!==s.defaultProps||null!==r.compare?((e=zn(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Po(e,t,s,n,a))}if(s=e.child,!Xo(e,a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:Yr)(i,n)&&e.ref===t.ref)return Yo(e,t,a)}return t.flags|=1,(e=Fn(s,n)).ref=t.ref,e.return=t,t.child=e}function Po(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(Yr(s,n)&&e.ref===t.ref){if(Ao=!1,t.pendingProps=n=s,!Xo(e,a))return t.lanes=e.lanes,Yo(e,t,a);0!==(131072&e.flags)&&(Ao=!0)}}return Mo(e,t,r,n,a)}function Do(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0!==(128&t.flags)){if(n=null!==s?s.baseLanes|r:r,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&~n}else t.childLanes=0,t.child=null;return Oo(e,t,n,r)}if(0===(536870912&r))return t.lanes=t.childLanes=536870912,Oo(e,t,null!==s?s.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wa(0,null!==s?s.cachePool:null),null!==s?ms(t,s):gs(),io(t)}else null!==s?(Wa(0,s.cachePool),ms(t,s),oo(),t.memoizedState=null):(null!==e&&Wa(0,null),gs(),oo());return Eo(e,t,a,r),t.child}function Oo(e,t,r,n){var a=qa();return a=null===a?null:{parent:Da._currentValue,pool:a},t.memoizedState={baseLanes:r,cachePool:a},null!==e&&Wa(0,null),gs(),io(t),null!==e&&Na(e,t,n,!0),null}function Io(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof r&&"object"!==typeof r)throw Error(i(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Mo(e,t,r,n,a){return Sa(t),r=Ps(e,t,r,n,void 0,a),n=Ms(),null===e||Ao?(sa&&n&&ta(t),t.flags|=1,Eo(e,t,r,a),t.child):(Rs(e,t,a),Yo(e,t,a))}function Ro(e,t,r,n,a,s){return Sa(t),t.updateQueue=null,r=Os(t,n,r,a),Ds(e),n=Ms(),null===e||Ao?(sa&&n&&ta(t),t.flags|=1,Eo(e,t,r,s),t.child):(Rs(e,t,s),Yo(e,t,s))}function Lo(e,t,r,n,a){if(Sa(t),null===t.stateNode){var s=In,i=r.contextType;"object"===typeof i&&null!==i&&(s=ka(i)),s=new r(n,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=n,s.state=t.memoizedState,s.refs={},rs(t),i=r.contextType,s.context="object"===typeof i&&null!==i?ka(i):In,s.state=t.memoizedState,"function"===typeof(i=r.getDerivedStateFromProps)&&(ho(t,r,i,n),s.state=t.memoizedState),"function"===typeof r.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(i=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),i!==s.state&&fo.enqueueReplaceState(s,s.state,null),ds(t,n,s,a),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=go(r,o);s.props=l;var c=s.context,d=r.contextType;i=In,"object"===typeof d&&null!==d&&(i=ka(d));var u=r.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==i)&&mo(t,s,n,i),ts=!1;var h=t.memoizedState;s.state=h,ds(t,n,s,a),cs(),c=t.memoizedState,o||h!==c||ts?("function"===typeof u&&(ho(t,r,u,n),c=t.memoizedState),(l=ts||po(t,r,l,n,h,c,i))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=i,n=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,ns(e,t),d=go(r,i=t.memoizedProps),s.props=d,u=t.pendingProps,h=s.context,c=r.contextType,l=In,"object"===typeof c&&null!==c&&(l=ka(c)),(c="function"===typeof(o=r.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==u||h!==l)&&mo(t,s,n,l),ts=!1,h=t.memoizedState,s.state=h,ds(t,n,s,a),cs();var f=t.memoizedState;i!==u||h!==f||ts||null!==e&&null!==e.dependencies&&_a(e.dependencies)?("function"===typeof o&&(ho(t,r,o,n),f=t.memoizedState),(d=ts||po(t,r,d,n,h,f,l)||null!==e&&null!==e.dependencies&&_a(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=l,n=d):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,Io(e,t),n=0!==(128&t.flags),s||n?(s=t.stateNode,r=n&&"function"!==typeof r.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&n?(t.child=to(t,e.child,null,a),t.child=to(t,null,r,a)):Eo(e,t,r,a),t.memoizedState=s.state,e=t.child):e=Yo(e,t,a),e}function Fo(e,t,r,n){return fa(),t.flags|=256,Eo(e,t,r,n),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Ha()}}function Uo(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=gc),e}function qo(e,t,r){var n,a=t.pendingProps,s=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),n&&(s=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(sa){if(s?so(t):oo(),sa){var l,c=aa;if(l=c){e:{for(l=c,c=oa;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vu(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xn?{id:Jn,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},(l=Rn(18,null,null,0)).stateNode=c,l.return=t,t.child=l,na=t,aa=null,l=!0):l=!1}l||ca(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gu(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=a.children,a=a.fallback,s?(oo(),c=Ho({mode:"hidden",children:c},s=t.mode),a=Un(a,s,r,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(s=t.child).memoizedState=zo(r),s.childLanes=Uo(e,n,r),t.memoizedState=Bo,a):(so(t),Wo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(so(t),t.flags&=-257,t=Vo(e,t,r)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),s=a.fallback,c=t.mode,a=Ho({mode:"visible",children:a.children},c),(s=Un(s,c,r,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,to(t,e.child,null,r),(a=t.child).memoizedState=zo(r),a.childLanes=Uo(e,n,r),t.memoizedState=Bo,t=s);else if(so(t),gu(c)){if(n=c.nextSibling&&c.nextSibling.dataset)var d=n.dgst;n=d,(a=Error(i(419))).stack="",a.digest=n,ma({value:a,source:null,stack:null}),t=Vo(e,t,r)}else if(Ao||Na(e,t,r,!1),n=0!==(r&e.childLanes),Ao||n){if(null!==(n=nc)&&(0!==(a=0!==((a=0!==(42&(a=r&-r))?1:Ee(a))&(n.suspendedLanes|r))?0:a)&&a!==l.retryLane))throw l.retryLane=a,Pn(e,a),Rc(n,e,a),ko;"$?"===c.data||Kc(),t=Vo(e,t,r)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,aa=vu(c.nextSibling),na=t,sa=!0,ia=null,oa=!1,null!==e&&($n[Yn++]=Jn,$n[Yn++]=Zn,$n[Yn++]=Xn,Jn=e.id,Zn=e.overflow,Xn=t),(t=Wo(t,a.children)).flags|=4096);return t}return s?(oo(),s=a.fallback,c=t.mode,d=(l=e.child).sibling,(a=Fn(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==d?s=Fn(d,s):(s=Un(s,c,r,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,null===(c=e.child.memoizedState)?c=zo(r):(null!==(l=c.cachePool)?(d=Da._currentValue,l=l.parent!==d?{parent:d,pool:d}:l):l=Ha(),c={baseLanes:c.baseLanes|r,cachePool:l}),s.memoizedState=c,s.childLanes=Uo(e,n,r),t.memoizedState=Bo,a):(so(t),e=(r=e.child).sibling,(r=Fn(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function Wo(e,t){return(t=Ho({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ho(e,t){return(e=Rn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Vo(e,t,r){return to(t,e.child,null,r),(e=Wo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),wa(e.return,t,r)}function Ko(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function $o(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(Eo(e,t,n.children,r),0!==(2&(n=co.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,r,t);else if(19===e.tag)Go(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(U(co,n),a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===uo(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ko(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ko(t,!0,r,null,s);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(Na(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Fn(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Fn(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_a(e))}function Jo(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ao=!0;else{if(!Xo(e,r)&&0===(128&t.flags))return Ao=!1,function(e,t,r){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),xa(0,Da,e.memoizedState.cache),fa();break;case 27:case 5:$(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:xa(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(so(t),t.flags|=128,null):0!==(r&t.child.childLanes)?qo(e,t,r):(so(t),null!==(e=Yo(e,t,r))?e.sibling:null);so(t);break;case 19:var a=0!==(128&e.flags);if((n=0!==(r&t.childLanes))||(Na(e,t,r,!1),n=0!==(r&t.childLanes)),a){if(n)return $o(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),U(co,co.current),n)break;return null;case 22:case 23:return t.lanes=0,Do(e,t,r);case 24:xa(0,Da,e.memoizedState.cache)}return Yo(e,t,r)}(e,t,r);Ao=0!==(131072&e.flags)}else Ao=!1,sa&&0!==(1048576&t.flags)&&ea(t,Kn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((a=n.$$typeof)===j){t.tag=11,t=Co(null,t,n,e,r);break e}if(a===S){t.tag=14,t=To(null,t,n,e,r);break e}}throw t=D(n)||n,Error(i(306,t,""))}Ln(n)?(e=go(n,e),t.tag=1,t=Lo(null,t,n,e,r)):(t.tag=0,t=Mo(null,t,n,e,r))}return t;case 0:return Mo(e,t,t.type,t.pendingProps,r);case 1:return Lo(e,t,n=t.type,a=go(n,t.pendingProps),r);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(i(387));n=t.pendingProps;var s=t.memoizedState;a=s.element,ns(e,t),ds(t,n,null,r);var o=t.memoizedState;if(n=o.cache,xa(0,Da,n),n!==s.cache&&ja(t,[Da],r,!0),cs(),n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Fo(e,t,n,r);break e}if(n!==a){ma(a=_n(Error(i(424)),t)),t=Fo(e,t,n,r);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=vu(e.firstChild),na=t,sa=!0,ia=null,oa=!0,r=ro(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fa(),n===a){t=Yo(e,t,r);break e}Eo(e,t,n,r)}t=t.child}return t;case 26:return Io(e,t),null===e?(r=Eu(t.type,null,t.pendingProps,null))?t.memoizedState=r:sa||(r=t.type,e=t.pendingProps,(n=nu(H.current).createElement(r))[De]=t,n[Oe]=e,eu(n,r,e),Ve(n),t.stateNode=n):t.memoizedState=Eu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&sa&&(n=t.stateNode=yu(t.type,t.pendingProps,H.current),na=t,oa=!0,a=aa,fu(t.type)?(bu=a,aa=vu(n.firstChild)):aa=a),Eo(e,t,t.pendingProps.children,r),Io(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sa&&((a=n=aa)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var a=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===s)return e}if(null===(e=vu(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,oa))?(t.stateNode=n,na=t,aa=vu(n.firstChild),oa=!1,a=!0):a=!1),a||ca(t)),$(t),a=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,n=s.children,iu(a,s)?n=null:null!==o&&iu(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=Ps(e,t,Is,null,null,r),$u._currentValue=a),Io(e,t),Eo(e,t,n,r),t.child;case 6:return null===e&&sa&&((e=r=aa)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=vu(e.nextSibling)))return null}return e}(r,t.pendingProps,oa))?(t.stateNode=r,na=t,aa=null,e=!0):e=!1),e||ca(t)),null;case 13:return qo(e,t,r);case 4:return G(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=to(t,null,n,r):Eo(e,t,n,r),t.child;case 11:return Co(e,t,t.type,t.pendingProps,r);case 7:return Eo(e,t,t.pendingProps,r),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,xa(0,t.type,n.value),Eo(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,Sa(t),n=n(a=ka(a)),t.flags|=1,Eo(e,t,n,r),t.child;case 14:return To(e,t,t.type,t.pendingProps,r);case 15:return Po(e,t,t.type,t.pendingProps,r);case 19:return $o(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=Ho(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=Fn(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Do(e,t,r);case 24:return Sa(t),n=ka(Da),null===e?(null===(a=qa())&&(a=nc,s=Oa(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=r),a=s),t.memoizedState={parent:n,cache:a},rs(t),xa(0,Da,a)):(0!==(e.lanes&r)&&(ns(e,t),ds(t,null,null,r),cs()),a=e.memoizedState,s=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),xa(0,Da,n)):(n=s.cache,xa(0,Da,n),n!==a.cache&&ja(t,[Da],r,!0))),Eo(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Zo(e){e.flags|=4}function Qo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Uu(t)){if(null!==(t=no.current)&&((4194048&sc)===sc?null!==ao:(62914560&sc)!==sc&&0===(536870912&sc)||t!==ao))throw Za=$a,Ga;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=65011712&a.subtreeFlags,n|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function nl(e,t,r){var n=t.pendingProps;switch(ra(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ya(Da),K(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?Zo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pa())),rl(t),null;case 26:return r=t.memoizedState,null===e?(Zo(t),null!==r?(rl(t),Qo(t,r)):(rl(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Zo(t),rl(t),Qo(t,r)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==n&&Zo(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),r=H.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Zo(t);else{if(!n){if(null===t.stateNode)throw Error(i(166));return rl(t),null}e=q.current,ha(t)?da(t):(e=yu(a,n,r),t.stateNode=e,Zo(t))}return rl(t),null;case 5:if(Y(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Zo(t);else{if(!n){if(null===t.stateNode)throw Error(i(166));return rl(t),null}if(e=q.current,ha(t))da(t);else{switch(a=nu(H.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?a.createElement(r,{is:n.is}):a.createElement(r)}}e[De]=t,e[Oe]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(eu(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zo(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Zo(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(e=H.current,ha(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=na))switch(a.tag){case 27:case 5:n=a.memoizedProps}e[De]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Xd(e.nodeValue,r)))||ca(t)}else(e=nu(e).createTextNode(n))[De]=t,t.stateNode=e}return rl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[De]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),a=!1}else a=pa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){a=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool);var s=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(s=n.memoizedState.cachePool.pool),s!==a&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),el(t,t.updateQueue),rl(t),null;case 4:return K(),null===e&&zd(t.stateNode.containerInfo),rl(t),null;case 10:return ya(t.type),rl(t),null;case 19:if(z(co),null===(a=t.memoizedState))return rl(t),null;if(n=0!==(128&t.flags),null===(s=a.rendering))if(n)tl(a,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=uo(e))){for(t.flags|=128,tl(a,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Bn(r,e),r=r.sibling;return U(co,1&co.current|2),t.child}e=e.sibling}null!==a.tail&&te()>jc&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=uo(s))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!sa)return rl(t),null}else 2*te()-a.renderingStartTime>jc&&536870912!==r&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=co.current,U(co,n?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return lo(t),vs(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&r)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(r=t.updateQueue)&&el(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&z(Ua),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ya(Da),rl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function al(e,t){switch(ra(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ya(Da),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(co),null;case 4:return K(),null;case 10:return ya(t.type),null;case 22:case 23:return lo(t),vs(),null!==e&&z(Ua),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ya(Da),null;default:return null}}function sl(e,t){switch(ra(t),t.tag){case 3:ya(Da),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:lo(t);break;case 19:z(co);break;case 10:ya(t.type);break;case 22:case 23:lo(t),vs(),null!==e&&z(Ua);break;case 24:ya(Da)}}function il(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){n=void 0;var s=r.create,i=r.inst;n=s(),i.destroy=n}r=r.next}while(r!==a)}}catch(o){dd(t,t.return,o)}}function ol(e,t,r){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){var i=n.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,a=t;var l=r,c=o;try{c()}catch(d){dd(a,l,d)}}}n=n.next}while(n!==s)}}catch(d){dd(t,t.return,d)}}function ll(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{hs(t,r)}catch(n){dd(e,e.return,n)}}}function cl(e,t,r){r.props=go(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){dd(e,t,n)}}function dl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof r?e.refCleanup=r(n):r.current=n}}catch(a){dd(e,t,a)}}function ul(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"===typeof n)try{n()}catch(a){dd(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof r)try{r(null)}catch(s){dd(e,t,s)}else r.current=null}function hl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){dd(e,e.return,a)}}function fl(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,o=null,l=null,c=null,d=null,u=null;for(p in r){var h=r[p];if(r.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(p)||Zd(e,t,p,null,n,h)}}for(var f in n){var p=n[f];if(h=r[f],n.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":a=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:p!==h&&Zd(e,t,f,p,n,h)}}return void gt(e,o,l,c,d,u,s,a);case"select":for(s in p=o=l=f=null,r)if(c=r[s],r.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:n.hasOwnProperty(s)||Zd(e,t,s,null,n,c)}for(a in n)if(s=n[a],c=r[a],n.hasOwnProperty(a)&&(null!=s||null!=c))switch(a){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Zd(e,t,a,s,n,c)}return t=l,r=o,n=p,void(null!=f?xt(e,!!r,f,!1):!!n!==!!r&&(null!=t?xt(e,!!r,t,!0):xt(e,!!r,r?[]:"",!1)));case"textarea":for(l in p=f=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zd(e,t,l,null,n,a)}for(o in n)if(a=n[o],s=r[o],n.hasOwnProperty(o)&&(null!=a||null!=s))switch(o){case"value":f=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(i(91));break;default:a!==s&&Zd(e,t,o,a,n,s)}return void yt(e,f,p);case"option":for(var m in r)if(f=r[m],r.hasOwnProperty(m)&&null!=f&&!n.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Zd(e,t,m,null,n,f);for(c in n)if(f=n[c],p=r[c],n.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zd(e,t,c,f,n,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)f=r[g],r.hasOwnProperty(g)&&null!=f&&!n.hasOwnProperty(g)&&Zd(e,t,g,null,n,f);for(d in n)if(f=n[d],p=r[d],n.hasOwnProperty(d)&&f!==p&&(null!=f||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:Zd(e,t,d,f,n,p)}return;default:if(kt(t)){for(var v in r)f=r[v],r.hasOwnProperty(v)&&void 0!==f&&!n.hasOwnProperty(v)&&Qd(e,t,v,void 0,n,f);for(u in n)f=n[u],p=r[u],!n.hasOwnProperty(u)||f===p||void 0===f&&void 0===p||Qd(e,t,u,f,n,p);return}}for(var b in r)f=r[b],r.hasOwnProperty(b)&&null!=f&&!n.hasOwnProperty(b)&&Zd(e,t,b,null,n,f);for(h in n)f=n[h],p=r[h],!n.hasOwnProperty(h)||f===p||null==f&&null==p||Zd(e,t,h,f,n,p)}(n,e.type,r,t),n[Oe]=t}catch(a){dd(e,e.return,a)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fu(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Jd));else if(4!==n&&(27===n&&fu(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,r),e=e.sibling;null!==e;)gl(e,t,r),e=e.sibling}function vl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&fu(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(vl(e,t,r),e=e.sibling;null!==e;)vl(e,t,r),e=e.sibling}function bl(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);eu(t,n,r),t[De]=e,t[Oe]=r}catch(s){dd(e,e.return,s)}}var xl=!1,yl=!1,wl=!1,jl="function"===typeof WeakSet?WeakSet:Set,Nl=null;function _l(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Ll(e,r),4&n&&il(5,r);break;case 1:if(Ll(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(i){dd(r,r.return,i)}else{var a=go(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){dd(r,r.return,o)}}64&n&&ll(r),512&n&&dl(r,r.return);break;case 3:if(Ll(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{hs(e,t)}catch(i){dd(r,r.return,i)}}break;case 27:null===t&&4&n&&bl(r);case 26:case 5:Ll(e,r),null===t&&4&n&&hl(r),512&n&&dl(r,r.return);break;case 12:Ll(e,r);break;case 13:Ll(e,r),4&n&&Tl(e,r),64&n&&(null!==(e=r.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=pd.bind(null,r))));break;case 22:if(!(n=null!==r.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||yl,a=xl;var s=yl;xl=n,(yl=t)&&!s?Bl(e,r,0!==(8772&r.subtreeFlags)):Ll(e,r),xl=a,yl=s}break;case 30:break;default:Ll(e,r)}}function Sl(e){var t=e.alternate;null!==t&&(e.alternate=null,Sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,Al=!1;function El(e,t,r){for(r=r.child;null!==r;)Cl(e,t,r),r=r.sibling}function Cl(e,t,r){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,r)}catch(s){}switch(r.tag){case 26:yl||ul(r,t),El(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:yl||ul(r,t);var n=kl,a=Al;fu(r.type)&&(kl=r.stateNode,Al=!1),El(e,t,r),wu(r.stateNode),kl=n,Al=a;break;case 5:yl||ul(r,t);case 6:if(n=kl,a=Al,kl=null,El(e,t,r),Al=a,null!==(kl=n))if(Al)try{(9===kl.nodeType?kl.body:"HTML"===kl.nodeName?kl.ownerDocument.body:kl).removeChild(r.stateNode)}catch(i){dd(r,t,i)}else try{kl.removeChild(r.stateNode)}catch(i){dd(r,t,i)}break;case 18:null!==kl&&(Al?(pu(9===(e=kl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Ah(e)):pu(kl,r.stateNode));break;case 4:n=kl,a=Al,kl=r.stateNode.containerInfo,Al=!0,El(e,t,r),kl=n,Al=a;break;case 0:case 11:case 14:case 15:yl||ol(2,r,t),yl||ol(4,r,t),El(e,t,r);break;case 1:yl||(ul(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount&&cl(r,t,n)),El(e,t,r);break;case 21:El(e,t,r);break;case 22:yl=(n=yl)||null!==r.memoizedState,El(e,t,r),yl=n;break;default:El(e,t,r)}}function Tl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ah(e)}catch(r){dd(t,t.return,r)}}function Pl(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new jl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new jl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var n=md.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function Dl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fu(l.type)){kl=l.stateNode,Al=!1;break e}break;case 5:kl=l.stateNode,Al=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===kl)throw Error(i(160));Cl(s,o,a),kl=null,Al=!1,null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Ol=null;function Il(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dl(t,e),Ml(e),4&n&&(ol(3,e,e.return),il(3,e),ol(5,e,e.return));break;case 1:Dl(t,e),Ml(e),512&n&&(yl||null===r||ul(r,r.return)),64&n&&xl&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:var a=Ol;if(Dl(t,e),Ml(e),512&n&&(yl||null===r||ul(r,r.return)),4&n){var s=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":(!(s=a.getElementsByTagName("title")[0])||s[Be]||s[De]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=a.createElement(n),a.head.insertBefore(s,a.querySelector("head > title"))),eu(s,n,r),s[De]=e,Ve(s),n=s;break e;case"link":var o=Bu("link","href",a).get(n+(r.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&s.getAttribute("rel")===(null==r.rel?null:r.rel)&&s.getAttribute("title")===(null==r.title?null:r.title)&&s.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){o.splice(l,1);break t}eu(s=a.createElement(n),n,r),a.head.appendChild(s);break;case"meta":if(o=Bu("meta","content",a).get(n+(r.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&s.getAttribute("name")===(null==r.name?null:r.name)&&s.getAttribute("property")===(null==r.property?null:r.property)&&s.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&s.getAttribute("charset")===(null==r.charSet?null:r.charSet)){o.splice(l,1);break t}eu(s=a.createElement(n),n,r),a.head.appendChild(s);break;default:throw Error(i(468,n))}s[De]=e,Ve(s),n=s}e.stateNode=n}else zu(a,e.type,e.stateNode);else e.stateNode=Iu(a,n,e.memoizedProps);else s!==n?(null===s?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):s.count--,null===n?zu(a,e.type,e.stateNode):Iu(a,n,e.memoizedProps)):null===n&&null!==e.stateNode&&fl(e,e.memoizedProps,r.memoizedProps)}break;case 27:Dl(t,e),Ml(e),512&n&&(yl||null===r||ul(r,r.return)),null!==r&&4&n&&fl(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Dl(t,e),Ml(e),512&n&&(yl||null===r||ul(r,r.return)),32&e.flags){a=e.stateNode;try{jt(a,"")}catch(p){dd(e,e.return,p)}}4&n&&null!=e.stateNode&&fl(e,a=e.memoizedProps,null!==r?r.memoizedProps:a),1024&n&&(wl=!0);break;case 6:if(Dl(t,e),Ml(e),4&n){if(null===e.stateNode)throw Error(i(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(p){dd(e,e.return,p)}}break;case 3:if(Fu=null,a=Ol,Ol=_u(t.containerInfo),Dl(t,e),Ol=a,Ml(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ah(t.containerInfo)}catch(p){dd(e,e.return,p)}wl&&(wl=!1,Rl(e));break;case 4:n=Ol,Ol=_u(e.stateNode.containerInfo),Dl(t,e),Ml(e),Ol=n;break;case 12:default:Dl(t,e),Ml(e);break;case 13:Dl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==r&&null!==r.memoizedState)&&(wc=te()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Pl(e,n)));break;case 22:a=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,d=xl,u=yl;if(xl=d||a,yl=u||c,Dl(t,e),yl=u,xl=d,Ml(e),8192&n)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||c||xl||yl||Fl(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(s=c.stateNode,a)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){dd(c,c.return,p)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(p){dd(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(r=n.retryQueue)&&(n.retryQueue=null,Pl(e,r))));break;case 19:Dl(t,e),Ml(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Pl(e,n)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(pl(n)){r=n;break}n=n.return}if(null==r)throw Error(i(160));switch(r.tag){case 27:var a=r.stateNode;vl(e,ml(e),a);break;case 5:var s=r.stateNode;32&r.flags&&(jt(s,""),r.flags&=-33),vl(e,ml(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;gl(e,ml(e),o);break;default:throw Error(i(161))}}catch(l){dd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Rl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Rl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ll(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)_l(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:ul(t,t.return);var r=t.stateNode;"function"===typeof r.componentWillUnmount&&cl(t,t.return,r),Fl(t);break;case 27:wu(t.stateNode);case 26:case 5:ul(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Bl(e,t,r){for(r=r&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,a=e,s=t,i=s.flags;switch(s.tag){case 0:case 11:case 15:Bl(a,s,r),il(4,s);break;case 1:if(Bl(a,s,r),"function"===typeof(a=(n=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){dd(n,n.return,c)}if(null!==(a=(n=s).updateQueue)){var o=n.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)us(l[a],o)}catch(c){dd(n,n.return,c)}}r&&64&i&&ll(s),dl(s,s.return);break;case 27:bl(s);case 26:case 5:Bl(a,s,r),r&&null===n&&4&i&&hl(s),dl(s,s.return);break;case 12:Bl(a,s,r);break;case 13:Bl(a,s,r),r&&4&i&&Tl(a,s);break;case 22:null===s.memoizedState&&Bl(a,s,r),dl(s,s.return);break;case 30:break;default:Bl(a,s,r)}t=t.sibling}}function zl(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Ia(r))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ia(e))}function ql(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,r,n),t=t.sibling}function Wl(e,t,r,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,r,n),2048&a&&il(9,t);break;case 1:case 13:default:ql(e,t,r,n);break;case 3:ql(e,t,r,n),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ia(e)));break;case 12:if(2048&a){ql(e,t,r,n),e=t.stateNode;try{var s=t.memoizedProps,i=s.id,o=s.onPostCommit;"function"===typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){dd(t,t.return,l)}}else ql(e,t,r,n);break;case 23:break;case 22:s=t.stateNode,i=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,r,n):Vl(e,t):2&s._visibility?ql(e,t,r,n):(s._visibility|=2,Hl(e,t,r,n,0!==(10256&t.subtreeFlags))),2048&a&&zl(i,t);break;case 24:ql(e,t,r,n),2048&a&&Ul(t.alternate,t)}}function Hl(e,t,r,n,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,i=t,o=r,l=n,c=i.flags;switch(i.tag){case 0:case 11:case 15:Hl(s,i,o,l,a),il(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?Hl(s,i,o,l,a):Vl(s,i):(d._visibility|=2,Hl(s,i,o,l,a)),a&&2048&c&&zl(i.alternate,i);break;case 24:Hl(s,i,o,l,a),a&&2048&c&&Ul(i.alternate,i);break;default:Hl(s,i,o,l,a)}t=t.sibling}}function Vl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,a=n.flags;switch(n.tag){case 22:Vl(r,n),2048&a&&zl(n.alternate,n);break;case 24:Vl(r,n),2048&a&&Ul(n.alternate,n);break;default:Vl(r,n)}t=t.sibling}}var Gl=8192;function Kl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 26:Kl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,r){if(null===qu)throw Error(i(475));var n=qu;if("stylesheet"===t.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Cu(r.href),s=e.querySelector(Tu(a));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=Hu.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=s,void Ve(s);s=e.ownerDocument||e,r=Pu(r),(a=ju.get(a))&&Ru(r,a),Ve(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(s,"link",r),t.instance=s}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=Hu.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ol,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Ol;Ol=_u(e.stateNode.containerInfo),Kl(e),Ol=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Kl(e),Gl=t):Kl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Nl=n,Ql(n,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Xl(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Nl=n,Ql(n,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Zl(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function Ql(e,t){for(;null!==Nl;){var r=Nl;switch(r.tag){case 0:case 11:case 15:ol(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Ia(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,Nl=n;else e:for(r=e;null!==Nl;){var a=(n=Nl).sibling,s=n.return;if(Sl(n),n===r){Nl=null;break e}if(null!==a){a.return=s,Nl=a;break e}Nl=s}}}var ec={getCacheForType:function(e){var t=ka(Da),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},tc="function"===typeof WeakMap?WeakMap:Map,rc=0,nc=null,ac=null,sc=0,ic=0,oc=null,lc=!1,cc=!1,dc=!1,uc=0,hc=0,fc=0,pc=0,mc=0,gc=0,vc=0,bc=null,xc=null,yc=!1,wc=0,jc=1/0,Nc=null,_c=null,Sc=0,kc=null,Ac=null,Ec=0,Cc=0,Tc=null,Pc=null,Dc=0,Oc=null;function Ic(){if(0!==(2&rc)&&0!==sc)return sc&-sc;if(null!==I.T){return 0!==La?La:Cd()}return Te()}function Mc(){0===gc&&(gc=0===(536870912&sc)||sa?je():536870912);var e=no.current;return null!==e&&(e.flags|=32),gc}function Rc(e,t,r){(e!==nc||2!==ic&&9!==ic)&&null===e.cancelPendingCommit||(Wc(e,0),zc(e,sc,gc,!1)),Se(e,r),0!==(2&rc)&&e===nc||(e===nc&&(0===(2&rc)&&(pc|=r),4===hc&&zc(e,sc,gc,!1)),jd(e))}function Lc(e,t,r){if(0!==(6&rc))throw Error(i(327));for(var n=!r&&0===(124&t)&&0===(t&e.expiredLanes)||ye(e,t),a=n?function(e,t){var r=rc;rc|=2;var n=Vc(),a=Gc();nc!==e||sc!==t?(Nc=null,jc=te()+500,Wc(e,t)):cc=ye(e,t);e:for(;;)try{if(0!==ic&&null!==ac){t=ac;var s=oc;t:switch(ic){case 1:ic=0,oc=null,Qc(e,t,s,1);break;case 2:case 9:if(Ya(s)){ic=0,oc=null,Zc(t);break}t=function(){2!==ic&&9!==ic||nc!==e||(ic=7),jd(e)},s.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:Ya(s)?(ic=0,oc=null,Zc(t)):(ic=0,oc=null,Qc(e,t,s,7));break;case 5:var o=null;switch(ac.tag){case 26:o=ac.memoizedState;case 5:case 27:var l=ac;if(!o||Uu(o)){ic=0,oc=null;var c=l.sibling;if(null!==c)ac=c;else{var d=l.return;null!==d?(ac=d,ed(d)):ac=null}break t}}ic=0,oc=null,Qc(e,t,s,5);break;case 6:ic=0,oc=null,Qc(e,t,s,6);break;case 8:qc(),hc=6;break e;default:throw Error(i(462))}}Xc();break}catch(u){Hc(e,u)}return ba=va=null,I.H=n,I.A=a,rc=r,null!==ac?0:(nc=null,sc=0,En(),hc)}(e,t):$c(e,t,!0),s=n;;){if(0===a){cc&&!n&&zc(e,t,0,!1);break}if(r=e.current.alternate,!s||Bc(r)){if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Wc(l,o).flags|=256),2!==(o=$c(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,a=4;break e}s=xc,xc=a,null!==s&&(null===xc?xc=s:xc.push.apply(xc,s))}a=o}if(s=!1,2!==a)continue}}if(1===a){Wc(e,0),zc(e,t,0,!0);break}e:{switch(n=e,s=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:zc(n,t,gc,!lc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(a=wc+300-te())){if(zc(n,t,gc,!lc),0!==xe(n,0,!0))break e;n.timeoutHandle=lu(Fc.bind(null,n,r,xc,Nc,yc,t,gc,pc,vc,lc,s,2,-0,0),a)}else Fc(n,r,xc,Nc,yc,t,gc,pc,vc,lc,s,0,-0,0)}break}a=$c(e,t,!1),s=!1}jd(e)}function Fc(e,t,r,n,a,s,o,l,c,d,u,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(qu={stylesheets:null,count:0,unsuspend:Wu},$l(t),null!==(h=function(){if(null===qu)throw Error(i(475));var e=qu;return e.stylesheets&&0===e.count&&Gu(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&Gu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=h(rd.bind(null,e,t,s,r,n,a,o,l,c,u,1,f,p)),void zc(e,s,o,!d);rd(e,t,s,r,n,a,o,l,c)}function Bc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!$r(s(),a))return!1}catch(i){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,r,n){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var s=31-fe(a),i=1<<s;n[s]=-1,a&=~i}0!==r&&ke(e,r,t)}function Uc(){return 0!==(6&rc)||(Nd(0,!1),!1)}function qc(){if(null!==ac){if(0===ic)var e=ac.return;else ba=va=null,Ls(e=ac),$i=null,Yi=0,e=ac;for(;null!==e;)sl(e.alternate,e),e=e.return;ac=null}}function Wc(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,cu(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),qc(),nc=e,ac=r=Fn(e.current,null),sc=t,ic=0,oc=null,lc=!1,cc=ye(e,t),dc=!1,vc=gc=mc=pc=fc=hc=0,xc=bc=null,yc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var a=31-fe(n),s=1<<a;t|=e[a],n&=~s}return uc=t,En(),r}function Hc(e,t){xs=null,I.H=Hi,t===Va||t===Ka?(t=Qa(),ic=3):t===Ga?(t=Qa(),ic=4):ic=t===ko?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===ac&&(hc=1,wo(e,_n(t,e.current)))}function Vc(){var e=I.H;return I.H=Hi,null===e?Hi:e}function Gc(){var e=I.A;return I.A=ec,e}function Kc(){hc=4,lc||(4194048&sc)!==sc&&null!==no.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===nc||zc(nc,sc,gc,!1)}function $c(e,t,r){var n=rc;rc|=2;var a=Vc(),s=Gc();nc===e&&sc===t||(Nc=null,Wc(e,t)),t=!1;var i=hc;e:for(;;)try{if(0!==ic&&null!==ac){var o=ac,l=oc;switch(ic){case 8:qc(),i=6;break e;case 3:case 2:case 9:case 6:null===no.current&&(t=!0);var c=ic;if(ic=0,oc=null,Qc(e,o,l,c),r&&cc){i=0;break e}break;default:c=ic,ic=0,oc=null,Qc(e,o,l,c)}}Yc(),i=hc;break}catch(d){Hc(e,d)}return t&&e.shellSuspendCounter++,ba=va=null,rc=n,I.H=a,I.A=s,null===ac&&(nc=null,sc=0,En()),i}function Yc(){for(;null!==ac;)Jc(ac)}function Xc(){for(;null!==ac&&!Q();)Jc(ac)}function Jc(e){var t=Jo(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function Zc(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Ro(r,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Ro(r,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Ls(t);default:sl(r,t),t=Jo(r,t=ac=Bn(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function Qc(e,t,r,n){ba=va=null,Ls(t),$i=null,Yi=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=r.alternate)&&Na(t,r,a,!0),null!==(r=no.current)){switch(r.tag){case 13:return null===ao?Kc():null===r.alternate&&0===hc&&(hc=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===$a?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),ud(e,n,a)),!1;case 22:return r.flags|=65536,n===$a?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),ud(e,n,a)),!1}throw Error(i(435,r.tag))}return ud(e,n,a),Kc(),!1}if(sa)return null!==(t=no.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==la&&ma(_n(e=Error(i(422),{cause:n}),r))):(n!==la&&ma(_n(t=Error(i(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,n=_n(n,r),os(e,a=No(e.stateNode,n,a)),4!==hc&&(hc=2)),!1;var s=Error(i(520),{cause:n});if(s=_n(s,r),null===bc?bc=[s]:bc.push(s),4!==hc&&(hc=2),null===t)return!0;n=_n(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,os(r,e=No(r.stateNode,n,e)),!1;case 1:if(t=r.type,s=r.stateNode,0===(128&r.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===_c||!_c.has(s))))return r.flags|=65536,a&=-a,r.lanes|=a,So(a=_o(a),e,r,n),os(r,a),!1}r=r.return}while(null!==r);return!1}(e,a,t,r,sc))return hc=1,wo(e,_n(r,e.current)),void(ac=null)}catch(s){if(null!==a)throw ac=a,s;return hc=1,wo(e,_n(r,e.current)),void(ac=null)}32768&t.flags?(sa||1===n?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=no.current)&&13===n.tag&&(n.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,lc);e=t.return;var r=nl(t.alternate,t,uc);if(null!==r)return void(ac=r);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===hc&&(hc=5)}function td(e,t){do{var r=al(e.alternate,e);if(null!==r)return r.flags&=32767,void(ac=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=r}while(null!==e);hc=6,ac=null}function rd(e,t,r,n,a,s,o,l,c){e.cancelPendingCommit=null;do{od()}while(0!==Sc);if(0!==(6&rc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(s=t.lanes|t.childLanes,function(e,t,r,n,a,s){var i=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=i&~r;0<r;){var d=31-fe(r),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var f=h[d];null!==f&&(f.lane&=-536870913)}r&=~u}0!==n&&ke(e,n,0),0!==s&&0===a&&0!==e.tag&&(e.suspendedLanes|=s&~(i&~t))}(e,r,s|=An,o,l,c),e===nc&&(ac=nc=null,sc=0),Ac=t,kc=e,Ec=r,Cc=s,Tc=a,Pc=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(se,function(){return ld(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=I.T,I.T=null,a=M.p,M.p=2,o=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,tu=rh,en(e=Qr(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(g){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++d===a&&(l=o),f===s&&++u===n&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ru={focusedElem:e,selectionRange:r},rh=!1,Nl=t;null!==Nl;)if(e=(t=Nl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Nl=e;else for(;null!==Nl;){switch(s=(t=Nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,r=t,a=s.memoizedProps,s=s.memoizedState,n=r.stateNode;try{var m=go(r.type,a,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(m,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(v){dd(r,r.return,v)}}break;case 3:if(0!==(1024&e))if(9===(r=(e=t.stateNode.containerInfo).nodeType))mu(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Nl=e;break}Nl=t.return}}(e,t)}finally{rc=o,M.p=a,I.T=n}}Sc=1,nd(),ad(),sd()}}function nd(){if(1===Sc){Sc=0;var e=kc,t=Ac,r=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||r){r=I.T,I.T=null;var n=M.p;M.p=2;var a=rc;rc|=4;try{Il(t,e);var s=ru,i=Qr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(i!==o&&o&&o.ownerDocument&&Zr(o.ownerDocument.documentElement,o)){if(null!==l&&en(o)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var u=o.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(i=g,g=m,m=i);var v=Jr(o,m),b=Jr(o,g);if(v&&b&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==b.node||f.focusOffset!==b.offset)){var x=u.createRange();x.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(x),f.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),f.addRange(x))}}}}for(u=[],f=o;f=f.parentNode;)1===f.nodeType&&u.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<u.length;o++){var y=u[o];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}rh=!!tu,ru=tu=null}finally{rc=a,M.p=n,I.T=r}}e.current=t,Sc=2}}function ad(){if(2===Sc){Sc=0;var e=kc,t=Ac,r=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||r){r=I.T,I.T=null;var n=M.p;M.p=2;var a=rc;rc|=4;try{_l(e,t.alternate,t)}finally{rc=a,M.p=n,I.T=r}}Sc=3}}function sd(){if(4===Sc||3===Sc){Sc=0,ee();var e=kc,t=Ac,r=Ec,n=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Sc=5:(Sc=0,Ac=kc=null,id(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(_c=null),Ce(r),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==n){t=I.T,a=M.p,M.p=2,I.T=null;try{for(var s=e.onRecoverableError,i=0;i<n.length;i++){var o=n[i];s(o.value,{componentStack:o.stack})}}finally{I.T=t,M.p=a}}0!==(3&Ec)&&od(),jd(e),a=e.pendingLanes,0!==(4194090&r)&&0!==(42&a)?e===Oc?Dc++:(Dc=0,Oc=e):Dc=0,Nd(0,!1)}}function id(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ia(t)))}function od(e){return nd(),ad(),sd(),ld()}function ld(){if(5!==Sc)return!1;var e=kc,t=Cc;Cc=0;var r=Ce(Ec),n=I.T,a=M.p;try{M.p=32>r?32:r,I.T=null,r=Tc,Tc=null;var s=kc,o=Ec;if(Sc=0,Ac=kc=null,Ec=0,0!==(6&rc))throw Error(i(331));var l=rc;if(rc|=4,Jl(s.current),Wl(s,s.current,o,r),rc=l,Nd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,s)}catch(c){}return!0}finally{M.p=a,I.T=n,id(e,t)}}function cd(e,t,r){t=_n(r,t),null!==(e=ss(e,t=No(e.stateNode,t,2),2))&&(Se(e,2),jd(e))}function dd(e,t,r){if(3===e.tag)cd(e,e,r);else for(;null!==t;){if(3===t.tag){cd(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===_c||!_c.has(n))){e=_n(r,e),null!==(n=ss(t,r=_o(2),2))&&(So(r,n,t,e),Se(n,2),jd(n));break}}t=t.return}}function ud(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new tc;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(dc=!0,a.add(r),e=hd.bind(null,e,t,r),t.then(e,e))}function hd(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,nc===e&&(sc&r)===r&&(4===hc||3===hc&&(62914560&sc)===sc&&300>te()-wc?0===(2&rc)&&Wc(e,0):mc|=r,vc===sc&&(vc=0)),jd(e)}function fd(e,t){0===t&&(t=Ne()),null!==(e=Pn(e,t))&&(Se(e,t),jd(e))}function pd(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),fd(e,r)}function md(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==n&&n.delete(t),fd(e,r)}var gd=null,vd=null,bd=!1,xd=!1,yd=!1,wd=0;function jd(e){e!==vd&&null===e.next&&(null===vd?gd=vd=e:vd=vd.next=e),xd=!0,bd||(bd=!0,uu(function(){0!==(6&rc)?J(ne,_d):Sd()}))}function Nd(e,t){if(!yd&&xd){yd=!0;do{for(var r=!1,n=gd;null!==n;){if(!t)if(0!==e){var a=n.pendingLanes;if(0===a)var s=0;else{var i=n.suspendedLanes,o=n.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=a&~(i&~o))?201326741&s|1:s?2|s:0}0!==s&&(r=!0,Ed(n,s))}else s=sc,0===(3&(s=xe(n,n===nc?s:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||ye(n,s)||(r=!0,Ed(n,s));n=n.next}}while(r);yd=!1}}function _d(){Sd()}function Sd(){xd=bd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ou&&(ou=e,!0);return ou=null,!1}()&&(e=wd),wd=0);for(var t=te(),r=null,n=gd;null!==n;){var a=n.next,s=kd(n,t);0===s?(n.next=null,null===r?gd=a:r.next=a,null===a&&(vd=r)):(r=n,(0!==e||0!==(3&s))&&(xd=!0)),n=a}Nd(e,!1)}function kd(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var i=31-fe(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=we(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(r=sc,r=xe(e,e===(t=nc)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===ic||9===ic)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&Z(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&r)||ye(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&Z(n),Ce(r)){case 2:case 8:r=ae;break;case 32:default:r=se;break;case 268435456:r=oe}return n=Ad.bind(null,e),r=J(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&Z(n),e.callbackPriority=2,e.callbackNode=null,2}function Ad(e,t){if(0!==Sc&&5!==Sc)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(od()&&e.callbackNode!==r)return null;var n=sc;return 0===(n=xe(e,e===nc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Lc(e,n,t),kd(e,te()),null!=e.callbackNode&&e.callbackNode===r?Ad.bind(null,e):null)}function Ed(e,t){if(od())return null;Lc(e,t,!0)}function Cd(){return 0===wd&&(wd=je()),wd}function Td(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ct(""+e)}function Pd(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Dd=0;Dd<wn.length;Dd++){var Od=wn[Dd];jn(Od.toLowerCase(),"on"+(Od[0].toUpperCase()+Od.slice(1)))}jn(fn,"onAnimationEnd"),jn(pn,"onAnimationIteration"),jn(mn,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(gn,"onTransitionRun"),jn(vn,"onTransitionStart"),jn(bn,"onTransitionCancel"),jn(xn,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Md=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Id));function Rd(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=c;try{s(a)}catch(d){vo(d)}a.currentTarget=null,s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=c;try{s(a)}catch(d){vo(d)}a.currentTarget=null,s=l}}}}function Ld(e,t){var r=t[Me];void 0===r&&(r=t[Me]=new Set);var n=e+"__bubble";r.has(n)||(Ud(t,e,2,!1),r.add(n))}function Fd(e,t,r){var n=0;t&&(n|=4),Ud(r,e,n,t)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function zd(e){if(!e[Bd]){e[Bd]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Md.has(t)||Fd(t,!1,e),Fd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bd]||(t[Bd]=!0,Fd("selectionchange",!1,t))}}function Ud(e,t,r,n){switch(ch(t)){case 2:var a=nh;break;case 8:a=ah;break;default:a=sh}r=a.bind(null,t,r,e),a=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function qd(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a)break;if(4===i)for(i=n.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==o;){if(null===(i=Ue(o)))return;if(5===(c=i.tag)||6===c||26===c||27===c){n=s=i;continue e}o=o.parentNode}}n=n.return}Rt(function(){var n=s,a=Pt(r),i=[];e:{var o=yn.get(e);if(void 0!==o){var c=Qt,d=e;switch(e){case"keypress":if(0===Vt(r))break e;case"keydown":case"keyup":c=pr;break;case"focusin":d="focus",c=sr;break;case"focusout":d="blur",c=sr;break;case"beforeblur":case"afterblur":c=sr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=gr;break;case fn:case pn:case mn:c=ir;break;case xn:c=vr;break;case"scroll":case"scrollend":c=tr;break;case"wheel":c=br;break;case"copy":case"cut":case"paste":c=or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mr;break;case"toggle":case"beforetoggle":c=xr}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),f=u?null!==o?o+"Capture":null:o;u=[];for(var p,m=n;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Lt(m,f))&&u.push(Wd(m,g,p)),h)break;m=m.return}0<u.length&&(o=new c(o,d,null,r,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===Tt||!(d=r.relatedTarget||r.fromElement)||!Ue(d)&&!d[Ie])&&(c||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=n,null!==(d=(d=r.relatedTarget||r.toElement)?Ue(d):null)&&(h=l(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=n),c!==d)){if(u=nr,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=mr,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:We(c),p=null==d?o:We(d),(o=new u(g,m+"leave",c,r,a)).target=h,o.relatedTarget=p,g=null,Ue(a)===n&&((u=new u(f,m+"enter",d,r,a)).target=p,u.relatedTarget=h,g=u),h=g,c&&d)e:{for(f=d,m=0,p=u=c;p;p=Vd(p))m++;for(p=0,g=f;g;g=Vd(g))p++;for(;0<m-p;)u=Vd(u),m--;for(;0<p-m;)f=Vd(f),p--;for(;m--;){if(u===f||null!==f&&u===f.alternate)break e;u=Vd(u),f=Vd(f)}u=null}else u=null;null!==c&&Gd(i,o,c,u,!1),null!==d&&null!==h&&Gd(i,h,d,u,!0)}if("select"===(c=(o=n?We(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Lr;else if(Pr(o))if(Fr)v=Kr;else{v=Vr;var b=Hr}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?n&&kt(n.elementType)&&(v=Lr):v=Gr;switch(v&&(v=v(e,n))?Dr(i,v,r,a):(b&&b(e,o,n),"focusout"===e&&n&&"number"===o.type&&null!=n.memoizedProps.value&&bt(o,"number",o.value)),b=n?We(n):window,e){case"focusin":(Pr(b)||"true"===b.contentEditable)&&(rn=b,nn=n,an=null);break;case"focusout":an=nn=rn=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,on(i,r,a);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":on(i,r,a)}var x;if(wr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Cr?Ar(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(_r&&"ko"!==r.locale&&(Cr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Cr&&(x=Ht()):(qt="value"in(Ut=a)?Ut.value:Ut.textContent,Cr=!0)),0<(b=Hd(n,y)).length&&(y=new lr(y,e,null,r,a),i.push({event:y,listeners:b}),x?y.data=x:null!==(x=Er(r))&&(y.data=x))),(x=Nr?function(e,t){switch(e){case"compositionend":return Er(t);case"keypress":return 32!==t.which?null:(kr=!0,Sr);case"textInput":return(e=t.data)===Sr&&kr?null:e;default:return null}}(e,r):function(e,t){if(Cr)return"compositionend"===e||!wr&&Ar(e,t)?(e=Ht(),Wt=qt=Ut=null,Cr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _r&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(y=Hd(n,"onBeforeInput")).length&&(b=new lr("onBeforeInput","beforeinput",null,r,a),i.push({event:b,listeners:y}),b.data=x)),function(e,t,r,n,a){if("submit"===t&&r&&r.stateNode===a){var s=Td((a[Oe]||null).action),i=n.submitter;i&&null!==(t=(t=i[Oe]||null)?Td(t.formAction):i.getAttribute("formAction"))&&(s=t,i=null);var o=new Qt("action","action",null,n,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==wd){var e=i?Pd(a,i):new FormData(a);Ti(r,{pending:!0,data:e,method:a.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=i?Pd(a,i):new FormData(a),Ti(r,{pending:!0,data:e,method:a.method,action:s},s,e))},currentTarget:a}]})}}(i,e,n,r,a)}Rd(i,t)})}function Wd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hd(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===s||(null!=(a=Lt(e,r))&&n.unshift(Wd(e,a,s)),null!=(a=Lt(e,t))&&n.push(Wd(e,a,s))),3===e.tag)return n;e=e.return}return[]}function Vd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gd(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===n)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=Lt(r,s))&&i.unshift(Wd(r,c,l)):a||null!=(c=Lt(r,s))&&i.push(Wd(r,c,l))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Kd=/\r\n?/g,$d=/\u0000|\uFFFD/g;function Yd(e){return("string"===typeof e?e:""+e).replace(Kd,"\n").replace($d,"")}function Xd(e,t){return t=Yd(t),Yd(e)===t}function Jd(){}function Zd(e,t,r,n,a,s){switch(r){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||jt(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&jt(e,""+n);break;case"className":rt(e,"class",n);break;case"tabIndex":rt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,r,n);break;case"style":St(e,n,s);break;case"data":if("object"!==t){rt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Ct(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===r?("input"!==t&&Zd(e,t,"name",a.name,a,null),Zd(e,t,"formEncType",a.formEncType,a,null),Zd(e,t,"formMethod",a.formMethod,a,null),Zd(e,t,"formTarget",a.formTarget,a,null)):(Zd(e,t,"encType",a.encType,a,null),Zd(e,t,"method",a.method,a,null),Zd(e,t,"target",a.target,a,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Ct(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Jd);break;case"onScroll":null!=n&&Ld("scroll",e);break;case"onScrollEnd":null!=n&&Ld("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(i(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}r=Ct(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":Ld("beforetoggle",e),Ld("toggle",e),tt(e,"popover",n);break;case"xlinkActuate":nt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":nt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":nt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":nt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":nt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":nt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":nt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":nt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":nt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":tt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&tt(e,r=At.get(r)||r,n)}}function Qd(e,t,r,n,a,s){switch(r){case"style":St(e,n,s);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(i(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=r}}break;case"children":"string"===typeof n?jt(e,n):("number"===typeof n||"bigint"===typeof n)&&jt(e,""+n);break;case"onScroll":null!=n&&Ld("scroll",e);break;case"onScrollEnd":null!=n&&Ld("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"===typeof(s=null!=(s=e[Oe]||null)?s[r]:null)&&e.removeEventListener(t,s,a),"function"!==typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):tt(e,r,n):("function"!==typeof s&&null!==s&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,a)))}}function eu(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ld("error",e),Ld("load",e);var n,a=!1,s=!1;for(n in r)if(r.hasOwnProperty(n)){var o=r[n];if(null!=o)switch(n){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zd(e,t,n,o,r,null)}}return s&&Zd(e,t,"srcSet",r.srcSet,r,null),void(a&&Zd(e,t,"src",r.src,r,null));case"input":Ld("invalid",e);var l=n=o=s=null,c=null,d=null;for(a in r)if(r.hasOwnProperty(a)){var u=r[a];if(null!=u)switch(a){case"name":s=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":n=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(i(137,t));break;default:Zd(e,t,a,u,r,null)}}return vt(e,n,l,c,d,o,s,!1),void ut(e);case"select":for(s in Ld("invalid",e),a=o=n=null,r)if(r.hasOwnProperty(s)&&null!=(l=r[s]))switch(s){case"value":n=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:Zd(e,t,s,l,r,null)}return t=n,r=o,e.multiple=!!a,void(null!=t?xt(e,!!a,t,!1):null!=r&&xt(e,!!a,r,!0));case"textarea":for(o in Ld("invalid",e),n=s=a=null,r)if(r.hasOwnProperty(o)&&null!=(l=r[o]))switch(o){case"value":a=l;break;case"defaultValue":s=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:Zd(e,t,o,l,r,null)}return wt(e,a,s,n),void ut(e);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Zd(e,t,c,a,r,null);return;case"dialog":Ld("beforetoggle",e),Ld("toggle",e),Ld("cancel",e),Ld("close",e);break;case"iframe":case"object":Ld("load",e);break;case"video":case"audio":for(a=0;a<Id.length;a++)Ld(Id[a],e);break;case"image":Ld("error",e),Ld("load",e);break;case"details":Ld("toggle",e);break;case"embed":case"source":case"link":Ld("error",e),Ld("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in r)if(r.hasOwnProperty(d)&&null!=(a=r[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zd(e,t,d,a,r,null)}return;default:if(kt(t)){for(u in r)r.hasOwnProperty(u)&&(void 0!==(a=r[u])&&Qd(e,t,u,a,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(null!=(a=r[l])&&Zd(e,t,l,a,r,null))}var tu=null,ru=null;function nu(e){return 9===e.nodeType?e:e.ownerDocument}function au(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function su(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function iu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ou=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(hu)}:lu;function hu(e){setTimeout(function(){throw e})}function fu(e){return"head"===e}function pu(e,t){var r=t,n=0,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0<n&&8>n){r=n;var i=e.ownerDocument;if(1&r&&wu(i.documentElement),2&r&&wu(i.body),4&r)for(wu(r=i.head),i=r.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||r.removeChild(i),i=o}}if(0===a)return e.removeChild(s),void Ah(t);a--}else"$"===r||"$?"===r||"$!"===r?a++:n=r.charCodeAt(0)-48;else n=0;r=s}while(r);Ah(t)}function mu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":mu(r),ze(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function gu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bu=null;function xu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function yu(e,t,r){switch(t=nu(r),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function wu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var ju=new Map,Nu=new Set;function _u(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Su=M.d;M.d={f:function(){var e=Su.f(),t=Uc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Di(t):Su.r(e)},D:function(e){Su.D(e),Au("dns-prefetch",e,null)},C:function(e,t){Su.C(e,t),Au("preconnect",e,t)},L:function(e,t,r){Su.L(e,t,r);var n=ku;if(n&&e&&t){var a='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(a+='[imagesrcset="'+mt(r.imageSrcSet)+'"]',"string"===typeof r.imageSizes&&(a+='[imagesizes="'+mt(r.imageSizes)+'"]')):a+='[href="'+mt(e)+'"]';var s=a;switch(t){case"style":s=Cu(e);break;case"script":s=Du(e)}ju.has(s)||(e=h({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),ju.set(s,e),null!==n.querySelector(a)||"style"===t&&n.querySelector(Tu(s))||"script"===t&&n.querySelector(Ou(s))||(eu(t=n.createElement("link"),"link",e),Ve(t),n.head.appendChild(t)))}},m:function(e,t){Su.m(e,t);var r=ku;if(r&&e){var n=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+mt(n)+'"][href="'+mt(e)+'"]',s=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Du(e)}if(!ju.has(s)&&(e=h({rel:"modulepreload",href:e},t),ju.set(s,e),null===r.querySelector(a))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ou(s)))return}eu(n=r.createElement("link"),"link",e),Ve(n),r.head.appendChild(n)}}},X:function(e,t){Su.X(e,t);var r=ku;if(r&&e){var n=He(r).hoistableScripts,a=Du(e),s=n.get(a);s||((s=r.querySelector(Ou(a)))||(e=h({src:e,async:!0},t),(t=ju.get(a))&&Lu(e,t),Ve(s=r.createElement("script")),eu(s,"link",e),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}},S:function(e,t,r){Su.S(e,t,r);var n=ku;if(n&&e){var a=He(n).hoistableStyles,s=Cu(e);t=t||"default";var i=a.get(s);if(!i){var o={loading:0,preload:null};if(i=n.querySelector(Tu(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},r),(r=ju.get(s))&&Ru(e,r);var l=i=n.createElement("link");Ve(l),eu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Mu(i,t,n)}i={type:"stylesheet",instance:i,count:1,state:o},a.set(s,i)}}},M:function(e,t){Su.M(e,t);var r=ku;if(r&&e){var n=He(r).hoistableScripts,a=Du(e),s=n.get(a);s||((s=r.querySelector(Ou(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=ju.get(a))&&Lu(e,t),Ve(s=r.createElement("script")),eu(s,"link",e),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}};var ku="undefined"===typeof document?null:document;function Au(e,t,r){var n=ku;if(n&&"string"===typeof t&&t){var a=mt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof r&&(a+='[crossorigin="'+r+'"]'),Nu.has(a)||(Nu.add(a),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(a)&&(eu(t=n.createElement("link"),"link",e),Ve(t),n.head.appendChild(t)))}}function Eu(e,t,r,n){var a,s,o,l,c=(c=H.current)?_u(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof r.precedence&&"string"===typeof r.href?(t=Cu(r.href),(n=(r=He(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"===typeof r.href&&"string"===typeof r.precedence){e=Cu(r.href);var d=He(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Tu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),ju.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ju.set(e,r),d||(a=c,s=e,o=r,l=u.state,a.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=a.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),eu(s,"link",o),Ve(s),a.head.appendChild(s))))),t&&null===n)throw Error(i(528,""));return u}if(t&&null!==n)throw Error(i(529,""));return null;case"script":return t=r.async,"string"===typeof(r=r.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Du(r),(n=(r=He(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Cu(e){return'href="'+mt(e)+'"'}function Tu(e){return'link[rel="stylesheet"]['+e+"]"}function Pu(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Du(e){return'[src="'+mt(e)+'"]'}function Ou(e){return"script[async]"+e}function Iu(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+mt(r.href)+'"]');if(n)return t.instance=n,Ve(n),n;var a=h({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Ve(n=(e.ownerDocument||e).createElement("style")),eu(n,"style",a),Mu(n,r.precedence,e),t.instance=n;case"stylesheet":a=Cu(r.href);var s=e.querySelector(Tu(a));if(s)return t.state.loading|=4,t.instance=s,Ve(s),s;n=Pu(r),(a=ju.get(a))&&Ru(n,a),Ve(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(s,"link",n),t.state.loading|=4,Mu(s,r.precedence,e),t.instance=s;case"script":return s=Du(r.src),(a=e.querySelector(Ou(s)))?(t.instance=a,Ve(a),a):(n=r,(a=ju.get(s))&&Lu(n=h({},r),a),Ve(a=(e=e.ownerDocument||e).createElement("script")),eu(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Mu(n,r.precedence,e));return t.instance}function Mu(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,s=a,i=0;i<n.length;i++){var o=n[i];if(o.dataset.precedence===t)s=o;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Ru(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Lu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fu=null;function Bu(e,t,r){if(null===Fu){var n=new Map,a=Fu=new Map;a.set(r,n)}else(n=(a=Fu).get(r))||(n=new Map,a.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var s=r[a];if(!(s[Be]||s[De]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var i=s.getAttribute(t)||"";i=e+i;var o=n.get(i);o?o.push(s):n.set(i,[s])}}return n}function zu(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function Uu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qu=null;function Wu(){}function Hu(){if(this.count--,0===this.count)if(this.stylesheets)Gu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vu=null;function Gu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vu=new Map,t.forEach(Ku,e),Vu=null,Hu.call(e))}function Ku(e,t){if(!(4&t.state.loading)){var r=Vu.get(e);if(r)var n=r.get(null);else{r=new Map,Vu.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var i=a[s];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(r.set(i.dataset.precedence,i),n=i)}n&&r.set(null,n)}i=(a=t.instance).getAttribute("data-precedence"),(s=r.get(i)||n)===n&&r.set(null,a),r.set(i,a),this.count++,n=Hu.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),s?s.parentNode.insertBefore(a,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var $u={$$typeof:w,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function Yu(e,t,r,n,a,s,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xu(e,t,r,n,a,s,i,o,l,c,d,u){return e=new Yu(e,t,r,i,o,l,c,u),t=1,!0===s&&(t|=24),s=Rn(3,null,null,t),e.current=s,s.stateNode=e,(t=Oa()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:r,cache:t},rs(s),e}function Ju(e){return e?e=In:In}function Zu(e,t,r,n,a,s){a=Ju(a),null===n.context?n.context=a:n.pendingContext=a,(n=as(t)).payload={element:r},null!==(s=void 0===s?null:s)&&(n.callback=s),null!==(r=ss(e,n,t))&&(Rc(r,0,t),is(r,e,t))}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function eh(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}function th(e){if(13===e.tag){var t=Pn(e,67108864);null!==t&&Rc(t,0,67108864),eh(e,67108864)}}var rh=!0;function nh(e,t,r,n){var a=I.T;I.T=null;var s=M.p;try{M.p=2,sh(e,t,r,n)}finally{M.p=s,I.T=a}}function ah(e,t,r,n){var a=I.T;I.T=null;var s=M.p;try{M.p=8,sh(e,t,r,n)}finally{M.p=s,I.T=a}}function sh(e,t,r,n){if(rh){var a=ih(n);if(null===a)qd(e,t,n,oh,r),bh(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return uh=xh(uh,e,t,r,n,a),!0;case"dragenter":return hh=xh(hh,e,t,r,n,a),!0;case"mouseover":return fh=xh(fh,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return ph.set(s,xh(ph.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,mh.set(s,xh(mh.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(bh(e,n),4&t&&-1<vh.indexOf(e)){for(;null!==a;){var s=qe(a);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var i=be(s.pendingLanes);if(0!==i){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-fe(i);o.entanglements[1]|=l,i&=~l}jd(s),0===(6&rc)&&(jc=te()+500,Nd(0,!1))}}break;case 13:null!==(o=Pn(s,2))&&Rc(o,0,2),Uc(),eh(s,2)}if(null===(s=ih(n))&&qd(e,t,n,oh,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else qd(e,t,n,null,r)}}function ih(e){return lh(e=Pt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=c(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ne:return 2;case ae:return 8;case se:case ie:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,uh=null,hh=null,fh=null,ph=new Map,mh=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function xh(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=qe(t))&&th(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function yh(e){var t=Ue(e.target);if(null!==t){var r=l(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=c(r)))return e.blockedOn=t,void function(e,t){var r=M.p;try{return M.p=e,t()}finally{M.p=r}}(e.priority,function(){if(13===r.tag){var e=Ic();e=Ee(e);var t=Pn(r,e);null!==t&&Rc(t,0,e),eh(r,e)}})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=ih(e.nativeEvent);if(null!==r)return null!==(t=qe(r))&&th(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Tt=n,r.target.dispatchEvent(n),Tt=null,t.shift()}return!0}function jh(e,t,r){wh(e)&&r.delete(t)}function Nh(){dh=!1,null!==uh&&wh(uh)&&(uh=null),null!==hh&&wh(hh)&&(hh=null),null!==fh&&wh(fh)&&(fh=null),ph.forEach(jh),mh.forEach(jh)}function _h(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Nh)))}var Sh=null;function kh(e){Sh!==e&&(Sh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sh===e&&(Sh=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],a=e[t+2];if("function"!==typeof n){if(null===lh(n||r))continue;break}var s=qe(r);null!==s&&(e.splice(t,3),t-=3,Ti(s,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function Ah(e){function t(t){return _h(t,e)}null!==uh&&_h(uh,e),null!==hh&&_h(hh,e),null!==fh&&_h(fh,e),ph.forEach(t),mh.forEach(t);for(var r=0;r<gh.length;r++){var n=gh[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<gh.length&&null===(r=gh[0]).blockedOn;)yh(r),null===r.blockedOn&&gh.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var a=r[n],s=r[n+1],i=a[Oe]||null;if("function"===typeof s)i||kh(r);else if(i){var o=null;if(s&&s.hasAttribute("formAction")){if(a=s,i=s[Oe]||null)o=i.formAction;else if(null!==lh(a))continue}else o=i.action;"function"===typeof o?r[n+1]=o:(r.splice(n,3),n-=3),kh(r)}}}function Eh(e){this._internalRoot=e}function Ch(e){this._internalRoot=e}Ch.prototype.render=Eh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Zu(t.current,Ic(),e,t,null,null)},Ch.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zu(e.current,2,null,e,null,null),Uc(),t[Ie]=null}},Ch.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var r=0;r<gh.length&&0!==t&&t<gh[r].priority;r++);gh.splice(r,0,e),0===r&&yh(e)}};var Th=a.version;if("19.1.1"!==Th)throw Error(i(527,Th,"19.1.1"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return d(a),e;if(s===n)return d(a),t;s=s.sibling}throw Error(i(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,n=s;break}if(c===n){o=!0,n=a,r=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===r){o=!0,r=s,n=a;break}if(c===n){o=!0,n=s,r=a;break}c=c.sibling}if(!o)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{de=Dh.inject(Ph),ue=Dh}catch(Ih){}}t.createRoot=function(e,t){if(!o(e))throw Error(i(299));var r=!1,n="",a=bo,s=xo,l=yo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xu(e,1,!1,null,0,r,n,a,s,l,0,null),e[Ie]=t.current,zd(e),new Eh(t)},t.hydrateRoot=function(e,t,r){if(!o(e))throw Error(i(299));var n=!1,a="",s=bo,l=xo,c=yo,d=null;return null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onUncaughtError&&(s=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(d=r.formState)),(t=Xu(e,1,!0,t,0,n,a,s,l,c,0,d)).context=Ju(null),r=t.current,(a=as(n=Ee(n=Ic()))).callback=null,ss(r,a,n),r=n,t.current.lanes=r,Se(t,r),jd(t),e[Ie]=t.current,zd(e),new Ch(t)},t.version="19.1.1"},1098:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},1111:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},1214:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},1311:(e,t,r)=>{"use strict";var n=r(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=r(5399),s=r(3539),i=r(1214),o=r(9115);function l(e,t,r,a){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return c(e,t,r,n);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,s]of t.entries()){if(!1===r(e.get(a),s,a,e,t,n))return!1}return!0}(e,t,r,n);if(t instanceof Set)return d(e,t,r,n);const a=Object.keys(t);if(null==e)return 0===a.length;if(0===a.length)return!0;if(n&&n.has(t))return n.get(t)===e;n&&n.set(t,e);try{for(let s=0;s<a.length;s++){const o=a[s];if(!i.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!r(e[o],t[o],o,e,t,n))return!1}return!0}finally{n&&n.delete(t)}}(e,t,r,a);case"function":return Object.keys(t).length>0?l(e,n({},t),r,a):o.eq(e,t);default:return s.isObject(e)?"string"!==typeof t||""===t:o.eq(e,t)}}function c(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let s=0;s<t.length;s++){const i=t[s];let o=!1;for(let l=0;l<e.length;l++){if(a.has(l))continue;let c=!1;if(r(e[l],i,s,e,t,n)&&(c=!0),c){a.add(l),o=!0;break}}if(!o)return!1}return!0}function d(e,t,r,n){return 0===t.size||e instanceof Set&&c([...e],[...t],r,n)}t.isMatchWith=function(e,t,r){return"function"!==typeof r?a.isMatch(e,t):l(e,t,function e(t,n,a,s,i,o){const c=r(t,n,a,s,i,o);return void 0!==c?Boolean(c):l(t,n,e,o)},new Map)},t.isSetMatch=d},1352:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(1085)},1397:function(e,t,r){var n;e=r.nmd(e),function(){var a,s="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,c=32,d=64,u=128,h=256,f=1/0,p=9007199254740991,m=NaN,g=4294967295,v=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",d],["rearg",h]],b="[object Arguments]",x="[object Array]",y="[object Boolean]",w="[object Date]",j="[object Error]",N="[object Function]",_="[object GeneratorFunction]",S="[object Map]",k="[object Number]",A="[object Object]",E="[object Promise]",C="[object RegExp]",T="[object Set]",P="[object String]",D="[object Symbol]",O="[object WeakMap]",I="[object ArrayBuffer]",M="[object DataView]",R="[object Float32Array]",L="[object Float64Array]",F="[object Int8Array]",B="[object Int16Array]",z="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",W="[object Uint16Array]",H="[object Uint32Array]",V=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,X=RegExp($.source),J=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ae.source),ie=/^\s+/,oe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,be=/^\[object .+?Constructor\]$/,xe=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,Ne=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['\u2019]",De="["+_e+"]",Oe="["+Te+"]",Ie="["+Se+"]",Me="\\d+",Re="["+ke+"]",Le="["+Ae+"]",Fe="[^"+_e+Te+Me+ke+Ae+Ee+"]",Be="\\ud83c[\\udffb-\\udfff]",ze="[^"+_e+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",qe="[\\ud800-\\udbff][\\udc00-\\udfff]",We="["+Ee+"]",He="\\u200d",Ve="(?:"+Le+"|"+Fe+")",Ge="(?:"+We+"|"+Fe+")",Ke="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$e="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+Ie+"|"+Be+")"+"?",Xe="["+Ce+"]?",Je=Xe+Ye+("(?:"+He+"(?:"+[ze,Ue,qe].join("|")+")"+Xe+Ye+")*"),Ze="(?:"+[Re,Ue,qe].join("|")+")"+Je,Qe="(?:"+[ze+Ie+"?",Ie,Ue,qe,De].join("|")+")",et=RegExp(Pe,"g"),tt=RegExp(Ie,"g"),rt=RegExp(Be+"(?="+Be+")|"+Qe+Je,"g"),nt=RegExp([We+"?"+Le+"+"+Ke+"(?="+[Oe,We,"$"].join("|")+")",Ge+"+"+$e+"(?="+[Oe,We+Ve,"$"].join("|")+")",We+"?"+Ve+"+"+Ke,We+"+"+$e,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Me,Ze].join("|"),"g"),at=RegExp("["+He+_e+Se+Ce+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,lt={};lt[R]=lt[L]=lt[F]=lt[B]=lt[z]=lt[U]=lt[q]=lt[W]=lt[H]=!0,lt[b]=lt[x]=lt[I]=lt[y]=lt[M]=lt[w]=lt[j]=lt[N]=lt[S]=lt[k]=lt[A]=lt[C]=lt[T]=lt[P]=lt[O]=!1;var ct={};ct[b]=ct[x]=ct[I]=ct[M]=ct[y]=ct[w]=ct[R]=ct[L]=ct[F]=ct[B]=ct[z]=ct[S]=ct[k]=ct[A]=ct[C]=ct[T]=ct[P]=ct[D]=ct[U]=ct[q]=ct[W]=ct[H]=!0,ct[j]=ct[N]=ct[O]=!1;var dt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ht=parseInt,ft="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,pt="object"==typeof self&&self&&self.Object===Object&&self,mt=ft||pt||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,bt=vt&&vt.exports===gt,xt=bt&&ft.process,yt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||xt&&xt.binding&&xt.binding("util")}catch(t){}}(),wt=yt&&yt.isArrayBuffer,jt=yt&&yt.isDate,Nt=yt&&yt.isMap,_t=yt&&yt.isRegExp,St=yt&&yt.isSet,kt=yt&&yt.isTypedArray;function At(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Et(e,t,r,n){for(var a=-1,s=null==e?0:e.length;++a<s;){var i=e[a];t(n,i,r(i),e)}return n}function Ct(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Pt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Dt(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}function Ot(e,t){return!!(null==e?0:e.length)&&Wt(e,t,0)>-1}function It(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function Mt(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function Rt(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function Lt(e,t,r,n){var a=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}function Ft(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function Bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var zt=Kt("length");function Ut(e,t,r){var n;return r(e,function(e,r,a){if(t(e,r,a))return n=r,!1}),n}function qt(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}function Wt(e,t,r){return t===t?function(e,t,r){var n=r-1,a=e.length;for(;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):qt(e,Vt,r)}function Ht(e,t,r,n){for(var a=r-1,s=e.length;++a<s;)if(n(e[a],t))return a;return-1}function Vt(e){return e!==e}function Gt(e,t){var r=null==e?0:e.length;return r?Xt(e,t)/r:m}function Kt(e){return function(t){return null==t?a:t[e]}}function $t(e){return function(t){return null==e?a:e[t]}}function Yt(e,t,r,n,a){return a(e,function(e,a,s){r=n?(n=!1,e):t(r,e,a,s)}),r}function Xt(e,t){for(var r,n=-1,s=e.length;++n<s;){var i=t(e[n]);i!==a&&(r=r===a?i:r+i)}return r}function Jt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Zt(e){return e?e.slice(0,mr(e)+1).replace(ie,""):e}function Qt(e){return function(t){return e(t)}}function er(e,t){return Mt(t,function(t){return e[t]})}function tr(e,t){return e.has(t)}function rr(e,t){for(var r=-1,n=e.length;++r<n&&Wt(t,e[r],0)>-1;);return r}function nr(e,t){for(var r=e.length;r--&&Wt(t,e[r],0)>-1;);return r}var ar=$t({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),sr=$t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ir(e){return"\\"+dt[e]}function or(e){return at.test(e)}function lr(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function cr(e,t){return function(r){return e(t(r))}}function dr(e,t){for(var r=-1,n=e.length,a=0,s=[];++r<n;){var i=e[r];i!==t&&i!==o||(e[r]=o,s[a++]=r)}return s}function ur(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function hr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function fr(e){return or(e)?function(e){var t=rt.lastIndex=0;for(;rt.test(e);)++t;return t}(e):zt(e)}function pr(e){return or(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.split("")}(e)}function mr(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var gr=$t({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vr=function e(t){var r=(t=null==t?mt:vr.defaults(mt.Object(),t,vr.pick(mt,it))).Array,n=t.Date,oe=t.Error,_e=t.Function,Se=t.Math,ke=t.Object,Ae=t.RegExp,Ee=t.String,Ce=t.TypeError,Te=r.prototype,Pe=_e.prototype,De=ke.prototype,Oe=t["__core-js_shared__"],Ie=Pe.toString,Me=De.hasOwnProperty,Re=0,Le=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=De.toString,Be=Ie.call(ke),ze=mt._,Ue=Ae("^"+Ie.call(Me).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=bt?t.Buffer:a,We=t.Symbol,He=t.Uint8Array,Ve=qe?qe.allocUnsafe:a,Ge=cr(ke.getPrototypeOf,ke),Ke=ke.create,$e=De.propertyIsEnumerable,Ye=Te.splice,Xe=We?We.isConcatSpreadable:a,Je=We?We.iterator:a,Ze=We?We.toStringTag:a,Qe=function(){try{var e=us(ke,"defineProperty");return e({},"",{}),e}catch(t){}}(),rt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,at=n&&n.now!==mt.Date.now&&n.now,dt=t.setTimeout!==mt.setTimeout&&t.setTimeout,ft=Se.ceil,pt=Se.floor,gt=ke.getOwnPropertySymbols,vt=qe?qe.isBuffer:a,xt=t.isFinite,yt=Te.join,zt=cr(ke.keys,ke),$t=Se.max,br=Se.min,xr=n.now,yr=t.parseInt,wr=Se.random,jr=Te.reverse,Nr=us(t,"DataView"),_r=us(t,"Map"),Sr=us(t,"Promise"),kr=us(t,"Set"),Ar=us(t,"WeakMap"),Er=us(ke,"create"),Cr=Ar&&new Ar,Tr={},Pr=Ls(Nr),Dr=Ls(_r),Or=Ls(Sr),Ir=Ls(kr),Mr=Ls(Ar),Rr=We?We.prototype:a,Lr=Rr?Rr.valueOf:a,Fr=Rr?Rr.toString:a;function Br(e){if(eo(e)&&!Wi(e)&&!(e instanceof Wr)){if(e instanceof qr)return e;if(Me.call(e,"__wrapped__"))return Fs(e)}return new qr(e)}var zr=function(){function e(){}return function(t){if(!Qi(t))return{};if(Ke)return Ke(t);e.prototype=t;var r=new e;return e.prototype=a,r}}();function Ur(){}function qr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Wr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Kr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Gr;++t<r;)this.add(e[t])}function $r(e){var t=this.__data__=new Vr(e);this.size=t.size}function Yr(e,t){var r=Wi(e),n=!r&&qi(e),a=!r&&!n&&Ki(e),s=!r&&!n&&!a&&lo(e),i=r||n||a||s,o=i?Jt(e.length,Ee):[],l=o.length;for(var c in e)!t&&!Me.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bs(c,l))||o.push(c);return o}function Xr(e){var t=e.length;return t?e[$n(0,t-1)]:a}function Jr(e,t){return Is(Ca(e),on(t,0,e.length))}function Zr(e){return Is(Ca(e))}function Qr(e,t,r){(r!==a&&!Bi(e[t],r)||r===a&&!(t in e))&&an(e,t,r)}function en(e,t,r){var n=e[t];Me.call(e,t)&&Bi(n,r)&&(r!==a||t in e)||an(e,t,r)}function tn(e,t){for(var r=e.length;r--;)if(Bi(e[r][0],t))return r;return-1}function rn(e,t,r,n){return hn(e,function(e,a,s){t(n,e,r(e),s)}),n}function nn(e,t){return e&&Ta(t,Po(t),e)}function an(e,t,r){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function sn(e,t){for(var n=-1,s=t.length,i=r(s),o=null==e;++n<s;)i[n]=o?a:ko(e,t[n]);return i}function on(e,t,r){return e===e&&(r!==a&&(e=e<=r?e:r),t!==a&&(e=e>=t?e:t)),e}function ln(e,t,r,n,s,i){var o,l=1&t,c=2&t,d=4&t;if(r&&(o=s?r(e,n,s,i):r(e)),o!==a)return o;if(!Qi(e))return e;var u=Wi(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Me.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Ca(e,o)}else{var h=ps(e),f=h==N||h==_;if(Ki(e))return Na(e,l);if(h==A||h==b||f&&!s){if(o=c||f?{}:gs(e),!l)return c?function(e,t){return Ta(e,fs(e),t)}(e,function(e,t){return e&&Ta(t,Do(t),e)}(o,e)):function(e,t){return Ta(e,hs(e),t)}(e,nn(o,e))}else{if(!ct[h])return s?e:{};o=function(e,t,r){var n=e.constructor;switch(t){case I:return _a(e);case y:case w:return new n(+e);case M:return function(e,t){var r=t?_a(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case R:case L:case F:case B:case z:case U:case q:case W:case H:return Sa(e,r);case S:return new n;case k:case P:return new n(e);case C:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new n;case D:return a=e,Lr?ke(Lr.call(a)):{}}var a}(e,h,l)}}i||(i=new $r);var p=i.get(e);if(p)return p;i.set(e,o),so(e)?e.forEach(function(n){o.add(ln(n,t,r,n,e,i))}):to(e)&&e.forEach(function(n,a){o.set(a,ln(n,t,r,a,e,i))});var m=u?a:(d?c?as:ns:c?Do:Po)(e);return Ct(m||e,function(n,a){m&&(n=e[a=n]),en(o,a,ln(n,t,r,a,e,i))}),o}function cn(e,t,r){var n=r.length;if(null==e)return!n;for(e=ke(e);n--;){var s=r[n],i=t[s],o=e[s];if(o===a&&!(s in e)||!i(o))return!1}return!0}function dn(e,t,r){if("function"!=typeof e)throw new Ce(s);return Ts(function(){e.apply(a,r)},t)}function un(e,t,r,n){var a=-1,s=Ot,i=!0,o=e.length,l=[],c=t.length;if(!o)return l;r&&(t=Mt(t,Qt(r))),n?(s=It,i=!1):t.length>=200&&(s=tr,i=!1,t=new Kr(t));e:for(;++a<o;){var d=e[a],u=null==r?d:r(d);if(d=n||0!==d?d:0,i&&u===u){for(var h=c;h--;)if(t[h]===u)continue e;l.push(d)}else s(t,u,n)||l.push(d)}return l}Br.templateSettings={escape:Z,evaluate:Q,interpolate:ee,variable:"",imports:{_:Br}},Br.prototype=Ur.prototype,Br.prototype.constructor=Br,qr.prototype=zr(Ur.prototype),qr.prototype.constructor=qr,Wr.prototype=zr(Ur.prototype),Wr.prototype.constructor=Wr,Hr.prototype.clear=function(){this.__data__=Er?Er(null):{},this.size=0},Hr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hr.prototype.get=function(e){var t=this.__data__;if(Er){var r=t[e];return r===i?a:r}return Me.call(t,e)?t[e]:a},Hr.prototype.has=function(e){var t=this.__data__;return Er?t[e]!==a:Me.call(t,e)},Hr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Er&&t===a?i:t,this},Vr.prototype.clear=function(){this.__data__=[],this.size=0},Vr.prototype.delete=function(e){var t=this.__data__,r=tn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ye.call(t,r,1),--this.size,!0)},Vr.prototype.get=function(e){var t=this.__data__,r=tn(t,e);return r<0?a:t[r][1]},Vr.prototype.has=function(e){return tn(this.__data__,e)>-1},Vr.prototype.set=function(e,t){var r=this.__data__,n=tn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Gr.prototype.clear=function(){this.size=0,this.__data__={hash:new Hr,map:new(_r||Vr),string:new Hr}},Gr.prototype.delete=function(e){var t=cs(this,e).delete(e);return this.size-=t?1:0,t},Gr.prototype.get=function(e){return cs(this,e).get(e)},Gr.prototype.has=function(e){return cs(this,e).has(e)},Gr.prototype.set=function(e,t){var r=cs(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Kr.prototype.add=Kr.prototype.push=function(e){return this.__data__.set(e,i),this},Kr.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.clear=function(){this.__data__=new Vr,this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$r.prototype.get=function(e){return this.__data__.get(e)},$r.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Vr){var n=r.__data__;if(!_r||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gr(n)}return r.set(e,t),this.size=r.size,this};var hn=Oa(yn),fn=Oa(wn,!0);function pn(e,t){var r=!0;return hn(e,function(e,n,a){return r=!!t(e,n,a)}),r}function mn(e,t,r){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(null!=o&&(l===a?o===o&&!oo(o):r(o,l)))var l=o,c=i}return c}function gn(e,t){var r=[];return hn(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r}function vn(e,t,r,n,a){var s=-1,i=e.length;for(r||(r=vs),a||(a=[]);++s<i;){var o=e[s];t>0&&r(o)?t>1?vn(o,t-1,r,n,a):Rt(a,o):n||(a[a.length]=o)}return a}var bn=Ia(),xn=Ia(!0);function yn(e,t){return e&&bn(e,t,Po)}function wn(e,t){return e&&xn(e,t,Po)}function jn(e,t){return Dt(t,function(t){return Xi(e[t])})}function Nn(e,t){for(var r=0,n=(t=xa(t,e)).length;null!=e&&r<n;)e=e[Rs(t[r++])];return r&&r==n?e:a}function _n(e,t,r){var n=t(e);return Wi(e)?n:Rt(n,r(e))}function Sn(e){return null==e?e===a?"[object Undefined]":"[object Null]":Ze&&Ze in ke(e)?function(e){var t=Me.call(e,Ze),r=e[Ze];try{e[Ze]=a;var n=!0}catch(i){}var s=Fe.call(e);n&&(t?e[Ze]=r:delete e[Ze]);return s}(e):function(e){return Fe.call(e)}(e)}function kn(e,t){return e>t}function An(e,t){return null!=e&&Me.call(e,t)}function En(e,t){return null!=e&&t in ke(e)}function Cn(e,t,n){for(var s=n?It:Ot,i=e[0].length,o=e.length,l=o,c=r(o),d=1/0,u=[];l--;){var h=e[l];l&&t&&(h=Mt(h,Qt(t))),d=br(h.length,d),c[l]=!n&&(t||i>=120&&h.length>=120)?new Kr(l&&h):a}h=e[0];var f=-1,p=c[0];e:for(;++f<i&&u.length<d;){var m=h[f],g=t?t(m):m;if(m=n||0!==m?m:0,!(p?tr(p,g):s(u,g,n))){for(l=o;--l;){var v=c[l];if(!(v?tr(v,g):s(e[l],g,n)))continue e}p&&p.push(g),u.push(m)}}return u}function Tn(e,t,r){var n=null==(e=As(e,t=xa(t,e)))?e:e[Rs(Ys(t))];return null==n?a:At(n,e,r)}function Pn(e){return eo(e)&&Sn(e)==b}function Dn(e,t,r,n,s){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!==e&&t!==t:function(e,t,r,n,s,i){var o=Wi(e),l=Wi(t),c=o?x:ps(e),d=l?x:ps(t),u=(c=c==b?A:c)==A,h=(d=d==b?A:d)==A,f=c==d;if(f&&Ki(e)){if(!Ki(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new $r),o||lo(e)?ts(e,t,r,n,s,i):function(e,t,r,n,a,s,i){switch(r){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I:return!(e.byteLength!=t.byteLength||!s(new He(e),new He(t)));case y:case w:case k:return Bi(+e,+t);case j:return e.name==t.name&&e.message==t.message;case C:case P:return e==t+"";case S:var o=lr;case T:var l=1&n;if(o||(o=ur),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=2,i.set(e,t);var d=ts(o(e),o(t),n,a,s,i);return i.delete(e),d;case D:if(Lr)return Lr.call(e)==Lr.call(t)}return!1}(e,t,c,r,n,s,i);if(!(1&r)){var p=u&&Me.call(e,"__wrapped__"),m=h&&Me.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return i||(i=new $r),s(g,v,r,n,i)}}if(!f)return!1;return i||(i=new $r),function(e,t,r,n,s,i){var o=1&r,l=ns(e),c=l.length,d=ns(t),u=d.length;if(c!=u&&!o)return!1;var h=c;for(;h--;){var f=l[h];if(!(o?f in t:Me.call(t,f)))return!1}var p=i.get(e),m=i.get(t);if(p&&m)return p==t&&m==e;var g=!0;i.set(e,t),i.set(t,e);var v=o;for(;++h<c;){var b=e[f=l[h]],x=t[f];if(n)var y=o?n(x,b,f,t,e,i):n(b,x,f,e,t,i);if(!(y===a?b===x||s(b,x,r,n,i):y)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var w=e.constructor,j=t.constructor;w==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof j&&j instanceof j||(g=!1)}return i.delete(e),i.delete(t),g}(e,t,r,n,s,i)}(e,t,r,n,Dn,s))}function On(e,t,r,n){var s=r.length,i=s,o=!n;if(null==e)return!i;for(e=ke(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){var c=(l=r[s])[0],d=e[c],u=l[1];if(o&&l[2]){if(d===a&&!(c in e))return!1}else{var h=new $r;if(n)var f=n(d,u,c,e,t,h);if(!(f===a?Dn(u,d,3,n,h):f))return!1}}return!0}function In(e){return!(!Qi(e)||(t=e,Le&&Le in t))&&(Xi(e)?Ue:be).test(Ls(e));var t}function Mn(e){return"function"==typeof e?e:null==e?nl:"object"==typeof e?Wi(e)?Un(e[0],e[1]):zn(e):hl(e)}function Rn(e){if(!Ns(e))return zt(e);var t=[];for(var r in ke(e))Me.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Ln(e){if(!Qi(e))return function(e){var t=[];if(null!=e)for(var r in ke(e))t.push(r);return t}(e);var t=Ns(e),r=[];for(var n in e)("constructor"!=n||!t&&Me.call(e,n))&&r.push(n);return r}function Fn(e,t){return e<t}function Bn(e,t){var n=-1,a=Vi(e)?r(e.length):[];return hn(e,function(e,r,s){a[++n]=t(e,r,s)}),a}function zn(e){var t=ds(e);return 1==t.length&&t[0][2]?Ss(t[0][0],t[0][1]):function(r){return r===e||On(r,e,t)}}function Un(e,t){return ys(e)&&_s(t)?Ss(Rs(e),t):function(r){var n=ko(r,e);return n===a&&n===t?Ao(r,e):Dn(t,n,3)}}function qn(e,t,r,n,s){e!==t&&bn(t,function(i,o){if(s||(s=new $r),Qi(i))!function(e,t,r,n,s,i,o){var l=Es(e,r),c=Es(t,r),d=o.get(c);if(d)return void Qr(e,r,d);var u=i?i(l,c,r+"",e,t,o):a,h=u===a;if(h){var f=Wi(c),p=!f&&Ki(c),m=!f&&!p&&lo(c);u=c,f||p||m?Wi(l)?u=l:Gi(l)?u=Ca(l):p?(h=!1,u=Na(c,!0)):m?(h=!1,u=Sa(c,!0)):u=[]:no(c)||qi(c)?(u=l,qi(l)?u=vo(l):Qi(l)&&!Xi(l)||(u=gs(c))):h=!1}h&&(o.set(c,u),s(u,c,n,i,o),o.delete(c));Qr(e,r,u)}(e,t,o,r,qn,n,s);else{var l=n?n(Es(e,o),i,o+"",e,t,s):a;l===a&&(l=i),Qr(e,o,l)}},Do)}function Wn(e,t){var r=e.length;if(r)return bs(t+=t<0?r:0,r)?e[t]:a}function Hn(e,t,r){t=t.length?Mt(t,function(e){return Wi(e)?function(t){return Nn(t,1===e.length?e[0]:e)}:e}):[nl];var n=-1;t=Mt(t,Qt(ls()));var a=Bn(e,function(e,r,a){var s=Mt(t,function(t){return t(e)});return{criteria:s,index:++n,value:e}});return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(a,function(e,t){return function(e,t,r){var n=-1,a=e.criteria,s=t.criteria,i=a.length,o=r.length;for(;++n<i;){var l=ka(a[n],s[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)})}function Vn(e,t,r){for(var n=-1,a=t.length,s={};++n<a;){var i=t[n],o=Nn(e,i);r(o,i)&&Qn(s,xa(i,e),o)}return s}function Gn(e,t,r,n){var a=n?Ht:Wt,s=-1,i=t.length,o=e;for(e===t&&(t=Ca(t)),r&&(o=Mt(e,Qt(r)));++s<i;)for(var l=0,c=t[s],d=r?r(c):c;(l=a(o,d,l,n))>-1;)o!==e&&Ye.call(o,l,1),Ye.call(e,l,1);return e}function Kn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==s){var s=a;bs(a)?Ye.call(e,a,1):ua(e,a)}}return e}function $n(e,t){return e+pt(wr()*(t-e+1))}function Yn(e,t){var r="";if(!e||t<1||t>p)return r;do{t%2&&(r+=e),(t=pt(t/2))&&(e+=e)}while(t);return r}function Xn(e,t){return Ps(ks(e,t,nl),e+"")}function Jn(e){return Xr(zo(e))}function Zn(e,t){var r=zo(e);return Is(r,on(t,0,r.length))}function Qn(e,t,r,n){if(!Qi(e))return e;for(var s=-1,i=(t=xa(t,e)).length,o=i-1,l=e;null!=l&&++s<i;){var c=Rs(t[s]),d=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(s!=o){var u=l[c];(d=n?n(u,c,l):a)===a&&(d=Qi(u)?u:bs(t[s+1])?[]:{})}en(l,c,d),l=l[c]}return e}var ea=Cr?function(e,t){return Cr.set(e,t),e}:nl,ta=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:nl;function ra(e){return Is(zo(e))}function na(e,t,n){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=r(s);++a<s;)i[a]=e[a+t];return i}function aa(e,t){var r;return hn(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}function sa(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t===t&&a<=2147483647){for(;n<a;){var s=n+a>>>1,i=e[s];null!==i&&!oo(i)&&(r?i<=t:i<t)?n=s+1:a=s}return a}return ia(e,t,nl,r)}function ia(e,t,r,n){var s=0,i=null==e?0:e.length;if(0===i)return 0;for(var o=(t=r(t))!==t,l=null===t,c=oo(t),d=t===a;s<i;){var u=pt((s+i)/2),h=r(e[u]),f=h!==a,p=null===h,m=h===h,g=oo(h);if(o)var v=n||m;else v=d?m&&(n||f):l?m&&f&&(n||!p):c?m&&f&&!p&&(n||!g):!p&&!g&&(n?h<=t:h<t);v?s=u+1:i=u}return br(i,4294967294)}function oa(e,t){for(var r=-1,n=e.length,a=0,s=[];++r<n;){var i=e[r],o=t?t(i):i;if(!r||!Bi(o,l)){var l=o;s[a++]=0===i?0:i}}return s}function la(e){return"number"==typeof e?e:oo(e)?m:+e}function ca(e){if("string"==typeof e)return e;if(Wi(e))return Mt(e,ca)+"";if(oo(e))return Fr?Fr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function da(e,t,r){var n=-1,a=Ot,s=e.length,i=!0,o=[],l=o;if(r)i=!1,a=It;else if(s>=200){var c=t?null:Ya(e);if(c)return ur(c);i=!1,a=tr,l=new Kr}else l=t?[]:o;e:for(;++n<s;){var d=e[n],u=t?t(d):d;if(d=r||0!==d?d:0,i&&u===u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),o.push(d)}else a(l,u,r)||(l!==o&&l.push(u),o.push(d))}return o}function ua(e,t){return null==(e=As(e,t=xa(t,e)))||delete e[Rs(Ys(t))]}function ha(e,t,r,n){return Qn(e,t,r(Nn(e,t)),n)}function fa(e,t,r,n){for(var a=e.length,s=n?a:-1;(n?s--:++s<a)&&t(e[s],s,e););return r?na(e,n?0:s,n?s+1:a):na(e,n?s+1:0,n?a:s)}function pa(e,t){var r=e;return r instanceof Wr&&(r=r.value()),Lt(t,function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))},r)}function ma(e,t,n){var a=e.length;if(a<2)return a?da(e[0]):[];for(var s=-1,i=r(a);++s<a;)for(var o=e[s],l=-1;++l<a;)l!=s&&(i[s]=un(i[s]||o,e[l],t,n));return da(vn(i,1),t,n)}function ga(e,t,r){for(var n=-1,s=e.length,i=t.length,o={};++n<s;){var l=n<i?t[n]:a;r(o,e[n],l)}return o}function va(e){return Gi(e)?e:[]}function ba(e){return"function"==typeof e?e:nl}function xa(e,t){return Wi(e)?e:ys(e,t)?[e]:Ms(bo(e))}var ya=Xn;function wa(e,t,r){var n=e.length;return r=r===a?n:r,!t&&r>=n?e:na(e,t,r)}var ja=rt||function(e){return mt.clearTimeout(e)};function Na(e,t){if(t)return e.slice();var r=e.length,n=Ve?Ve(r):new e.constructor(r);return e.copy(n),n}function _a(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Sa(e,t){var r=t?_a(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ka(e,t){if(e!==t){var r=e!==a,n=null===e,s=e===e,i=oo(e),o=t!==a,l=null===t,c=t===t,d=oo(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!d&&e<t||d&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}function Aa(e,t,n,a){for(var s=-1,i=e.length,o=n.length,l=-1,c=t.length,d=$t(i-o,0),u=r(c+d),h=!a;++l<c;)u[l]=t[l];for(;++s<o;)(h||s<i)&&(u[n[s]]=e[s]);for(;d--;)u[l++]=e[s++];return u}function Ea(e,t,n,a){for(var s=-1,i=e.length,o=-1,l=n.length,c=-1,d=t.length,u=$t(i-l,0),h=r(u+d),f=!a;++s<u;)h[s]=e[s];for(var p=s;++c<d;)h[p+c]=t[c];for(;++o<l;)(f||s<i)&&(h[p+n[o]]=e[s++]);return h}function Ca(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function Ta(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=n?n(r[l],e[l],l,r,e):a;c===a&&(c=e[l]),s?an(r,l,c):en(r,l,c)}return r}function Pa(e,t){return function(r,n){var a=Wi(r)?Et:rn,s=t?t():{};return a(r,e,ls(n,2),s)}}function Da(e){return Xn(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:a,o=s>2?r[2]:a;for(i=e.length>3&&"function"==typeof i?(s--,i):a,o&&xs(r[0],r[1],o)&&(i=s<3?a:i,s=1),t=ke(t);++n<s;){var l=r[n];l&&e(t,l,n,i)}return t})}function Oa(e,t){return function(r,n){if(null==r)return r;if(!Vi(r))return e(r,n);for(var a=r.length,s=t?a:-1,i=ke(r);(t?s--:++s<a)&&!1!==n(i[s],s,i););return r}}function Ia(e){return function(t,r,n){for(var a=-1,s=ke(t),i=n(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===r(s[l],l,s))break}return t}}function Ma(e){return function(t){var r=or(t=bo(t))?pr(t):a,n=r?r[0]:t.charAt(0),s=r?wa(r,1).join(""):t.slice(1);return n[e]()+s}}function Ra(e){return function(t){return Lt(Jo(Wo(t).replace(et,"")),e,"")}}function La(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=zr(e.prototype),n=e.apply(r,t);return Qi(n)?n:r}}function Fa(e){return function(t,r,n){var s=ke(t);if(!Vi(t)){var i=ls(r,3);t=Po(t),r=function(e){return i(s[e],e,s)}}var o=e(t,r,n);return o>-1?s[i?t[o]:o]:a}}function Ba(e){return rs(function(t){var r=t.length,n=r,i=qr.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new Ce(s);if(i&&!l&&"wrapper"==is(o))var l=new qr([],!0)}for(n=l?n:r;++n<r;){var c=is(o=t[n]),d="wrapper"==c?ss(o):a;l=d&&ws(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?l[is(d[0])].apply(l,d[3]):1==o.length&&ws(o)?l[c]():l.thru(o)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Wi(n))return l.plant(n).value();for(var a=0,s=r?t[a].apply(this,e):n;++a<r;)s=t[a].call(this,s);return s}})}function za(e,t,n,s,i,o,l,c,d,h){var f=t&u,p=1&t,m=2&t,g=24&t,v=512&t,b=m?a:La(e);return function u(){for(var x=arguments.length,y=r(x),w=x;w--;)y[w]=arguments[w];if(g)var j=os(u),N=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(y,j);if(s&&(y=Aa(y,s,i,g)),o&&(y=Ea(y,o,l,g)),x-=N,g&&x<h){var _=dr(y,j);return Ka(e,t,za,u.placeholder,n,y,_,c,d,h-x)}var S=p?n:this,k=m?S[e]:e;return x=y.length,c?y=function(e,t){var r=e.length,n=br(t.length,r),s=Ca(e);for(;n--;){var i=t[n];e[n]=bs(i,r)?s[i]:a}return e}(y,c):v&&x>1&&y.reverse(),f&&d<x&&(y.length=d),this&&this!==mt&&this instanceof u&&(k=b||La(k)),k.apply(S,y)}}function Ua(e,t){return function(r,n){return function(e,t,r,n){return yn(e,function(e,a,s){t(n,r(e),a,s)}),n}(r,e,t(n),{})}}function qa(e,t){return function(r,n){var s;if(r===a&&n===a)return t;if(r!==a&&(s=r),n!==a){if(s===a)return n;"string"==typeof r||"string"==typeof n?(r=ca(r),n=ca(n)):(r=la(r),n=la(n)),s=e(r,n)}return s}}function Wa(e){return rs(function(t){return t=Mt(t,Qt(ls())),Xn(function(r){var n=this;return e(t,function(e){return At(e,n,r)})})})}function Ha(e,t){var r=(t=t===a?" ":ca(t)).length;if(r<2)return r?Yn(t,e):t;var n=Yn(t,ft(e/fr(t)));return or(t)?wa(pr(n),0,e).join(""):n.slice(0,e)}function Va(e){return function(t,n,s){return s&&"number"!=typeof s&&xs(t,n,s)&&(n=s=a),t=fo(t),n===a?(n=t,t=0):n=fo(n),function(e,t,n,a){for(var s=-1,i=$t(ft((t-e)/(n||1)),0),o=r(i);i--;)o[a?i:++s]=e,e+=n;return o}(t,n,s=s===a?t<n?1:-1:fo(s),e)}}function Ga(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=go(t),r=go(r)),e(t,r)}}function Ka(e,t,r,n,s,i,o,l,u,h){var f=8&t;t|=f?c:d,4&(t&=~(f?d:c))||(t&=-4);var p=[e,t,s,f?i:a,f?o:a,f?a:i,f?a:o,l,u,h],m=r.apply(a,p);return ws(e)&&Cs(m,p),m.placeholder=n,Ds(m,e,t)}function $a(e){var t=Se[e];return function(e,r){if(e=go(e),(r=null==r?0:br(po(r),292))&&xt(e)){var n=(bo(e)+"e").split("e");return+((n=(bo(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ya=kr&&1/ur(new kr([,-0]))[1]==f?function(e){return new kr(e)}:ll;function Xa(e){return function(t){var r=ps(t);return r==S?lr(t):r==T?hr(t):function(e,t){return Mt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ja(e,t,n,i,f,p,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Ce(s);var b=i?i.length:0;if(b||(t&=-97,i=f=a),m=m===a?m:$t(po(m),0),g=g===a?g:po(g),b-=f?f.length:0,t&d){var x=i,y=f;i=f=a}var w=v?a:ss(e),j=[e,t,n,i,f,x,y,p,m,g];if(w&&function(e,t){var r=e[1],n=t[1],a=r|n,s=a<131,i=n==u&&8==r||n==u&&r==h&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!s&&!i)return e;1&n&&(e[2]=t[2],a|=1&r?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Aa(c,l,t[4]):l,e[4]=c?dr(e[3],o):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ea(c,l,t[6]):l,e[6]=c?dr(e[5],o):t[6]);(l=t[7])&&(e[7]=l);n&u&&(e[8]=null==e[8]?t[8]:br(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(j,w),e=j[0],t=j[1],n=j[2],i=j[3],f=j[4],!(g=j[9]=j[9]===a?v?0:e.length:$t(j[9]-b,0))&&24&t&&(t&=-25),t&&1!=t)N=8==t||t==l?function(e,t,n){var s=La(e);return function i(){for(var o=arguments.length,l=r(o),c=o,d=os(i);c--;)l[c]=arguments[c];var u=o<3&&l[0]!==d&&l[o-1]!==d?[]:dr(l,d);return(o-=u.length)<n?Ka(e,t,za,i.placeholder,a,l,u,a,a,n-o):At(this&&this!==mt&&this instanceof i?s:e,this,l)}}(e,t,g):t!=c&&33!=t||f.length?za.apply(a,j):function(e,t,n,a){var s=1&t,i=La(e);return function t(){for(var o=-1,l=arguments.length,c=-1,d=a.length,u=r(d+l),h=this&&this!==mt&&this instanceof t?i:e;++c<d;)u[c]=a[c];for(;l--;)u[c++]=arguments[++o];return At(h,s?n:this,u)}}(e,t,n,i);else var N=function(e,t,r){var n=1&t,a=La(e);return function t(){return(this&&this!==mt&&this instanceof t?a:e).apply(n?r:this,arguments)}}(e,t,n);return Ds((w?ea:Cs)(N,j),e,t)}function Za(e,t,r,n){return e===a||Bi(e,De[r])&&!Me.call(n,r)?t:e}function Qa(e,t,r,n,s,i){return Qi(e)&&Qi(t)&&(i.set(t,e),qn(e,t,a,Qa,i),i.delete(t)),e}function es(e){return no(e)?a:e}function ts(e,t,r,n,s,i){var o=1&r,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,p=2&r?new Kr:a;for(i.set(e,t),i.set(t,e);++h<l;){var m=e[h],g=t[h];if(n)var v=o?n(g,m,h,t,e,i):n(m,g,h,e,t,i);if(v!==a){if(v)continue;f=!1;break}if(p){if(!Bt(t,function(e,t){if(!tr(p,t)&&(m===e||s(m,e,r,n,i)))return p.push(t)})){f=!1;break}}else if(m!==g&&!s(m,g,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function rs(e){return Ps(ks(e,a,Hs),e+"")}function ns(e){return _n(e,Po,hs)}function as(e){return _n(e,Do,fs)}var ss=Cr?function(e){return Cr.get(e)}:ll;function is(e){for(var t=e.name+"",r=Tr[t],n=Me.call(Tr,t)?r.length:0;n--;){var a=r[n],s=a.func;if(null==s||s==e)return a.name}return t}function os(e){return(Me.call(Br,"placeholder")?Br:e).placeholder}function ls(){var e=Br.iteratee||al;return e=e===al?Mn:e,arguments.length?e(arguments[0],arguments[1]):e}function cs(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ds(e){for(var t=Po(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,_s(a)]}return t}function us(e,t){var r=function(e,t){return null==e?a:e[t]}(e,t);return In(r)?r:a}var hs=gt?function(e){return null==e?[]:(e=ke(e),Dt(gt(e),function(t){return $e.call(e,t)}))}:ml,fs=gt?function(e){for(var t=[];e;)Rt(t,hs(e)),e=Ge(e);return t}:ml,ps=Sn;function ms(e,t,r){for(var n=-1,a=(t=xa(t,e)).length,s=!1;++n<a;){var i=Rs(t[n]);if(!(s=null!=e&&r(e,i)))break;e=e[i]}return s||++n!=a?s:!!(a=null==e?0:e.length)&&Zi(a)&&bs(i,a)&&(Wi(e)||qi(e))}function gs(e){return"function"!=typeof e.constructor||Ns(e)?{}:zr(Ge(e))}function vs(e){return Wi(e)||qi(e)||!!(Xe&&e&&e[Xe])}function bs(e,t){var r=typeof e;return!!(t=null==t?p:t)&&("number"==r||"symbol"!=r&&ye.test(e))&&e>-1&&e%1==0&&e<t}function xs(e,t,r){if(!Qi(r))return!1;var n=typeof t;return!!("number"==n?Vi(r)&&bs(t,r.length):"string"==n&&t in r)&&Bi(r[t],e)}function ys(e,t){if(Wi(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!oo(e))||(re.test(e)||!te.test(e)||null!=t&&e in ke(t))}function ws(e){var t=is(e),r=Br[t];if("function"!=typeof r||!(t in Wr.prototype))return!1;if(e===r)return!0;var n=ss(r);return!!n&&e===n[0]}(Nr&&ps(new Nr(new ArrayBuffer(1)))!=M||_r&&ps(new _r)!=S||Sr&&ps(Sr.resolve())!=E||kr&&ps(new kr)!=T||Ar&&ps(new Ar)!=O)&&(ps=function(e){var t=Sn(e),r=t==A?e.constructor:a,n=r?Ls(r):"";if(n)switch(n){case Pr:return M;case Dr:return S;case Or:return E;case Ir:return T;case Mr:return O}return t});var js=Oe?Xi:gl;function Ns(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function _s(e){return e===e&&!Qi(e)}function Ss(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==a||e in ke(r)))}}function ks(e,t,n){return t=$t(t===a?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=$t(a.length-t,0),o=r(i);++s<i;)o[s]=a[t+s];s=-1;for(var l=r(t+1);++s<t;)l[s]=a[s];return l[t]=n(o),At(e,this,l)}}function As(e,t){return t.length<2?e:Nn(e,na(t,0,-1))}function Es(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Cs=Os(ea),Ts=dt||function(e,t){return mt.setTimeout(e,t)},Ps=Os(ta);function Ds(e,t,r){var n=t+"";return Ps(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Ct(v,function(r){var n="_."+r[0];t&r[1]&&!Ot(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(de):[]}(n),r)))}function Os(e){var t=0,r=0;return function(){var n=xr(),s=16-(n-r);if(r=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Is(e,t){var r=-1,n=e.length,s=n-1;for(t=t===a?n:t;++r<t;){var i=$n(r,s),o=e[i];e[i]=e[r],e[r]=o}return e.length=t,e}var Ms=function(e){var t=Oi(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,function(e,r,n,a){t.push(n?a.replace(fe,"$1"):r||e)}),t});function Rs(e){if("string"==typeof e||oo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ls(e){if(null!=e){try{return Ie.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fs(e){if(e instanceof Wr)return e.clone();var t=new qr(e.__wrapped__,e.__chain__);return t.__actions__=Ca(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bs=Xn(function(e,t){return Gi(e)?un(e,vn(t,1,Gi,!0)):[]}),zs=Xn(function(e,t){var r=Ys(t);return Gi(r)&&(r=a),Gi(e)?un(e,vn(t,1,Gi,!0),ls(r,2)):[]}),Us=Xn(function(e,t){var r=Ys(t);return Gi(r)&&(r=a),Gi(e)?un(e,vn(t,1,Gi,!0),a,r):[]});function qs(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:po(r);return a<0&&(a=$t(n+a,0)),qt(e,ls(t,3),a)}function Ws(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n-1;return r!==a&&(s=po(r),s=r<0?$t(n+s,0):br(s,n-1)),qt(e,ls(t,3),s,!0)}function Hs(e){return(null==e?0:e.length)?vn(e,1):[]}function Vs(e){return e&&e.length?e[0]:a}var Gs=Xn(function(e){var t=Mt(e,va);return t.length&&t[0]===e[0]?Cn(t):[]}),Ks=Xn(function(e){var t=Ys(e),r=Mt(e,va);return t===Ys(r)?t=a:r.pop(),r.length&&r[0]===e[0]?Cn(r,ls(t,2)):[]}),$s=Xn(function(e){var t=Ys(e),r=Mt(e,va);return(t="function"==typeof t?t:a)&&r.pop(),r.length&&r[0]===e[0]?Cn(r,a,t):[]});function Ys(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Xs=Xn(Js);function Js(e,t){return e&&e.length&&t&&t.length?Gn(e,t):e}var Zs=rs(function(e,t){var r=null==e?0:e.length,n=sn(e,t);return Kn(e,Mt(t,function(e){return bs(e,r)?+e:e}).sort(ka)),n});function Qs(e){return null==e?e:jr.call(e)}var ei=Xn(function(e){return da(vn(e,1,Gi,!0))}),ti=Xn(function(e){var t=Ys(e);return Gi(t)&&(t=a),da(vn(e,1,Gi,!0),ls(t,2))}),ri=Xn(function(e){var t=Ys(e);return t="function"==typeof t?t:a,da(vn(e,1,Gi,!0),a,t)});function ni(e){if(!e||!e.length)return[];var t=0;return e=Dt(e,function(e){if(Gi(e))return t=$t(e.length,t),!0}),Jt(t,function(t){return Mt(e,Kt(t))})}function ai(e,t){if(!e||!e.length)return[];var r=ni(e);return null==t?r:Mt(r,function(e){return At(t,a,e)})}var si=Xn(function(e,t){return Gi(e)?un(e,t):[]}),ii=Xn(function(e){return ma(Dt(e,Gi))}),oi=Xn(function(e){var t=Ys(e);return Gi(t)&&(t=a),ma(Dt(e,Gi),ls(t,2))}),li=Xn(function(e){var t=Ys(e);return t="function"==typeof t?t:a,ma(Dt(e,Gi),a,t)}),ci=Xn(ni);var di=Xn(function(e){var t=e.length,r=t>1?e[t-1]:a;return r="function"==typeof r?(e.pop(),r):a,ai(e,r)});function ui(e){var t=Br(e);return t.__chain__=!0,t}function hi(e,t){return t(e)}var fi=rs(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,s=function(t){return sn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Wr&&bs(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:hi,args:[s],thisArg:a}),new qr(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(a),e})):this.thru(s)});var pi=Pa(function(e,t,r){Me.call(e,r)?++e[r]:an(e,r,1)});var mi=Fa(qs),gi=Fa(Ws);function vi(e,t){return(Wi(e)?Ct:hn)(e,ls(t,3))}function bi(e,t){return(Wi(e)?Tt:fn)(e,ls(t,3))}var xi=Pa(function(e,t,r){Me.call(e,r)?e[r].push(t):an(e,r,[t])});var yi=Xn(function(e,t,n){var a=-1,s="function"==typeof t,i=Vi(e)?r(e.length):[];return hn(e,function(e){i[++a]=s?At(t,e,n):Tn(e,t,n)}),i}),wi=Pa(function(e,t,r){an(e,r,t)});function ji(e,t){return(Wi(e)?Mt:Bn)(e,ls(t,3))}var Ni=Pa(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var _i=Xn(function(e,t){if(null==e)return[];var r=t.length;return r>1&&xs(e,t[0],t[1])?t=[]:r>2&&xs(t[0],t[1],t[2])&&(t=[t[0]]),Hn(e,vn(t,1),[])}),Si=at||function(){return mt.Date.now()};function ki(e,t,r){return t=r?a:t,t=e&&null==t?e.length:t,Ja(e,u,a,a,a,a,t)}function Ai(e,t){var r;if("function"!=typeof t)throw new Ce(s);return e=po(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=a),r}}var Ei=Xn(function(e,t,r){var n=1;if(r.length){var a=dr(r,os(Ei));n|=c}return Ja(e,n,t,r,a)}),Ci=Xn(function(e,t,r){var n=3;if(r.length){var a=dr(r,os(Ci));n|=c}return Ja(t,n,e,r,a)});function Ti(e,t,r){var n,i,o,l,c,d,u=0,h=!1,f=!1,p=!0;if("function"!=typeof e)throw new Ce(s);function m(t){var r=n,s=i;return n=i=a,u=t,l=e.apply(s,r)}function g(e){var r=e-d;return d===a||r>=t||r<0||f&&e-u>=o}function v(){var e=Si();if(g(e))return b(e);c=Ts(v,function(e){var r=t-(e-d);return f?br(r,o-(e-u)):r}(e))}function b(e){return c=a,p&&n?m(e):(n=i=a,l)}function x(){var e=Si(),r=g(e);if(n=arguments,i=this,d=e,r){if(c===a)return function(e){return u=e,c=Ts(v,t),h?m(e):l}(d);if(f)return ja(c),c=Ts(v,t),m(d)}return c===a&&(c=Ts(v,t)),l}return t=go(t)||0,Qi(r)&&(h=!!r.leading,o=(f="maxWait"in r)?$t(go(r.maxWait)||0,t):o,p="trailing"in r?!!r.trailing:p),x.cancel=function(){c!==a&&ja(c),u=0,n=d=i=c=a},x.flush=function(){return c===a?l:b(Si())},x}var Pi=Xn(function(e,t){return dn(e,1,t)}),Di=Xn(function(e,t,r){return dn(e,go(t)||0,r)});function Oi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ce(s);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(Oi.Cache||Gr),r}function Ii(e){if("function"!=typeof e)throw new Ce(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Oi.Cache=Gr;var Mi=ya(function(e,t){var r=(t=1==t.length&&Wi(t[0])?Mt(t[0],Qt(ls())):Mt(vn(t,1),Qt(ls()))).length;return Xn(function(n){for(var a=-1,s=br(n.length,r);++a<s;)n[a]=t[a].call(this,n[a]);return At(e,this,n)})}),Ri=Xn(function(e,t){var r=dr(t,os(Ri));return Ja(e,c,a,t,r)}),Li=Xn(function(e,t){var r=dr(t,os(Li));return Ja(e,d,a,t,r)}),Fi=rs(function(e,t){return Ja(e,h,a,a,a,t)});function Bi(e,t){return e===t||e!==e&&t!==t}var zi=Ga(kn),Ui=Ga(function(e,t){return e>=t}),qi=Pn(function(){return arguments}())?Pn:function(e){return eo(e)&&Me.call(e,"callee")&&!$e.call(e,"callee")},Wi=r.isArray,Hi=wt?Qt(wt):function(e){return eo(e)&&Sn(e)==I};function Vi(e){return null!=e&&Zi(e.length)&&!Xi(e)}function Gi(e){return eo(e)&&Vi(e)}var Ki=vt||gl,$i=jt?Qt(jt):function(e){return eo(e)&&Sn(e)==w};function Yi(e){if(!eo(e))return!1;var t=Sn(e);return t==j||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!no(e)}function Xi(e){if(!Qi(e))return!1;var t=Sn(e);return t==N||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ji(e){return"number"==typeof e&&e==po(e)}function Zi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function Qi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}var to=Nt?Qt(Nt):function(e){return eo(e)&&ps(e)==S};function ro(e){return"number"==typeof e||eo(e)&&Sn(e)==k}function no(e){if(!eo(e)||Sn(e)!=A)return!1;var t=Ge(e);if(null===t)return!0;var r=Me.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ie.call(r)==Be}var ao=_t?Qt(_t):function(e){return eo(e)&&Sn(e)==C};var so=St?Qt(St):function(e){return eo(e)&&ps(e)==T};function io(e){return"string"==typeof e||!Wi(e)&&eo(e)&&Sn(e)==P}function oo(e){return"symbol"==typeof e||eo(e)&&Sn(e)==D}var lo=kt?Qt(kt):function(e){return eo(e)&&Zi(e.length)&&!!lt[Sn(e)]};var co=Ga(Fn),uo=Ga(function(e,t){return e<=t});function ho(e){if(!e)return[];if(Vi(e))return io(e)?pr(e):Ca(e);if(Je&&e[Je])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Je]());var t=ps(e);return(t==S?lr:t==T?ur:zo)(e)}function fo(e){return e?(e=go(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function po(e){var t=fo(e),r=t%1;return t===t?r?t-r:t:0}function mo(e){return e?on(po(e),0,g):0}function go(e){if("number"==typeof e)return e;if(oo(e))return m;if(Qi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var r=ve.test(e);return r||xe.test(e)?ht(e.slice(2),r?2:8):ge.test(e)?m:+e}function vo(e){return Ta(e,Do(e))}function bo(e){return null==e?"":ca(e)}var xo=Da(function(e,t){if(Ns(t)||Vi(t))Ta(t,Po(t),e);else for(var r in t)Me.call(t,r)&&en(e,r,t[r])}),yo=Da(function(e,t){Ta(t,Do(t),e)}),wo=Da(function(e,t,r,n){Ta(t,Do(t),e,n)}),jo=Da(function(e,t,r,n){Ta(t,Po(t),e,n)}),No=rs(sn);var _o=Xn(function(e,t){e=ke(e);var r=-1,n=t.length,s=n>2?t[2]:a;for(s&&xs(t[0],t[1],s)&&(n=1);++r<n;)for(var i=t[r],o=Do(i),l=-1,c=o.length;++l<c;){var d=o[l],u=e[d];(u===a||Bi(u,De[d])&&!Me.call(e,d))&&(e[d]=i[d])}return e}),So=Xn(function(e){return e.push(a,Qa),At(Io,a,e)});function ko(e,t,r){var n=null==e?a:Nn(e,t);return n===a?r:n}function Ao(e,t){return null!=e&&ms(e,t,En)}var Eo=Ua(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=r},el(nl)),Co=Ua(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Me.call(e,t)?e[t].push(r):e[t]=[r]},ls),To=Xn(Tn);function Po(e){return Vi(e)?Yr(e):Rn(e)}function Do(e){return Vi(e)?Yr(e,!0):Ln(e)}var Oo=Da(function(e,t,r){qn(e,t,r)}),Io=Da(function(e,t,r,n){qn(e,t,r,n)}),Mo=rs(function(e,t){var r={};if(null==e)return r;var n=!1;t=Mt(t,function(t){return t=xa(t,e),n||(n=t.length>1),t}),Ta(e,as(e),r),n&&(r=ln(r,7,es));for(var a=t.length;a--;)ua(r,t[a]);return r});var Ro=rs(function(e,t){return null==e?{}:function(e,t){return Vn(e,t,function(t,r){return Ao(e,r)})}(e,t)});function Lo(e,t){if(null==e)return{};var r=Mt(as(e),function(e){return[e]});return t=ls(t),Vn(e,r,function(e,r){return t(e,r[0])})}var Fo=Xa(Po),Bo=Xa(Do);function zo(e){return null==e?[]:er(e,Po(e))}var Uo=Ra(function(e,t,r){return t=t.toLowerCase(),e+(r?qo(t):t)});function qo(e){return Xo(bo(e).toLowerCase())}function Wo(e){return(e=bo(e))&&e.replace(we,ar).replace(tt,"")}var Ho=Ra(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Vo=Ra(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Go=Ma("toLowerCase");var Ko=Ra(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var $o=Ra(function(e,t,r){return e+(r?" ":"")+Xo(t)});var Yo=Ra(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Xo=Ma("toUpperCase");function Jo(e,t,r){return e=bo(e),(t=r?a:t)===a?function(e){return st.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Zo=Xn(function(e,t){try{return At(e,a,t)}catch(r){return Yi(r)?r:new oe(r)}}),Qo=rs(function(e,t){return Ct(t,function(t){t=Rs(t),an(e,t,Ei(e[t],e))}),e});function el(e){return function(){return e}}var tl=Ba(),rl=Ba(!0);function nl(e){return e}function al(e){return Mn("function"==typeof e?e:ln(e,1))}var sl=Xn(function(e,t){return function(r){return Tn(r,e,t)}}),il=Xn(function(e,t){return function(r){return Tn(e,r,t)}});function ol(e,t,r){var n=Po(t),a=jn(t,n);null!=r||Qi(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=jn(t,Po(t)));var s=!(Qi(r)&&"chain"in r)||!!r.chain,i=Xi(e);return Ct(a,function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=Ca(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Rt([this.value()],arguments))})}),e}function ll(){}var cl=Wa(Mt),dl=Wa(Pt),ul=Wa(Bt);function hl(e){return ys(e)?Kt(Rs(e)):function(e){return function(t){return Nn(t,e)}}(e)}var fl=Va(),pl=Va(!0);function ml(){return[]}function gl(){return!1}var vl=qa(function(e,t){return e+t},0),bl=$a("ceil"),xl=qa(function(e,t){return e/t},1),yl=$a("floor");var wl=qa(function(e,t){return e*t},1),jl=$a("round"),Nl=qa(function(e,t){return e-t},0);return Br.after=function(e,t){if("function"!=typeof t)throw new Ce(s);return e=po(e),function(){if(--e<1)return t.apply(this,arguments)}},Br.ary=ki,Br.assign=xo,Br.assignIn=yo,Br.assignInWith=wo,Br.assignWith=jo,Br.at=No,Br.before=Ai,Br.bind=Ei,Br.bindAll=Qo,Br.bindKey=Ci,Br.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wi(e)?e:[e]},Br.chain=ui,Br.chunk=function(e,t,n){t=(n?xs(e,t,n):t===a)?1:$t(po(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var i=0,o=0,l=r(ft(s/t));i<s;)l[o++]=na(e,i,i+=t);return l},Br.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var s=e[t];s&&(a[n++]=s)}return a},Br.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Rt(Wi(n)?Ca(n):[n],vn(t,1))},Br.cond=function(e){var t=null==e?0:e.length,r=ls();return e=t?Mt(e,function(e){if("function"!=typeof e[1])throw new Ce(s);return[r(e[0]),e[1]]}):[],Xn(function(r){for(var n=-1;++n<t;){var a=e[n];if(At(a[0],this,r))return At(a[1],this,r)}})},Br.conforms=function(e){return function(e){var t=Po(e);return function(r){return cn(r,e,t)}}(ln(e,1))},Br.constant=el,Br.countBy=pi,Br.create=function(e,t){var r=zr(e);return null==t?r:nn(r,t)},Br.curry=function e(t,r,n){var s=Ja(t,8,a,a,a,a,a,r=n?a:r);return s.placeholder=e.placeholder,s},Br.curryRight=function e(t,r,n){var s=Ja(t,l,a,a,a,a,a,r=n?a:r);return s.placeholder=e.placeholder,s},Br.debounce=Ti,Br.defaults=_o,Br.defaultsDeep=So,Br.defer=Pi,Br.delay=Di,Br.difference=Bs,Br.differenceBy=zs,Br.differenceWith=Us,Br.drop=function(e,t,r){var n=null==e?0:e.length;return n?na(e,(t=r||t===a?1:po(t))<0?0:t,n):[]},Br.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?na(e,0,(t=n-(t=r||t===a?1:po(t)))<0?0:t):[]},Br.dropRightWhile=function(e,t){return e&&e.length?fa(e,ls(t,3),!0,!0):[]},Br.dropWhile=function(e,t){return e&&e.length?fa(e,ls(t,3),!0):[]},Br.fill=function(e,t,r,n){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&xs(e,t,r)&&(r=0,n=s),function(e,t,r,n){var s=e.length;for((r=po(r))<0&&(r=-r>s?0:s+r),(n=n===a||n>s?s:po(n))<0&&(n+=s),n=r>n?0:mo(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Br.filter=function(e,t){return(Wi(e)?Dt:gn)(e,ls(t,3))},Br.flatMap=function(e,t){return vn(ji(e,t),1)},Br.flatMapDeep=function(e,t){return vn(ji(e,t),f)},Br.flatMapDepth=function(e,t,r){return r=r===a?1:po(r),vn(ji(e,t),r)},Br.flatten=Hs,Br.flattenDeep=function(e){return(null==e?0:e.length)?vn(e,f):[]},Br.flattenDepth=function(e,t){return(null==e?0:e.length)?vn(e,t=t===a?1:po(t)):[]},Br.flip=function(e){return Ja(e,512)},Br.flow=tl,Br.flowRight=rl,Br.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},Br.functions=function(e){return null==e?[]:jn(e,Po(e))},Br.functionsIn=function(e){return null==e?[]:jn(e,Do(e))},Br.groupBy=xi,Br.initial=function(e){return(null==e?0:e.length)?na(e,0,-1):[]},Br.intersection=Gs,Br.intersectionBy=Ks,Br.intersectionWith=$s,Br.invert=Eo,Br.invertBy=Co,Br.invokeMap=yi,Br.iteratee=al,Br.keyBy=wi,Br.keys=Po,Br.keysIn=Do,Br.map=ji,Br.mapKeys=function(e,t){var r={};return t=ls(t,3),yn(e,function(e,n,a){an(r,t(e,n,a),e)}),r},Br.mapValues=function(e,t){var r={};return t=ls(t,3),yn(e,function(e,n,a){an(r,n,t(e,n,a))}),r},Br.matches=function(e){return zn(ln(e,1))},Br.matchesProperty=function(e,t){return Un(e,ln(t,1))},Br.memoize=Oi,Br.merge=Oo,Br.mergeWith=Io,Br.method=sl,Br.methodOf=il,Br.mixin=ol,Br.negate=Ii,Br.nthArg=function(e){return e=po(e),Xn(function(t){return Wn(t,e)})},Br.omit=Mo,Br.omitBy=function(e,t){return Lo(e,Ii(ls(t)))},Br.once=function(e){return Ai(2,e)},Br.orderBy=function(e,t,r,n){return null==e?[]:(Wi(t)||(t=null==t?[]:[t]),Wi(r=n?a:r)||(r=null==r?[]:[r]),Hn(e,t,r))},Br.over=cl,Br.overArgs=Mi,Br.overEvery=dl,Br.overSome=ul,Br.partial=Ri,Br.partialRight=Li,Br.partition=Ni,Br.pick=Ro,Br.pickBy=Lo,Br.property=hl,Br.propertyOf=function(e){return function(t){return null==e?a:Nn(e,t)}},Br.pull=Xs,Br.pullAll=Js,Br.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Gn(e,t,ls(r,2)):e},Br.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Gn(e,t,a,r):e},Br.pullAt=Zs,Br.range=fl,Br.rangeRight=pl,Br.rearg=Fi,Br.reject=function(e,t){return(Wi(e)?Dt:gn)(e,Ii(ls(t,3)))},Br.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],s=e.length;for(t=ls(t,3);++n<s;){var i=e[n];t(i,n,e)&&(r.push(i),a.push(n))}return Kn(e,a),r},Br.rest=function(e,t){if("function"!=typeof e)throw new Ce(s);return Xn(e,t=t===a?t:po(t))},Br.reverse=Qs,Br.sampleSize=function(e,t,r){return t=(r?xs(e,t,r):t===a)?1:po(t),(Wi(e)?Jr:Zn)(e,t)},Br.set=function(e,t,r){return null==e?e:Qn(e,t,r)},Br.setWith=function(e,t,r,n){return n="function"==typeof n?n:a,null==e?e:Qn(e,t,r,n)},Br.shuffle=function(e){return(Wi(e)?Zr:ra)(e)},Br.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&xs(e,t,r)?(t=0,r=n):(t=null==t?0:po(t),r=r===a?n:po(r)),na(e,t,r)):[]},Br.sortBy=_i,Br.sortedUniq=function(e){return e&&e.length?oa(e):[]},Br.sortedUniqBy=function(e,t){return e&&e.length?oa(e,ls(t,2)):[]},Br.split=function(e,t,r){return r&&"number"!=typeof r&&xs(e,t,r)&&(t=r=a),(r=r===a?g:r>>>0)?(e=bo(e))&&("string"==typeof t||null!=t&&!ao(t))&&!(t=ca(t))&&or(e)?wa(pr(e),0,r):e.split(t,r):[]},Br.spread=function(e,t){if("function"!=typeof e)throw new Ce(s);return t=null==t?0:$t(po(t),0),Xn(function(r){var n=r[t],a=wa(r,0,t);return n&&Rt(a,n),At(e,this,a)})},Br.tail=function(e){var t=null==e?0:e.length;return t?na(e,1,t):[]},Br.take=function(e,t,r){return e&&e.length?na(e,0,(t=r||t===a?1:po(t))<0?0:t):[]},Br.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?na(e,(t=n-(t=r||t===a?1:po(t)))<0?0:t,n):[]},Br.takeRightWhile=function(e,t){return e&&e.length?fa(e,ls(t,3),!1,!0):[]},Br.takeWhile=function(e,t){return e&&e.length?fa(e,ls(t,3)):[]},Br.tap=function(e,t){return t(e),e},Br.throttle=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new Ce(s);return Qi(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Ti(e,t,{leading:n,maxWait:t,trailing:a})},Br.thru=hi,Br.toArray=ho,Br.toPairs=Fo,Br.toPairsIn=Bo,Br.toPath=function(e){return Wi(e)?Mt(e,Rs):oo(e)?[e]:Ca(Ms(bo(e)))},Br.toPlainObject=vo,Br.transform=function(e,t,r){var n=Wi(e),a=n||Ki(e)||lo(e);if(t=ls(t,4),null==r){var s=e&&e.constructor;r=a?n?new s:[]:Qi(e)&&Xi(s)?zr(Ge(e)):{}}return(a?Ct:yn)(e,function(e,n,a){return t(r,e,n,a)}),r},Br.unary=function(e){return ki(e,1)},Br.union=ei,Br.unionBy=ti,Br.unionWith=ri,Br.uniq=function(e){return e&&e.length?da(e):[]},Br.uniqBy=function(e,t){return e&&e.length?da(e,ls(t,2)):[]},Br.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?da(e,a,t):[]},Br.unset=function(e,t){return null==e||ua(e,t)},Br.unzip=ni,Br.unzipWith=ai,Br.update=function(e,t,r){return null==e?e:ha(e,t,ba(r))},Br.updateWith=function(e,t,r,n){return n="function"==typeof n?n:a,null==e?e:ha(e,t,ba(r),n)},Br.values=zo,Br.valuesIn=function(e){return null==e?[]:er(e,Do(e))},Br.without=si,Br.words=Jo,Br.wrap=function(e,t){return Ri(ba(t),e)},Br.xor=ii,Br.xorBy=oi,Br.xorWith=li,Br.zip=ci,Br.zipObject=function(e,t){return ga(e||[],t||[],en)},Br.zipObjectDeep=function(e,t){return ga(e||[],t||[],Qn)},Br.zipWith=di,Br.entries=Fo,Br.entriesIn=Bo,Br.extend=yo,Br.extendWith=wo,ol(Br,Br),Br.add=vl,Br.attempt=Zo,Br.camelCase=Uo,Br.capitalize=qo,Br.ceil=bl,Br.clamp=function(e,t,r){return r===a&&(r=t,t=a),r!==a&&(r=(r=go(r))===r?r:0),t!==a&&(t=(t=go(t))===t?t:0),on(go(e),t,r)},Br.clone=function(e){return ln(e,4)},Br.cloneDeep=function(e){return ln(e,5)},Br.cloneDeepWith=function(e,t){return ln(e,5,t="function"==typeof t?t:a)},Br.cloneWith=function(e,t){return ln(e,4,t="function"==typeof t?t:a)},Br.conformsTo=function(e,t){return null==t||cn(e,t,Po(t))},Br.deburr=Wo,Br.defaultTo=function(e,t){return null==e||e!==e?t:e},Br.divide=xl,Br.endsWith=function(e,t,r){e=bo(e),t=ca(t);var n=e.length,s=r=r===a?n:on(po(r),0,n);return(r-=t.length)>=0&&e.slice(r,s)==t},Br.eq=Bi,Br.escape=function(e){return(e=bo(e))&&J.test(e)?e.replace(Y,sr):e},Br.escapeRegExp=function(e){return(e=bo(e))&&se.test(e)?e.replace(ae,"\\$&"):e},Br.every=function(e,t,r){var n=Wi(e)?Pt:pn;return r&&xs(e,t,r)&&(t=a),n(e,ls(t,3))},Br.find=mi,Br.findIndex=qs,Br.findKey=function(e,t){return Ut(e,ls(t,3),yn)},Br.findLast=gi,Br.findLastIndex=Ws,Br.findLastKey=function(e,t){return Ut(e,ls(t,3),wn)},Br.floor=yl,Br.forEach=vi,Br.forEachRight=bi,Br.forIn=function(e,t){return null==e?e:bn(e,ls(t,3),Do)},Br.forInRight=function(e,t){return null==e?e:xn(e,ls(t,3),Do)},Br.forOwn=function(e,t){return e&&yn(e,ls(t,3))},Br.forOwnRight=function(e,t){return e&&wn(e,ls(t,3))},Br.get=ko,Br.gt=zi,Br.gte=Ui,Br.has=function(e,t){return null!=e&&ms(e,t,An)},Br.hasIn=Ao,Br.head=Vs,Br.identity=nl,Br.includes=function(e,t,r,n){e=Vi(e)?e:zo(e),r=r&&!n?po(r):0;var a=e.length;return r<0&&(r=$t(a+r,0)),io(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Wt(e,t,r)>-1},Br.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:po(r);return a<0&&(a=$t(n+a,0)),Wt(e,t,a)},Br.inRange=function(e,t,r){return t=fo(t),r===a?(r=t,t=0):r=fo(r),function(e,t,r){return e>=br(t,r)&&e<$t(t,r)}(e=go(e),t,r)},Br.invoke=To,Br.isArguments=qi,Br.isArray=Wi,Br.isArrayBuffer=Hi,Br.isArrayLike=Vi,Br.isArrayLikeObject=Gi,Br.isBoolean=function(e){return!0===e||!1===e||eo(e)&&Sn(e)==y},Br.isBuffer=Ki,Br.isDate=$i,Br.isElement=function(e){return eo(e)&&1===e.nodeType&&!no(e)},Br.isEmpty=function(e){if(null==e)return!0;if(Vi(e)&&(Wi(e)||"string"==typeof e||"function"==typeof e.splice||Ki(e)||lo(e)||qi(e)))return!e.length;var t=ps(e);if(t==S||t==T)return!e.size;if(Ns(e))return!Rn(e).length;for(var r in e)if(Me.call(e,r))return!1;return!0},Br.isEqual=function(e,t){return Dn(e,t)},Br.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:a)?r(e,t):a;return n===a?Dn(e,t,a,r):!!n},Br.isError=Yi,Br.isFinite=function(e){return"number"==typeof e&&xt(e)},Br.isFunction=Xi,Br.isInteger=Ji,Br.isLength=Zi,Br.isMap=to,Br.isMatch=function(e,t){return e===t||On(e,t,ds(t))},Br.isMatchWith=function(e,t,r){return r="function"==typeof r?r:a,On(e,t,ds(t),r)},Br.isNaN=function(e){return ro(e)&&e!=+e},Br.isNative=function(e){if(js(e))throw new oe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return In(e)},Br.isNil=function(e){return null==e},Br.isNull=function(e){return null===e},Br.isNumber=ro,Br.isObject=Qi,Br.isObjectLike=eo,Br.isPlainObject=no,Br.isRegExp=ao,Br.isSafeInteger=function(e){return Ji(e)&&e>=-9007199254740991&&e<=p},Br.isSet=so,Br.isString=io,Br.isSymbol=oo,Br.isTypedArray=lo,Br.isUndefined=function(e){return e===a},Br.isWeakMap=function(e){return eo(e)&&ps(e)==O},Br.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==Sn(e)},Br.join=function(e,t){return null==e?"":yt.call(e,t)},Br.kebabCase=Ho,Br.last=Ys,Br.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n;return r!==a&&(s=(s=po(r))<0?$t(n+s,0):br(s,n-1)),t===t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,s):qt(e,Vt,s,!0)},Br.lowerCase=Vo,Br.lowerFirst=Go,Br.lt=co,Br.lte=uo,Br.max=function(e){return e&&e.length?mn(e,nl,kn):a},Br.maxBy=function(e,t){return e&&e.length?mn(e,ls(t,2),kn):a},Br.mean=function(e){return Gt(e,nl)},Br.meanBy=function(e,t){return Gt(e,ls(t,2))},Br.min=function(e){return e&&e.length?mn(e,nl,Fn):a},Br.minBy=function(e,t){return e&&e.length?mn(e,ls(t,2),Fn):a},Br.stubArray=ml,Br.stubFalse=gl,Br.stubObject=function(){return{}},Br.stubString=function(){return""},Br.stubTrue=function(){return!0},Br.multiply=wl,Br.nth=function(e,t){return e&&e.length?Wn(e,po(t)):a},Br.noConflict=function(){return mt._===this&&(mt._=ze),this},Br.noop=ll,Br.now=Si,Br.pad=function(e,t,r){e=bo(e);var n=(t=po(t))?fr(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return Ha(pt(a),r)+e+Ha(ft(a),r)},Br.padEnd=function(e,t,r){e=bo(e);var n=(t=po(t))?fr(e):0;return t&&n<t?e+Ha(t-n,r):e},Br.padStart=function(e,t,r){e=bo(e);var n=(t=po(t))?fr(e):0;return t&&n<t?Ha(t-n,r)+e:e},Br.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),yr(bo(e).replace(ie,""),t||0)},Br.random=function(e,t,r){if(r&&"boolean"!=typeof r&&xs(e,t,r)&&(t=r=a),r===a&&("boolean"==typeof t?(r=t,t=a):"boolean"==typeof e&&(r=e,e=a)),e===a&&t===a?(e=0,t=1):(e=fo(e),t===a?(t=e,e=0):t=fo(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var s=wr();return br(e+s*(t-e+ut("1e-"+((s+"").length-1))),t)}return $n(e,t)},Br.reduce=function(e,t,r){var n=Wi(e)?Lt:Yt,a=arguments.length<3;return n(e,ls(t,4),r,a,hn)},Br.reduceRight=function(e,t,r){var n=Wi(e)?Ft:Yt,a=arguments.length<3;return n(e,ls(t,4),r,a,fn)},Br.repeat=function(e,t,r){return t=(r?xs(e,t,r):t===a)?1:po(t),Yn(bo(e),t)},Br.replace=function(){var e=arguments,t=bo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Br.result=function(e,t,r){var n=-1,s=(t=xa(t,e)).length;for(s||(s=1,e=a);++n<s;){var i=null==e?a:e[Rs(t[n])];i===a&&(n=s,i=r),e=Xi(i)?i.call(e):i}return e},Br.round=jl,Br.runInContext=e,Br.sample=function(e){return(Wi(e)?Xr:Jn)(e)},Br.size=function(e){if(null==e)return 0;if(Vi(e))return io(e)?fr(e):e.length;var t=ps(e);return t==S||t==T?e.size:Rn(e).length},Br.snakeCase=Ko,Br.some=function(e,t,r){var n=Wi(e)?Bt:aa;return r&&xs(e,t,r)&&(t=a),n(e,ls(t,3))},Br.sortedIndex=function(e,t){return sa(e,t)},Br.sortedIndexBy=function(e,t,r){return ia(e,t,ls(r,2))},Br.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=sa(e,t);if(n<r&&Bi(e[n],t))return n}return-1},Br.sortedLastIndex=function(e,t){return sa(e,t,!0)},Br.sortedLastIndexBy=function(e,t,r){return ia(e,t,ls(r,2),!0)},Br.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=sa(e,t,!0)-1;if(Bi(e[r],t))return r}return-1},Br.startCase=$o,Br.startsWith=function(e,t,r){return e=bo(e),r=null==r?0:on(po(r),0,e.length),t=ca(t),e.slice(r,r+t.length)==t},Br.subtract=Nl,Br.sum=function(e){return e&&e.length?Xt(e,nl):0},Br.sumBy=function(e,t){return e&&e.length?Xt(e,ls(t,2)):0},Br.template=function(e,t,r){var n=Br.templateSettings;r&&xs(e,t,r)&&(t=a),e=bo(e),t=wo({},t,n,Za);var s,i,o=wo({},t.imports,n.imports,Za),l=Po(o),c=er(o,l),d=0,u=t.interpolate||je,h="__p += '",f=Ae((t.escape||je).source+"|"+u.source+"|"+(u===ee?pe:je).source+"|"+(t.evaluate||je).source+"|$","g"),p="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,function(t,r,n,a,o,l){return n||(n=a),h+=e.slice(d,l).replace(Ne,ir),r&&(s=!0,h+="' +\n__e("+r+") +\n'"),o&&(i=!0,h+="';\n"+o+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),h+="';\n";var m=Me.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new oe("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(i?h.replace(V,""):h).replace(G,"$1").replace(K,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Zo(function(){return _e(l,p+"return "+h).apply(a,c)});if(g.source=h,Yi(g))throw g;return g},Br.times=function(e,t){if((e=po(e))<1||e>p)return[];var r=g,n=br(e,g);t=ls(t),e-=g;for(var a=Jt(n,t);++r<e;)t(r);return a},Br.toFinite=fo,Br.toInteger=po,Br.toLength=mo,Br.toLower=function(e){return bo(e).toLowerCase()},Br.toNumber=go,Br.toSafeInteger=function(e){return e?on(po(e),-9007199254740991,p):0===e?e:0},Br.toString=bo,Br.toUpper=function(e){return bo(e).toUpperCase()},Br.trim=function(e,t,r){if((e=bo(e))&&(r||t===a))return Zt(e);if(!e||!(t=ca(t)))return e;var n=pr(e),s=pr(t);return wa(n,rr(n,s),nr(n,s)+1).join("")},Br.trimEnd=function(e,t,r){if((e=bo(e))&&(r||t===a))return e.slice(0,mr(e)+1);if(!e||!(t=ca(t)))return e;var n=pr(e);return wa(n,0,nr(n,pr(t))+1).join("")},Br.trimStart=function(e,t,r){if((e=bo(e))&&(r||t===a))return e.replace(ie,"");if(!e||!(t=ca(t)))return e;var n=pr(e);return wa(n,rr(n,pr(t))).join("")},Br.truncate=function(e,t){var r=30,n="...";if(Qi(t)){var s="separator"in t?t.separator:s;r="length"in t?po(t.length):r,n="omission"in t?ca(t.omission):n}var i=(e=bo(e)).length;if(or(e)){var o=pr(e);i=o.length}if(r>=i)return e;var l=r-fr(n);if(l<1)return n;var c=o?wa(o,0,l).join(""):e.slice(0,l);if(s===a)return c+n;if(o&&(l+=c.length-l),ao(s)){if(e.slice(l).search(s)){var d,u=c;for(s.global||(s=Ae(s.source,bo(me.exec(s))+"g")),s.lastIndex=0;d=s.exec(u);)var h=d.index;c=c.slice(0,h===a?l:h)}}else if(e.indexOf(ca(s),l)!=l){var f=c.lastIndexOf(s);f>-1&&(c=c.slice(0,f))}return c+n},Br.unescape=function(e){return(e=bo(e))&&X.test(e)?e.replace($,gr):e},Br.uniqueId=function(e){var t=++Re;return bo(e)+t},Br.upperCase=Yo,Br.upperFirst=Xo,Br.each=vi,Br.eachRight=bi,Br.first=Vs,ol(Br,function(){var e={};return yn(Br,function(t,r){Me.call(Br.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),Br.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Br[e].placeholder=Br}),Ct(["drop","take"],function(e,t){Wr.prototype[e]=function(r){r=r===a?1:$t(po(r),0);var n=this.__filtered__&&!t?new Wr(this):this.clone();return n.__filtered__?n.__takeCount__=br(r,n.__takeCount__):n.__views__.push({size:br(r,g),type:e+(n.__dir__<0?"Right":"")}),n},Wr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ct(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;Wr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ls(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),Ct(["head","last"],function(e,t){var r="take"+(t?"Right":"");Wr.prototype[e]=function(){return this[r](1).value()[0]}}),Ct(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Wr.prototype[e]=function(){return this.__filtered__?new Wr(this):this[r](1)}}),Wr.prototype.compact=function(){return this.filter(nl)},Wr.prototype.find=function(e){return this.filter(e).head()},Wr.prototype.findLast=function(e){return this.reverse().find(e)},Wr.prototype.invokeMap=Xn(function(e,t){return"function"==typeof e?new Wr(this):this.map(function(r){return Tn(r,e,t)})}),Wr.prototype.reject=function(e){return this.filter(Ii(ls(e)))},Wr.prototype.slice=function(e,t){e=po(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Wr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==a&&(r=(t=po(t))<0?r.dropRight(-t):r.take(t-e)),r)},Wr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wr.prototype.toArray=function(){return this.take(g)},yn(Wr.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=Br[n?"take"+("last"==t?"Right":""):t],i=n||/^find/.test(t);s&&(Br.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,l=t instanceof Wr,c=o[0],d=l||Wi(t),u=function(e){var t=s.apply(Br,Rt([e],o));return n&&h?t[0]:t};d&&r&&"function"==typeof c&&1!=c.length&&(l=d=!1);var h=this.__chain__,f=!!this.__actions__.length,p=i&&!h,m=l&&!f;if(!i&&d){t=m?t:new Wr(this);var g=e.apply(t,o);return g.__actions__.push({func:hi,args:[u],thisArg:a}),new qr(g,h)}return p&&m?e.apply(this,o):(g=this.thru(u),p?n?g.value()[0]:g.value():g)})}),Ct(["pop","push","shift","sort","splice","unshift"],function(e){var t=Te[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Br.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(Wi(a)?a:[],e)}return this[r](function(r){return t.apply(Wi(r)?r:[],e)})}}),yn(Wr.prototype,function(e,t){var r=Br[t];if(r){var n=r.name+"";Me.call(Tr,n)||(Tr[n]=[]),Tr[n].push({name:t,func:r})}}),Tr[za(a,2).name]=[{name:"wrapper",func:a}],Wr.prototype.clone=function(){var e=new Wr(this.__wrapped__);return e.__actions__=Ca(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ca(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ca(this.__views__),e},Wr.prototype.reverse=function(){if(this.__filtered__){var e=new Wr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Wi(e),n=t<0,a=r?e.length:0,s=function(e,t,r){var n=-1,a=r.length;for(;++n<a;){var s=r[n],i=s.size;switch(s.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=br(t,e+i);break;case"takeRight":e=$t(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=s.start,o=s.end,l=o-i,c=n?o:i-1,d=this.__iteratees__,u=d.length,h=0,f=br(l,this.__takeCount__);if(!r||!n&&a==l&&f==l)return pa(e,this.__actions__);var p=[];e:for(;l--&&h<f;){for(var m=-1,g=e[c+=t];++m<u;){var v=d[m],b=v.iteratee,x=v.type,y=b(g);if(2==x)g=y;else if(!y){if(1==x)continue e;break e}}p[h++]=g}return p},Br.prototype.at=fi,Br.prototype.chain=function(){return ui(this)},Br.prototype.commit=function(){return new qr(this.value(),this.__chain__)},Br.prototype.next=function(){this.__values__===a&&(this.__values__=ho(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Br.prototype.plant=function(e){for(var t,r=this;r instanceof Ur;){var n=Fs(r);n.__index__=0,n.__values__=a,t?s.__wrapped__=n:t=n;var s=n;r=r.__wrapped__}return s.__wrapped__=e,t},Br.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wr){var t=e;return this.__actions__.length&&(t=new Wr(this)),(t=t.reverse()).__actions__.push({func:hi,args:[Qs],thisArg:a}),new qr(t,this.__chain__)}return this.thru(Qs)},Br.prototype.toJSON=Br.prototype.valueOf=Br.prototype.value=function(){return pa(this.__wrapped__,this.__actions__)},Br.prototype.first=Br.prototype.head,Je&&(Br.prototype[Je]=function(){return this}),Br}();mt._=vr,(n=function(){return vr}.call(t,r,t,e))===a||(e.exports=n)}.call(this)},1558:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},1640:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1810),a=r(5825),s=r(3679),i=r(4090);t.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?i.matchesProperty(e[0],e[1]):s.matches(e);case"string":case"symbol":case"number":return a.property(e)}}},1810:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},1863:(e,t,r)=>{"use strict";var n=r(9950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=r,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:s}):"script"===r&&i.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin);i.d.L(e,r,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},1921:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7108);t.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},1983:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function b(){}function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var y=x.prototype=new b;y.constructor=x,m(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function _(e,t,n,a,s,i){return n=i.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:i}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var k=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function C(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(o){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case r:case n:d=!0;break;case h:return C((d=e._init)(e._payload),t,a,s,i)}}if(d)return i=i(e),d=""===s?"."+A(e,0):s,w(i)?(a="",null!=d&&(a=d.replace(k,"$&/")+"/"),C(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(l=i,c=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(k,"$&/")+"/")+d,i=_(l.type,c,void 0,0,0,l.props)),t.push(i)),1;d=0;var u,p=""===s?".":s+":";if(w(e))for(var m=0;m<e.length;m++)d+=C(s=e[m],t,a,o=p+A(s,m),i);else if("function"===typeof(m=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=f&&u[f]||u["@@iterator"])?u:null))for(e=m.call(e),m=0;!(s=e.next()).done;)d+=C(s=s.value,t,a,o=p+A(s,m++),i);else if("object"===o){if("function"===typeof e.then)return C(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,s,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function T(e,t,r){if(null==e)return e;var n=[],a=0;return C(e,n,"","",function(e){return t.call(r,e,a++)}),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return j.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=m({},e.props),a=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!N.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(n[s]=t[s]);var s=arguments.length-2;if(1===s)n.children=r;else if(1<s){for(var i=Array(s),o=0;o<s;o++)i[o]=arguments[o+2];n.children=i}return _(e.type,a,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,r){var n,a={},s=null;if(null!=t)for(n in void 0!==t.key&&(s=""+t.key),t)N.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var i=arguments.length-2;if(1===i)a.children=r;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(n in i=e.defaultProps)void 0===a[n]&&(a[n]=i[n]);return _(e,s,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.T,r={};j.T=r;try{var n=e(),a=j.S;null!==a&&a(r,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(O,D)}catch(s){D(s)}finally{j.T=t}},t.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},t.use=function(e){return j.H.use(e)},t.useActionState=function(e,t,r){return j.H.useActionState(e,t,r)},t.useCallback=function(e,t){return j.H.useCallback(e,t)},t.useContext=function(e){return j.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return j.H.useDeferredValue(e,t)},t.useEffect=function(e,t,r){var n=j.H;if("function"===typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},t.useId=function(){return j.H.useId()},t.useImperativeHandle=function(e,t,r){return j.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return j.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.H.useMemo(e,t)},t.useOptimistic=function(e,t){return j.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return j.H.useReducer(e,t,r)},t.useRef=function(e){return j.H.useRef(e)},t.useState=function(e){return j.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return j.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return j.H.useTransition()},t.version="19.1.1"},2239:(e,t,r)=>{e.exports=r(7384).uniqBy},2284:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})},2540:(e,t,r)=>{e.exports=r(3177).isPlainObject},2718:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7431),a=r(7740),s=r(3539),i=r(9115);t.isIterateeCall=function(e,t,r){return!!s.isObject(r)&&(!!("number"===typeof t&&a.isArrayLike(r)&&n.isIndex(t)&&t<r.length||"string"===typeof t&&t in r)&&i.eq(r[t],e))}},2742:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6907);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof r&&(r={});const{leading:a=!1,trailing:s=!0,maxWait:i}=r,o=Array(2);let l;a&&(o[0]="leading"),s&&(o[1]="trailing");let c=null;const d=n.debounce(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];l=e.apply(this,r),c=null},t,{edges:o}),u=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return null!=i&&(null===c&&(c=Date.now()),Date.now()-c>=i)?(l=e.apply(this,r),c=Date.now(),d.cancel(),d.schedule(),l):(d.apply(this,r),l)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),l),u}},2897:(e,t,r)=>{var n=r(3693);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3044:(e,t,r)=>{"use strict";e.exports=r(9940)},3177:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const r=e[Symbol.toStringTag];if(null==r)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(r,"]")}let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}},3470:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},3539:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},3679:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5399),a=r(9358);t.matches=function(e){return e=a.cloneDeep(e),t=>n.isMatch(t,e)}},3693:(e,t,r)=>{var n=r(7736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3787:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7740),a=r(8316);t.isArrayLikeObject=function(e){return a.isObjectLike(e)&&n.isArrayLike(e)}},3916:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(e,t,n){var a=null;if(void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),"key"in t)for(var s in n={},t)"key"!==s&&(n[s]=t[s]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:a,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=a,t.jsxs=a},4011:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(7427));class s extends a.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const s=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?"".concat(r,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}t.default=s},4090:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5399),a=r(1083),s=r(5573),i=r(8146),o=r(5942);t.matchesProperty=function(e,t){switch(typeof e){case"object":var r;Object.is(null===(r=e)||void 0===r?void 0:r.valueOf(),-0)&&(e="-0");break;case"number":e=a.toKey(e)}return t=s.cloneDeep(t),function(r){const a=i.get(r,e);return void 0===a?o.has(r,e):void 0===t?void 0===a:n.isMatch(a,t)}}},4195:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},4414:(e,t,r)=>{"use strict";e.exports=r(3916)},4441:function(e,t,r){var n;!function(){"use strict";var a,s=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,h=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,m=9007199254740991,g=u(1286742750677284.5),v={};function b(e,t){var r,n,a,s,i,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),o?E(t,h):t;if(c=e.d,d=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a){for(s<0?(n=c,s=-s,l=d.length):(n=d,a=i,l=c.length),s>(l=(i=Math.ceil(h/7))>l?i+1:l+1)&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((l=c.length)-(s=d.length)<0&&(s=l,n=d,d=c,c=n),r=0;s;)r=(c[--s]=c[s]+d[s]+r)/p|0,c[s]%=p;for(r&&(c.unshift(r),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?E(t,h):t}function x(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function y(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(s+=S(r)),s+=n;(r=7-(n=(i=e[t])+"").length)&&(s+=S(r))}else if(0===i)return"0";for(;i%10===0;)i/=10;return s+i}v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},v.comparedTo=v.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(a=e.d.length)?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1},v.decimalPlaces=v.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},v.dividedBy=v.div=function(e){return w(this,new this.constructor(e))},v.dividedToIntegerBy=v.idiv=function(e){var t=this.constructor;return E(w(this,new t(e),0,1),t.precision)},v.equals=v.eq=function(e){return!this.cmp(e)},v.exponent=function(){return N(this)},v.greaterThan=v.gt=function(e){return this.cmp(e)>0},v.greaterThanOrEqualTo=v.gte=function(e){return this.cmp(e)>=0},v.isInteger=v.isint=function(){return this.e>this.d.length-2},v.isNegative=v.isneg=function(){return this.s<0},v.isPositive=v.ispos=function(){return this.s>0},v.isZero=function(){return 0===this.s},v.lessThan=v.lt=function(e){return this.cmp(e)<0},v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1},v.logarithm=v.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(a))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(a)?new n(0):(o=!1,t=w(k(r,i),k(e,i),i),o=!0,E(t,s))},v.minus=v.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?C(t,e):b(t,(e.s=-e.s,e))},v.modulo=v.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(o=!1,t=w(r,e,0,1).times(e),o=!0,r.minus(t)):E(new n(r),a)},v.naturalExponential=v.exp=function(){return j(this)},v.naturalLogarithm=v.ln=function(){return k(this)},v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},v.plus=v.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?b(t,e):C(t,(e.s=-e.s,e))},v.precision=v.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},v.squareRoot=v.sqrt=function(){var e,t,r,n,a,s,i,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=y(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),n=new d(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new d(a.toString()),a=i=(r=d.precision)+3;;)if(n=(s=n).plus(w(c,s,i+2)).times(.5),y(s.d).slice(0,i)===(t=y(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(E(s,r+1,0),s.times(s).eq(c)){n=s;break}}else if("9999"!=t)break;i+=4}return o=!0,E(n,r)},v.times=v.mul=function(e){var t,r,n,a,s,i,l,c,d,u=this,h=u.constructor,f=u.d,m=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,(c=f.length)<(d=m.length)&&(s=f,f=m,m=s,i=c,c=d,d=i),s=[],n=i=c+d;n--;)s.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*f[a-n-1]+t,s[a--]=l%p|0,t=l/p|0;s[a]=(s[a]+t)%p|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,o?E(e,h.precision):e},v.toDecimalPlaces=v.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(x(e,0,s),void 0===t?t=n.rounding:x(t,0,8),E(r,e+N(r)+1,t))},v.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=T(n,!0):(x(e,0,s),void 0===t?t=a.rounding:x(t,0,8),r=T(n=E(new a(n),e+1,t),!0,e+1)),r},v.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return void 0===e?T(a):(x(e,0,s),void 0===t?t=i.rounding:x(t,0,8),r=T((n=E(new i(a),e+N(a)+1,t)).abs(),!1,e+N(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},v.toInteger=v.toint=function(){var e=this,t=e.constructor;return E(new t(e),N(e)+1,t.rounding)},v.toNumber=function(){return+this},v.toPower=v.pow=function(e){var t,r,n,s,i,c,d=this,h=d.constructor,f=+(e=new h(e));if(!e.s)return new h(a);if(!(d=new h(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(a))return d;if(n=h.precision,e.eq(a))return E(d,n);if(c=(t=e.e)>=(r=e.d.length-1),i=d.s,c){if((r=f<0?-f:f)<=m){for(s=new h(a),t=Math.ceil(n/7+4),o=!1;r%2&&P((s=s.times(d)).d,t),0!==(r=u(r/2));)P((d=d.times(d)).d,t);return o=!0,e.s<0?new h(a).div(s):E(s,n)}}else if(i<0)throw Error(l+"NaN");return i=i<0&&1&e.d[Math.max(t,r)]?-1:1,d.s=1,o=!1,s=e.times(k(d,n+12)),o=!0,(s=j(s)).s=i,s},v.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return void 0===e?n=T(a,(r=N(a))<=i.toExpNeg||r>=i.toExpPos):(x(e,1,s),void 0===t?t=i.rounding:x(t,0,8),n=T(a=E(new i(a),e,t),e<=(r=N(a))||r<=i.toExpNeg,e)),n},v.toSignificantDigits=v.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(x(e,1,s),void 0===t?t=r.rounding:x(t,0,8)),E(new r(this),e,t)},v.toString=v.valueOf=v.val=v.toJSON=function(){var e=this,t=N(e),r=e.constructor;return T(e,t<=r.toExpNeg||t>=r.toExpPos)};var w=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%p|0,n=r/p|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,s;if(r!=n)s=r>n?1:-1;else for(a=s=0;a<r;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*p+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,s,i){var o,c,d,u,h,f,m,g,v,b,x,y,w,j,_,S,k,A,C=n.constructor,T=n.s==a.s?1:-1,P=n.d,D=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(l+"Division by zero");for(c=n.e-a.e,k=D.length,_=P.length,g=(m=new C(T)).d=[],d=0;D[d]==(P[d]||0);)++d;if(D[d]>(P[d]||0)&&--c,(y=null==s?s=C.precision:i?s+(N(n)-N(a))+1:s)<0)return new C(0);if(y=y/7+2|0,d=0,1==k)for(u=0,D=D[0],y++;(d<_||u)&&y--;d++)w=u*p+(P[d]||0),g[d]=w/D|0,u=w%D|0;else{for((u=p/(D[0]+1)|0)>1&&(D=e(D,u),P=e(P,u),k=D.length,_=P.length),j=k,b=(v=P.slice(0,k)).length;b<k;)v[b++]=0;(A=D.slice()).unshift(0),S=D[0],D[1]>=p/2&&++S;do{u=0,(o=t(D,v,k,b))<0?(x=v[0],k!=b&&(x=x*p+(v[1]||0)),(u=x/S|0)>1?(u>=p&&(u=p-1),1==(o=t(h=e(D,u),v,f=h.length,b=v.length))&&(u--,r(h,k<f?A:D,f))):(0==u&&(o=u=1),h=D.slice()),(f=h.length)<b&&h.unshift(0),r(v,h,b),-1==o&&(o=t(D,v,k,b=v.length))<1&&(u++,r(v,k<b?A:D,b)),b=v.length):0===o&&(u++,v=[0]),g[d++]=u,o&&v[0]?v[b++]=P[j]||0:(v=[P[j]],b=1)}while((j++<_||void 0!==v[0])&&y--)}return g[0]||g.shift(),m.e=c,E(m,i?s+N(m)+1:s)}}();function j(e,t){var r,n,s,i,l,c=0,u=0,f=e.constructor,p=f.precision;if(N(e)>16)throw Error(d+N(e));if(!e.s)return new f(a);for(null==t?(o=!1,l=p):l=t,i=new f(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(l+=Math.log(h(2,u))/Math.LN10*2+5|0,r=n=s=new f(a),f.precision=l;;){if(n=E(n.times(e),l),r=r.times(++c),y((i=s.plus(w(n,r,l))).d).slice(0,l)===y(s.d).slice(0,l)){for(;u--;)s=E(s.times(s),l);return f.precision=p,null==t?(o=!0,E(s,p)):s}s=i}}function N(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function _(e,t,r){if(t>e.LN10.sd())throw o=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return E(new e(e.LN10),t)}function S(e){for(var t="";e--;)t+="0";return t}function k(e,t){var r,n,s,i,c,d,u,h,f,p=1,m=e,g=m.d,v=m.constructor,b=v.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(a))return new v(0);if(null==t?(o=!1,h=b):h=t,m.eq(10))return null==t&&(o=!0),_(v,h);if(h+=10,v.precision=h,n=(r=y(g)).charAt(0),i=N(m),!(Math.abs(i)<15e14))return u=_(v,h+2,b).times(i+""),m=k(new v(n+"."+r.slice(1)),h-10).plus(u),v.precision=b,null==t?(o=!0,E(m,b)):m;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=y((m=m.times(e)).d)).charAt(0),p++;for(i=N(m),n>1?(m=new v("0."+r),i++):m=new v(n+"."+r.slice(1)),d=c=m=w(m.minus(a),m.plus(a),h),f=E(m.times(m),h),s=3;;){if(c=E(c.times(f),h),y((u=d.plus(w(c,new v(s),h))).d).slice(0,h)===y(d.d).slice(0,h))return d=d.times(2),0!==i&&(d=d.plus(_(v,h+2,b).times(i+""))),d=w(d,new v(p),h),v.precision=b,null==t?(o=!0,E(d,b)):d;d=u,s+=2}}function A(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=u(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(d+r)}else e.s=0,e.e=0,e.d=[0];return e}function E(e,t,r){var n,a,s,i,l,c,f,m,v=e.d;for(i=1,s=v[0];s>=10;s/=10)i++;if((n=t-i)<0)n+=7,a=t,f=v[m=0];else{if((m=Math.ceil((n+1)/7))>=(s=v.length))return e;for(f=s=v[m],i=1;s>=10;s/=10)i++;a=(n%=7)-7+i}if(void 0!==r&&(l=f/(s=h(10,i-a-1))%10|0,c=t<0||void 0!==v[m+1]||f%s,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?a>0?f/h(10,i-a):0:v[m-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return c?(s=N(e),v.length=1,t=t-s-1,v[0]=h(10,(7-t%7)%7),e.e=u(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==n?(v.length=m,s=1,m--):(v.length=m+1,s=h(10,7-n),v[m]=a>0?(f/h(10,i-a)%h(10,a)|0)*s:0),c)for(;;){if(0==m){(v[0]+=s)==p&&(v[0]=1,++e.e);break}if(v[m]+=s,v[m]!=p)break;v[m--]=0,s=1}for(n=v.length;0===v[--n];)v.pop();if(o&&(e.e>g||e.e<-g))throw Error(d+N(e));return e}function C(e,t){var r,n,a,s,i,l,c,d,u,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),o?E(t,m):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),i=d-n){for((u=i<0)?(r=c,i=-i,l=h.length):(r=h,n=d,l=c.length),i>(a=Math.max(Math.ceil(m/7),l)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((u=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}i=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>i;){if(c[--a]<h[a]){for(s=a;s&&0===c[--s];)c[s]=p-1;--c[s],c[a]+=p}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,o?E(t,m):t):new f(0)}function T(e,t,r){var n,a=N(e),s=y(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+S(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+S(-a-1)+s,r&&(n=r-i)>0&&(s+=S(n))):a>=i?(s+=S(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+S(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=S(n))),e.s<0?"-"+s:s}function P(e,t){if(e.length>t)return e.length=t,!0}function D(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,r,n,a=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(u(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}i=function e(t){var r,n,a;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):A(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);A(t,e)}if(s.prototype=v,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=D,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return s.config(t),s}(i),i.default=i.Decimal=i,a=new i(1),void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},4621:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>s,fetch:()=>a});var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const a=n.fetch,s=n.fetch.bind(n),i=n.Headers,o=n.Request,l=n.Response},4879:(e,t,r)=>{e.exports=r(8146).get},4980:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(2284);function a(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=(0,n.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}function s(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},5031:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6301),a=r(1083);t.toPath=function(e){if(Array.isArray(e))return e.map(a.toKey);if("symbol"===typeof e)return[e];const t=[],r=(e=n.toString(e)).length;if(0===r)return t;let s=0,i="",o="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),s++);s<r;){const n=e[s];o?"\\"===n&&s+1<r?(s++,i+=e[s]):n===o?o="":i+=n:l?'"'===n||"'"===n?o=n:"]"===n?(l=!1,t.push(i),i=""):i+=n:"["===n?(l=!0,i&&(t.push(i),i="")):"."===n?i&&(t.push(i),i=""):i+=n,s++}return i&&t.push(i),t}},5071:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(47)),s=n(r(4011));class i{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:n=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(o="POST",c=t);const d=new Headers(this.headers);return a&&d.set("Prefer","count=".concat(a)),new s.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},5230:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9223);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===n.getTag(e)}},5340:(e,t,r)=>{"use strict";e.exports=r(9487)},5399:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1311);t.isMatch=function(e,t){return n.isMatchWith(e,t,()=>{})}},5497:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9363),a=r(8897),s=r(2718);t.sortBy=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const o=r.length;return o>1&&s.isIterateeCall(e,r[0],r[1])?r=[]:o>2&&s.isIterateeCall(r[0],r[1],r[2])&&(r=[r[0]]),n.orderBy(e,a.flatten(r),["asc"])}},5573:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6537);t.cloneDeep=function(e){return n.cloneDeepWith(e)}},5698:(e,t)=>{"use strict";function r(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,n)=>{if(e!==t){const a=r(e),s=r(t);if(a===s&&0===a){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?s-a:a-s}return 0}},5732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},5825:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8146);t.property=function(e){return function(t){return n.get(t,e)}}},5942:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1098),a=r(7431),s=r(5230),i=r(5031);t.has=function(e,t){let r;if(r=Array.isArray(t)?t:"string"===typeof t&&n.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?i.toPath(t):[t],0===r.length)return!1;let o=e;for(let n=0;n<r.length;n++){const e=r[n];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||s.isArguments(o))&&a.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}},6135:(e,t,r)=>{e.exports=r(6633).throttle},6150:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new a(n,s||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,i=new Array(s);a<s;a++)i[a]=n[a].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,s,i){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,s),!0;case 6:return d.fn.call(d.context,t,n,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,f=d.length;for(c=0;c<f;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},6301:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}},6429:(e,t,r)=>{"use strict";e.exports=r(8577)},6537:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9690),a=r(3470);t.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,s,i,o)=>{const l=null===t||void 0===t?void 0:t(r,s,i,o);if(void 0!==l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case a.numberTag:case a.stringTag:case a.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return n.copyProperties(t,e),t}case a.argumentsTag:{const t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},6538:(e,t,r)=>{"use strict";e.exports=r(759)},6567:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1921);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=n.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},6569:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(4621)),s=n(r(5732));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n,a;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const a=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),s=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");a&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null===i||void 0===i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:"")},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},6633:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2742);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:a=!0,trailing:s=!0}=r;return n.debounce(e,t,{leading:a,maxWait:t,trailing:s})}},6667:(e,t,r)=>{e.exports=r(6928).last},6907:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let r,{signal:n,edges:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null;const i=null!=a&&a.includes("leading"),o=null==a||a.includes("trailing"),l=()=>{null!==s&&(e.apply(r,s),r=void 0,s=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),r=void 0,s=null},h=function(){if(null!==n&&void 0!==n&&n.aborted)return;r=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];s=t;const o=null==c;d(),i&&o&&l()};return h.schedule=d,h.cancel=u,h.flush=()=>{l()},null===n||void 0===n||n.addEventListener("abort",u,{once:!0}),h}},6928:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1047),a=r(225),s=r(7740);t.last=function(e){if(s.isArrayLike(e))return n.last(a.toArray(e))}},7108:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},7119:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(1863)},7254:(e,t,r)=>{"use strict";var n=r(9950);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=n.useSyncExternalStore,i=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue},7256:(e,t,r)=>{"use strict";r(7254)},7384:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(11),a=r(1810),s=r(3787),i=r(1640);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return s.isArrayLikeObject(e)?n.uniqBy(Array.from(e),i.iteratee(t)):[]}},7427:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(6569));class s extends a.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?"".concat(a,".order"):"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof n?"offset":"".concat(n,".offset"),s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=s},7431:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},7736:(e,t,r)=>{var n=r(3738).default,a=r(9045);e.exports=function(e){var t=a(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7740:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1111);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&n.isLength(e.length)}},7774:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2718),a=r(6567);t.range=function(e,t,r){r&&"number"!==typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=a.toFinite(e),void 0===t?(t=e,e=0):t=a.toFinite(t),r=void 0===r?e<t?1:-1:a.toFinite(r);const s=Math.max(Math.ceil((t-e)/(r||1)),0),i=new Array(s);for(let n=0;n<s;n++)i[n]=e,e+=r;return i}},8146:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4195),a=r(1098),s=r(1083),i=r(5031);t.get=function e(t,r,o){if(null==t)return o;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return o;const s=t[r];return void 0===s?a.isDeepKey(r)?e(t,i.toPath(r),o):o:s}case"number":case"symbol":{"number"===typeof r&&(r=s.toKey(r));const e=t[r];return void 0===e?o:e}default:{var l;if(Array.isArray(r))return function(e,t,r){if(0===t.length)return r;let a=e;for(let s=0;s<t.length;s++){if(null==a)return r;if(n.isUnsafeProperty(t[s]))return r;a=a[t[s]]}if(void 0===a)return r;return a}(t,r,o);if(r=Object.is(null===(l=r)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return o;const e=t[r];return void 0===e?o:e}}}},8316:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},8354:(e,t,r)=>{e.exports=r(7774).range},8577:(e,t)=>{"use strict";var r=60103,n=60106,a=60107,s=60108,i=60114,o=60109,l=60110,c=60112,d=60113,u=60120,h=60115,f=60116,p=60121,m=60122,g=60117,v=60129,b=60131;if("function"===typeof Symbol&&Symbol.for){var x=Symbol.for;r=x("react.element"),n=x("react.portal"),a=x("react.fragment"),s=x("react.strict_mode"),i=x("react.profiler"),o=x("react.provider"),l=x("react.context"),c=x("react.forward_ref"),d=x("react.suspense"),u=x("react.suspense_list"),h=x("react.memo"),f=x("react.lazy"),p=x("react.block"),m=x("react.server.block"),g=x("react.fundamental"),v=x("react.debug_trace_mode"),b=x("react.legacy_hidden")}function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case i:case s:case d:case u:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case h:case o:return e;default:return t}}case n:return t}}}t.isFragment=function(e){return y(e)===a}},8897:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=[],n=Math.floor(t),a=(e,t)=>{for(let s=0;s<e.length;s++){const i=e[s];Array.isArray(i)&&t<n?a(i,t+1):r.push(i)}};return a(e,0),r}},9045:(e,t,r)=>{var n=r(3738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9115:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},9190:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},9223:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},9358:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9690);t.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},9363:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5698),a=r(9696),s=r(5031);t.orderBy=function(e,t,r,i){if(null==e)return[];r=i?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));const o=(e,t)=>{let r=e;for(let n=0;n<t.length&&null!=r;++n)r=r[t[n]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||a.isKey(e)?e:{key:e,path:s.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?o(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let a=0;a<l.length;a++){const s=n.compareValues(e.criteria[a],t.criteria[a],r[a]);if(0!==s)return s}return 0}).map(e=>e.original)}},9379:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(4980);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},9487:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,b="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function j(e){if(g=!1,w(e),!m)if(null!==n(c))m=!0,_||(_=!0,N());else{var t=n(d);null!==t&&D(j,t.startTime-e)}}var N,_=!1,S=-1,k=5,A=-1;function E(){return!!v||!(t.unstable_now()-A<k)}function C(){if(v=!1,_){var e=t.unstable_now();A=e;var r=!0;try{e:{m=!1,g&&(g=!1,x(S),S=-1),p=!0;var s=f;try{t:{for(w(e),h=n(c);null!==h&&!(h.expirationTime>e&&E());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),r=!0;break t}h===n(c)&&a(c),w(e)}else a(c);h=n(c)}if(null!==h)r=!0;else{var l=n(d);null!==l&&D(j,l.startTime-e),r=!1}}break e}finally{h=null,f=s,p=!1}r=void 0}}finally{r?N():_=!1}}}if("function"===typeof y)N=function(){y(C)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,P=T.port2;T.port1.onmessage=C,N=function(){P.postMessage(null)}}else N=function(){b(C,0)};function D(e,r){S=b(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(g?(x(S),S=-1):g=!0,D(j,s-i))):(e.sortIndex=o,r(c,e),m||p||(m=!0,_||(_=!0,N()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},9690:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9190),a=r(9223),s=r(3470),i=r(1214),o=r(1558);function l(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u=null===d||void 0===d?void 0:d(e,t,r,n);if(void 0!==u)return u;if(i.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[a,s]of e)t.set(a,l(s,a,r,n,d));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const a of e)t.add(l(a,void 0,r,n,d));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,d);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,r,n,d),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Number){const t=new Number(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof String){const t=new String(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if("object"===typeof e&&function(e){switch(a.getTag(e)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),c(t,e,r,n,d),t}return e}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const i=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<i.length;n++){const o=i[n],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=l(t[o],o,r,a,s))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},9696:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7108),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!n.isSymbol(e))||("string"===typeof e&&(s.test(e)||!a.test(e))||null!=t&&Object.hasOwn(t,e)))}},9874:(e,t,r)=>{"use strict";r.d(t,{default:()=>Qt});var n=r(9379);class a extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class s extends a{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i extends a{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o extends a{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var l;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(l||(l={}));var c=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class d{constructor(e){let{headers:t={},customFetch:n,region:a=l.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return c(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL("".concat(this.url,"/").concat(e));let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),n),body:h}).catch(e=>{throw new s(e)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new i(f);if(!f.ok)throw new o(f);let m,g=(null!==(r=f.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return m="application/json"===g?yield f.json():"application/octet-stream"===g?yield f.blob():"text/event-stream"===g?f:"multipart/form-data"===g?yield f.formData():yield f.text(),{data:m,error:null,response:f}}catch(n){return{data:null,error:n,response:n instanceof o||n instanceof i?n.context:void 0}}})}}var u=r(1053);const{PostgrestClient:h,PostgrestQueryBuilder:f,PostgrestFilterBuilder:p,PostgrestTransformBuilder:m,PostgrestBuilder:g,PostgrestError:v}=u;const b=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(r," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(r," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},x="realtime-js/".concat("2.15.5"),y=1e4;var w,j,N,_,S,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(w||(w={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(j||(j={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(N||(N={})),function(e){e.websocket="websocket"}(_||(_={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(S||(S={}));class A{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=r.decode(e.slice(s,s+n));s+=n;const o=r.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class E{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const C=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,a)=>(r[a]=T(a,e,t,n),r),{})},T=(e,t,r,n)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,i=r[e];return s&&!n.includes(s)?P(s,i):D(i)},P=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return R(t,r)}switch(e){case k.bool:return O(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return I(t);case k.json:case k.jsonb:return M(t);case k.timestamp:return L(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return D(t)}},D=e=>e,O=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},I=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},M=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},R=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(a){n=s?s.split(","):[]}return n.map(e=>P(t,e))}return e},L=e=>"string"===typeof e?e.replace(" ","T"):e,F=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class B{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var z,U,q,W;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(z||(z={}));class H{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=H.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=H.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=H.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const r=a[e];if(r){const n=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let a=e[t];if(!a)return;const s=r.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(U||(U={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(q||(q={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(W||(W={}));class V{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=j.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new B(this,N.join,this.params,this.timeout),this.rejoinTimer=new E(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=j.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=j.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this._on(N.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new H(this),this.broadcastEndpointURL=F(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==j.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[q.PRESENCE]&&this.bindings[q.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),d={},u={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(W.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(W.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var n;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,a=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=t[n],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=r&&r[n];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=j.errored,void(null===e||void 0===e||e(W.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=s,void(e&&e(W.SUBSCRIBED))}null===e||void 0===e||e(W.SUBSCRIBED)}).receive("error",t=>{this.state=j.errored,null===e||void 0===e||e(W.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(W.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===j.joined&&e===q.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=j.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(N.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new B(this,N.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=j.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),s}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let n=new B(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=N;if(r&&[i,o,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let d=this._onMessage(s,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(d,r)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var r,n,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:n,type:a,errors:s}=e,i={schema:t,table:r,commit_timestamp:n,eventType:a,new:{},old:{},errors:s};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===j.closed}_isJoined(){return this.state===j.joined}_isJoining(){return this.state===j.joining}_isLeaving(){return this.state===j.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&V.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(N.close,{},e)}_onError(e){this._on(N.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=j.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=C(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=C(e.columns,e.old_record)),t}}const G=()=>{},K=25e3,$=10,Y=100,X=[1e3,2e3,5e3,1e4];class J{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=y,this.transport=null,this.heartbeatIntervalMs=K,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=G,this.ref=0,this.reconnectTimer=null,this.logger=G,this.conn=null,this.sendBuffer=[],this.serializer=new A,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(_.websocket),this.httpEndpoint=F(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=b.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case w.connecting:return S.Connecting;case w.open:return S.Open;case w.closing:return S.Closing;default:return S.Closed}}isConnected(){return this.connectionState()===S.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new V("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(a,")"),n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Y)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:a}=e,s=a?"(".concat(a,")"):"",i=n.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(r," ").concat(s).trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(N.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:x};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(N.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error","error in ".concat(e," callback"),n)}})}catch(r){this.log("error","error triggering ".concat(e," callbacks"),r)}}_setupReconnectionTimer(){this.reconnectTimer=new E(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,a,s,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:y,this.heartbeatIntervalMs=null!==(n=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:K,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:G,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>X[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Z extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Q(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class ee extends Z{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class te extends Z{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var re=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ne=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},ae=e=>{if(Array.isArray(e))return e.map(e=>ae(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,n]=e;const a=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=ae(n)}),t};var se=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ie=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oe=(e,t,n)=>se(void 0,void 0,void 0,function*(){const a=yield re(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,4621))).Response:Response});e instanceof a&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then(r=>{const n=e.status||500,a=(null===r||void 0===r?void 0:r.statusCode)||n+"";t(new ee(ie(r),n,a))}).catch(e=>{t(new te(ie(e),e))}):t(new te(ie(e),e))}),le=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function ce(e,t,r,n,a,s){return se(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,le(t,n,a,s)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>oe(e,o,n))})})}function de(e,t,r,n){return se(this,void 0,void 0,function*(){return ce(e,"GET",t,r,n)})}function ue(e,t,r,n,a){return se(this,void 0,void 0,function*(){return ce(e,"POST",t,n,a,r)})}function he(e,t,r,n,a){return se(this,void 0,void 0,function*(){return ce(e,"PUT",t,n,a,r)})}function fe(e,t,r,n,a){return se(this,void 0,void 0,function*(){return ce(e,"DELETE",t,n,a,r)})}var pe=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const me={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=ne(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return pe(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},ge),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=r,i["cache-control"]="max-age=".concat(s.cacheControl),i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===n||void 0===n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?he:ue)(this.fetch,"".concat(this.url,"/object/").concat(c),a,Object.assign({headers:i},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Q(a))return{data:null,error:a};throw a}})}upload(e,t,r){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return pe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+"/object/upload/sign/".concat(s));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ge.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield he(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Q(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return pe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const a=yield ue(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(r),{},{headers:n}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new Z("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}update(e,t,r){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return pe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Q(n))return{data:null,error:n};throw n}})}copy(e,t,r){return pe(this,void 0,void 0,function*(){try{return{data:{path:(yield ue(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Q(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(n),Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(s))},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Q(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return pe(this,void 0,void 0,function*(){try{const n=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Q(n))return{data:null,error:n};throw n}})}download(e,t){return pe(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=n?"?".concat(n):"";try{const t=this._getFinalPath(e),n=yield de(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(t).concat(a),{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Q(s))return{data:null,error:s};throw s}})}info(e){return pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield de(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:ae(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}exists(e){return pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return se(this,void 0,void 0,function*(){return ce(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r)&&r instanceof te){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&n.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(r).concat(o))}}}remove(e){return pe(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}list(e,t,r){return pe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},me),t),{prefix:e||""});return{data:yield ue(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Q(n))return{data:null,error:n};throw n}})}listV2(e,t){return pe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ue(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const be={"X-Client-Info":"storage-js/".concat("2.12.1")};var xe=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class ye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const a=new URL(e);if(null===n||void 0===n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},be),t),this.fetch=ne(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return xe(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Q(e))return{data:null,error:e};throw e}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return xe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return xe(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}}class we extends ye{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ve(this.url,this.headers,e,this.fetch)}}let je="";je="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ne={headers:{"X-Client-Info":"supabase-js-".concat(je,"/").concat("2.57.4")}},_e={schema:"public"},Se={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ke={};var Ae=r(4621),Ee=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Ce=e=>{let t;return t=e||("undefined"===typeof fetch?Ae.default:fetch),function(){return t(...arguments)}},Te=(e,t,r)=>{const n=Ce(r),a="undefined"===typeof Headers?Ae.Headers:Headers;return(r,s)=>Ee(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),n(r,Object.assign(Object.assign({},s),{headers:l}))})};var Pe=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const De="2.71.1",Oe=3e4,Ie=9e4,Me={"X-Client-Info":"gotrue-js/".concat(De)},Re="X-Supabase-Api-Version",Le={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Fe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Be extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ze(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ue extends Be{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class qe extends Be{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class We extends Be{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class He extends We{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ve extends We{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ge extends We{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ke extends We{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $e extends We{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ye extends We{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Xe(e){return ze(e)&&"AuthRetryableFetchError"===e.name}class Je extends We{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ze extends We{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),et=" \t\n\r=".split(""),tt=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<et.length;t+=1)e[et[t].charCodeAt(0)]=-2;for(let t=0;t<Qe.length;t+=1)e[Qe[t].charCodeAt(0)]=t;return e})();function rt(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Qe[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Qe[e]),t.queuedBits-=6}}function nt(e,t,r){const n=tt[e];if(!(n>-1)){if(-2===n)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function at(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)nt(e.charCodeAt(i),a,s);return t.join("")}function st(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function it(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}st(n,t)}}function ot(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)nt(e.charCodeAt(a),r,n);return new Uint8Array(t)}function lt(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>rt(e,r,n)),rt(null,r,n),t.join("")}const ct=()=>"undefined"!==typeof window&&"undefined"!==typeof document,dt={tested:!1,writable:!1},ut=()=>{if(!ct())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(dt.tested)return dt.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),dt.tested=!0,dt.writable=!0}catch(t){dt.tested=!0,dt.writable=!1}return dt.writable};const ht=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},ft=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},pt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},mt=async(e,t)=>{await e.removeItem(t)};class gt{constructor(){this.promise=new gt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function vt(e){const t=e.split(".");if(3!==t.length)throw new Ze("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Fe.test(t[r]))throw new Ze("JWT not in base64url format");return{header:JSON.parse(at(t[0])),payload:JSON.parse(at(t[1])),signature:ot(t[2]),raw:{header:t[0],payload:t[1]}}}function bt(e){return("0"+e.toString(16)).substr(-2)}async function xt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,bt).join("")}();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await ft(e,"".concat(t,"-code-verifier"),a);const s=await xt(n);return[s,n===s?"plain":"s256"]}gt.promiseConstructor=Promise;const wt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const jt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nt(e){if(!jt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _t(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function St(e){return JSON.parse(JSON.stringify(e))}var kt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};const At=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Et=[502,503,504];async function Ct(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Ye(At(e),0);if(Et.includes(e.status))throw new Ye(At(e),e.status);let n,a;try{n=await e.json()}catch(i){throw new qe(At(i),i)}const s=function(e){const t=e.headers.get(Re);if(!t)return null;if(!t.match(wt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(s&&s.getTime()>=Le.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?a=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new Je(At(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new He}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Je(At(n),e.status,n.weak_password.reasons);throw new Ue(At(n),e.status||500,a)}async function Tt(e,t,r,n){var a;const s=Object.assign({},null===n||void 0===n?void 0:n.headers);s[Re]||(s[Re]=Le.name),(null===n||void 0===n?void 0:n.jwt)&&(s.Authorization="Bearer ".concat(n.jwt));const i=null!==(a=null===n||void 0===n?void 0:n.query)&&void 0!==a?a:{};(null===n||void 0===n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,a,s){const i=((e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))})(t,n,a,s);let o;try{o=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new Ye(At(l),0)}o.ok||await Ct(o);if(null===n||void 0===n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(l){await Ct(l)}}(e,t,r+o,{headers:s,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function Pt(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Dt(e){const t=Pt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function It(e){return{data:e,error:null}}function Mt(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,i=kt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function Rt(e){return e}const Lt=["global","local","others"];var Ft=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};class Bt{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=ht(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt[0];if(Lt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Lt.join(", ")));try{return await Tt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Tt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ot})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Ft(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await Tt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:n,headers:this.headers,xform:Mt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(ze(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Tt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Ot})}catch(t){if(ze(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Tt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:Rt});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ze(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Nt(e);try{return await Tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Ot})}catch(t){if(ze(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Nt(e);try{return await Tt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Ot})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Nt(e);try{return await Tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Ot})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Nt(e.userId);try{const{data:t,error:r}=await Tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Nt(e.userId),Nt(e.id);try{return{data:await Tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(ze(t))return{data:null,error:t};throw t}}}function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ut=!!(globalThis&&ut()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class qt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wt extends qt{}async function Ht(e,t,r){Ut&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ut&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw Ut&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wt('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Ut)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Ut&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Ut&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Vt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Me,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gt(e,t,r){return await r()}const Kt={};class $t{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$t.nextInstanceID,$t.nextInstanceID+=1,this.instanceID>0&&ct()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Vt),e);if(this.logDebugMessages=!!n.debug,"function"===typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Bt({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ht(n.fetch),this.lock=n.lock||Gt,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ct()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Ht:this.lock=Gt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:ut()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zt(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=zt(this.memoryStorage)),ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Kt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Kt[this.storageKey]=Object.assign(Object.assign({},Kt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Kt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kt[this.storageKey]=Object.assign(Object.assign({},Kt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(De,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(n){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ct()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return ze(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ze(t)?{error:t}:{error:new qe("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const a=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Pt}),{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,n;try{let a;if("email"in e){const{email:r,password:n,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await yt(this.storage,this.storageKey)),a=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:Pt})}else{if(!("phone"in e))throw new Ge("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await Tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null===i||void 0===i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Pt})}}const{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:a}=e;t=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Dt})}else{if(!("phone"in e))throw new Ge("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:a}=e;t=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Dt})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Ve}}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,r,n,a,s,i,o,l,c,d,u,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:m,options:g}=e;let v;if(ct())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const b=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(b.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(b.href),"Issued At: ".concat(null!==(n=null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:lt(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Pt});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Ve}}catch(m){if(ze(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await pt(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pt});if(await mt(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Ve}}catch(a){if(ze(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:a,nonce:s}=e,i=await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Pt}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ve}}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,a,s;try{if("email"in e){const{email:n,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await yt(this.storage,this.storageKey));const{error:o}=await Tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await Tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(s=null===r||void 0===r?void 0:r.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Ge("You must provide either an email or phone number.")}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:i}=await Tt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Pt});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let a=null,s=null;return"pkce"===this.flowType&&([a,s]=await yt(this.storage,this.storageKey)),await Tt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:It})}catch(a){if(ze(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new He;const{error:n}=await Tt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:n,options:a}=e,{error:s}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:r,type:n,options:a}=e,{data:s,error:i}=await Tt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i}}throw new Ge("You must provide either an email or phone number and a type")}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await pt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ie;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.userStorage){const t=await pt(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=_t()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async e=>{var t,r,n;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Ot}):{data:{user:null},error:new He}})}catch(t){if(ze(t))return function(e){return ze(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await mt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new He;const s=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await yt(this.storage,this.storageKey));const{data:l,error:c}=await Tt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:Ot});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new He;const t=Date.now()/1e3;let r=t,n=!0,a=null;const{payload:s}=vt(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(ze(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new He;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ct())throw new Ke("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ke(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new $e("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ke("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $e("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!a||!i||!s||!l)throw new Ke("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Oe&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const f=u-d;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,c);const{data:p,error:m}=await this._getUser(a);if(m)throw m;const g={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:u,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(ze(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await pt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return{error:a};const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return ze(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await mt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(a){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await yt(this.storage,this.storageKey,!0));try{return await Tt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(ze(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(ze(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Tt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return ct()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(ze(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)throw s;return await Tt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Pt})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&Xe(t)&&Date.now()+r-a<Oe},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await r(s);if(!n(s,null,t))return void e(t)}catch(a){if(!n(s,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),ze(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ct()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await pt(this.storage,this.storageKey);if(a&&this.userStorage){let t=await pt(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await ft(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:_t()}else if(a&&!a.user&&!a.user){const e=await pt(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await mt(this.storage,this.storageKey+"-user"),await ft(this.storage,this.storageKey,a)):a.user=_t()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<Ie;if(this._debug(r,"session has".concat(s?"":" not"," expired with margin of ").concat(Ie,"s")),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Xe(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(r,"error",a),void console.error(a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new He;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{this.refreshingDeferred=new gt;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new He;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),ze(a)){const e={session:null,error:a};return Xe(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n="#_notifyAllSubscribers(".concat(e,")");this._debug(n,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(a){n.push(a)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ft(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=St(e);await ft(this.storage,this.storageKey,n)}else{const e=St(t);await ft(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await mt(this.storage,this.storageKey),await mt(this.storage,this.storageKey+"-code-verifier"),await mt(this.storage,this.storageKey+"-user"),this.userStorage&&await mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ct()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oe);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-t)/Oe);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(n," ticks, a tick lasts ").concat(Oe,"ms, refresh threshold is ").concat(3," ticks")),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof qt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ct()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&n.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await yt(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(n.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?{data:null,error:a}:await Tt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)return{data:null,error:s};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Tt(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null===o||void 0===o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:i}=await Tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:i})})}catch(t){if(ze(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?{data:null,error:a}:await Tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(ze(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=vt(n.access_token);let i=null;s.aal&&(i=s.aal);let o=i;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:n,error:a}=await Tt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,t=n.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:n,payload:a,signature:s,raw:{header:i,payload:o}}=vt(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,s,function(e){const t=[];return it(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Ze("Invalid JWT signature");return{data:{claims:a,header:n,signature:s},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}}$t.nextInstanceID=0;const Yt=$t;class Xt extends Yt{constructor(e){super(e)}}var Jt=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class Zt{constructor(e,t,r){var n,a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var r,n;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(n=null===o||void 0===o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:()=>Pe(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:_e,realtime:ke,auth:Object.assign(Object.assign({},Se),{storageKey:o}),global:Ne});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=Te(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new h(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new we(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new d(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Jt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,storageKey:l,flowType:c,lock:d,debug:u}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Xt({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,flowType:c,lock:d,debug:u,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new J(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qt=new class{constructor(){var e;this.supabase=new Zt("https://ogqpsrsssrrytrqoyyph.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncXBzcnNzc3JyeXRycW95eXBoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3Nzc5NjAsImV4cCI6MjA3MzM1Mzk2MH0.EqXjG1iefYMZ84Tw-4po98gBV7uRuPoz0idQgJ03pzg",e),this.currentUser=null,this.organizationId=null,this.isSaving=!1}generateDeterministicId(e,t){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t))return t;const r="".concat(e,"-").concat(t);let n=0;for(let s=0;s<r.length;s++){n=(n<<5)-n+r.charCodeAt(s),n&=n}const a=Math.abs(n).toString(16).padStart(32,"0");return[a.substring(0,8),a.substring(8,12),"4"+a.substring(13,16),"8"+a.substring(17,20),a.substring(20,32)].join("-")}async initialize(){try{console.log("\ud83d\ude80 Inicializando SupabaseService...");const{data:{user:t}}=await this.supabase.auth.getUser();if(this.currentUser=t,t){console.log("\u2705 Usuario autenticado:",t.email);try{console.log("\ud83d\ude80 Iniciando detecci\xf3n de organizaci\xf3n...");const e=await this.detectUserOrganization();e&&e.id?(this.organizationId=e.id,console.log("\u2705 Detecci\xf3n de organizaci\xf3n completada. OrganizationId:",this.organizationId)):(console.log("\u26a0\ufe0f No se pudo detectar organizaci\xf3n autom\xe1ticamente"),this.organizationId=null)}catch(e){console.error("\u274c Error en detecci\xf3n de organizaci\xf3n:",e),this.organizationId=null}}else console.log("\u26a0\ufe0f No hay usuario autenticado"),this.organizationId=null;return!0}catch(e){return console.error("\u274c Error inicializando SupabaseService:",e),!1}}async detectUserOrganization(e){var t;const r=e||(null===(t=this.currentUser)||void 0===t?void 0:t.email);if(!r)return console.log("\u274c No hay usuario para detectar organizaci\xf3n"),null;try{console.log("\ud83d\udd0d Detectando organizaci\xf3n para:",r);const{data:e,error:t}=await this.supabase.from("organization_members").select("\n          id,\n          organization_id,\n          role,\n          status,\n          organizations (\n            id,\n            name,\n            owner_id,\n            created_at\n          )\n        ").eq("user_email",r).eq("status","active").single();if(t)return console.error("\u274c Error buscando membres\xeda:",t),console.error("C\xf3digo de error:",t.code),console.error("Mensaje:",t.message),null;if(!e||!e.organizations)return console.warn("\u26a0\ufe0f No se encontr\xf3 organizaci\xf3n activa para el usuario"),null;const n={id:e.organizations.id,name:e.organizations.name,role:e.role,owner_id:e.organizations.owner_id,membership_id:e.id};return console.log("\u2705 Organizaci\xf3n detectada:",n.name),console.log("\ud83d\udc64 Rol del usuario:",n.role),console.log("\ud83c\udd94 Organization ID:",n.id),this.organizationId=n.id,n}catch(n){return console.error("\u274c Error inesperado detectando organizaci\xf3n:",n),null}}async forceReloadOrganization(){console.log("\ud83d\udd04 Forzando recarga de organizaci\xf3n...");try{this.organizationId=null;["mi-dashboard-portfolio","lastSelectedProjectId","portfolioData","organizationData","userSession"].forEach(e=>{localStorage.getItem(e)&&(console.log("\ud83d\uddd1\ufe0f Limpiando localStorage: ".concat(e)),localStorage.removeItem(e))});["currentUser","userSession","organizationData"].forEach(e=>{sessionStorage.getItem(e)&&(console.log("\ud83d\uddd1\ufe0f Limpiando sessionStorage: ".concat(e)),sessionStorage.removeItem(e))});const e=await this.detectUserOrganization();return console.log("\u2705 Recarga de organizaci\xf3n completada:",e),e}catch(e){return console.error("\u274c Error en forceReloadOrganization:",e),null}}async loadOrganization(){if(!this.currentUser)return null;try{const{data:e,error:t}=await this.supabase.from("organizations").select("id").eq("owner_id",this.currentUser.id).single();return t?(console.error("\u274c Error cargando organizaci\xf3n:",t),null):(this.organizationId=e.id,console.log("\u2705 Organizaci\xf3n detectada autom\xe1ticamente:",this.organizationId),e.id)}catch(e){return console.error("\u274c Error cargando organizaci\xf3n:",e),null}}async activatePendingInvitations(e,t){try{console.log("\ud83d\udd0d Buscando invitaciones pendientes para:",e);const{data:a,error:s}=await this.supabase.from("organization_members").select("*, organizations(id, name)").eq("user_email",e).eq("status","pending");if(s)return void console.error("\u274c Error buscando invitaciones:",s);if(a&&a.length>0){console.log("\u2705 Encontradas ".concat(a.length," invitaciones pendientes"));let e=null;for(const n of a){var r;console.log("\ud83d\udd04 Activando invitaci\xf3n para organizaci\xf3n:",null===(r=n.organizations)||void 0===r?void 0:r.name);const{error:a}=await this.supabase.from("organization_members").update({user_id:t,status:"active",accepted_at:(new Date).toISOString()}).eq("id",n.id);a?console.error("\u274c Error activando invitaci\xf3n:",a):(console.log("\u2705 Invitaci\xf3n activada exitosamente"),e||(e=n.organization_id))}if(e){var n;this.organizationId=e,console.log("\ud83c\udfe2 Organizaci\xf3n primaria configurada:",e);const t=(null===(n=a[0].organizations)||void 0===n?void 0:n.name)||"la organizaci\xf3n";console.log("\ud83c\udf89 \xa1Bienvenido a ".concat(t,"! Has sido agregado autom\xe1ticamente.")),await this.detectUserOrganization()}return{activated:a.length,primaryOrganization:e,organizations:a.map(e=>{var t;return{id:e.organization_id,name:null===(t=e.organizations)||void 0===t?void 0:t.name,role:e.role}})}}return console.log("\u2139\ufe0f No se encontraron invitaciones pendientes para este usuario"),{activated:0}}catch(a){return console.error("\u274c Error activando invitaciones pendientes:",a),{activated:0,error:a.message}}}async signUp(e,t,r){let n=null,a=!1,s=!1;try{console.log("\ud83d\ude80 Iniciando registro de usuario:",e);const{data:c,error:d}=await this.supabase.auth.signUp({email:e,password:t,options:{data:{name:r,role:"user"}}});if(d)throw console.error("\u274c Error en auth.signUp:",d),d;if(!c.user)throw new Error("No se pudo crear el usuario en auth.users");n=c.user,console.log("\u2705 Usuario creado en auth.users:",n.id);try{const{error:e}=await this.supabase.from("users").insert({id:n.id,email:n.email,name:r,role:"user"});if(e){if("23505"!==e.code)throw e;{console.log("\u2139\ufe0f Usuario ya existe en tabla users, verificando...");const{data:e}=await this.supabase.from("users").select("id").eq("id",n.id).single();if(!e)throw new Error("Error de duplicado pero usuario no encontrado");console.log("\u2705 Usuario ya existe en tabla users"),a=!0}}else console.log("\u2705 Usuario creado en tabla users"),a=!0}catch(i){console.error("\u274c Error cr\xedtico creando usuario en tabla users:",i);try{console.log("\ud83d\udd04 Iniciando rollback - eliminando usuario de auth.users..."),await this.supabase.auth.admin.deleteUser(n.id),console.log("\u2705 Rollback completado")}catch(o){console.error("\u274c Error en rollback:",o)}throw new Error("Error creando usuario en tabla users: ".concat(i.message))}try{const{data:e,error:t}=await this.supabase.from("organizations").insert({name:"".concat(r,"'s Organization"),owner_id:n.id}).select("id").single();t?console.warn("\u26a0\ufe0f Error creando organizaci\xf3n:",t):(console.log("\u2705 Organizaci\xf3n creada:",e.id),this.organizationId=e.id,s=!0)}catch(l){console.warn("\u26a0\ufe0f Error no cr\xedtico creando organizaci\xf3n:",l)}this.currentUser=n;const u=await this.activatePendingInvitations(e,n.id);return console.log("\ud83c\udf89 Registro completado exitosamente"),console.log("\ud83d\udcca Resumen:",{authUser:!!n,userCreated:a,organizationCreated:s,invitationsActivated:u.activated}),{success:!0,user:n,invitationActivation:u,details:{userCreated:a,organizationCreated:s,organizationId:this.organizationId}}}catch(c){if(console.error("\u274c Error en signUp:",c),n&&!a){console.log("\ud83e\uddf9 Limpiando usuario hu\xe9rfano de auth.users...");try{await this.supabase.auth.admin.deleteUser(n.id)}catch(d){console.error("\u274c Error limpiando usuario hu\xe9rfano:",d)}}return{success:!1,error:c.message,details:{authUser:!!n,userCreated:a,organizationCreated:s}}}}async signIn(e,t){try{console.log("\ud83d\ude80 Iniciando login de usuario:",e);const{data:o,error:l}=await this.supabase.auth.signInWithPassword({email:e,password:t});if(l)throw console.error("\u274c Error en auth.signIn:",l),l;if(!o.user)throw new Error("No se pudo autenticar el usuario");console.log("\u2705 Usuario autenticado en auth.users:",o.user.id),this.currentUser=o.user;try{const{data:e,error:t}=await this.supabase.from("users").select("id, email, name, role").eq("id",o.user.id).single();if(t){if("PGRST116"!==t.code)throw t;{var r,n;console.log("\u26a0\ufe0f Usuario no existe en tabla users, creando...");const{error:e}=await this.supabase.from("users").insert({id:o.user.id,email:o.user.email,name:(null===(r=o.user.user_metadata)||void 0===r?void 0:r.name)||o.user.email.split("@")[0],role:(null===(n=o.user.user_metadata)||void 0===n?void 0:n.role)||"user"});if(e)throw console.error("\u274c Error creando usuario en tabla users:",e),new Error("Error sincronizando usuario: ".concat(e.message));console.log("\u2705 Usuario sincronizado en tabla users")}}else{var a;console.log("\u2705 Usuario existe en tabla users");if(e.email!==o.user.email||e.name!==((null===(a=o.user.user_metadata)||void 0===a?void 0:a.name)||o.user.email.split("@")[0])){var s;console.log("\ud83d\udd04 Actualizando datos del usuario en tabla users...");const{error:e}=await this.supabase.from("users").update({email:o.user.email,name:(null===(s=o.user.user_metadata)||void 0===s?void 0:s.name)||o.user.email.split("@")[0],updated_at:(new Date).toISOString()}).eq("id",o.user.id);e?console.warn("\u26a0\ufe0f Error actualizando usuario:",e):console.log("\u2705 Usuario actualizado en tabla users")}}}catch(i){console.error("\u274c Error cr\xedtico en sincronizaci\xf3n de usuario:",i),console.warn("\u26a0\ufe0f Continuando con login a pesar del error de sincronizaci\xf3n")}const c=await this.activatePendingInvitations(e,o.user.id);return await this.loadOrganization(),console.log("\ud83c\udf89 Login completado exitosamente"),console.log("\ud83d\udcca Resumen:",{userAuthenticated:!!o.user,invitationsActivated:c.activated,organizationId:this.organizationId}),{success:!0,user:o.user,invitationActivation:c,details:{organizationId:this.organizationId,synchronized:!0}}}catch(o){return console.error("\u274c Error en signIn:",o),{success:!1,error:o.message,details:{userAuthenticated:!1,synchronized:!1}}}}async signOut(){try{console.log("\ud83d\udeaa Iniciando logout completo...");const{error:e}=await this.supabase.auth.signOut();if(e)throw console.error("\u274c Error en Supabase signOut:",e),e;console.log("\u2705 Supabase auth signOut exitoso"),this.currentUser=null,this.organizationId=null,this.isInitialized=!1,console.log("\u2705 Propiedades del servicio limpiadas");["currentProjectId","useSupabase","portfolioData","supabase.auth.token","sb-localhost-auth-token","sb-auth-token"].forEach(e=>{localStorage.removeItem(e),console.log("\ud83d\uddd1\ufe0f Eliminado localStorage: ".concat(e))});["supabase.auth.token","sb-localhost-auth-token","sb-auth-token"].forEach(e=>{sessionStorage.removeItem(e),console.log("\ud83d\uddd1\ufe0f Eliminado sessionStorage: ".concat(e))});return(await this.supabase.auth.getUser()).data.user&&(console.warn("\u26a0\ufe0f A\xfan hay usuario despu\xe9s del logout, forzando limpieza..."),await this.supabase.auth.signOut({scope:"global"})),console.log("\u2705 Logout completo terminado exitosamente"),{success:!0}}catch(e){return console.error("\u274c Error en signOut completo:",e),{success:!1,error:e.message}}}async loadPortfolioData(){try{var e,t,r,a;console.log("\ud83d\udcca Cargando datos del portafolio desde Supabase (versi\xf3n optimizada)..."),console.time("\u26a1 Carga Total del Portafolio");const{data:{user:s},error:i}=await this.supabase.auth.getUser();if(i||null===s||void 0===s||!s.email)return console.error("\u274c Error obteniendo usuario:",i),null;console.log("\ud83c\udfe2 EJECUTANDO DETECCI\xd3N AUTOM\xc1TICA DE ORGANIZACI\xd3N...");const o=await this.detectUserOrganization(s.email);if(!o)return console.error("\u274c No se pudo detectar organizaci\xf3n para el usuario:",s.email),console.error("\ud83d\udca1 El usuario debe tener una membres\xeda activa en una organizaci\xf3n"),null;const l=o.id;console.log("\u2705 Organizaci\xf3n detectada:",o.name),console.time("\ud83d\udcca Queries Principales");const[c,d,u]=await Promise.all([this.supabase.from("projects").select("*").eq("organization_id",l).order("created_at",{ascending:!1}),this.supabase.from("resources").select("*").eq("organization_id",l),this.supabase.from("corporate_alerts").select("*").eq("organization_id",l)]);console.timeEnd("\ud83d\udcca Queries Principales"),c.error&&console.error("\u274c Error cargando proyectos:",c.error);const h=c.data||[],f=d.data||[],p=u.data||[];console.log("\u2705 Proyectos cargados: ".concat(h.length));const m=h.map(e=>(0,n.A)((0,n.A)({},e),{},{startDate:e.start_date||e.startDate,endDate:e.end_date||e.endDate,businessCase:e.business_case||e.businessCase,kickoffDate:e.kickoff_date||e.kickoffDate,contingencyReserve:e.contingency_reserve||e.contingencyReserve,managementReserve:e.management_reserve||e.managementReserve,createdAt:e.created_at||e.createdAt,updatedAt:e.updated_at||e.updatedAt,organizationId:e.organization_id||e.organizationId,ownerId:e.owner_id||e.ownerId,start_date:e.start_date,end_date:e.end_date,business_case:e.business_case,kickoff_date:e.kickoff_date,contingency_reserve:e.contingency_reserve,management_reserve:e.management_reserve,created_at:e.created_at,updated_at:e.updated_at,organization_id:e.organization_id,owner_id:e.owner_id}));if(0===m.length)return console.log("\u26a0\ufe0f No hay proyectos en la organizaci\xf3n"),console.timeEnd("\u26a1 Carga Total del Portafolio"),{organization:o,projects:[],tasksByProject:{},risksByProject:{},globalResources:f,corporateAlerts:p,purchaseOrdersByProject:{},advancesByProject:{},invoicesByProject:{},contractsByProject:{},resourceAssignmentsByProject:{},auditLogsByProject:{},minutasByProject:{},includeWeekendsByProject:{},user:{id:s.id,email:s.email},currentProjectId:null,version:"1.0.0",lastUpdated:(new Date).toISOString()};console.time("\ud83d\udce6 Batch Loading");const g=m.map(e=>e.id),[v,b,x,y,w,j,N,_,S]=await Promise.all([this.supabase.from("tasks").select("*").in("project_id",g),this.supabase.from("risks").select("*").in("project_id",g),this.supabase.from("purchase_orders").select("*").in("project_id",g),this.supabase.from("advances").select("*").in("project_id",g),this.supabase.from("invoices").select("*").in("project_id",g),this.supabase.from("contracts").select("*").in("project_id",g),this.supabase.from("resource_assignments").select("*").in("project_id",g),this.supabase.from("minute_tasks").select("*").in("project_id",g),this.supabase.from("project_configurations").select("*").in("project_id",g)]);console.timeEnd("\ud83d\udce6 Batch Loading"),console.time("\ud83d\udd28 Procesamiento de Datos");const k={},A={},E={},C={},T={},P={},D={},O={},I={};g.forEach(e=>{k[e]=[],A[e]=[],E[e]=[],C[e]=[],T[e]=[],P[e]=[],D[e]=[],O[e]=[],I[e]=!1}),(v.data||[]).forEach(e=>{const t={id:e.id,name:e.name,description:e.description,duration:e.duration,progress:e.progress,priority:e.priority,cost:e.cost,predecessors:e.predecessors,successors:e.successors,resources:e.resources,status:e.status,project_id:e.project_id,owner_id:e.owner_id,created_at:e.created_at,updated_at:e.updated_at,wbsCode:e.wbs_code,startDate:e.start_date,endDate:e.end_date,assignedTo:e.assigned_to,isMilestone:e.is_milestone,originalDuration:e.original_duration};Object.keys(t).forEach(e=>{void 0!==t[e]&&null!==t[e]||delete t[e]}),k[e.project_id]&&k[e.project_id].push(t)}),(b.data||[]).forEach(e=>{A[e.project_id]&&A[e.project_id].push(e)}),(x.data||[]).forEach(e=>{E[e.project_id]&&E[e.project_id].push(e)}),(y.data||[]).forEach(e=>{C[e.project_id]&&C[e.project_id].push(e)}),(w.data||[]).forEach(e=>{T[e.project_id]&&T[e.project_id].push(e)}),(j.data||[]).forEach(e=>{P[e.project_id]&&P[e.project_id].push(e)}),(N.data||[]).forEach(e=>{D[e.project_id]&&D[e.project_id].push(e)}),(_.data||[]).forEach(e=>{const t={id:e.id,tarea:e.task_description,responsable:e.responsible_person,fecha:e.due_date,hitoId:e.milestone_id,estatus:e.status,fechaCreacion:e.created_at};O[e.project_id]&&O[e.project_id].push(t)}),(S.data||[]).forEach(e=>{I[e.project_id]=e.include_weekends||!1}),console.timeEnd("\ud83d\udd28 Procesamiento de Datos"),console.timeEnd("\u26a1 Carga Total del Portafolio"),console.log("\ud83d\udcca Estad\xedsticas de carga optimizada:"),console.log("  - Proyectos: ".concat(m.length)),console.log("  - Tasks totales: ".concat((null===(e=v.data)||void 0===e?void 0:e.length)||0)),console.log("  - Risks totales: ".concat((null===(t=b.data)||void 0===t?void 0:t.length)||0)),console.log("  - Purchase Orders: ".concat((null===(r=x.data)||void 0===r?void 0:r.length)||0)),console.log("  - Minutas: ".concat((null===(a=_.data)||void 0===a?void 0:a.length)||0)),console.log("  - Queries ejecutadas: 13 (vs ".concat(4+9*m.length," antes)")),console.log("  - Mejora: ~".concat(Math.round((4+9*m.length-13)/(4+9*m.length)*100),"% menos queries"));const M={organization:o,projects:m,tasksByProject:k,risksByProject:A,globalResources:f,corporateAlerts:p,purchaseOrdersByProject:E,user:{id:s.id,email:s.email},advancesByProject:C,invoicesByProject:T,contractsByProject:P,resourceAssignmentsByProject:D,auditLogsByProject:{},minutasByProject:O,includeWeekendsByProject:I,currentProjectId:m&&m.length>0?m[0].id:null,version:"1.0.0",lastUpdated:(new Date).toISOString()};return console.log("\u2705 Datos del portafolio cargados y optimizados"),M}catch(s){return console.error("\u274c Error cargando datos del portafolio:",s),null}}async deleteProject(e){if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No hay usuario autenticado o organizaci\xf3n"),!1;try{console.log("\ud83d\uddd1\ufe0f Eliminando proyecto ".concat(e," de Supabase..."));const{error:t}=await this.supabase.from("tasks").delete().eq("project_id",e);t&&console.warn("\u26a0\ufe0f Error eliminando tareas del proyecto:",t);const{error:r}=await this.supabase.from("project_configurations").delete().eq("project_id",e);r&&console.warn("\u26a0\ufe0f Error eliminando configuraci\xf3n del proyecto:",r),console.log("\ud83d\udccb Los logs de auditor\xeda se mantienen en localStorage");const{error:n}=await this.supabase.from("projects").delete().eq("id",e);return n?(console.error("\u274c Error eliminando proyecto:",n),!1):(console.log("\u2705 Proyecto ".concat(e," eliminado de Supabase")),!0)}catch(t){return console.error("\u274c Error eliminando proyecto:",t),!1}}async savePortfolioData(e){if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No hay usuario autenticado o organizaci\xf3n"),!1;if(this.isSaving)return console.warn("\u26a0\ufe0f savePortfolioData - GUARDADO EN PROGRESO, OMITIENDO"),!1;this.isSaving=!0,console.log("\ud83d\udcbe Guardando datos del portafolio en Supabase...");const t=new CustomEvent("supabaseSyncing",{detail:{timestamp:(new Date).toISOString(),message:"Iniciando sincronizaci\xf3n con Supabase"}});window.dispatchEvent(t);try{if(e.projects&&e.projects.length>0){const t=e.projects.map(e=>{const t=e=>{if(!e)return null;try{const t=new Date(e);if(isNaN(t.getTime()))return console.warn("\u26a0\ufe0f Fecha inv\xe1lida detectada: ".concat(e)),null;const r=t.getFullYear();return r<1900||r>2100?(console.warn("\u26a0\ufe0f A\xf1o fuera de rango: ".concat(r," en fecha ").concat(e)),null):t.toISOString().split("T")[0]}catch(t){return console.warn("\u26a0\ufe0f Error procesando fecha ".concat(e,":"),t),null}};return{id:e.id,name:e.name,description:e.description,status:e.status,priority:e.priority,budget:e.budget,manager:e.manager,sponsor:e.sponsor||"",objective:e.objective||"",business_case:e.businessCase||e.business_case||"",irr:e.irr||0,roi:e.roi||0,contingency_reserve:e.contingencyReserve||e.contingency_reserve||0,management_reserve:e.managementReserve||e.management_reserve||0,kickoff_date:t(e.kickoffDate||e.kickoff_date),stakeholders:e.stakeholders||[],team:e.team||[],progress:e.progress||0,version:e.version||"1.0.0",organization_id:this.organizationId,owner_id:this.currentUser.id,updated_at:(new Date).toISOString(),start_date:t(e.startDate||e.start_date),end_date:t(e.endDate||e.end_date),created_at:t(e.createdAt||e.created_at)||(new Date).toISOString()}}),{error:r}=await this.supabase.from("projects").upsert(t,{onConflict:"id"});if(r)throw r;console.log("\u2705 Proyectos guardados")}for(const n in e.tasksByProject){const t=e.tasksByProject[n];if(t&&t.length>0){const e=new Set,a=[];let s=0;for(const r of t)e.has(r.id)?(console.warn("\u26a0\ufe0f Tarea duplicada detectada en Supabase: ".concat(r.id," - ").concat(r.name)),s++):(e.add(r.id),a.push(r));s>0&&console.warn("\u26a0\ufe0f Se encontraron ".concat(s," tareas duplicadas en Supabase, eliminando duplicados..."));const i=a.map(e=>{const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e.id)?e.id:this.generateDeterministicId(n,e.wbsCode||e.id||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));t!==e.id&&console.log('\ud83d\udd04 Generando nuevo UUID para tarea "'.concat(e.name,'": ').concat(e.id," \u2192 ").concat(t));const r=e=>{if(!e)return null;try{const t=new Date(e);return isNaN(t.getTime())?(console.warn("\u26a0\ufe0f Fecha inv\xe1lida en tarea: ".concat(e)),null):t.toISOString().split("T")[0]}catch(t){return console.warn("\u26a0\ufe0f Error procesando fecha de tarea ".concat(e,":"),t),null}},a={id:t,name:e.name,description:e.description,duration:e.duration,progress:e.progress||0,priority:e.priority,cost:e.cost||0,predecessors:e.predecessors||[],successors:e.successors||[],resources:e.resources||[],status:e.status||"pending",project_id:n,owner_id:this.currentUser.id,wbs_code:e.wbsCode||e.wbs_code,start_date:r(e.startDate||e.start_date),end_date:r(e.endDate||e.end_date),assigned_to:e.assignedTo||e.assigned_to,is_milestone:e.isMilestone||e.is_milestone||!1,original_duration:e.originalDuration||e.original_duration};return Object.keys(a).forEach(e=>{void 0!==a[e]&&null!==a[e]||delete a[e]}),a});console.log("\ud83d\udccb Enviando ".concat(i.length," tareas a Supabase para proyecto ").concat(n)),console.log("\ud83d\udccb Primera tarea de ejemplo:",i[0]);const o=new Set,l=[];i.forEach(e=>{o.has(e.id)?l.push(e.id):o.add(e.id)}),l.length>0&&(console.error("\ud83d\udea8 DUPLICADOS DETECTADOS ANTES DE ENVIAR A SUPABASE:",l),console.error("\ud83d\udea8 Total duplicados: ".concat(l.length," de ").concat(i.length," tareas"))),console.log("\ud83d\udcdd Guardando ".concat(i.length," tareas con UPSERT para proyecto ").concat(n,"..."));const{data:c,error:d}=await this.supabase.from("tasks").select("id").eq("project_id",n);d&&console.warn("\u26a0\ufe0f No se pudieron verificar tareas existentes:",d);const u=new Set(i.map(e=>e.id)),h=new Set((c||[]).map(e=>e.id)),f=Array.from(h).filter(e=>!u.has(e));if(f.length>0){console.log("\ud83d\uddd1\ufe0f Eliminando ".concat(f.length," tareas que ya no est\xe1n en el cronograma"));const{error:e}=await this.supabase.from("tasks").delete().in("id",f);e&&console.error("\u274c Error eliminando tareas obsoletas:",e)}const{data:p,error:m}=await this.supabase.from("tasks").upsert(i,{onConflict:"id",ignoreDuplicates:!1}).select("id, name");if(m)console.error("\u274c Error en UPSERT de tareas para proyecto ".concat(n,":"),m),console.error("\u274c Detalles del error:",{code:m.code,message:m.message,details:m.details,hint:m.hint});else{console.log("\u2705 UPSERT exitoso: ".concat((null===p||void 0===p?void 0:p.length)||0," tareas actualizadas/creadas"));try{await new Promise(e=>setTimeout(e,500));const{data:e,error:t}=await this.supabase.from("tasks").select("id, name, created_at").eq("project_id",n).order("created_at",{ascending:!1});if(!t&&e){const t=e.length,r=i.length;if(t!==r){console.error("\ud83d\udea8 DUPLICACI\xd3N DETECTADA EN SUPABASE!"),console.error("\ud83d\udea8 Esperadas: ".concat(r,", Guardadas: ").concat(t)),console.error("\ud83d\udea8 Diferencia: ".concat(t-r," tareas duplicadas"));const n=new Set,a=[];e.forEach(e=>{n.has(e.id)?a.push(e):n.add(e.id)}),a.length>0&&console.error("\ud83d\udea8 TAREAS DUPLICADAS POR ID:",a.slice(0,5));const s={};e.forEach(e=>{s[e.name]=(s[e.name]||0)+1});const i=Object.entries(s).filter(e=>{let[t,r]=e;return r>1}).slice(0,5);i.length>0&&console.error("\ud83d\udea8 TAREAS DUPLICADAS POR NOMBRE:",i)}else console.log("\u2705 Verificaci\xf3n exitosa: ".concat(t," tareas en Supabase"))}else console.warn("\u26a0\ufe0f Error verificando tareas guardadas:",t)}catch(r){console.warn("\u26a0\ufe0f Error verificando tareas guardadas:",r)}}}}for(const r in e.risksByProject){const t=e.risksByProject[r];if(t&&t.length>0){const e=t.map(e=>(0,n.A)((0,n.A)({},e),{},{project_id:r,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})),{error:a}=await this.supabase.from("risks").upsert(e,{onConflict:"id"});a&&console.warn("\u26a0\ufe0f Error guardando riesgos para proyecto ".concat(r,":"),a)}}if(e.globalResources&&e.globalResources.length>0){const t=e.globalResources.map(e=>(0,n.A)((0,n.A)({},e),{},{organization_id:this.organizationId,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})),{error:r}=await this.supabase.from("resources").upsert(t,{onConflict:"id"});r&&console.warn("\u26a0\ufe0f Error guardando recursos:",r)}if(e.corporateAlerts&&e.corporateAlerts.length>0){const t=e.corporateAlerts.map(e=>(0,n.A)((0,n.A)({},e),{},{organization_id:this.organizationId,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})),{error:r}=await this.supabase.from("corporate_alerts").upsert(t,{onConflict:"id"});r&&console.warn("\u26a0\ufe0f Error guardando alertas:",r)}for(const r in e.purchaseOrdersByProject){const t=e.purchaseOrdersByProject[r];if(t&&t.length>0){const e=t.map(e=>{const t=(0,n.A)({},e);return["requestDate","approvalDate","expectedDate"].forEach(e=>{""!==t[e]&&null!==t[e]&&void 0!==t[e]||(t[e]=null)}),(0,n.A)((0,n.A)({},t),{},{project_id:r,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})}),{error:a}=await this.supabase.from("purchase_orders").upsert(e,{onConflict:"id"});a&&console.warn("\u26a0\ufe0f Error guardando \xf3rdenes de compra para proyecto ".concat(r,":"),a)}}for(const r in e.advancesByProject){const t=e.advancesByProject[r];if(t&&t.length>0){const e=t.map(e=>(0,n.A)((0,n.A)({},e),{},{project_id:r,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})),{error:a}=await this.supabase.from("advances").upsert(e,{onConflict:"id"});a&&console.warn("\u26a0\ufe0f Error guardando anticipos para proyecto ".concat(r,":"),a)}}for(const r in e.invoicesByProject){const t=e.invoicesByProject[r];if(t&&t.length>0){const e=t.map(e=>(0,n.A)((0,n.A)({},e),{},{project_id:r,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})),{error:a}=await this.supabase.from("invoices").upsert(e,{onConflict:"id"});a&&console.warn("\u26a0\ufe0f Error guardando facturas para proyecto ".concat(r,":"),a)}}for(const r in e.contractsByProject){const t=e.contractsByProject[r];if(t&&t.length>0){const e=t.map(e=>(0,n.A)((0,n.A)({},e),{},{project_id:r,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})),{error:a}=await this.supabase.from("contracts").upsert(e,{onConflict:"id"});a&&console.warn("\u26a0\ufe0f Error guardando contratos para proyecto ".concat(r,":"),a)}}for(const r in e.resourceAssignmentsByProject){const t=e.resourceAssignmentsByProject[r];if(t&&t.length>0){const e=t.map(e=>(0,n.A)((0,n.A)({},e),{},{project_id:r,owner_id:this.currentUser.id,updated_at:(new Date).toISOString()})),{error:a}=await this.supabase.from("resource_assignments").upsert(e,{onConflict:"id"});a&&console.warn("\u26a0\ufe0f Error guardando asignaciones para proyecto ".concat(r,":"),a)}}if(e.auditLogsByProject&&console.log("\ud83d\udccb Audit logs detectados pero no se guardan en Supabase (se usan localStorage)"),e.minutasByProject)for(const r in e.minutasByProject){const t=e.minutasByProject[r];if(t&&t.length>0){console.log("\ud83d\udccb Guardando minutas para proyecto ".concat(r,": ").concat(t.length," minutas"));try{const e=await this.saveMinutas(r,t);e.success?console.log("\u2705 Minutas guardadas exitosamente para proyecto ".concat(r)):(console.warn("\u26a0\ufe0f Error guardando minutas para proyecto ".concat(r,":"),e.error),console.warn("\u26a0\ufe0f Continuando con el guardado de otros datos..."))}catch(a){console.error("\u274c Error inesperado guardando minutas para proyecto ".concat(r,":"),a),console.warn("\u26a0\ufe0f Continuando con el guardado de otros datos...")}}}for(const r in e.includeWeekendsByProject){const t=e.includeWeekendsByProject[r];if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)){console.log("\u26a0\ufe0f Saltando configuraci\xf3n para proyecto con ID inv\xe1lido: ".concat(r));continue}const n={project_id:r,include_weekends:t,owner_id:this.currentUser.id},{error:a}=await this.supabase.from("project_configurations").insert(n);let s=null;if(a&&"23505"===a.code){const{error:e}=await this.supabase.from("project_configurations").update(n).eq("project_id",r);s=e}else s=a;s?(console.warn("\u26a0\ufe0f Error guardando configuraci\xf3n para proyecto ".concat(r,":"),s),console.warn("\u26a0\ufe0f Detalles del error de configuraci\xf3n:",{code:s.code,message:s.message,details:s.details,hint:s.hint})):console.log("\u2705 Configuraci\xf3n guardada para proyecto ".concat(r))}console.log("\u2705 Datos del portafolio guardados en Supabase");const t=new CustomEvent("supabaseDataSaved",{detail:{timestamp:(new Date).toISOString(),message:"Datos guardados exitosamente en Supabase",dataSize:JSON.stringify(e).length,path:"Supabase Cloud"}});return window.dispatchEvent(t),!0}catch(s){console.error("\u274c Error guardando datos del portafolio:",s);const e=new CustomEvent("supabaseError",{detail:{timestamp:(new Date).toISOString(),message:"Error guardando en Supabase: ".concat(s.message),error:s}});return window.dispatchEvent(e),!1}finally{this.isSaving=!1,console.log("\ud83d\udd13 Flag de guardado liberado")}}getCurrentUser(){return this.currentUser}async syncUserToPublicTable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t;const i=e||(null===(t=this.currentUser)||void 0===t?void 0:t.id);if(!i)return console.warn("\u26a0\ufe0f No hay usuario para sincronizar"),{success:!1,error:"No hay usuario para sincronizar"};console.log("\ud83d\udd04 Sincronizando usuario:",i);const{data:o,error:l}=await this.supabase.auth.admin.getUserById(i);if(l||!o.user)return console.error("\u274c Error obteniendo usuario de auth.users:",l),{success:!1,error:"Usuario no encontrado en auth.users"};const c=o.user,{data:d,error:u}=await this.supabase.from("users").select("id").eq("id",i).single();if(u&&"PGRST116"!==u.code)return console.error("\u274c Error verificando usuario existente:",u),{success:!1,error:u.message};if(d){var r,n;console.log("\u2139\ufe0f Usuario existe, verificando actualizaciones...");const{error:e}=await this.supabase.from("users").update({email:c.email,name:(null===(r=c.user_metadata)||void 0===r?void 0:r.name)||c.email.split("@")[0],role:(null===(n=c.user_metadata)||void 0===n?void 0:n.role)||"user",updated_at:(new Date).toISOString()}).eq("id",i);return e?(console.error("\u274c Error actualizando usuario:",e),{success:!1,error:e.message}):(console.log("\u2705 Usuario actualizado en public.users"),{success:!0,action:"updated"})}{var a,s;console.log("\u2139\ufe0f Usuario no existe, creando...");const{error:e}=await this.supabase.from("users").insert({id:c.id,email:c.email,name:(null===(a=c.user_metadata)||void 0===a?void 0:a.name)||c.email.split("@")[0],role:(null===(s=c.user_metadata)||void 0===s?void 0:s.role)||"user"});return e?(console.error("\u274c Error creando usuario:",e),{success:!1,error:e.message}):(console.log("\u2705 Usuario creado en public.users"),{success:!0,action:"created"})}}catch(i){return console.error("\u274c Error en syncUserToPublicTable:",i),{success:!1,error:i.message}}}async checkUserSyncHealth(){try{var e,t;if(null===(e=this.currentUser)||void 0===e||!e.id)return{status:"no_user",message:"No hay usuario autenticado",healthy:!1};const{data:r,error:n}=await this.supabase.from("users").select("id, email, name, role, updated_at").eq("id",this.currentUser.id).single();if(n)return"PGRST116"===n.code?{status:"missing_in_public",message:"Usuario no existe en tabla public.users",healthy:!1,needsSync:!0}:{status:"error",message:"Error verificando usuario: ".concat(n.message),healthy:!1};const a=r.email===this.currentUser.email,s=r.name===((null===(t=this.currentUser.user_metadata)||void 0===t?void 0:t.name)||this.currentUser.email.split("@")[0]);return a&&s?{status:"healthy",message:"Usuario correctamente sincronizado",healthy:!0,user:r}:{status:"out_of_sync",message:"Datos del usuario desactualizados",healthy:!1,needsSync:!0,details:{emailSynced:a,nameSynced:s}}}catch(r){return console.error("\u274c Error en checkUserSyncHealth:",r),{status:"error",message:"Error en health check: ".concat(r.message),healthy:!1}}}isAuthenticated(){return!!this.currentUser}getCurrentOrganization(){return this.organizationId}async cleanDuplicatesInSupabase(){if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No hay usuario autenticado o organizaci\xf3n"),!1;try{console.log("\ud83e\uddf9 Iniciando limpieza de duplicados en Supabase...");const{data:e,error:t}=await this.supabase.from("projects").select("id, name").eq("organization_id",this.organizationId);if(t)return console.error("\u274c Error obteniendo proyectos:",t),!1;let r=0,n=0;for(const a of e){console.log("\ud83e\uddf9 Limpiando duplicados para proyecto: ".concat(a.name," (").concat(a.id,")"));const{data:e,error:t}=await this.supabase.from("tasks").select("*").eq("project_id",a.id).order("created_at",{ascending:!0});if(t){console.warn("\u26a0\ufe0f Error obteniendo tareas para proyecto ".concat(a.id,":"),t),n++;continue}if(!e||0===e.length){console.log("\u2705 No hay tareas en proyecto ".concat(a.id));continue}const s=new Map,i=[];if(e.forEach(e=>{s.has(e.id)?i.push(e.id):s.set(e.id,e)}),0!==i.length){console.log("\ud83d\uddd1\ufe0f Eliminando ".concat(i.length," duplicados del proyecto ").concat(a.id));for(const e of i){const{error:t}=await this.supabase.from("tasks").delete().eq("id",e);t?(console.warn("\u26a0\ufe0f Error eliminando duplicado ".concat(e,":"),t),n++):r++}console.log("\u2705 Limpieza completada para proyecto ".concat(a.id,": ").concat(i.length," duplicados eliminados"))}else console.log("\u2705 No hay duplicados en proyecto ".concat(a.id))}return console.log("\ud83c\udf89 Limpieza de duplicados completada:"),console.log("\u2022 Duplicados eliminados: ".concat(r)),console.log("\u2022 Errores: ".concat(n)),!0}catch(e){return console.error("\u274c Error en limpieza de duplicados:",e),!1}}async deleteRisk(e){try{if(!this.supabase||!this.currentUser)return console.warn("\u26a0\ufe0f No se puede eliminar riesgo: Supabase no inicializado o usuario no autenticado"),{success:!1,error:"No autenticado"};const{error:t}=await this.supabase.from("risks").delete().eq("id",e).eq("owner_id",this.currentUser.id);return t?(console.error("\u274c Error eliminando riesgo de Supabase:",t),{success:!1,error:t}):(console.log("\u2705 Riesgo eliminado de Supabase:",e),{success:!0})}catch(t){return console.error("\u274c Error inesperado eliminando riesgo:",t),{success:!1,error:t}}}async deleteAdvance(e){try{if(!this.supabase||!this.currentUser)return console.warn("\u26a0\ufe0f No se puede eliminar anticipo: Supabase no inicializado o usuario no autenticado"),{success:!1,error:"No autenticado"};const{error:t}=await this.supabase.from("advances").delete().eq("id",e).eq("owner_id",this.currentUser.id);return t?(console.error("\u274c Error eliminando anticipo de Supabase:",t),{success:!1,error:t}):(console.log("\u2705 Anticipo eliminado de Supabase:",e),{success:!0})}catch(t){return console.error("\u274c Error inesperado eliminando anticipo:",t),{success:!1,error:t}}}async deleteInvoice(e){try{if(!this.supabase||!this.currentUser)return console.warn("\u26a0\ufe0f No se puede eliminar factura: Supabase no inicializado o usuario no autenticado"),{success:!1,error:"No autenticado"};const{error:t}=await this.supabase.from("invoices").delete().eq("id",e).eq("owner_id",this.currentUser.id);return t?(console.error("\u274c Error eliminando factura de Supabase:",t),{success:!1,error:t}):(console.log("\u2705 Factura eliminada de Supabase:",e),{success:!0})}catch(t){return console.error("\u274c Error inesperado eliminando factura:",t),{success:!1,error:t}}}async deletePurchaseOrder(e){try{if(!this.supabase||!this.currentUser)return console.warn("\u26a0\ufe0f No se puede eliminar orden de compra: Supabase no inicializado o usuario no autenticado"),{success:!1,error:"No autenticado"};const{error:t}=await this.supabase.from("purchase_orders").delete().eq("id",e).eq("owner_id",this.currentUser.id);return t?(console.error("\u274c Error eliminando orden de compra de Supabase:",t),{success:!1,error:t}):(console.log("\u2705 Orden de compra eliminada de Supabase:",e),{success:!0})}catch(t){return console.error("\u274c Error inesperado eliminando orden de compra:",t),{success:!1,error:t}}}async initializeStorage(){try{console.log("\ud83d\uddc2\ufe0f Verificando Supabase Storage...");const{data:e,error:t}=await this.supabase.storage.listBuckets();if(t)return console.error("\u274c Error listando buckets:",t),!1;const r=e.find(e=>"project-files"===e.name);return r?(console.log("\u2705 Bucket project-files encontrado y disponible"),console.log("   - P\xfablico: ".concat(r.public?"S\xed":"No")),console.log("   - L\xedmite de archivo: ".concat(r.file_size_limit?(r.file_size_limit/1024/1024).toFixed(0)+"MB":"Sin l\xedmite")),!0):(console.log("\u274c Bucket project-files no encontrado"),console.log("\ud83d\udd04 SOLUCI\xd3N: Crea el bucket manualmente en Supabase Dashboard \u2192 Storage \u2192 New bucket"),console.log("\ud83d\udd04 Nombre: project-files, P\xfablico: S\xed, L\xedmite: 50MB"),!1)}catch(e){return console.error("\u274c Error verificando Storage:",e),!1}}async uploadFileToStorage(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No se puede subir archivo: usuario no autenticado"),{success:!1,error:"No autenticado"};const s=Date.now(),i=Math.random().toString(36).substr(2,9),o=e.name.split(".").pop(),l="".concat(s,"-").concat(i,".").concat(o),c="".concat(this.organizationId,"/").concat(t,"/").concat(r,"/").concat(l);console.log("\ud83d\udce4 Subiendo archivo a Storage: ".concat(c));const{data:d,error:u}=await this.supabase.storage.from("project-files").upload(c,e,{cacheControl:"3600",upsert:!1,contentType:e.type,metadata:(0,n.A)({originalName:e.name,uploadedBy:this.currentUser.email,projectId:t,category:r,organizationId:this.organizationId},a)});if(u)return console.error("\u274c Error subiendo archivo:",u),{success:!1,error:u};const{data:h}=this.supabase.storage.from("project-files").getPublicUrl(c),f={id:"file-".concat(s,"-").concat(i),projectId:t,category:r,fileName:e.name,originalName:e.name,fileSize:e.size,mimeType:e.type,uploadDate:(new Date).toISOString(),uploadedBy:this.currentUser.id,uploadedByEmail:this.currentUser.email,organizationId:this.organizationId,storagePath:c,publicUrl:h.publicUrl,metadata:(0,n.A)((0,n.A)({},a),{},{storageProvider:"supabase",bucket:"project-files"})};return console.log("\u2705 Archivo subido exitosamente a Storage:",f.fileName),{success:!0,file:f}}catch(s){return console.error("\u274c Error inesperado subiendo archivo:",s),{success:!1,error:s}}}async downloadFileFromStorage(e){try{if(!this.currentUser)return console.warn("\u26a0\ufe0f No se puede descargar archivo: usuario no autenticado"),{success:!1,error:"No autenticado"};console.log("\ud83d\udce5 Descargando archivo de Storage: ".concat(e));const{data:t,error:r}=await this.supabase.storage.from("project-files").download(e);return r?(console.error("\u274c Error descargando archivo:",r),{success:!1,error:r}):(console.log("\u2705 Archivo descargado exitosamente"),{success:!0,data:t})}catch(t){return console.error("\u274c Error inesperado descargando archivo:",t),{success:!1,error:t}}}async deleteFileFromStorage(e){try{if(!this.currentUser)return console.warn("\u26a0\ufe0f No se puede eliminar archivo: usuario no autenticado"),{success:!1,error:"No autenticado"};console.log("\ud83d\uddd1\ufe0f Eliminando archivo de Storage: ".concat(e));const{error:t}=await this.supabase.storage.from("project-files").remove([e]);return t?(console.error("\u274c Error eliminando archivo:",t),{success:!1,error:t}):(console.log("\u2705 Archivo eliminado exitosamente de Storage"),{success:!0})}catch(t){return console.error("\u274c Error inesperado eliminando archivo:",t),{success:!1,error:t}}}async listProjectFiles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No se pueden listar archivos: usuario no autenticado"),{success:!1,error:"No autenticado",files:[]};let r=[],a=null;console.log("\ud83d\udccb Buscando archivos siguiendo estructura del bucket"),console.log("\ud83d\udd0d DEBUG - Par\xe1metros de b\xfasqueda:",{organizationId:this.organizationId,projectId:e,category:t});const s=t?"".concat(this.organizationId,"/").concat(e,"/").concat(t):"".concat(this.organizationId,"/").concat(e);console.log("\ud83d\udcc1 Buscando archivos SOLO del proyecto actual en ruta: ".concat(s)),console.log("\ud83d\udd0d DEBUG - Proyecto actual: ".concat(e,", Categor\xeda: ").concat(t||"todas"));const{data:i,error:o}=await this.supabase.storage.from("project-files").list(s,{limit:100,offset:0});if(o)console.error("\u274c Error listando archivos en ruta ".concat(s,":"),o),a=o;else{console.log("\ud83d\udd0d DEBUG - Archivos encontrados en ruta ".concat(s,":"),i);const t=(i||[]).filter(e=>null!==e.id);console.log("\u2705 Archivos reales del proyecto ".concat(e," encontrados: ").concat(t.length)),t.forEach(e=>{e.folderPath=s}),r=t}if(0===r.length){console.log("\ud83d\udcc1 No se encontraron archivos en ruta espec\xedfica, buscando SOLO en el proyecto actual...");const t="".concat(this.organizationId,"/").concat(e);console.log("\ud83d\udcc1 Buscando en carpeta del proyecto: ".concat(t));const{data:n,error:a}=await this.supabase.storage.from("project-files").list(t,{limit:100,offset:0});if(a)console.error("\u274c Error listando contenido de proyecto ".concat(e,":"),a);else{console.log("\ud83d\udd0d DEBUG - Contenido de proyecto ".concat(e,":"),n);for(const e of n||[])if(null===e.id){console.log("\ud83d\udcc1 Buscando archivos en categor\xeda: ".concat(e.name));const{data:n,error:a}=await this.supabase.storage.from("project-files").list("".concat(t,"/").concat(e.name),{limit:100,offset:0});if(a)console.error("\u274c Error listando archivos en categor\xeda ".concat(e.name,":"),a);else{console.log("\ud83d\udd0d DEBUG - Archivos en categor\xeda ".concat(e.name,":"),n);const a=(n||[]).filter(e=>null!==e.id);console.log("\u2705 Archivos reales en categor\xeda ".concat(e.name,":"),a.length),a.forEach(r=>{r.folderPath="".concat(t,"/").concat(e.name)}),r=r.concat(a)}}else console.log("\ud83d\udcc4 Archivo encontrado directamente en proyecto: ".concat(e.name)),e.folderPath=t,r.push(e)}}console.log("\u2705 Total archivos reales encontrados: ".concat(r.length));const l=r;if(a)return console.error("\u274c Error listando archivos:",a),{success:!1,error:a,files:[]};console.log("\ud83d\udd0d DEBUG - Datos raw de Supabase:",l),console.log("\ud83d\udd0d DEBUG - Verificando bucket completo...");const{data:c,error:d}=await this.supabase.storage.from("project-files").list("",{limit:1e3,offset:0});d?console.error("\u274c Error listando bucket completo:",d):console.log("\ud83d\udd0d DEBUG - Todos los archivos en el bucket:",c);const u=(l||[]).map(t=>{var r,a,s,i,o,l,c,d;const u=t.folderPath?"".concat(t.folderPath,"/").concat(t.name):t.name,{data:h}=this.supabase.storage.from("project-files").getPublicUrl(u),f=(null===(r=t.metadata)||void 0===r?void 0:r.size)||(null===(a=t.metadata)||void 0===a?void 0:a.file_size)||t.size||0,p=t.created_at||t.updated_at||(null===(s=t.metadata)||void 0===s?void 0:s.created_at)||(new Date).toISOString();console.log("\ud83d\udd0d DEBUG - Procesando archivo ".concat(t.name,":"),{filePath:u,"file.metadata?.size":null===(i=t.metadata)||void 0===i?void 0:i.size,"file.metadata?.file_size":null===(o=t.metadata)||void 0===o?void 0:o.file_size,"file.size":t.size,"fileSize final":f,"file.created_at":t.created_at,"file.updated_at":t.updated_at,"file.metadata?.created_at":null===(l=t.metadata)||void 0===l?void 0:l.created_at,"uploadDate final":p});const m=(null===(c=t.metadata)||void 0===c?void 0:c.originalName)||(null===(d=t.metadata)||void 0===d?void 0:d.name)||t.name;return{id:"file-".concat(t.name.split(".")[0]),projectId:e,fileName:m,fileSize:f,uploadDate:p,storagePath:u,publicUrl:h.publicUrl,metadata:(0,n.A)({storageProvider:"supabase",bucket:"project-files",originalFile:t,technicalName:t.name},t.metadata)}});return console.log("\u2705 ".concat(u.length," archivos encontrados en Storage")),console.log("\ud83d\udd0d DEBUG - Archivos encontrados:",u.map(e=>{var t;return{fileName:e.fileName,fileSize:e.fileSize,uploadDate:e.uploadDate,storagePath:e.storagePath,publicUrl:e.publicUrl,originalFile:null===(t=e.metadata)||void 0===t?void 0:t.originalFile}})),{success:!0,files:u}}catch(r){return console.error("\u274c Error inesperado listando archivos:",r),{success:!1,error:r,files:[]}}}async getSignedUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3600;try{if(!this.currentUser)return console.warn("\u26a0\ufe0f No se puede obtener URL firmada: usuario no autenticado"),{success:!1,error:"No autenticado"};const{data:r,error:n}=await this.supabase.storage.from("project-files").createSignedUrl(e,t);return n?(console.error("\u274c Error obteniendo URL firmada:",n),{success:!1,error:n}):(console.log("\u2705 URL firmada obtenida exitosamente"),{success:!0,signedUrl:r.signedUrl})}catch(r){return console.error("\u274c Error inesperado obteniendo URL firmada:",r),{success:!1,error:r}}}async createDatabaseBackup(){try{console.log("\ud83d\udd04 Iniciando backup de base de datos...");const t=new Date,r=t.toISOString().split("T")[0],n=(t.toISOString().replace(/[:.]/g,"-"),["organizations","users","projects","risks","tasks","purchase_orders","advances","invoices","contracts","resources","resource_assignments"]),a={metadata:{timestamp:t.toISOString(),version:"1.0",source:"supabase",tables:n,organizationId:this.organizationId},data:{}};for(const d of n)try{console.log("\ud83d\udcca Respaldo tabla: ".concat(d));let e=this.supabase.from(d).select("*");"organizations"!==d&&this.organizationId&&(e=e.eq("organization_id",this.organizationId));const{data:t,error:r}=await e;r?(console.warn("\u26a0\ufe0f Error consultando tabla ".concat(d,":"),r),a.data[d]=[]):(a.data[d]=t||[],console.log("\u2705 Tabla ".concat(d,": ").concat((null===t||void 0===t?void 0:t.length)||0," registros")))}catch(e){console.error("\u274c Error procesando tabla ".concat(d,":"),e),a.data[d]=[]}const s="DatabaseSt_".concat(r,".json"),i=JSON.stringify(a,null,2),o=new Blob([i],{type:"application/json"}),l=window.URL.createObjectURL(o),c=document.createElement("a");return c.href=l,c.download=s,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l),console.log("\u2705 Backup completado: ".concat(s)),{success:!0,fileName:s,recordCount:Object.values(a.data).reduce((e,t)=>e+t.length,0),tables:n.length}}catch(t){return console.error("\u274c Error creando backup:",t),{success:!1,error:t.message}}}async createSilentBackup(){try{console.log("\ud83d\udd04 Creando backup silencioso...");const t=await this._generateBackupData();if(!t.success)return t;const r="strategiapm_backup_".concat((new Date).toISOString().split("T")[0]),a=(0,n.A)((0,n.A)({},t.data),{},{_backupInfo:{timestamp:(new Date).toISOString(),recordCount:t.recordCount,tables:t.tables.length,version:"1.0"}});try{return localStorage.setItem(r,JSON.stringify(a)),console.log("\u2705 Backup silencioso guardado: ".concat(t.recordCount," registros")),{success:!0,recordCount:t.recordCount,tables:t.tables.length,stored:!0}}catch(e){return console.warn("\u26a0\ufe0f Error guardando en localStorage:",e),{success:!0,recordCount:t.recordCount,tables:t.tables.length,stored:!1,warning:"Backup creado pero no guardado localmente"}}}catch(t){return console.error("\u274c Error creando backup silencioso:",t),{success:!1,error:t.message}}}async _generateBackupData(){try{const t=["organizations","users","projects","risks","tasks","purchase_orders","advances","invoices","contracts","resources","resource_assignments"],r={metadata:{timestamp:(new Date).toISOString(),version:"1.0",source:"supabase",tables:t.length},data:{}};let n=0;for(const a of t)try{let e=this.supabase.from(a).select("*");"organizations"!==a&&this.organizationId&&(e=e.eq("organization_id",this.organizationId));const{data:t,error:s}=await e;s?(console.warn("\u26a0\ufe0f Error obteniendo datos de ".concat(a,":"),s),r.data[a]=[]):(r.data[a]=t||[],n+=(t||[]).length,console.log("\u2705 ".concat(a,": ").concat((t||[]).length," registros")))}catch(e){console.warn("\u26a0\ufe0f Error procesando tabla ".concat(a,":"),e),r.data[a]=[]}return{success:!0,data:r,recordCount:n,tables:t}}catch(t){return console.error("\u274c Error generando datos de backup:",t),{success:!1,error:t.message}}}async getBackupStats(){try{const t=["organizations","users","projects","risks","tasks","purchase_orders","advances","invoices","contracts","resources","resource_assignments"],r={};let n=0;for(const a of t)try{let e=this.supabase.from(a).select("*",{count:"exact",head:!0});"organizations"!==a&&this.organizationId&&(e=e.eq("organization_id",this.organizationId));const{count:t,error:s}=await e;s?(console.warn("\u26a0\ufe0f Error contando tabla ".concat(a,":"),s),r[a]=0):(r[a]=t||0,n+=t||0)}catch(e){console.error("\u274c Error contando tabla ".concat(a,":"),e),r[a]=0}return{success:!0,stats:r,totalRecords:n,tablesCount:t.length}}catch(t){return console.error("\u274c Error obteniendo estad\xedsticas:",t),{success:!1,error:t.message}}}async loadMinutasByProject(e){try{if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No se pueden cargar minutas: usuario no autenticado"),{success:!1,error:"No autenticado",minutas:[]};console.log("\ud83d\udccb Cargando minutas para proyecto: ".concat(e));const{data:t,error:r}=await this.supabase.from("minute_tasks").select("*").eq("project_id",e).eq("organization_id",this.organizationId).order("created_at",{ascending:!1});if(r)return console.error("\u274c Error cargando minutas:",r),{success:!1,error:r,minutas:[]};const n=(t||[]).map(e=>({id:e.id,tarea:e.task_description,responsable:e.responsible_person,fecha:e.due_date,hitoId:e.milestone_id,estatus:e.status,fechaCreacion:e.created_at}));return console.log("\u2705 Minutas cargadas: ".concat(n.length)),{success:!0,minutas:n}}catch(t){return console.error("\u274c Error inesperado cargando minutas:",t),{success:!1,error:t,minutas:[]}}}async saveMinutas(e,t){try{if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No se pueden guardar minutas: usuario no autenticado"),{success:!1,error:"No autenticado"};console.log("\ud83d\udcbe Guardando ".concat(t.length," minutas para proyecto: ").concat(e));const n=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),a=t.map(t=>{const r=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t.id)?t.id:n();return r!==t.id&&console.log('\ud83d\udd04 Generando nuevo UUID para minuta "'.concat(t.tarea,'": ').concat(t.id," \u2192 ").concat(r)),{id:r,project_id:e,organization_id:this.organizationId,user_id:this.currentUser.id,task_description:t.tarea,responsible_person:t.responsable,due_date:t.fecha,milestone_id:t.hitoId,status:t.estatus||"Pendiente",created_at:t.fechaCreacion||(new Date).toISOString(),updated_at:(new Date).toISOString()}}),s=new Set,i=[];if(a.forEach(e=>{s.has(e.id)?i.push(e.id):s.add(e.id)}),i.length>0){console.warn("\u26a0\ufe0f DUPLICADOS DETECTADOS EN MINUTAS ANTES DE ENVIAR:",i),console.warn("\u26a0\ufe0f Total duplicados: ".concat(i.length," de ").concat(a.length," minutas"));const e=[],t=new Set;a.forEach(r=>{t.has(r.id)||(t.add(r.id),e.push(r))}),console.log("\ud83d\udd04 Removiendo ".concat(i.length," minutas duplicadas, procesando ").concat(e.length," \xfanicas")),a=e}const{data:o,error:l}=await this.supabase.from("minute_tasks").upsert(a,{onConflict:"id",ignoreDuplicates:!1}).select("*");if(l)return console.error("\u274c Error guardando minutas:",l),console.error("\u274c Detalles del error:",{code:l.code,message:l.message,details:l.details,hint:l.hint}),{success:!1,error:l};console.log("\u2705 Minutas guardadas/actualizadas: ".concat((null===o||void 0===o?void 0:o.length)||0));try{const{data:t,error:r}=await this.supabase.from("minute_tasks").select("id, task_description, created_at").eq("project_id",e).order("created_at",{ascending:!1});if(!r&&t){const r=t.length,n=a.length;r>=n?console.log("\u2705 Verificaci\xf3n exitosa: ".concat(r," minutas en Supabase para proyecto ").concat(e)):console.warn("\u26a0\ufe0f Posible discrepancia: Esperadas ".concat(n,", Encontradas ").concat(r," minutas"))}}catch(r){console.warn("\u26a0\ufe0f Error verificando minutas guardadas:",r)}return{success:!0,data:o}}catch(n){return console.error("\u274c Error inesperado guardando minutas:",n),{success:!1,error:n}}}async updateMinutaStatus(e,t){try{if(!this.currentUser)return console.warn("\u26a0\ufe0f No se puede actualizar minuta: usuario no autenticado"),{success:!1,error:"No autenticado"};console.log("\ud83d\udd04 Actualizando estatus de minuta ".concat(e," a: ").concat(t));const{data:r,error:n}=await this.supabase.from("minute_tasks").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).eq("user_id",this.currentUser.id).select("*");return n?(console.error("\u274c Error actualizando minuta:",n),{success:!1,error:n}):(console.log("\u2705 Minuta actualizada"),{success:!0,data:r})}catch(r){return console.error("\u274c Error inesperado actualizando minuta:",r),{success:!1,error:r}}}async updateMinuta(e,t){try{if(!this.currentUser)return console.warn("\u26a0\ufe0f No se puede actualizar minuta: usuario no autenticado"),{success:!1,error:"No autenticado"};console.log("\ud83d\udd04 Actualizando minuta ".concat(e,":"),t);const{data:r,error:a}=await this.supabase.from("minute_tasks").update((0,n.A)((0,n.A)({},t),{},{updated_at:(new Date).toISOString()})).eq("id",e).eq("user_id",this.currentUser.id).select("*");return a?(console.error("\u274c Error actualizando minuta:",a),{success:!1,error:a}):(console.log("\u2705 Minuta actualizada completamente"),{success:!0,data:r})}catch(r){return console.error("\u274c Error inesperado actualizando minuta:",r),{success:!1,error:r}}}async deleteMinuta(e){try{if(!this.currentUser)return console.warn("\u26a0\ufe0f No se puede eliminar minuta: usuario no autenticado"),{success:!1,error:"No autenticado"};console.log("\ud83d\uddd1\ufe0f Eliminando minuta: ".concat(e));const{error:t}=await this.supabase.from("minute_tasks").delete().eq("id",e).eq("user_id",this.currentUser.id);return t?(console.error("\u274c Error eliminando minuta:",t),{success:!1,error:t}):(console.log("\u2705 Minuta eliminada"),{success:!0})}catch(t){return console.error("\u274c Error inesperado eliminando minuta:",t),{success:!1,error:t}}}async saveAuditEvents(e,t){try{if(!this.currentUser||!this.organizationId)return console.warn("\u26a0\ufe0f No se pueden guardar eventos de auditor\xeda: usuario no autenticado"),{success:!1,error:"No autenticado"};if(!t||0===t.length)return{success:!0,data:[]};console.log("\ud83d\udccb Guardando ".concat(t.length," eventos de auditor\xeda para proyecto: ").concat(e));const r=t.map(t=>({id:t.id||crypto.randomUUID(),project_id:e,organization_id:this.organizationId,user_id:this.currentUser.id,timestamp:t.timestamp||(new Date).toISOString(),event_category:t.category||"general",event_action:t.action||"unknown",event_description:t.description||"",event_details:JSON.stringify(t.details||{}),event_severity:t.severity||"medium",event_user:t.user||this.currentUser.email,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})),{data:n,error:a}=await this.supabase.from("project_audit_events").upsert(r,{onConflict:"id"}).select("*");return a?(console.error("\u274c Error guardando eventos de auditor\xeda:",a),{success:!1,error:a}):(console.log("\u2705 Eventos de auditor\xeda guardados: ".concat((null===n||void 0===n?void 0:n.length)||0)),{success:!0,data:n})}catch(r){return console.error("\u274c Error inesperado guardando eventos de auditor\xeda:",r),{success:!1,error:r}}}async loadAuditEvents(e){try{if(!this.currentUser)return console.warn("\u26a0\ufe0f No se pueden cargar eventos de auditor\xeda: usuario no autenticado"),{success:!1,error:"No autenticado",events:[]};console.log("\ud83d\udccb Cargando eventos de auditor\xeda para proyecto: ".concat(e));const{data:t,error:r}=await this.supabase.from("project_audit_events").select("*").eq("project_id",e).eq("organization_id",this.organizationId).order("timestamp",{ascending:!1});if(r)return console.error("\u274c Error cargando eventos de auditor\xeda:",r),{success:!1,error:r,events:[]};const n=(t||[]).map(e=>({id:e.id,timestamp:e.timestamp,projectId:e.project_id,category:e.event_category,action:e.event_action,description:e.event_description,details:JSON.parse(e.event_details||"{}"),severity:e.event_severity,user:e.event_user}));return console.log("\u2705 Eventos de auditor\xeda cargados: ".concat(n.length)),{success:!0,events:n}}catch(t){return console.error("\u274c Error inesperado cargando eventos de auditor\xeda:",t),{success:!1,error:t,events:[]}}}validateBackupFile(e){try{if(!e||"object"!==typeof e)return{valid:!1,error:"Archivo no v\xe1lido: estructura incorrecta"};if(!e.metadata)return{valid:!1,error:"Archivo no v\xe1lido: falta metadata"};const{metadata:t}=e;if(!t.timestamp||!t.version||!t.source)return{valid:!1,error:"Archivo no v\xe1lido: metadata incompleta"};if("supabase"!==t.source)return{valid:!1,error:"Archivo no v\xe1lido: no es un backup de Supabase"};if(!e.data||"object"!==typeof e.data)return{valid:!1,error:"Archivo no v\xe1lido: no contiene datos"};const r=["organizations","users","projects","risks","tasks","purchase_orders","advances","invoices","contracts","resources","resource_assignments"],n=Object.keys(e.data),a=r.filter(e=>!n.includes(e));a.length>0&&console.warn("\u26a0\ufe0f Tablas faltantes en backup: ".concat(a.join(", ")));const s={};let i=0;return n.forEach(t=>{const r=Array.isArray(e.data[t])?e.data[t].length:0;s[t]=r,i+=r}),{valid:!0,stats:s,totalRecords:i,tablesCount:n.length,timestamp:t.timestamp,version:t.version}}catch(t){return{valid:!1,error:"Error validando archivo: ".concat(t.message)}}}async restoreFromBackup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{console.log("\ud83d\udd04 Iniciando restauraci\xf3n de backup...");const n=this.validateBackupFile(e);if(!n.valid)return{success:!1,error:n.error};console.log("\u2705 Archivo v\xe1lido: ".concat(n.totalRecords," registros en ").concat(n.tablesCount," tablas"));const a={success:!0,processed:0,errors:[],details:{}},s=["organizations","users","projects","resources","risks","tasks","resource_assignments","purchase_orders","advances","invoices","contracts"];for(const i of s){if(!e.data[i]){console.log("\u23ed\ufe0f Saltando tabla ".concat(i,": no presente en backup"));continue}const n=e.data[i];if(Array.isArray(n)&&0!==n.length){console.log("\ud83d\udcca Restaurando tabla ".concat(i,": ").concat(n.length," registros"));try{if(t.clearExisting){console.log("\ud83d\uddd1\ufe0f Limpiando tabla ".concat(i,"..."));const{error:e}=await this.supabase.from(i).delete().neq("id","00000000-0000-0000-0000-000000000000");e&&console.warn("\u26a0\ufe0f Error limpiando tabla ".concat(i,":"),e)}const e=100;let r=0,s=0;for(let t=0;t<n.length;t+=e){const o=n.slice(t,t+e),{data:l,error:c}=await this.supabase.from(i).insert(o);c?(console.error("\u274c Error insertando lote en ".concat(i,":"),c),s+=o.length,a.errors.push({table:i,batch:Math.floor(t/e)+1,error:c.message,records:o.length})):(r+=o.length,a.processed+=o.length),t+e<n.length&&await new Promise(e=>setTimeout(e,100))}a.details[i]={processed:r,errors:s},console.log("\u2705 Tabla ".concat(i,": ").concat(r," procesados, ").concat(s," errores"))}catch(r){console.error("\u274c Error procesando tabla ".concat(i,":"),r),a.errors.push({table:i,error:r.message}),a.details[i]={processed:0,errors:n.length}}}else console.log("\u23ed\ufe0f Saltando tabla ".concat(i,": sin datos")),a.details[i]={processed:0,errors:0}}return console.log("\u2705 Restauraci\xf3n completada: ".concat(a.processed," registros procesados")),a}catch(n){return console.error("\u274c Error en restauraci\xf3n:",n),{success:!1,error:n.message}}}getBackupPreview(e){try{const t=this.validateBackupFile(e);if(!t.valid)return{success:!1,error:t.error};const r={};return Object.keys(e.data).forEach(t=>{const n=e.data[t];Array.isArray(n)&&n.length>0&&(r[t]={count:n.length,sample:n.slice(0,3),fields:Object.keys(n[0]||{})})}),{success:!0,preview:r,totalRecords:t.totalRecords,timestamp:t.timestamp,version:t.version}}catch(t){return{success:!1,error:t.message}}}}},9940:(e,t,r)=>{"use strict";var n=r(9950),a=r(6538);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=a.useSyncExternalStore,o=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var u=o(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=c(function(){function e(e){if(!l){if(l=!0,i=e,e=n(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(i=e,t):(i=e,o=r)}var i,o,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,a]);var f=i(e,u[0],u[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),d(f),f}},9950:(e,t,r)=>{"use strict";e.exports=r(1983)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(s,i),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+"."+{52:"74cecd63",82:"8092cd03",206:"03762a4d",239:"b6c283a8"}[e]+".chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="mi-dashboard:";r.l=(n,a,s,i)=>{if(e[n])e[n].push(a);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[a];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(f);var a=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(r)),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise((r,n)=>a=e[t]=[r,n]);n.push(a[2]=s);var i=r.p+r.u(t),o=new Error;r.l(i,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,s,i=n[0],o=n[1],l=n[2],c=0;if(i.some(t=>0!==e[t])){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(l)l(r)}for(t&&t(n);c<i.length;c++)s=i[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkmi_dashboard=self.webpackChunkmi_dashboard||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{scaleBand:()=>mA,scaleDiverging:()=>cD,scaleDivergingLog:()=>dD,scaleDivergingPow:()=>hD,scaleDivergingSqrt:()=>fD,scaleDivergingSymlog:()=>uD,scaleIdentity:()=>nC,scaleImplicit:()=>fA,scaleLinear:()=>rC,scaleLog:()=>hC,scaleOrdinal:()=>pA,scalePoint:()=>vA,scalePow:()=>wC,scaleQuantile:()=>OC,scaleQuantize:()=>IC,scaleRadial:()=>_C,scaleSequential:()=>rD,scaleSequentialLog:()=>nD,scaleSequentialPow:()=>sD,scaleSequentialQuantile:()=>oD,scaleSequentialSqrt:()=>iD,scaleSequentialSymlog:()=>aD,scaleSqrt:()=>jC,scaleSymlog:()=>gC,scaleThreshold:()=>MC,scaleTime:()=>ZP,scaleUtc:()=>QP,tickFormat:()=>eC});var t=r(9950),n=r.t(t,2),a=r(1352),s=r(9379);function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const o=["sri"],l=["page"],c=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var f="popstate";function p(){return w(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return b("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:x(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function m(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return(0,s.A)((0,s.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t),{},{state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function x(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function y(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function w(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l="POP",c=null,d=u();function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let e=u(),t=null==e?null:e-d;d=e,c&&c({action:l,location:m.location,delta:t})}function p(e){return j(e)}null==d&&(d=0,o.replaceState((0,s.A)((0,s.A)({},o.state),{},{idx:d}),""));let m={get action(){return l},get location(){return e(a,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(f,h),c=e,()=>{a.removeEventListener(f,h),c=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let n=b(m.location,e,t);r&&r(n,e),d=u()+1;let s=v(n,d),h=m.createHref(n);try{o.pushState(s,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;a.location.assign(h)}i&&c&&c({action:l,location:m.location,delta:1})},replace:function(e,t){l="REPLACE";let n=b(m.location,e,t);r&&r(n,e),d=u();let a=v(n,d),s=m.createHref(n);o.replaceState(a,"",s),i&&c&&c({action:l,location:m.location,delta:0})},go:e=>o.go(e)};return m}function j(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),m(r,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:x(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}new WeakMap;function N(e,t){return _(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function _(e,t,r,n){let a=B(("string"===typeof t?y(t):t).pathname||"/",r);if(null==a)return null;let s=S(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=F(a);i=M(s[o],e,n)}return i}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&i)return;m(l.relativePath.startsWith(n),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(n.length)}let c=H([n,l.relativePath]),d=r.concat(l);e.children&&e.children.length>0&&(m(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),S(e.children,t,d,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:I(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!==(r=e.path)&&void 0!==r&&r.includes("?"))for(let n of k(e.path))s(e,t,!0,n);else s(e,t)}),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=k(n.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var A=/^:[\w-]+$/,E=3,C=2,T=1,P=10,D=-2,O=e=>"*"===e;function I(e,t){let r=e.split("/"),n=r.length;return r.some(O)&&(n+=D),t&&(n+=C),r.filter(e=>!O(e)).reduce((e,t)=>e+(A.test(t)?E:""===t?T:P),n)}function M(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",d=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:H([s,d.pathname]),pathnameBase:V(H([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=H([s,d.pathnameBase]))}return i}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=L(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:i,pattern:e}}function L(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return g(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function z(e,t,r,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(r,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function q(e){let t=U(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function W(e,t,r){let n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=y(e):(n=(0,s.A)({},e),m(!n.pathname||!n.pathname.includes("?"),z("?","pathname","search",n)),m(!n.pathname||!n.pathname.includes("#"),z("#","pathname","hash",n)),m(!n.search||!n.search.includes("#"),z("#","search","hash",n)));let i,o=""===e||""===n.pathname,l=o?"/":n.pathname;if(null==l)i=r;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:n="",hash:a=""}="string"===typeof e?y(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:G(n),hash:K(a)}}(n,i),d=l&&"/"!==l&&l.endsWith("/"),u=(o||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var H=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var X=["POST","PUT","PATCH","DELETE"],J=(new Set(X),["GET",...X]);new Set(J),Symbol("ResetLoaderData");var Z=t.createContext(null);Z.displayName="DataRouter";var Q=t.createContext(null);Q.displayName="DataRouterState";var ee=t.createContext(!1);var te=t.createContext({isTransitioning:!1});te.displayName="ViewTransition";var re=t.createContext(new Map);re.displayName="Fetchers";var ne=t.createContext(null);ne.displayName="Await";var ae=t.createContext(null);ae.displayName="Navigation";var se=t.createContext(null);se.displayName="Location";var ie=t.createContext({outlet:null,matches:[],isDataRoute:!1});ie.displayName="Route";var oe=t.createContext(null);oe.displayName="RouteError";function le(){return null!=t.useContext(se)}function ce(){return m(le(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(se).location}var de="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ue(e){t.useContext(ae).static||t.useLayoutEffect(e)}function he(){let{isDataRoute:e}=t.useContext(ie);return e?function(){let{router:e}=je("useNavigate"),r=_e("useNavigate"),n=t.useRef(!1);ue(()=>{n.current=!0});let a=t.useCallback(async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(n.current,de),n.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,(0,s.A)({fromRouteId:r},a)))},[e,r]);return a}():function(){m(le(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(Z),{basename:r,navigator:n}=t.useContext(ae),{matches:a}=t.useContext(ie),{pathname:s}=ce(),i=JSON.stringify(q(a)),o=t.useRef(!1);ue(()=>{o.current=!0});let l=t.useCallback(function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(o.current,de),!o.current)return;if("number"===typeof t)return void n.go(t);let l=W(t,JSON.parse(i),s,"path"===a.relative);null==e&&"/"!==r&&(l.pathname="/"===l.pathname?r:H([r,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)},[r,n,i,s,e]);return l}()}t.createContext(null);function fe(){let{matches:e}=t.useContext(ie),r=e[e.length-1];return r?r.params:{}}function pe(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=t.useContext(ie),{pathname:a}=ce(),s=JSON.stringify(q(n));return t.useMemo(()=>W(e,JSON.parse(s),a,"path"===r),[e,s,a,r])}function me(e,r,n,a,i){m(le(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=t.useContext(ae),{matches:l}=t.useContext(ie),c=l[l.length-1],d=c?c.params:{},u=c?c.pathname:"/",h=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";Ae(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,v=ce();if(r){var b;let e="string"===typeof r?y(r):r;m("/"===h||(null===(b=e.pathname)||void 0===b?void 0:b.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=v;let x=p.pathname||"/",w=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let j=N(e,{pathname:w});g(f||null!=j,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),g(null==j||void 0!==j[j.length-1].route.element||void 0!==j[j.length-1].route.Component||void 0!==j[j.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let _=ye(j&&j.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:H([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:H([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,a,i);return r&&_?t.createElement(se.Provider,{value:{location:(0,s.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},_):_}function ge(){let e=Se(),r=Y(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:i},"ErrorBoundary")," or"," ",t.createElement("code",{style:i},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:s},n):null,o)}var ve=t.createElement(ge,null),be=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?t.createElement(ie.Provider,{value:this.props.routeContext},t.createElement(oe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe(e){let{routeContext:r,match:n,children:a}=e,s=t.useContext(Z);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(ie.Provider,{value:r},a)}function ye(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==r.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=s.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));m(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(n)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,d)=>{let u,h=!1,f=null,p=null;n&&(u=i&&c.route.id?i[c.route.id]:void 0,f=c.route.errorElement||ve,o&&(l<0&&0===d?(Ae("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===d&&(h=!0,p=c.route.hydrateFallbackElement||null)));let m=r.concat(s.slice(0,d+1)),g=()=>{let r;return r=u?f:h?p:c.route.Component?t.createElement(c.route.Component,null):c.route.element?c.route.element:e,t.createElement(xe,{match:c,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:r})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===d)?t.createElement(be,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:a}):g()},null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function je(e){let r=t.useContext(Z);return m(r,we(e)),r}function Ne(e){let r=t.useContext(Q);return m(r,we(e)),r}function _e(e){let r=function(e){let r=t.useContext(ie);return m(r,we(e)),r}(e),n=r.matches[r.matches.length-1];return m(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Se(){var e;let r=t.useContext(oe),n=Ne("useRouteError"),a=_e("useRouteError");return void 0!==r?r:null===(e=n.errors)||void 0===e?void 0:e[a]}var ke={};function Ae(e,t,r){t||ke[e]||(ke[e]=!0,g(!1,r))}var Ee={};function Ce(e,t){e||Ee[t]||(Ee[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:r,state:n,unstable_onError:a}=e;return me(t,void 0,n,a,r)});function Te(e){let{to:r,replace:n,state:a,relative:s}=e;m(le(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=t.useContext(ae);g(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(ie),{pathname:l}=ce(),c=he(),d=W(r,q(o),l,"path"===s),u=JSON.stringify(d);return t.useEffect(()=>{c(JSON.parse(u),{replace:n,state:a,relative:s})},[c,u,s,n,a]),null}function Pe(e){m(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function De(e){let{basename:r="/",children:n=null,location:a,navigationType:s="POP",navigator:i,static:o=!1}=e;m(!le(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);"string"===typeof a&&(a=y(a));let{pathname:d="/",search:u="",hash:h="",state:f=null,key:p="default"}=a,v=t.useMemo(()=>{let e=B(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:f,key:p},navigationType:s}},[l,d,u,h,f,p,s]);return g(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:t.createElement(ae.Provider,{value:c},t.createElement(se.Provider,{children:n,value:v}))}function Oe(e){let{children:t,location:r}=e;return me(Ie(t),r)}t.Component;function Ie(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.Children.forEach(e,(e,a)=>{if(!t.isValidElement(e))return;let s=[...r,a];if(e.type===t.Fragment)return void n.push.apply(n,Ie(e.props.children,s));m(e.type===Pe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),m(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Ie(e.props.children,s)),n.push(i)}),n}var Me="get",Re="application/x-www-form-urlencoded";function Le(e){return null!=e&&"string"===typeof e.tagName}function Fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}var Be=null;var ze=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ue(e){return null==e||ze.has(e)?e:(g(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Re,'"')),null)}function qe(e,t){let r,n,a,s,i;if(function(e){return Le(e)&&"form"===e.tagName.toLowerCase()}(e)){let i=e.getAttribute("action");n=i?B(i,t):null,r=e.getAttribute("method")||Me,a=Ue(e.getAttribute("enctype"))||Re,s=new FormData(e)}else if(function(e){return Le(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Le(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(n=o?B(o,t):null,r=e.getAttribute("formmethod")||i.getAttribute("method")||Me,a=Ue(e.getAttribute("formenctype"))||Ue(i.getAttribute("enctype"))||Re,s=new FormData(i,e),!function(){if(null===Be)try{new FormData(document.createElement("form"),0),Be=!1}catch(e){Be=!0}return Be}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,n)}}else{if(Le(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Me,n=null,a=Re,i=e}return s&&"text/plain"===a&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function We(e){return{__html:e}}function He(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ve(e,t,r){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.".concat(r):t&&"/"===B(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(r):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(r),n}async function Ge(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ke(e){return null!=e&&"string"===typeof e.page}function $e(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ye(e,t,r,n,a,s){let i=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null===(n=r[t].route.path)||void 0===n?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let n=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=r[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0}):[]}function Xe(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1),[...new Set(n)];var n}function Je(e,t){let r=new Set,n=new Set(t);return e.reduce((e,a)=>{if(t&&!Ke(a)&&"script"===a.as&&a.href&&n.has(a.href))return e;let s=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(a));return r.has(s)||(r.add(s),e.push({key:s,link:a})),e},[])}function Ze(e,t){return"lazy"===e.mode&&!0===t}function Qe(){let e=t.useContext(Z);return He(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function et(){let e=t.useContext(Q);return He(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tt=t.createContext(void 0);function rt(){let e=t.useContext(tt);return He(e,"You must render this element inside a <HydratedRouter> element"),e}function nt(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function at(e,t,r){if(r&&!lt)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}tt.displayName="FrameworkContext";function st(e){let{page:r}=e,n=i(e,l),{router:a}=Qe(),o=t.useMemo(()=>N(a.routes,r,a.basename),[a.routes,r,a.basename]);return o?t.createElement(ot,(0,s.A)({page:r,matches:o},n)):null}function it(e){let{manifest:r,routeModules:n}=rt(),[a,i]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,r){return Je((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await Ge(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter($e).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,s.A)((0,s.A)({},e),{},{rel:"prefetch",as:"style"}):(0,s.A)((0,s.A)({},e),{},{rel:"prefetch"})))}(e,r,n).then(e=>{t||i(e)}),()=>{t=!0}},[e,r,n]),a}function ot(e){let{page:r,matches:n}=e,a=i(e,c),o=ce(),{manifest:l,routeModules:d}=rt(),{basename:u}=Qe(),{loaderData:h,matches:f}=et(),p=t.useMemo(()=>Ye(r,n,f,l,o,"data"),[r,n,f,l,o]),m=t.useMemo(()=>Ye(r,n,f,l,o,"assets"),[r,n,f,l,o]),g=t.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(n.forEach(r=>{var n;let a=l.routes[r.route.id];a&&a.hasLoader&&(!p.some(e=>e.route.id===r.route.id)&&r.route.id in h&&null!==(n=d[r.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?t=!0:e.add(r.route.id))}),0===e.size)return[];let a=Ve(r,u,"data");return t&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[u,h,o,l,p,n,r,d]),v=t.useMemo(()=>Xe(m,l),[m,l]),b=it(m);return t.createElement(t.Fragment,null,g.map(e=>t.createElement("link",(0,s.A)({key:e,rel:"prefetch",as:"fetch",href:e},a))),v.map(e=>t.createElement("link",(0,s.A)({key:e,rel:"modulepreload",href:e},a))),b.map(e=>{let{key:r,link:n}=e;return t.createElement("link",(0,s.A)({key:r,nonce:a.nonce},n))}))}var lt=!1;function ct(e){let{manifest:r,serverHandoffString:n,isSpaMode:a,renderMeta:l,routeDiscovery:c,ssr:d}=rt(),{router:u,static:h,staticContext:f}=Qe(),{matches:p}=et(),m=t.useContext(ee),g=Ze(c,d);l&&(l.didRenderScripts=!0);let v=at(p,null,a);t.useEffect(()=>{0},[]);let b=t.useMemo(()=>{var a;if(m)return null;let l=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==r.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(r.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(r.url)),";\n").concat(v.map((e,t)=>{let n="route".concat(t),a=r.routes[e.route.id];He(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,d=[...s?[{module:s,varName:"".concat(n,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(n,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(n,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(n,"_HydrateFallback")}]:[],{module:c,varName:"".concat(n,"_main")}];return 1===d.length?"import * as ".concat(n," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(n," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:r}=e,n=i(e,o),a=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let r=N(t.routes,e,t.basename);r&&r.forEach(e=>a.add(e.route.id))});let d=[...a].reduce((e,t)=>Object.assign(e,{[t]:n.routes[t]}),{});return(0,s.A)((0,s.A)({},n),{},{routes:d,sri:!!r||void 0})}(r,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(r.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",(0,s.A)((0,s.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:We(l),type:void 0})),t.createElement("script",(0,s.A)((0,s.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:We(c),type:"module",async:!0})))},[]),x=lt||m?[]:function(e){return[...new Set(e)]}(r.entry.imports.concat(Xe(v,r,{includeHydrateFallback:!0}))),y="object"===typeof r.sri?r.sri:{};return Ce(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),lt||m?null:t.createElement(t.Fragment,null,"object"===typeof r.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:y})}}):null,g?null:t.createElement("link",{rel:"modulepreload",href:r.url,crossOrigin:e.crossOrigin,integrity:y[r.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:r.entry.module,crossOrigin:e.crossOrigin,integrity:y[r.entry.module],suppressHydrationWarning:!0}),x.map(r=>t.createElement("link",{key:r,rel:"modulepreload",href:r,crossOrigin:e.crossOrigin,integrity:y[r],suppressHydrationWarning:!0})),b)}function dt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function ut(e){let{error:r,isOutsideRemixApp:n}=e;console.error(r);let a,s=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Y(r))return t.createElement(ht,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},r.status," ",r.statusText),s);if(r instanceof Error)0;else{let e=null==r?"Unknown Error":"object"===typeof r&&"toString"in r?r.toString():JSON.stringify(r);new Error(e)}return t.createElement(ht,{title:"Application Error!",isOutsideRemixApp:n},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),s)}function ht(e){var r;let{title:n,renderScripts:a,isOutsideRemixApp:s,children:i}=e,{routeModules:o}=rt();return null!==o.root&&void 0!==r&&r.Layout&&!s?i:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,a?t.createElement(ct,null):null)))}var ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ft&&(window.__reactRouterVersion="7.8.2")}catch(f2){}function pt(e){let{basename:r,children:n,window:a}=e,s=t.useRef();null==s.current&&(s.current=p({window:a,v5Compat:!0}));let i=s.current,[o,l]=t.useState({action:i.action,location:i.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>i.listen(c),[i,c]),t.createElement(De,{basename:r,children:n,location:o.location,navigationType:o.action,navigator:i})}var mt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=t.forwardRef(function(e,r){let n,{onClick:a,discover:o="render",prefetch:l="none",relative:c,reloadDocument:u,replace:h,state:f,target:p,to:v,preventScrollReset:b,viewTransition:y}=e,w=i(e,d),{basename:j}=t.useContext(ae),N="string"===typeof v&&mt.test(v),_=!1;if("string"===typeof v&&N&&(n=v,ft))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),r=B(t.pathname,j);t.origin===e.origin&&null!=r?v=r+t.search+t.hash:_=!0}catch(f2){g(!1,'<Link to="'.concat(v,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(le(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=t.useContext(ae),{hash:s,pathname:i,search:o}=pe(e,{relative:r}),l=i;return"/"!==n&&(l="/"===i?n:H([n,i])),a.createHref({pathname:l,search:o,hash:s})}(v,{relative:c}),[k,A,E]=function(e,r){let n=t.useContext(tt),[a,s]=t.useState(!1),[i,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=r,f=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(a){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[a]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return n?"intent"!==e?[i,f,{}]:[i,f,{onFocus:nt(l,p),onBlur:nt(c,m),onMouseEnter:nt(d,p),onMouseLeave:nt(u,m),onTouchStart:nt(h,p)}]:[!1,f,{}]}(l,w),C=function(e){let{target:r,replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=he(),c=ce(),d=pe(e,{relative:i});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:x(c)===x(d);l(e,{replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,n,a,r,e,s,i,o])}(v,{replace:h,state:f,target:p,preventScrollReset:b,relative:c,viewTransition:y});let T=t.createElement("a",(0,s.A)((0,s.A)((0,s.A)({},w),E),{},{href:n||S,onClick:_||u?a:function(e){a&&a(e),e.defaultPrevented||C(e)},ref:dt(r,A),target:p,"data-discover":N||"render"!==o?void 0:"true"}));return k&&!N?t.createElement(t.Fragment,null,T,t.createElement(st,{page:S})):T});gt.displayName="Link";var vt=t.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:a=!1,className:o="",end:l=!1,style:c,to:d,viewTransition:h,children:f}=e,p=i(e,u),g=pe(d,{relative:p.relative}),v=ce(),b=t.useContext(Q),{navigator:x,basename:y}=t.useContext(ae),w=null!=b&&function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useContext(te);m(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=yt("useViewTransitionState"),s=pe(e,{relative:r});if(!n.isTransitioning)return!1;let i=B(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=B(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=R(s.pathname,o)||null!=R(s.pathname,i)}(g)&&!0===h,j=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,N=v.pathname,_=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(N=N.toLowerCase(),_=_?_.toLowerCase():null,j=j.toLowerCase()),_&&y&&(_=B(_,y)||_);const S="/"!==j&&j.endsWith("/")?j.length-1:j.length;let k,A=N===j||!l&&N.startsWith(j)&&"/"===N.charAt(S),E=null!=_&&(_===j||!l&&_.startsWith(j)&&"/"===_.charAt(j.length)),C={isActive:A,isPending:E,isTransitioning:w},T=A?n:void 0;k="function"===typeof o?o(C):[o,A?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof c?c(C):c;return t.createElement(gt,(0,s.A)((0,s.A)({},p),{},{"aria-current":T,className:k,ref:r,style:P,to:d,viewTransition:h}),"function"===typeof f?f(C):f)});vt.displayName="NavLink";var bt=t.forwardRef((e,r)=>{let{discover:n="render",fetcherKey:a,navigate:o,reloadDocument:l,replace:c,state:d,method:u=Me,action:f,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:b}=e,y=i(e,h),w=_t(),j=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=t.useContext(ae),a=t.useContext(ie);m(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),o=(0,s.A)({},pe(e||".",{relative:r})),l=ce();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),r=t.some(e=>""===e);if(r){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();o.search=r?"?".concat(r):""}}e&&"."!==e||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:H([n,o.pathname]));return x(o)}(f,{relative:g}),N="get"===u.toLowerCase()?"get":"post",_="string"===typeof f&&mt.test(f);return t.createElement("form",(0,s.A)((0,s.A)({ref:r,method:N,action:j,onSubmit:l?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;w(t||e.currentTarget,{fetcherKey:a,method:r,navigate:o,replace:c,state:d,relative:g,preventScrollReset:v,viewTransition:b})}},y),{},{"data-discover":_||"render"!==n?void 0:"true"}))});function xt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function yt(e){let r=t.useContext(Z);return m(r,xt(e)),r}function wt(e){g("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=t.useRef(Fe(e)),n=t.useRef(!1),a=ce(),s=t.useMemo(()=>function(e,t){let r=Fe(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(a.search,n.current?null:r.current),[a.search]),i=he(),o=t.useCallback((e,t)=>{const r=Fe("function"===typeof e?e(new URLSearchParams(s)):e);n.current=!0,i("?"+r,t)},[i,s]);return[s,o]}bt.displayName="Form";var jt=0,Nt=()=>"__".concat(String(++jt),"__");function _t(){let{router:e}=yt("useSubmit"),{basename:r}=t.useContext(ae),n=_e("useRouteId");return t.useCallback(async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:i,encType:o,formData:l,body:c}=qe(t,r);if(!1===a.navigate){let t=a.fetcherKey||Nt();await e.fetch(t,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,r,n])}var St=r(1397),kt=r(9874),At=r(4414);const Et={project_manager:{name:"Project Manager",description:"Acceso completo al sistema PMO",permissions:["*:*"],color:"from-purple-600 to-indigo-600"},executive_manager:{name:"Gestor Ejecutivo",description:"Solo dashboards y reportes ejecutivos",permissions:["portfolio:read","dashboard:read","reports:read","audit:read"],color:"from-blue-600 to-cyan-600"},pmo_assistant:{name:"Asistente de PMO",description:"Gesti\xf3n de proyectos y operaciones",permissions:["portfolio:write","projects:full","workpackages:full","schedule:full","risks:full","resources:read","files:full","reports:read"],color:"from-green-600 to-emerald-600"},financial_analyst:{name:"Analista Financiero",description:"M\xf3dulos financieros y EVM",permissions:["portfolio:read","financial:full","evm:full","cashflow:full","changes:full","reports:read","audit:read"],color:"from-orange-600 to-red-600"},project_coordinator:{name:"Coordinador de Proyectos",description:"Gesti\xf3n de tareas y cronogramas",permissions:["portfolio:read","projects:read","workpackages:write","schedule:full","resources:read","files:read","reports:read"],color:"from-teal-600 to-blue-600"},auditor:{name:"Auditor/Consultor",description:"Solo lectura en todos los m\xf3dulos",permissions:["portfolio:read","projects:read","financial:read","risks:read","schedule:read","resources:read","files:read","reports:read","audit:read"],color:"from-gray-600 to-slate-600"}},Ct={owner:"project_manager",admin:"project_manager",manager:"pmo_assistant",coordinator:"project_coordinator",analyst:"financial_analyst",viewer:"auditor",member:"pmo_assistant",user:"pmo_assistant"},Tt=(0,t.createContext)(),Pt=()=>{const e=(0,t.useContext)(Tt);if(!e)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return e},Dt=e=>{let{children:r}=e;const[n,a]=(0,t.useState)(null),[s,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(!0),[f,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{m()},[]);const m=async()=>{d(!0);try{console.log("\ud83d\udd10 Inicializando autenticaci\xf3n..."),await kt.default.initialize();const r=kt.default.getCurrentUser();if(r)console.log("\u2705 Usuario autenticado encontrado:",r.email),await v(r);else{const r=localStorage.getItem("strategiapm_user");if(r)try{var e;const t=JSON.parse(r);console.log("\ud83d\udce6 Usuario recuperado de localStorage:",t.email),a(t),i(!0),l((null===(e=Et[t.role])||void 0===e?void 0:e.permissions)||[]),p(t.organizationId||null)}catch(t){console.error("\u274c Error parseando usuario de localStorage:",t),localStorage.removeItem("strategiapm_user")}else console.log("\u2139\ufe0f No hay sesi\xf3n activa")}}catch(t){console.error("\u274c Error inicializando autenticaci\xf3n:",t)}finally{d(!1),h(!1)}},g=()=>{console.log("\ud83e\uddf9 Limpiando datos locales...");["mi-dashboard-portfolio","portfolio-data","lastSelectedProjectId","portfolioData","currentProjectId"].forEach(e=>{localStorage.getItem(e)&&(localStorage.removeItem(e),console.log("   \ud83d\uddd1\ufe0f Limpiado: ".concat(e)))});try{const e="mi-dashboard-portfolio",t=indexedDB.deleteDatabase(e);t.onsuccess=()=>{console.log("   \u2705 IndexedDB limpiado exitosamente")},t.onerror=e=>{console.warn("   \u26a0\ufe0f Error limpiando IndexedDB:",e)},t.onblocked=()=>{console.warn("   \u26a0\ufe0f Limpieza de IndexedDB bloqueada (pesta\xf1as abiertas)")}}catch(e){console.warn("   \u26a0\ufe0f Error al intentar limpiar IndexedDB:",e)}console.log("\u2705 Datos locales limpiados")},v=async e=>{try{var t,r;console.log("\ud83d\udd04 Sincronizando usuario desde Supabase...");const s=await kt.default.detectUserOrganization(),o=f;(o&&o!==s||!s&&o)&&(console.log("\ud83d\udd04 Organizaci\xf3n cambi\xf3 o usuario sin org - Limpiando datos..."),console.log("   \ud83d\udccd Org anterior:",o),console.log("   \ud83d\udccd Org nueva:",s||"ninguna"),g(),console.log("\u2705 Datos limpiados - Usuario ver\xe1 datos limpios"));let c="pmo_assistant";if(s)try{const{data:t}=await kt.default.supabase.from("organization_members").select("role").eq("user_email",e.email).eq("organization_id",s).eq("status","active").single();t&&t.role&&(c=Ct[t.role]||"pmo_assistant",console.log("\u2705 Rol detectado: ".concat(t.role," \u2192 ").concat(c)))}catch(n){console.warn("\u26a0\ufe0f No se pudo obtener rol, usando default:",n)}else console.log("\u26a0\ufe0f Usuario sin organizaci\xf3n - usando rol por defecto");const d={id:e.id,email:e.email,name:(null===(t=e.user_metadata)||void 0===t?void 0:t.name)||e.email.split("@")[0],role:c,organizationId:s,supabaseUser:!0,lastLogin:(new Date).toISOString()};return a(d),i(!0),l((null===(r=Et[c])||void 0===r?void 0:r.permissions)||[]),p(s),localStorage.setItem("strategiapm_user",JSON.stringify(d)),console.log("\u2705 Usuario sincronizado exitosamente"),d}catch(n){throw console.error("\u274c Error sincronizando usuario:",n),n}},b=async()=>{d(!0);try{console.log("\ud83d\udeaa Cerrando sesi\xf3n...");const e=await kt.default.signOut();return e.success||console.warn("\u26a0\ufe0f Error en logout de Supabase:",e.error),a(null),i(!1),l([]),p(null),localStorage.removeItem("strategiapm_user"),g(),console.log("\u2705 Sesi\xf3n cerrada y datos limpiados exitosamente"),{success:!0}}catch(e){return console.error("\u274c Error en logout:",e),{success:!1,error:e.message}}finally{d(!1)}},x={user:n,isAuthenticated:s,permissions:o,loading:c,showSplash:u,organizationId:f,login:async(e,t)=>{d(!0);try{console.log("\ud83d\udd10 Iniciando sesi\xf3n...");const r=await kt.default.signIn(e,t);if(!r.success)throw new Error(r.error||"Error al iniciar sesi\xf3n");console.log("\u2705 Autenticaci\xf3n exitosa en Supabase");const n=await v(r.user);return r.invitationActivation&&r.invitationActivation.activated>0&&console.log("\ud83c\udf89 Invitaciones activadas:",r.invitationActivation.activated),console.log("\u2705 Login completado exitosamente"),{success:!0,user:n}}catch(r){throw console.error("\u274c Error en login:",r),r}finally{d(!1)}},logout:b,register:async(e,t,r)=>{d(!0);try{console.log("\ud83d\udcdd Registrando nuevo usuario...");const n=await kt.default.signUp(e,t,r);if(!n.success)throw new Error(n.error||"Error al crear la cuenta");console.log("\u2705 Cuenta creada exitosamente");const a=await v(n.user);return n.invitationActivation&&n.invitationActivation.activated>0&&console.log("\ud83c\udf89 Invitaciones activadas:",n.invitationActivation.activated),{success:!0,user:a,invitationActivation:n.invitationActivation}}catch(n){throw console.error("\u274c Error en registro:",n),n}finally{d(!1)}},hasPermission:e=>{if(!o||0===o.length)return!1;if(o.includes("*:*"))return!0;if(o.includes(e))return!0;const[t,r]=e.split(":");return!!o.includes("".concat(t,":*"))},hasModuleAccess:e=>!(!o||0===o.length)&&(!!o.includes("*:*")||o.some(t=>t.startsWith("".concat(e,":"))||t==="".concat(e,":*"))),getUserPermissions:()=>{var e;return n&&(null===(e=Et[n.role])||void 0===e?void 0:e.permissions)||[]},getUserRoleInfo:()=>n&&Et[n.role]||null,clearAuthState:async()=>{console.log("\ud83e\uddf9 Limpiando estado de autenticaci\xf3n..."),await b()},completeSplash:()=>{h(!1)},reloadSession:async()=>{console.log("\ud83d\udd04 Recargando sesi\xf3n..."),await m()},clearLocalData:g,syncUserFromSupabase:v};return(0,At.jsx)(Tt.Provider,{value:x,children:r})},Ot=()=>{const[e,r]=(0,t.useState)(null),[n,a]=(0,t.useState)(!0),[s,i]=(0,t.useState)({canEdit:!1,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!1}),o=(0,t.useRef)(null),l=(0,t.useRef)(!1);(0,t.useEffect)(()=>{const e=async()=>{if(l.current)console.log("\u23f8\ufe0f usePermissions ya est\xe1 cargando, evitando duplicaci\xf3n...");else try{var t;l.current=!0,a(!0);const s=kt.default.getCurrentUser();if(console.log("\ud83d\udd10 usePermissions - Usuario actual:",(null===s||void 0===s?void 0:s.email)||"No autenticado"),!s||!s.email)return console.log("\u274c No hay usuario autenticado, aplicando permisos restrictivos"),r(null),void i({canEdit:!1,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!1});const o=kt.default.getCurrentOrganization();if(!o){console.log("\u23f3 Esperando detecci\xf3n de organizaci\xf3n...");try{const{data:e,error:t}=await kt.default.supabase.from("organization_members").select("id, organization_id, status").eq("user_email",s.email).eq("status","active");if(t)console.error("\u274c Error verificando membres\xeda:",t);else if(!e||0===e.length)return console.log("\ud83d\udea8 USUARIO ELIMINADO DETECTADO - No tiene membres\xedas activas"),console.log("\ud83d\udea8 Forzando cierre de sesi\xf3n para:",s.email),await kt.default.supabase.auth.signOut(),localStorage.clear(),sessionStorage.clear(),void window.location.reload()}catch(n){console.error("\u274c Error verificando membres\xeda del usuario:",n)}return void setTimeout(()=>{l.current||e()},1e3)}console.log("\ud83d\udd0d Buscando rol para:",{email:s.email,organizationId:o});const d=await kt.default.supabase.auth.getUser();console.log("\ud83d\udd0d Estado de autenticaci\xf3n antes de query:",{authUser:(null===(t=d.data.user)||void 0===t?void 0:t.email)||"No autenticado",currentUserEmail:s.email,organizationId:o});const{data:u,error:h}=await kt.default.supabase.from("organization_members").select("role, status").eq("user_email",s.email).eq("organization_id",o).eq("status","active").maybeSingle();if(console.log("\ud83d\udd0d Resultado de query membership:",{membership:u,error:h}),h)console.error("\u274c Error cargando rol:",h.code,h.message),r(null),i({canEdit:!1,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!1});else if(u){console.log("\u2705 Membership encontrado:",u);const e=u.role||"organization_member_read";r(e);const t=c(e);i(t),console.log("\ud83d\udd10 Permisos aplicados:",{role:e,permissions:t,isReadOnly:"organization_member_read"===e})}else console.log("\u274c No se encontr\xf3 membership para el usuario"),r(null),i({canEdit:!1,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!1})}catch(s){console.error("\u274c Error inesperado en usePermissions:",s),r(null),i({canEdit:!1,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!1})}finally{a(!1),l.current=!1}};e();const t=setInterval(()=>{const t=kt.default.getCurrentUser(),r=null===t||void 0===t?void 0:t.email;r!==o.current&&(console.log("\ud83d\udd04 Usuario cambi\xf3, recargando permisos...",{anterior:o.current,actual:r}),o.current=r,e())},2e3);return()=>{clearInterval(t),l.current=!1}},[]);const c=e=>{switch(e){case"owner":case"admin":return{canEdit:!0,canDelete:!0,canInvite:!0,canManageUsers:!0,canArchive:!0,canExport:!0};case"organization_member_write":return{canEdit:!0,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!0};case"organization_member_read":return{canEdit:!1,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!0};default:return{canEdit:!1,canDelete:!1,canInvite:!1,canManageUsers:!1,canArchive:!1,canExport:!1}}};return{permissions:s,isReadOnly:()=>"organization_member_read"===e,isLoading:n,userRole:e}},It=e=>{var r;let{activeSection:n,onSectionChange:a,projects:s,currentProjectId:i,setCurrentProjectId:o,workPackages:l=[],risks:c=[],evmMetrics:d={},isCollapsed:u=!1,onToggleCollapse:h}=e;const{permissions:f,isReadOnly:p}=Ot(),[m,g]=t.useState(!1),[v,b]=t.useState(null),[x,y]=t.useState(!1),[w,j]=t.useState(null),[N,_]=t.useState(null),[S,k]=t.useState(!1),A=async()=>{try{g(!0),console.log("\ud83d\udd04 Iniciando backup de base de datos...");const e=await kt.default.createDatabaseBackup();e.success?(console.log("\u2705 Backup exitoso: ".concat(e.fileName)),console.log("\ud83d\udcca Registros respaldados: ".concat(e.recordCount," de ").concat(e.tables," tablas")),alert("\u2705 Backup completado exitosamente!\n\nArchivo: ".concat(e.fileName,"\nRegistros: ").concat(e.recordCount,"\nTablas: ").concat(e.tables))):(console.error("\u274c Error en backup:",e.error),alert("\u274c Error al crear backup:\n".concat(e.error)))}catch(e){console.error("\u274c Error inesperado en backup:",e),alert("\u274c Error inesperado:\n".concat(e.message))}finally{g(!1)}};t.useEffect(()=>{(async()=>{try{const e=await kt.default.getBackupStats();e.success&&b(e)}catch(e){console.warn("\u26a0\ufe0f No se pudieron cargar estad\xedsticas de backup:",e)}})()},[]);const E=[{id:"portfolio",name:"Portafolio de Proyectos",icon:"\ud83c\udfe2",requiresEdit:!0},{id:"project-management",name:"Gesti\xf3n de Proyectos",icon:"\ud83d\udcca",requiresEdit:!1},{id:"executive",name:"Dashboard Ejecutivo",icon:"\ud83d\udcc8",requiresEdit:!1},{id:"user-management",name:"Gesti\xf3n de Usuarios",icon:"\ud83d\udc65",requiresEdit:!0}].filter(e=>!e.requiresEdit||!p()),C=e=>{switch(e){case"portfolio":return"Gesti\xf3n estrat\xe9gica de proyectos con Business Case, TIR y presupuestos";case"project-management":return"Control operativo con m\xf3dulos de riesgos, cronograma y finanzas";case"executive":return"KPIs consolidados y m\xe9tricas ejecutivas de todos los proyectos activos";case"user-management":return"Gestionar usuarios, roles y permisos de la organizaci\xf3n";default:return""}};null===s||void 0===s||s.find(e=>e.id===i);return(0,At.jsxs)(At.Fragment,{children:[u&&(0,At.jsx)("button",{onClick:h,className:"fixed top-4 left-4 z-50 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg transition-all duration-200 hover:shadow-xl",title:"Expandir men\xfa",children:(0,At.jsx)("span",{className:"text-lg font-bold",children:"\u2630"})}),(0,At.jsxs)("div",{className:"\n        fixed top-0 left-0 h-full bg-white shadow-xl z-40 \n        ".concat(u?"w-16":"w-80 lg:w-72"," \n        border-r border-gray-200\n        transition-all duration-300\n      "),children:[(0,At.jsxs)("div",{className:"border-b border-gray-200 ".concat(u?"p-2":"p-6"),children:[(0,At.jsxs)("div",{className:"flex items-center ".concat(u?"justify-center":"justify-between"),children:[!u&&(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"StrategiaPM"}),(0,At.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 z-10 relative",title:u?"Expandir sidebar":"Colapsar sidebar",style:{minWidth:"40px",minHeight:"40px"},children:(0,At.jsx)("span",{className:"text-xl font-bold",children:u?"\u2192":"\u2190"})})]}),!u&&(0,At.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,At.jsx)("p",{className:"font-medium",children:"Gesti\xf3n de Proyectos"}),(0,At.jsxs)("div",{className:"flex items-center space-x-2 px-2 py-1 bg-blue-50 rounded-lg border border-blue-200",children:[(0,At.jsx)("span",{className:"text-blue-600",children:"\ud83d\udc64"}),(0,At.jsxs)("div",{className:"flex flex-col",children:[(0,At.jsx)("span",{className:"text-xs font-medium text-blue-800",children:(null===(r=kt.default.getCurrentUser())||void 0===r?void 0:r.email)||"Usuario no autenticado"}),(0,At.jsx)("span",{className:"text-xs text-blue-600",children:kt.default.getCurrentUser()?"\ud83d\udfe2 Conectado":"\ud83d\udd34 Desconectado"})]})]}),p()&&(0,At.jsxs)("div",{className:"flex items-center space-x-2 px-2 py-1 bg-orange-50 rounded-lg border border-orange-200",children:[(0,At.jsx)("span",{className:"text-orange-600",children:"\ud83d\udc40"}),(0,At.jsxs)("div",{className:"flex flex-col",children:[(0,At.jsx)("span",{className:"text-xs font-medium text-orange-800",children:"Modo Solo Lectura"}),(0,At.jsx)("span",{className:"text-xs text-orange-600",children:"Acceso limitado a visualizaci\xf3n"})]})]}),(0,At.jsxs)("div",{className:"space-y-2",children:[kt.default.getCurrentUser()&&(0,At.jsxs)("button",{onClick:async()=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres desconectarte?\n\nEsto cerrar\xe1 completamente tu sesi\xf3n por seguridad.")){console.log("\ud83d\udeaa Cerrando sesi\xf3n de Supabase...");try{const e=await kt.default.signOut();if(e.success){console.log("\u2705 Logout completo exitoso");kt.default.getCurrentUser()&&console.warn("\u26a0\ufe0f Usuario a\xfan detectado despu\xe9s del logout, forzando recarga..."),setTimeout(()=>{console.log("\ud83d\udd04 Recargando p\xe1gina para limpiar estado..."),window.location.reload()},500)}else console.error("\u274c Error cerrando sesi\xf3n:",e.error),alert("\u274c Error al cerrar sesi\xf3n. Int\xe9ntalo de nuevo.")}catch(e){console.error("\u274c Error inesperado:",e),alert("\u274c Error inesperado al cerrar sesi\xf3n.")}}},className:"w-full flex items-center justify-center space-x-2 px-2 py-2 bg-red-50 hover:bg-red-100 border border-red-200 rounded-lg transition-colors duration-200",children:[(0,At.jsx)("span",{className:"text-red-600",children:"\ud83d\udeaa"}),(0,At.jsx)("span",{className:"text-xs font-medium text-red-800",children:"Desconectar Usuario"})]}),!kt.default.getCurrentUser()&&(0,At.jsxs)("button",{onClick:()=>{console.log("\ud83d\udd11 Abriendo modal de autenticaci\xf3n..."),window.dispatchEvent(new CustomEvent("requestSupabaseAuth",{detail:{action:"login"}}))},className:"w-full flex items-center justify-center space-x-2 px-2 py-2 bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg transition-colors duration-200",children:[(0,At.jsx)("span",{className:"text-green-600",children:"\ud83d\udd11"}),(0,At.jsx)("span",{className:"text-xs font-medium text-green-800",children:"Conectar Usuario"})]})]})]})]}),!u&&(0,At.jsx)("nav",{className:"p-3",children:(0,At.jsx)("ul",{className:"space-y-1",children:E.map(e=>(0,At.jsx)("li",{children:(0,At.jsxs)("button",{onClick:()=>a(e.id),className:"\n                      w-full flex items-center px-3 py-2 text-left rounded-lg transition-colors\n                      ".concat(n===e.id?"bg-blue-100 text-blue-700 border-l-4 border-blue-500":"text-gray-700 hover:bg-gray-100","\n                    "),children:[(0,At.jsx)("span",{className:"text-lg mr-2",children:e.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:C(e.id)})]})]})},e.id))})}),!p()&&(0,At.jsx)("div",{className:"border-t border-gray-200 mt-auto ".concat(u?"p-2":"p-4"),children:u?(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("button",{onClick:A,disabled:m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white p-3 rounded-lg transition-colors duration-200 flex items-center justify-center",title:"Descargar backup",children:(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\uddc4\ufe0f"})}),(0,At.jsx)("button",{onClick:()=>y(!0),disabled:S,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white p-3 rounded-lg transition-colors duration-200 flex items-center justify-center",title:"Restaurar backup",children:(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udd04"})})]}):(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("button",{onClick:A,disabled:m,className:"w-full px-4 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg ".concat(m?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),title:"Descargar backup completo de la base de datos (archivo JSON)",children:[(0,At.jsx)("span",{className:"text-lg",children:m?"\u23f3":"\ud83d\uddc4\ufe0f"}),(0,At.jsx)("span",{className:"font-medium",children:m?"Descargando...":"Descargar Backup"})]}),(0,At.jsxs)("button",{onClick:()=>y(!0),disabled:S,className:"w-full px-4 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg ".concat(S?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),title:"Restaurar datos desde un archivo de backup",children:[(0,At.jsx)("span",{className:"text-lg",children:S?"\u23f3":"\ud83d\udd04"}),(0,At.jsx)("span",{className:"font-medium",children:S?"Restaurando...":"Restaurar Backup"})]}),v&&(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-500 text-center",children:[(0,At.jsxs)("div",{children:["\ud83d\udcca ",v.totalRecords," registros en ",v.tablesCount," tablas"]}),v.stats&&(0,At.jsxs)("div",{className:"mt-1",children:["Proyectos: ",v.stats.projects||0," | Riesgos: ",v.stats.risks||0," | Tareas: ",v.stats.tasks||0]})]})]})}),x&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\ud83d\udd04 Restaurar Backup"}),(0,At.jsx)("button",{onClick:()=>{y(!1),j(null),_(null)},className:"text-gray-500 hover:text-gray-700 text-xl",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar archivo de backup (.json)"}),(0,At.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!t.name.endsWith(".json"))return void alert("\u274c Error: El archivo debe ser un archivo JSON (.json)");j(t);const r=new FileReader;r.onload=e=>{try{const t=JSON.parse(e.target.result),r=kt.default.getBackupPreview(t);r.success?(_(r),console.log("\u2705 Archivo de backup v\xe1lido:",r)):(alert("\u274c Error validando archivo: ".concat(r.error)),j(null),_(null))}catch(t){alert("\u274c Error leyendo archivo: ".concat(t.message)),j(null),_(null)}},r.readAsText(t)},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),w&&(0,At.jsxs)("p",{className:"mt-2 text-sm text-green-600",children:["\u2705 Archivo seleccionado: ",w.name]})]}),N&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"\ud83d\udccb Vista Previa del Backup"}),(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"\ud83d\udcc5 Fecha:"}),(0,At.jsx)("span",{className:"ml-2",children:new Date(N.timestamp).toLocaleString()})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"\ud83d\udcca Total registros:"}),(0,At.jsx)("span",{className:"ml-2 font-bold text-blue-600",children:N.totalRecords})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"\ud83d\udccb Tablas:"}),(0,At.jsx)("span",{className:"ml-2",children:Object.keys(N.preview).length})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"\ud83d\udd22 Versi\xf3n:"}),(0,At.jsx)("span",{className:"ml-2",children:N.version})]})]})}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-700",children:"Detalles por tabla:"}),Object.entries(N.preview).map(e=>{let[t,r]=e;return(0,At.jsxs)("div",{className:"flex justify-between items-center bg-white border rounded-lg px-3 py-2",children:[(0,At.jsx)("span",{className:"font-medium capitalize",children:t.replace("_"," ")}),(0,At.jsxs)("span",{className:"text-blue-600 font-bold",children:[r.count," registros"]})]},t)})]})]}),(0,At.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-red-500 text-xl mr-3",children:"\u26a0\ufe0f"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Advertencia Importante"}),(0,At.jsxs)("ul",{className:"text-sm text-red-700 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 Esta acci\xf3n es ",(0,At.jsx)("strong",{children:"IRREVERSIBLE"})]}),(0,At.jsxs)("li",{children:["\u2022 Se ",(0,At.jsx)("strong",{children:"eliminar\xe1n TODOS los datos actuales"})]}),(0,At.jsx)("li",{children:"\u2022 Se restaurar\xe1n los datos del archivo seleccionado"}),(0,At.jsx)("li",{children:"\u2022 Aseg\xfarate de tener un backup actual antes de continuar"})]})]})]})}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsx)("button",{onClick:()=>{y(!1),j(null),_(null)},className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Cancelar"}),(0,At.jsx)("button",{onClick:async()=>{if(!w||!N)return void alert("\u274c Error: No hay archivo seleccionado o archivo inv\xe1lido");const e="\u26a0\ufe0f ADVERTENCIA: Esta acci\xf3n restaurar\xe1 ".concat(N.totalRecords," registros de ").concat(Object.keys(N.preview).length," tablas.\n\n\xbfEst\xe1s seguro de que quieres continuar?\n\nEsto puede sobrescribir datos existentes.");if(!window.confirm(e))return;if(window.confirm("\ud83d\udea8 \xdaLTIMA CONFIRMACI\xd3N\n\nEsta acci\xf3n es IRREVERSIBLE y puede sobrescribir TODOS los datos actuales.\n\n\xbfContinuar con la restauraci\xf3n?"))try{k(!0),console.log("\ud83d\udd04 Iniciando restauraci\xf3n de backup...");const e=new FileReader;e.onload=async e=>{try{const t=JSON.parse(e.target.result),r={clearExisting:!0},n=await kt.default.restoreFromBackup(t,r);if(n.success){const e="\u2705 Restauraci\xf3n completada exitosamente!\n\n\ud83d\udcca Registros procesados: ".concat(n.processed,"\n\ud83d\udccb Errores: ").concat(n.errors.length,"\n\nLos datos han sido restaurados desde el backup.");alert(e);const t=await kt.default.getBackupStats();t.success&&b(t),y(!1),j(null),_(null)}else alert("\u274c Error en restauraci\xf3n: ".concat(n.error))}catch(t){console.error("\u274c Error procesando restauraci\xf3n:",t),alert("\u274c Error inesperado: ".concat(t.message))}finally{k(!1)}},e.readAsText(w)}catch(t){console.error("\u274c Error iniciando restauraci\xf3n:",t),alert("\u274c Error inesperado: ".concat(t.message)),k(!1)}},disabled:!w||!N||S,className:"flex-1 px-4 py-2 rounded-lg transition-colors ".concat(w&&N&&!S?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-300 cursor-not-allowed"),children:S?"\u23f3 Restaurando...":"\ud83d\udea8 Restaurar Backup"})]})]})})})]})]})},Mt=864e5,Rt=e=>e?"string"===typeof e?e:e.toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Lt=e=>{const t=e.getDay();return 0!==t&&6!==t},Ft=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!t)return 0;const n=new Date(e),a=new Date(t);if(r)return Math.ceil((a-n)/Mt);{let e=0;const t=new Date(n);for(;t<a;)Lt(t)&&e++,t.setDate(t.getDate()+1);return e}},Bt=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=new Date(e);if(r)return n.setDate(n.getDate()+t),Rt(n);{let e=0;for(;e<t;)n.setDate(n.getDate()+1),Lt(n)&&e++;return Rt(n)}},zt=e=>{let{projects:r,portfolioMetrics:n={},workPackages:a=[],risks:i=[],tasksByProject:o={}}=e;const l=[{name:"Activos",count:(null===n||void 0===n?void 0:n.activeProjects)||r.filter(e=>"active"===e.status).length,color:"#3B82F6"},{name:"Completados",count:(null===n||void 0===n?void 0:n.completedProjects)||r.filter(e=>"completed"===e.status).length,color:"#10B981"},{name:"En Pausa",count:r.filter(e=>"on-hold"===e.status).length,color:"#F59E0B"},{name:"Cancelados",count:r.filter(e=>"cancelled"===e.status).length,color:"#EF4444"}].filter(e=>e.count>0),c=[{name:"Alta",count:r.filter(e=>"high"===e.priority).length,color:"#EF4444"},{name:"Media",count:r.filter(e=>"medium"===e.priority).length,color:"#F59E0B"},{name:"Baja",count:r.filter(e=>"low"===e.priority).length,color:"#10B981"}].filter(e=>e.count>0),d=r.filter(e=>"active"===e.status).map((e,t)=>{const r=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return{name:e.name.length>20?e.name.substring(0,20)+"...":e.name,budget:e.budget/1e3,status:e.status,color:r[t%r.length]}}),u=[{name:"Completados",count:a.filter(e=>"completed"===e.status).length,color:"#10B981"},{name:"En Progreso",count:a.filter(e=>"in-progress"===e.status).length,color:"#3B82F6"},{name:"Pendientes",count:a.filter(e=>"pending"===e.status).length,color:"#F59E0B"},{name:"Retrasados",count:a.filter(e=>"delayed"===e.status).length,color:"#EF4444"}].filter(e=>e.count>0),h=[{name:"Alta",count:i.filter(e=>"high"===e.priority).length,color:"#EF4444"},{name:"Media",count:i.filter(e=>"medium"===e.priority).length,color:"#F59E0B"},{name:"Baja",count:i.filter(e=>"low"===e.priority).length,color:"#10B981"}].filter(e=>e.count>0),f=[{name:"Activos",count:i.filter(e=>"active"===e.status).length,color:"#EF4444"},{name:"Mitigados",count:i.filter(e=>"mitigated"===e.status).length,color:"#10B981"},{name:"Cerrados",count:i.filter(e=>"closed"===e.status).length,color:"#6B7280"}].filter(e=>e.count>0),p=e=>{let{data:t,title:r,valueKey:n,colorKey:a="color",height:s=200}=e;const i=Math.max(...t.map(e=>e[n]));return(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:r}),(0,At.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>{const r=((e,t)=>{if(e[a])return e[a];const r=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return r[t%r.length]})(e,t),s=i>0?"".concat(e[n]/i*100,"%"):"0%",o="number"===typeof e[n]?e[n].toFixed(0):e[n];return(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"w-24 text-sm text-gray-600 truncate",children:e.name}),(0,At.jsx)("div",{className:"flex-1 mx-3",children:(0,At.jsx)("div",{className:"bg-gray-200 rounded-full h-6 relative",children:(0,At.jsx)("div",{className:"h-6 rounded-full flex items-center justify-end pr-2 text-white text-xs font-medium transition-all duration-300",style:{backgroundColor:r,width:s,minWidth:"40px"},children:o})})}),(0,At.jsx)("div",{className:"w-16 text-sm text-gray-600 text-right font-medium",children:o})]},t)})})]})},m=e=>{let{data:t,title:r}=e;const n=t.reduce((e,t)=>e+t.count,0);let a=0;return(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:r}),(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("svg",{width:"150",height:"150",className:"transform -rotate-90",children:t.map((e,t)=>{const r=e.count/n*100/100*360,s=2*Math.PI*60,i=r/360*s,o="".concat(i," ").concat(s-i),l=-a;return a+=i,(0,At.jsx)("circle",{cx:"75",cy:"75",r:"60",fill:"transparent",stroke:e.color,strokeWidth:"20",strokeDasharray:o,strokeDashoffset:l,className:"transition-all duration-500"},t)})}),(0,At.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:n}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Total"})]})})]}),(0,At.jsx)("div",{className:"ml-6 space-y-2",children:t.map((e,t)=>(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),(0,At.jsxs)("div",{className:"text-sm text-gray-700",children:[e.name,": ",e.count," (",(e.count/n*100).toFixed(1),"%)"]})]},t))})]})]})},g=()=>{const e=20,n=!1,a=(0,t.useRef)(null),i=(0,t.useRef)(null),l=(0,t.useRef)(!1),c=(0,t.useMemo)(()=>{if(0===r.length)return{start:new Date,end:new Date};const e=r.flatMap(e=>[new Date(e.startDate),new Date(e.endDate)]),t=new Date(Math.min(...e.map(e=>e.getTime()))),n=new Date(Math.max(...e.map(e=>e.getTime())));return{start:t,end:n}},[r]),d=(0,t.useMemo)(()=>Rt(c.start),[c.start]),u=(0,t.useMemo)(()=>{const e=d,t=Rt(c.end);return Math.max(1,Ft(e,Bt(t,1,n),n))},[d,c.end,n]),h=(0,t.useMemo)(()=>u*e,[u]),f=(0,t.useMemo)(()=>{const t=Rt(new Date),r=new Date(t),n=new Date(d),a=Math.floor((r-n)/Mt);return Math.min(Math.max(0,a*e),h)},[d,e,h]),p="#10B981",m="#EF4444",g="#4A5568",v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;const r=(o[e]||[]).filter(e=>new Date(e.endDate)<=t);if(0===r.length)return g;const n=r.every(e=>100===e.progress);return n?p:m},b=(0,t.useMemo)(()=>r.map(t=>{const r=new Date(t.startDate),n=new Date(t.endDate),a=new Date(d),i=Math.floor((r-a)/Mt),l=Math.floor((n-a)/Mt),c=Math.max(1,l-i+1),u=(o[t.id]||[]).filter(e=>e.isMilestone).sort((e,t)=>new Date(e.startDate)-new Date(t.startDate)).map((t,r)=>{const n=new Date(t.startDate),i=Math.floor((n-a)/Mt);return(0,s.A)((0,s.A)({},t),{},{leftPx:i*e,number:r+1})});return{id:t.id,name:t.name,startDate:t.startDate,endDate:t.endDate,leftPx:i*e,widthPx:c*e,progressPercentage:t.progressPercentage,progressColor:v(t.id),milestones:u,totalDays:c}}),[r,d,e,n,o]),x=(0,t.useMemo)(()=>{const t=[],r=new Date(d),a=new Date(Rt(c.end)),s=new Date(r);for(;s<=a;){const r=new Date(s),i=new Date(s);i.setDate(i.getDate()+6);const o=Math.min(7,Ft(r,Bt(a,1,n),n));t.push({label:"S ".concat(r.getDate(),"\u2014").concat(i.getDate()),sub:r.toLocaleDateString("es",{month:"short"}),width:o*e}),s.setDate(s.getDate()+7)}return t},[d,c.end,e,n]);return(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\ud83d\udcc5 Timeline de Proyectos"}),(0,At.jsx)("div",{className:"rounded-lg p-2 max-w-full overflow-hidden",style:{maxWidth:"calc(100vw - 150px)"},children:(0,At.jsx)("div",{className:"rounded-lg p-2 max-w-full overflow-x-auto overflow-hidden",children:(0,At.jsxs)("div",{className:"rounded-lg p-2 flex flex-col",children:[(0,At.jsxs)("div",{className:"flex mb-2 max-w-full overflow-hidden",children:[(0,At.jsx)("div",{className:"rounded-lg p-2 w-64 flex-shrink-0 flex items-center",children:(0,At.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"Proyectos"})}),(0,At.jsx)("div",{className:"rounded-lg p-2 flex-1 ml-2 min-w-0",children:(0,At.jsx)("div",{ref:a,onScroll:e=>{i.current&&!l.current&&(l.current=!0,i.current.scrollLeft=e.currentTarget.scrollLeft,setTimeout(()=>{l.current=!1},10))},className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",children:(0,At.jsx)("div",{className:"flex",style:{width:h},children:x.map((e,t)=>(0,At.jsxs)("div",{className:"text-xs text-gray-600 text-center border-r border-gray-200 flex-shrink-0 py-2",style:{width:e.width,minWidth:e.width},children:[(0,At.jsx)("div",{className:"font-medium",children:e.label}),(0,At.jsx)("div",{className:"text-gray-400",children:e.sub})]},t))})})})]}),(0,At.jsxs)("div",{className:"flex max-w-full overflow-hidden",children:[(0,At.jsx)("div",{className:"rounded-lg p-2 w-64 flex-shrink-0",children:(0,At.jsx)("div",{className:"relative",style:{height:"400px"},children:b.map((e,t)=>(0,At.jsx)("div",{className:"absolute text-sm font-medium text-gray-700 truncate flex items-center",style:{top:10+58*t,height:50,width:"100%"},children:e.name},e.id))})}),(0,At.jsx)("div",{className:"rounded-lg p-2 flex-1 ml-2 min-w-0",children:(0,At.jsx)("div",{ref:i,onScroll:e=>{a.current&&!l.current&&(l.current=!0,a.current.scrollLeft=e.currentTarget.scrollLeft,setTimeout(()=>{l.current=!1},10))},className:"overflow-x-auto overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",style:{height:"400px"},children:(0,At.jsxs)("div",{style:{width:h,position:"relative"},children:[f>0&&f<h&&(0,At.jsx)("div",{className:"absolute z-10 w-0.5 bg-red-500",style:{left:f,top:0,height:"".concat(58*r.length+10,"px")},children:(0,At.jsx)("div",{className:"bg-red-500 text-white text-xs px-1 py-0.5 rounded -mt-2 -ml-6 whitespace-nowrap",children:"HOY 500"})}),b.map((e,t)=>(0,At.jsx)("div",{className:"absolute",style:{left:e.leftPx,top:10+58*t,width:e.widthPx,height:46},children:(0,At.jsx)("div",{className:"relative rounded flex items-center px-2 text-white text-xs font-medium h-full",style:{backgroundColor:e.progressColor},children:e.milestones.map(t=>(0,At.jsx)("div",{className:"absolute top-1/2 transform -translate-y-1/2 bg-white border-2 border-blue-600 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold text-blue-600 shadow-sm z-10",style:{left:t.leftPx-e.leftPx},title:"Hito ".concat(t.number,": ").concat(t.name),children:t.number},t.id))})},e.id))]})})})]})]})})}),(0,At.jsxs)("div",{className:"mt-4 text-xs text-gray-500 flex justify-between",children:[(0,At.jsxs)("span",{children:["Inicio: ",new Date(c.start).toLocaleDateString("es")]}),(0,At.jsxs)("span",{children:["Fin: ",new Date(c.end).toLocaleDateString("es")]})]})]})},v=()=>{const e=r.reduce((e,t)=>e+t.budget,0),t=r.reduce((e,t)=>e+t.contingencyReserve,0),n=r.reduce((e,t)=>e+t.managementReserve,0),a=t+n;return(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\ud83d\udcb0 M\xe9tricas Financieras Consolidadas"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,At.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",(e/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-blue-600",children:"Presupuesto Total"})]}),(0,At.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",(a/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-green-600",children:"Reservas Totales"})]})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("div",{className:"flex items-center justify-between",children:(0,At.jsx)("span",{className:"text-sm font-medium",children:"Distribuci\xf3n del Presupuesto:"})}),r.map((t,r)=>{const n=t.budget/e*100;return(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"w-24 text-sm text-gray-600 truncate",children:t.name}),(0,At.jsx)("div",{className:"flex-1 mx-3",children:(0,At.jsx)("div",{className:"bg-gray-200 rounded-full h-4 relative",children:(0,At.jsxs)("div",{className:"h-4 bg-blue-500 rounded-full flex items-center justify-end pr-2 text-white text-xs",style:{width:"".concat(n,"%"),minWidth:"40px"},children:[n.toFixed(1),"%"]})})}),(0,At.jsxs)("div",{className:"w-16 text-sm text-gray-600 text-right",children:["$",(t.budget/1e3).toFixed(0),"K"]})]},t.id)})]})]})};return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.length>0&&(0,At.jsx)(m,{data:l,title:"\ud83d\udcca Distribuci\xf3n por Estado"}),c.length>0&&(0,At.jsx)(m,{data:c,title:"\u26a1 Distribuci\xf3n por Prioridad"})]}),d.length>0&&(0,At.jsx)(p,{data:d,title:"\ud83d\udcb0 Presupuesto por Proyecto (K$)",valueKey:"budget",colorKey:"color"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.length>0&&(0,At.jsx)(m,{data:u,title:"\ud83d\udccb Estado de Work Packages"}),f.length>0&&(0,At.jsx)(m,{data:f,title:"\u26a0\ufe0f Estado de Riesgos"})]}),h.length>0&&(0,At.jsx)(p,{data:h,title:"\ud83c\udfaf Prioridad de Riesgos",valueKey:"count"}),(0,At.jsx)(g,{}),(0,At.jsx)(v,{})]})},Ut=e=>{let{projects:t,portfolioMetrics:r={}}=e;const n=t.filter(e=>{const t=new Date(e.endDate)<new Date&&"completed"!==e.status,r="high"===e.priority;return t||r&&"active"===e.status}),a=t.filter(e=>!(null===r||void 0===r||!r.totalBudget||r.totalBudget<=0)&&e.budget>.3*r.totalBudget),s=t.filter(e=>{const t=(new Date(e.endDate)-new Date)/864e5;return t>0&&t<=30&&"active"===e.status}),i=[];n.length>0&&i.push({type:"critical",title:"Proyectos Cr\xedticos",message:"".concat(n.length," proyecto(s) requieren atenci\xf3n inmediata"),details:n.map(e=>e.name),icon:"\ud83d\udea8",color:"red"}),a.length>0&&i.push({type:"budget",title:"Concentraci\xf3n de Presupuesto",message:"".concat(a.length," proyecto(s) concentran >30% del presupuesto total"),details:a.map(e=>"".concat(e.name,": $").concat((e.budget/1e3).toFixed(0),"K")),icon:"\ud83d\udcb0",color:"yellow"}),s.length>0&&i.push({type:"deadline",title:"Deadlines Pr\xf3ximos",message:"".concat(s.length," proyecto(s) terminan en los pr\xf3ximos 30 d\xedas"),details:s.map(e=>{const t=Math.ceil((new Date(e.endDate)-new Date)/864e5);return"".concat(e.name,": ").concat(t," d\xedas")}),icon:"\u23f0",color:"blue"}),(null===r||void 0===r?void 0:r.activeProjects)>5&&i.push({type:"capacity",title:"Alta Carga de Proyectos",message:"".concat(r.activeProjects," proyectos activos pueden sobrecargar recursos"),details:["Considerar priorizaci\xf3n de proyectos","Evaluar capacidad de recursos"],icon:"\u26a1",color:"purple"}),(null===r||void 0===r?void 0:r.completedProjects)>0&&0===n.length&&i.push({type:"success",title:"Portfolio Saludable",message:"".concat(r.completedProjects," proyecto(s) completado(s) sin alertas cr\xedticas"),details:["Excelente gesti\xf3n del portfolio","Continuar con las mejores pr\xe1cticas"],icon:"\u2705",color:"green"});const o=e=>{switch(e){case"red":return"bg-red-50 border-red-500 text-red-700";case"yellow":return"bg-yellow-50 border-yellow-500 text-yellow-700";case"blue":return"bg-blue-50 border-blue-500 text-blue-700";case"purple":return"bg-purple-50 border-purple-500 text-purple-700";case"green":return"bg-green-50 border-green-500 text-green-700";default:return"bg-gray-50 border-gray-500 text-gray-700"}},l=e=>{switch(e){case"red":return"text-red-500";case"yellow":return"text-yellow-500";case"blue":return"text-blue-500";case"purple":return"text-purple-500";case"green":return"text-green-500";default:return"text-gray-500"}};return 0===i.length?(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\ud83d\udd14 Alertas Corporativas"}),(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)("div",{className:"text-4xl mb-2",children:"\u2705"}),(0,At.jsx)("div",{children:"No hay alertas activas"}),(0,At.jsx)("div",{className:"text-sm mt-1",children:"El portfolio est\xe1 funcionando correctamente"})]})]}):(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:["\ud83d\udd14 Alertas Corporativas",(0,At.jsx)("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:i.filter(e=>"critical"===e.type).length})]}),(0,At.jsx)("div",{className:"space-y-4",children:i.map((e,t)=>(0,At.jsx)("div",{className:"border-l-4 p-4 rounded-lg ".concat(o(e.color)),children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-xl mr-3 ".concat(l(e.color)),children:e.icon}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("div",{className:"font-semibold mb-1",children:e.title}),(0,At.jsx)("div",{className:"text-sm mb-2",children:e.message}),e.details&&e.details.length>0&&(0,At.jsx)("div",{className:"text-xs space-y-1",children:e.details.map((e,t)=>(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"w-2 h-2 bg-current rounded-full mr-2 opacity-50"}),e]},t))})]})]})},t))}),(0,At.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,At.jsx)("span",{className:"font-medium text-gray-700",children:"Resumen de Alertas:"}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsxs)("span",{className:"text-red-600",children:["\ud83d\udea8 ",i.filter(e=>"critical"===e.type).length," Cr\xedticas"]}),(0,At.jsxs)("span",{className:"text-yellow-600",children:["\u26a0\ufe0f ",i.filter(e=>"yellow"===e.color).length," Advertencias"]}),(0,At.jsxs)("span",{className:"text-blue-600",children:["\u2139\ufe0f ",i.filter(e=>"blue"===e.color).length," Informativas"]})]})]})})]})};var qt=r(4980);function Wt(e){return e+.5|0}const Ht=(e,t,r)=>Math.max(Math.min(e,r),t);function Vt(e){return Ht(Wt(2.55*e),0,255)}function Gt(e){return Ht(Wt(255*e),0,255)}function Kt(e){return Ht(Wt(e/2.55)/100,0,1)}function $t(e){return Ht(Wt(100*e),0,100)}const Yt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xt=[..."0123456789ABCDEF"],Jt=e=>Xt[15&e],Zt=e=>Xt[(240&e)>>4]+Xt[15&e],Qt=e=>(240&e)>>4===(15&e);function er(e){var t=(e=>Qt(e.r)&&Qt(e.g)&&Qt(e.b)&&Qt(e.a))(e)?Jt:Zt;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const tr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function rr(e,t,r){const n=t*Math.min(r,1-r),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return r-n*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function nr(e,t,r){const n=function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return r-r*t*Math.max(Math.min(a,4-a,1),0)};return[n(5),n(3),n(1)]}function ar(e,t,r){const n=rr(e,1,.5);let a;for(t+r>1&&(a=1/(t+r),t*=a,r*=a),a=0;a<3;a++)n[a]*=1-t-r,n[a]+=t;return n}function sr(e){const t=e.r/255,r=e.g/255,n=e.b/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=(a+s)/2;let o,l,c;return a!==s&&(c=a-s,l=i>.5?c/(2-a-s):c/(a+s),o=function(e,t,r,n,a){return e===a?(t-r)/n+(t<r?6:0):t===a?(r-e)/n+2:(e-t)/n+4}(t,r,n,c,a),o=60*o+.5),[0|o,l||0,i]}function ir(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(Gt)}function or(e,t,r){return ir(rr,e,t,r)}function lr(e){return(e%360+360)%360}function cr(e){const t=tr.exec(e);let r,n=255;if(!t)return;t[5]!==r&&(n=t[6]?Vt(+t[5]):Gt(+t[5]));const a=lr(+t[2]),s=+t[3]/100,i=+t[4]/100;return r="hwb"===t[1]?function(e,t,r){return ir(ar,e,t,r)}(a,s,i):"hsv"===t[1]?function(e,t,r){return ir(nr,e,t,r)}(a,s,i):or(a,s,i),{r:r[0],g:r[1],b:r[2],a:n}}const dr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ur={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let hr;function fr(e){hr||(hr=function(){const e={},t=Object.keys(ur),r=Object.keys(dr);let n,a,s,i,o;for(n=0;n<t.length;n++){for(i=o=t[n],a=0;a<r.length;a++)s=r[a],o=o.replace(s,dr[s]);s=parseInt(ur[i],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),hr.transparent=[0,0,0,0]);const t=hr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const pr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const mr=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,gr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function vr(e,t,r){if(e){let n=sr(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,0===t?360:1)),n=or(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function br(e,t){return e?Object.assign(t||{},e):e}function xr(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Gt(e[3]))):(t=br(e,{r:0,g:0,b:0,a:1})).a=Gt(t.a),t}function yr(e){return"r"===e.charAt(0)?function(e){const t=pr.exec(e);let r,n,a,s=255;if(t){if(t[7]!==r){const e=+t[7];s=t[8]?Vt(e):Ht(255*e,0,255)}return r=+t[1],n=+t[3],a=+t[5],r=255&(t[2]?Vt(r):Ht(r,0,255)),n=255&(t[4]?Vt(n):Ht(n,0,255)),a=255&(t[6]?Vt(a):Ht(a,0,255)),{r:r,g:n,b:a,a:s}}}(e):cr(e)}class wr{constructor(e){if(e instanceof wr)return e;const t=typeof e;let r;"object"===t?r=xr(e):"string"===t&&(r=function(e){var t,r=e.length;return"#"===e[0]&&(4===r||5===r?t={r:255&17*Yt[e[1]],g:255&17*Yt[e[2]],b:255&17*Yt[e[3]],a:5===r?17*Yt[e[4]]:255}:7!==r&&9!==r||(t={r:Yt[e[1]]<<4|Yt[e[2]],g:Yt[e[3]]<<4|Yt[e[4]],b:Yt[e[5]]<<4|Yt[e[6]],a:9===r?Yt[e[7]]<<4|Yt[e[8]]:255})),t}(e)||fr(e)||yr(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=br(this._rgb);return e&&(e.a=Kt(e.a)),e}set rgb(e){this._rgb=xr(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Kt(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?er(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=sr(e),r=t[0],n=$t(t[1]),a=$t(t[2]);return e.a<255?"hsla(".concat(r,", ").concat(n,"%, ").concat(a,"%, ").concat(Kt(e.a),")"):"hsl(".concat(r,", ").concat(n,"%, ").concat(a,"%)")}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let a;const s=t===a?.5:t,i=2*s-1,o=r.a-n.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;a=1-l,r.r=255&l*r.r+a*n.r+.5,r.g=255&l*r.g+a*n.g+.5,r.b=255&l*r.b+a*n.b+.5,r.a=s*r.a+(1-s)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,r){const n=gr(Kt(e.r)),a=gr(Kt(e.g)),s=gr(Kt(e.b));return{r:Gt(mr(n+r*(gr(Kt(t.r))-n))),g:Gt(mr(a+r*(gr(Kt(t.g))-a))),b:Gt(mr(s+r*(gr(Kt(t.b))-s))),a:e.a+r*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new wr(this.rgb)}alpha(e){return this._rgb.a=Gt(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Wt(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return vr(this._rgb,2,e),this}darken(e){return vr(this._rgb,2,-e),this}saturate(e){return vr(this._rgb,1,e),this}desaturate(e){return vr(this._rgb,1,-e),this}rotate(e){return function(e,t){var r=sr(e);r[0]=lr(r[0]+t),r=or(r),e.r=r[0],e.g=r[1],e.b=r[2]}(this._rgb,e),this}}function jr(){}const Nr=(()=>{let e=0;return()=>e++})();function _r(e){return null===e||void 0===e}function Sr(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function kr(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Ar(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Er(e,t){return Ar(e)?e:t}function Cr(e,t){return"undefined"===typeof e?t:e}const Tr=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Pr(e,t,r){if(e&&"function"===typeof e.call)return e.apply(r,t)}function Dr(e,t,r,n){let a,s,i;if(Sr(e))if(s=e.length,n)for(a=s-1;a>=0;a--)t.call(r,e[a],a);else for(a=0;a<s;a++)t.call(r,e[a],a);else if(kr(e))for(i=Object.keys(e),s=i.length,a=0;a<s;a++)t.call(r,e[i[a]],i[a])}function Or(e,t){let r,n,a,s;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],s=t[r],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function Ir(e){if(Sr(e))return e.map(Ir);if(kr(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let a=0;for(;a<n;++a)t[r[a]]=Ir(e[r[a]]);return t}return e}function Mr(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Rr(e,t,r,n){if(!Mr(e))return;const a=t[e],s=r[e];kr(a)&&kr(s)?Lr(a,s,n):t[e]=Ir(s)}function Lr(e,t,r){const n=Sr(t)?t:[t],a=n.length;if(!kr(e))return e;const s=(r=r||{}).merger||Rr;let i;for(let o=0;o<a;++o){if(i=n[o],!kr(i))continue;const t=Object.keys(i);for(let n=0,a=t.length;n<a;++n)s(t[n],e,i,r)}return e}function Fr(e,t){return Lr(e,t,{merger:Br})}function Br(e,t,r){if(!Mr(e))return;const n=t[e],a=r[e];kr(n)&&kr(a)?Fr(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ir(a))}const zr={"":e=>e,x:e=>e.x,y:e=>e.y};function Ur(e,t){const r=zr[t]||(zr[t]=function(e){const t=function(e){const t=e.split("."),r=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(e);return e=>{for(const r of t){if(""===r)break;e=e&&e[r]}return e}}(t));return r(e)}function qr(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Wr=e=>"undefined"!==typeof e,Hr=e=>"function"===typeof e,Vr=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};const Gr=Math.PI,Kr=2*Gr,$r=Kr+Gr,Yr=Number.POSITIVE_INFINITY,Xr=Gr/180,Jr=Gr/2,Zr=Gr/4,Qr=2*Gr/3,en=Math.log10,tn=Math.sign;function rn(e,t,r){return Math.abs(e-t)<r}function nn(e){const t=Math.round(e);e=rn(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(en(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function an(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function sn(e,t,r){let n,a,s;for(n=0,a=e.length;n<a;n++)s=e[n][r],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function on(e){return e*(Gr/180)}function ln(e){return e*(180/Gr)}function cn(e){if(!Ar(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function dn(e,t){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);let s=Math.atan2(n,r);return s<-.5*Gr&&(s+=Kr),{angle:s,distance:a}}function un(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function hn(e,t){return(e-t+$r)%Kr-Gr}function fn(e){return(e%Kr+Kr)%Kr}function pn(e,t,r,n){const a=fn(e),s=fn(t),i=fn(r),o=fn(s-a),l=fn(i-a),c=fn(a-s),d=fn(a-i);return a===s||a===i||n&&s===i||o>l&&c<d}function mn(e,t,r){return Math.max(t,Math.min(r,e))}function gn(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function vn(e,t,r){r=r||(r=>e[r]<t);let n,a=e.length-1,s=0;for(;a-s>1;)n=s+a>>1,r(n)?s=n:a=n;return{lo:s,hi:a}}const bn=(e,t,r,n)=>vn(e,r,n?n=>{const a=e[n][t];return a<r||a===r&&e[n+1][t]===r}:n=>e[n][t]<r),xn=(e,t,r)=>vn(e,r,n=>e[n][t]>=r);const yn=["push","pop","shift","splice","unshift"];function wn(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(yn.forEach(t=>{delete e[t]}),delete e._chartjs)}function jn(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Nn="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function _n(e,t){let r=[],n=!1;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];r=s,n||(n=!0,Nn.call(window,()=>{n=!1,e.apply(t,r)}))}}const Sn=e=>"start"===e?"left":"end"===e?"right":"center",kn=(e,t,r)=>"start"===e?t:"end"===e?r:(t+r)/2;function An(e,t,r){const n=t.length;let a=0,s=n;if(e._sorted){const{iScale:i,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:f,maxDefined:p}=i.getUserBounds();if(f){if(a=Math.min(bn(l,d,u).lo,r?n:bn(t,d,i.getPixelForValue(u)).lo),c){const e=l.slice(0,a+1).reverse().findIndex(e=>!_r(e[o.axis]));a-=Math.max(0,e)}a=mn(a,0,n-1)}if(p){let e=Math.max(bn(l,i.axis,h,!0).hi+1,r?0:bn(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!_r(e[o.axis]));e+=Math.max(0,t)}s=mn(e,a,n)-a}else s=n-a}return{start:a,count:s}}function En(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),s}const Cn=e=>0===e||1===e,Tn=(e,t,r)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Kr/r),Pn=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*Kr/r)+1,Dn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Jr),easeOutSine:e=>Math.sin(e*Jr),easeInOutSine:e=>-.5*(Math.cos(Gr*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Cn(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Cn(e)?e:Tn(e,.075,.3),easeOutElastic:e=>Cn(e)?e:Pn(e,.075,.3),easeInOutElastic(e){const t=.1125;return Cn(e)?e:e<.5?.5*Tn(2*e,t,.45):.5+.5*Pn(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Dn.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},easeInOutBounce:e=>e<.5?.5*Dn.easeInBounce(2*e):.5*Dn.easeOutBounce(2*e-1)+.5};function On(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function In(e){return On(e)?e:new wr(e)}function Mn(e){return On(e)?e:new wr(e).saturate(.5).darken(.1).hexString()}const Rn=["x","y","borderWidth","radius","tension"],Ln=["color","borderColor","backgroundColor"];const Fn=new Map;function Bn(e,t,r){return function(e,t){t=t||{};const r=e+JSON.stringify(t);let n=Fn.get(r);return n||(n=new Intl.NumberFormat(e,t),Fn.set(r,n)),n}(t,r).format(e)}const zn={values:e=>Sr(e)?e:""+e,numeric(e,t,r){if(0===e)return"0";const n=this.chart.options.locale;let a,s=e;if(r.length>1){const t=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),s=function(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e));return r}(e,r)}const i=en(Math.abs(s)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:a,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Bn(e,n,l)},logarithmic(e,t,r){if(0===e)return"0";const n=r[t].significand||e/Math.pow(10,Math.floor(en(e)));return[1,2,3,5,10,15].includes(n)||t>.8*r.length?zn.numeric.call(this,e,t,r):""}};var Un={formatters:zn};const qn=Object.create(null),Wn=Object.create(null);function Hn(e,t){if(!t)return e;const r=t.split(".");for(let n=0,a=r.length;n<a;++n){const t=r[n];e=e[t]||(e[t]=Object.create(null))}return e}function Vn(e,t,r){return"string"===typeof t?Lr(Hn(e,t),r):Lr(Hn(e,""),t)}class Gn{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Mn(t.backgroundColor),this.hoverBorderColor=(e,t)=>Mn(t.borderColor),this.hoverColor=(e,t)=>Mn(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Vn(this,e,t)}get(e){return Hn(this,e)}describe(e,t){return Vn(Wn,e,t)}override(e,t){return Vn(qn,e,t)}route(e,t,r,n){const a=Hn(this,e),s=Hn(this,r),i="_"+t;Object.defineProperties(a,{[i]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=s[n];return kr(e)?Object.assign({},t,e):Cr(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var Kn=new Gn({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Ln},numbers:{type:"number",properties:Rn}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Un.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function $n(e,t,r,n,a){let s=t[a];return s||(s=t[a]=e.measureText(a).width,r.push(a)),s>n&&(n=s),n}function Yn(e,t,r,n){let a=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let i=0;const o=r.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=r[l],void 0===u||null===u||Sr(u)){if(Sr(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||Sr(h)||(i=$n(e,a,s,i,h))}else i=$n(e,a,s,i,u);e.restore();const f=s.length/2;if(f>r.length){for(l=0;l<f;l++)delete a[s[l]];s.splice(0,f)}return i}function Xn(e,t,r){const n=e.currentDevicePixelRatio,a=0!==r?Math.max(r/2,.5):0;return Math.round((t-a)*n)/n+a}function Jn(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Zn(e,t,r,n){Qn(e,t,r,n,null)}function Qn(e,t,r,n,a){let s,i,o,l,c,d,u,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*Xr;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(r,n),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:a?e.ellipse(r,n,a/2,m,0,0,Kr):e.arc(r,n,m,0,Kr),e.closePath();break;case"triangle":d=a?a/2:m,e.moveTo(r+Math.sin(g)*d,n-Math.cos(g)*m),g+=Qr,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*m),g+=Qr,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,i=Math.cos(g+Zr)*l,u=Math.cos(g+Zr)*(a?a/2-c:l),o=Math.sin(g+Zr)*l,h=Math.sin(g+Zr)*(a?a/2-c:l),e.arc(r-u,n-o,c,g-Gr,g-Jr),e.arc(r+h,n-i,c,g-Jr,g),e.arc(r+u,n+o,c,g,g+Jr),e.arc(r-h,n+i,c,g+Jr,g+Gr),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,d=a?a/2:l,e.rect(r-d,n-l,2*d,2*l);break}g+=Zr;case"rectRot":u=Math.cos(g)*(a?a/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(a?a/2:m),e.moveTo(r-u,n-o),e.lineTo(r+h,n-i),e.lineTo(r+u,n+o),e.lineTo(r-h,n+i),e.closePath();break;case"crossRot":g+=Zr;case"cross":u=Math.cos(g)*(a?a/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(a?a/2:m),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-i),e.lineTo(r-h,n+i);break;case"star":u=Math.cos(g)*(a?a/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(a?a/2:m),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-i),e.lineTo(r-h,n+i),g+=Zr,u=Math.cos(g)*(a?a/2:m),i=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(a?a/2:m),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-i),e.lineTo(r-h,n+i);break;case"line":i=a?a/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(r-i,n-o),e.lineTo(r+i,n+o);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(g)*(a?a/2:m),n+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function ea(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function ta(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ra(e){e.restore()}function na(e,t,r,n,a){if(!t)return e.lineTo(r.x,r.y);if("middle"===a){const n=(t.x+r.x)/2;e.lineTo(n,t.y),e.lineTo(n,r.y)}else"after"===a!==!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function aa(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function sa(e,t,r,n,a){if(a.strikethrough||a.underline){const s=e.measureText(n),i=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=r-s.actualBoundingBoxAscent,c=r+s.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(i,d),e.lineTo(o,d),e.stroke()}}function ia(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function oa(e,t,r,n,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=Sr(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),_r(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<i.length;++l)c=i[l],s.backdrop&&ia(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),_r(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,r,n,s.maxWidth)),e.fillText(c,r,n,s.maxWidth),sa(e,r,n,c,s),n+=Number(a.lineHeight);e.restore()}function la(e,t){const{x:r,y:n,w:a,h:s,radius:i}=t;e.arc(r+i.topLeft,n+i.topLeft,i.topLeft,1.5*Gr,Gr,!0),e.lineTo(r,n+s-i.bottomLeft),e.arc(r+i.bottomLeft,n+s-i.bottomLeft,i.bottomLeft,Gr,Jr,!0),e.lineTo(r+a-i.bottomRight,n+s),e.arc(r+a-i.bottomRight,n+s-i.bottomRight,i.bottomRight,Jr,0,!0),e.lineTo(r+a,n+i.topRight),e.arc(r+a-i.topRight,n+i.topRight,i.topRight,0,-Jr,!0),e.lineTo(r+i.topLeft,n)}const ca=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,da=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ua(e,t){const r=(""+e).match(ca);if(!r||"normal"===r[1])return 1.2*t;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return t*e}const ha=e=>+e||0;function fa(e,t){const r={},n=kr(t),a=n?Object.keys(t):t,s=kr(e)?n?r=>Cr(e[r],e[t[r]]):t=>e[t]:()=>e;for(const i of a)r[i]=ha(s(i));return r}function pa(e){return fa(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ma(e){return fa(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ga(e){const t=pa(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function va(e,t){e=e||{},t=t||Kn.font;let r=Cr(e.size,t.size);"string"===typeof r&&(r=parseInt(r,10));let n=Cr(e.style,t.style);n&&!(""+n).match(da)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:Cr(e.family,t.family),lineHeight:ua(Cr(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:Cr(e.weight,t.weight),string:""};return a.string=function(e){return!e||_r(e.size)||_r(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function ba(e,t,r,n){let a,s,i,o=!0;for(a=0,s=e.length;a<s;++a)if(i=e[a],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==r&&Sr(i)&&(i=i[r%i.length],o=!1),void 0!==i))return n&&!o&&(n.cacheable=!1),i}function xa(e,t){return Object.assign(Object.create(e),t)}function ya(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof r&&(r=Pa("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:r,_getTarget:n,override:n=>ya([n,...e],t,a,r)};return new Proxy(s,{deleteProperty:(t,r)=>(delete t[r],delete t._keys,delete e[0][r],!0),get:(r,n)=>Sa(r,n,()=>function(e,t,r,n){let a;for(const s of t)if(a=Pa(Na(s,e),r),"undefined"!==typeof a)return _a(e,a)?Ca(r,n,e,a):a}(n,t,e,r)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Da(e).includes(t),ownKeys:e=>Da(e),set(e,t,r){const a=e._storage||(e._storage=n());return e[t]=a[t]=r,delete e._keys,!0}})}function wa(e,t,r,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:ja(e,n),setContext:t=>wa(e,t,r,n),override:a=>wa(e.override(a),t,r,n)};return new Proxy(a,{deleteProperty:(t,r)=>(delete t[r],delete e[r],!0),get:(e,t,r)=>Sa(e,t,()=>function(e,t,r){const{_proxy:n,_context:a,_subProxy:s,_descriptors:i}=e;let o=n[t];Hr(o)&&i.isScriptable(t)&&(o=function(e,t,r,n){const{_proxy:a,_context:s,_subProxy:i,_stack:o}=r;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,i||n);o.delete(e),_a(e,l)&&(l=Ca(a._scopes,a,e,l));return l}(t,o,e,r));Sr(o)&&o.length&&(o=function(e,t,r,n){const{_proxy:a,_context:s,_subProxy:i,_descriptors:o}=r;if("undefined"!==typeof s.index&&n(e))return t[s.index%t.length];if(kr(t[0])){const r=t,n=a._scopes.filter(e=>e!==r);t=[];for(const l of r){const r=Ca(n,a,e,l);t.push(wa(r,s,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));_a(t,o)&&(o=wa(o,a,s&&s[t],i));return o}(e,t,r)),getOwnPropertyDescriptor:(t,r)=>t._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,r)=>Reflect.has(e,r),ownKeys:()=>Reflect.ownKeys(e),set:(t,r,n)=>(e[r]=n,delete t[r],!0)})}function ja(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:Hr(r)?r:()=>r,isIndexable:Hr(n)?n:()=>n}}const Na=(e,t)=>e?e+qr(t):t,_a=(e,t)=>kr(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Sa(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=r();return e[t]=n,n}function ka(e,t,r){return Hr(e)?e(t,r):e}const Aa=(e,t)=>!0===e?t:"string"===typeof e?Ur(t,e):void 0;function Ea(e,t,r,n,a){for(const s of t){const t=Aa(r,s);if(t){e.add(t);const s=ka(t._fallback,r,a);if("undefined"!==typeof s&&s!==r&&s!==n)return s}else if(!1===t&&"undefined"!==typeof n&&r!==n)return null}return!1}function Ca(e,t,r,n){const a=t._rootScopes,s=ka(t._fallback,r,n),i=[...e,...a],o=new Set;o.add(n);let l=Ta(o,i,r,s||r,n);return null!==l&&(("undefined"===typeof s||s===r||(l=Ta(o,i,s,l,n),null!==l))&&ya(Array.from(o),[""],a,s,()=>function(e,t,r){const n=e._getTarget();t in n||(n[t]={});const a=n[t];if(Sr(a)&&kr(r))return r;return a||{}}(t,r,n)))}function Ta(e,t,r,n,a){for(;r;)r=Ea(e,t,r,n,a);return r}function Pa(e,t){for(const r of t){if(!r)continue;const t=r[e];if("undefined"!==typeof t)return t}}function Da(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const r of e)for(const e of Object.keys(r).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Oa(e,t,r,n){const{iScale:a}=e,{key:s="r"}=this._parsing,i=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+r,d=t[c],i[o]={r:a.parse(Ur(d,s),c)};return i}const Ia=Number.EPSILON||1e-14,Ma=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ra=e=>"x"===e?"y":"x";function La(e,t,r,n){const a=e.skip?t:e,s=t,i=r.skip?t:r,o=un(s,a),l=un(i,s);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:s.x-u*(i.x-a.x),y:s.y-u*(i.y-a.y)},next:{x:s.x+h*(i.x-a.x),y:s.y+h*(i.y-a.y)}}}function Fa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const r=Ra(t),n=e.length,a=Array(n).fill(0),s=Array(n);let i,o,l,c=Ma(e,0);for(i=0;i<n;++i)if(o=l,l=c,c=Ma(e,i+1),l){if(c){const e=c[t]-l[t];a[i]=0!==e?(c[r]-l[r])/e:0}s[i]=o?c?tn(a[i-1])!==tn(a[i])?0:(a[i-1]+a[i])/2:a[i-1]:a[i]}!function(e,t,r){const n=e.length;let a,s,i,o,l,c=Ma(e,0);for(let d=0;d<n-1;++d)l=c,c=Ma(e,d+1),l&&c&&(rn(t[d],0,Ia)?r[d]=r[d+1]=0:(a=r[d]/t[d],s=r[d+1]/t[d],o=Math.pow(a,2)+Math.pow(s,2),o<=9||(i=3/Math.sqrt(o),r[d]=a*i*t[d],r[d+1]=s*i*t[d])))}(e,a,s),function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const n=Ra(r),a=e.length;let s,i,o,l=Ma(e,0);for(let c=0;c<a;++c){if(i=o,o=l,l=Ma(e,c+1),!o)continue;const a=o[r],d=o[n];i&&(s=(a-i[r])/3,o["cp1".concat(r)]=a-s,o["cp1".concat(n)]=d-s*t[c]),l&&(s=(l[r]-a)/3,o["cp2".concat(r)]=a+s,o["cp2".concat(n)]=d+s*t[c])}}(e,s,t)}function Ba(e,t,r){return Math.max(Math.min(e,r),t)}function za(e,t,r,n,a){let s,i,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Fa(e,a);else{let r=n?e[e.length-1]:e[0];for(s=0,i=e.length;s<i;++s)o=e[s],l=La(r,o,e[Math.min(s+1,i-(n?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,r=o}t.capBezierPoints&&function(e,t){let r,n,a,s,i,o=ea(e[0],t);for(r=0,n=e.length;r<n;++r)i=s,s=o,o=r<n-1&&ea(e[r+1],t),s&&(a=e[r],i&&(a.cp1x=Ba(a.cp1x,t.left,t.right),a.cp1y=Ba(a.cp1y,t.top,t.bottom)),o&&(a.cp2x=Ba(a.cp2x,t.left,t.right),a.cp2y=Ba(a.cp2y,t.top,t.bottom)))}(e,r)}function Ua(){return"undefined"!==typeof window&&"undefined"!==typeof document}function qa(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Wa(e,t,r){let n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[r])):n=e,n}const Ha=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Va=["top","right","bottom","left"];function Ga(e,t,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const s=Va[a];n[s]=parseFloat(e[t+"-"+s+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function Ka(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,a=Ha(r),s="border-box"===a.boxSizing,i=Ga(a,"padding"),o=Ga(a,"border","width"),{x:l,y:c,box:d}=function(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:a,offsetY:s}=n;let i,o,l=!1;if(((e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot))(a,s,e.target))i=a,o=s;else{const e=t.getBoundingClientRect();i=n.clientX-e.left,o=n.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,r),u=i.left+(d&&o.left),h=i.top+(d&&o.top);let{width:f,height:p}=t;return s&&(f-=i.width+o.width,p-=i.height+o.height),{x:Math.round((l-u)/f*r.width/n),y:Math.round((c-h)/p*r.height/n)}}const $a=e=>Math.round(10*e)/10;function Ya(e,t,r,n){const a=Ha(e),s=Ga(a,"margin"),i=Wa(a.maxWidth,e,"clientWidth")||Yr,o=Wa(a.maxHeight,e,"clientHeight")||Yr,l=function(e,t,r){let n,a;if(void 0===t||void 0===r){const s=e&&qa(e);if(s){const e=s.getBoundingClientRect(),i=Ha(s),o=Ga(i,"border","width"),l=Ga(i,"padding");t=e.width-l.width-o.width,r=e.height-l.height-o.height,n=Wa(i.maxWidth,s,"clientWidth"),a=Wa(i.maxHeight,s,"clientHeight")}else t=e.clientWidth,r=e.clientHeight}return{width:t,height:r,maxWidth:n||Yr,maxHeight:a||Yr}}(e,t,r);let{width:c,height:d}=l;if("content-box"===a.boxSizing){const e=Ga(a,"border","width"),t=Ga(a,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-s.width),d=Math.max(0,n?c/n:d-s.height),c=$a(Math.min(c,i,l.maxWidth)),d=$a(Math.min(d,o,l.maxHeight)),c&&!d&&(d=$a(c/2));return(void 0!==t||void 0!==r)&&n&&l.height&&d>l.height&&(d=l.height,c=$a(Math.floor(d*n))),{width:c,height:d}}function Xa(e,t,r){const n=t||1,a=Math.floor(e.height*n),s=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(r||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==n||i.height!==a||i.width!==s)&&(e.currentDevicePixelRatio=n,i.height=a,i.width=s,e.ctx.setTransform(n,0,0,n,0,0),!0)}const Ja=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Ua()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(f2){}return e}();function Za(e,t){const r=function(e,t){return Ha(e).getPropertyValue(t)}(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Qa(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function es(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:"middle"===n?r<.5?e.y:t.y:"after"===n?r<1?e.y:t.y:r>0?t.y:e.y}}function ts(e,t,r,n){const a={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},i=Qa(e,a,r),o=Qa(a,s,r),l=Qa(s,t,r),c=Qa(i,o,r),d=Qa(o,l,r);return Qa(c,d,r)}function rs(e,t,r){return e?function(e,t){return{x:r=>e+e+t-r,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,r):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function ns(e,t){let r,n;"ltr"!==t&&"rtl"!==t||(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function as(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ss(e){return"angle"===e?{between:pn,compare:hn,normalize:fn}:{between:gn,compare:(e,t)=>e-t,normalize:e=>e}}function is(e){let{start:t,end:r,count:n,loop:a,style:s}=e;return{start:t%n,end:r%n,loop:a&&(r-t+1)%n===0,style:s}}function os(e,t,r){if(!r)return[e];const{property:n,start:a,end:s}=r,i=t.length,{compare:o,between:l,normalize:c}=ss(n),{start:d,end:u,loop:h,style:f}=function(e,t,r){const{property:n,start:a,end:s}=r,{between:i,normalize:o}=ss(n),l=t.length;let c,d,{start:u,end:h,loop:f}=e;if(f){for(u+=l,h+=l,c=0,d=l;c<d&&i(o(t[u%l][n]),a,s);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:f,style:e.style}}(e,t,r),p=[];let m,g,v,b=!1,x=null;const y=()=>b||l(a,v,m)&&0!==o(a,v),w=()=>!b||0===o(s,m)||l(s,v,m);for(let j=d,N=d;j<=u;++j)g=t[j%i],g.skip||(m=c(g[n]),m!==v&&(b=l(m,a,s),null===x&&y()&&(x=0===o(m,a)?j:N),null!==x&&w()&&(p.push(is({start:x,end:j,loop:h,count:i,style:f})),x=null),N=j,v=m));return null!==x&&p.push(is({start:x,end:u,loop:h,count:i,style:f})),p}function ls(e,t){const r=[],n=e.segments;for(let a=0;a<n.length;a++){const s=os(n[a],e.points,t);s.length&&r.push(...s)}return r}function cs(e,t,r,n){return n&&n.setContext&&r?function(e,t,r,n){const a=e._chart.getContext(),s=ds(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=r.length,c=[];let d=s,u=t[0].start,h=u;function f(e,t,n,a){const s=o?-1:1;if(e!==t){for(e+=l;r[e%l].skip;)e-=s;for(;r[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:n,style:a}),d=a,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=r[u%l];for(h=u+1;h<=p.end;h++){const s=r[h%l];e=ds(n.setContext(xa(a,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),us(e,d)&&f(u,h-1,p.loop,d),t=s,d=e}u<h-1&&f(u,h-1,p.loop,d)}return c}(e,t,r,n):t}function ds(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function us(e,t){if(!t)return!1;const r=[],n=function(e,t){return On(t)?(r.includes(t)||r.push(t),r.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function hs(e,t,r){return e.options.clip?e[r]:t[r]}function fs(e,t){const r=t._clip;if(r.disabled)return!1;const n=function(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:hs(r,t,"left"),right:hs(r,t,"right"),top:hs(n,t,"top"),bottom:hs(n,t,"bottom")}:t}(t,e.chartArea);return{left:!1===r.left?0:n.left-(!0===r.left?0:r.left),right:!1===r.right?e.width:n.right+(!0===r.right?0:r.right),top:!1===r.top?0:n.top-(!0===r.top?0:r.top),bottom:!1===r.bottom?e.height:n.bottom+(!0===r.bottom?0:r.bottom)}}class ps{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const a=t.listeners[n],s=t.duration;a.forEach(n=>n({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Nn.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const a=r.items;let s,i=a.length-1,o=!1;for(;i>=0;--i)s=a[i],s._active?(s._total>r.duration&&(r.duration=s._total),s.tick(e),o=!0):(a[i]=a[a.length-1],a.pop());o&&(n.draw(),this._notify(n,r,e,"progress")),a.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=a.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ms=new ps;const gs="transparent",vs={boolean:(e,t,r)=>r>.5?t:e,color(e,t,r){const n=In(e||gs),a=n.valid&&In(t||gs);return a&&a.valid?a.mix(n,r).hexString():t},number:(e,t,r)=>e+(t-e)*r};class bs{constructor(e,t,r,n){const a=t[r];n=ba([e.to,n,a,e.from]);const s=ba([e.from,a,n]);this._active=!0,this._fn=e.fn||vs[e.type||typeof s],this._easing=Dn[e.easing]||Dn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],a=r-this._start,s=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=ba([e.to,t,n,e.from]),this._from=ba([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,a=this._from,s=this._loop,i=this._to;let o;if(this._active=a!==i&&(s||t<r),!this._active)return this._target[n]=i,void this._notify(!0);t<0?this._target[n]=a:(o=t/r%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[n]=this._fn(a,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}}class xs{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!kr(e))return;const t=Object.keys(Kn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const a=e[n];if(!kr(a))return;const s={};for(const e of t)s[e]=a[e];(Sr(a.properties)&&a.properties||[n]).forEach(e=>{e!==n&&r.has(e)||r.set(e,s)})})}_animateOptions(e,t){const r=t.options,n=function(e,t){if(!t)return;let r=e.options;if(!r)return void(e.options=t);r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}}));return r}(e,r);if(!n)return[];const a=this._createAnimations(n,r);return r.$shared&&function(e,t){const r=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const t=e[n[a]];t&&t.active()&&r.push(t.wait())}return Promise.all(r)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,t){const r=this._properties,n=[],a=e.$animations||(e.$animations={}),s=Object.keys(t),i=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let d=a[l];const u=r.get(l);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(a[l]=d=new bs(u,e,l,c),n.push(d)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(ms.add(this._chart,r),!0):void 0}}function ys(e,t){const r=e&&e.options||{},n=r.reverse,a=void 0===r.min?t:0,s=void 0===r.max?t:0;return{start:n?s:a,end:n?a:s}}function ws(e,t){const r=[],n=e._getSortedDatasetMetas(t);let a,s;for(a=0,s=n.length;a<s;++a)r.push(n[a].index);return r}function js(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e.keys,s="single"===n.mode;let i,o,l,c;if(null===t)return;let d=!1;for(i=0,o=a.length;i<o;++i){if(l=+a[i],l===r){if(d=!0,n.all)continue;break}c=e.values[l],Ar(c)&&(s||0===t||tn(t)===tn(c))&&(t+=c)}return d||n.all?t:0}function Ns(e,t){const r=e&&e.options.stacked;return r||void 0===r&&void 0!==t.stack}function _s(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function Ss(e,t,r,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const t=e[a.index];if(r&&t>0||!r&&t<0)return a.index}return null}function ks(e,t){const{chart:r,_cachedMeta:n}=e,a=r._stacks||(r._stacks={}),{iScale:s,vScale:i,index:o}=n,l=s.axis,c=i.axis,d=function(e,t,r){return"".concat(e.id,".").concat(t.id,".").concat(r.stack||r.type)}(s,i,n),u=t.length;let h;for(let f=0;f<u;++f){const e=t[f],{[l]:r,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=_s(a,d,r),h[o]=s,h._top=Ss(h,i,!0,n.type),h._bottom=Ss(h,i,!1,n.type);(h._visualValues||(h._visualValues={}))[o]=s}}function As(e,t){const r=e.scales;return Object.keys(r).filter(e=>r[e].axis===t).shift()}function Es(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][r])return;delete t[n][r],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[r]&&delete t[n]._visualValues[r]}}}const Cs=e=>"reset"===e||"none"===e,Ts=(e,t)=>t?e:Object.assign({},e);class Ps{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ns(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Es(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(e,t,r,n)=>"x"===e?t:"r"===e?n:r,a=t.xAxisID=Cr(r.xAxisID,As(e,"x")),s=t.yAxisID=Cr(r.yAxisID,As(e,"y")),i=t.rAxisID=Cr(r.rAxisID,As(e,"r")),o=t.indexAxis,l=t.iAxisID=n(o,a,s,i),c=t.vAxisID=n(o,s,a,i);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&wn(this._data,this),e._stacked&&Es(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(kr(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:r,vScale:n}=t,a="x"===r.axis?"x":"y",s="x"===n.axis?"x":"y",i=Object.keys(e),o=new Array(i.length);let l,c,d;for(l=0,c=i.length;l<c;++l)d=i[l],o[l]={[a]:d,[s]:e[d]};return o}(t,e)}else if(r!==t){if(r){wn(r,this);const e=this._cachedMeta;Es(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),yn.forEach(t=>{const r="_onData"+qr(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];const i=n.apply(this,a);return e._chartjs.listeners.forEach(e=>{"function"===typeof e[r]&&e[r](...a)}),i}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const a=t._stacked;t._stacked=Ns(t.vScale,t),t.stack!==r.stack&&(n=!0,Es(t),t.stack=r.stack),this._resyncElements(e),(n||a!==t._stacked)&&(ks(this,t._parsed),t._stacked=Ns(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:a,_stacked:s}=r,i=a.axis;let o,l,c,d=0===e&&t===n.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,c=n;else{c=Sr(n[e])?this.parseArrayData(r,n,e,t):kr(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);const a=()=>null===l[i]||u&&l[i]<u[i];for(o=0;o<t;++o)r._parsed[o+e]=l=c[o],d&&(a()&&(d=!1),u=l);r._sorted=d}s&&ks(this,c)}parsePrimitiveData(e,t,r,n){const{iScale:a,vScale:s}=e,i=a.axis,o=s.axis,l=a.getLabels(),c=a===s,d=new Array(n);let u,h,f;for(u=0,h=n;u<h;++u)f=u+r,d[u]={[i]:c||a.parse(l[f],f),[o]:s.parse(t[f],f)};return d}parseArrayData(e,t,r,n){const{xScale:a,yScale:s}=e,i=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+r,d=t[c],i[o]={x:a.parse(d[0],c),y:s.parse(d[1],c)};return i}parseObjectData(e,t,r,n){const{xScale:a,yScale:s}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=t[u],l[c]={x:a.parse(Ur(h,i),u),y:s.parse(Ur(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,a=this._cachedMeta,s=t[e.axis];return js({keys:ws(n,!0),values:t._stacks[e.axis]._visualValues},s,a.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const a=r[t.axis];let s=null===a?NaN:a;const i=n&&r._stacks[t.axis];n&&i&&(n.values=i,s=js(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,a=r._sorted&&e===r.iScale,s=n.length,i=this._getOtherScale(e),o=((e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:ws(r,!0),values:null})(t,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}(i);let u,h;function f(){h=n[u];const t=h[i.axis];return!Ar(h[e.axis])||c>t||d<t}for(u=0;u<s&&(f()||(this.updateRangeFromParsed(l,e,h,o),!a));++u);if(a)for(u=s-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,a,s;for(n=0,a=t.length;n<a;++n)s=t[n][e.axis],Ar(s)&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,r,n,a;return kr(e)?(t=e.top,r=e.right,n=e.bottom,a=e.left):t=r=n=a=e,{top:t,right:r,bottom:n,left:a,disabled:!1===e}}(Cr(this.options.clip,function(e,t,r){if(!1===r)return!1;const n=ys(e,r),a=ys(t,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],a=t.chartArea,s=[],i=this._drawStart||0,o=this._drawCount||n.length-i,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,a,i,o),c=i;c<i+o;++c){const t=n[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,a))}for(c=0;c<s.length;++c)s[c].draw(e,a)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,r){return xa(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=n.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return xa(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0;const n="active"===t,a=this._cachedDataOpts,s=e+"-"+t,i=a[s],o=this.enableOptionSharing&&Wr(r);if(i)return Ts(i,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=n?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Kn.elements[e]),f=l.resolveNamedOptions(u,h,()=>this.getContext(r,n,t),d);return f.$shared&&(f.$shared=o,a[s]=Object.freeze(Ts(f,o))),f}_resolveAnimations(e,t,r){const n=this.chart,a=this._cachedDataOpts,s="animation-".concat(t),i=a[s];if(i)return i;let o;if(!1!==n.options.animation){const n=this.chart.config,a=n.datasetAnimationScopeKeys(this._type,t),s=n.getOptionScopes(this.getDataset(),a);o=n.createResolver(s,this.getContext(e,r,t))}const l=new xs(n,o&&o.animations);return o&&o._cacheable&&(a[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Cs(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(r),s=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,r),{sharedOptions:a,includeOptions:s}}updateElement(e,t,r,n){Cs(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!Cs(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const n=r.length,a=t.length,s=Math.min(a,n);s&&this.parse(0,s),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._cachedMeta,a=n.data,s=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=s;i--)e[i]=e[i-t]};for(o(a),i=e;i<s;++i)a[i]=new this.dataElementType;this._parsing&&o(n._parsed),this.parse(e,t),r&&this.updateElements(a,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&Es(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ds(e){const t=e.iScale,r=function(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,a=r.length;t<a;t++)n=n.concat(r[t].controller.getAllParsedValues(e));e._cache.$bar=jn(n.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let n,a,s,i,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(Wr(i)&&(o=Math.min(o,Math.abs(s-i)||o)),i=s)};for(n=0,a=r.length;n<a;++n)s=t.getPixelForValue(r[n]),l();for(i=void 0,n=0,a=t.ticks.length;n<a;++n)s=t.getPixelForTick(n),l();return o}function Os(e,t,r,n){return Sr(e)?function(e,t,r,n){const a=r.parse(e[0],n),s=r.parse(e[1],n),i=Math.min(a,s),o=Math.max(a,s);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[r.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:s,min:i,max:o}}(e,t,r,n):t[r.axis]=r.parse(e,n),t}function Is(e,t,r,n){const a=e.iScale,s=e.vScale,i=a.getLabels(),o=a===s,l=[];let c,d,u,h;for(c=r,d=r+n;c<d;++c)h=t[c],u={},u[a.axis]=o||a.parse(i[c],c),l.push(Os(h,u,s,c));return l}function Ms(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Rs(e,t,r,n){let a=t.borderSkipped;const s={};if(!a)return void(e.borderSkipped=s);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:d}=function(e){let t,r,n,a,s;return e.horizontal?(t=e.base>e.x,r="left",n="right"):(t=e.base<e.y,r="bottom",n="top"),t?(a="end",s="start"):(a="start",s="end"),{start:r,end:n,reverse:t,top:a,bottom:s}}(e);"middle"===a&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?a=c:(r._bottom||0)===n?a=d:(s[Ls(d,i,o,l)]=!0,a=c)),s[Ls(a,i,o,l)]=!0,e.borderSkipped=s}function Ls(e,t,r,n){var a,s,i;return n?(i=r,e=Fs(e=(a=e)===(s=t)?i:a===i?s:a,r,t)):e=Fs(e,t,r),e}function Fs(e,t,r){return"start"===e?t:"end"===e?r:e}function Bs(e,t,r){let{inflateAmount:n}=t;e.inflateAmount="auto"===n?1===r?.33:0:n}(0,qt.A)(Ps,"defaults",{}),(0,qt.A)(Ps,"datasetElementType",null),(0,qt.A)(Ps,"dataElementType",null);class zs extends Ps{parsePrimitiveData(e,t,r,n){return Is(e,t,r,n)}parseArrayData(e,t,r,n){return Is(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:a,vScale:s}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l="x"===a.axis?i:o,c="x"===s.axis?i:o,d=[];let u,h,f,p;for(u=r,h=r+n;u<h;++u)p=t[u],f={},f[a.axis]=a.parse(Ur(p,l),u),d.push(Os(Ur(p,c),f,s,u));return d}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const a=r._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,a=this.getParsed(e),s=a._custom,i=Ms(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const a="reset"===n,{index:s,_cachedMeta:{vScale:i}}=this,o=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,n);for(let h=t;h<t+r;h++){const t=this.getParsed(h),r=a||_r(t[i.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[i.axis],m={horizontal:l,base:r.base,enableBorderRadius:!p||Ms(t._custom)||s===p._top||s===p._bottom,x:l?r.head:f.center,y:l?f.center:r.head,height:l?f.size:Math.abs(r.size),width:l?Math.abs(r.size):f.size};u&&(m.options=d||this.resolveDataElementOptions(h,e[h].active?"active":n));const g=m.options||e[h].options;Rs(m,g,p,s),Bs(m,g,c.ratio),this.updateElement(e[h],h,m,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=r.options.stacked,s=[],i=this._cachedMeta.controller.getParsed(t),o=i&&i[r.axis],l=e=>{const t=e._parsed.find(e=>e[r.axis]===o),n=t&&t[e.vScale.axis];if(_r(n)||isNaN(n))return!0};for(const c of n)if((void 0===t||!l(c))&&((!1===a||-1===s.indexOf(c.stack)||void 0===a&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Cr("x"===this.chart.options.indexAxis?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const n=this._getStacks(e,r),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let a,s;for(a=0,s=t.data.length;a<s;++a)n.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const i=e.barThickness;return{min:i||Ds(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:a,minBarLength:s}}=this,i=a||0,o=this.getParsed(e),l=o._custom,c=Ms(l);let d,u,h=o[t.axis],f=0,p=r?this.applyStack(t,o,r):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&tn(h)!==tn(l.barEnd)&&(f=0),f+=h);const m=_r(a)||c?f:a;let g=t.getPixelForValue(m);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,u=d-g,Math.abs(u)<s){u=function(e,t,r){return 0!==e?tn(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}(u,t,i)*s,h===i&&(g-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),l=Math.min(e,a),f=Math.max(e,a);g=Math.max(Math.min(g,f),l),d=g+u,r&&!c&&(o._stacks[t.axis]._visualValues[n]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(i)){const e=tn(u)*t.getLineWidthForValue(i)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,a=n.skipNull,s=Cr(n.maxBarThickness,1/0);let i,o;const l=this._getAxisCount();if(t.grouped){const r=a?this._getStackCount(e):t.stackCount,c="flex"===n.barThickness?function(e,t,r,n){const a=t.pixels,s=a[e];let i=e>0?a[e-1]:null,o=e<a.length-1?a[e+1]:null;const l=r.categoryPercentage;null===i&&(i=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-i);const c=s-(s-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/n,ratio:r.barPercentage,start:c}}(e,t,n,r*l):function(e,t,r,n){const a=r.barThickness;let s,i;return _r(a)?(s=t.min*r.categoryPercentage,i=r.barPercentage):(s=a*n,i=1),{chunk:s/n,ratio:i,start:t.pixels[e]-s/2}}(e,t,n,r*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(Cr(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+u;i=c.start+c.chunk*h+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else i=r.getPixelForValue(this.getParsed(e)[r.axis],e),o=Math.min(s,t.min*t.ratio);return{base:i-o/2,head:i+o/2,center:i,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let a=0;for(;a<n;++a)null===this.getParsed(a)[t.axis]||r[a].hidden||r[a].draw(this._ctx)}}(0,qt.A)(zs,"id","bar"),(0,qt.A)(zs,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,qt.A)(zs,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Us extends Ps{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const a=super.parsePrimitiveData(e,t,r,n);for(let s=0;s<a.length;s++)a[s]._custom=this.resolveDataElementOptions(s+r).radius;return a}parseArrayData(e,t,r,n){const a=super.parseArrayData(e,t,r,n);for(let s=0;s<a.length;s++){const e=t[r+s];a[s]._custom=Cr(e[2],this.resolveDataElementOptions(s+r).radius)}return a}parseObjectData(e,t,r,n){const a=super.parseObjectData(e,t,r,n);for(let s=0;s<a.length;s++){const e=t[r+s];a[s]._custom=Cr(e&&e.r&&+e.r,this.resolveDataElementOptions(s+r).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,s=this.getParsed(e),i=n.getLabelForValue(s.x),o=a.getLabelForValue(s.y),l=s._custom;return{label:r[e]||"",value:"("+i+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:i}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,n),c=s.axis,d=i.axis;for(let u=t;u<t+r;u++){const t=e[u],r=!a&&this.getParsed(u),h={},f=h[c]=a?s.getPixelForDecimal(.5):s.getPixelForValue(r[c]),p=h[d]=a?i.getBasePixel():i.getPixelForValue(r[d]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":n),a&&(h.options.radius=0)),this.updateElement(t,u,h,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const a=n.radius;return"active"!==t&&(n.radius=0),n.radius+=Cr(r&&r._custom,a),n}}(0,qt.A)(Us,"id","bubble"),(0,qt.A)(Us,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,qt.A)(Us,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class qs extends Ps{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=r;else{let a,s,i=e=>+r[e];if(kr(r[e])){const{key:e="value"}=this._parsing;i=t=>+Ur(r[t],e)}for(a=e,s=e+t;a<s;++a)n._parsed[a]=i(a)}}_getRotation(){return on(this.options.rotation-90)}_getCircumference(){return on(this.options.circumference)}_getRotationExtents(){let e=Kr,t=-Kr;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,a=n._getRotation(),s=n._getCircumference();e=Math.min(e,a),t=Math.max(t,a+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,a=n.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,i=Math.max((Math.min(r.width,r.height)-s)/2,0),o=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,i),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:u,ratioY:h,offsetX:f,offsetY:p}=function(e,t,r){let n=1,a=1,s=0,i=0;if(t<Kr){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),f=(e,t,n)=>pn(e,o,l,!0)?1:Math.max(t,t*r,n,n*r),p=(e,t,n)=>pn(e,o,l,!0)?-1:Math.min(t,t*r,n,n*r),m=f(0,c,u),g=f(Jr,d,h),v=p(Gr,c,u),b=p(Gr+Jr,d,h);n=(m-v)/2,a=(g-b)/2,s=-(m+v)/2,i=-(g+b)/2}return{ratioX:n,ratioY:a,offsetX:s,offsetY:i}}(d,c,o),m=(r.width-s)/u,g=(r.height-s)/h,v=Math.max(Math.min(m,g)/2,0),b=Tr(this.options.radius,v),x=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*b,this.offsetY=p*b,n.total=this.calculateTotal(),this.outerRadius=b-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*l,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,a=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/Kr)}updateElements(e,t,r,n){const a="reset"===n,s=this.chart,i=s.chartArea,o=s.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=a&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,n);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,a);for(m=t;m<t+r;++m){const t=this._circumference(m,a),r=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};p&&(s.options=f||this.resolveDataElementOptions(m,r.active?"active":n)),g+=t,this.updateElement(r,m,s,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r,n=0;for(r=0;r<t.length;r++){const a=e._parsed[r];null===a||isNaN(a)||!this.chart.getDataVisibility(r)||t[r].hidden||(n+=Math.abs(a))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Kr*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=Bn(t._parsed[e],r.options.locale);return{label:n[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,a,s,i,o;if(!e)for(n=0,a=r.data.datasets.length;n<a;++n)if(r.isDatasetVisible(n)){s=r.getDatasetMeta(n),e=s.data,i=s.controller;break}if(!e)return 0;for(n=0,a=e.length;n<a;++n)o=i.resolveDataElementOptions(n),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const e=this.resolveDataElementOptions(r);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(Cr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,qt.A)(qs,"id","doughnut"),(0,qt.A)(qs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,qt.A)(qs,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,qt.A)(qs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((t,a)=>{const s=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class Ws extends Ps{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:a}=t,s=this.chart._animationsDisabled;let{start:i,count:o}=An(t,n,s);this._drawStart=i,this._drawCount=o,En(t)&&(i=0,o=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:l},e),this.updateElements(n,i,o,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=s.axis,h=i.axis,{spanGaps:f,segment:p}=this.options,m=an(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||"none"===n,v=t+r,b=e.length;let x=t>0&&this.getParsed(t-1);for(let y=0;y<b;++y){const r=e[y],f=g?r:{};if(y<t||y>=v){f.skip=!0;continue}const b=this.getParsed(y),w=_r(b[h]),j=f[u]=s.getPixelForValue(b[u],y),N=f[h]=a||w?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,b,o):b[h],y);f.skip=isNaN(j)||isNaN(N)||w,f.stop=y>0&&Math.abs(b[u]-x[u])>m,p&&(f.parsed=b,f.raw=l.data[y]),d&&(f.options=c||this.resolveDataElementOptions(y,r.active?"active":n)),g||this.updateElement(r,y,f,n),x=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),s=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,qt.A)(Ws,"id","line"),(0,qt.A)(Ws,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,qt.A)(Ws,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Hs extends Ps{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=Bn(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:a}}parseObjectData(e,t,r,n){return Oa.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,r)=>{const n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(n/2,0),s=(a-Math.max(r.cutoutPercentage?a/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,r,n){const a="reset"===n,s=this.chart,i=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*Gr;let u,h=d;const f=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,n,f);for(u=t;u<t+r;u++){const t=e[u];let r=h,p=h+this._computeAngle(u,n,f),m=s.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,a&&(i.animateScale&&(m=0),i.animateRotate&&(r=p=d));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:r,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":n)};this.updateElement(t,u,g,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?on(this.resolveDataElementOptions(e,t).angle||r):0}}(0,qt.A)(Hs,"id","polarArea"),(0,qt.A)(Hs,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,qt.A)(Hs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((t,a)=>{const s=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Vs extends qs{}(0,qt.A)(Vs,"id","pie"),(0,qt.A)(Vs,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Gs extends Ps{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return Oa.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],a=t.iScale.getLabels();if(r.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:a.length===n.length,options:t};this.updateElement(r,void 0,s,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const a=this._cachedMeta.rScale,s="reset"===n;for(let i=t;i<t+r;i++){const t=e[i],r=this.resolveDataElementOptions(i,t.active?"active":n),o=a.getPointPositionForValue(i,this.getParsed(i).r),l=s?a.xCenter:o.x,c=s?a.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:r};this.updateElement(t,i,d,n)}}}(0,qt.A)(Gs,"id","radar"),(0,qt.A)(Gs,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,qt.A)(Gs,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ks extends Ps{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,s=this.getParsed(e),i=n.getLabelForValue(s.x),o=a.getLabelForValue(s.y);return{label:r[e]||"",value:"("+i+", "+o+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:a,count:s}=An(t,r,n);if(this._drawStart=a,this._drawCount=s,En(t)&&(a=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:s}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!s._decimated,a.points=r;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,a,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,n),d=this.getSharedOptions(c),u=this.includeOptions(n,d),h=s.axis,f=i.axis,{spanGaps:p,segment:m}=this.options,g=an(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||a||"none"===n;let b=t>0&&this.getParsed(t-1);for(let x=t;x<t+r;++x){const t=e[x],r=this.getParsed(x),c=v?t:{},p=_r(r[f]),y=c[h]=s.getPixelForValue(r[h],x),w=c[f]=a||p?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,r,o):r[f],x);c.skip=isNaN(y)||isNaN(w)||p,c.stop=x>0&&Math.abs(r[h]-b[h])>g,m&&(c.parsed=r,c.raw=l.data[x]),u&&(c.options=d||this.resolveDataElementOptions(x,t.active?"active":n)),v||this.updateElement(t,x,c,n),b=r}this.updateSharedOptions(d,n,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let r=t.length-1;r>=0;--r)e=Math.max(e,t[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const a=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,a,s)/2}}(0,qt.A)(Ks,"id","scatter"),(0,qt.A)(Ks,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,qt.A)(Ks,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function $s(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ys{static override(e){Object.assign(Ys.prototype,e)}constructor(e){(0,qt.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return $s()}parse(){return $s()}format(){return $s()}add(){return $s()}diff(){return $s()}startOf(){return $s()}endOf(){return $s()}}var Xs=Ys;function Js(e,t,r,n){const{controller:a,data:s,_sorted:i}=e,o=a._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&i&&s.length){const i=o._reversePixels?xn:bn;if(!n){const n=i(s,t,r);if(l){const{vScale:t}=a._cachedMeta,{_parsed:r}=e,s=r.slice(0,n.lo+1).reverse().findIndex(e=>!_r(e[t.axis]));n.lo-=Math.max(0,s);const i=r.slice(n.hi).findIndex(e=>!_r(e[t.axis]));n.hi+=Math.max(0,i)}return n}if(a._sharedOptions){const e=s[0],n="function"===typeof e.getRange&&e.getRange(t);if(n){const e=i(s,t,r-n),a=i(s,t,r+n);return{lo:e.lo,hi:a.hi}}}}return{lo:0,hi:s.length-1}}function Zs(e,t,r,n,a){const s=e.getSortedVisibleDatasetMetas(),i=r[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:r}=s[o],{lo:l,hi:c}=Js(s[o],t,i,a);for(let t=l;t<=c;++t){const a=r[t];a.skip||n(a,e,t)}}}function Qs(e,t,r,n,a){const s=[];if(!a&&!e.isPointInArea(t))return s;return Zs(e,r,t,function(r,i,o){(a||ea(r,e.chartArea,0))&&r.inRange(t.x,t.y,n)&&s.push({element:r,datasetIndex:i,index:o})},!0),s}function ei(e,t,r,n,a,s){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(e,n){const a=t?Math.abs(e.x-n.x):0,s=r?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}(r);let l=Number.POSITIVE_INFINITY;return Zs(e,r,t,function(r,c,d){const u=r.inRange(t.x,t.y,a);if(n&&!u)return;const h=r.getCenterPoint(a);if(!(!!s||e.isPointInArea(h))&&!u)return;const f=o(t,h);f<l?(i=[{element:r,datasetIndex:c,index:d}],l=f):f===l&&i.push({element:r,datasetIndex:c,index:d})}),i}function ti(e,t,r,n,a,s){return s||e.isPointInArea(t)?"r"!==r||n?ei(e,t,r,n,a,s):function(e,t,r,n){let a=[];return Zs(e,r,t,function(e,r,s){const{startAngle:i,endAngle:o}=e.getProps(["startAngle","endAngle"],n),{angle:l}=dn(e,{x:t.x,y:t.y});pn(l,i,o)&&a.push({element:e,datasetIndex:r,index:s})}),a}(e,t,r,a):[]}function ri(e,t,r,n,a){const s=[],i="x"===r?"inXRange":"inYRange";let o=!1;return Zs(e,r,t,(e,n,l)=>{e[i]&&e[i](t[r],a)&&(s.push({element:e,datasetIndex:n,index:l}),o=o||e.inRange(t.x,t.y,a))}),n&&!o?[]:s}var ni={evaluateInteractionItems:Zs,modes:{index(e,t,r,n){const a=Ka(t,e),s=r.axis||"x",i=r.includeInvisible||!1,o=r.intersect?Qs(e,a,s,n,i):ti(e,a,s,!1,n,i),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,r=e.data[t];r&&!r.skip&&l.push({element:r,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,r,n){const a=Ka(t,e),s=r.axis||"xy",i=r.includeInvisible||!1;let o=r.intersect?Qs(e,a,s,n,i):ti(e,a,s,!1,n,i);if(o.length>0){const t=o[0].datasetIndex,r=e.getDatasetMeta(t).data;o=[];for(let e=0;e<r.length;++e)o.push({element:r[e],datasetIndex:t,index:e})}return o},point:(e,t,r,n)=>Qs(e,Ka(t,e),r.axis||"xy",n,r.includeInvisible||!1),nearest(e,t,r,n){const a=Ka(t,e),s=r.axis||"xy",i=r.includeInvisible||!1;return ti(e,a,s,r.intersect,n,i)},x:(e,t,r,n)=>ri(e,Ka(t,e),"x",r.intersect,n),y:(e,t,r,n)=>ri(e,Ka(t,e),"y",r.intersect,n)}};const ai=["left","top","right","bottom"];function si(e,t){return e.filter(e=>e.pos===t)}function ii(e,t){return e.filter(e=>-1===ai.indexOf(e.pos)&&e.box.axis===t)}function oi(e,t){return e.sort((e,r)=>{const n=t?r:e,a=t?e:r;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function li(e,t){const r=function(e){const t={};for(const r of e){const{stack:e,pos:n,stackWeight:a}=r;if(!e||!ai.includes(n))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let s,i,o;for(s=0,i=e.length;s<i;++s){o=e[s];const{fullSize:i}=o.box,l=r[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*n:i&&t.availableWidth,o.height=a):(o.width=n,o.height=c?c*a:i&&t.availableHeight)}return r}function ci(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function di(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ui(e,t,r,n){const{pos:a,box:s}=r,i=e.maxPadding;if(!kr(a)){r.size&&(e[a]-=r.size);const t=n[r.stack]||{size:0,count:1};t.size=Math.max(t.size,r.horizontal?s.height:s.width),r.size=t.size/t.count,e[a]+=r.size}s.getPadding&&di(i,s.getPadding());const o=Math.max(0,t.outerWidth-ci(i,e,"left","right")),l=Math.max(0,t.outerHeight-ci(i,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,r.horizontal?{same:c,other:d}:{same:d,other:c}}function hi(e,t){const r=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{n[e]=Math.max(t[e],r[e])}),n}return n(e?["left","right"]:["top","bottom"])}function fi(e,t,r,n){const a=[];let s,i,o,l,c,d;for(s=0,i=e.length,c=0;s<i;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,hi(o.horizontal,t));const{same:i,other:u}=ui(t,r,o,n);c|=i&&a.length,d=d||u,l.fullSize||a.push(o)}return c&&fi(a,t,r,n)||d}function pi(e,t,r,n,a){e.top=r,e.left=t,e.right=t+n,e.bottom=r+a,e.width=n,e.height=a}function mi(e,t,r,n){const a=r.padding;let{x:s,y:i}=t;for(const o of e){const e=o.box,l=n[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const n=t.w*c,s=l.size||e.height;Wr(l.start)&&(i=l.start),e.fullSize?pi(e,a.left,i,r.outerWidth-a.right-a.left,s):pi(e,t.left+l.placed,i,n,s),l.start=i,l.placed+=n,i=e.bottom}else{const n=t.h*c,i=l.size||e.width;Wr(l.start)&&(s=l.start),e.fullSize?pi(e,s,a.top,i,r.outerHeight-a.bottom-a.top):pi(e,s,t.top+l.placed,i,n),l.start=s,l.placed+=n,s=e.right}}t.x=s,t.y=i}var gi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;-1!==r&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const a=ga(e.options.layout.padding),s=Math.max(t-a.width,0),i=Math.max(r-a.height,0),o=function(e){const t=function(e){const t=[];let r,n,a,s,i,o;for(r=0,n=(e||[]).length;r<n;++r)a=e[r],({position:s,options:{stack:i,stackWeight:o=1}}=a),t.push({index:r,box:a,pos:s,horizontal:a.isHorizontal(),weight:a.weight,stack:i&&s+i,stackWeight:o});return t}(e),r=oi(t.filter(e=>e.box.fullSize),!0),n=oi(si(t,"left"),!0),a=oi(si(t,"right")),s=oi(si(t,"top"),!0),i=oi(si(t,"bottom")),o=ii(t,"x"),l=ii(t,"y");return{fullSize:r,leftAndTop:n.concat(s),rightAndBottom:a.concat(l).concat(i).concat(o),chartArea:si(t,"chartArea"),vertical:n.concat(a).concat(l),horizontal:s.concat(i).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Dr(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:r,padding:a,availableWidth:s,availableHeight:i,vBoxMaxWidth:s/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},a);di(h,ga(n));const f=Object.assign({maxPadding:h,w:s,h:i,x:a.left,y:a.top},a),p=li(l.concat(c),u);fi(o.fullSize,f,u,p),fi(l,f,u,p),fi(c,f,u,p)&&fi(l,f,u,p),function(e){const t=e.maxPadding;function r(r){const n=Math.max(t[r]-e[r],0);return e[r]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(f),mi(o.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,mi(o.rightAndBottom,f,u,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Dr(o.chartArea,t=>{const r=t.box;Object.assign(r,e.chartArea),r.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class vi{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class bi extends vi{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xi="$chartjs",yi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wi=e=>null===e||""===e;const ji=!!Ja&&{passive:!0};function Ni(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,ji)}function _i(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function Si(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||_i(r.addedNodes,n),t=t&&!_i(r.removedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function ki(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||_i(r.removedNodes,n),t=t&&!_i(r.addedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Ai=new Map;let Ei=0;function Ci(){const e=window.devicePixelRatio;e!==Ei&&(Ei=e,Ai.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function Ti(e,t,r){const n=e.canvas,a=n&&qa(n);if(!a)return;const s=_n((e,t)=>{const n=a.clientWidth;r(e,t),n<a.clientWidth&&r()},window),i=new ResizeObserver(e=>{const t=e[0],r=t.contentRect.width,n=t.contentRect.height;0===r&&0===n||s(r,n)});return i.observe(a),function(e,t){Ai.size||window.addEventListener("resize",Ci),Ai.set(e,t)}(e,s),i}function Pi(e,t,r){r&&r.disconnect(),"resize"===t&&function(e){Ai.delete(e),Ai.size||window.removeEventListener("resize",Ci)}(e)}function Di(e,t,r){const n=e.canvas,a=_n(t=>{null!==e.ctx&&r(function(e,t){const r=yi[e.type]||e.type,{x:n,y:a}=Ka(e,t);return{type:r,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==a?a:null}}(t,e))},e);return function(e,t,r){e&&e.addEventListener(t,r,ji)}(n,t,a),a}class Oi extends vi{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function(e,t){const r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[xi]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",wi(a)){const t=Za(e,"width");void 0!==t&&(e.width=t)}if(wi(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Za(e,"height");void 0!==t&&(e.height=t)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[xi])return!1;const r=t[xi].initial;["height","width"].forEach(e=>{const n=r[e];_r(n)?t.removeAttribute(e):t.setAttribute(e,n)});const n=r.style||{};return Object.keys(n).forEach(e=>{t.style[e]=n[e]}),t.width=t.width,delete t[xi],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),a={attach:Si,detach:ki,resize:Ti}[t]||Di;n[t]=a(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:Pi,detach:Pi,resize:Pi}[t]||Ni)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return Ya(e,t,r,n)}isAttached(e){const t=e&&qa(e);return!(!t||!t.isConnected)}}class Ii{constructor(){(0,qt.A)(this,"x",void 0),(0,qt.A)(this,"y",void 0),(0,qt.A)(this,"active",!1),(0,qt.A)(this,"options",void 0),(0,qt.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return an(this.x)&&an(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(e=>{n[e]=r[e]&&r[e].active()?r[e]._to:this[e]}),n}}function Mi(e,t){const r=e.options.ticks,n=function(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),a=e._maxLength/r;return Math.floor(Math.min(n,a))}(e),a=Math.min(r.maxTicksLimit||n,n),s=r.major.enabled?function(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}(t):[],i=s.length,o=s[0],l=s[i-1],c=[];if(i>a)return function(e,t,r,n){let a,s=0,i=r[0];for(n=Math.ceil(n),a=0;a<e.length;a++)a===i&&(t.push(e[a]),s++,i=r[s*n])}(t,c,s,i/a),c;const d=function(e,t,r){const n=function(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}(e),a=t.length/r;if(!n)return Math.max(a,1);const s=function(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(0|r)&&t.push(r),t.sort((e,t)=>e-t).pop(),t}(n);for(let i=0,o=s.length-1;i<o;i++){const e=s[i];if(e>a)return e}return Math.max(a,1)}(s,t,a);if(i>0){let e,r;const n=i>1?Math.round((l-o)/(i-1)):null;for(Ri(t,c,d,_r(n)?0:o-n,o),e=0,r=i-1;e<r;e++)Ri(t,c,d,s[e],s[e+1]);return Ri(t,c,d,l,_r(n)?t.length:l+n),c}return Ri(t,c,d),c}function Ri(e,t,r,n,a){const s=Cr(n,0),i=Math.min(Cr(a,e.length),e.length);let o,l,c,d=0;for(r=Math.ceil(r),a&&(o=a-n,r=o/Math.floor(o/r)),c=s;c<0;)d++,c=Math.round(s+d*r);for(l=Math.max(s,0);l<i;l++)l===c&&(t.push(e[l]),d++,c=Math.round(s+d*r))}(0,qt.A)(Ii,"defaults",{}),(0,qt.A)(Ii,"defaultRoutes",void 0);const Li=(e,t,r)=>"top"===t||"left"===t?e[t]+r:e[t]-r,Fi=(e,t)=>Math.min(t||e,e);function Bi(e,t){const r=[],n=e.length/t,a=e.length;let s=0;for(;s<a;s+=n)r.push(e[Math.floor(s)]);return r}function zi(e,t,r){const n=e.ticks.length,a=Math.min(t,n-1),s=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(a);if(!(r&&(l=1===n?Math.max(c-s,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?l:-l,c<s-o||c>i+o)))return c}function Ui(e){return e.drawTicks?e.tickLength:0}function qi(e,t){if(!e.display)return 0;const r=va(e.font,t),n=ga(e.padding);return(Sr(e.text)?e.text.length:1)*r.lineHeight+n.height}function Wi(e,t,r){let n=Sn(e);return(r&&"right"!==t||!r&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class Hi extends Ii{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=Er(e,Number.POSITIVE_INFINITY),t=Er(t,Number.NEGATIVE_INFINITY),r=Er(r,Number.POSITIVE_INFINITY),n=Er(n,Number.NEGATIVE_INFINITY),{min:Er(e,r),max:Er(t,n),minDefined:Ar(e),maxDefined:Ar(t)}}getMinMax(e){let t,{min:r,max:n,minDefined:a,maxDefined:s}=this.getUserBounds();if(a&&s)return{min:r,max:n};const i=this.getMatchingVisibleMetas();for(let o=0,l=i.length;o<l;++o)t=i[o].controller.getMinMax(this,e),a||(r=Math.min(r,t.min)),s||(n=Math.max(n,t.max));return r=s&&r>n?n:r,n=a&&r>n?r:n,{min:Er(r,Er(n,r)),max:Er(n,Er(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pr(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:a,ticks:s}=this.options,i=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,r){const{min:n,max:a}=e,s=Tr(t,(a-n)/2),i=(e,t)=>r&&0===e?0:e+t;return{min:i(n,-Math.abs(s)),max:i(a,s)}}(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=i<this.ticks.length;this._convertTicksToLabels(o?Bi(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Mi(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,r=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,r=!r),this._startPixel=e,this._endPixel=t,this._reversePixels=r,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pr(this.options.afterUpdate,[this])}beforeSetDimensions(){Pr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,a;for(r=0,n=e.length;r<n;r++)a=e[r],a.label=Pr(t.callback,[a.value,r,e],this)}afterTickToLabelConversion(){Pr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Fi(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,a=t.maxRotation;let s,i,o,l=n;if(!this._isVisible()||!t.display||n>=a||r<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=mn(this.chart.width-d,0,this.maxWidth);s=e.offset?this.maxWidth/r:h/(r-1),d+6>s&&(s=h/(r-(e.offset?.5:1)),i=this.maxHeight-Ui(e.grid)-t.padding-qi(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=ln(Math.min(Math.asin(mn((c.highest.height+6)/s,-1,1)),Math.asin(mn(i/o,-1,1))-Math.asin(mn(u/o,-1,1)))),l=Math.max(n,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){Pr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:a}}=this,s=this._isVisible(),i=this.isHorizontal();if(s){const s=qi(n,t.options.font);if(i?(e.width=this.maxWidth,e.height=Ui(a)+s):(e.height=this.maxHeight,e.width=Ui(a)+s),r.display&&this.ticks.length){const{first:t,last:n,widest:a,highest:s}=this._getLabelSizes(),o=2*r.padding,l=on(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(i){const t=r.mirror?0:d*a.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=r.mirror?0:c*a.width+d*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:a,padding:s},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=n*e.width,u=r*t.height):(d=r*e.height,u=n*t.width):"start"===a?u=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+s)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let r=t.height/2,n=e.height/2;"start"===a?(r=0,n=e.height):"end"===a&&(r=t.height,n=0),this.paddingTop=r+s,this.paddingBottom=n+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)_r(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=Bi(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:a}=this,s=[],i=[],o=Math.floor(t/Fi(t,r));let l,c,d,u,h,f,p,m,g,v,b,x=0,y=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),n.font=f=h.string,p=a[f]=a[f]||{data:{},gc:[]},m=h.lineHeight,g=v=0,_r(u)||Sr(u)){if(Sr(u))for(c=0,d=u.length;c<d;++c)b=u[c],_r(b)||Sr(b)||(g=$n(n,p.data,p.gc,g,b),v+=m)}else g=$n(n,p.data,p.gc,g,u),v=m;s.push(g),i.push(v),x=Math.max(g,x),y=Math.max(v,y)}!function(e,t){Dr(e,e=>{const r=e.gc,n=r.length/2;let a;if(n>t){for(a=0;a<n;++a)delete e.data[r[a]];r.splice(0,n)}})}(a,t);const w=s.indexOf(x),j=i.indexOf(y),N=e=>({width:s[e]||0,height:i[e]||0});return{first:N(0),last:N(t-1),widest:N(w),highest:N(j),widths:s,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return mn(e,-32768,32767)}(this._alignToPixels?Xn(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function(e,t,r){return xa(e,{tick:r,index:t,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=xa(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=on(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,i=a?a.widest.width+s:0,o=a?a.highest.height+s:0;return this.isHorizontal()?o*r>i*n?i/r:o/n:o*n<i*r?o/r:i/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:a,position:s,border:i}=n,o=a.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=Ui(a),u=[],h=i.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return Xn(r,e,f)};let g,v,b,x,y,w,j,N,_,S,k,A;if("top"===s)g=m(this.bottom),w=this.bottom-d,N=g-p,S=m(e.top)+p,A=e.bottom;else if("bottom"===s)g=m(this.top),S=e.top,A=m(e.bottom)-p,w=g+p,N=this.top+d;else if("left"===s)g=m(this.right),y=this.right-d,j=g-p,_=m(e.left)+p,k=e.right;else if("right"===s)g=m(this.left),_=e.left,k=m(e.right)-p,y=g+p,j=this.left+d;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(kr(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}S=e.top,A=e.bottom,w=g+p,N=w+d}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(kr(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}y=g-p,j=y-d,_=e.left,k=e.right}const E=Cr(n.ticks.maxTicksLimit,c),C=Math.max(1,Math.ceil(c/E));for(v=0;v<c;v+=C){const e=this.getContext(v),t=a.setContext(e),n=i.setContext(e),s=t.lineWidth,c=t.color,d=n.dash||[],h=n.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=zi(this,v,o),void 0!==b&&(x=Xn(r,b,s),l?y=j=_=k=x:w=N=S=A=x,u.push({tx1:y,ty1:w,tx2:j,ty2:N,x1:_,y1:S,x2:k,y2:A,width:s,color:c,borderDash:d,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:a}=r,s=this.isHorizontal(),i=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=a,u=Ui(r.grid),h=u+c,f=d?-c:h,p=-on(this.labelRotation),m=[];let g,v,b,x,y,w,j,N,_,S,k,A,E="middle";if("top"===n)w=this.bottom-f,j=this._getXAxisLabelAlignment();else if("bottom"===n)w=this.top+f,j=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,y=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,y=e.x}else if("x"===t){if("center"===n)w=(e.top+e.bottom)/2+h;else if(kr(n)){const e=Object.keys(n)[0],t=n[e];w=this.chart.scales[e].getPixelForValue(t)+h}j=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)y=(e.left+e.right)/2-h;else if(kr(n)){const e=Object.keys(n)[0],t=n[e];y=this.chart.scales[e].getPixelForValue(t)}j=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?E="top":"end"===o&&(E="bottom"));const C=this._getLabelSizes();for(g=0,v=i.length;g<v;++g){b=i[g],x=b.label;const e=a.setContext(this.getContext(g));N=this.getPixelForTick(g)+a.labelOffset,_=this._resolveTickFontOptions(g),S=_.lineHeight,k=Sr(x)?x.length:1;const t=k/2,r=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=j;if(s?(y=N,"inner"===j&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),A="top"===n?"near"===l||0!==p?-k*S+S/2:"center"===l?-C.highest.height/2-t*S+S:-C.highest.height+S/2:"near"===l||0!==p?S/2:"center"===l?C.highest.height/2-t*S:C.highest.height-k*S,d&&(A*=-1),0===p||e.showLabelBackdrop||(y+=S/2*Math.sin(p))):(w=N,A=(1-k)*S/2),e.showLabelBackdrop){const t=ga(e.backdropPadding),r=C.heights[g],n=C.widths[g];let a=A-t.top,s=0-t.left;switch(E){case"middle":a-=r/2;break;case"bottom":a-=r}switch(j){case"center":s-=n/2;break;case"right":s-=n;break;case"inner":g===v-1?s-=n:g>0&&(s-=n/2)}u={left:s,top:a,width:n+t.width,height:r+t.height,color:e.backdropColor}}m.push({label:x,font:_,textOffset:A,options:{rotation:p,color:r,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:E,translation:[y,w],backdrop:u}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-on(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:a}}=this.options,s=e+a,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?n?(l=this.right+a,"near"===r?o="left":"center"===r?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-s,"near"===r?o="right":"center"===r?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?n?(l=this.left+a,"near"===r?o="right":"center"===r?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+s,"near"===r?o="left":"center"===r?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:a,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,a,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(t=>t.value===e);if(r>=0){return t.setContext(this.getContext(r)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const i=(e,t,n)=>{n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(t.display)for(a=0,s=n.length;a<s;++a){const e=n[a];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,a=r.setContext(this.getContext()),s=r.display?a.width:0;if(!s)return;const i=n.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=Xn(e,this.left,s)-s/2,c=Xn(e,this.right,i)+i/2,d=u=o):(d=Xn(e,this.top,s)-s/2,u=Xn(e,this.bottom,i)+i/2,l=c=o),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,r=this._computeLabelArea();r&&ta(t,r);const n=this.getLabelItems(e);for(const a of n){const e=a.options,r=a.font;oa(t,a.label,0,a.textOffset,r,e)}r&&ra(t)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const a=va(r.font),s=ga(r.padding),i=r.align;let o=a.lineHeight/2;"bottom"===t||"center"===t||kr(t)?(o+=s.bottom,Sr(r.text)&&(o+=a.lineHeight*(r.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,r,n){const{top:a,left:s,bottom:i,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,f,p=0;const m=i-a,g=o-s;if(e.isHorizontal()){if(h=kn(n,s,o),kr(r)){const e=Object.keys(r)[0],n=r[e];f=d[e].getPixelForValue(n)+m-t}else f="center"===r?(c.bottom+c.top)/2+m-t:Li(e,r,t);u=o-s}else{if(kr(r)){const e=Object.keys(r)[0],n=r[e];h=d[e].getPixelForValue(n)-g+t}else h="center"===r?(c.left+c.right)/2-g+t:Li(e,r,t);f=kn(n,i,a),p="left"===r?-Jr:Jr}return{titleX:h,titleY:f,maxWidth:u,rotation:p}}(this,o,t,i);oa(e,r.text,0,0,a,{color:r.color,maxWidth:d,rotation:u,textAlign:Wi(i,t,n),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Cr(e.grid&&e.grid.z,-1),n=Cr(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Hi.prototype.draw?[{z:r,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let a,s;for(a=0,s=t.length;a<s;++a){const s=t[a];s[r]!==this.id||e&&s.type!==e||n.push(s)}return n}_resolveTickFontOptions(e){return va(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vi{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const n=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,function(e,t,r){const n=Lr(Object.create(null),[r?Kn.get(r):{},Kn.get(t),e.defaults]);Kn.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(r=>{const n=r.split("."),a=n.pop(),s=[e].concat(n).join("."),i=t[r].split("."),o=i.pop(),l=i.join(".");Kn.route(s,a,l,o)})}(t,e.defaultRoutes);e.descriptors&&Kn.describe(t,e.descriptors)}(e,s,r),this.override&&Kn.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in Kn[n]&&(delete Kn[n][r],this.override&&delete qn[r])}}class Gi{constructor(){this.controllers=new Vi(Ps,"datasets",!0),this.elements=new Vi(Ii,"elements"),this.plugins=new Vi(Object,"plugins"),this.scales=new Vi(Hi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.scales)}_each(e,t,r){[...t].forEach(t=>{const n=r||this._getRegistryForType(t);r||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):Dr(t,t=>{const n=r||this._getRegistryForType(t);this._exec(e,n,t)})})}_exec(e,t,r){const n=qr(e);Pr(r["before"+n],[],r),t[e](r),Pr(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var Ki=new Gi;class $i{constructor(){this._init=[]}notify(e,t,r,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=n?this._descriptors(e).filter(n):this._descriptors(e),s=this._notify(a,e,t,r);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,r,n){n=n||{};for(const a of e){const e=a.plugin;if(!1===Pr(e[r],[t,n,a.options],e)&&n.cancelable)return!1}return!0}invalidate(){_r(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=Cr(r.options&&r.options.plugins,{}),a=function(e){const t={},r=[],n=Object.keys(Ki.plugins.items);for(let s=0;s<n.length;s++)r.push(Ki.getPlugin(n[s]));const a=e.plugins||[];for(let s=0;s<a.length;s++){const e=a[s];-1===r.indexOf(e)&&(r.push(e),t[e.id]=!0)}return{plugins:r,localIds:t}}(r);return!1!==n||t?function(e,t,r,n){let{plugins:a,localIds:s}=t;const i=[],o=e.getContext();for(const l of a){const t=l.id,a=Yi(r[t],n);null!==a&&i.push({plugin:l,options:Xi(e.config,{plugin:l,local:s[t]},a,o)})}return i}(e,a,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function Yi(e,t){return t||!1!==e?!0===e?{}:e:null}function Xi(e,t,r,n){let{plugin:a,local:s}=t;const i=e.pluginScopeKeys(a),o=e.getOptionScopes(r,i);return s&&a.defaults&&o.push(a.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ji(e,t){const r=Kn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function Zi(e){if("x"===e||"y"===e||"r"===e)return e}function Qi(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function eo(e){if(Zi(e))return e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const a of r){const t=a.axis||Qi(a.position)||e.length>1&&Zi(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function to(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function ro(e,t){const r=qn[e.type]||{scales:{}},n=t.scales||{},a=Ji(e.type,t),s=Object.create(null);return Object.keys(n).forEach(t=>{const i=n[t];if(!kr(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=eo(t,i,function(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(r.length)return to(e,"x",r[0])||to(e,"y",r[0])}return{}}(t,e),Kn.scales[i.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,a),c=r.scales||{};s[t]=Fr(Object.create(null),[{axis:o},i,c[o],c[l]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,i=r.indexAxis||Ji(a,t),o=(qn[a]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let r=e;return"_index_"===e?r=t:"_value_"===e&&(r="x"===t?"y":"x"),r}(e,i),a=r[t+"AxisID"]||t;s[a]=s[a]||Object.create(null),Fr(s[a],[{axis:t},n[a],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];Fr(t,[Kn.scales[t.type],Kn.scale])}),s}function no(e){const t=e.options||(e.options={});t.plugins=Cr(t.plugins,{}),t.scales=ro(e,t)}function ao(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const so=new Map,io=new Set;function oo(e,t){let r=so.get(e);return r||(r=t(),so.set(e,r),io.add(r)),r}const lo=(e,t,r)=>{const n=Ur(t,r);void 0!==n&&e.add(n)};class co{constructor(e){this._config=function(e){return(e=e||{}).data=ao(e.data),no(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ao(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),no(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return oo(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return oo("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return oo("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return oo("".concat(r,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return n&&!t||(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:a}=this,s=this._cachedScopes(e,r),i=s.get(t);if(i)return i;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>lo(o,e,t))),t.forEach(e=>lo(o,n,e)),t.forEach(e=>lo(o,qn[a]||{},e)),t.forEach(e=>lo(o,Kn,e)),t.forEach(e=>lo(o,Wn,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),io.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,qn[t]||{},Kn.datasets[t]||{},{type:t},Kn,Wn]}resolveNamedOptions(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const a={$shared:!0},{resolver:s,subPrefixes:i}=uo(this._resolverCache,e,n);let o=s;if(function(e,t){const{isScriptable:r,isIndexable:n}=ja(e);for(const a of t){const t=r(a),s=n(a),i=(s||t)&&e[a];if(t&&(Hr(i)||ho(i))||s&&Sr(i))return!0}return!1}(s,t)){a.$shared=!1;o=wa(s,r=Hr(r)?r():r,this.createResolver(e,r,i))}for(const l of t)a[l]=o[l];return a}createResolver(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0;const{resolver:a}=uo(this._resolverCache,e,r);return kr(t)?wa(a,t,void 0,n):a}}function uo(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=r.join();let s=n.get(a);if(!s){s={resolver:ya(t,r),subPrefixes:r.filter(e=>!e.toLowerCase().includes("hover"))},n.set(a,s)}return s}const ho=e=>kr(e)&&Object.getOwnPropertyNames(e).some(t=>Hr(e[t]));const fo=["top","bottom","left","right","chartArea"];function po(e,t){return"top"===e||"bottom"===e||-1===fo.indexOf(e)&&"x"===t}function mo(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function go(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),Pr(r&&r.onComplete,[e],t)}function vo(e){const t=e.chart,r=t.options.animation;Pr(r&&r.onProgress,[e],t)}function bo(e){return Ua()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const xo={},yo=e=>{const t=bo(e);return Object.values(xo).filter(e=>e.canvas===t).pop()};function wo(e,t,r){const n=Object.keys(e);for(const a of n){const n=+a;if(n>=t){const s=e[a];delete e[a],(r>0||n>t)&&(e[n+r]=s)}}}class jo{static register(){Ki.add(...arguments),No()}static unregister(){Ki.remove(...arguments),No()}constructor(e,t){const r=this.config=new co(t),n=bo(e),a=yo(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!Ua()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?bi:Oi}(n)),this.platform.updateConfig(r);const i=this.platform.acquireContext(n,s.aspectRatio),o=i&&i.canvas,l=o&&o.height,c=o&&o.width;this.id=Nr(),this.ctx=i,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $i,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let r;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t?(clearTimeout(r),r=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],xo[this.id]=this,i&&o?(ms.listen(this,"complete",go),ms.listen(this,"progress",vo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:a}=this;return _r(e)?t&&a?a:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ki}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Xa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Jn(this.canvas,this.ctx),this}stop(){return ms.stop(this),this}resize(e,t){ms.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(n,e,t,a),i=r.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Xa(this,i,!0)&&(this.notifyPlugins("resize",{size:s}),Pr(r.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Dr(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((e,t)=>(e[t]=!1,e),{});let a=[];t&&(a=a.concat(Object.keys(t).map(e=>{const r=t[e],n=eo(e,r),a="r"===n,s="x"===n;return{options:r,dposition:a?"chartArea":s?"bottom":"left",dtype:a?"radialLinear":s?"category":"linear"}}))),Dr(a,t=>{const a=t.options,s=a.id,i=eo(s,a),o=Cr(a.type,t.dtype);void 0!==a.position&&po(a.position,i)===po(t.dposition)||(a.position=t.dposition),n[s]=!0;let l=null;if(s in r&&r[s].type===o)l=r[s];else{l=new(Ki.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),r[l.id]=l}l.init(a,e)}),Dr(n,(e,t)=>{e||delete r[t]}),Dr(r,e=>{gi.configure(this,e,e.options),gi.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((e,t)=>e.index-t.index),r>t){for(let e=t;e<r;++e)this._destroyDatasetMeta(e);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(mo("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,r)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const n=t[r];let a=this.getDatasetMeta(r);const s=n.type||this.config.type;if(a.type&&a.type!==s&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=s,a.indexAxis=n.indexAxis||Ji(s,this.options),a.order=n.order||0,a.index=r,a.label=""+n.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const t=Ki.getController(s),{datasetElementType:n,dataElementType:i}=Kn.datasets[s];Object.assign(t,{dataElementType:Ki.getElement(i),datasetElementType:n&&Ki.getElement(n)}),a.controller=new t(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Dr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!n&&-1===a.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=r.layout.autoPadding?s:0,this._updateLayout(s),n||Dr(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(mo("z","_idx"));const{_active:i,_lastEvent:o}=this;o?this._eventHandler(o,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){Dr(this.scales,e=>{gi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);Vr(t,r)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:a}of t){wo(e,n,"_removeElements"===r?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),n=r(0);for(let a=1;a<t;a++)if(!Vr(n,r(a)))return;return Array.from(n).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;gi.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Dr(this.boxes,e=>{r&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Hr(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ms.has(this)?this.attached&&!ms.running(this)&&ms.start(this):(this.draw(),go({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,a;for(n=0,a=t.length;n<a;++n){const a=t[n];e&&!a.visible||r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=fs(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&ta(t,n),e.controller.draw(),n&&ra(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const a=ni.modes[t];return"function"===typeof a?a(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(e=>e&&e._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=xa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"===typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,n);Wr(t)?(a.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),s.update(a,{visible:r}),this.update(t=>t.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ms.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Jn(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete xo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(e,t,r)=>{e.offsetX=t,e.offsetY=r,this._eventHandler(e)};Dr(this.options.events,e=>r(e,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(r,n)=>{e[r]&&(t.removeEventListener(this,r,n),delete e[r])},a=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const i=()=>{n("attach",i),this.attached=!0,this.resize(),r("resize",a),r("detach",s)};s=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),r("attach",i)},t.isAttached(this.canvas)?i():s()}unbindEvents(){Dr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Dr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let a,s,i,o;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){s=e[i];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[r],index:r}});!Or(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,r){const n=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=a(t,e),i=r?e:a(e,t);s.length&&this.updateHoverStyle(s,n.mode,!1),i.length&&n.mode&&this.updateHoverStyle(i,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;const a=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(a||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:a}=this,s=t,i=this._getActiveElements(e,n,r,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,r,n){return r&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,r,o);r&&(this._lastEvent=null,Pr(a.onHover,[e,i,this],this),o&&Pr(a.onClick,[e,i,this],this));const c=!Or(i,n);return(c||t)&&(this._active=i,this._updateHoverStyles(i,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,r,n){if("mouseout"===e.type)return[];if(!r)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}function No(){return Dr(jo.instances,e=>e._plugins.invalidate())}function _o(e,t,r,n){const a=function(e){return fa(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(r-t)/2,i=Math.min(s,n*t/2),o=e=>{const t=(r-Math.min(s,e))*n/2;return mn(e,0,Math.min(s,t))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:mn(a.innerStart,0,i),innerEnd:mn(a.innerEnd,0,i)}}function So(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function ko(e,t,r,n,a,s){const{x:i,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+r-c,0),h=d>0?d+n+r+c:0;let f=0;const p=a-l;if(n){const e=((d>0?d-n:0)+(u>0?u-n:0))/2;f=(p-(0!==e?p*e/(e+n):p))/2}const m=(p-Math.max(.001,p*u-r/Gr)/u)/2,g=l+m+f,v=a-m-f,{outerStart:b,outerEnd:x,innerStart:y,innerEnd:w}=_o(t,h,u,v-g),j=u-b,N=u-x,_=g+b/j,S=v-x/N,k=h+y,A=h+w,E=g+y/k,C=v-w/A;if(e.beginPath(),s){const t=(_+S)/2;if(e.arc(i,o,u,_,t),e.arc(i,o,u,t,S),x>0){const t=So(N,S,i,o);e.arc(t.x,t.y,x,S,v+Jr)}const r=So(A,v,i,o);if(e.lineTo(r.x,r.y),w>0){const t=So(A,C,i,o);e.arc(t.x,t.y,w,v+Jr,C+Math.PI)}const n=(v-w/h+(g+y/h))/2;if(e.arc(i,o,h,v-w/h,n,!0),e.arc(i,o,h,n,g+y/h,!0),y>0){const t=So(k,E,i,o);e.arc(t.x,t.y,y,E+Math.PI,g-Jr)}const a=So(j,g,i,o);if(e.lineTo(a.x,a.y),b>0){const t=So(j,_,i,o);e.arc(t.x,t.y,b,g-Jr,_)}}else{e.moveTo(i,o);const t=Math.cos(_)*u+i,r=Math.sin(_)*u+o;e.lineTo(t,r);const n=Math.cos(S)*u+i,a=Math.sin(S)*u+o;e.lineTo(n,a)}e.closePath()}function Ao(e,t,r,n,a){const{fullCircles:s,startAngle:i,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let m=t.endAngle;if(s){ko(e,t,r,n,m,a);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(m=i+(o%Kr||Kr))}p&&function(e,t,r){const{startAngle:n,pixelMargin:a,x:s,y:i,outerRadius:o,innerRadius:l}=t;let c=a/o;e.beginPath(),e.arc(s,i,o,n-c,r+c),l>a?(c=a/l,e.arc(s,i,l,r+c,n-c,!0)):e.arc(s,i,a,r+Jr,n-Jr),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-i>=Gr&&0===f&&"miter"!==d&&function(e,t,r){const{startAngle:n,x:a,y:s,outerRadius:i,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/i,fn(n-r));if(e.beginPath(),e.arc(a,s,i-c/2,n+u/2,r-u/2),o>0){const t=Math.min(c/o,fn(n-r));e.arc(a,s,o+c/2,r-t/2,n+t/2,!0)}else{const t=Math.min(c/2,i*fn(n-r));if("round"===d)e.arc(a,s,t,r-Gr/2,n+Gr/2,!0);else if("bevel"===d){const i=2*t*t,o=-i*Math.cos(r+Gr/2)+a,l=-i*Math.sin(r+Gr/2)+s,c=i*Math.cos(n+Gr/2)+a,d=i*Math.sin(n+Gr/2)+s;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),s||(ko(e,t,r,n,m,a),e.stroke())}(0,qt.A)(jo,"defaults",Kn),(0,qt.A)(jo,"instances",xo),(0,qt.A)(jo,"overrides",qn),(0,qt.A)(jo,"registry",Ki),(0,qt.A)(jo,"version","4.5.0"),(0,qt.A)(jo,"getChart",yo);class Eo extends Ii{constructor(e){super(),(0,qt.A)(this,"circumference",void 0),(0,qt.A)(this,"endAngle",void 0),(0,qt.A)(this,"fullCircles",void 0),(0,qt.A)(this,"innerRadius",void 0),(0,qt.A)(this,"outerRadius",void 0),(0,qt.A)(this,"pixelMargin",void 0),(0,qt.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.getProps(["x","y"],r),{angle:a,distance:s}=dn(n,{x:e,y:t}),{startAngle:i,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),u=(this.options.spacing+this.options.borderWidth)/2,h=Cr(d,o-i),f=pn(a,i,o)&&i!==o,p=h>=Kr||f,m=gn(s,l+u,c+u);return p&&m}getCenterPoint(e){const{x:t,y:r,startAngle:n,endAngle:a,innerRadius:s,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(n+a)/2,d=(s+i+l+o)/2;return{x:t+Math.cos(c)*d,y:r+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,n=(t.offset||0)/4,a=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>Kr?Math.floor(r/Kr):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*n,Math.sin(i)*n);const o=n*(1-Math.sin(Math.min(Gr,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,r,n,a){const{fullCircles:s,startAngle:i,circumference:o}=t;let l=t.endAngle;if(s){ko(e,t,r,n,l,a);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=i+(o%Kr||Kr))}ko(e,t,r,n,l,a),e.fill()}(e,this,o,a,s),Ao(e,this,o,a,s),e.restore()}}function Co(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Cr(r.borderCapStyle,t.borderCapStyle),e.setLineDash(Cr(r.borderDash,t.borderDash)),e.lineDashOffset=Cr(r.borderDashOffset,t.borderDashOffset),e.lineJoin=Cr(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Cr(r.borderWidth,t.borderWidth),e.strokeStyle=Cr(r.borderColor,t.borderColor)}function To(e,t,r){e.lineTo(r.x,r.y)}function Po(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length,{start:a=0,end:s=n-1}=r,{start:i,end:o}=t,l=Math.max(a,i),c=Math.min(s,o),d=a<i&&s<i||a>o&&s>o;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function Do(e,t,r,n){const{points:a,options:s}=t,{count:i,start:o,loop:l,ilen:c}=Po(a,r,n),d=function(e){return e.stepped?na:e.tension||"monotone"===e.cubicInterpolationMode?aa:To}(s);let u,h,f,{move:p=!0,reverse:m}=n||{};for(u=0;u<=c;++u)h=a[(o+(m?c-u:u))%i],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,f,h,m,s.stepped),f=h);return l&&(h=a[(o+(m?c:0))%i],d(e,f,h,m,s.stepped)),!!l}function Oo(e,t,r,n){const a=t.points,{count:s,start:i,ilen:o}=Po(a,r,n),{move:l=!0,reverse:c}=n||{};let d,u,h,f,p,m,g=0,v=0;const b=e=>(i+(c?o-e:e))%s,x=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(u=a[b(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=a[b(d)],u.skip)continue;const t=u.x,r=u.y,n=0|t;n===h?(r<f?f=r:r>p&&(p=r),g=(v*g+t)/++v):(x(),e.lineTo(t,r),h=n,v=0,f=p=r),m=r}x()}function Io(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!r?Oo:Do}(0,qt.A)(Eo,"id","arc"),(0,qt.A)(Eo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,qt.A)(Eo,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,qt.A)(Eo,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Mo="function"===typeof Path2D;function Ro(e,t,r,n){Mo&&!t.options.segment?function(e,t,r,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,r,n)&&a.closePath()),Co(e,t.options),e.stroke(a)}(e,t,r,n):function(e,t,r,n){const{segments:a,options:s}=t,i=Io(t);for(const o of a)Co(e,s,o.style),e.beginPath(),i(e,t,o,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}(e,t,r,n)}class Lo extends Ii{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||"monotone"===r.cubicInterpolationMode)&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;za(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];const s=!!e._loop,{start:i,end:o}=function(e,t,r,n){let a=0,s=t-1;if(r&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,r&&(s+=a);s>a&&e[s%t].skip;)s--;return s%=t,{start:a,end:s}}(r,a,s,n);return cs(e,!0===n?[{start:i,end:o,loop:s}]:function(e,t,r,n){const a=e.length,s=[];let i,o=t,l=e[t];for(i=t+1;i<=r;++i){const r=e[i%a];r.skip||r.stop?l.skip||(n=!1,s.push({start:t%a,end:(i-1)%a,loop:n}),t=o=r.stop?i:null):(o=i,l.skip&&(t=i)),l=r}return null!==o&&s.push({start:t%a,end:o%a,loop:n}),s}(r,i,o<i?o+a:o,!!e._fullLoop&&0===i&&o===a-1),r,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],a=this.points,s=ls(this,{property:t,start:n,end:n});if(!s.length)return;const i=[],o=function(e){return e.stepped?es:e.tension||"monotone"===e.cubicInterpolationMode?ts:Qa}(r);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],u=a[c],h=a[d];if(u===h){i.push(u);continue}const f=o(u,h,Math.abs((n-u[t])/(h[t]-u[t])),r.stepped);f[t]=e[t],i.push(f)}return 1===i.length?i[0]:i}pathSegment(e,t,r){return Io(this)(e,this,t,r)}path(e,t,r){const n=this.segments,a=Io(this);let s=this._loop;t=t||0,r=r||this.points.length-t;for(const i of n)s&=a(e,this,i,{start:t,end:t+r-1});return!!s}draw(e,t,r,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Ro(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Fo(e,t,r,n){const a=e.options,{[r]:s}=e.getProps([r],n);return Math.abs(t-s)<a.radius+a.hitRadius}(0,qt.A)(Lo,"id","line"),(0,qt.A)(Lo,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,qt.A)(Lo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,qt.A)(Lo,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Bo extends Ii{constructor(e){super(),(0,qt.A)(this,"parsed",void 0),(0,qt.A)(this,"skip",void 0),(0,qt.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.options,{x:a,y:s}=this.getProps(["x","y"],r);return Math.pow(e-a,2)+Math.pow(t-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return Fo(this,e,"x",t)}inYRange(e,t){return Fo(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const r=this.options;this.skip||r.radius<.1||!ea(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Zn(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function zo(e,t){const{x:r,y:n,base:a,width:s,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=i/2,o=Math.min(r,a),l=Math.max(r,a),c=n-u,d=n+u):(u=s/2,o=r-u,l=r+u,c=Math.min(n,a),d=Math.max(n,a)),{left:o,top:c,right:l,bottom:d}}function Uo(e,t,r,n){return e?0:mn(t,r,n)}function qo(e){const t=zo(e),r=t.right-t.left,n=t.bottom-t.top,a=function(e,t,r){const n=e.options.borderWidth,a=e.borderSkipped,s=pa(n);return{t:Uo(a.top,s.top,0,r),r:Uo(a.right,s.right,0,t),b:Uo(a.bottom,s.bottom,0,r),l:Uo(a.left,s.left,0,t)}}(e,r/2,n/2),s=function(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,s=ma(a),i=Math.min(t,r),o=e.borderSkipped,l=n||kr(a);return{topLeft:Uo(!l||o.top||o.left,s.topLeft,0,i),topRight:Uo(!l||o.top||o.right,s.topRight,0,i),bottomLeft:Uo(!l||o.bottom||o.left,s.bottomLeft,0,i),bottomRight:Uo(!l||o.bottom||o.right,s.bottomRight,0,i)}}(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:s},inner:{x:t.left+a.l,y:t.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,s.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(a.b,a.r))}}}}function Wo(e,t,r,n){const a=null===t,s=null===r,i=e&&!(a&&s)&&zo(e,n);return i&&(a||gn(t,i.left,i.right))&&(s||gn(r,i.top,i.bottom))}function Ho(e,t){e.rect(t.x,t.y,t.w,t.h)}function Vo(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.x!==r.x?-t:0,a=e.y!==r.y?-t:0,s=(e.x+e.w!==r.x+r.w?t:0)-n,i=(e.y+e.h!==r.y+r.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+s,h:e.h+i,radius:e.radius}}(0,qt.A)(Bo,"id","point"),(0,qt.A)(Bo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,qt.A)(Bo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Go extends Ii{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:a,outer:s}=qo(this),i=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?la:Ho;var o;e.save(),s.w===a.w&&s.h===a.h||(e.beginPath(),i(e,Vo(s,t,a)),e.clip(),i(e,Vo(a,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),i(e,Vo(a,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return Wo(this,e,t,r)}inXRange(e,t){return Wo(this,e,null,t)}inYRange(e,t){return Wo(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?r:(r+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,qt.A)(Go,"id","bar"),(0,qt.A)(Go,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,qt.A)(Go,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ko=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}};class $o extends Ii{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Pr(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,r)=>e.sort(t,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,n=va(r.font),a=n.size,s=this._computeTitleHeight(),{boxWidth:i,itemHeight:o}=Ko(r,a);let l,c;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,a,i,o)+10):(c=this.maxHeight,l=this._fitCols(s,n,i,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:a,maxWidth:s,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+i;let d=e;a.textAlign="left",a.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,f)=>{const p=r+t/2+a.measureText(e.text).width;(0===f||l[l.length-1]+p+2*i>s)&&(d+=c,l[l.length-(f>0?0:1)]=0,h+=c,u++),o[f]={left:0,top:h,row:u,width:p,height:n},l[l.length-1]+=p+i}),d}_fitCols(e,t,r,n){const{ctx:a,maxHeight:s,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let d=i,u=0,h=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,r,n,a){const s=function(e,t,r,n){let a=e.text;a&&"string"!==typeof a&&(a=a.reduce((e,t)=>e.length>t.length?e:t));return t+r.size/2+n.measureText(a).width}(n,e,t,r),i=function(e,t,r){let n=e;"string"!==typeof t.text&&(n=Yo(t,r));return n}(a,n,t.lineHeight);return{itemWidth:s,itemHeight:i}}(r,t,a,e,n);s>0&&h+g+2*i>c&&(d+=u+i,l.push({width:u,height:h}),f+=u+i,p++,u=h=0),o[s]={left:f,top:h,col:p,width:m,height:g},u=Math.max(u,m),h+=g+i}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:a}}=this,s=rs(a,this.left,this.width);if(this.isHorizontal()){let a=0,i=kn(r,this.left+n,this.right-this.lineWidths[a]);for(const o of t)a!==o.row&&(a=o.row,i=kn(r,this.left+n,this.right-this.lineWidths[a])),o.top+=this.top+e+n,o.left=s.leftForLtr(s.x(i),o.width),i+=o.width+n}else{let a=0,i=kn(r,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const o of t)o.col!==a&&(a=o.col,i=kn(r,this.top+e+n,this.bottom-this.columnSizes[a].height)),o.top=i,o.left+=this.left+n,o.left=s.leftForLtr(s.x(o.left),o.width),i+=o.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;ta(e,this),this._draw(),ra(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:a,labels:s}=e,i=Kn.color,o=rs(e.rtl,this.left,this.width),l=va(s.font),{padding:c}=s,d=l.size,u=d/2;let h;this.drawTitle(),n.textAlign=o.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=Ko(s,d),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:kn(a,this.left+c,this.right-r[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:kn(a,this.top+v+c,this.bottom-t[0].height),line:0},ns(this.ctx,e.textDirection);const b=m+c;this.legendItems.forEach((x,y)=>{n.strokeStyle=x.fontColor,n.fillStyle=x.fontColor;const w=n.measureText(x.text).width,j=o.textAlign(x.textAlign||(x.textAlign=s.textAlign)),N=f+u+w;let _=h.x,S=h.y;o.setWidth(this.width),g?y>0&&_+N+c>this.right&&(S=h.y+=b,h.line++,_=h.x=kn(a,this.left+c,this.right-r[h.line])):y>0&&S+b>this.bottom&&(_=h.x=_+t[h.line].width+c,h.line++,S=h.y=kn(a,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,r){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;n.save();const a=Cr(r.lineWidth,1);if(n.fillStyle=Cr(r.fillStyle,i),n.lineCap=Cr(r.lineCap,"butt"),n.lineDashOffset=Cr(r.lineDashOffset,0),n.lineJoin=Cr(r.lineJoin,"miter"),n.lineWidth=a,n.strokeStyle=Cr(r.strokeStyle,i),n.setLineDash(Cr(r.lineDash,[])),s.usePointStyle){const i={radius:p*Math.SQRT2/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:a},l=o.xPlus(e,f/2);Qn(n,i,l,t+u,s.pointStyleWidth&&f)}else{const s=t+Math.max((d-p)/2,0),i=o.leftForLtr(e,f),l=ma(r.borderRadius);n.beginPath(),Object.values(l).some(e=>0!==e)?la(n,{x:i,y:s,w:f,h:p,radius:l}):n.rect(i,s,f,p),n.fill(),0!==a&&n.stroke()}n.restore()}(o.x(_),S,x),_=((e,t,r,n)=>e===(n?"left":"right")?r:"center"===e?(t+r)/2:t)(j,_+f+u,g?_+N:this.right,e.rtl),function(e,t,r){oa(n,r.text,e,t+m/2,l,{strikethrough:r.hidden,textAlign:o.textAlign(r.textAlign)})}(o.x(_),S,x),g)h.x+=N+c;else if("string"!==typeof x.text){const e=l.lineHeight;h.y+=Yo(x,e)+c}else h.y+=b}),as(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=va(t.font),n=ga(t.padding);if(!t.display)return;const a=rs(e.rtl,this.left,this.width),s=this.ctx,i=t.position,o=r.size/2,l=n.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=kn(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+kn(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=kn(i,d,d+u);s.textAlign=a.textAlign(Sn(i)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,oa(s,t.text,h,c,r)}_computeTitleHeight(){const e=this.options.title,t=va(e.font),r=ga(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,a;if(gn(e,this.left,this.right)&&gn(t,this.top,this.bottom))for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(n=a[r],gn(e,n.left,n.left+n.width)&&gn(t,n.top,n.top+n.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,a=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(n,r);n&&!a&&Pr(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!a&&Pr(t.onHover,[e,r,this],this)}else r&&Pr(t.onClick,[e,r,this],this)}}function Yo(e,t){return t*(e.text?e.text.length:0)}var Xo={id:"legend",_element:$o,start(e,t,r){const n=e.legend=new $o({ctx:e.ctx,options:r,chart:e});gi.configure(e,n,r),gi.addBox(e,n)},stop(e){gi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;gi.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:s,useBorderRadius:i,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(r?0:void 0),c=ga(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:a||l.textAlign,borderRadius:i&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Jo extends Ii{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=Sr(r.text)?r.text.length:1;this._padding=ga(r.padding);const a=n*va(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:n,right:a,options:s}=this,i=s.align;let o,l,c,d=0;return this.isHorizontal()?(l=kn(i,r,a),c=t+e,o=a-r):("left"===s.position?(l=r+e,c=kn(i,n,t),d=-.5*Gr):(l=a-e,c=kn(i,t,n),d=.5*Gr),o=n-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=va(t.font),n=r.lineHeight/2+this._padding.top,{titleX:a,titleY:s,maxWidth:i,rotation:o}=this._drawArgs(n);oa(e,t.text,0,0,r,{color:t.color,maxWidth:i,rotation:o,textAlign:Sn(t.align),textBaseline:"middle",translation:[a,s]})}}var Zo={id:"title",_element:Jo,start(e,t,r){!function(e,t){const r=new Jo({ctx:e.ctx,options:t,chart:e});gi.configure(e,r,t),gi.addBox(e,r),e.titleBlock=r}(e,r)},stop(e){const t=e.titleBlock;gi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;gi.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Qo={average(e){if(!e.length)return!1;let t,r,n=new Set,a=0,s=0;for(t=0,r=e.length;t<r;++t){const r=e[t].element;if(r&&r.hasValue()){const e=r.tooltipPosition();n.add(e.x),a+=e.y,++s}}if(0===s||0===n.size)return!1;const i=[...n].reduce((e,t)=>e+t)/n.size;return{x:i,y:a/s}},nearest(e,t){if(!e.length)return!1;let r,n,a,s=t.x,i=t.y,o=Number.POSITIVE_INFINITY;for(r=0,n=e.length;r<n;++r){const n=e[r].element;if(n&&n.hasValue()){const e=un(t,n.getCenterPoint());e<o&&(o=e,a=n)}}if(a){const e=a.tooltipPosition();s=e.x,i=e.y}return{x:s,y:i}}};function el(e,t){return t&&(Sr(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function tl(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function rl(e,t){const{element:r,datasetIndex:n,index:a}=t,s=e.getDatasetMeta(n).controller,{label:i,value:o}=s.getLabelAndValue(a);return{chart:e,label:i,parsed:s.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:o,dataset:s.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function nl(e,t){const r=e.chart.ctx,{body:n,footer:a,title:s}=e,{boxWidth:i,boxHeight:o}=t,l=va(t.bodyFont),c=va(t.titleFont),d=va(t.footerFont),u=s.length,h=a.length,f=n.length,p=ga(t.padding);let m=p.height,g=0,v=n.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v){m+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const x=function(e){g=Math.max(g,r.measureText(e).width+b)};return r.save(),r.font=c.string,Dr(e.title,x),r.font=l.string,Dr(e.beforeBody.concat(e.afterBody),x),b=t.displayColors?i+2+t.boxPadding:0,Dr(n,e=>{Dr(e.before,x),Dr(e.lines,x),Dr(e.after,x)}),b=0,r.font=d.string,Dr(e.footer,x),r.restore(),g+=p.width,{width:g,height:m}}function al(e,t,r,n){const{x:a,width:s}=r,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===n?c=a<=(o+l)/2?"left":"right":a<=s/2?c="left":a>=i-s/2&&(c="right"),function(e,t,r,n){const{x:a,width:s}=n,i=r.caretSize+r.caretPadding;return"left"===e&&a+s+i>t.width||"right"===e&&a-s-i<0||void 0}(c,e,t,r)&&(c="center"),c}function sl(e,t,r){const n=r.yAlign||t.yAlign||function(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}(e,r);return{xAlign:r.xAlign||t.xAlign||al(e,t,r,n),yAlign:n}}function il(e,t,r,n){const{caretSize:a,caretPadding:s,cornerRadius:i}=e,{xAlign:o,yAlign:l}=r,c=a+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=ma(i);let p=function(e,t){let{x:r,width:n}=e;return"right"===t?r-=n:"center"===t&&(r-=n/2),r}(t,o);const m=function(e,t,r){let{y:n,height:a}=e;return"top"===t?n+=r:n-="bottom"===t?a+r:a/2,n}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(d,h)+a:"right"===o&&(p+=Math.max(u,f)+a),{x:mn(p,0,n.width-t.width),y:mn(m,0,n.height-t.height)}}function ol(e,t,r){const n=ga(r.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function ll(e){return el([],tl(e))}function cl(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const dl={beforeTitle:jr,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:jr,beforeBody:jr,beforeLabel:jr,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return _r(r)||(t+=r),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:jr,afterBody:jr,beforeFooter:jr,footer:jr,afterFooter:jr};function ul(e,t,r,n){const a=e[t].call(r,n);return"undefined"===typeof a?dl[t].call(r,n):a}class hl extends Ii{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,a=new xs(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,r=this._tooltipItems,xa(e,{tooltip:t,tooltipItems:r,type:"tooltip"})));var e,t,r}getTitle(e,t){const{callbacks:r}=t,n=ul(r,"beforeTitle",this,e),a=ul(r,"title",this,e),s=ul(r,"afterTitle",this,e);let i=[];return i=el(i,tl(n)),i=el(i,tl(a)),i=el(i,tl(s)),i}getBeforeBody(e,t){return ll(ul(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return Dr(e,e=>{const t={before:[],lines:[],after:[]},a=cl(r,e);el(t.before,tl(ul(a,"beforeLabel",this,e))),el(t.lines,ul(a,"label",this,e)),el(t.after,tl(ul(a,"afterLabel",this,e))),n.push(t)}),n}getAfterBody(e,t){return ll(ul(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=ul(r,"beforeFooter",this,e),a=ul(r,"footer",this,e),s=ul(r,"afterFooter",this,e);let i=[];return i=el(i,tl(n)),i=el(i,tl(a)),i=el(i,tl(s)),i}_createItems(e){const t=this._active,r=this.chart.data,n=[],a=[],s=[];let i,o,l=[];for(i=0,o=t.length;i<o;++i)l.push(rl(this.chart,t[i]));return e.filter&&(l=l.filter((t,n,a)=>e.filter(t,n,a,r))),e.itemSort&&(l=l.sort((t,n)=>e.itemSort(t,n,r))),Dr(l,t=>{const r=cl(e.callbacks,t);n.push(ul(r,"labelColor",this,t)),a.push(ul(r,"labelPointStyle",this,t)),s.push(ul(r,"labelTextColor",this,t))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let a,s=[];if(n.length){const e=Qo[r.position].call(this,n,this._eventPosition);s=this._createItems(r),this.title=this.getTitle(s,r),this.beforeBody=this.getBeforeBody(s,r),this.body=this.getBody(s,r),this.afterBody=this.getAfterBody(s,r),this.footer=this.getFooter(s,r);const t=this._size=nl(this,r),i=Object.assign({},e,t),o=sl(this.chart,r,i),l=il(r,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,a={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const a=this.getCaretPosition(e,r,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:a}=this,{caretSize:s,cornerRadius:i}=r,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=ma(i),{x:u,y:h}=e,{width:f,height:p}=t;let m,g,v,b,x,y;return"center"===a?(x=h+p/2,"left"===n?(m=u,g=m-s,b=x+s,y=x-s):(m=u+f,g=m+s,b=x-s,y=x+s),v=m):(g="left"===n?u+Math.max(o,c)+s:"right"===n?u+f-Math.max(l,d)-s:this.caretX,"top"===a?(b=h,x=b-s,m=g-s,v=g+s):(b=h+p,x=b+s,m=g+s,v=g-s),y=b),{x1:m,x2:g,x3:v,y1:b,y2:x,y3:y}}drawTitle(e,t,r){const n=this.title,a=n.length;let s,i,o;if(a){const l=rs(r.rtl,this.x,this.width);for(e.x=ol(this,r.titleAlign,r),t.textAlign=l.textAlign(r.titleAlign),t.textBaseline="middle",s=va(r.titleFont),i=r.titleSpacing,t.fillStyle=r.titleColor,t.font=s.string,o=0;o<a;++o)t.fillText(n[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i,o+1===a&&(e.y+=r.titleMarginBottom-i)}}_drawColorBox(e,t,r,n,a){const s=this.labelColors[r],i=this.labelPointStyles[r],{boxHeight:o,boxWidth:l}=a,c=va(a.bodyFont),d=ol(this,"left",a),u=n.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(a.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},r=n.leftForLtr(u,l)+l/2,c=f+o/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Zn(e,t,r,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Zn(e,t,r,c)}else{e.lineWidth=kr(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=n.leftForLtr(u,l),r=n.leftForLtr(n.xPlus(u,1),l-2),i=ma(s.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,la(e,{x:t,y:f,w:l,h:o,radius:i}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),la(e,{x:r,y:f+1,w:l-2,h:o-2,radius:i}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(r,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:a,bodyAlign:s,displayColors:i,boxHeight:o,boxWidth:l,boxPadding:c}=r,d=va(r.bodyFont);let u=d.lineHeight,h=0;const f=rs(r.rtl,this.x,this.width),p=function(r){t.fillText(r,f.x(e.x+h),e.y+u/2),e.y+=u+a},m=f.textAlign(s);let g,v,b,x,y,w,j;for(t.textAlign=s,t.textBaseline="middle",t.font=d.string,e.x=ol(this,m,r),t.fillStyle=r.bodyColor,Dr(this.beforeBody,p),h=i&&"right"!==m?"center"===s?l/2+c:l+2+c:0,x=0,w=n.length;x<w;++x){for(g=n[x],v=this.labelTextColors[x],t.fillStyle=v,Dr(g.before,p),b=g.lines,i&&b.length&&(this._drawColorBox(t,e,x,f,r),u=Math.max(d.lineHeight,o)),y=0,j=b.length;y<j;++y)p(b[y]),u=d.lineHeight;Dr(g.after,p)}h=0,u=d.lineHeight,Dr(this.afterBody,p),e.y-=a}drawFooter(e,t,r){const n=this.footer,a=n.length;let s,i;if(a){const o=rs(r.rtl,this.x,this.width);for(e.x=ol(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=o.textAlign(r.footerAlign),t.textBaseline="middle",s=va(r.footerFont),t.fillStyle=r.footerColor,t.font=s.string,i=0;i<a;++i)t.fillText(n[i],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:a,yAlign:s}=this,{x:i,y:o}=e,{width:l,height:c}=r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=ma(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(i+d,o),"top"===s&&this.drawCaret(e,t,r,n),t.lineTo(i+l-u,o),t.quadraticCurveTo(i+l,o,i+l,o+u),"center"===s&&"right"===a&&this.drawCaret(e,t,r,n),t.lineTo(i+l,o+c-f),t.quadraticCurveTo(i+l,o+c,i+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,r,n),t.lineTo(i+h,o+c),t.quadraticCurveTo(i,o+c,i,o+c-h),"center"===s&&"left"===a&&this.drawCaret(e,t,r,n),t.lineTo(i,o+d),t.quadraticCurveTo(i,o,i+d,o),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,a=r&&r.y;if(n||a){const r=Qo[e.position].call(this,this._active,this._eventPosition);if(!r)return;const s=this._size=nl(this,e),i=Object.assign({},r,this._size),o=sl(t,e,i),l=il(e,i,o,t);n._to===l.x&&a._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const s=ga(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,n,t),ns(e,t.textDirection),a.y+=s.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),as(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[r],index:r}}),a=!Or(r,n),s=this._positionChanged(n,t);(a||s)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],s=this._getActiveElements(e,a,t,r),i=this._positionChanged(s,e),o=t||!Or(s,a)||i;return o&&(this._active=s,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,r,n){const a=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:r,caretY:n,options:a}=this,s=Qo[a.position].call(this,e,t);return!1!==s&&(r!==s.x||n!==s.y)}}(0,qt.A)(hl,"positioners",Qo);var fl={id:"tooltip",_element:hl,positioners:Qo,afterInit(e,t,r){r&&(e.tooltip=new hl({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,s.A)((0,s.A)({},r),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function pl(e,t,r,n){const a=e.indexOf(t);if(-1===a)return((e,t,r,n)=>("string"===typeof t?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r))(e,t,r,n);return a!==e.lastIndexOf(t)?r:a}function ml(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class gl extends Hi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:r,label:n}of t)e[r]===n&&e.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(_r(e))return null;const r=this.getLabels();return((e,t)=>null===e?null:mn(Math.round(e),0,t))(t=isFinite(t)&&r[t]===e?t:pl(r,e,Cr(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let s=e;s<=t;s++)n.push({value:s});return n}getLabelForValue(e){return ml.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function vl(e,t){const r=[],{bounds:n,step:a,min:s,max:i,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=a||1,f=c-1,{min:p,max:m}=t,g=!_r(s),v=!_r(i),b=!_r(l),x=(m-p)/(d+1);let y,w,j,N,_=nn((m-p)/f/h)*h;if(_<1e-14&&!g&&!v)return[{value:p},{value:m}];N=Math.ceil(m/_)-Math.floor(p/_),N>f&&(_=nn(N*_/f/h)*h),_r(o)||(y=Math.pow(10,o),_=Math.ceil(_*y)/y),"ticks"===n?(w=Math.floor(p/_)*_,j=Math.ceil(m/_)*_):(w=p,j=m),g&&v&&a&&function(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}((i-s)/a,_/1e3)?(N=Math.round(Math.min((i-s)/_,c)),_=(i-s)/N,w=s,j=i):b?(w=g?s:w,j=v?i:j,N=l-1,_=(j-w)/N):(N=(j-w)/_,N=rn(N,Math.round(N),_/1e3)?Math.round(N):Math.ceil(N));const S=Math.max(cn(_),cn(w));y=Math.pow(10,_r(o)?S:o),w=Math.round(w*y)/y,j=Math.round(j*y)/y;let k=0;for(g&&(u&&w!==s?(r.push({value:s}),w<s&&k++,rn(Math.round((w+k*_)*y)/y,s,bl(s,x,e))&&k++):w<s&&k++);k<N;++k){const e=Math.round((w+k*_)*y)/y;if(v&&e>i)break;r.push({value:e})}return v&&u&&j!==i?r.length&&rn(r[r.length-1].value,i,bl(i,x,e))?r[r.length-1].value=i:r.push({value:i}):v&&j!==i||r.push({value:j}),r}function bl(e,t,r){let{horizontal:n,minRotation:a}=r;const s=on(a),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}(0,qt.A)(gl,"id","category"),(0,qt.A)(gl,"defaults",{ticks:{callback:ml}});class xl extends Hi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return _r(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this;const s=e=>n=t?n:e,i=e=>a=r?a:e;if(e){const e=tn(n),t=tn(a);e<0&&t<0?i(0):e>0&&t>0&&s(0)}if(n===a){let t=0===a?1:Math.abs(.05*a);i(a+t),e||s(n-t)}this.min=n,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:r,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(n," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n=vl({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&sn(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Bn(e,this.chart.options.locale,this.options.ticks.format)}}class yl extends xl{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ar(e)?e:0,this.max=Ar(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=on(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,qt.A)(yl,"id","linear"),(0,qt.A)(yl,"defaults",{ticks:{callback:Un.formatters.numeric}});const wl=e=>Math.floor(en(e)),jl=(e,t)=>Math.pow(10,wl(e)+t);function Nl(e){return 1===e/Math.pow(10,wl(e))}function _l(e,t,r){const n=Math.pow(10,r),a=Math.floor(e/n);return Math.ceil(t/n)-a}function Sl(e,t){let{min:r,max:n}=t;r=Er(e.min,r);const a=[],s=wl(r);let i=function(e,t){let r=wl(t-e);for(;_l(e,t,r)>10;)r++;for(;_l(e,t,r)<10;)r--;return Math.min(r,wl(e))}(r,n),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=s>i?Math.pow(10,s):0,d=Math.round((r-c)*o)/o,u=Math.floor((r-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),f=Er(e.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;f<n;)a.push({value:f,major:Nl(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),f=Math.round((c+u+h*Math.pow(10,i))*o)/o;const p=Er(e.max,f);return a.push({value:p,major:Nl(p),significand:h}),a}class kl extends Hi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=xl.prototype.parse.apply(this,[e,t]);if(0!==r)return Ar(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ar(e)?Math.max(0,e):null,this.max=Ar(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ar(this._userMin)&&(this.min=e===jl(this.min,0)?jl(this.min,-1):jl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const a=t=>r=e?r:t,s=e=>n=t?n:e;r===n&&(r<=0?(a(1),s(10)):(a(jl(r,-1)),s(jl(n,1)))),r<=0&&a(jl(n,-1)),n<=0&&s(jl(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t=Sl({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&sn(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Bn(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=en(e),this._valueRange=en(this.max)-en(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(en(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Al(e){const t=e.ticks;if(t.display&&e.display){const e=ga(t.backdropPadding);return Cr(t.font&&t.font.size,Kn.font.size)+e.height}return 0}function El(e,t,r){return r=Sr(r)?r:[r],{w:Yn(e,t.string,r),h:r.length*t.lineHeight}}function Cl(e,t,r,n,a){return e===n||e===a?{start:t-r/2,end:t+r/2}:e<n||e>a?{start:t-r,end:t}:{start:t,end:t+r}}function Tl(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},r=Object.assign({},t),n=[],a=[],s=e._pointLabels.length,i=e.options.pointLabels,o=i.centerPointLabels?Gr/s:0;for(let l=0;l<s;l++){const s=i.setContext(e.getPointLabelContext(l));a[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+a[l],o),d=va(s.font),u=El(e.ctx,d,e._pointLabels[l]);n[l]=u;const h=fn(e.getIndexAngle(l)+o),f=Math.round(ln(h));Pl(r,t,h,Cl(f,c.x,u.w,0,180),Cl(f,c.y,u.h,90,270))}e.setCenterPoint(t.l-r.l,r.r-t.r,t.t-r.t,r.b-t.b),e._pointLabelItems=function(e,t,r){const n=[],a=e._pointLabels.length,s=e.options,{centerPointLabels:i,display:o}=s.pointLabels,l={extra:Al(s)/2,additionalAngle:i?Gr/a:0};let c;for(let d=0;d<a;d++){l.padding=r[d],l.size=t[d];const a=Dl(e,d,l);n.push(a),"auto"===o&&(a.visible=Ol(a,c),a.visible&&(c=a))}return n}(e,n,a)}function Pl(e,t,r,n,a){const s=Math.abs(Math.sin(r)),i=Math.abs(Math.cos(r));let o=0,l=0;n.start<t.l?(o=(t.l-n.start)/s,e.l=Math.min(e.l,t.l-o)):n.end>t.r&&(o=(n.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),a.start<t.t?(l=(t.t-a.start)/i,e.t=Math.min(e.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function Dl(e,t,r){const n=e.drawingArea,{extra:a,additionalAngle:s,padding:i,size:o}=r,l=e.getPointPosition(t,n+a+i,s),c=Math.round(ln(fn(l.angle+Jr))),d=function(e,t,r){90===r||270===r?e-=t/2:(r>270||r<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,r){"right"===r?e-=t:"center"===r&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function Ol(e,t){if(!t)return!0;const{left:r,top:n,right:a,bottom:s}=e;return!(ea({x:r,y:n},t)||ea({x:r,y:s},t)||ea({x:a,y:n},t)||ea({x:a,y:s},t))}function Il(e,t,r){const{left:n,top:a,right:s,bottom:i}=r,{backdropColor:o}=t;if(!_r(o)){const r=ma(t.borderRadius),l=ga(t.backdropPadding);e.fillStyle=o;const c=n-l.left,d=a-l.top,u=s-n+l.width,h=i-a+l.height;Object.values(r).some(e=>0!==e)?(e.beginPath(),la(e,{x:c,y:d,w:u,h:h,radius:r}),e.fill()):e.fillRect(c,d,u,h)}}function Ml(e,t,r,n){const{ctx:a}=e;if(r)a.arc(e.xCenter,e.yCenter,t,0,Kr);else{let r=e.getPointPosition(0,t);a.moveTo(r.x,r.y);for(let s=1;s<n;s++)r=e.getPointPosition(s,t),a.lineTo(r.x,r.y)}}(0,qt.A)(kl,"id","logarithmic"),(0,qt.A)(kl,"defaults",{ticks:{callback:Un.formatters.logarithmic,major:{enabled:!0}}});class Rl extends xl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ga(Al(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ar(e)&&!isNaN(e)?e:0,this.max=Ar(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Al(this.options))}generateTickLabels(e){xl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const r=Pr(this.options.pointLabels.callback,[e,t],this);return r||0===r?r:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?Tl(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){return fn(e*(Kr/(this._pointLabels.length||1))+on(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(_r(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(_r(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function(e,t,r){return xa(e,{label:r,index:t,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getIndexAngle(e)-Jr+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:a}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),Ml(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:a}=t,s=this._pointLabels.length;let i,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:r,options:{pointLabels:n}}=e;for(let a=t-1;a>=0;a--){const t=e._pointLabelItems[a];if(!t.visible)continue;const s=n.setContext(e.getPointLabelContext(a));Il(r,s,t);const i=va(s.font),{x:o,y:l,textAlign:c}=t;oa(r,e._pointLabels[a],o,l+i.lineHeight/2,i,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),n.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const r=this.getContext(t),i=n.setContext(r),l=a.setContext(r);!function(e,t,r,n,a){const s=e.ctx,i=t.circular,{color:o,lineWidth:l}=t;!i&&!n||!o||!l||r<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(a.dash||[]),s.lineDashOffset=a.dashOffset,s.beginPath(),Ml(e,r,i,n),s.closePath(),s.stroke(),s.restore())}(this,i,o,s,l)}}),r.display){for(e.save(),i=s-1;i>=0;i--){const n=r.setContext(this.getPointLabelContext(i)),{color:a,lineWidth:s}=n;s&&a&&(e.lineWidth=s,e.strokeStyle=a,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(i,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let a,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((n,i)=>{if(0===i&&this.min>=0&&!t.reverse)return;const o=r.setContext(this.getContext(i)),l=va(o.font);if(a=this.getDistanceFromCenterForValue(this.ticks[i].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(n.label).width,e.fillStyle=o.backdropColor;const t=ga(o.backdropPadding);e.fillRect(-s/2-t.left,-a-l.size/2-t.top,s+t.width,l.size+t.height)}oa(e,n.label,0,-a,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,qt.A)(Rl,"id","radialLinear"),(0,qt.A)(Rl,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Un.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,qt.A)(Rl,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,qt.A)(Rl,"descriptors",{angleLines:{_fallback:"grid"}});const Ll={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fl=Object.keys(Ll);function Bl(e,t){return e-t}function zl(e,t){if(_r(t))return null;const r=e._adapter,{parser:n,round:a,isoWeekday:s}=e._parseOpts;let i=t;return"function"===typeof n&&(i=n(i)),Ar(i)||(i="string"===typeof n?r.parse(i,n):r.parse(i)),null===i?null:(a&&(i="week"!==a||!an(s)&&!0!==s?r.startOf(i,a):r.startOf(i,"isoWeek",s)),+i)}function Ul(e,t,r,n){const a=Fl.length;for(let s=Fl.indexOf(e);s<a-1;++s){const e=Ll[Fl[s]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((r-t)/(a*e.size))<=n)return Fl[s]}return Fl[a-1]}function ql(e,t,r){if(r){if(r.length){const{lo:n,hi:a}=vn(r,t);e[r[n]>=t?r[n]:r[a]]=!0}}else e[t]=!0}function Wl(e,t,r){const n=[],a={},s=t.length;let i,o;for(i=0;i<s;++i)o=t[i],a[o]=i,n.push({value:o,major:!1});return 0!==s&&r?function(e,t,r,n){const a=e._adapter,s=+a.startOf(t[0].value,n),i=t[t.length-1].value;let o,l;for(o=s;o<=i;o=+a.add(o,1,n))l=r[o],l>=0&&(t[l].major=!0);return t}(e,n,a,r):n}class Hl extends Hi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.time||(e.time={}),n=this._adapter=new Xs(e.adapters.date);n.init(t),Fr(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:zl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:a,minDefined:s,maxDefined:i}=this.getUserBounds();function o(e){s||isNaN(e.min)||(n=Math.min(n,e.min)),i||isNaN(e.max)||(a=Math.max(a,e.max))}s&&i||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),n=Ar(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),a=Ar(a)&&!isNaN(a)?a:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,s=function(e,t,r){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}(n,a,this.max);return this._unit=t.unit||(r.autoSkip?Ul(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,r,n,a){for(let s=Fl.length-1;s>=Fl.indexOf(r);s--){const r=Fl[s];if(Ll[r].common&&e._adapter.diff(a,n,r)>=t-1)return r}return Fl[r?Fl.indexOf(r):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(e){for(let t=Fl.indexOf(e)+1,r=Fl.length;t<r;++t)if(Ll[Fl[t]].common)return Fl[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&s.reverse(),Wl(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,a=0;this.options.offset&&r.length&&(e=this.getDecimalForValue(r[0]),n=1===r.length?1-e:(this.getDecimalForValue(r[1])-e)/2,t=this.getDecimalForValue(r[r.length-1]),a=1===r.length?t:(t-this.getDecimalForValue(r[r.length-2]))/2);const s=r.length<3?.5:.25;n=mn(n,0,s),a=mn(a,0,s),this._offsets={start:n,end:a,factor:1/(n+1+a)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,a=n.time,s=a.unit||Ul(a.minUnit,t,r,this._getLabelCapacity(t)),i=Cr(n.ticks.stepSize,1),o="week"===s&&a.isoWeekday,l=an(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(r,t,s)>1e5*i)throw new Error(t+" and "+r+" are too far apart with stepSize of "+i+" "+s);const f="data"===n.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<r;d=+e.add(d,i,s),u++)ql(c,d,f);return d!==r&&"ticks"!==n.bounds&&1!==u||ql(c,d,f),Object.keys(c).sort(Bl).map(e=>+e)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,n=this._unit,a=t||r[n];return this._adapter.format(e,a)}_tickFormatFunction(e,t,r,n){const a=this.options,s=a.ticks.callback;if(s)return Pr(s,[e,t,r],this);const i=a.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&i[o],d=l&&i[l],u=r[t],h=l&&d&&u&&u.major;return this._adapter.format(e,n||(h?d:c))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=on(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),s=Math.sin(n),i=this._resolveTickFontOptions(0).size;return{w:r*a+i*s,h:r*s+i*a}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,a=this._tickFormatFunction(e,0,Wl(this,[e],this._majorUnit),n),s=this._getLabelSize(a),i=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,r=this._cache.data||[];if(r.length)return r;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)r=r.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(zl(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jn(e.sort(Bl))}}function Vl(e,t,r){let n,a,s,i,o=0,l=e.length-1;r?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=bn(e,"pos",t)),({pos:n,time:s}=e[o]),({pos:a,time:i}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=bn(e,"time",t)),({time:n,pos:s}=e[o]),({time:a,pos:i}=e[l]));const c=a-n;return c?s+(i-s)*(t-n)/c:s}(0,qt.A)(Hl,"id","time"),(0,qt.A)(Hl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Gl extends Hl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Vl(t,this.min),this._tableRange=Vl(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],a=[];let s,i,o,l,c;for(s=0,i=e.length;s<i;++s)l=e[s],l>=t&&l<=r&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,i=n.length;s<i;++s)c=n[s+1],o=n[s-1],l=n[s],Math.round((c+o)/2)!==l&&a.push({time:l,pos:s/(i-1)});return a}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return r.includes(e)&&r.length||r.splice(0,0,e),r.includes(t)&&1!==r.length||r.push(t),r.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Vl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Vl(this._table,r*this._tableRange+this._minPos,!0)}}(0,qt.A)(Gl,"id","timeseries"),(0,qt.A)(Gl,"defaults",Hl.defaults);const Kl=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],$l="label";function Yl(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Xl(e,t){e.labels=t}function Jl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$l;const n=[];e.datasets=t.map(t=>{const a=e.datasets.find(e=>e[r]===t[r]);return a&&t.data&&!n.includes(a)?(n.push(a),Object.assign(a,t),a):(0,s.A)({},t)})}function Zl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$l;const r={labels:[],datasets:[]};return Xl(r,e.labels),Jl(r,e.datasets,t),r}function Ql(e,r){const{height:n=150,width:a=300,redraw:o=!1,datasetIdKey:l,type:c,data:d,options:u,plugins:h=[],fallbackContent:f,updateMode:p}=e,m=i(e,Kl),g=(0,t.useRef)(null),v=(0,t.useRef)(null),b=()=>{g.current&&(v.current=new jo(g.current,{type:c,data:Zl(d,l),options:u&&(0,s.A)({},u),plugins:h}),Yl(r,v.current))},x=()=>{Yl(r,null),v.current&&(v.current.destroy(),v.current=null)};return(0,t.useEffect)(()=>{!o&&v.current&&u&&function(e,t){const r=e.options;r&&t&&Object.assign(r,t)}(v.current,u)},[o,u]),(0,t.useEffect)(()=>{!o&&v.current&&Xl(v.current.config.data,d.labels)},[o,d.labels]),(0,t.useEffect)(()=>{!o&&v.current&&d.datasets&&Jl(v.current.config.data,d.datasets,l)},[o,d.datasets]),(0,t.useEffect)(()=>{v.current&&(o?(x(),setTimeout(b)):v.current.update(p))},[o,u,d.labels,d.datasets,p]),(0,t.useEffect)(()=>{v.current&&(x(),setTimeout(b))},[c]),(0,t.useEffect)(()=>(b(),()=>x()),[]),t.createElement("canvas",(0,s.A)({ref:g,role:"img",height:n,width:a},m),f)}const ec=(0,t.forwardRef)(Ql);function tc(e,r){return jo.register(r),(0,t.forwardRef)((r,n)=>t.createElement(ec,(0,s.A)((0,s.A)({},r),{},{ref:n,type:e})))}const rc=tc("bar",zs);var nc={version:"0.18.5"},ac=1200,sc=1252,ic=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],oc={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},lc=function(e){-1!=ic.indexOf(e)&&(sc=oc[0]=e)};var cc=function(e){ac=e,lc(e)};function dc(){cc(1200),lc(1252)}function uc(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function hc(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var fc,pc=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return 255==t&&254==r?function(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==r?hc(e.slice(2)):65279==t?e.slice(1):e},mc=function(e){return String.fromCharCode(e)},gc=function(e){return String.fromCharCode(e)};var vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function bc(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,c=0;c<e.length;)s=(r=e.charCodeAt(c++))>>2,i=(3&r)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(a=e.charCodeAt(c++))>>6,l=63&a,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=vc.charAt(s)+vc.charAt(i)+vc.charAt(o)+vc.charAt(l);return t}function xc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)r=vc.indexOf(e.charAt(l++))<<2|(s=vc.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(r),n=(15&s)<<4|(i=vc.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(n)),a=(3&i)<<6|(o=vc.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(a));return t}var yc=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),wc=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(f2){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function jc(e){return yc?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function Nc(e){return yc?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var _c=function(e){return yc?wc(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function Sc(e){if("undefined"===typeof ArrayBuffer)return _c(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function kc(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Ac(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Ac(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ec=yc?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:wc(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var Cc=/\u0000/g,Tc=/[\u0001-\u0006]/g;function Pc(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Dc(e,t){var r=""+e;return r.length>=t?r:Kd("0",t-r.length)+r}function Oc(e,t){var r=""+e;return r.length>=t?r:Kd(" ",t-r.length)+r}function Ic(e,t){var r=""+e;return r.length>=t?r:r+Kd(" ",t-r.length)}var Mc=Math.pow(2,32);function Rc(e,t){return e>Mc||e<-Mc?function(e,t){var r=""+Math.round(e);return r.length>=t?r:Kd("0",t-r.length)+r}(e,t):function(e,t){var r=""+e;return r.length>=t?r:Kd("0",t-r.length)+r}(Math.round(e),t)}function Lc(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var Fc=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Bc=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var zc={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},Uc={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},qc={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Wc(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,l=1,c=0,d=0,u=Math.floor(a);c<t&&(o=(u=Math.floor(a))*i+s,d=u*c+l,!(a-u<5e-8));)a=1/(a-u),s=i,i=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=s):(d=c,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Hc(e,t,r){if(e>2958465||e<0)return null;var n=0|e,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,86400==++a&&(o.T=a=0,++n,++o.D)),60===n)i=r?[1317,10,29]:[1900,2,29],s=3;else if(0===n)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=function(e,t){t[0]-=581;var r=e.getDay();e<60&&(r=(r+6)%7);return r}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var Vc=new Date(1899,11,31,0,0,0),Gc=Vc.getTime(),Kc=new Date(1900,2,1,0,0,0);function $c(e,t){var r=e.getTime();return t?r-=1262304e5:e>=Kc&&(r+=864e5),(r-(Gc+6e4*(e.getTimezoneOffset()-Vc.getTimezoneOffset())))/864e5}function Yc(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Xc(e){var t,r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=r>=-4&&r<=-1?e.toPrecision(10+r):Math.abs(r)<=9?function(e){var t=e<0?12:11,r=Yc(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10)).length<=t?r:e.toExponential(5)}(e):10===r?e.toFixed(10).substr(0,12):function(e){var t=Yc(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Yc(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Jc(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Xc(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return bd(14,$c(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Zc(e,t,r,n){var a,s="",i=0,o=0,l=r.y,c=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:a=l%100,c=2;break;default:a=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:a=r.m,c=t.length;break;case 3:return Bc[r.m-1][1];case 5:return Bc[r.m-1][0];default:return Bc[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=r.d,c=t.length;break;case 3:return Fc[r.q][0];default:return Fc[r.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==r.u||"s"!=t&&"ss"!=t?(o=n>=2?3===n?1e3:100:1===n?10:1,(i=Math.round(o*(r.S+r.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(s=Dc(i,2+n),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):Dc(r.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*r.D+r.H;break;case"[m]":case"[mm]":a=60*(24*r.D+r.H)+r.M;break;case"[s]":case"[ss]":a=60*(60*(24*r.D+r.H)+r.M)+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:a=l,c=1}return c>0?Dc(a,c):""}function Qc(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var ed=/%/g;function td(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+td(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),-1===(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);"0."===r.substr(0,2);)r=(r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var rd=/# (\?+)( ?)\/( ?)(\d+)/;var nd=/^#*0*\.([0#]+)/,ad=/\).*[0#]/,sd=/\(###\) ###\\?-####/;function id(e){for(var t,r="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function od(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function ld(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function cd(e,t,r){if(40===e.charCodeAt(0)&&!t.match(ad)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?cd("n",n,r):"("+cd("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return hd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(ed,""),a=t.length-n.length;return hd(e,n,r*Math.pow(10,2*a))+Kd("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return td(t,r);if(36===t.charCodeAt(0))return"$"+cd(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Rc(l,t.length);if(t.match(/^[#?]+$/))return"0"===(a=Rc(r,0))&&(a=""),a.length>t.length?a:id(t.substr(0,t.length-a.length))+a;if(s=t.match(rd))return function(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(0===s?"":""+s)+" "+(0===i?Kd(" ",e[1].length+1+e[4].length):Oc(i,e[1].length)+e[2]+"/"+e[3]+Dc(o,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+Rc(l,t.length-t.indexOf("0"));if(s=t.match(nd))return a=od(r,s[1].length).replace(/^([^\.]+)$/,"$1."+id(s[1])).replace(/\.$/,"."+id(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+Kd("0",id(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+od(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Qc(Rc(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+cd(e,t,-r):Qc(""+(Math.floor(r)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(r,s[1].length)))+"."+Dc(ld(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return cd(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Pc(cd(e,t.replace(/[\\-]/g,""),r)),i=0,Pc(Pc(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""}));if(t.match(sd))return"("+(a=cd(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=Wc(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=hd("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=Ic(o[2],i)).length<s[4].length&&(d=id(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=Wc(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Oc(o[1],i)+s[2]+"/"+s[3]+Ic(o[2],i):Kd(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Rc(r,0),t.length<=a.length?a:id(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,h=t.length-a.length-u;return id(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=ld(r,s[1].length),r<0?"-"+cd(e,t,-r):Qc(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Dc(0,3-e.length):"")+e})+"."+Dc(i,s[1].length);switch(t){case"###,##0.00":return cd(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=Qc(Rc(l,0));return"0"!==f?c+f:"";case"###,###.00":return cd(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return cd(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function dd(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+dd(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),!(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ud(e,t,r){if(40===e.charCodeAt(0)&&!t.match(ad)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ud("n",n,r):"("+ud("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return hd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(ed,""),a=t.length-n.length;return hd(e,n,r*Math.pow(10,2*a))+Kd("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return dd(t,r);if(36===t.charCodeAt(0))return"$"+ud(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Dc(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,0===r&&(a=""),a.length>t.length?a:id(t.substr(0,t.length-a.length))+a;if(s=t.match(rd))return function(e,t,r){return r+(0===t?"":""+t)+Kd(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+Dc(l,t.length-t.indexOf("0"));if(s=t.match(nd))return a=(a=(""+r).replace(/^([^\.]+)$/,"$1."+id(s[1])).replace(/\.$/,"."+id(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+Kd("0",id(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Qc(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ud(e,t,-r):Qc(""+r)+"."+Kd("0",s[1].length);if(s=t.match(/^#,#*,#0/))return ud(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Pc(ud(e,t.replace(/[\\-]/g,""),r)),i=0,Pc(Pc(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""}));if(t.match(sd))return"("+(a=ud(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=Wc(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=hd("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=Ic(o[2],i)).length<s[4].length&&(d=id(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=Wc(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Oc(o[1],i)+s[2]+"/"+s[3]+Ic(o[2],i):Kd(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:id(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,h=t.length-a.length-u;return id(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ud(e,t,-r):Qc(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Dc(0,3-e.length):"")+e})+"."+Dc(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=Qc(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return ud(e,t.slice(0,t.lastIndexOf(".")),r)+id(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function hd(e,t,r){return(0|r)===r?ud(e,t,r):cd(e,t,r)}var fd=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function pd(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Lc(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=r;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(fd))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||"\\"==r&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var md=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function gd(e,t){if(null==t)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0}return!1}function vd(e,t){var r=function(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),!0===r)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if("number"!==typeof t)return[4,4===r.length||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"]}var s=t>0?r[0]:t<0?r[1]:r[2];if(-1===r[0].indexOf("[")&&-1===r[1].indexOf("["))return[n,s];if(null!=r[0].match(/\[[=<>]/)||null!=r[1].match(/\[[=<>]/)){var i=r[0].match(md),o=r[1].match(md);return gd(t,i)?[n,r[0]]:gd(t,o)?[n,r[1]]:[n,r[null!=i&&null!=o?2:1]]}return[n,s]}function bd(e,t,r){null==r&&(r={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&r.dateNF?r.dateNF:e;break;case"number":null==(n=14==e&&r.dateNF?r.dateNF:(null!=r.table?r.table:zc)[e])&&(n=r.table&&r.table[Uc[e]]||zc[Uc[e]]),null==n&&(n=qc[e]||"General")}if(Lc(n,0))return Jc(t,r);t instanceof Date&&(t=$c(t,r.date1904));var a=vd(n,t);if(Lc(a[1]))return Jc(t,r);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,r,n){for(var a,s,i,o=[],l="",c=0,d="",u="t",h="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!Lc(e,c))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";o[o.length]={t:p,v:f},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==a&&null==(a=Hc(t,r,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==a&&null==(a=Hc(t,r)))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=h),o[o.length]={t:d,v:l},u=d;break;case"A":case"a":case"\u4e0a":var m={t:d,v:d};if(null==a&&(a=Hc(t,r)),"A/P"===e.substr(c,3).toUpperCase()?(null!=a&&(m.v=a.H>=12?"P":"A"),m.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=a&&(m.v=a.H>=12?"PM":"AM"),m.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=a&&(m.v=a.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,h="h"):(m.t="t",++c),null==a&&"T"===m.t)return"";o[o.length]=m,u=d;break;case"[":for(l=d;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(fd)){if(null==a&&null==(a=Hc(t,r)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",pd(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=a){for(l=d;++c<e.length&&"0"===(d=e.charAt(c));)l+=d;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;o[o.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;o[o.length]={t:d,v:l},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===n?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:d,v:d},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"t",v:d},++c}var g,v=0,b=0;for(c=o.length-1,u="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=h,u="h",v<1&&(v=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(b=Math.max(b,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":u=o[c].t;break;case"m":"s"===u&&(o[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&o[c].v.match(/[Hh]/)&&(v=1),v<2&&o[c].v.match(/[Mm]/)&&(v=2),v<3&&o[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M),a.M>=60&&(a.M=0,++a.H);break;case 2:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M)}var x,y="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=Zc(o[c].t.charCodeAt(0),o[c].v,a,b),o[c].t="t";break;case"n":case"?":for(x=c+1;null!=o[x]&&("?"===(d=o[x].t)||"D"===d||(" "===d||"t"===d)&&null!=o[x+1]&&("?"===o[x+1].t||"t"===o[x+1].t&&"/"===o[x+1].v)||"("===o[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===o[x].v||" "===o[x].v&&null!=o[x+1]&&"?"==o[x+1].t));)o[c].v+=o[x].v,o[x]={v:"",t:";"},++x;y+=o[c].v,c=x-1;break;case"G":o[c].t="t",o[c].v=Jc(t,r)}var w,j,N="";if(y.length>0){40==y.charCodeAt(0)?(w=t<0&&45===y.charCodeAt(0)?-t:t,j=hd("n",y,w)):(j=hd("n",y,w=t<0&&n>1?-t:t),w<0&&o[0]&&"t"==o[0].t&&(j=j.substr(1),o[0].v="-"+o[0].v)),x=j.length-1;var _=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){_=c;break}var S=o.length;if(_===o.length&&-1===j.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(x>=o[c].v.length-1?(x-=o[c].v.length,o[c].v=j.substr(x+1,o[c].v.length)):x<0?o[c].v="":(o[c].v=j.substr(0,x+1),x=-1),o[c].t="t",S=c);x>=0&&S<o.length&&(o[S].v=j.substr(0,x+1)+o[S].v)}else if(_!==o.length&&-1===j.indexOf("E")){for(x=j.indexOf(".")-1,c=_;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(s=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")-1:o[c].v.length-1,N=o[c].v.substr(s+1);s>=0;--s)x>=0&&("0"===o[c].v.charAt(s)||"#"===o[c].v.charAt(s))&&(N=j.charAt(x--)+N);o[c].v=N,o[c].t="t",S=c}for(x>=0&&S<o.length&&(o[S].v=j.substr(0,x+1)+o[S].v),x=j.indexOf(".")+1,c=_;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===_)){for(s=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")+1:0,N=o[c].v.substr(0,s);s<o[c].v.length;++s)x<j.length&&(N+=j.charAt(x++));o[c].v=N,o[c].t="t",S=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(w=n>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=hd(o[c].t,o[c].v,w),o[c].t="t");var k="";for(c=0;c!==o.length;++c)null!=o[c]&&(k+=o[c].v);return k}(a[1],t,r,a[0])}function xd(e,t){if("number"!=typeof t){t=+t||-1;for(var r=0;r<392;++r)if(void 0!=zc[r]){if(zc[r]==e){t=r;break}}else t<0&&(t=r);t<0&&(t=391)}return zc[t]=e,t}function yd(e){for(var t=0;392!=t;++t)void 0!==e[t]&&xd(e[t],t)}function wd(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',zc=e}var jd={format:bd,load:xd,_table:zc,load_table:yd,parse_date_code:Hc,is_date:pd,get_table:function(){return jd._table=zc}},Nd={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},_d=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var Sd=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var r=function(e){var t=0,r=0,n=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)a[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=a[t]=r>>>8^e[255&r];var s=[];for(n=1;16!=n;++n)s[n-1]="undefined"!==typeof Int32Array?a.subarray(256*n,256*n+256):a.slice(256*n,256*n+256);return s}(t),n=r[0],a=r[1],s=r[2],i=r[3],o=r[4],l=r[5],c=r[6],d=r[7],u=r[8],h=r[9],f=r[10],p=r[11],m=r[12],g=r[13],v=r[14];return e.table=t,e.bstr=function(e,r){for(var n=-1^r,a=0,s=e.length;a<s;)n=n>>>8^t[255&(n^e.charCodeAt(a++))];return~n},e.buf=function(e,r){for(var b=-1^r,x=e.length-15,y=0;y<x;)b=v[e[y++]^255&b]^g[e[y++]^b>>8&255]^m[e[y++]^b>>16&255]^p[e[y++]^b>>>24]^f[e[y++]]^h[e[y++]]^u[e[y++]]^d[e[y++]]^c[e[y++]]^l[e[y++]]^o[e[y++]]^i[e[y++]]^s[e[y++]]^a[e[y++]]^n[e[y++]]^t[e[y++]];for(x+=15;y<x;)b=b>>>8^t[255&(b^e[y++])];return~b},e.str=function(e,r){for(var n=-1^r,a=0,s=e.length,i=0,o=0;a<s;)(i=e.charCodeAt(a++))<128?n=n>>>8^t[255&(n^i)]:i<2048?n=(n=n>>>8^t[255&(n^(192|i>>6&31))])>>>8^t[255&(n^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(a++),n=(n=(n=(n=n>>>8^t[255&(n^(240|i>>8&7))])>>>8^t[255&(n^(128|i>>2&63))])>>>8^t[255&(n^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(n^(128|63&o))]):n=(n=(n=n>>>8^t[255&(n^(224|i>>12&15))])>>>8^t[255&(n^(128|i>>6&63))])>>>8^t[255&(n^(128|63&i))];return~n},e}(),kd=function(){var e,t={};function r(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function a(e,t){"string"===typeof t&&(t=new Date(t));var r=t.getHours();r=(r=r<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,r);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function s(e){Yh(e,0);for(var t={},r=0;e.l<=e.length-4;){var n=e.read_shift(2),a=e.read_shift(2),s=e.l+a,i={};if(21589===n)1&(r=e.read_shift(1))&&(i.mtime=e.read_shift(4)),a>5&&(2&r&&(i.atime=e.read_shift(4)),4&r&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=s,t[n]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return ne(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=j(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var r=t&&t.root||"",n=(yc&&Buffer.isBuffer(e)?e.toString("binary"):j(e)).split("\r\n"),a=0,s="";for(a=0;a<n.length;++a)if(s=n[a],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),r||(r=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,r.length)!=r))for(;r.length>0&&(r=(r=r.slice(0,r.length-1)).slice(0,r.lastIndexOf("/")+1),s.slice(0,r.length)!=r););var i=(n[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],d={FileIndex:l,FullPaths:c};h(d);var u,f=0;for(a=0;a<n.length;++a){var p=n[a];p!==o&&p!==o+"--"||(f++&&ce(d,n.slice(u,a),r),u=a)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var r,n,a,s,i,o,f=512,p=[],m=e.slice(0,512);Yh(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(b,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(r=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return ne(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+r)}512!==f&&Yh(m=e.slice(0,f),28);var x=e.slice(0,f);!function(e,t){var r=9;switch(e.l+=2,r=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+r);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+r);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+r)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,r);var y=m.read_shift(4,"i");if(3===r&&0!==y)throw new Error("# Directory Sectors: Expected 0 saw "+y);m.l+=4,s=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),i=m.read_shift(4,"i"),n=m.read_shift(4,"i"),o=m.read_shift(4,"i"),a=m.read_shift(4,"i");for(var w=-1,N=0;N<109&&!((w=m.read_shift(4,"i"))<0);++N)p[N]=w;var _=function(e,t){for(var r=Math.ceil(e.length/t)-1,n=[],a=1;a<r;++a)n[a-1]=e.slice(a*t,(a+1)*t);return n[r-1]=e.slice(r*t),n}(e,f);c(o,a,_,f,p);var S=function(e,t,r,n){var a=e.length,s=[],i=[],o=[],l=[],c=n-1,d=0,u=0,h=0,f=0;for(d=0;d<a;++d)if(o=[],(h=d+t)>=a&&(h-=a),!i[h]){l=[];var p=[];for(u=h;u>=0;){p[u]=!0,i[u]=!0,o[o.length]=u,l.push(e[u]);var m=r[Math.floor(4*u/n)];if(n<4+(f=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+n);if(!e[m])break;if(p[u=Uh(e[m],f)])break}s[h]={nodes:o,data:gh([l])}}return s}(_,s,p,f);S[s].name="!Directory",n>0&&i!==v&&(S[i].name="!MiniFAT"),S[p[0]].name="!FAT",S.fat_addrs=p,S.ssz=f;var k=[],A=[],E=[];!function(e,t,r,n,a,s,i,o){for(var c,h=0,f=n.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var b=p.slice(m,m+128);Yh(b,64),g=b.read_shift(2),c=bh(b,0,g-f),n.push(c);var x={name:c,type:b.read_shift(1),color:b.read_shift(1),L:b.read_shift(4,"i"),R:b.read_shift(4,"i"),C:b.read_shift(4,"i"),clsid:b.read_shift(16),state:b.read_shift(4,"i"),start:0,size:0};0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(x.ct=u(b,b.l-8)),0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(x.mt=u(b,b.l-8)),x.start=b.read_shift(4,"i"),x.size=b.read_shift(4,"i"),x.size<0&&x.start<0&&(x.size=x.type=0,x.start=v,x.name=""),5===x.type?(h=x.start,a>0&&h!==v&&(t[h].name="!StreamData")):x.size>=4096?(x.storage="fat",void 0===t[x.start]&&(t[x.start]=d(r,x.start,t.fat_addrs,t.ssz)),t[x.start].name=x.name,x.content=t[x.start].data.slice(0,x.size)):(x.storage="minifat",x.size<0?x.size=0:h!==v&&x.start!==v&&t[h]&&(x.content=l(x,t[h].data,(t[o]||{}).data))),x.content&&Yh(x.content,0),s[c]=x,i.push(x)}}(s,S,_,k,n,{},A,i),function(e,t,r){for(var n=0,a=0,s=0,i=0,o=0,l=r.length,c=[],d=[];n<l;++n)c[n]=d[n]=n,t[n]=r[n];for(;o<d.length;++o)a=e[n=d[o]].L,s=e[n].R,i=e[n].C,c[n]===n&&(-1!==a&&c[a]!==a&&(c[n]=c[a]),-1!==s&&c[s]!==s&&(c[n]=c[s])),-1!==i&&(c[i]=n),-1!==a&&n!=c[n]&&(c[a]=c[n],d.lastIndexOf(a)<o&&d.push(a)),-1!==s&&n!=c[n]&&(c[s]=c[n],d.lastIndexOf(s)<o&&d.push(s));for(n=1;n<l;++n)c[n]===n&&(-1!==s&&c[s]!==s?c[n]=c[s]:-1!==a&&c[a]!==a&&(c[n]=c[a]));for(n=1;n<l;++n)if(0!==e[n].type){if((o=n)!=c[o])do{o=c[o],t[n]=t[o]+"/"+t[n]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[n]=-1}for(t[0]+="/",n=1;n<l;++n)2!==e[n].type&&(t[n]+="/")}(A,E,k),k.shift();var C={FileIndex:A,FullPaths:E};return t&&t.raw&&(C.raw={header:x,sectors:_}),C}function l(e,t,r){for(var n=e.start,a=e.size,s=[],i=n;r&&a>0&&i>=0;)s.push(t.slice(i*g,i*g+g)),a-=g,i=Uh(r,4*i);return 0===s.length?Jh(0):Ec(s).slice(0,e.size)}function c(e,t,r,n,a){var s=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=r[e],o=(n>>>2)-1;if(!i)return;for(var l=0;l<o&&(s=Uh(i,4*l))!==v;++l)a.push(s);c(Uh(i,n-4),t-1,r,n,a)}}function d(e,t,r,n,a){var s=[],i=[];a||(a=[]);var o=n-1,l=0,c=0;for(l=t;l>=0;){a[l]=!0,s[s.length]=l,i.push(e[l]);var d=r[Math.floor(4*l/n)];if(n<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+n);if(!e[d])break;l=Uh(e[d],c)}return{nodes:s,data:gh([i])}}function u(e,t){return new Date(1e3*(zh(e,t+4)/1e7*Math.pow(2,32)+zh(e,t)/1e7-11644473600))}function h(e,t){var r=t||{},n=r.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),r.CLSID&&(e.FileIndex[0].clsid=r.CLSID),function(e){var t="\x01Sh33tJ5";if(kd.find(e,"/"+t))return;var r=Jh(4);r[0]=55,r[1]=r[3]=50,r[2]=54,e.FileIndex.push({name:t,type:2,content:r,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){h(e);for(var a=!1,s=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:s?a=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(a=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(a=!0);break;default:a=!0}}if(a||t){var l=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(i=0;i<e.FullPaths.length;++i)d[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&u.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<u.length;++i){var f=r(u[i][0]);(s=d[f])||(u.push([f,{name:n(f).replace("/",""),type:1,clsid:y,ct:l,mt:l,content:null}]),d[f]=!0)}for(u.sort(function(e,t){return function(e,t){for(var r=e.split("/"),n=t.split("/"),a=0,s=0,i=Math.min(r.length,n.length);a<i;++a){if(s=r[a].length-n[a].length)return s;if(r[a]!=n[a])return r[a]<n[a]?-1:1}return r.length-n.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],i=0;i<u.length;++i)e.FullPaths[i]=u[i][0],e.FileIndex[i]=u[i][1];for(i=0;i<u.length;++i){var p=e.FileIndex[i],m=e.FullPaths[i];if(p.name=n(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||y,0===i)p.C=u.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(c=i+1;c<u.length&&r(e.FullPaths[c])!=m;++c);for(p.C=c>=u.length?-1:c,c=i+1;c<u.length&&r(e.FullPaths[c])!=r(m);++c);p.R=c>=u.length?-1:c,p.type=1}else r(e.FullPaths[i+1]||"")==r(m)&&(p.R=i+1),p.type=2}}}function p(e,t){var r=t||{};if("mad"==r.fileType)return function(e,t){for(var r=t||{},n=r.boundary||"SheetJS",a=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],s=e.FullPaths[0],i=s,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(s.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=o.content,d=yc&&Buffer.isBuffer(c)?c.toString("binary"):j(c),u=0,h=Math.min(1024,d.length),f=0,p=0;p<=h;++p)(f=d.charCodeAt(p))>=32&&f<128&&++u;var m=u>=4*h/5;a.push(n),a.push("Content-Location: "+(r.root||"file:///C:/SheetJS/")+i),a.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),a.push("Content-Type: "+ie(o,i)),a.push(""),a.push(m?le(d):oe(d))}return a.push(n+"--\r\n"),a.join("\r\n")}(e,r);if(f(e),"zip"===r.fileType)return function(e,t){var r=t||{},n=[],s=[],i=Jh(1),o=r.compression?8:0,l=0;0;var c=0,d=0,u=0,h=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=p){var b=u,x=Jh(p.length);for(d=0;d<p.length;++d)x.write_shift(1,127&p.charCodeAt(d));x=x.slice(0,x.l),g[h]=Sd.buf(m.content,0);var y=m.content;8==o&&(y=N(y)),(i=Jh(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),m.mt?a(i,m.mt):i.write_shift(4,0),i.write_shift(-4,8&l?0:g[h]),i.write_shift(4,8&l?0:y.length),i.write_shift(4,8&l?0:m.content.length),i.write_shift(2,x.length),i.write_shift(2,0),u+=i.length,n.push(i),u+=x.length,n.push(x),u+=y.length,n.push(y),8&l&&((i=Jh(12)).write_shift(-4,g[h]),i.write_shift(4,y.length),i.write_shift(4,m.content.length),u+=i.l,n.push(i)),(i=Jh(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,g[h]),i.write_shift(4,y.length),i.write_shift(4,m.content.length),i.write_shift(2,x.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,b),v+=i.l,s.push(i),v+=x.length,s.push(x),++h}return i=Jh(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,h),i.write_shift(2,h),i.write_shift(4,v),i.write_shift(4,u),i.write_shift(2,0),Ec([Ec(n),Ec(s),i])}(e,r);var n=function(e){for(var t=0,r=0,n=0;n<e.FileIndex.length;++n){var a=e.FileIndex[n];if(a.content){var s=a.content.length;s>0&&(s<4096?t+=s+63>>6:r+=s+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+r+i+o,c=l+127>>7,d=c<=109?0:Math.ceil((c-109)/127);l+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,o,i,r,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),s=Jh(n[7]<<9),i=0,o=0;for(i=0;i<8;++i)s.write_shift(1,x[i]);for(i=0;i<8;++i)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),i=0;i<3;++i)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,n[2]),s.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:v),s.write_shift(4,n[3]),s.write_shift(-4,n[1]?n[0]-1:v),s.write_shift(4,n[1]),i=0;i<109;++i)s.write_shift(-4,i<n[2]?n[1]+i:-1);if(n[1])for(o=0;o<n[1];++o){for(;i<236+127*o;++i)s.write_shift(-4,i<n[2]?n[1]+i:-1);s.write_shift(-4,o===n[1]-1?v:o+1)}var l=function(e){for(o+=e;i<o-1;++i)s.write_shift(-4,i+1);e&&(++i,s.write_shift(-4,v))};for(o=i=0,o+=n[1];i<o;++i)s.write_shift(-4,w.DIFSECT);for(o+=n[2];i<o;++i)s.write_shift(-4,w.FATSECT);l(n[3]),l(n[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=o,l(d+511>>9)));for(l(n[6]+7>>3);511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=o,l(d+63>>6)));for(;511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(i=0;i<n[4]<<2;++i){var h=e.FullPaths[i];if(h&&0!==h.length){u=e.FileIndex[i],0===i&&(u.start=u.size?u.start-1:v);var p=0===i&&r.root||u.name;if(d=2*(p.length+1),s.write_shift(64,p,"utf16le"),s.write_shift(2,d),s.write_shift(1,u.type),s.write_shift(1,u.color),s.write_shift(-4,u.L),s.write_shift(-4,u.R),s.write_shift(-4,u.C),u.clsid)s.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,u.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,u.start),s.write_shift(4,u.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>=4096)if(s.l=u.start+1<<9,yc&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>0&&u.size<4096)if(yc&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(yc)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var m,g=64,v=-2,b="d0cf11e0a1b11ae1",x=[208,207,17,224,161,177,26,225],y="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:b,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function j(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function N(e){return m?m.deflateRawSync(e):$(e)}var _=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function A(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var E="undefined"!==typeof Uint8Array,C=E?new Uint8Array(256):[],T=0;T<256;++T)C[T]=A(T);function P(e,t){var r=C[255&e];return t<=8?r>>>8-t:(r=r<<8|C[e>>8&255],t<=16?r>>>16-t:(r=r<<8|C[e>>16&255])>>>24-t)}function D(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=6?0:e[n+1]<<8))>>>r&3}function O(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=5?0:e[n+1]<<8))>>>r&7}function I(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=3?0:e[n+1]<<8))>>>r&31}function M(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=1?0:e[n+1]<<8))>>>r&127}function R(e,t,r){var n=7&t,a=t>>>3,s=(1<<r)-1,i=e[a]>>>n;return r<8-n?i&s:(i|=e[a+1]<<8-n,r<16-n?i&s:(i|=e[a+2]<<16-n,r<24-n?i&s:(i|=e[a+3]<<24-n)&s))}function L(e,t,r){var n=7&t,a=t>>>3;return n<=5?e[a]|=(7&r)<<n:(e[a]|=r<<n&255,e[a+1]=(7&r)>>8-n),t+3}function F(e,t,r){return r=(1&r)<<(7&t),e[t>>>3]|=r,t+1}function B(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=r,t+8}function z(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=255&r,e[n+2]=r>>>8,t+16}function U(e,t){var r=e.length,n=2*r>t?2*r:t+5,a=0;if(r>=t)return e;if(yc){var s=Nc(n);if(e.copy)e.copy(s);else for(;a<e.length;++a)s[a]=e[a];return s}if(E){var i=new Uint8Array(n);if(i.set)i.set(e);else for(;a<r;++a)i[a]=e[a];return i}return e.length=n,e}function q(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function W(e,t,r){var n=1,a=0,s=0,i=0,o=0,l=e.length,c=E?new Uint16Array(32):q(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<r;++s)e[s]=0;l=e.length;var d=E?new Uint16Array(l):q(l);for(s=0;s<l;++s)c[a=e[s]]++,n<a&&(n=a),d[s]=0;for(c[0]=0,s=1;s<=n;++s)c[s+16]=o=o+c[s-1]<<1;for(s=0;s<l;++s)0!=(o=e[s])&&(d[s]=c[o+16]++);var u=0;for(s=0;s<l;++s)if(0!=(u=e[s]))for(o=P(d[s],n)>>n-u,i=(1<<n+4-u)-1;i>=0;--i)t[o|i<<u]=15&u|s<<4;return n}var H=E?new Uint16Array(512):q(512),V=E?new Uint16Array(32):q(32);if(!E){for(var G=0;G<512;++G)H[G]=0;for(G=0;G<32;++G)V[G]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);W(e,V,32);var r=[];for(t=0;t<=143;t++)r.push(8);for(;t<=255;t++)r.push(9);for(;t<=279;t++)r.push(7);for(;t<=287;t++)r.push(8);W(r,H,288)}();var K=function(){for(var e=E?new Uint8Array(32768):[],t=0,r=0;t<k.length-1;++t)for(;r<k[t+1];++r)e[r]=t;for(;r<32768;++r)e[r]=29;var n=E?new Uint8Array(259):[];for(t=0,r=0;t<S.length-1;++t)for(;r<S[t+1];++r)n[r]=t;return function(t,r){return t.length<8?function(e,t){for(var r=0;r<e.length;){var n=Math.min(65535,e.length-r),a=r+n==e.length;for(t.write_shift(1,+a),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[r++]}return t.l}(t,r):function(t,r){for(var a=0,s=0,i=E?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(a=L(r,a,+!(s+o!=t.length)))&&(a+=8-(7&a)),r.l=a/8|0,r.write_shift(2,o),r.write_shift(2,65535&~o);o-- >0;)r[r.l++]=t[s++];a=8*r.l}else{a=L(r,a,+!(s+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[s],d=-1,u=0;if((d=i[l=32767&(l<<5^c)])&&((d|=-32768&s)>s&&(d-=32768),d<s))for(;t[d+u]==t[s+u]&&u<250;)++u;if(u>2){(c=n[u])<=22?a=B(r,a,C[c+1]>>1)-1:(B(r,a,3),B(r,a+=5,C[c-23]>>5),a+=3);var h=c<8?0:c-4>>2;h>0&&(z(r,a,u-S[c]),a+=h),c=e[s-d],a=B(r,a,C[c]>>3),a-=3;var f=c<4?0:c-2>>1;f>0&&(z(r,a,s-d-k[c]),a+=f);for(var p=0;p<u;++p)i[l]=32767&s,l=32767&(l<<5^t[s]),++s;o-=u-1}else c<=143?c+=48:a=F(r,a,1),a=B(r,a,C[c]),i[l]=32767&s,++s}a=B(r,a,0)-1}}return r.l=(a+7)/8|0,r.l}(t,r)}}();function $(e){var t=Jh(50+Math.floor(1.1*e.length)),r=K(e,t);return t.slice(0,r)}var Y=E?new Uint16Array(32768):q(32768),X=E?new Uint16Array(32768):q(32768),J=E?new Uint16Array(128):q(128),Z=1,Q=1;function ee(e,t){var r=I(e,t)+257,n=I(e,t+=5)+1,a=function(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=4?0:e[n+1]<<8))>>>r&15}(e,t+=5)+4;t+=4;for(var s=0,i=E?new Uint8Array(19):q(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=E?new Uint8Array(8):q(8),d=E?new Uint8Array(8):q(8),u=i.length,h=0;h<a;++h)i[_[h]]=s=O(e,t),l<s&&(l=s),c[s]++,t+=3;var f=0;for(c[0]=0,h=1;h<=l;++h)d[h]=f=f+c[h-1]<<1;for(h=0;h<u;++h)0!=(f=i[h])&&(o[h]=d[f]++);var p=0;for(h=0;h<u;++h)if(0!=(p=i[h])){f=C[o[h]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)J[f|m<<p]=7&p|h<<3}var g=[];for(l=1;g.length<r+n;)switch(t+=7&(f=J[M(e,t)]),f>>>=3){case 16:for(s=3+D(e,t),t+=2,f=g[g.length-1];s-- >0;)g.push(f);break;case 17:for(s=3+O(e,t),t+=3;s-- >0;)g.push(0);break;case 18:for(s=11+M(e,t),t+=7;s-- >0;)g.push(0);break;default:g.push(f),l<f&&(l=f)}var v=g.slice(0,r),b=g.slice(r);for(h=r;h<286;++h)v[h]=0;for(h=n;h<30;++h)b[h]=0;return Z=W(v,Y,286),Q=W(b,X,30),t}function te(e,t){var r=function(e,t){if(3==e[0]&&!(3&e[1]))return[jc(t),2];for(var r=0,n=0,a=Nc(t||1<<18),s=0,i=a.length>>>0,o=0,l=0;0==(1&n);)if(n=O(e,r),r+=3,n>>>1!=0)for(n>>1==1?(o=9,l=5):(r=ee(e,r),o=Z,l=Q);;){!t&&i<s+32767&&(i=(a=U(a,s+32767)).length);var c=R(e,r,o),d=n>>>1==1?H[c]:Y[c];if(r+=15&d,0===((d>>>=4)>>>8&255))a[s++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var h=s+S[d];u>0&&(h+=R(e,r,u),r+=u),c=R(e,r,l),r+=15&(d=n>>>1==1?V[c]:X[c]);var f=(d>>>=4)<4?0:d-2>>1,p=k[d];for(f>0&&(p+=R(e,r,f),r+=f),!t&&i<h&&(i=(a=U(a,h+100)).length);s<h;)a[s]=a[s-p],++s}}else{7&r&&(r+=8-(7&r));var m=e[r>>>3]|e[(r>>>3)+1]<<8;if(r+=32,m>0)for(!t&&i<s+m&&(i=(a=U(a,s+m)).length);m-- >0;)a[s++]=e[r>>>3],r+=8}return t?[a,r+7>>>3]:[a.slice(0,s),r+7>>>3]}(e.slice(e.l||0),t);return e.l+=r[1],r[0]}function re(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ne(e,t){var r=e;Yh(r,0);var n={FileIndex:[],FullPaths:[]};h(n,{root:t.root});for(var a=r.length-4;(80!=r[a]||75!=r[a+1]||5!=r[a+2]||6!=r[a+3])&&a>=0;)--a;r.l=a+4,r.l+=4;var i=r.read_shift(2);r.l+=6;var o=r.read_shift(4);for(r.l=o,a=0;a<i;++a){r.l+=20;var l=r.read_shift(4),c=r.read_shift(4),d=r.read_shift(2),u=r.read_shift(2),f=r.read_shift(2);r.l+=8;var p=r.read_shift(4),m=s(r.slice(r.l+d,r.l+d+u));r.l+=d+u+f;var g=r.l;r.l=p+4,ae(r,l,c,n,m),r.l=g}return n}function ae(e,t,r,n,a){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),r=65535&e.read_shift(2),n=new Date,a=31&r,s=15&(r>>>=5);r>>>=4,n.setMilliseconds(0),n.setFullYear(r+1980),n.setMonth(s-1),n.setDate(a);var i=31&t,o=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(o),n.setSeconds(i<<1),n}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),h=e.read_shift(2),f="",p=0;p<u;++p)f+=String.fromCharCode(e[e.l++]);if(h){var g=s(e.slice(e.l,e.l+h));(g[21589]||{}).mt&&(l=g[21589].mt),((a||{})[21589]||{}).mt&&(l=a[21589].mt)}e.l+=h;var v=e.slice(e.l,e.l+c);switch(o){case 8:v=function(e,t){if(!m)return te(e,t);var r=new(0,m.InflateRaw),n=r._processChunk(e.slice(e.l),r._finishFlushFlag);return e.l+=r.bytesRead,n}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var b=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),b=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&re(b,"Bad compressed size: "+t+" != "+c),d!=r&&re(b,"Bad uncompressed size: "+r+" != "+d),de(n,f,v,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var r=e.name||"",n=r.match(/\.([^\.]+)$/);return n&&se[n[1]]||t&&(n=(r=t).match(/[\.\\]([^\.\\])+$/))&&se[n[1]]?se[n[1]]:"application/octet-stream"}function oe(e){for(var t=bc(e),r=[],n=0;n<t.length;n+=76)r.push(t.slice(n,n+76));return r.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var r=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),a=0;a<n.length;++a){var s=n[a];if(0!=s.length)for(var i=0;i<s.length;){var o=76,l=s.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=s.slice(i,i+o),(i+=o)<s.length&&(l+="="),r.push(l)}else r.push("")}return r.join("\r\n")}function ce(e,t,r){for(var n,a="",s="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":a=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++o,s.toLowerCase()){case"base64":n=_c(xc(t.slice(o).join("")));break;case"quoted-printable":n=function(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r];r<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++r];t.push(n)}for(var a=0;a<t.length;++a)t[a]=t[a].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return _c(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var d=de(e,a.slice(r.length),n,{unsafe:!0});i&&(d.ctype=i)}function de(e,t,r,a){var s=a&&a.unsafe;s||h(e);var i=!s&&kd.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:n(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),s||kd.utils.cfb_gc(e)}return i.content=r,i.size=r?r.length:0,a&&(a.CLSID&&(i.clsid=a.CLSID),a.mt&&(i.mt=a.mt),a.ct&&(i.ct=a.ct)),i}return t.find=function(e,t){var r=e.FullPaths.map(function(e){return e.toUpperCase()}),n=r.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),a=!1;47===t.charCodeAt(0)?(a=!0,t=r[0].slice(0,-1)+t):a=-1!==t.indexOf("/");var s=t.toUpperCase(),i=!0===a?r.indexOf(s):n.indexOf(s);if(-1!==i)return e.FileIndex[i];var o=!s.match(Tc);for(s=s.replace(Cc,""),o&&(s=s.replace(Tc,"!")),i=0;i<r.length;++i){if((o?r[i].replace(Tc,"!"):r[i]).replace(Cc,"")==s)return e.FileIndex[i];if((o?n[i].replace(Tc,"!"):n[i]).replace(Cc,"")==s)return e.FileIndex[i]}return null},t.read=function(t,r){var n=r&&r.type;switch(n||yc&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,r){return i(),o(e.readFileSync(t),r)}(t,r);case"base64":return o(_c(xc(t)),r);case"binary":return o(_c(t),r)}return o(t,r)},t.parse=o,t.write=function(t,r){var n=p(t,r);switch(r&&r.type||"buffer"){case"file":return i(),e.writeFileSync(r.filename,n),n;case"binary":return"string"==typeof n?n:j(n);case"base64":return bc("string"==typeof n?n:j(n));case"buffer":if(yc)return Buffer.isBuffer(n)?n:wc(n);case"array":return"string"==typeof n?_c(n):n}return n},t.writeFile=function(t,r,n){i();var a=p(t,n);e.writeFileSync(r,a)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:de,cfb_del:function(e,t){h(e);var r=kd.find(e,t);if(r)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==r)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,r){h(e);var a=kd.find(e,t);if(a)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==a)return e.FileIndex[s].name=n(r),e.FullPaths[s]=r,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:Wh,CheckField:$h,prep_blob:Yh,bconcat:Ec,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(f2){console.error("cannot use native zlib: "+(f2.message||f2))}},_deflateRaw:$,_inflateRaw:te,consts:w},t}();let Ad;function Ed(e){return"string"===typeof e?Sc(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function Cd(e,t,r){if("undefined"!==typeof Ad&&Ad.writeFileSync)return r?Ad.writeFileSync(e,t,r):Ad.writeFileSync(e,t);if("undefined"!==typeof Deno){if(r&&"string"==typeof t)switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Sc(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n="utf8"==r?Iu(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(n,e);if("undefined"!==typeof Blob){var a=new Blob([Ed(n)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if("undefined"!==typeof saveAs)return saveAs(a,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=kc(t)),o.write(t),o.close(),t}catch(f2){if(!f2.message||!f2.message.match(/onstruct/))throw f2}throw new Error("cannot save file "+e)}function Td(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function Pd(e,t){for(var r=[],n=Td(e),a=0;a!==n.length;++a)null==r[e[n[a]][t]]&&(r[e[n[a]][t]]=n[a]);return r}function Dd(e){for(var t=[],r=Td(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Od(e){for(var t=[],r=Td(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}var Id=new Date(1899,11,30,0,0,0);function Md(e,t){var r=e.getTime();return t&&(r-=1263168e5),(r-(Id.getTime()+6e4*(e.getTimezoneOffset()-Id.getTimezoneOffset())))/864e5}var Rd=new Date,Ld=Id.getTime()+6e4*(Rd.getTimezoneOffset()-Id.getTimezoneOffset()),Fd=Rd.getTimezoneOffset();function Bd(e){var t=new Date;return t.setTime(24*e*60*60*1e3+Ld),t.getTimezoneOffset()!==Fd&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Fd)),t}function zd(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(!n)throw new Error("Unsupported ISO Duration Field: M");r*=60}t+=r*parseInt(a[s],10)}return t}var Ud=new Date("2017-02-19T19:06:09.000Z"),qd=isNaN(Ud.getFullYear())?new Date("2/19/17"):Ud,Wd=2017==qd.getFullYear();function Hd(e,t){var r=new Date(e);if(Wd)return t>0?r.setTime(r.getTime()+60*r.getTimezoneOffset()*1e3):t<0&&r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3),r;if(e instanceof Date)return e;if(1917==qd.getFullYear()&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function Vd(e,t){if(yc&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Iu(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Iu(hc(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Iu(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Iu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return r[e]||e})}catch(f2){}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Gd(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Gd(e[r]));return t}function Kd(e,t){for(var r="";r.length<t;)r+=e;return r}function $d(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,function(e,t){return r=-r,t}),isNaN(t=Number(n))?t:t/r):t/r}var Yd=["january","february","march","april","may","june","july","august","september","october","november","december"];function Xd(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Yd.indexOf(i))return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Jd=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,r,n){if(e||"string"==typeof r)return t.split(r);for(var a=t.split(r),s=[a[0]],i=1;i<a.length;++i)s.push(n),s.push(a[i]);return s}}();function Zd(e){return e?e.content&&e.type?Vd(e.content,!0):e.data?pc(e.data):e.asNodeBuffer&&yc?pc(e.asNodeBuffer().toString("binary")):e.asBinary?pc(e.asBinary()):e._data&&e._data.getContent?pc(Vd(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Qd(e){if(!e)return null;if(e.data)return uc(e.data);if(e.asNodeBuffer&&yc)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?uc(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function eu(e,t){for(var r=e.FullPaths||Td(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function tu(e,t){var r=eu(e,t);if(null==r)throw new Error("Cannot find file "+t+" in zip");return r}function ru(e,t,r){if(!r)return function(e){return e&&".bin"===e.name.slice(-4)?Qd(e):Zd(e)}(tu(e,t));if(!t)return null;try{return ru(e,t)}catch(f2){return null}}function nu(e,t,r){if(!r)return Zd(tu(e,t));if(!t)return null;try{return nu(e,t)}catch(f2){return null}}function au(e,t,r){if(!r)return Qd(tu(e,t));if(!t)return null;try{return au(e,t)}catch(f2){return null}}function su(e){for(var t=e.FullPaths||Td(e.files),r=[],n=0;n<t.length;++n)"/"!=t[n].slice(-1)&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function iu(e,t,r){if(e.FullPaths){var n;if("string"==typeof r)return n=yc?wc(r):function(e){for(var t=[],r=0,n=e.length+250,a=jc(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++s);a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(3&i)<<4,a[r++]=128|63&o}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|63&i;r>n&&(t.push(a.slice(0,r)),r=0,a=jc(65535),n=65530)}return t.push(a.slice(0,r)),Ec(t)}(r),kd.utils.cfb_add(e,t,n);kd.utils.cfb_add(e,t,r)}else e.file(t,r)}function ou(){return kd.utils.cfb_new()}function lu(e,t){switch(t.type){case"base64":return kd.read(e,{type:"base64"});case"binary":return kd.read(e,{type:"binary"});case"buffer":case"array":return kd.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function cu(e,t){if("/"==e.charAt(0))return e.slice(1);var r=t.split("/");"/"!=t.slice(-1)&&r.pop();for(var n=e.split("/");0!==n.length;){var a=n.shift();".."===a?r.pop():"."!==a&&r.push(a)}return r.join("/")}var du='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',uu=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,hu=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,fu=du.match(hu)?hu:/<[^>]*>/g,pu=/<\w*:/,mu=/<(\/?)\w+:/;function gu(e,t,r){for(var n={},a=0,s=0;a!==e.length&&(32!==(s=e.charCodeAt(a))&&10!==s&&13!==s);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(uu),o=0,l="",c=0,d="",u="",h=1;if(i)for(c=0;c!=i.length;++c){for(u=i[c],s=0;s!=u.length&&61!==u.charCodeAt(s);++s);for(d=u.slice(0,s).trim();32==u.charCodeAt(s+1);)++s;for(h=34==(a=u.charCodeAt(s+1))||39==a?1:0,l=u.slice(s+1+h,u.length-h),o=0;o!=d.length&&58!==d.charCodeAt(o);++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,r||(n[d.toLowerCase()]=l);else{var f=(5===o&&"xmlns"===d.slice(0,5)?"xmlns":"")+d.slice(o+1);if(n[f]&&"ext"==d.slice(o-3,o))continue;n[f]=l,r||(n[f.toLowerCase()]=l)}}return n}function vu(e){return e.replace(mu,"<$1")}var bu={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},xu=Dd(bu),yu=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(-1==s)return a.replace(e,function(e,t){return bu[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e}).replace(t,function(e,t){return String.fromCharCode(parseInt(t,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),wu=/[&<>'"]/g,ju=/[\u0000-\u0008\u000b-\u001f]/g;function Nu(e){return(e+"").replace(wu,function(e){return xu[e]}).replace(ju,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function _u(e){return Nu(e).replace(/ /g,"_x0020_")}var Su=/[\u0000-\u001f]/g;function ku(e){return(e+"").replace(wu,function(e){return xu[e]}).replace(/\n/g,"<br/>").replace(Su,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}var Au=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(r){return r.replace(e,t)}}();function Eu(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Cu(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;)(n=e.charCodeAt(r++))<128?t+=String.fromCharCode(n):(a=e.charCodeAt(r++),n>191&&n<224?(i=(31&n)<<6,i|=63&a,t+=String.fromCharCode(i)):(s=e.charCodeAt(r++),n<240?t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s):(o=((7&n)<<18|(63&a)<<12|(63&s)<<6|63&(i=e.charCodeAt(r++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function Tu(e){var t,r,n,a=jc(2*e.length),s=1,i=0,o=0;for(r=0;r<e.length;r+=s)s=1,(n=e.charCodeAt(r))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(r+1)),s=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),s=3):(s=4,t=262144*(7&n)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(a[i++]=255&o,a[i++]=o>>>8,o=0),a[i++]=t%256,a[i++]=t>>>8;return a.slice(0,i).toString("ucs2")}function Pu(e){return wc(e,"binary").toString("utf8")}var Du="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Ou=yc&&(Pu(Du)==Cu(Du)&&Pu||Tu(Du)==Cu(Du)&&Tu)||Cu,Iu=yc?function(e){return wc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},Mu=function(){var e={};return function(t,r){var n=t+"|"+(r||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",r||"")}}(),Ru=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}}(),Lu=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),Fu=/<\/?(?:vt:)?variant>/g,Bu=/<(?:vt:)([^>]*)>([\s\S]*)</;function zu(e,t){var r=gu(e),n=e.match(Lu(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(e){var t=e.replace(Fu,"").match(Bu);t&&a.push({v:Ou(t[2]),t:t[1]})}),a}var Uu=/(^\s|\s$|\n)/;function qu(e,t){return"<"+e+(t.match(Uu)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Wu(e){return Td(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Hu(e,t,r){return"<"+e+(null!=r?Wu(r):"")+(null!=t?(t.match(Uu)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Vu(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(f2){if(t)throw f2}return""}function Gu(e){if(yc&&Buffer.isBuffer(e))return e.toString("utf8");if("string"===typeof e)return e;if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array)return Ou(kc(Ac(e)));throw new Error("Bad input format: expected Buffer or string")}var Ku=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,$u="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",Yu="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",Xu="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",Ju="http://schemas.openxmlformats.org/package/2006/content-types",Zu="http://schemas.openxmlformats.org/package/2006/relationships",Qu="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",eh="http://purl.org/dc/elements/1.1/",th="http://purl.org/dc/terms/",rh="http://purl.org/dc/dcmitype/",nh="http://schemas.openxmlformats.org/officeDocument/2006/relationships",ah="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",sh="http://www.w3.org/2001/XMLSchema-instance",ih="http://www.w3.org/2001/XMLSchema",oh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],lh="urn:schemas-microsoft-com:office:office",ch="urn:schemas-microsoft-com:office:excel",dh="urn:schemas-microsoft-com:office:spreadsheet",uh="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",hh="http://macVmlSchemaUri",fh="urn:schemas-microsoft-com:vml",ph="http://www.w3.org/TR/REC-html40";var mh=function(e){for(var t=[],r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,a=e[0][r].length;n<a;n+=10240)t.push.apply(t,e[0][r].slice(n,n+10240));return t},gh=yc?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:wc(e)})):mh(e)}:mh,vh=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Fh(e,a)));return n.join("").replace(Cc,"")},bh=yc?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Cc,""):vh(e,t,r)}:vh,xh=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},yh=yc?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):xh(e,t,r)}:xh,wh=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Lh(e,a)));return n.join("")},jh=yc?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):wh(e,t,r)}:wh,Nh=function(e,t){var r=zh(e,t);return r>0?jh(e,t+4,t+4+r-1):""},_h=Nh,Sh=function(e,t){var r=zh(e,t);return r>0?jh(e,t+4,t+4+r-1):""},kh=Sh,Ah=function(e,t){var r=2*zh(e,t);return r>0?jh(e,t+4,t+4+r-1):""},Eh=Ah,Ch=function(e,t){var r=zh(e,t);return r>0?bh(e,t+4,t+4+r):""},Th=Ch,Ph=function(e,t){var r=zh(e,t);return r>0?jh(e,t+4,t+4+r):""},Dh=Ph,Oh=function(e,t){return function(e,t){for(var r=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),a=15&e[t+6],s=5;s>=0;--s)a=256*a+e[t+s];return 2047==n?0==a?r*(1/0):NaN:(0==n?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}(e,t)},Ih=Oh,Mh=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function Rh(){bh=function(e,t,r){return fc.utils.decode(1200,e.slice(t,r)).replace(Cc,"")},jh=function(e,t,r){return fc.utils.decode(65001,e.slice(t,r))},_h=function(e,t){var r=zh(e,t);return r>0?fc.utils.decode(sc,e.slice(t+4,t+4+r-1)):""},kh=function(e,t){var r=zh(e,t);return r>0?fc.utils.decode(ac,e.slice(t+4,t+4+r-1)):""},Eh=function(e,t){var r=2*zh(e,t);return r>0?fc.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},Th=function(e,t){var r=zh(e,t);return r>0?fc.utils.decode(1200,e.slice(t+4,t+4+r)):""},Dh=function(e,t){var r=zh(e,t);return r>0?fc.utils.decode(65001,e.slice(t+4,t+4+r)):""}}yc&&(_h=function(e,t){if(!Buffer.isBuffer(e))return Nh(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},kh=function(e,t){if(!Buffer.isBuffer(e))return Sh(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},Eh=function(e,t){if(!Buffer.isBuffer(e))return Ah(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},Th=function(e,t){if(!Buffer.isBuffer(e))return Ch(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},Dh=function(e,t){if(!Buffer.isBuffer(e))return Ph(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},Ih=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Oh(e,t)},Mh=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof fc&&Rh();var Lh=function(e,t){return e[t]},Fh=function(e,t){return 256*e[t+1]+e[t]},Bh=function(e,t){var r=256*e[t+1]+e[t];return r<32768?r:-1*(65535-r+1)},zh=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Uh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},qh=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Wh(e,t){var r,n,a,s,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,yc&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(Fh(this,o)),o+=2;e*=2;break;case"utf8":l=jh(this,this.l,this.l+e);break;case"utf16le":e*=2,l=bh(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof fc)return Wh.call(this,e,"dbcs");l=fc.utils.decode(ac,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=_h(this,this.l),e=4+zh(this,this.l);break;case"lpstr-cp":l=kh(this,this.l),e=4+zh(this,this.l);break;case"lpwstr":l=Eh(this,this.l),e=4+2*zh(this,this.l);break;case"lpp4":e=4+zh(this,this.l),l=Th(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+zh(this,this.l),l=Dh(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(a=Lh(this,this.l+e++));)c.push(mc(a));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(a=Fh(this,this.l+e));)c.push(mc(a)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=Lh(this,o),this.l=o+1,s=Wh.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(mc(Fh(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof fc){l=fc.utils.decode(ac,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=Lh(this,o),this.l=o+1,s=Wh.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(mc(Lh(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return r=Lh(this,this.l),this.l++,r;case 2:return r=("i"===t?Bh:Fh)(this,this.l),this.l+=2,r;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(r=(e>0?Uh:qh)(this,this.l),this.l+=4,r):(n=zh(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return n=8==e?Ih(this,this.l):Ih([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:l=yh(this,this.l,e)}}return this.l+=e,l}var Hh=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Vh=function(e,t,r){e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Gh=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255};function Kh(e,t,r){var n=0,a=0;if("dbcs"===r){for(a=0;a!=t.length;++a)Gh(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if("sbcs"===r){if("undefined"!==typeof fc&&874==sc)for(a=0;a!=t.length;++a){var s=fc.utils.encode(sc,t.charAt(a));this[this.l+a]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=255&t.charCodeAt(a);n=t.length}else{if("hex"===r){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===r){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,Hh(this,t,this.l);break;case 8:if(n=8,"f"===r){!function(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?0==i?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=255&s;e[r+6]=(15&a)<<4|15&s,e[r+7]=a>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,Vh(this,t,this.l)}}return this.l+=n,this}function $h(e,t){var r=yh(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Yh(e,t){e.l=t,e.read_shift=Wh,e.chk=$h,e.write_shift=Kh}function Xh(e,t){e.l+=t}function Jh(e){var t=jc(e);return Yh(t,0),t}function Zh(e,t,r){if(e){var n,a,s;Yh(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){128&(o=e.read_shift(1))&&(o=(127&o)+((127&e.read_shift(1))<<7));var c=oy[o]||oy[65535];for(s=127&(n=e.read_shift(1)),a=1;a<4&&128&n;++a)s+=(127&(n=e.read_shift(1)))<<7*a;l=e.l+s;var d=c.f&&c.f(e,s,r);if(e.l=l,t(d,c,o))return}}}function Qh(){var e=[],t=yc?256:2048,r=function(e){var t=Jh(e);return Yh(t,0),t},n=r(t),a=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},s=function(e){return n&&e<n.length-n.l?n:(a(),n=r(Math.max(e+1,t)))};return{next:s,push:function(e){a(),null==(n=e).l&&(n.l=n.length),s(t)},end:function(){return a(),Ec(e)},_bufs:e}}function ef(e,t,r,n){var a,s=+t;if(!isNaN(s)){n||(n=oy[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,128+(127&s)),i.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(n>=128)){i.write_shift(1,n);break}i.write_shift(1,128+(127&n)),n>>=7}n>0&&Mh(r)&&e.push(r)}}function tf(e,t,r){var n=Gd(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function rf(e,t,r){var n=Gd(e);return n.s=tf(n.s,t.s,r),n.e=tf(n.e,t.s,r),n}function nf(e,t){if(e.cRel&&e.c<0)for(e=Gd(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Gd(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=uf(e);return e.cRel||null==e.cRel||(r=r.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(r=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(r)),r}function af(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?nf(e.s,t.biff)+":"+nf(e.e,t.biff):(e.s.rRel?"":"$")+of(e.s.r)+":"+(e.e.rRel?"":"$")+of(e.e.r):(e.s.cRel?"":"$")+cf(e.s.c)+":"+(e.e.cRel?"":"$")+cf(e.e.c)}function sf(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function of(e){return""+(e+1)}function lf(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function cf(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function df(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function uf(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function hf(e){var t=e.indexOf(":");return-1==t?{s:df(e),e:df(e)}:{s:df(e.slice(0,t)),e:df(e.slice(t+1))}}function ff(e,t){return"undefined"===typeof t||"number"===typeof t?ff(e.s,e.e):("string"!==typeof e&&(e=uf(e)),"string"!==typeof t&&(t=uf(t)),e==t?e:e+":"+t)}function pf(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||10!=a)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function mf(e,t){var r="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=bd(e.z,r?Md(t):t)}catch(f2){}try{return e.w=bd((e.XF||{}).numFmtId||(r?14:0),r?Md(t):t)}catch(f2){return""+t}}function gf(e,t,r){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),"e"==e.t?tp[e.v]||e.v:mf(e,void 0==t?e.v:t))}function vf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function bf(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense;var s=e||(a?[]:{}),i=0,o=0;if(s&&null!=n.origin){if("number"==typeof n.origin)i=n.origin;else{var l="string"==typeof n.origin?df(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=pf(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==i&&(c.e.r=i=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[u].length;++h)if("undefined"!==typeof t[u][h]){var f={v:t[u][h]},p=i+u,m=o+h;if(c.s.r>p&&(c.s.r=p),c.s.c>m&&(c.s.c=m),c.e.r<p&&(c.e.r=p),c.e.c<m&&(c.e.c=m),!t[u][h]||"object"!==typeof t[u][h]||Array.isArray(t[u][h])||t[u][h]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[u][h][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else{if(!n.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=n.dateNF||zc[14],n.cellDates?(f.t="d",f.w=bd(f.z,Md(f.v))):(f.t="n",f.v=Md(f.v),f.w=bd(f.z,f.v))):f.t="s";else f=t[u][h];if(a)s[p]||(s[p]=[]),s[p][m]&&s[p][m].z&&(f.z=s[p][m].z),s[p][m]=f;else{var g=uf({c:m,r:p});s[g]&&s[g].z&&(f.z=s[g].z),s[g]=f}}}return c.s.c<1e7&&(s["!ref"]=ff(c)),s}function xf(e,t){return bf(null,e,t)}function yf(e,t){return t||(t=Jh(4)),t.write_shift(4,e),t}function wf(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function jf(e,t){var r=!1;return null==t&&(r=!0,t=Jh(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Nf(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function _f(e,t){var r=e.l,n=e.read_shift(1),a=wf(e),s=[],i={t:a,h:a};if(0!==(1&n)){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(Nf(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}var Sf=_f;function kf(e,t){var r=!1;return null==t&&(r=!0,t=Jh(23+4*e.t.length)),t.write_shift(1,1),jf(e.t,t),t.write_shift(4,1),function(e,t){t||(t=Jh(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function Af(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Ef(e,t){return null==t&&(t=Jh(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Cf(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Tf(e,t){return null==t&&(t=Jh(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Pf=wf,Df=jf;function Of(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function If(e,t){var r=!1;return null==t&&(r=!0,t=Jh(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Mf=wf,Rf=Of,Lf=If;function Ff(e){var t=e.slice(e.l,e.l+4),r=1&t[0],n=2&t[0];e.l+=4;var a=0===n?Ih([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Uh(t,0)>>2;return r?a/100:a}function Bf(e,t){null==t&&(t=Jh(4));var r=0,n=0,a=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?n=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(n=1,r=1),!n)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((r?a:e)<<2)+(r+2))}function zf(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Uf=zf,qf=function(e,t){return t||(t=Jh(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function Wf(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Hf(e,t){return(t||Jh(8)).write_shift(8,e,"f")}function Vf(e,t){if(t||(t=Jh(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),e.rgb&&null==e.theme){var n=e.rgb||"FFFFFF";"number"==typeof n&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}function Gf(e,t){var r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var Kf=80,$f=[Kf,81],Yf={1:{n:"CodePage",t:2},2:{n:"Category",t:Kf},3:{n:"PresentationFormat",t:Kf},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:Kf},15:{n:"Company",t:Kf},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:Kf},27:{n:"ContentStatus",t:Kf},28:{n:"Language",t:Kf},29:{n:"Version",t:Kf},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Xf={1:{n:"CodePage",t:2},2:{n:"Title",t:Kf},3:{n:"Subject",t:Kf},4:{n:"Author",t:Kf},5:{n:"Keywords",t:Kf},6:{n:"Comments",t:Kf},7:{n:"Template",t:Kf},8:{n:"LastAuthor",t:Kf},9:{n:"RevNumber",t:Kf},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:Kf},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Jf={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Zf=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Qf(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var ep=Gd(Qf([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),tp={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},rp={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},np={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ap={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function sp(e,t){var r,n=function(e){for(var t=[],r=Td(e),n=0;n!==r.length;++n)null==t[e[r[n]]]&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}(np),a=[];a[a.length]=du,a[a.length]=Hu("Types",null,{xmlns:Ju,"xmlns:xsd":ih,"xmlns:xsi":sh}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return Hu("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(n){e[n]&&e[n].length>0&&(r=e[n][0],a[a.length]=Hu("Override",null,{PartName:("/"==r[0]?"":"/")+r,ContentType:ap[n][t.bookType]||ap[n].xlsx}))},i=function(r){(e[r]||[]).forEach(function(e){a[a.length]=Hu("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:ap[r][t.bookType]||ap[r].xlsx})})},o=function(t){(e[t]||[]).forEach(function(e){a[a.length]=Hu("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:n[t][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var ip={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function op(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function lp(e,t){var r={"!id":{}};if(!e)return r;"/"!==t.charAt(0)&&(t="/"+t);var n={};return(e.match(fu)||[]).forEach(function(e){var a=gu(e);if("<Relationship"===a[0]){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var i="External"===a.TargetMode?a.Target:cu(a.Target,t);r[i]=s,n[a.Id]=s}}),r["!id"]=n,r}function cp(e){var t=[du,Hu("Relationships",null,{xmlns:Zu})];return Td(e["!id"]).forEach(function(r){t[t.length]=Hu("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function dp(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,s?a.TargetMode=s:[ip.HLINK,ip.XPATH,ip.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function up(e,t,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function hp(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function fp(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+nc.version+"</meta:generator></office:meta></office:document-meta>"}var pp=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],mp=function(){for(var e=new Array(pp.length),t=0;t<pp.length;++t){var r=pp[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function gp(e){var t={};e=Ou(e);for(var r=0;r<pp.length;++r){var n=pp[r],a=e.match(mp[r]);null!=a&&a.length>0&&(t[n[1]]=yu(a[1])),"date"===n[2]&&t[n[1]]&&(t[n[1]]=Hd(t[n[1]]))}return t}function vp(e,t,r,n,a){null==a[e]&&null!=t&&""!==t&&(a[e]=t,t=Nu(t),n[n.length]=r?Hu(e,t,r):qu(e,t))}function bp(e,t){var r=t||{},n=[du,Hu("cp:coreProperties",null,{"xmlns:cp":$u,"xmlns:dc":eh,"xmlns:dcterms":th,"xmlns:dcmitype":rh,"xmlns:xsi":sh})],a={};if(!e&&!r.Props)return n.join("");e&&(null!=e.CreatedDate&&vp("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:Vu(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),null!=e.ModifiedDate&&vp("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:Vu(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=pp.length;++s){var i=pp[s],o=r.Props&&null!=r.Props[i[1]]?r.Props[i[1]]:e?e[i[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&vp(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var xp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],yp=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function wp(e,t,r,n){var a=[];if("string"==typeof e)a=zu(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(e){return{v:e}}));var i="string"==typeof t?zu(t,n).map(function(e){return e.v}):t,o=0,l=0;if(i.length>0)for(var c=0;c!==a.length;c+=2){switch(l=+a[c+1].v,a[c].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l)}o+=l}}function jp(e){var t=[],r=Hu;return e||(e={}),e.Application="SheetJS",t[t.length]=du,t[t.length]=Hu("Properties",null,{xmlns:Xu,"xmlns:vt":ah}),xp.forEach(function(n){if(void 0!==e[n[1]]){var a;switch(n[2]){case"string":a=Nu(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false"}void 0!==a&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+Nu(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Np=/<[^>]+>[^<]*/g;function _p(e){var t=[du,Hu("Properties",null,{xmlns:Yu,"xmlns:vt":ah})];if(!e)return t.join("");var r=1;return Td(e).forEach(function(n){++r,t[t.length]=Hu("property",function(e,t){switch(typeof e){case"string":var r=Hu("vt:lpwstr",Nu(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return Hu((0|e)==e?"vt:i4":"vt:r8",Nu(String(e)));case"boolean":return Hu("vt:bool",e?"true":"false")}if(e instanceof Date)return Hu("vt:filetime",Vu(e));throw new Error("Unable to serialize "+e)}(e[n],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Nu(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Sp,kp={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Ap(e,t,r){Sp||(Sp=Dd(kp)),e[t=Sp[t]||t]=r}function Ep(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date(1e3*(r/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function Cp(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Tp(e,t,r){var n=e.read_shift(0,"lpwstr");return r&&(e.l+=4-(n.length+1&3)&3),n}function Pp(e,t,r){return 31===t?Tp(e):Cp(e,0,r)}function Dp(e,t,r){return Pp(e,t,!1===r?0:4)}function Op(e){var t=e.l,r=Rp(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[r,Rp(e,3)]}function Ip(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,1200===t?"utf16le":"utf8").replace(Cc,"").replace(Tc,"!"),1200===t&&i%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),n}function Mp(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),r}function Rp(e,t,r){var n,a=e.read_shift(2),s=r||{};if(e.l+=2,12!==t&&a!==t&&-1===$f.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&a)))throw new Error("Expected type "+t+" saw "+a);switch(12===t?a:t){case 2:return n=e.read_shift(2,"i"),s.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return n=e.read_shift(4);case 30:return Cp(e,0,4).replace(Cc,"");case 31:return Tp(e);case 64:return Ep(e);case 65:return Mp(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return Dp(e,a,!s.raw).replace(Cc,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Pp(e,t,0)}(e,a).replace(Cc,"");case 4108:return function(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Op(e));return r}(e);case 4126:case 4127:return 4127==a?function(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Cc,""),e.l-a&2&&(e.l+=2)}return r}(e):function(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Cc,"");return r}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function Lp(e,t){var r=Jh(4),n=Jh(4);switch(r.write_shift(4,80==e?31:e),e){case 3:n.write_shift(-4,t);break;case 5:(n=Jh(8)).write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,r=t%Math.pow(2,32),n=(t-r)/Math.pow(2,32);n*=1e7;var a=(r*=1e7)/Math.pow(2,32)|0;a>0&&(r%=Math.pow(2,32),n+=a);var s=Jh(8);return s.write_shift(4,r),s.write_shift(4,n),s}(t);break;case 31:case 80:for((n=Jh(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ec([r,n])}function Fp(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,l=-1,c={};for(i=0;i!=a;++i){var d=e.read_shift(4),u=e.read_shift(4);s[i]=[d,u+r]}s.sort(function(e,t){return e[1]-t[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var f=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,f=!1);break;case 80:case 4108:e.l<=s[i][1]&&(e.l=s[i][1],f=!1)}if((!t||0==i)&&e.l<=s[i][1]&&(f=!1,e.l=s[i][1]),f)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var p=t[s[i][0]];if(h[p.n]=Rp(e,p.t,{raw:!0}),"version"===p.p&&(h[p.n]=String(h[p.n]>>16)+"."+("0000"+String(65535&h[p.n])).slice(-4)),"CodePage"==p.n)switch(h[p.n]){case 0:h[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:cc(o=h[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[p.n])}}else if(1===s[i][0]){if(o=h.CodePage=Rp(e,2),cc(o),-1!==l){var m=e.l;e.l=s[l][1],c=Ip(e,o),e.l=m}}else if(0===s[i][0]){if(0===o){l=i,e.l=s[i+1][1];continue}c=Ip(e,o)}else{var g,v=c[s[i][0]];switch(e[e.l]){case 65:e.l+=4,g=Mp(e);break;case 30:case 31:e.l+=4,g=Dp(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=Vp(e,4);break;case 64:e.l+=4,g=Hd(Ep(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=g}}return e.l=r+n,h}var Bp=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function zp(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Up(e,t,r){var n=Jh(8),a=[],s=[],i=8,o=0,l=Jh(8),c=Jh(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),a.push(c),i+=8+l.length,!t){(c=Jh(8)).write_shift(4,0),a.unshift(c);var d=[Jh(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var u=e[o][0];for((l=Jh(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,u.length+1),l.write_shift(0,u,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Ec(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(Bp.indexOf(e[o][0])>-1||yp.indexOf(e[o][0])>-1)&&null!=e[o][1]){var h=e[o][1],f=0;if(t){var p=r[f=+t[e[o][0]]];if("version"==p.p&&"string"==typeof h){var m=h.split(".");h=(+m[0]<<16)+(+m[1]||0)}l=Lp(p.t,h)}else{var g=zp(h);-1==g&&(g=31,h=String(h)),l=Lp(g,h)}s.push(l),(c=Jh(8)).write_shift(4,t?f:2+o),a.push(c),i+=8+l.length}var v=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,v),v+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Ec([n].concat(a).concat(s))}function qp(e,t,r){var n=e.content;if(!n)return{};Yh(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==kd.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(1!==(a=n.read_shift(4))&&2!==a)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),1===a&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);2===a&&(i=n.read_shift(16),l=n.read_shift(4));var u,h=Fp(n,t),f={SystemIdentifier:c};for(var p in h)f[p]=h[p];if(f.FMTID=s,1===a)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);try{u=Fp(n,null)}catch(f2){}for(p in u)f[p]=u[p];return f.FMTID=[s,i],f}function Wp(e,t,r,n,a,s){var i=Jh(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,kd.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=Up(e,r,n);if(o.push(l),a){var c=Up(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(c)}return Ec(o)}function Hp(e,t){return e.read_shift(t),null}function Vp(e,t){return 1===e.read_shift(t)}function Gp(e,t){return t||(t=Jh(2)),t.write_shift(2,+!!e),t}function Kp(e){return e.read_shift(2,"u")}function $p(e,t){return t||(t=Jh(2)),t.write_shift(2,e),t}function Yp(e,t){return function(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}(e,t,Kp)}function Xp(e,t,r){return r||(r=Jh(2)),r.write_shift(1,"e"==t?+e:+!!e),r.write_shift(1,"e"==t?1:0),r}function Jp(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont",s=ac;(r&&r.biff>=8&&(ac=1200),r&&8!=r.biff)?12==r.biff&&(a="wstr"):e.read_shift(1)&&(a="dbcs-cont");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return ac=s,i}function Zp(e){var t=ac;ac=1200;var r,n=e.read_shift(2),a=e.read_shift(1),s=4&a,i=8&a,o=1+(1&a),l=0,c={};i&&(l=e.read_shift(2)),s&&(r=e.read_shift(4));var d=2==o?"dbcs-cont":"sbcs-cont",u=0===n?"":e.read_shift(n,d);return i&&(e.l+=4*l),s&&(e.l+=r),c.t=u,i||(c.raw="<t>"+c.t+"</t>",c.r=c.t),ac=t,c}function Qp(e){var t=e.t||"",r=Jh(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Jh(2*t.length);return n.write_shift(2*t.length,t,"utf16le"),Ec([r,n])}function em(e,t,r){if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function tm(e,t,r){var n=e.read_shift(r&&2==r.biff?1:2);return 0===n?(e.l++,""):em(e,n,r)}function rm(e,t,r){if(r.biff>5)return tm(e,0,r);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function nm(e,t,r){return r||(r=Jh(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function am(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Cc,"");return n&&(e.l+=24),a}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return r+e.read_shift(a>>1,"utf16le").replace(Cc,"")}(e);default:throw new Error("Unsupported Moniker "+r)}}function sm(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(Cc,""):""}function im(e,t){t||(t=Jh(6+2*e.length)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function om(e){var t=Jh(512),r=0,n=e.Target;"file://"==n.slice(0,7)&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(28==s)im(n=n.slice(1),t);else if(2&s){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),8&s&&im(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;"../"==n.slice(3*l,3*l+3)||"..\\"==n.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,255&n.charCodeAt(r+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function lm(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function cm(e,t){var r=lm(e);return r[3]=0,r}function dm(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function um(e,t,r,n){return n||(n=Jh(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function hm(e,t,r){var n=r.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function fm(e){return[e.read_shift(2),Ff(e)]}function pm(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:r}}}function mm(e,t){return t||(t=Jh(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function gm(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:r}}}var vm=gm;function bm(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function xm(e){e.l+=2,e.l+=e.read_shift(2)}var ym={0:xm,4:xm,5:xm,6:xm,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:xm,9:xm,10:xm,11:xm,12:xm,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:xm,15:xm,16:xm,17:xm,18:xm,19:xm,20:xm,21:bm};function wm(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),(t-=2)>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function jm(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":case"xla":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;default:throw new Error("unsupported BIFF version")}var s=Jh(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Nm(e,t){var r=!t||t.biff>=8?2:1,n=Jh(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function _m(e,t,r){var n=0;r&&2==r.biff||(n=e.read_shift(2));var a=e.read_shift(2);return r&&2==r.biff&&(n=1-(a>>15),a&=32767),[{Unsynced:1&n,DyZero:(2&n)>>1,ExAsc:(4&n)>>2,ExDsc:(8&n)>>3},a]}function Sm(e,t,r,n){var a=r&&5==r.biff;n||(n=Jh(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return null==s.l&&(s.l=s.length),s}var km=rm;function Am(e,t,r){var n=e.l+t,a=8!=r.biff&&r.biff?2:4,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function Em(e,t,r,n){var a=r&&5==r.biff;n||(n=Jh(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Cm(e,t,r){var n=dm(e);2!=r.biff&&9!=t||++e.l;var a=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return n.val=a,n.t=!0===a||!1===a?"b":"e",n}var Tm=function(e,t,r){return 0===t?"":rm(e,0,r)};function Pm(e,t,r){var n,a=e.read_shift(2),s={fBuiltIn:1&a,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return 14849===r.sbcch&&(n=function(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=Jp(e,0,r),s=e.read_shift(2);if(s!==(n-=e.l))throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}(e,t-2,r)),s.body=n||e.read_shift(t-2),"string"===typeof n&&(s.Name=n),s}var Dm=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Om(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&2==r.biff?1:2),l=0;(!r||r.biff>=5)&&(5!=r.biff&&(e.l+=2),l=e.read_shift(2),5==r.biff&&(e.l+=2),e.l+=4);var c=em(e,i,r);32&a&&(c=Dm[c.charCodeAt(0)]);var d=n-e.l;r&&2==r.biff&&--d;var u=n!=e.l&&0!==o&&d>0?function(e,t,r,n){var a,s=e.l+t,i=$v(e,n,r);s!==e.l&&(a=Kv(e,s-e.l,i,r));return[i,a]}(e,d,r,o):[];return{chKey:s,Name:c,itab:l,rgce:u}}function Im(e,t,r){if(r.biff<8)return function(e,t,r){3==e[e.l+1]&&e[e.l]++;var n=Jp(e,0,r);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);0!==s--;)n.push(hm(e,r.biff,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function Mm(e,t,r){var n=vm(e,6);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,eb(e,t,r)]}var Rm={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function Lm(e){var t=Jh(24),r=df(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Ec([t,om(e[1])])}function Fm(e){var t=e[1].Tooltip,r=Jh(10+2*(t.length+1));r.write_shift(2,2048);var n=df(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Bm(e,t,r){if(!r.cellStyles)return Xh(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);2==n&&(e.l+=2);var c={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}var zm=dm,Um=Yp,qm=tm;var Wm=[2,3,48,49,131,139,140,245],Hm=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Dd({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(t,r){var n=r||{};n.dateNF||(n.dateNF="yyyymmdd");var a=xf(function(t,r){var n=[],a=jc(1);switch(r.type){case"base64":a=_c(xc(t));break;case"binary":a=_c(t);break;case"buffer":case"array":a=t}Yh(a,0);var s=a.read_shift(1),i=!!(136&s),o=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,d=521;2==s&&(c=a.read_shift(2)),a.l+=3,2!=s&&(c=a.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(d=a.read_shift(2));var u=a.read_shift(2),h=r.codepage||1252;2!=s&&(a.l+=16,a.read_shift(1),0!==a[a.l]&&(h=e[a[a.l]]),a.l+=1,a.l+=2),l&&(a.l+=36);for(var f=[],p={},m=Math.min(a.length,2==s?521:d-10-(o?264:0)),g=l?32:11;a.l<m&&13!=a[a.l];)switch((p={}).name=fc.utils.decode(h,a.slice(a.l,a.l+g)).replace(/[\u0000\r\n].*$/g,""),a.l+=g,p.type=String.fromCharCode(a.read_shift(1)),2==s||l||(p.offset=a.read_shift(4)),p.len=a.read_shift(1),2==s&&(p.offset=a.read_shift(2)),p.dec=a.read_shift(1),p.name.length&&f.push(p),2!=s&&(a.l+=l?13:14),p.type){case"B":o&&8==p.len||!r.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":r.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==a[a.l]&&(a.l=d-1),13!==a.read_shift(1))throw new Error("DBF Terminator not found "+a.l+" "+a[a.l]);a.l=d;var v=0,b=0;for(n[0]=[],b=0;b!=f.length;++b)n[0][b]=f[b].name;for(;c-- >0;)if(42!==a[a.l])for(++a.l,n[++v]=[],b=0,b=0;b!=f.length;++b){var x=a.slice(a.l,a.l+f[b].len);a.l+=f[b].len,Yh(x,0);var y=fc.utils.decode(h,x);switch(f[b].type){case"C":y.trim().length&&(n[v][b]=y.replace(/\s+$/,""));break;case"D":8===y.length?n[v][b]=new Date(+y.slice(0,4),+y.slice(4,6)-1,+y.slice(6,8)):n[v][b]=y;break;case"F":n[v][b]=parseFloat(y.trim());break;case"+":case"I":n[v][b]=l?2147483648^x.read_shift(-4,"i"):x.read_shift(4,"i");break;case"L":switch(y.trim().toUpperCase()){case"Y":case"T":n[v][b]=!0;break;case"N":case"F":n[v][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+y+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));n[v][b]="##MEMO##"+(l?parseInt(y.trim(),10):x.read_shift(4));break;case"N":(y=y.replace(/\u0000/g,"").trim())&&"."!=y&&(n[v][b]=+y||0);break;case"@":n[v][b]=new Date(x.read_shift(-8,"f")-621356832e5);break;case"T":n[v][b]=new Date(864e5*(x.read_shift(4)-2440588)+x.read_shift(4));break;case"Y":n[v][b]=x.read_shift(4,"i")/1e4+x.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[v][b]=-x.read_shift(-8,"f");break;case"B":if(o&&8==f[b].len){n[v][b]=x.read_shift(8,"f");break}case"G":case"P":x.l+=f[b].len;break;case"0":if("_NullFlags"===f[b].name)break;default:throw new Error("DBF Unsupported data type "+f[b].type)}}else a.l+=u;if(2!=s&&a.l<a.length&&26!=a[a.l++])throw new Error("DBF EOF Marker missing "+(a.l-1)+" of "+a.length+" "+a[a.l-1].toString(16));return r&&r.sheetRows&&(n=n.slice(0,r.sheetRows)),r.DBF=f,n}(t,n),n);return a["!cols"]=n.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete n.DBF,a}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return vf(r(e,t),t)}catch(f2){if(t&&t.WTF)throw f2}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function(e,r){var a=r||{};if(+a.codepage>=0&&cc(+a.codepage),"string"==a.type)throw new Error("Cannot write DBF to JS string");var s=Qh(),i=Tw(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],d=0,u=0,h=0,f=1;for(d=0;d<o.length;++d)if(((c[d]||{}).DBF||{}).name)o[d]=c[d].DBF.name,++h;else if(null!=o[d]){if(++h,"number"===typeof o[d]&&(o[d]=o[d].toString(10)),"string"!==typeof o[d])throw new Error("DBF Invalid column name "+o[d]+" |"+typeof o[d]+"|");if(o.indexOf(o[d])!==d)for(u=0;u<1024;++u)if(-1==o.indexOf(o[d]+"_"+u)){o[d]+="_"+u;break}}var p=pf(e["!ref"]),m=[],g=[],v=[];for(d=0;d<=p.e.c-p.s.c;++d){var b="",x="",y=0,w=[];for(u=0;u<l.length;++u)null!=l[u][d]&&w.push(l[u][d]);if(0!=w.length&&null!=o[d]){for(u=0;u<w.length;++u){switch(typeof w[u]){case"number":x="B";break;case"string":default:x="C";break;case"boolean":x="L";break;case"object":x=w[u]instanceof Date?"D":"C"}y=Math.max(y,String(w[u]).length),b=b&&b!=x?"C":x}y>250&&(y=250),"C"==(x=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>y&&(y=c[d].DBF.len),"B"==b&&"N"==x&&(b="N",v[d]=c[d].DBF.dec,y=c[d].DBF.len),g[d]="C"==b||"N"==x?y:n[b]||0,f+=g[d],m[d]=b}else m[d]="?"}var j=s.next(32);for(j.write_shift(4,318902576),j.write_shift(4,l.length),j.write_shift(2,296+32*h),j.write_shift(2,f),d=0;d<4;++d)j.write_shift(4,0);for(j.write_shift(4,(+t[sc]||3)<<8),d=0,u=0;d<o.length;++d)if(null!=o[d]){var N=s.next(32),_=(o[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,_,"sbcs"),N.write_shift(1,"?"==m[d]?"C":m[d],"sbcs"),N.write_shift(4,u),N.write_shift(1,g[d]||n[m[d]]||0),N.write_shift(1,v[d]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),u+=g[d]||n[m[d]]||0}var S=s.next(264);for(S.write_shift(4,13),d=0;d<65;++d)S.write_shift(4,0);for(d=0;d<l.length;++d){var k=s.next(f);for(k.write_shift(1,0),u=0;u<o.length;++u)if(null!=o[u])switch(m[u]){case"L":k.write_shift(1,null==l[d][u]?63:l[d][u]?84:70);break;case"B":k.write_shift(8,l[d][u]||0,"f");break;case"N":var A="0";for("number"==typeof l[d][u]&&(A=l[d][u].toFixed(v[u]||0)),h=0;h<g[u]-A.length;++h)k.write_shift(1,32);k.write_shift(1,A,"sbcs");break;case"D":l[d][u]?(k.write_shift(4,("0000"+l[d][u].getFullYear()).slice(-4),"sbcs"),k.write_shift(2,("00"+(l[d][u].getMonth()+1)).slice(-2),"sbcs"),k.write_shift(2,("00"+l[d][u].getDate()).slice(-2),"sbcs")):k.write_shift(8,"00000000","sbcs");break;case"C":var E=String(null!=l[d][u]?l[d][u]:"").slice(0,g[u]);for(k.write_shift(1,E,"sbcs"),h=0;h<g[u]-E.length;++h)k.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),Vm=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+Td(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(t,r){var n=e[r];return"number"==typeof n?gc(n):n},n=function(e,t,r){var n=t.charCodeAt(0)-32<<4|r.charCodeAt(0)-48;return 59==n?e:gc(n)};function a(e,a){var s,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,d=0,u=[],h=[],f=null,p={},m=[],g=[],v=[],b=0;for(+a.codepage>=0&&cc(+a.codepage);c!==i.length;++c){b=0;var x,y=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),w=y.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),j=w[0];if(y.length>0)switch(j){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&h.push(y.slice(3).replace(/;;/g,";"));break;case"C":var N=!1,_=!1,S=!1,k=!1,A=-1,E=-1;for(d=1;d<w.length;++d)switch(w[d].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[d].slice(1))-1,_=!0;break;case"Y":for(o=parseInt(w[d].slice(1))-1,_||(l=0),s=u.length;s<=o;++s)u[s]=[];break;case"K":'"'===(x=w[d].slice(1)).charAt(0)?x=x.slice(1,x.length-1):"TRUE"===x?x=!0:"FALSE"===x?x=!1:isNaN($d(x))?isNaN(Xd(x).getDate())||(x=Hd(x)):(x=$d(x),null!==f&&pd(f)&&(x=Bd(x))),"undefined"!==typeof fc&&"string"==typeof x&&"string"!=(a||{}).type&&(a||{}).codepage&&(x=fc.utils.decode(a.codepage,x)),N=!0;break;case"E":k=!0;var C=jv(w[d].slice(1),{r:o,c:l});u[o][l]=[u[o][l],C];break;case"S":S=!0,u[o][l]=[u[o][l],"S5S"];break;case"R":A=parseInt(w[d].slice(1))-1;break;case"C":E=parseInt(w[d].slice(1))-1;break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+y)}if(N&&(u[o][l]&&2==u[o][l].length?u[o][l][0]=x:u[o][l]=x,f=null),S){if(k)throw new Error("SYLK shared formula cannot have own formula");var T=A>-1&&u[A][E];if(!T||!T[1])throw new Error("SYLK shared formula cannot find base");u[o][l][1]=Sv(T[1],{r:o-A,c:l-E})}break;case"F":var P=0;for(d=1;d<w.length;++d)switch(w[d].charAt(0)){case"X":l=parseInt(w[d].slice(1))-1,++P;break;case"Y":for(o=parseInt(w[d].slice(1))-1,s=u.length;s<=o;++s)u[s]=[];break;case"M":b=parseInt(w[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=h[parseInt(w[d].slice(1))];break;case"W":for(v=w[d].slice(1).split(" "),s=parseInt(v[0],10);s<=parseInt(v[1],10);++s)b=parseInt(v[2],10),g[s-1]=0===b?{hidden:!0}:{wch:b},Pg(g[s-1]);break;case"C":g[l=parseInt(w[d].slice(1))-1]||(g[l]={});break;case"R":m[o=parseInt(w[d].slice(1))-1]||(m[o]={}),b>0?(m[o].hpt=b,m[o].hpx=Ig(b)):0===b&&(m[o].hidden=!0);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+y)}P<1&&(f=null);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+y)}}return m.length>0&&(p["!rows"]=m),g.length>0&&(p["!cols"]=g),a&&a.sheetRows&&(u=u.slice(0,a.sheetRows)),[u,p]}function s(e,t){var r=function(e,t){switch(t.type){case"base64":return a(xc(e),t);case"binary":return a(e,t);case"buffer":return a(yc&&Buffer.isBuffer(e)?e.toString("binary"):kc(e),t);case"array":return a(Vd(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=r[0],s=r[1],i=xf(n,t);return Td(s).forEach(function(e){i[e]=s[e]}),i}function i(e,t,r,n){var a="C;Y"+(r+1)+";X"+(n+1)+";K";switch(e.t){case"n":a+=e.v||0,e.f&&!e.F&&(a+=";E"+_v(e.f,{r:r,c:n}));break;case"b":a+=e.v?"TRUE":"FALSE";break;case"e":a+=e.w||e.v;break;case"d":a+='"'+(e.w||e.v)+'"';break;case"s":a+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return a}return e["|"]=254,{to_workbook:function(e,t){return vf(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var r,n,a=["ID;PWXL;N;E"],s=[],o=pf(e["!ref"]),l=Array.isArray(e),c="\r\n";a.push("P;PGeneral"),a.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=a,e["!cols"].forEach(function(e,t){var r="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=kg(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=Ag(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&n.push(r)})),e["!rows"]&&function(e,t){t.forEach(function(t,r){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*Og(t.hpx)+";"),n.length>2&&e.push(n+"R"+(r+1))})}(a,e["!rows"]),a.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var h=uf({r:d,c:u});(r=l?(e[d]||[])[u]:e[h])&&(null!=r.v||r.f&&!r.F)&&s.push(i(r,0,d,u))}return a.join(c)+c+s.join(c)+c+"E"+c}}}(),Gm=function(){function e(e,t){for(var r=e.split("\n"),n=-1,a=-1,s=0,i=[];s!==r.length;++s)if("BOT"!==r[s].trim()){if(!(n<0)){for(var o=r[s].trim().split(","),l=o[0],c=o[1],d=r[++s]||"";1&(d.match(/["]/g)||[]).length&&s<r.length-1;)d+="\n"+r[++s];switch(d=d.trim(),+l){case-1:if("BOT"===d){i[++n]=[],a=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?i[n][a]=!0:"FALSE"===d?i[n][a]=!1:isNaN($d(c))?isNaN(Xd(c).getDate())?i[n][a]=c:i[n][a]=Hd(c):i[n][a]=$d(c),++a;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),i[n][a++]=""!==d?d:null}if("EOD"===d)break}}else i[++n]=[],a=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,r){return xf(function(t,r){switch(r.type){case"base64":return e(xc(t),r);case"binary":return e(t,r);case"buffer":return e(yc&&Buffer.isBuffer(t)?t.toString("binary"):kc(t),r);case"array":return e(Vd(t),r)}throw new Error("Unrecognized type "+r.type)}(t,r),r)}var r=function(){var e=function(e,t,r,n,a){e.push(t),e.push(r+","+n),e.push('"'+a.replace(/"/g,'""')+'"')},t=function(e,t,r,n){e.push(t+","+r),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(r){var n,a=[],s=pf(r["!ref"]),i=Array.isArray(r);e(a,"TABLE",0,1,"sheetjs"),e(a,"VECTORS",0,s.e.r-s.s.r+1,""),e(a,"TUPLES",0,s.e.c-s.s.c+1,""),e(a,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(a,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=uf({r:o,c:l});if(n=i?(r[o]||[])[l]:r[c])switch(n.t){case"n":var d=n.w;d||null==n.v||(d=n.v),null==d?n.f&&!n.F?t(a,1,0,"="+n.f):t(a,1,0,""):t(a,0,d,"V");break;case"b":t(a,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(a,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=bd(n.z||zc[14],Md(Hd(n.v)))),t(a,0,n.w,"V");break;default:t(a,1,0,"")}else t(a,1,0,"")}}t(a,-1,0,"EOD");return a.join("\r\n")}}();return{to_workbook:function(e,r){return vf(t(e,r),r)},to_sheet:t,from_sheet:r}}(),Km=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(t,r){return xf(function(t,r){for(var n=t.split("\n"),a=-1,s=-1,i=0,o=[];i!==n.length;++i){var l=n[i].trim().split(":");if("cell"===l[0]){var c=df(l[1]);if(o.length<=c.r)for(a=o.length;a<=c.r;++a)o[a]||(o[a]=[]);switch(a=c.r,s=c.c,l[2]){case"t":o[a][s]=e(l[3]);break;case"v":o[a][s]=+l[3];break;case"vtf":var d=l[l.length-1];case"vtc":"nl"===l[3]?o[a][s]=!!+l[4]:o[a][s]=+l[4],"vtf"==l[2]&&(o[a][s]=[o[a][s],d])}}}return r&&r.sheetRows&&(o=o.slice(0,r.sheetRows)),o}(t,r),r)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),i="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var r,n=[],a=[],s="",i=hf(e["!ref"]),o=Array.isArray(e),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(s=uf({r:l,c:c}),(r=o?(e[l]||[])[c]:e[s])&&null!=r.v&&"z"!==r.t){switch(a=["cell",s,"t"],r.t){case"s":case"str":a.push(t(r.v));break;case"n":r.f?(a[2]="vtf",a[3]="n",a[4]=r.v,a[5]=t(r.f)):(a[2]="v",a[3]=r.v);break;case"b":a[2]="vt"+(r.f?"f":"c"),a[3]="nl",a[4]=r.v?"1":"0",a[5]=t(r.f||(r.v?"TRUE":"FALSE"));break;case"d":var d=Md(Hd(r.v));a[2]="vtc",a[3]="nd",a[4]=""+d,a[5]=r.w||bd(r.z||zc[14],d);break;case"e":continue}n.push(a.join(":"))}return n.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,t){return vf(r(e,t),t)},to_sheet:r,from_sheet:function(e){return[n,a,s,a,o(e),i].join("\n")}}}(),$m=function(){function e(e,t,r,n,a){a.raw?t[r][n]=e:""===e||("TRUE"===e?t[r][n]=!0:"FALSE"===e?t[r][n]=!1:isNaN($d(e))?isNaN(Xd(e).getDate())?t[r][n]=e:t[r][n]=Hd(e):t[r][n]=$d(e))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(e){for(var n={},a=!1,s=0,i=0;s<e.length;++s)34==(i=e.charCodeAt(s))?a=!a:!a&&i in t&&(n[i]=(n[i]||0)+1);for(s in i=[],n)Object.prototype.hasOwnProperty.call(n,s)&&i.push([n[s],s]);if(!i.length)for(s in n=r)Object.prototype.hasOwnProperty.call(n,s)&&i.push([n[s],s]);return i.sort(function(e,t){return e[0]-t[0]||r[e[1]]-r[t[1]]}),t[i.pop()[1]]||44}function a(e,t){var r=t||{},a="";var s=r.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(a=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(a=e.charAt(4),e=e.slice(6)):a=n(e.slice(0,1024)):a=r&&r.FS?r.FS:n(e.slice(0,1024));var o=0,l=0,c=0,d=0,u=0,h=a.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=r.dateNF?function(e){var t="number"==typeof e?zc[e]:e;return t=t.replace(_d,"(\\d+)"),new RegExp("^"+t+"$")}(r.dateNF):null;function v(){var t=e.slice(d,u),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(r.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(n.t="s",n.v=t):(n.t="n",n.f=t.slice(1));else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=$d(t)))if(!isNaN(Xd(t).getDate())||g&&t.match(g)){n.z=r.dateNF||zc[14];var a=0;g&&t.match(g)&&(t=function(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(_d)||[]).forEach(function(e,t){var c=parseInt(r[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":s=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:a=c}}),l>=0&&-1==o&&a>=0&&(o=a,a=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==n&&-1==a&&-1==s?d:c+"T"+d}(0,r.dateNF,t.match(g)||[]),a=1),r.cellDates?(n.t="d",n.v=Hd(t,a)):(n.t="n",n.v=Md(Hd(t,a))),!1!==r.cellText&&(n.w=bd(n.z,n.v instanceof Date?Md(n.v):n.v)),r.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==r.cellText&&(n.w=t),n.v=c;if("z"==n.t||(r.dense?(s[o]||(s[o]=[]),s[o][l]=n):s[uf({c:l,r:o})]=n),d=u+1,m=e.charCodeAt(d),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),p==h)++l;else if(l=0,++o,r.sheetRows&&r.sheetRows<=o)return!0}e:for(;u<e.length;++u)switch(p=e.charCodeAt(u)){case 34:34===m&&(f=!f);break;case h:case 10:case 13:if(!f&&v())break e}return u-d>0&&v(),s["!ref"]=ff(i),s}function s(t,r){return r&&r.PRN?r.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?a(t,r):xf(function(t,r){var n=r||{},a=[];if(!t||0===t.length)return a;for(var s=t.split(/[\r\n]/),i=s.length-1;i>=0&&0===s[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){a[c]=[];var d=0;for(e(s[c].slice(0,o).trim(),a,c,d,n),d=1;d<=(s[c].length-o)/10+1;++d)e(s[c].slice(o+10*(d-1),o+10*d).trim(),a,c,d,n)}return n.sheetRows&&(a=a.slice(0,n.sheetRows)),a}(t,r),r):a(t,r)}function i(e,t){var r="",n="string"==t.type?[0,0,0,0]:bw(e,t);switch(t.type){case"base64":r=xc(e);break;case"binary":case"string":r=e;break;case"buffer":r=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof fc?fc.utils.decode(t.codepage,e):yc&&Buffer.isBuffer(e)?e.toString("binary"):kc(e);break;case"array":r=Vd(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?r=Ou(r.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?r=Ou(r):"binary"==t.type&&"undefined"!==typeof fc&&t.codepage&&(r=fc.utils.decode(t.codepage,fc.utils.encode(28591,r))),"socialcalc:version:"==r.slice(0,19)?Km.to_sheet("string"==t.type?r:Ou(r),t):s(r,t)}return{to_workbook:function(e,t){return vf(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,r=[],n=pf(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){for(var i=[],o=n.s.c;o<=n.e.c;++o){var l=uf({r:s,c:o});if((t=a?(e[s]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(gf(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}r.push(i.join(""))}return r.join("\n")}}}();var Ym=function(){function e(e,t,r){if(e){Yh(e,e.l||0);for(var n=r.Enum||v;e.l<e.length;){var a=e.read_shift(2),s=n[a]||n[65535],i=e.read_shift(2),o=e.l+i,l=s.f&&s.f(e,i,r);if(e.l=o,t(l,s,a))return}}}function t(t,r){if(!t)return t;var n=r||{};var a=n.dense?[]:{},s="Sheet1",i="",o=0,l={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},h=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=v,e(t,function(e,t,r){switch(r){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:u=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==r&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||zc[14],n.cellDates&&(e[1].t="d",e[1].v=Bd(e[1].v))),n.qpro&&e[3]>o&&(a["!ref"]=ff(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=i||"Sheet"+(o+1),i="");var d=n.dense?(a[e[0].r]||[])[e[0].c]:a[uf(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[uf(e[0])]=e[1]}},n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=b,14==t[2]&&(n.qpro=!0,t.l=0),e(t,function(e,t,r){switch(r){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(a["!ref"]=ff(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),h>0&&e[0].r>=h)break;n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[uf(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==o&&(s=e[1])}},n)}if(a["!ref"]=ff(u),l[i||s]=a,c.push(i||s),!d.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],m=0;m<d.length;++m)l[c[m]]?(p.push(d[m]||c[m]),f[d[m]]=l[d[m]]||l[c[m]]):(p.push(d[m]),f[d[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function r(e,t,r){var n=[{c:0,r:0},{t:"n",v:0},0,0];return r.qpro&&20768!=r.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].t="s",20768==n.vers){e.l++;var i=e.read_shift(1);return s[1].v=e.read_shift(i,"utf8"),s}return n.qpro&&e.l++,s[1].v=e.read_shift(a-e.l,"cstr"),s}function a(e,t,r){var n=Jh(7+r.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var a=0;a<n.length;++a){var s=r.charCodeAt(a);n.write_shift(1,s>=128?95:s)}return n.write_shift(1,0),n}function s(e,t,r){var n=Jh(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r,"i"),n}function i(e,t,r){var n=Jh(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,r,"f"),n}function o(e,t,r){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(r?cf(t):of(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,r,n){var a=Jh(6+n.length);a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),a.write_shift(1,39);for(var s=0;s<n.length;++s){var i=n.charCodeAt(s);a.write_shift(1,i>=128?95:i)}return a.write_shift(1,0),a}function h(e,t){var r=d(e),n=e.read_shift(4),a=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===n&&3221225472===a?(r[1].t="e",r[1].v=15):0===n&&3489660928===a?(r[1].t="e",r[1].v=42):r[1].v=0,r;var i=32768&s;return s=(32767&s)-16446,r[1].v=(1-2*i)*(a*Math.pow(2,s+32)+n*Math.pow(2,s)),r}function f(e,t,r,n){var a=Jh(14);if(a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),0==n)return a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,65535),a;var s,i=0,o=0,l=0;return n<0&&(i=1,n=-n),o=0|Math.log2(n),0==(2147483648&(l=(n/=Math.pow(2,o-31))>>>0))&&(++o,l=(n/=2)>>>0),n-=l,l|=2147483648,l>>>=0,s=(n*=Math.pow(2,32))>>>0,a.write_shift(4,s),a.write_shift(4,l),o+=16383+(i?32768:0),a.write_shift(2,o),a}function p(e,t){var r=d(e),n=e.read_shift(8,"f");return r[1].v=n,r}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var r=Jh(5+e.length);r.write_shift(2,14e3),r.write_shift(2,t);for(var n=0;n<e.length;++n){var a=e.charCodeAt(n);r[r.l++]=a>127?95:a}return r[r.l++]=0,r}var v={0:{n:"BOF",f:Kp},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,r){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&r.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(2,"i"),a}},14:{n:"NUMBER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(8,"f"),a}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].v=e.read_shift(8,"f"),n.qpro)e.l=a;else{var i=e.read_shift(2);!function(e,t){Yh(e,0);var r=[],n=0,a="",s="",i="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:r.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),r.push(s+a);break;case 2:var h=o(t[0].c,e.read_shift(2),!0),f=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),r.push(h+f+":"+s+a);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:r.push("("+r.pop()+")");break;case 5:r.push(e.read_shift(2));break;case 6:for(var p="";u=e[e.l++];)p+=String.fromCharCode(u);r.push('"'+p.replace(/"/g,'""')+'"');break;case 8:r.push("-"+r.pop());break;case 23:r.push("+"+r.pop());break;case 22:r.push("NOT("+r.pop()+")");break;case 20:case 21:d=r.pop(),i=r.pop(),r.push(["AND","OR"][u-20]+"("+i+","+d+")");break;default:if(u<32&&c[u])d=r.pop(),i=r.pop(),r.push(i+c[u]+d);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(n=l[u][1])&&(n=e[e.l++]),n>r.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+r.join("|")+"|");var m=r.slice(-n);r.length-=n,r.push(l[u][0]+"("+m.join(",")+")")}}}1==r.length?t[1].f=""+r[0]:console.error("WK1 bad formula parse |"+r.join("|")+"|")}(e.slice(e.l,e.l+i),s),e.l+=i}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var r=e[e.l++];r>t-1&&(r=t-1);for(var n="";n.length<r;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},b={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var r=d(e);return r[1].t="s",r[1].v=e.read_shift(t-4,"cstr"),r}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var r=d(e);r[1].v=e.read_shift(2);var n=r[1].v>>1;if(1&r[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return r[1].v=n,r}},25:{n:"FORMULA19",f:function(e,t){var r=h(e);return e.l+=t-14,r}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var r={},n=e.l+t;e.l<n;){var a=e.read_shift(2);if(14e3==a){for(r[a]=[0,""],r[a][0]=e.read_shift(2);e[e.l];)r[a][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return r}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var r=d(e),n=e.read_shift(4);return r[1].v=n>>6,r}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var r=p(e);return e.l+=t-10,r}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,r){if(r.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var r=t||{};if(+r.codepage>=0&&cc(+r.codepage),"string"==r.type)throw new Error("Cannot write WK1 to JS string");var n=Qh(),o=pf(e["!ref"]),l=Array.isArray(e),c=[];cy(n,0,function(e){var t=Jh(2);return t.write_shift(2,e),t}(1030)),cy(n,6,function(e){var t=Jh(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var d=Math.min(o.e.r,8191),u=o.s.r;u<=d;++u)for(var h=of(u),f=o.s.c;f<=o.e.c;++f){u===o.s.r&&(c[f]=cf(f));var p=c[f]+h,m=l?(e[u]||[])[f]:e[p];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?cy(n,13,s(u,f,m.v)):cy(n,14,i(u,f,m.v));else cy(n,15,a(u,f,gf(m).slice(0,239)))}return cy(n,1),n.end()},book_to_wk3:function(e,t){var r=t||{};if(+r.codepage>=0&&cc(+r.codepage),"string"==r.type)throw new Error("Cannot write WK3 to JS string");var n=Qh();cy(n,0,function(e){var t=Jh(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var r=0,n=0,a=0,s=0;s<e.SheetNames.length;++s){var i=e.SheetNames[s],o=e.Sheets[i];if(o&&o["!ref"]){++a;var l=hf(o["!ref"]);r<l.e.r&&(r=l.e.r),n<l.e.c&&(n=l.e.c)}}r>8191&&(r=8191);return t.write_shift(2,r),t.write_shift(1,a),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var a=0,s=0;a<e.SheetNames.length;++a)(e.Sheets[e.SheetNames[a]]||{})["!ref"]&&cy(n,27,g(e.SheetNames[a],s++));var i=0;for(a=0;a<e.SheetNames.length;++a){var o=e.Sheets[e.SheetNames[a]];if(o&&o["!ref"]){for(var l=pf(o["!ref"]),c=Array.isArray(o),d=[],h=Math.min(l.e.r,8191),p=l.s.r;p<=h;++p)for(var m=of(p),v=l.s.c;v<=l.e.c;++v){p===l.s.r&&(d[v]=cf(v));var b=d[v]+m,x=c?(o[p]||[])[v]:o[b];if(x&&"z"!=x.t)if("n"==x.t)cy(n,23,f(p,v,i,x.v));else cy(n,22,u(p,v,i,gf(x).slice(0,239)))}++i}}return cy(n,1),n.end()},to_workbook:function(e,r){switch(r.type){case"base64":return t(_c(xc(e)),r);case"binary":return t(_c(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}}}();var Xm=function(){var e=Mu("t"),t=Mu("rPr");function r(r){var n=r.match(e);if(!n)return{t:"s",v:""};var a={t:"s",v:yu(n[1])},s=r.match(t);return s&&(a.s=function(e){var t={},r=e.match(fu),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=gu(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==s.val)break;t.cp=oc[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==s.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==s.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(47!==s[0].charCodeAt(1)&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}(s[1])),a}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(e){return e.replace(n,"").split(a).map(r).filter(function(e){return e.v})}}(),Jm=function(){var e=/(\r\n|\n)/g;function t(t){var r=[[],t.v,[]];return t.v?(t.s&&function(e,t,r){var n=[];e.u&&n.push("text-decoration: underline;"),e.uval&&n.push("text-underline-style:"+e.uval+";"),e.sz&&n.push("font-size:"+e.sz+"pt;"),e.outline&&n.push("text-effect: outline;"),e.shadow&&n.push("text-shadow: auto;"),t.push('<span style="'+n.join("")+'">'),e.b&&(t.push("<b>"),r.push("</b>")),e.i&&(t.push("<i>"),r.push("</i>")),e.strike&&(t.push("<s>"),r.push("</s>"));var a=e.valign||"";"superscript"==a||"super"==a?a="sup":"subscript"==a&&(a="sub"),""!=a&&(t.push("<"+a+">"),r.push("</"+a+">")),r.push("</span>")}(t.s,r[0],r[2]),r[0].join("")+r[1].replace(e,"<br/>")+r[2].join("")):""}return function(e){return e.map(t).join("")}}(),Zm=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Qm=/<(?:\w+:)?r>/,eg=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function tg(e,t){var r=!t||t.cellHTML,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=yu(Ou(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ou(e),r&&(n.h=ku(n.t))):e.match(Qm)&&(n.r=Ou(e),n.t=yu(Ou((e.replace(eg,"").match(Zm)||[]).join("").replace(fu,""))),r&&(n.h=Jm(Xm(n.r)))),n):{t:""}}var rg=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,ng=/<(?:\w+:)?(?:si|sstItem)>/g,ag=/<\/(?:\w+:)?(?:si|sstItem)>/;var sg=/^\s|\s$|[\t\n\r]/;function ig(e,t){if(!t.bookSST)return"";var r=[du];r[r.length]=Hu("sst",null,{xmlns:oh[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(null!=e[n]){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(sg)&&(s+=' xml:space="preserve"'),s+=">"+Nu(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}var og=function(e,t){var r=!1;return null==t&&(r=!0,t=Jh(15+4*e.t.length)),t.write_shift(1,0),jf(e.t,t),r?t.slice(0,t.l):t};function lg(e){var t=Qh();ef(t,159,function(e,t){return t||(t=Jh(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var r=0;r<e.length;++r)ef(t,19,og(e[r]));return ef(t,160),t.end()}function cg(e){if("undefined"!==typeof fc)return fc.utils.encode(sc,e);for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function dg(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function ug(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function hg(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=dg(e,4),t.U=dg(e,4),t.W=dg(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function fg(e,t){var r=e.l+t,n={};n.Flags=63&e.read_shift(4),e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=36==n.Flags;break;case 26625:a=4==n.Flags;break;case 0:a=16==n.Flags||4==n.Flags||36==n.Flags;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function pg(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function mg(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:fg(e,t),v:pg(e,e.length-e.l)}}function gg(){throw new Error("File is password-protected: ECMA-376 Extensible")}function vg(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(fu,function(e){var r=gu(e);switch(vu(r[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach(function(e){n[e]=r[e]});break;case"<dataIntegrity":n.encryptedHmacKey=r.encryptedHmacKey,n.encryptedHmacValue=r.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"<keyEncryptor":n.uri=r.uri;break;case"<encryptedKey":n.encs.push(r);break;default:throw r[0]}}),n}function bg(e){var t,r,n=0,a=cg(e),s=a.length+1;for((t=jc(s))[0]=a.length,r=1;r!=s;++r)t[r]=a[r-1];for(r=s-1;r>=0;--r)n=((0===(16384&n)?0:1)|n<<1&32767)^t[r];return 52811^n}var xg=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(e,t){return 255&((r=e^t)/2|128*r);var r};return function(a){for(var s,i,o,l=cg(a),c=function(e){for(var n=t[e.length-1],a=104,s=e.length-1;s>=0;--s)for(var i=e[s],o=0;7!=o;++o)64&i&&(n^=r[a]),i*=2,--a;return n}(l),d=l.length,u=jc(16),h=0;16!=h;++h)u[h]=0;for(1===(1&d)&&(s=c>>8,u[d]=n(e[0],s),--d,s=255&c,i=l[l.length-1],u[d]=n(i,s));d>0;)s=c>>8,u[--d]=n(l[d],s),s=255&c,u[--d]=n(l[d],s);for(d=15,o=15-l.length;o>0;)s=c>>8,u[d]=n(e[o],s),--o,s=255&c,u[--d]=n(l[d],s),--d,--o;return u}}(),yg=function(e){var t=0,r=xg(e);return function(e){var n=function(e,t,r,n,a){var s,i;for(a||(a=t),n||(n=xg(e)),s=0;s!=t.length;++s)i=t[s],i=255&((i^=n[r])>>5|i<<3),a[s]=i,++r;return[a,r,n]}("",e,t,r);return t=n[1],n[0]}};function wg(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,1===n.Info?n.Data=function(e){var t={},r=t.EncryptionVersionInfo=dg(e,4);if(1!=r.Major||1!=r.Minor)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):n.Data=function(e,t){var r={},n=r.EncryptionVersionInfo=dg(e,4);if(t-=4,2!=n.Minor)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=fg(e,a),t-=a,r.EncryptionVerifier=pg(e,t),r}(e,t),n}var jg=function(){function e(e,r){switch(r.type){case"base64":return t(xc(e),r);case"binary":return t(e,r);case"buffer":return t(yc&&Buffer.isBuffer(e)?e.toString("binary"):kc(e),r);case"array":return t(Vd(e),r)}throw new Error("Unrecognized type "+r.type)}function t(e,t){var r=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach(function(e,t){Array.isArray(r)&&(r[t]=[]);for(var n,s=/\\\w+\b/g,i=0,o=-1;n=s.exec(e);){if("\\cell"===n[0]){var l=e.slice(i,s.lastIndex-n[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(r)?r[t][o]=c:r[uf({r:t,c:o})]=c}}i=s.lastIndex}o>a.e.c&&(a.e.c=o)}),r["!ref"]=ff(a),r}return{to_workbook:function(t,r){return vf(e(t,r),r)},to_sheet:e,from_sheet:function(e){for(var t,r=["{\\rtf1\\ansi"],n=pf(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){r.push("\\trowd\\trautofit1");for(var i=n.s.c;i<=n.e.c;++i)r.push("\\cellx"+(i+1));for(r.push("\\pard\\intbl"),i=n.s.c;i<=n.e.c;++i){var o=uf({r:s,c:i});(t=a?(e[s]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(r.push(" "+(t.w||(gf(t),t.w))),r.push("\\cell"))}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}}}();function Ng(e){for(var t=0,r=1;3!=t;++t)r=256*r+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function _g(e,t){if(0===t)return e;var r=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(0===i)return[0,0,t];var o,l=0,c=a+s;switch(o=i/(c>1?2-c:c),a){case t:l=((r-n)/i+6)%6;break;case r:l=(n-t)/i+2;break;case n:l=(t-r)/i+4}return[l/6,o,c/2]}(function(e){var t=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e));return r[2]=t<0?r[2]*(1+t):1-(1-r[2])*(1-t),Ng(function(e){var t,r=e[0],n=e[1],a=e[2],s=2*n*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*r;if(0!==n)switch(0|l){case 0:case 6:t=s*l,o[0]+=s,o[1]+=t;break;case 1:t=s*(2-l),o[0]+=t,o[1]+=s;break;case 2:t=s*(l-2),o[1]+=s,o[2]+=t;break;case 3:t=s*(4-l),o[1]+=t,o[2]+=s;break;case 4:t=s*(l-4),o[2]+=s,o[0]+=t;break;case 5:t=s*(6-l),o[2]+=t,o[0]+=s}for(var c=0;3!=c;++c)o[c]=Math.round(255*o[c]);return o}(r))}var Sg=6;function kg(e){return Math.floor((e+Math.round(128/Sg)/256)*Sg)}function Ag(e){return Math.floor((e-5)/Sg*100+.5)/100}function Eg(e){return Math.round((e*Sg+5)/Sg*256)/256}function Cg(e){return Eg(Ag(kg(e)))}function Tg(e){var t=Math.abs(e-Cg(e)),r=Sg;if(t>.005)for(Sg=1;Sg<15;++Sg)Math.abs(e-Cg(e))<=t&&(t=Math.abs(e-Cg(e)),r=Sg);Sg=r}function Pg(e){e.width?(e.wpx=kg(e.width),e.wch=Ag(e.wpx),e.MDW=Sg):e.wpx?(e.wch=Ag(e.wpx),e.width=Eg(e.wch),e.MDW=Sg):"number"==typeof e.wch&&(e.width=Eg(e.wch),e.wpx=kg(e.width),e.MDW=Sg),e.customWidth&&delete e.customWidth}var Dg=96;function Og(e){return 96*e/Dg}function Ig(e){return e*Dg/96}var Mg={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var Rg=["numFmtId","fillId","fontId","borderId","xfId"],Lg=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var Fg=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(s,i,o){var l,c={};return s?((l=(s=s.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,r){t.NumberFmt=[];for(var n=Td(zc),a=0;a<n.length;++a)t.NumberFmt[n[a]]=zc[n[a]];var s=e[0].match(fu);if(s)for(a=0;a<s.length;++a){var i=gu(s[a]);switch(vu(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var o=yu(Ou(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=o}xd(o,l)}break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}(l,c,o),(l=s.match(n))&&function(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(fu)||[]).forEach(function(e){var i=gu(e);switch(vu(i[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":i.val&&(a.name=Ou(i.val));break;case"<b":a.bold=i.val?Eu(i.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=i.val?Eu(i.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(i.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=i.val?Eu(i.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=i.val?Eu(i.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=i.val?Eu(i.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=i.val?Eu(i.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=i.val?Eu(i.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":i.val&&(a.sz=+i.val);break;case"<vertAlign":i.val&&(a.vertAlign=i.val);break;case"<family":i.val&&(a.family=parseInt(i.val,10));break;case"<scheme":i.val&&(a.scheme=i.val);break;case"<charset":if("1"==i.val)break;i.codepage=oc[parseInt(i.val,10)];break;case"<color":if(a.color||(a.color={}),i.auto&&(a.color.auto=Eu(i.auto)),i.rgb)a.color.rgb=i.rgb.slice(-6);else if(i.indexed){a.color.index=parseInt(i.indexed,10);var o=ep[a.color.index];81==a.color.index&&(o=ep[1]),o||(o=ep[1]),a.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else i.theme&&(a.color.theme=parseInt(i.theme,10),i.tint&&(a.color.tint=parseFloat(i.tint)),i.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=_g(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fonts")}})}(l,c,i,o),(l=s.match(r))&&function(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(fu)||[]).forEach(function(e){var r=gu(e);switch(vu(r[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":r.patternType&&(a.patternType=r.patternType);break;case"<bgColor":a.bgColor||(a.bgColor={}),r.indexed&&(a.bgColor.indexed=parseInt(r.indexed,10)),r.theme&&(a.bgColor.theme=parseInt(r.theme,10)),r.tint&&(a.bgColor.tint=parseFloat(r.tint)),r.rgb&&(a.bgColor.rgb=r.rgb.slice(-6));break;case"<fgColor":a.fgColor||(a.fgColor={}),r.theme&&(a.fgColor.theme=parseInt(r.theme,10)),r.tint&&(a.fgColor.tint=parseFloat(r.tint)),null!=r.rgb&&(a.fgColor.rgb=r.rgb.slice(-6));break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+r[0]+" in fills")}})}(l,c,0,o),(l=s.match(a))&&function(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(fu)||[]).forEach(function(e){var r=gu(e);switch(vu(r[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":a={},r.diagonalUp&&(a.diagonalUp=Eu(r.diagonalUp)),r.diagonalDown&&(a.diagonalDown=Eu(r.diagonalDown)),t.Borders.push(a);break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+r[0]+" in borders")}})}(l,c,0,o),(l=s.match(t))&&function(e,t,r){var n;t.CellXf=[];var a=!1;(e[0].match(fu)||[]).forEach(function(e){var s=gu(e),i=0;switch(vu(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(n=s)[0],i=0;i<Rg.length;++i)n[Rg[i]]&&(n[Rg[i]]=parseInt(n[Rg[i]],10));for(i=0;i<Lg.length;++i)n[Lg[i]]&&(n[Lg[i]]=Eu(n[Lg[i]]));if(t.NumberFmt&&n.numFmtId>392)for(i=392;i>60;--i)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[i]){n.numFmtId=i;break}t.CellXf.push(n);break;case"<alignment":case"<alignment/>":var o={};s.vertical&&(o.vertical=s.vertical),s.horizontal&&(o.horizontal=s.horizontal),null!=s.textRotation&&(o.textRotation=s.textRotation),s.indent&&(o.indent=s.indent),s.wrapText&&(o.wrapText=Eu(s.wrapText)),n.alignment=o;break;case"<AlternateContent":case"<ext":a=!0;break;case"</AlternateContent>":case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}(l,c,o),c):c}}();function Bg(e,t){var r,n=[du,Hu("styleSheet",null,{xmlns:oh[0],"xmlns:vt":ah})];return e.SSF&&null!=(r=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=e[n]&&(t[t.length]=Hu("numFmt",null,{numFmtId:n,formatCode:Nu(e[n])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Hu("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function(e){var t=[];return t[t.length]=Hu("cellXfs",null),e.forEach(function(e){t[t.length]=Hu("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Hu("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function zg(e,t,r){r||(r=Jh(6+4*t.length)),r.write_shift(2,e),jf(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return null==r.l&&(r.l=r.length),n}function Ug(e,t){t||(t=Jh(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=Jh(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,r),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var r=0;"superscript"==e.vertAlign?r=1:"subscript"==e.vertAlign&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Vf(e.color,t);var n=0;return"major"==e.scheme&&(n=1),"minor"==e.scheme&&(n=2),t.write_shift(1,n),jf(e.name,t),t.length>t.l?t.slice(0,t.l):t}var qg,Wg=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Hg=Xh;function Vg(e,t){t||(t=Jh(84)),qg||(qg=Dd(Wg));var r=qg[e.patternType];null==r&&(r=40),t.write_shift(4,r);var n=0;if(40!=r)for(Vf({auto:1},t),Vf({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Gg(e,t,r){r||(r=Jh(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);return r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Kg(e,t){return t||(t=Jh(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var $g=Xh;function Yg(e){ef(e,613,yf(1)),ef(e,46,function(e,t){return t||(t=Jh(51)),t.write_shift(1,0),Kg(0,t),Kg(0,t),Kg(0,t),Kg(0,t),Kg(0,t),t.length>t.l?t.slice(0,t.l):t}()),ef(e,614)}function Xg(e){ef(e,619,yf(1)),ef(e,48,function(e,t){return t||(t=Jh(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),If(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),ef(e,620)}function Jg(e){ef(e,508,function(e,t,r){var n=Jh(2052);return n.write_shift(4,e),If(t,n),If(r,n),n.length>n.l?n.slice(0,n.l):n}(0,"TableStyleMedium9","PivotStyleMedium4")),ef(e,509)}function Zg(e,t){var r=Qh();return ef(r,278),function(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var n=e[0];n<=e[1];++n)null!=t[n]&&++r}),0!=r&&(ef(e,615,yf(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=t[n]&&ef(e,44,zg(n,t[n]))}),ef(e,616))}}(r,e.SSF),function(e){ef(e,611,yf(1)),ef(e,43,Ug({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),ef(e,612)}(r),function(e){ef(e,603,yf(2)),ef(e,45,Vg({patternType:"none"})),ef(e,45,Vg({patternType:"gray125"})),ef(e,604)}(r),Yg(r),function(e){ef(e,626,yf(1)),ef(e,47,Gg({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),ef(e,627)}(r),function(e,t){ef(e,617,yf(t.length)),t.forEach(function(t){ef(e,47,Gg(t,0))}),ef(e,618)}(r,t.cellXfs),Xg(r),function(e){ef(e,505,yf(0)),ef(e,506)}(r),Jg(r),ef(r,279),r.end()}var Qg=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function ev(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(fu)||[]).forEach(function(e){var a=gu(e);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===a[0].charAt(1)?(t.themeElements.clrScheme[Qg.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function tv(){}function rv(){}var nv=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,av=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,sv=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var iv=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function ov(e,t){var r;e&&0!==e.length||(e=lv());var n={};if(!(r=e.match(iv)))throw new Error("themeElements not found in theme");return function(e,t,r){var n;t.themeElements={},[["clrScheme",nv,ev],["fontScheme",av,tv],["fmtScheme",sv,rv]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}(r[0],n,t),n.raw=e,n}function lv(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var r=[du];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function cv(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return Xh(e,t)}(e,4);break;case 2:t.xclrValue=lm(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function dv(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=cv(e);break;case 6:n[1]=function(e,t){return Xh(e,t)}(e,r);break;case 14:case 15:n[1]=e.read_shift(1===r?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function uv(e,t){t.forEach(function(e){e[0]})}function hv(){var e=Qh();return ef(e,332),ef(e,334,yf(1)),ef(e,335,function(e){var t=Jh(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),jf(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),ef(e,336),ef(e,339,function(e,t){var r=Jh(8+2*t.length);return r.write_shift(4,e),jf(t,r),r.slice(0,r.l)}(1,"XLDAPR")),ef(e,52),ef(e,35,yf(514)),ef(e,4096,yf(0)),ef(e,4097,$p(1)),ef(e,36),ef(e,53),ef(e,340),ef(e,337,function(e,t){var r=Jh(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}(1,!0)),ef(e,51,function(e){var t=Jh(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}([[1,0]])),ef(e,338),ef(e,333),e.end()}function fv(){var e=[du];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var pv=1024;function mv(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Hu("xml",null,{"xmlns:v":fh,"xmlns:o":lh,"xmlns:x":ch,"xmlns:mv":hh}).replace(/\/>/,">"),Hu("o:shapelayout",Hu("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Hu("v:shapetype",[Hu("v:stroke",null,{joinstyle:"miter"}),Hu("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];pv<1e3*e;)pv+=1e3;return t.forEach(function(e){var t=df(e[0]),r={color2:"#BEFF82",type:"gradient"};"gradient"==r.type&&(r.angle="-180");var n="gradient"==r.type?Hu("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=Hu("v:fill",n,r);++pv,a=a.concat(["<v:shape"+Wu({id:"_x0000_s"+pv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,Hu("v:shadow",null,{on:"t",obscured:"t"}),Hu("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",qu("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),qu("x:AutoFill","False"),qu("x:Row",String(t.r)),qu("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function gv(e,t,r,n){var a,s=Array.isArray(e);t.forEach(function(t){var i=df(t.ref);if(s?(e[i.r]||(e[i.r]=[]),a=e[i.r][i.c]):a=e[t.ref],!a){a={t:"z"},s?e[i.r][i.c]=a:e[t.ref]=a;var o=pf(e["!ref"]||"BDWGO1000001:A1");o.s.r>i.r&&(o.s.r=i.r),o.e.r<i.r&&(o.e.r=i.r),o.s.c>i.c&&(o.s.c=i.c),o.e.c<i.c&&(o.e.c=i.c);var l=ff(o);l!==e["!ref"]&&(e["!ref"]=l)}a.c||(a.c=[]);var c={a:t.author,t:t.t,r:t.r,T:r};t.h&&(c.h=t.h);for(var d=a.c.length-1;d>=0;--d){if(!r&&a.c[d].T)return;r&&!a.c[d].T&&a.c.splice(d,1)}if(r&&n)for(d=0;d<n.length;++d)if(c.a==n[d].id){c.a=n[d].name||c.a;break}a.c.push(c)})}function vv(e){var t=[du,Hu("comments",null,{xmlns:oh[0]})],r=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var n=Nu(e.a);-1==r.indexOf(n)&&(r.push(n),t.push("<author>"+n+"</author>")),e.T&&e.ID&&-1==r.indexOf("tc="+e.ID)&&(r.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==r.length&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var n=0,a=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?n=r.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(n=r.indexOf(Nu(e.a))),a.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+n+'"><text>'),a.length<=1)t.push(qu("t",Nu(a[0]||"")));else{for(var s="Comment:\n    "+a[0]+"\n",i=1;i<a.length;++i)s+="Reply:\n    "+a[i]+"\n";t.push(qu("t",Nu(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function bv(e,t,r){var n=[du,Hu("ThreadedComments",null,{xmlns:Qu}).replace(/[\/]>/,">")];return e.forEach(function(e){var a="";(e[1]||[]).forEach(function(s,i){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};0==i?a=o.id:o.parentId=a,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(Hu("threadedComment",qu("text",s.t||""),o))}else delete s.ID})}),n.push("</ThreadedComments>"),n.join("")}var xv=wf;function yv(e){var t=Qh(),r=[];return ef(t,628),ef(t,630),e.forEach(function(e){e[1].forEach(function(e){r.indexOf(e.a)>-1||(r.push(e.a.slice(0,54)),ef(t,632,function(e){return jf(e.slice(0,54))}(e.a)))})}),ef(t,631),ef(t,633),e.forEach(function(e){e[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var a={s:df(e[0]),e:df(e[0])};ef(t,635,function(e,t){return null==t&&(t=Jh(36)),t.write_shift(4,e[1].iauthor),qf(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([a,n])),n.t&&n.t.length>0&&ef(t,637,kf(n)),ef(t,636),delete n.iauthor})}),ef(t,634),ef(t,629),t.end()}var wv=["xlsb","xlsm","xlam","biff8","xla"];var jv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(e,r,n,a){var s=!1,i=!1;0==n.length?i=!0:"["==n.charAt(0)&&(i=!0,n=n.slice(1,-1)),0==a.length?s=!0:"["==a.charAt(0)&&(s=!0,a=a.slice(1,-1));var o=n.length>0?0|parseInt(n,10):0,l=a.length>0?0|parseInt(a,10):0;return s?l+=t.c:--l,i?o+=t.r:--o,r+(s?"":"$")+cf(l)+(i?"":"$")+of(o)}return function(n,a){return t=a,n.replace(e,r)}}(),Nv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,_v=function(){return function(e,t){return e.replace(Nv,function(e,r,n,a,s,i){var o=lf(a)-(n?0:t.c),l=sf(i)-(s?0:t.r);return r+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==o?"":n?o+1:"["+o+"]")})}}();function Sv(e,t){return e.replace(Nv,function(e,r,n,a,s,i){return r+("$"==n?n+a:cf(lf(a)+t.c))+("$"==s?s+i:of(sf(i)+t.r))})}function kv(e,t,r){var n=hf(t).s,a=df(r);return Sv(e,{r:a.r-n.r,c:a.c-n.c})}function Av(e){return e.replace(/_xlfn\./g,"")}function Ev(e){e.l+=1}function Cv(e,t){var r=e.read_shift(1==t?1:2);return[16383&r,r>>14&1,r>>15&1]}function Tv(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Pv(e);12==r.biff&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=Cv(e,2),o=Cv(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Pv(e){var t=Cv(e,2),r=Cv(e,2),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Dv(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return function(e){var t=Cv(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(r&&12==r.biff?4:2),a=Cv(e,2);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Ov(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:255&r,fQuoted:!!(16384&r),cRel:r>>15,rRel:r>>15}}function Iv(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function Mv(e){return[e.read_shift(1),e.read_shift(1)]}function Rv(e,t){var r=[e.read_shift(1)];if(12==t)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2}switch(r[0]){case 4:r[1]=Vp(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:r[1]=tp[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Wf(e);break;case 2:r[1]=rm(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Lv(e,t,r){for(var n=e.read_shift(12==r.biff?4:2),a=[],s=0;s!=n;++s)a.push((12==r.biff?Uf:pm)(e,8));return a}function Fv(e,t,r){var n=0,a=0;12==r.biff?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,0==--a&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=Rv(e,r.biff);return i}function Bv(e,t,r){return e.l+=2,[Ov(e)]}function zv(e){return e.l+=6,[]}function Uv(e){return e.l+=2,[Kp(e),1&e.read_shift(2)]}var qv=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var Wv={1:{n:"PtgExp",f:function(e,t,r){return e.l++,r&&12==r.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(r&&2==r.biff?1:2)]}},2:{n:"PtgTbl",f:Xh},3:{n:"PtgAdd",f:Ev},4:{n:"PtgSub",f:Ev},5:{n:"PtgMul",f:Ev},6:{n:"PtgDiv",f:Ev},7:{n:"PtgPower",f:Ev},8:{n:"PtgConcat",f:Ev},9:{n:"PtgLt",f:Ev},10:{n:"PtgLe",f:Ev},11:{n:"PtgEq",f:Ev},12:{n:"PtgGe",f:Ev},13:{n:"PtgGt",f:Ev},14:{n:"PtgNe",f:Ev},15:{n:"PtgIsect",f:Ev},16:{n:"PtgUnion",f:Ev},17:{n:"PtgRange",f:Ev},18:{n:"PtgUplus",f:Ev},19:{n:"PtgUminus",f:Ev},20:{n:"PtgPercent",f:Ev},21:{n:"PtgParen",f:Ev},22:{n:"PtgMissArg",f:Ev},23:{n:"PtgStr",f:function(e,t,r){return e.l++,Jp(e,0,r)}},26:{n:"PtgSheet",f:function(e,t,r){return e.l+=5,e.l+=2,e.l+=2==r.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,r){return e.l+=2==r.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,tp[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Wf(e)}},32:{n:"PtgArray",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=2==r.biff?6:12==r.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[ub[a],db[a],n]}},34:{n:"PtgFuncVar",f:function(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[a,(0===s[0]?db:cb)[s[1]]]}},35:{n:"PtgName",f:function(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,s]}},36:{n:"PtgRef",f:function(e,t,r){var n=(96&e[e.l])>>5;return e.l+=1,[n,Dv(e,0,r)]}},37:{n:"PtgArea",f:function(e,t,r){return[(96&e[e.l++])>>5,Tv(e,r.biff>=2&&r.biff,r)]}},38:{n:"PtgMemArea",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=r&&2==r.biff?3:4,[n,e.read_shift(r&&2==r.biff?1:2)]}},39:{n:"PtgMemErr",f:Xh},40:{n:"PtgMemNoMem",f:Xh},41:{n:"PtgMemFunc",f:function(e,t,r){return[e.read_shift(1)>>>5&3,e.read_shift(r&&2==r.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,12==r.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=function(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),r=e.read_shift(1),n=(32768&t)>>15,a=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==a&&r>=128&&(r-=256),{r:t,c:r,cRel:a,rRel:n}}(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;a>524287;)a-=1048576;if(1==i)for(;s>8191;)s-=16384;return{r:a,c:s,cRel:i,rRel:o}}(e,0,r);return[n,a]}},45:{n:"PtgAreaN",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=function(e,t,r){if(r.biff<8)return Pv(e);var n=e.read_shift(12==r.biff?4:2),a=e.read_shift(12==r.biff?4:2),s=Cv(e,2),i=Cv(e,2);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,r);return[n,a]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,r){return 5==r.biff?function(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(2);return r&&5==r.biff&&(e.l+=12),[n,a,Dv(e,0,r)]}},59:{n:"PtgArea3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2,"i");if(r)switch(r.biff){case 5:e.l+=12;break;case 12:0}return[n,a,Tv(e,0,r)]}},60:{n:"PtgRefErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[n,a]}},61:{n:"PtgAreaErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[n,a]}},255:{}},Hv={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Vv={1:{n:"PtgElfLel",f:Uv},2:{n:"PtgElfRw",f:Bv},3:{n:"PtgElfCol",f:Bv},6:{n:"PtgElfRwV",f:Bv},7:{n:"PtgElfColV",f:Bv},10:{n:"PtgElfRadical",f:Bv},11:{n:"PtgElfRadicalS",f:zv},13:{n:"PtgElfColS",f:zv},15:{n:"PtgElfColSV",f:zv},16:{n:"PtgElfRadicalLel",f:Uv},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&r,rt:qv[r>>2&31],idx:n,c:a,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Gv={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=r&&2==r.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,r){e.l+=2;for(var n=e.read_shift(r&&2==r.biff?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&2==r.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,r){e.l+=r&&2==r.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Iv},33:{n:"PtgAttrBaxcel",f:Iv},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),Mv(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),Mv(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function Kv(e,t,r,n){if(n.biff<8)return Xh(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Fv(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Lv(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&12==n.biff&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return 0!==(t=a-e.l)&&s.push(Xh(e,t)),s}function $v(e,t,r){for(var n,a,s=e.l+t,i=[];s!=e.l;)t=s-e.l,a=e[e.l],n=Wv[a]||Wv[Hv[a]],24!==a&&25!==a||(n=(24===a?Vv:Gv)[e[e.l+1]]),n&&n.f?i.push([n.n,n.f(e,t,r)]):Xh(e,t);return i}function Yv(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)if(2===i[0])a.push('"'+i[1].replace(/"/g,'""')+'"');else a.push(i[1]);else a.push("")}t.push(a.join(","))}return t.join(";")}var Xv={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Jv(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return null!=r.SID?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[n[0]][0][3]?(a=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Zv(e,t,r){var n=Jv(e,t,r);return"#REF"==n?n:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,r)}function Qv(e,t,r,n,a){var s,i,o,l,c=a&&a.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",v=0,b=e[0].length;v<b;++v){var x=e[0][v];switch(x[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=u.pop(),i=u.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=Kd(" ",e[0][m][1][1]);break;case 1:g=Kd("\r",e[0][m][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}i+=g,m=-1}u.push(i+Xv[x[0]]+s);break;case"PtgIsect":s=u.pop(),i=u.pop(),u.push(i+" "+s);break;case"PtgUnion":s=u.pop(),i=u.pop(),u.push(i+","+s);break;case"PtgRange":s=u.pop(),i=u.pop(),u.push(i+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=tf(x[1][1],d,a),u.push(nf(o,c));break;case"PtgRefN":o=r?tf(x[1][1],r,a):x[1][1],u.push(nf(o,c));break;case"PtgRef3d":h=x[1][1],o=tf(x[1][2],d,a);p=Zv(n,h,a);u.push(p+"!"+nf(o,c));break;case"PtgFunc":case"PtgFuncVar":var y=x[1][0],w=x[1][1];y||(y=0);var j=0==(y&=127)?[]:u.slice(-y);u.length-=y,"User"===w&&(w=j.shift()),u.push(w+"("+j.join(",")+")");break;case"PtgBool":u.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(x[1]);break;case"PtgNum":u.push(String(x[1]));break;case"PtgStr":u.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=rf(x[1][1],r?{s:r}:d,a),u.push(af(l,a));break;case"PtgArea":l=rf(x[1][1],d,a),u.push(af(l,a));break;case"PtgArea3d":h=x[1][1],l=x[1][2],p=Zv(n,h,a),u.push(p+"!"+af(l,a));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":f=x[1][2];var N=(n.names||[])[f-1]||(n[0]||[])[f],_=N?N.Name:"SH33TJSNAME"+String(f);_&&"_xlfn."==_.slice(0,6)&&!a.xlfn&&(_=_.slice(6)),u.push(_);break;case"PtgNameX":var S,k=x[1][1];if(f=x[1][2],!(a.biff<=5)){var A="";if(14849==((n[k]||[])[0]||[])[0]||(1025==((n[k]||[])[0]||[])[0]?n[k][f]&&n[k][f].itab>0&&(A=n.SheetNames[n[k][f].itab-1]+"!"):A=n.SheetNames[f-1]+"!"),n[k]&&n[k][f])A+=n[k][f].Name;else if(n[0]&&n[0][f])A+=n[0][f].Name;else{var E=(Jv(n,k,a)||"").split(";;");E[f-1]?A=E[f-1]:A+="SH33TJSERRX"}u.push(A);break}k<0&&(k=-k),n[k]&&(S=n[k][f]),S||(S={Name:"SH33TJSERRY"}),u.push(S.Name);break;case"PtgParen":var C="(",T=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:C=Kd(" ",e[0][m][1][1])+C;break;case 3:C=Kd("\r",e[0][m][1][1])+C;break;case 4:T=Kd(" ",e[0][m][1][1])+T;break;case 5:T=Kd("\r",e[0][m][1][1])+T;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}u.push(C+u.pop()+T);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":o={c:x[1][1],r:x[1][0]};var P={c:r.c,r:r.r};if(n.sharedf[uf(o)]){var D=n.sharedf[uf(o)];u.push(Qv(D,d,P,n,a))}else{var O=!1;for(s=0;s!=n.arrayf.length;++s)if(i=n.arrayf[s],!(o.c<i[0].s.c||o.c>i[0].e.c)&&!(o.r<i[0].s.r||o.r>i[0].e.r)){u.push(Qv(i[1],d,P,n,a)),O=!0;break}O||u.push(x[1])}break;case"PtgArray":u.push("{"+Yv(x[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=v;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(x))}if(3!=a.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var I=!0;switch((x=e[0][m])[1][0]){case 4:I=!1;case 0:g=Kd(" ",x[1][1]);break;case 5:I=!1;case 1:g=Kd("\r",x[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}u.push((I?g:"")+u.pop()+(I?"":g)),m=-1}}if(u.length>1&&a.WTF)throw new Error("bad formula stack");return u[0]}function eb(e,t,r){var n,a=e.l+t,s=2==r.biff?1:2,i=e.read_shift(s);if(65535==i)return[[],Xh(e,t-2)];var o=$v(e,i,r);return t!==i+s&&(n=Kv(e,t-i-s,o,r)),e.l=a,[o,n]}function tb(e,t,r){var n,a=e.l+t,s=e.read_shift(2),i=$v(e,s,r);return 65535==s?[[],Xh(e,t-2)]:(t!==s+2&&(n=Kv(e,a-s-2,i,r)),[i,n])}function rb(e,t,r){var n=e.l+t,a=dm(e);2==r.biff&&++e.l;var s=function(e){var t;if(65535!==Fh(e,e.l+6))return[Wf(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),i=e.read_shift(1);2!=r.biff&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=function(e,t,r){var n,a=e.l+t,s=2==r.biff?1:2,i=e.read_shift(s);if(65535==i)return[[],Xh(e,t-2)];var o=$v(e,i,r);return t!==i+s&&(n=Kv(e,t-i-s,o,r)),e.l=a,[o,n]}(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function nb(e,t,r,n,a){var s=um(t,r,a),i=function(e){if(null==e){var t=Jh(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return Hf("number"==typeof e?e:0)}(e.v),o=Jh(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=Jh(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return Ec([s,i,o,l])}function ab(e,t,r){var n=e.read_shift(4),a=$v(e,n,r),s=e.read_shift(4);return[a,s>0?Kv(e,s,a,r):null]}var sb=ab,ib=ab,ob=ab,lb=ab,cb={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},db={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ub={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function hb(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,t){return t.replace(/\./g,"")})).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function fb(e){return("of:="+e.replace(Nv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function pb(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function mb(e){return e.replace(/\./,"!")}var gb={},vb={},bb="undefined"!==typeof Map;function xb(e,t,r){var n=0,a=e.length;if(r){if(bb?r.has(t):Object.prototype.hasOwnProperty.call(r,t))for(var s=bb?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t:t},e.Count++,e.Unique++,r&&(bb?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function yb(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Sg=t.MDW),null!=t.width?r.customWidth=1:null!=t.wpx?n=Ag(t.wpx):null!=t.wch&&(n=t.wch),n>-1?(r.width=Eg(n),r.customWidth=1):null!=t.width&&(r.width=t.width),t.hidden&&(r.hidden=!0),null!=t.level&&(r.outlineLevel=r.level=t.level),r}function wb(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(r=[1,1,1,1,.5,.5]),null==e.left&&(e.left=r[0]),null==e.right&&(e.right=r[1]),null==e.top&&(e.top=r[2]),null==e.bottom&&(e.bottom=r[3]),null==e.header&&(e.header=r[4]),null==e.footer&&(e.footer=r[5])}}function jb(e,t,r){var n=r.revssf[null!=t.z?t.z:"General"],a=60,s=e.length;if(null==n&&r.ssf)for(;a<392;++a)if(null==r.ssf[a]){xd(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Nb(e,t,r,n,a,s){try{n.cellNF&&(e.z=zc[t])}catch(f2){if(n.WTF)throw f2}if("z"!==e.t||n.cellStyles){if("d"===e.t&&"string"===typeof e.v&&(e.v=Hd(e.v)),(!n||!1!==n.cellText)&&"z"!==e.t)try{if(null==zc[t]&&xd(Nd[t]||"General",t),"e"===e.t)e.w=e.w||tp[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=Xc(e.v);else if("d"===e.t){var i=Md(e.v);e.w=(0|i)===i?i.toString(10):Xc(i)}else{if(void 0===e.v)return"";e.w=Jc(e.v,vb)}else"d"===e.t?e.w=bd(t,Md(e.v),vb):e.w=bd(t,e.v,vb)}catch(f2){if(n.WTF)throw f2}if(n.cellStyles&&null!=r)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=_g(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=_g(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(f2){if(n.WTF&&s.Fills)throw f2}}}function _b(e,t,r){if(e&&e["!ref"]){var n=pf(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}var Sb=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,kb=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Ab=/<(?:\w:)?hyperlink [^>]*>/gm,Eb=/"(\w*:\w*)"/,Cb=/<(?:\w:)?col\b[^>]*[\/]?>/g,Tb=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Pb=/<(?:\w:)?pageMargins[^>]*\/>/g,Db=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Ob=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ib=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Mb(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",u=e.match(kb);u?(c=e.slice(0,u.index),d=e.slice(u.index+u[0].length)):c=d=e;var h=c.match(Db);h?Rb(h[0],o,a,r):(h=c.match(Ob))&&function(e,t,r,n,a){Rb(e.slice(0,e.indexOf(">")),r,n,a)}(h[0],h[1],o,a,r);var f=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var p=c.slice(f,f+50).match(Eb);p&&function(e,t){var r=pf(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=ff(r))}(o,p[1])}var m=c.match(Ib);m&&m[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(Bb)||[]).forEach(function(e,r){var n=gu(e);t.Views[r]||(t.Views[r]={}),+n.zoomScale&&(t.Views[r].zoom=+n.zoomScale),Eu(n.rightToLeft)&&(t.Views[r].RTL=!0)})}(m[1],a);var g=[];if(t.cellStyles){var v=c.match(Cb);v&&function(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=gu(t[n],!0);a.hidden&&(a.hidden=Eu(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,Tg(a.width)),Pg(a);s<=i;)e[s++]=Gd(a)}}(g,v)}u&&Ub(u[1],o,t,l,s,i);var b=d.match(Tb);b&&(o["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(b[0]));var x=[],y=d.match(Sb);if(y)for(f=0;f!=y.length;++f)x[f]=pf(y[f].slice(y[f].indexOf('"')+1));var w=d.match(Ab);w&&function(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=gu(Ou(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+yu(s.location))):(s.Target="#"+yu(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=pf(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=uf({c:c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}(o,w,n);var j=d.match(Pb);if(j&&(o["!margins"]=function(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}(gu(j[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=ff(l)),t.sheetRows>0&&o["!ref"]){var N=pf(o["!ref"]);t.sheetRows<=+N.e.r&&(N.e.r=t.sheetRows-1,N.e.r>l.e.r&&(N.e.r=l.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>l.e.c&&(N.e.c=l.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),o["!fullref"]=o["!ref"],o["!ref"]=ff(N))}return g.length>0&&(o["!cols"]=g),x.length>0&&(o["!merges"]=x),o}function Rb(e,t,r,n){var a=gu(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=yu(Ou(a.codeName)))}var Lb=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Fb=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];var Bb=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function zb(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var a="",s=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=tp[e.v];break;case"d":n&&n.cellDates?a=Hd(e.v,-1).toISOString():((e=Gd(e)).t="n",a=""+(e.v=Md(Hd(e.v)))),"undefined"===typeof e.z&&(e.z=zc[14]);break;default:a=e.v}var o=qu("v",Nu(a)),l={r:t},c=jb(n.cellXfs,e,n);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=qu("v",""+xb(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=i),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Hu("f",Nu(e.f),d)+(null!=e.v?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Hu("c",o,l)}var Ub=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Mu("v"),i=Mu("f");return function(o,l,c,d,u,h){for(var f,p,m,g,v,b=0,x="",y=[],w=[],j=0,N=0,_=0,S="",k=0,A=0,E=0,C=0,T=Array.isArray(h.CellXf),P=[],D=[],O=Array.isArray(l),I=[],M={},R=!1,L=!!c.sheetStubs,F=o.split(t),B=0,z=F.length;B!=z;++B){var U=(x=F[B].trim()).length;if(0!==U){var q=0;e:for(b=0;b<U;++b)switch(x[b]){case">":if("/"!=x[b-1]){++b;break e}if(c&&c.cellStyles){if(k=null!=(p=gu(x.slice(q,b),!0)).r?parseInt(p.r,10):k+1,A=-1,c.sheetRows&&c.sheetRows<k)continue;M={},R=!1,p.ht&&(R=!0,M.hpt=parseFloat(p.ht),M.hpx=Ig(M.hpt)),"1"==p.hidden&&(R=!0,M.hidden=!0),null!=p.outlineLevel&&(R=!0,M.level=+p.outlineLevel),R&&(I[k-1]=M)}break;case"<":q=b}if(q>=b)break;if(k=null!=(p=gu(x.slice(q,b),!0)).r?parseInt(p.r,10):k+1,A=-1,!(c.sheetRows&&c.sheetRows<k)){d.s.r>k-1&&(d.s.r=k-1),d.e.r<k-1&&(d.e.r=k-1),c&&c.cellStyles&&(M={},R=!1,p.ht&&(R=!0,M.hpt=parseFloat(p.ht),M.hpx=Ig(M.hpt)),"1"==p.hidden&&(R=!0,M.hidden=!0),null!=p.outlineLevel&&(R=!0,M.level=+p.outlineLevel),R&&(I[k-1]=M)),y=x.slice(b).split(e);for(var W=0;W!=y.length&&"<"==y[W].trim().charAt(0);++W);for(y=y.slice(W),b=0;b!=y.length;++b)if(0!==(x=y[b].trim()).length){if(w=x.match(r),j=b,N=0,_=0,x="<c "+("<"==x.slice(0,1)?">":"")+x,null!=w&&2===w.length){for(j=0,S=w[1],N=0;N!=S.length&&!((_=S.charCodeAt(N)-64)<1||_>26);++N)j=26*j+_;A=--j}else++A;for(N=0;N!=x.length&&62!==x.charCodeAt(N);++N);if(++N,(p=gu(x.slice(0,N),!0)).r||(p.r=uf({r:k-1,c:A})),f={t:""},null!=(w=(S=x.slice(N)).match(s))&&""!==w[1]&&(f.v=yu(w[1])),c.cellFormula){if(null!=(w=S.match(i))&&""!==w[1]){if(f.f=yu(Ou(w[1])).replace(/\r\n/g,"\n"),c.xlfn||(f.f=Av(f.f)),w[0].indexOf('t="array"')>-1)f.F=(S.match(a)||[])[1],f.F.indexOf(":")>-1&&P.push([pf(f.F),f.F]);else if(w[0].indexOf('t="shared"')>-1){g=gu(w[0]);var H=yu(Ou(w[1]));c.xlfn||(H=Av(H)),D[parseInt(g.si,10)]=[g,H,p.r]}}else(w=S.match(/<f[^>]*\/>/))&&D[(g=gu(w[0])).si]&&(f.f=kv(D[g.si][1],D[g.si][2],p.r));var V=df(p.r);for(N=0;N<P.length;++N)V.r>=P[N][0].s.r&&V.r<=P[N][0].e.r&&V.c>=P[N][0].s.c&&V.c<=P[N][0].e.c&&(f.F=P[N][1])}if(null==p.t&&void 0===f.v)if(f.f||f.F)f.v=0,f.t="n";else{if(!L)continue;f.t="z"}else f.t=p.t||"n";switch(d.s.c>A&&(d.s.c=A),d.e.c<A&&(d.e.c=A),f.t){case"n":if(""==f.v||null==f.v){if(!L)continue;f.t="z"}else f.v=parseFloat(f.v);break;case"s":if("undefined"==typeof f.v){if(!L)continue;f.t="z"}else m=gb[parseInt(f.v,10)],f.v=m.t,f.r=m.r,c.cellHTML&&(f.h=m.h);break;case"str":f.t="s",f.v=null!=f.v?Ou(f.v):"",c.cellHTML&&(f.h=ku(f.v));break;case"inlineStr":w=S.match(n),f.t="s",null!=w&&(m=tg(w[1]))?(f.v=m.t,c.cellHTML&&(f.h=m.h)):f.v="";break;case"b":f.v=Eu(f.v);break;case"d":c.cellDates?f.v=Hd(f.v,1):(f.v=Md(Hd(f.v,1)),f.t="n");break;case"e":c&&!1===c.cellText||(f.w=f.v),f.v=rp[f.v]}if(E=C=0,v=null,T&&void 0!==p.s&&null!=(v=h.CellXf[p.s])&&(null!=v.numFmtId&&(E=v.numFmtId),c.cellStyles&&null!=v.fillId&&(C=v.fillId)),Nb(f,E,C,c,u,h),c.cellDates&&T&&"n"==f.t&&pd(zc[E])&&(f.t="d",f.v=Bd(f.v)),p.cm&&c.xlmeta){var G=(c.xlmeta.Cell||[])[+p.cm-1];G&&"XLDAPR"==G.type&&(f.D=!0)}if(O){var K=df(p.r);l[K.r]||(l[K.r]=[]),l[K.r][K.c]=f}else l[p.r]=f}}}}I.length>0&&(l["!rows"]=I)}}();function qb(e,t,r,n){var a,s=[du,Hu("worksheet",null,{xmlns:oh[0],"xmlns:r":nh})],i=r.SheetNames[e],o="",l=r.Sheets[i];null==l&&(l={});var c=l["!ref"]||"A1",d=pf(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=ff(d)}n||(n={}),l["!comments"]=[];var u=[];!function(e,t,r,n,a){var s=!1,i={},o=null;if("xlsx"!==n.bookType&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch(f2){}s=!0,i.codeName=Iu(Nu(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+Hu("outlinePr",null,c)}(s||o)&&(a[a.length]=Hu("sheetPr",o,i))}(l,r,e,t,s),s[s.length]=Hu("dimension",null,{ref:c}),s[s.length]=function(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Hu("sheetViews",Hu("sheetView",null,a),{})}(0,0,0,r),t.sheetFormat&&(s[s.length]=Hu("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var r,n=["<cols>"],a=0;a!=t.length;++a)(r=t[a])&&(n[n.length]=Hu("col",null,yb(a,r)));return n[n.length]="</cols>",n.join("")}(0,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var r,n,a=[],s=[],i=pf(e["!ref"]),o="",l="",c=[],d=0,u=0,h=e["!rows"],f=Array.isArray(e),p={r:l},m=-1;for(u=i.s.c;u<=i.e.c;++u)c[u]=cf(u);for(d=i.s.r;d<=i.e.r;++d){for(s=[],l=of(d),u=i.s.c;u<=i.e.c;++u){r=c[u]+l;var g=f?(e[d]||[])[u]:e[r];void 0!==g&&null!=(o=zb(g,r,e,t))&&s.push(o)}(s.length>0||h&&h[d])&&(p={r:l},h&&h[d]&&((n=h[d]).hidden&&(p.hidden=1),m=-1,n.hpx?m=Og(n.hpx):n.hpt&&(m=n.hpt),m>-1&&(p.ht=m,p.customHeight=1),n.level&&(p.outlineLevel=n.level)),a[a.length]=Hu("row",s.join(""),p))}if(h)for(;d<h.length;++d)h&&h[d]&&(p={r:d+1},(n=h[d]).hidden&&(p.hidden=1),m=-1,n.hpx?m=Og(n.hpx):n.hpt&&(m=n.hpt),m>-1&&(p.ht=m,p.customHeight=1),n.level&&(p.outlineLevel=n.level),a[a.length]=Hu("row","",p));return a.join("")}(l,t,0,0),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return Lb.forEach(function(r){null!=e[r]&&e[r]&&(t[r]="1")}),Fb.forEach(function(r){null==e[r]||e[r]||(t[r]="0")}),e.password&&(t.password=bg(e.password).toString(16).toUpperCase()),Hu("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,r,n){var a="string"==typeof e.ref?e.ref:ff(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=hf(a);i.s.r==i.e.r&&(i.e.r=hf(t["!ref"]).e.r,a=ff(i));for(var o=0;o<s.length;++o){var l=s[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Hu("autoFilter",null,{ref:a})}(l["!autofilter"],l,r,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+ff(e[r])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,f,p=-1,m=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=dp(n,-1,Nu(e[1].Target).replace(/#.*$/,""),ip.HLINK),h["r:id"]="rId"+m),(p=e[1].Target.indexOf("#"))>-1&&(h.location=Nu(e[1].Target.slice(p+1))),e[1].Tooltip&&(h.tooltip=Nu(e[1].Tooltip)),s[s.length]=Hu("hyperlink",null,h))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(wb(f=l["!margins"]),Hu("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=qu("ignoredErrors",Hu("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(m=dp(n,-1,"../drawings/drawing"+(e+1)+".xml",ip.DRAW),s[s.length]=Hu("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=u),l["!comments"].length>0&&(m=dp(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ip.VML),s[s.length]=Hu("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Wb(e,t,r,n){var a=function(e,t,r){var n=Jh(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=20*Og(a.hpx):a.hpt&&(s=20*a.hpt),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,h=-1,f=d<<10;f<d+1<<10;++f)c.c=f,(Array.isArray(r)?(r[c.r]||[])[c.c]:r[uf(c)])&&(u<0&&(u=f),h=f);u<0||(++o,n.write_shift(4,u),n.write_shift(4,h))}var p=n.l;return n.l=l,n.write_shift(4,o),n.l=p,n.length>n.l?n.slice(0,n.l):n}(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&ef(e,0,a)}var Hb=Uf,Vb=qf;function Gb(e){return[Cf(e),Wf(e),"n"]}var Kb=Uf,$b=qf;var Yb=["left","right","top","bottom","header","footer"];function Xb(e,t,r,n,a,s,i){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=Gd(t)).z=t.z||zc[14],t.v=Md(Hd(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:r,c:n};switch(l.s=jb(a.cellXfs,t,a),t.l&&s["!links"].push([uf(l),t.l]),t.c&&s["!comments"].push([uf(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=xb(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?ef(e,18,function(e,t,r){return null==r&&(r=Jh(8)),Tf(t,r),r.write_shift(4,t.v),r}(0,l)):ef(e,7,function(e,t,r){return null==r&&(r=Jh(12)),Ef(t,r),r.write_shift(4,t.v),r}(0,l))):(l.t="str",i?ef(e,17,function(e,t,r){return null==r&&(r=Jh(8+4*e.v.length)),Tf(t,r),jf(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l)):ef(e,6,function(e,t,r){return null==r&&(r=Jh(12+4*e.v.length)),Ef(t,r),jf(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?ef(e,13,function(e,t,r){return null==r&&(r=Jh(8)),Tf(t,r),Bf(e.v,r),r}(t,l)):ef(e,2,function(e,t,r){return null==r&&(r=Jh(12)),Ef(t,r),Bf(e.v,r),r}(t,l)):i?ef(e,16,function(e,t,r){return null==r&&(r=Jh(12)),Tf(t,r),Hf(e.v,r),r}(t,l)):ef(e,5,function(e,t,r){return null==r&&(r=Jh(16)),Ef(t,r),Hf(e.v,r),r}(t,l)),!0;case"b":return l.t="b",i?ef(e,15,function(e,t,r){return null==r&&(r=Jh(5)),Tf(t,r),r.write_shift(1,e.v?1:0),r}(t,l)):ef(e,4,function(e,t,r){return null==r&&(r=Jh(9)),Ef(t,r),r.write_shift(1,e.v?1:0),r}(t,l)),!0;case"e":return l.t="e",i?ef(e,14,function(e,t,r){return null==r&&(r=Jh(8)),Tf(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}(t,l)):ef(e,3,function(e,t,r){return null==r&&(r=Jh(9)),Ef(t,r),r.write_shift(1,e.v),r}(t,l)),!0}return i?ef(e,12,function(e,t,r){return null==r&&(r=Jh(4)),Tf(t,r)}(0,l)):ef(e,1,function(e,t,r){return null==r&&(r=Jh(8)),Ef(t,r)}(0,l)),!0}function Jb(e,t){t&&t["!merges"]&&(ef(e,177,function(e,t){return null==t&&(t=Jh(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach(function(t){ef(e,176,$b(t))}),ef(e,178))}function Zb(e,t){t&&t["!cols"]&&(ef(e,390),t["!cols"].forEach(function(t,r){t&&ef(e,60,function(e,t,r){null==r&&(r=Jh(18));var n=yb(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,256*(n.width||10)),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),"number"==typeof n.width&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}(r,t))}),ef(e,391))}function Qb(e,t){t&&t["!ref"]&&(ef(e,648),ef(e,649,function(e){var t=Jh(24);return t.write_shift(4,4),t.write_shift(4,1),qf(e,t),t}(pf(t["!ref"]))),ef(e,650))}function ex(e,t,r){t["!links"].forEach(function(t){if(t[1].Target){var n=dp(r,-1,t[1].Target.replace(/#.*$/,""),ip.HLINK);ef(e,494,function(e,t){var r=Jh(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));qf({s:df(e[0]),e:df(e[0])},r),Lf("rId"+t,r);var n=e[1].Target.indexOf("#");return jf((-1==n?"":e[1].Target.slice(n+1))||"",r),jf(e[1].Tooltip||"",r),jf("",r),r.slice(0,r.l)}(t,n))}}),delete t["!links"]}function tx(e,t,r){ef(e,133),ef(e,137,function(e,t,r){null==r&&(r=Jh(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}(0,r)),ef(e,138),ef(e,134)}function rx(e,t){t["!protect"]&&ef(e,535,function(e,t){return null==t&&(t=Jh(66)),t.write_shift(2,e.password?bg(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,null==e[r[0]]||e[r[0]]?0:1):t.write_shift(4,null!=e[r[0]]&&e[r[0]]?0:1)}),t}(t["!protect"]))}function nx(e,t,r,n){var a=Qh(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch(f2){}var l=pf(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],ef(a,129),(r.vbaraw||i["!outline"])&&ef(a,147,function(e,t,r){null==r&&(r=Jh(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Vf({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Df(e,r),r.slice(0,r.l)}(o,i["!outline"])),ef(a,148,Vb(l)),tx(a,0,r.Workbook),Zb(a,i),function(e,t,r,n){var a,s=pf(t["!ref"]||"A1"),i="",o=[];ef(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=c;++d){i=of(d),Wb(e,t,s,d);var u=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=cf(h)),a=o[h]+i;var f=l?(t[d]||[])[h]:t[a];u=!!f&&Xb(e,f,d,h,n,t,u)}}ef(e,146)}(a,i,0,t),rx(a,i),function(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s="string"===typeof a.ref?a.ref:ff(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=hf(s);o.s.r==o.e.r&&(o.e.r=hf(t["!ref"]).e.r,s=ff(o));for(var l=0;l<i.length;++l){var c=i[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ef(e,161,qf(pf(s))),ef(e,162)}}(a,i,r,e),Jb(a,i),ex(a,i,n),i["!margins"]&&ef(a,476,function(e,t){return null==t&&(t=Jh(48)),wb(e),Yb.forEach(function(r){Hf(e[r],t)}),t}(i["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||Qb(a,i),function(e,t,r,n){if(t["!comments"].length>0){var a=dp(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ip.VML);ef(e,551,Lf("rId"+a)),t["!legacy"]=a}}(a,i,e,n),ef(a,130),a.end()}function ax(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(e){var t=function(e){var t,r=[],n=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach(function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(r[+t[1]]=n?+t[2]:t[2])});var a=yu((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach(function(e){t=e.replace(/<.*?>/g,"")}),[r,a,t]}(e);d.s.r=d.s.c=0,d.e.c=o,c=cf(o),t[0].forEach(function(e,r){i[c+of(r)]={t:"n",v:e,z:t[1]},l=r}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=ff(d)),i}var sx=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ix=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ox=[],lx=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function cx(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(null==n[s[0]])n[s[0]]=s[1];else switch(s[2]){case"bool":"string"==typeof n[s[0]]&&(n[s[0]]=Eu(n[s[0]]));break;case"int":"string"==typeof n[s[0]]&&(n[s[0]]=parseInt(n[s[0]],10))}}}function dx(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(null==e[n[0]])e[n[0]]=n[1];else switch(n[2]){case"bool":"string"==typeof e[n[0]]&&(e[n[0]]=Eu(e[n[0]]));break;case"int":"string"==typeof e[n[0]]&&(e[n[0]]=parseInt(e[n[0]],10))}}}function ux(e){dx(e.WBProps,sx),dx(e.CalcPr,lx),cx(e.WBView,ix),cx(e.Sheets,ox),vb.date1904=Eu(e.WBProps.date1904)}var hx="][*?/\\".split("");function fx(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return hx.forEach(function(n){if(-1!=e.indexOf(n)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function px(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,r){e.forEach(function(n,a){fx(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)_b(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var mx=/<\w+:workbook/;function gx(e){var t=[du];t[t.length]=Hu("workbook",null,{xmlns:oh[0],"xmlns:r":nh});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(sx.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(n[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Hu("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&a[s]&&a[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:Nu(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=Hu("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var r={name:e.Name};e.Comment&&(r.comment=e.Comment),null!=e.Sheet&&(r.localSheetId=""+e.Sheet),e.Hidden&&(r.hidden="1"),e.Ref&&(t[t.length]=Hu("definedName",Nu(e.Ref),r))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function vx(e,t){return t||(t=Jh(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),Lf(e.strRelID,t),jf(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function bx(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function xx(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&-1==a?a=n:1==r[n].Hidden&&-1==s&&(s=n);s>a||(ef(e,135),ef(e,158,function(e,t){return t||(t=Jh(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(a)),ef(e,136))}}function yx(e,t){var r=Qh();return ef(r,131),ef(r,128,function(e,t){t||(t=Jh(127));for(var r=0;4!=r;++r)t.write_shift(4,0);return jf("SheetJS",t),jf(nc.version,t),jf(nc.version,t),jf("7262",t),t.length>t.l?t.slice(0,t.l):t}()),ef(r,153,function(e,t){t||(t=Jh(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Df(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),xx(r,e),function(e,t){ef(e,143);for(var r=0;r!=t.SheetNames.length;++r)ef(e,156,vx({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]}));ef(e,144)}(r,e),ef(r,132),r.end()}function wx(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],oy[16]={n:"BrtFRTArchID$",f:bx},Zh(e,function(e,o,l){switch(l){case 156:i.SheetNames.push(e.name),r.Sheets.push(e);break;case 153:r.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=Qv(e.Ptg,0,null,i,t),delete t.SID,delete e.Ptg,s.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:i[0].length?i.push([l,e]):i[0]=[l,e],i[i.length-1].XTI=[];break;case 362:0===i.length&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(e),i.XTI=i.XTI.concat(e);break;case 35:case 37:n.push(l),a=!0;break;case 36:case 38:n.pop(),a=!1;break;default:if(o.T);else if(!a||t.WTF&&37!=n[n.length-1]&&35!=n[n.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}},t),ux(r),r.Names=s,r.supbooks=i,r}(e,r):function(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(fu,function(o,l){var c=gu(o);switch(vu(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":o.match(mx)&&(a="xmlns"+o.match(/<(\w+):/)[1]),r.xmlns=c[a];break;case"<fileVersion":delete c[0],r.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":sx.forEach(function(e){if(null!=c[e[0]])switch(e[2]){case"bool":r.WBProps[e[0]]=Eu(c[e[0]]);break;case"int":r.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:r.WBProps[e[0]]=c[e[0]]}}),c.codeName&&(r.WBProps.CodeName=Ou(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],r.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=yu(Ou(c.name)),delete c[0],r.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":n=!1;break;case"<definedName":(s={}).Name=Ou(c.name),c.comment&&(s.Comment=c.comment),c.localSheetId&&(s.Sheet=+c.localSheetId),Eu(c.hidden||"0")&&(s.Hidden=!0),i=l+o.length;break;case"</definedName>":s.Ref=yu(Ou(e.slice(i,l))),r.Names.push(s);break;case"<calcPr":case"<calcPr/>":delete c[0],r.CalcPr=c;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return o}),-1===oh.indexOf(r.xmlns))throw new Error("Unknown Namespace: "+r.xmlns);return ux(r),r}(e,r)}function jx(e,t,r,n,a,s,i,o){return".bin"===t.slice(-4)?function(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l,c,d,u,h,f,p,m,g,v,b=o.dense?[]:{},x={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=[],w=!1,j=!1,N=[];o.biff=12,o["!row"]=0;var _=0,S=!1,k=[],A={},E=o.supbooks||a.supbooks||[[]];if(E.sharedf=A,E.arrayf=k,E.SheetNames=a.SheetNames||a.Sheets.map(function(e){return e.name}),!o.supbooks&&(o.supbooks=E,a.Names))for(var C=0;C<a.Names.length;++C)E[0][C+1]=a.Names[C];var T,P,D=[],O=[],I=!1;if(oy[16]={n:"BrtShortReal",f:Gb},Zh(e,function(e,t,C){if(!j)switch(C){case 148:l=e;break;case 0:c=e,o.sheetRows&&o.sheetRows<=c.r&&(j=!0),g=of(h=c.r),o["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=Ig(e.hpt)),O[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(d={t:e[2]},e[2]){case"n":d.v=e[1];break;case"s":m=gb[e[1]],d.v=m.t,d.r=m.r;break;case"b":d.v=!!e[1];break;case"e":d.v=e[1],!1!==o.cellText&&(d.w=tp[d.v]);break;case"str":d.t="s",d.v=e[1];break;case"is":d.t="s",d.v=e[1].t}if((u=i.CellXf[e[0].iStyleRef])&&Nb(d,u.numFmtId,null,o,s,i),f=-1==e[0].c?f+1:e[0].c,o.dense?(b[h]||(b[h]=[]),b[h][f]=d):b[cf(f)+g]=d,o.cellFormula){for(S=!1,_=0;_<k.length;++_){var M=k[_];c.r>=M[0].s.r&&c.r<=M[0].e.r&&f>=M[0].s.c&&f<=M[0].e.c&&(d.F=ff(M[0]),S=!0)}!S&&e.length>3&&(d.f=e[3])}if(x.s.r>c.r&&(x.s.r=c.r),x.s.c>f&&(x.s.c=f),x.e.r<c.r&&(x.e.r=c.r),x.e.c<f&&(x.e.c=f),o.cellDates&&u&&"n"==d.t&&pd(zc[u.numFmtId])){var R=Hc(d.v);R&&(d.t="d",d.v=new Date(R.y,R.m-1,R.d,R.H,R.M,R.S,R.u))}T&&("XLDAPR"==T.type&&(d.D=!0),T=void 0),P&&(P=void 0);break;case 1:case 12:if(!o.sheetStubs||w)break;d={t:"z",v:void 0},f=-1==e[0].c?f+1:e[0].c,o.dense?(b[h]||(b[h]=[]),b[h][f]=d):b[cf(f)+g]=d,x.s.r>c.r&&(x.s.r=c.r),x.s.c>f&&(x.s.c=f),x.e.r<c.r&&(x.e.r=c.r),x.e.c<f&&(x.e.c=f),T&&("XLDAPR"==T.type&&(d.D=!0),T=void 0),P&&(P=void 0);break;case 176:N.push(e);break;case 49:T=((o.xlmeta||{}).Cell||[])[e-1];break;case 494:var L=n["!id"][e.relId];for(L?(e.Target=L.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=L):""==e.relId&&(e.Target="#"+e.loc),h=e.rfx.s.r;h<=e.rfx.e.r;++h)for(f=e.rfx.s.c;f<=e.rfx.e.c;++f)o.dense?(b[h]||(b[h]=[]),b[h][f]||(b[h][f]={t:"z",v:void 0}),b[h][f].l=e):(p=uf({c:f,r:h}),b[p]||(b[p]={t:"z",v:void 0}),b[p].l=e);break;case 426:if(!o.cellFormula)break;k.push(e),(v=o.dense?b[h][f]:b[cf(f)+g]).f=Qv(e[1],0,{r:c.r,c:f},E,o),v.F=ff(e[0]);break;case 427:if(!o.cellFormula)break;A[uf(e[0].s)]=e[1],(v=o.dense?b[h][f]:b[cf(f)+g]).f=Qv(e[1],0,{r:c.r,c:f},E,o);break;case 60:if(!o.cellStyles)break;for(;e.e>=e.s;)D[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},I||(I=!0,Tg(e.w/256)),Pg(D[e.e+1]);break;case 161:b["!autofilter"]={ref:ff(e)};break;case 476:b["!margins"]=e;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),e.name&&(a.Sheets[r].CodeName=e.name),(e.above||e.left)&&(b["!outline"]={above:e.above,left:e.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),e.RTL&&(a.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:w=!0;break;case 36:w=!1;break;case 37:y.push(C),w=!0;break;case 38:y.pop(),w=!1;break;default:if(t.T);else if(!w||o.WTF)throw new Error("Unexpected record 0x"+C.toString(16))}},o),delete o.supbooks,delete o["!row"],!b["!ref"]&&(x.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(b["!ref"]=ff(l||x)),o.sheetRows&&b["!ref"]){var M=pf(b["!ref"]);o.sheetRows<=+M.e.r&&(M.e.r=o.sheetRows-1,M.e.r>x.e.r&&(M.e.r=x.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>x.e.c&&(M.e.c=x.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),b["!fullref"]=b["!ref"],b["!ref"]=ff(M))}return N.length>0&&(b["!merges"]=N),D.length>0&&(b["!cols"]=D),O.length>0&&(b["!rows"]=O),b}(e,n,r,a,s,i,o):Mb(e,n,r,a,s,i,o)}function Nx(e,t,r,n,a,s,i,o){return".bin"===t.slice(-4)?function(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=[],o=!1;return Zh(e,function(e,n,l){switch(l){case 550:s["!rel"]=e;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),e.name&&(a.Sheets[r].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(l);break;case 38:i.pop();break;default:if(n.T>0)i.push(l);else if(n.T<0)i.pop();else if(!o||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}(e,n,r,a,s):function(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s,i={"!type":"chart","!drawel":null,"!rel":""},o=e.match(Db);return o&&Rb(o[0],0,a,r),(s=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=s[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}(e,0,r,a,s)}function _x(e,t,r,n){return".bin"===t.slice(-4)?function(e,t,r){var n={NumberFmt:[]};for(var a in zc)n.NumberFmt[a]=zc[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Zh(e,function(e,a,o){switch(o){case 44:n.NumberFmt[e[0]]=e[1],xd(e[1],e[0]);break;case 43:n.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=_g(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==s[s.length-1]&&n.CellXf.push(e);break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(o),i=!0;break;case 38:s.pop(),i=!1;break;default:if(a.T>0)s.push(o);else if(a.T<0)s.pop();else if(!i||r.WTF&&37!=s[s.length-1])throw new Error("Unexpected record 0x"+o.toString(16))}}),n}(e,r,n):Fg(e,r,n)}function Sx(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r=[],n=!1;return Zh(e,function(e,a,s){switch(s){case 159:r.Count=e[0],r.Unique=e[1];break;case 19:r.push(e);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||t.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}}),r}(e,r):function(e,t){var r=[],n="";if(!e)return r;var a=e.match(rg);if(a){n=a[2].replace(ng,"").split(ag);for(var s=0;s!=n.length;++s){var i=tg(n[s].trim(),t);null!=i&&(r[r.length]=i)}a=gu(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}(e,r)}function kx(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r=[],n=[],a={},s=!1;return Zh(e,function(e,i,o){switch(o){case 632:n.push(e);break;case 635:a=e;break;case 637:a.t=e.t,a.h=e.h,a.r=e.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:case 37:case 38:break;case 35:s=!0;break;case 36:s=!1;break;default:if(i.T);else if(!s||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}(e,r):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&r.push(t[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(e){if(""!==e&&""!==e.trim()){var a=e.match(/<(?:\w+:)?comment[^>]*>/);if(a){var s=gu(a[0]),i={author:s.authorId&&r[s.authorId]||"sheetjsghost",ref:s.ref,guid:s.guid},o=df(s.ref);if(!(t.sheetRows&&t.sheetRows<=o.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&tg(l[1])||{r:"",t:"",h:""};i.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),i.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(i.h=c.h),n.push(i)}}}}),n}(e,r)}function Ax(e,t,r){return".bin"===t.slice(-4)?function(e){var t=[];return Zh(e,function(e,r,n){if(63===n)t.push(e);else if(!r.T)throw new Error("Unexpected record 0x"+n.toString(16))}),t}(e):function(e){var t=[];if(!e)return t;var r=1;return(e.match(fu)||[]).forEach(function(e){var n=gu(e);switch(n[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n)}}),t}(e)}function Ex(e,t,r,n){if(".bin"===r.slice(-4))return function(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Zh(e,function(e,t,r){switch(r){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(t.T);else if(!s||a.WTF)throw new Error("Unexpected record 0x"+r.toString(16))}},a)}(e,0,0,n)}function Cx(e,t,r){return".bin"===t.slice(-4)?function(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Zh(e,function(e,t,r){switch(r){case 335:n.Types.push({name:e.name});break;case 51:e.forEach(function(e){1==o?n.Cell.push({type:n.Types[e[0]-1].name,index:e[1]}):0==o&&n.Value.push({type:n.Types[e[0]-1].name,index:e[1]})});break;case 337:o=e?1:0;break;case 338:o=2;break;case 35:s.push(r),i=!0;break;case 36:s.pop(),i=!1;break;default:if(t.T);else if(!i||a.WTF&&35!=s[s.length-1])throw new Error("Unexpected record 0x"+r.toString(16))}}),n}(e,0,r):function(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a,s=!1,i=2;return e.replace(fu,function(e){var t=gu(e);switch(vu(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":n.Types.push({name:t.name});break;case"<futureMetadata":for(var o=0;o<n.Types.length;++o)n.Types[o].name==t.name&&(a=n.Types[o]);break;case"<rc":1==i?n.Cell.push({type:n.Types[t.t-1].name,index:+t.v}):0==i&&n.Value.push({type:n.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":i=1;break;case"</cellMetadata>":case"</valueMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+t.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e}),n}(e,0,r)}function Tx(e,t,r,n,a){return(".bin"===t.slice(-4)?nx:qb)(e,r,n,a)}function Px(e,t,r){return(".bin"===t.slice(-4)?yv:vv)(e,r)}var Dx,Ox=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Ix=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Mx(e,t){var r=e.split(/\s+/),n=[];if(t||(n[0]=r[0]),1===r.length)return n;var a,s,i,o=e.match(Ox);if(o)for(i=0;i!=o.length;++i)-1===(s=(a=o[i].match(Ix))[1].indexOf(":"))?n[a[1]]=a[2].slice(1,a[2].length-1):n["xmlns:"===a[1].slice(0,6)?"xmlns"+a[1].slice(6):a[1].slice(s+1)]=a[2].slice(1,a[2].length-1);return n}function Rx(e){var t={};if(1===e.split(/\s+/).length)return t;var r,n,a,s=e.match(Ox);if(s)for(a=0;a!=s.length;++a)-1===(n=(r=s[a].match(Ix))[1].indexOf(":"))?t[r[1]]=r[2].slice(1,r[2].length-1):t["xmlns:"===r[1].slice(0,6)?"xmlns"+r[1].slice(6):r[1].slice(n+1)]=r[2].slice(1,r[2].length-1);return t}function Lx(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Eu(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Hd(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[yu(t)]=a}function Fx(e,t,r){if("z"!==e.t){if(!r||!1!==r.cellText)try{"e"===e.t?e.w=e.w||tp[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=Xc(e.v):e.w=Jc(e.v):e.w=function(e,t){var r=Dx[e]||yu(e);return"General"===r?Jc(t):bd(r,t)}(t||"General",e.v)}catch(f2){if(r.WTF)throw f2}try{var n=Dx[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&"n"==e.t&&pd(n)){var a=Hc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(f2){if(r.WTF)throw f2}}}function Bx(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Mg[n.Pattern]||n.Pattern)}e[t.ID]=t}function zx(e,t,r,n,a,s,i,o,l,c){var d="General",u=n.StyleID,h={};c=c||{};var f=[],p=0;for(void 0===u&&o&&(u=o.StyleID),void 0===u&&i&&(u=i.StyleID);void 0!==s[u]&&(s[u].nf&&(d=s[u].nf),s[u].Interior&&f.push(s[u].Interior),s[u].Parent);)u=s[u].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Eu(e);break;case"String":n.t="s",n.r=Au(yu(e)),n.v=e.indexOf("<")>-1?yu(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),n.v=(Hd(e)-new Date(Date.UTC(1899,11,30)))/864e5,n.v!==n.v?n.v=yu(e):n.v<60&&(n.v=n.v-1),d&&"General"!=d||(d="yyyy-mm-dd");case"Number":void 0===n.v&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=rp[e],!1!==c.cellText&&(n.w=e);break;default:""==e&&""==t?n.t="z":(n.t="s",n.v=Au(t||e))}if(Fx(n,d,c),!1!==c.cellFormula)if(n.Formula){var m=yu(n.Formula);61==m.charCodeAt(0)&&(m=m.slice(1)),n.f=jv(m,a),delete n.Formula,"RC"==n.ArrayRange?n.F=jv("RC:RC",a):n.ArrayRange&&(n.F=jv(n.ArrayRange,a),l.push([pf(n.F),n.F]))}else for(p=0;p<l.length;++p)a.r>=l[p][0].s.r&&a.r<=l[p][0].e.r&&a.c>=l[p][0].s.c&&a.c<=l[p][0].e.c&&(n.F=l[p][1]);c.cellStyles&&(f.forEach(function(e){!h.patternType&&e.patternType&&(h.patternType=e.patternType)}),n.s=h),void 0!==n.StyleID&&(n.ixfe=n.StyleID)}function Ux(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function qx(e,t){var r=t||{};wd();var n=pc(Gu(e));"binary"!=r.type&&"array"!=r.type&&"base64"!=r.type||(n="undefined"!==typeof fc?fc.utils.decode(65001,uc(n)):Ou(n));var a,s=n.slice(0,1024).toLowerCase(),i=!1;if((1023&(s=s.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&s.indexOf(","),1023&s.indexOf(";"))){var o=Gd(r);return o.type="string",$m.to_workbook(n,o)}if(-1==s.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach(function(e){s.indexOf("<"+e)>=0&&(i=!0)}),i)return function(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||0==r.length)throw new Error("Invalid HTML: could not find <table>");if(1==r.length)return vf(xy(r[0],t),t);var n={SheetNames:[],Sheets:{}};return r.forEach(function(e,r){Fw(n,xy(e,t),"Sheet"+(r+1))}),n}(n,r);Dx={"General Number":"General","General Date":zc[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":zc[15],"Short Date":zc[14],"Long Time":zc[19],"Medium Time":zc[18],"Short Time":zc[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:zc[2],Standard:zc[4],Percent:zc[10],Scientific:zc[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[];var d,u={},h=[],f=r.dense?[]:{},p="",m={},g={},v=Mx('<Data ss:Type="String">'),b=0,x=0,y=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},N={},_="",S=0,k=[],A={},E={},C=0,T=[],P=[],D={},O=[],I=!1,M=[],R=[],L={},F=0,B=0,z={Sheets:[],WBProps:{date1904:!1}},U={};Ku.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/gm,"");for(var q="";a=Ku.exec(n);)switch(a[3]=(q=a[3]).toLowerCase()){case"data":if("data"==q){if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break}if(c[c.length-1][1])break;"/"===a[1]?zx(n.slice(b,a.index),_,v,"comment"==c[c.length-1][0]?D:m,{c:x,r:y},j,O[x],g,M,r):(_="",v=Mx(a[0]),b=a.index+a[0].length);break;case"cell":if("/"===a[1])if(P.length>0&&(m.c=P),(!r.sheetRows||r.sheetRows>y)&&void 0!==m.v&&(r.dense?(f[y]||(f[y]=[]),f[y][x]=m):f[cf(x)+of(y)]=m),m.HRef&&(m.l={Target:yu(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(F=x+(0|parseInt(m.MergeAcross,10)),B=y+(0|parseInt(m.MergeDown,10)),k.push({s:{c:x,r:y},e:{c:F,r:B}})),r.sheetStubs)if(m.MergeAcross||m.MergeDown){for(var W=x;W<=F;++W)for(var H=y;H<=B;++H)(W>x||H>y)&&(r.dense?(f[H]||(f[H]=[]),f[H][W]={t:"z"}):f[cf(W)+of(H)]={t:"z"});x=F+1}else++x;else m.MergeAcross?x=F+1:++x;else(m=Rx(a[0])).Index&&(x=+m.Index-1),x<w.s.c&&(w.s.c=x),x>w.e.c&&(w.e.c=x),"/>"===a[0].slice(-2)&&++x,P=[];break;case"row":"/"===a[1]||"/>"===a[0].slice(-2)?(y<w.s.r&&(w.s.r=y),y>w.e.r&&(w.e.r=y),"/>"===a[0].slice(-2)&&(g=Mx(a[0])).Index&&(y=+g.Index-1),x=0,++y):((g=Mx(a[0])).Index&&(y=+g.Index-1),L={},("0"==g.AutoFitHeight||g.Height)&&(L.hpx=parseInt(g.Height,10),L.hpt=Og(L.hpx),R[y]=L),"1"==g.Hidden&&(L.hidden=!0,R[y]=L));break;case"worksheet":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"));h.push(p),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(f["!ref"]=ff(w),r.sheetRows&&r.sheetRows<=w.e.r&&(f["!fullref"]=f["!ref"],w.e.r=r.sheetRows-1,f["!ref"]=ff(w))),k.length&&(f["!merges"]=k),O.length>0&&(f["!cols"]=O),R.length>0&&(f["!rows"]=R),u[p]=f}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=x=0,c.push([a[3],!1]),l=Mx(a[0]),p=yu(l.Name),f=r.dense?[]:{},k=[],M=[],R=[],U={name:p,Hidden:0},z.Sheets.push(U);break;case"table":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==a[0].slice(-2))break;c.push([a[3],!1]),O=[],I=!1}break;case"style":"/"===a[1]?Bx(j,N,r):N=Mx(a[0]);break;case"numberformat":N.nf=yu(Mx(a[0]).Format||"General"),Dx[N.nf]&&(N.nf=Dx[N.nf]);for(var V=0;392!=V&&zc[V]!=N.nf;++V);if(392==V)for(V=57;392!=V;++V)if(null==zc[V]){xd(N.nf,V);break}break;case"column":if("table"!==c[c.length-1][0])break;if((d=Mx(a[0])).Hidden&&(d.hidden=!0,delete d.Hidden),d.Width&&(d.wpx=parseInt(d.Width,10)),!I&&d.wpx>10){I=!0,Sg=6;for(var G=0;G<O.length;++G)O[G]&&Pg(O[G])}I&&Pg(d),O[d.Index-1||O.length]=d;for(var K=0;K<+d.Span;++K)O[O.length]=Gd(d);break;case"namedrange":if("/"===a[1])break;z.Names||(z.Names=[]);var $=gu(a[0]),Y={Name:$.Name,Ref:jv($.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(Y.Sheet=z.Sheets.length-1),z.Names.push(Y);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===a[0].slice(-2))break;"/"===a[1]?_+=n.slice(S,a.index):S=a.index+a[0].length;break;case"interior":if(!r.cellStyles)break;N.Interior=Mx(a[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===a[0].slice(-2))break;"/"===a[1]?Ap(A,q,n.slice(C,a.index)):C=a.index+a[0].length;break;case"styles":case"workbook":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else c.push([a[3],!1]);break;case"comment":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"));Ux(D),P.push(D)}else c.push([a[3],!1]),D={a:(l=Mx(a[0])).Author};break;case"autofilter":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==a[0].charAt(a[0].length-2)){var X=Mx(a[0]);f["!autofilter"]={ref:jv(X.Range).replace(/\$/g,"")},c.push([a[3],!0])}break;case"datavalidation":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break;default:if(0==c.length&&"document"==a[3])return Dy(n,r);if(0==c.length&&"uof"==a[3])return Dy(n,r);var J=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(a[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:J=!1}break;case"componentoptions":switch(a[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:J=!1}break;case"excelworkbook":switch(a[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:J=!1}break;case"workbookoptions":switch(a[3]){case"owcversion":case"height":case"width":break;default:J=!1}break;case"worksheetoptions":switch(a[3]){case"visible":if("/>"===a[0].slice(-2));else if("/"===a[1])switch(n.slice(C,a.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2}else C=a.index+a[0].length;break;case"header":f["!margins"]||wb(f["!margins"]={},"xlml"),isNaN(+gu(a[0]).Margin)||(f["!margins"].header=+gu(a[0]).Margin);break;case"footer":f["!margins"]||wb(f["!margins"]={},"xlml"),isNaN(+gu(a[0]).Margin)||(f["!margins"].footer=+gu(a[0]).Margin);break;case"pagemargins":var Z=gu(a[0]);f["!margins"]||wb(f["!margins"]={},"xlml"),isNaN(+Z.Top)||(f["!margins"].top=+Z.Top),isNaN(+Z.Left)||(f["!margins"].left=+Z.Left),isNaN(+Z.Right)||(f["!margins"].right=+Z.Right),isNaN(+Z.Bottom)||(f["!margins"].bottom=+Z.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;default:J=!1}break;case"pivottable":case"pivotcache":switch(a[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:J=!1}break;case"pagebreaks":switch(a[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:J=!1}break;case"autofilter":switch(a[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:J=!1}break;case"querytable":switch(a[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:J=!1}break;case"datavalidation":switch(a[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:J=!1}break;case"sorting":case"conditionalformatting":switch(a[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:J=!1}break;case"mapinfo":case"schema":case"data":switch(a[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:J=!1}break;case"smarttags":break;default:J=!1}if(J)break;if(a[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+a[3]+"|"+c.join("|");if("customdocumentproperties"===c[c.length-1][0]){if("/>"===a[0].slice(-2))break;"/"===a[1]?Lx(E,q,T,n.slice(C,a.index)):(T=a,C=a.index+a[0].length);break}if(r.WTF)throw"Unrecognized tag: "+a[3]+"|"+c.join("|")}var Q={};return r.bookSheets||r.bookProps||(Q.Sheets=u),Q.SheetNames=h,Q.Workbook=z,Q.SSF=Gd(zc),Q.Props=A,Q.Custprops=E,Q}function Wx(e,t){switch(dw(t=t||{}),t.type||"base64"){case"base64":return qx(xc(e),t);case"binary":case"buffer":case"file":return qx(e,t);case"array":return qx(kc(e),t)}}function Hx(e,t){var r=[];return e.Props&&r.push(function(e,t){var r=[];return Td(kp).map(function(e){for(var t=0;t<pp.length;++t)if(pp[t][1]==e)return pp[t];for(t=0;t<xp.length;++t)if(xp[t][1]==e)return xp[t];throw e}).forEach(function(n){if(null!=e[n[1]]){var a=t&&t.Props&&null!=t.Props[n[1]]?t.Props[n[1]]:e[n[1]];"date"===n[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(qu(kp[n[1]]||n[1],a))}}),Hu("DocumentProperties",r.join(""),{xmlns:lh})}(e.Props,t)),e.Custprops&&r.push(function(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Td(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var n=0;n<pp.length;++n)if(t==pp[n][1])return;for(n=0;n<xp.length;++n)if(t==xp[n][1])return;for(n=0;n<r.length;++n)if(t==r[n])return;var s=e[t],i="string";"number"==typeof s?(i="float",s=String(s)):!0===s||!1===s?(i="boolean",s=s?"1":"0"):s=String(s),a.push(Hu(_u(t),s,{"dt:dt":i}))}}),t&&Td(t).forEach(function(r){if(Object.prototype.hasOwnProperty.call(t,r)&&(!e||!Object.prototype.hasOwnProperty.call(e,r))){var n=t[r],s="string";"number"==typeof n?(s="float",n=String(n)):!0===n||!1===n?(s="boolean",n=n?"1":"0"):n instanceof Date?(s="dateTime.tz",n=n.toISOString()):n=String(n),a.push(Hu(_u(r),n,{"dt:dt":s}))}}),"<"+n+' xmlns="'+lh+'">'+a.join("")+"</"+n+">"}(e.Props,e.Custprops)),r.join("")}function Vx(e){return Hu("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+_v(e.Ref,{r:0,c:0})})}function Gx(e,t,r,n,a,s,i){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Nu(_v(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=df(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Nu(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Nu(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c==i.c&&c[d].s.r==i.r&&(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":u="Number",h=String(e.v);break;case"b":u="Boolean",h=e.v?"1":"0";break;case"e":u="Error",h=tp[e.v];break;case"d":u="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||zc[14]);break;case"s":u="String",h=((e.v||"")+"").replace(wu,function(e){return xu[e]}).replace(Su,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var f=jb(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=i.c+1;var p=null!=e.v?h:"",m="z"==e.t?"":'<Data ss:Type="'+u+'">'+p+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map(function(e){var t=Hu("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Hu("Comment",t,{"ss:Author":e.a})}).join("")),Hu("Cell",m,o)}function Kx(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Ig(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function $x(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?function(e,t,r,n){if(!e)return"";if(!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Vx(o)))}return s.join("")}(s,0,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?function(e,t){if(!e["!ref"])return"";var r=pf(e["!ref"]),n=e["!merges"]||[],a=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){Pg(e);var r=!!e.width,n=yb(t,e),a={"ss:Index":t+1};r&&(a["ss:Width"]=kg(n.width)),e.hidden&&(a["ss:Hidden"]="1"),s.push(Hu("Column",null,a))});for(var i=Array.isArray(e),o=r.s.r;o<=r.e.r;++o){for(var l=[Kx(o,(e["!rows"]||[])[o])],c=r.s.c;c<=r.e.c;++c){var d=!1;for(a=0;a!=n.length;++a)if(!(n[a].s.c>c)&&!(n[a].s.r>o)&&!(n[a].e.c<c)&&!(n[a].e.r<o)){n[a].s.c==c&&n[a].s.r==o||(d=!0);break}if(!d){var u={r:o,c:c},h=uf(u),f=i?(e[o]||[])[c]:e[h];l.push(Gx(f,h,e,t,0,0,u))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(function(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Hu("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Hu("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Hu("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Hu("Visible",1==n.Workbook.Sheets[r].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&(!n.Workbook.Sheets[s]||n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(qu("ProtectContents","True")),e["!protect"].objects&&a.push(qu("ProtectObjects","True")),e["!protect"].scenarios&&a.push(qu("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||a.push(qu("EnableSelection","UnlockedCells")):a.push(qu("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&a.push("<"+t[1]+"/>")})),0==a.length?"":Hu("WorksheetOptions",a.join(""),{xmlns:ch})}(s,0,e,r)),n.join("")}function Yx(e,t){t||(t={}),e.SSF||(e.SSF=Gd(zc)),e.SSF&&(wd(),yd(e.SSF),t.revssf=Od(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],jb(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Hx(e,t)),r.push(""),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Hu("Worksheet",$x(n,t,e),{"ss:Name":Nu(e.SheetNames[n])}));return r[2]=function(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var n=[];n.push(Hu("NumberFormat",null,{"ss:Format":Nu(zc[e.numFmtId])}));var a={"ss:ID":"s"+(21+t)};r.push(Hu("Style",n.join(""),a))}),Hu("Styles",r.join(""))}(0,t),r[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||r.push(Vx(a)))}return Hu("Names",r.join(""))}(e),du+Hu("Workbook",r.join(""),{xmlns:dh,"xmlns:o":lh,"xmlns:x":ch,"xmlns:ss":dh,"xmlns:dt":uh,"xmlns:html":ph})}function Xx(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return Gf(e,1)}(r),r.length-r.l<=4)return t;var n=r.read_shift(4);return 0==n||n>40?t:(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4||1907505652!==(n=r.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return Gf(e,2)}(r),0==(n=r.read_shift(4))||n>40?t:(r.l-=4,void(t.Reserved2=r.read_shift(0,"lpwstr")))))}var Jx=[60,1084,2066,2165,2175];function Zx(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=Fh(r,r.l),c=ly[l],d=0;null!=c&&Jx.indexOf(l)>-1;)s=Fh(r,r.l+2),d=r.l+4,2066==l?d+=4:2165!=l&&2175!=l||(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,c=ly[l=Fh(r,r.l)];var u=Ec(i);Yh(u,0);var h=0;u.lens=[];for(var f=0;f<i.length;++f)u.lens.push(h),h+=i[f].length;if(u.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+u.length+" < "+n;return t.f(u,u.length,a)}function Qx(e,t,r){if("z"!==e.t&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=zc[n])}catch(f2){if(t.WTF)throw f2}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||tp[e.v]:0===n||"General"==n?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=Xc(e.v):e.w=Jc(e.v):e.w=bd(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(f2){if(t.WTF)throw f2}if(t.cellDates&&n&&"n"==e.t&&pd(zc[n]||String(n))){var a=Hc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function ey(e,t,r){return{v:e,ixfe:t,t:r}}function ty(e,t){var r={opts:{}},n={};var a,s,i,o,l,c,d,u,h=t.dense?[]:{},f={},p={},m=null,g=[],v="",b={},x="",y={},w=[],j=[],N=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},k=function(e){return e<8?ep[e]:e<64&&N[e-8]||ep[e]},A=function(e,t,r){if(!(L>1)&&!(r.sheetRows&&e.r>=r.sheetRows)){if(r.cellStyles&&t.XF&&t.XF.data&&function(e,t,r){var n,a=t.XF.data;a&&a.patternType&&r&&r.cellStyles&&(t.s={},t.s.patternType=a.patternType,(n=Ng(k(a.icvFore)))&&(t.s.fgColor={rgb:n}),(n=Ng(k(a.icvBack)))&&(t.s.bgColor={rgb:n}))}(0,t,r),delete t.ixfe,delete t.XF,a=e,x=uf(e),p&&p.s&&p.e||(p={s:{r:0,c:0},e:{r:0,c:0}}),e.r<p.s.r&&(p.s.r=e.r),e.c<p.s.c&&(p.s.c=e.c),e.r+1>p.e.r&&(p.e.r=e.r+1),e.c+1>p.e.c&&(p.e.c=e.c+1),r.cellFormula&&t.f)for(var n=0;n<w.length;++n)if(!(w[n][0].s.c>e.c||w[n][0].s.r>e.r)&&!(w[n][0].e.c<e.c||w[n][0].e.r<e.r)){t.F=ff(w[n][0]),w[n][0].s.c==e.c&&w[n][0].s.r==e.r||delete t.f,t.f&&(t.f=""+Qv(w[n][1],0,e,I,E));break}r.dense?(h[e.r]||(h[e.r]=[]),h[e.r][e.c]=t):h[x]=t}},E={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(E.password=t.password);var C=[],T=[],P=[],D=[],O=!1,I=[];I.SheetNames=E.snames,I.sharedf=E.sharedf,I.arrayf=E.arrayf,I.names=[],I.XTI=[];var M,R=0,L=0,F=0,B=[],z=[];E.codepage=1200,cc(1200);for(var U=!1;e.l<e.length-1;){var q=e.l,W=e.read_shift(2);if(0===W&&10===R)break;var H=e.l===e.length?0:e.read_shift(2),V=ly[W];if(V&&V.f){if(t.bookSheets&&133===R&&133!==W)break;if(R=W,2===V.r||12==V.r){var G=e.read_shift(2);if(H-=2,!E.enc&&G!==W&&((255&G)<<8|G>>8)!==W)throw new Error("rt mismatch: "+G+"!="+W);12==V.r&&(e.l+=10,H-=10)}var K={};if(K=10===W?V.f(e,H,E):Zx(W,V,e,H,E),0==L&&-1===[9,521,1033,2057].indexOf(R))continue;switch(W){case 34:r.opts.Date1904=_.WBProps.date1904=K;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(E.enc||(e.l=0),E.enc=K,!t.password)throw new Error("File is password-protected");if(null==K.valid)throw new Error("Encryption scheme unsupported");if(!K.valid)throw new Error("Password is incorrect");break;case 92:E.lastuser=K;break;case 66:var $=Number(K);switch($){case 21010:$=1200;break;case 32768:$=1e4;break;case 32769:$=1252}cc(E.codepage=$),U=!0;break;case 317:E.rrtabid=K;break;case 25:E.winlocked=K;break;case 439:r.opts.RefreshAll=K;break;case 12:r.opts.CalcCount=K;break;case 16:r.opts.CalcDelta=K;break;case 17:r.opts.CalcIter=K;break;case 13:r.opts.CalcMode=K;break;case 14:r.opts.CalcPrecision=K;break;case 95:r.opts.CalcSaveRecalc=K;break;case 15:E.CalcRefMode=K;break;case 2211:r.opts.FullCalc=K;break;case 129:K.fDialog&&(h["!type"]="dialog"),K.fBelow||((h["!outline"]||(h["!outline"]={})).above=!0),K.fRight||((h["!outline"]||(h["!outline"]={})).left=!0);break;case 224:j.push(K);break;case 430:I.push([K]),I[I.length-1].XTI=[];break;case 35:case 547:I[I.length-1].push(K);break;case 24:case 536:M={Name:K.Name,Ref:Qv(K.rgce,0,null,I,E)},K.itab>0&&(M.Sheet=K.itab-1),I.names.push(M),I[0]||(I[0]=[],I[0].XTI=[]),I[I.length-1].push(K),"_xlnm._FilterDatabase"==K.Name&&K.itab>0&&K.rgce&&K.rgce[0]&&K.rgce[0][0]&&"PtgArea3d"==K.rgce[0][0][0]&&(z[K.itab-1]={ref:ff(K.rgce[0][0][1][2])});break;case 22:E.ExternCount=K;break;case 23:0==I.length&&(I[0]=[],I[0].XTI=[]),I[I.length-1].XTI=I[I.length-1].XTI.concat(K),I.XTI=I.XTI.concat(K);break;case 2196:if(E.biff<8)break;null!=M&&(M.Comment=K[1]);break;case 18:h["!protect"]=K;break;case 19:0!==K&&E.WTF&&console.error("Password verifier: "+K);break;case 133:f[K.pos]=K,E.snames.push(K.name);break;case 10:if(--L)break;if(p.e){if(p.e.r>0&&p.e.c>0){if(p.e.r--,p.e.c--,h["!ref"]=ff(p),t.sheetRows&&t.sheetRows<=p.e.r){var Y=p.e.r;p.e.r=t.sheetRows-1,h["!fullref"]=h["!ref"],h["!ref"]=ff(p),p.e.r=Y}p.e.r++,p.e.c++}C.length>0&&(h["!merges"]=C),T.length>0&&(h["!objects"]=T),P.length>0&&(h["!cols"]=P),D.length>0&&(h["!rows"]=D),_.Sheets.push(S)}""===v?b=h:n[v]=h,h=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===E.biff&&(E.biff={9:2,521:3,1033:4}[W]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[K.BIFFVer]||8),E.biffguess=0==K.BIFFVer,0==K.BIFFVer&&4096==K.dt&&(E.biff=5,U=!0,cc(E.codepage=28591)),8==E.biff&&0==K.BIFFVer&&16==K.dt&&(E.biff=2),L++)break;if(h=t.dense?[]:{},E.biff<8&&!U&&(U=!0,cc(E.codepage=t.codepage||1252)),E.biff<5||0==K.BIFFVer&&4096==K.dt){""===v&&(v="Sheet1"),p={s:{r:0,c:0},e:{r:0,c:0}};var X={pos:e.l-H,name:v};f[X.pos]=X,E.snames.push(v)}else v=(f[q]||{name:""}).name;32==K.dt&&(h["!type"]="chart"),64==K.dt&&(h["!type"]="macro"),C=[],T=[],E.arrayf=w=[],P=[],D=[],O=!1,S={Hidden:(f[q]||{hs:0}).hs,name:v};break;case 515:case 3:case 2:"chart"==h["!type"]&&(t.dense?(h[K.r]||[])[K.c]:h[uf({c:K.c,r:K.r})])&&++K.c,c={ixfe:K.ixfe,XF:j[K.ixfe]||{},v:K.val,t:"n"},F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 5:case 517:c={ixfe:K.ixfe,XF:j[K.ixfe],v:K.val,t:K.t},F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 638:c={ixfe:K.ixfe,XF:j[K.ixfe],v:K.rknum,t:"n"},F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 189:for(var J=K.c;J<=K.C;++J){var Z=K.rkrec[J-K.c][0];c={ixfe:Z,XF:j[Z],v:K.rkrec[J-K.c][1],t:"n"},F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:J,r:K.r},c,t)}break;case 6:case 518:case 1030:if("String"==K.val){m=K;break}if((c=ey(K.val,K.cell.ixfe,K.tt)).XF=j[c.ixfe],t.cellFormula){var Q=K.formula;if(Q&&Q[0]&&Q[0][0]&&"PtgExp"==Q[0][0][0]){var ee=Q[0][0][1][0],te=Q[0][0][1][1],re=uf({r:ee,c:te});y[re]?c.f=""+Qv(K.formula,0,K.cell,I,E):c.F=((t.dense?(h[ee]||[])[te]:h[re])||{}).F}else c.f=""+Qv(K.formula,0,K.cell,I,E)}F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A(K.cell,c,t),m=K;break;case 7:case 519:if(!m)throw new Error("String record expects Formula");m.val=K,(c=ey(K,m.cell.ixfe,"s")).XF=j[c.ixfe],t.cellFormula&&(c.f=""+Qv(m.formula,0,m.cell,I,E)),F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A(m.cell,c,t),m=null;break;case 33:case 545:w.push(K);var ne=uf(K[0].s);if(s=t.dense?(h[K[0].s.r]||[])[K[0].s.c]:h[ne],t.cellFormula&&s){if(!m)break;if(!ne||!s)break;s.f=""+Qv(K[1],0,K[0],I,E),s.F=ff(K[0])}break;case 1212:if(!t.cellFormula)break;if(x){if(!m)break;y[uf(m.cell)]=K[0],((s=t.dense?(h[m.cell.r]||[])[m.cell.c]:h[uf(m.cell)])||{}).f=""+Qv(K[0],0,a,I,E)}break;case 253:c=ey(g[K.isst].t,K.ixfe,"s"),g[K.isst].h&&(c.h=g[K.isst].h),c.XF=j[c.ixfe],F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 513:t.sheetStubs&&(c={ixfe:K.ixfe,XF:j[K.ixfe],t:"z"},F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:K.c,r:K.r},c,t));break;case 190:if(t.sheetStubs)for(var ae=K.c;ae<=K.C;++ae){var se=K.ixfe[ae-K.c];c={ixfe:se,XF:j[se],t:"z"},F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:ae,r:K.r},c,t)}break;case 214:case 516:case 4:(c=ey(K.val,K.ixfe,"s")).XF=j[c.ixfe],F>0&&(c.z=B[c.ixfe>>8&63]),Qx(c,t,r.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 0:case 512:1===L&&(p=K);break;case 252:g=K;break;case 1054:if(4==E.biff){B[F++]=K[1];for(var ie=0;ie<F+163&&zc[ie]!=K[1];++ie);ie>=163&&xd(K[1],F+163)}else xd(K[1],K[0]);break;case 30:B[F++]=K;for(var oe=0;oe<F+163&&zc[oe]!=K;++oe);oe>=163&&xd(K,F+163);break;case 229:C=C.concat(K);break;case 93:T[K.cmo[0]]=E.lastobj=K;break;case 438:E.lastobj.TxO=K;break;case 127:E.lastobj.ImData=K;break;case 440:for(l=K[0].s.r;l<=K[0].e.r;++l)for(o=K[0].s.c;o<=K[0].e.c;++o)(s=t.dense?(h[l]||[])[o]:h[uf({c:o,r:l})])&&(s.l=K[1]);break;case 2048:for(l=K[0].s.r;l<=K[0].e.r;++l)for(o=K[0].s.c;o<=K[0].e.c;++o)(s=t.dense?(h[l]||[])[o]:h[uf({c:o,r:l})])&&s.l&&(s.l.Tooltip=K[1]);break;case 28:if(E.biff<=5&&E.biff>=2)break;s=t.dense?(h[K[0].r]||[])[K[0].c]:h[uf(K[0])];var le=T[K[2]];s||(t.dense?(h[K[0].r]||(h[K[0].r]=[]),s=h[K[0].r][K[0].c]={t:"z"}):s=h[uf(K[0])]={t:"z"},p.e.r=Math.max(p.e.r,K[0].r),p.s.r=Math.min(p.s.r,K[0].r),p.e.c=Math.max(p.e.c,K[0].c),p.s.c=Math.min(p.s.c,K[0].c)),s.c||(s.c=[]),i={a:K[1],t:le.TxO.t},s.c.push(i);break;case 2173:uv(j[K.ixfe],K.ext);break;case 125:if(!E.cellStyles)break;for(;K.e>=K.s;)P[K.e--]={width:K.w/256,level:K.level||0,hidden:!!(1&K.flags)},O||(O=!0,Tg(K.w/256)),Pg(P[K.e+1]);break;case 520:var ce={};null!=K.level&&(D[K.r]=ce,ce.level=K.level),K.hidden&&(D[K.r]=ce,ce.hidden=!0),K.hpt&&(D[K.r]=ce,ce.hpt=K.hpt,ce.hpx=Ig(K.hpt));break;case 38:case 39:case 40:case 41:h["!margins"]||wb(h["!margins"]={}),h["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[W]]=K;break;case 161:h["!margins"]||wb(h["!margins"]={}),h["!margins"].header=K.header,h["!margins"].footer=K.footer;break;case 574:K.RTL&&(_.Views[0].RTL=!0);break;case 146:N=K;break;case 2198:u=K;break;case 140:d=K;break;case 442:v?S.CodeName=K||S.name:_.WBProps.CodeName=K||"ThisWorkbook"}}else V||console.error("Missing Info for XLS Record 0x"+W.toString(16)),e.l+=H}return r.SheetNames=Td(f).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return f[e].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&b["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=b)):r.Preamble=b,r.Sheets&&z.forEach(function(e,t){r.Sheets[r.SheetNames[t]]["!autofilter"]=e}),r.Strings=g,r.SSF=Gd(zc),E.enc&&(r.Encryption=E.enc),u&&(r.Themes=u),r.Metadata={},void 0!==d&&(r.Metadata.Country=d),I.names.length>0&&(_.Names=I.names),r.Workbook=_,r}var ry="e0859ff2f94f6810ab9108002b27b3d9",ny="02d5cdd59c2e1b10939708002b2cf9ae",ay="05d5cdd59c2e1b10939708002b2cf9ae";function sy(e,t){var r,n,a,s;if(t||(t={}),dw(t),dc(),t.codepage&&lc(t.codepage),e.FullPaths){if(kd.find(e,"/encryption"))throw new Error("File is password-protected");r=kd.find(e,"!CompObj"),n=kd.find(e,"/Workbook")||kd.find(e,"/Book")}else{switch(t.type){case"base64":e=_c(xc(e));break;case"binary":e=_c(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}Yh(e,0),n={content:e}}if(r&&Xx(r),t.bookProps&&!t.bookSheets)a={};else{var i=yc?"buffer":"array";if(n&&n.content)a=ty(n.content,t);else if((s=kd.find(e,"PerfectOffice_MAIN"))&&s.content)a=Ym.to_workbook(s.content,(t.type=i,t));else{if(!(s=kd.find(e,"NativeContent_MAIN"))||!s.content)throw(s=kd.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a=Ym.to_workbook(s.content,(t.type=i,t))}t.bookVBA&&e.FullPaths&&kd.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=function(e){var t=kd.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if("/"!==r.slice(-1)&&r.match(/_VBA_PROJECT_CUR/)){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");kd.utils.cfb_add(t,a,e.FileIndex[n].content)}}),kd.write(t)}(e))}var o={};return e.FullPaths&&function(e,t,r){var n=kd.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=qp(n,Yf,ny);for(var s in a)t[s]=a[s]}catch(f2){if(r.WTF)throw f2}var i=kd.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=qp(i,Xf,ry);for(var l in o)null==t[l]&&(t[l]=o[l])}catch(f2){if(r.WTF)throw f2}t.HeadingPairs&&t.TitlesOfParts&&(wp(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function iy(e,t){var r=t||{},n=kd.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return kd.utils.cfb_add(n,a,by(e,r)),8==r.biff&&(e.Props||e.Custprops)&&function(e,t){var r,n=[],a=[],s=[],i=0,o=Pd(Yf,"n"),l=Pd(Xf,"n");if(e.Props)for(r=Td(e.Props),i=0;i<r.length;++i)(Object.prototype.hasOwnProperty.call(o,r[i])?n:Object.prototype.hasOwnProperty.call(l,r[i])?a:s).push([r[i],e.Props[r[i]]]);if(e.Custprops)for(r=Td(e.Custprops),i=0;i<r.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},r[i])||(Object.prototype.hasOwnProperty.call(o,r[i])?n:Object.prototype.hasOwnProperty.call(l,r[i])?a:s).push([r[i],e.Custprops[r[i]]]);var c=[];for(i=0;i<s.length;++i)Bp.indexOf(s[i][0])>-1||yp.indexOf(s[i][0])>-1||null!=s[i][1]&&c.push(s[i]);a.length&&kd.utils.cfb_add(t,"/\x05SummaryInformation",Wp(a,ry,l,Xf)),(n.length||c.length)&&kd.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Wp(n,ny,o,Yf,c.length?c:null,ay))}(e,n),8==r.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(r,n){if(0!=n){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&kd.utils.cfb_add(e,a,t.FileIndex[n].content)}})}(n,kd.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),n}var oy={0:{f:function(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,7&s&&(r.level=7&s),16&s&&(r.hidden=!0),32&s&&(r.hpt=a/20),r}},1:{f:function(e){return[Af(e)]}},2:{f:function(e){return[Af(e),Ff(e),"n"]}},3:{f:function(e){return[Af(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Af(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Af(e),Wf(e),"n"]}},6:{f:function(e){return[Af(e),wf(e),"str"]}},7:{f:function(e){return[Af(e),e.read_shift(4),"s"]}},8:{f:function(e,t,r){var n=e.l+t,a=Af(e);a.r=r["!row"];var s=[a,wf(e),"str"];if(r.cellFormula){e.l+=2;var i=ib(e,n-e.l,r);s[3]=Qv(i,0,a,r.supbooks,r)}else e.l=n;return s}},9:{f:function(e,t,r){var n=e.l+t,a=Af(e);a.r=r["!row"];var s=[a,Wf(e),"n"];if(r.cellFormula){e.l+=2;var i=ib(e,n-e.l,r);s[3]=Qv(i,0,a,r.supbooks,r)}else e.l=n;return s}},10:{f:function(e,t,r){var n=e.l+t,a=Af(e);a.r=r["!row"];var s=[a,e.read_shift(1),"b"];if(r.cellFormula){e.l+=2;var i=ib(e,n-e.l,r);s[3]=Qv(i,0,a,r.supbooks,r)}else e.l=n;return s}},11:{f:function(e,t,r){var n=e.l+t,a=Af(e);a.r=r["!row"];var s=[a,e.read_shift(1),"e"];if(r.cellFormula){e.l+=2;var i=ib(e,n-e.l,r);s[3]=Qv(i,0,a,r.supbooks,r)}else e.l=n;return s}},12:{f:function(e){return[Cf(e)]}},13:{f:function(e){return[Cf(e),Ff(e),"n"]}},14:{f:function(e){return[Cf(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Cf(e),e.read_shift(1),"b"]}},16:{f:Gb},17:{f:function(e){return[Cf(e),wf(e),"str"]}},18:{f:function(e){return[Cf(e),e.read_shift(4),"s"]}},19:{f:_f},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=Mf(e),i=ob(e,0,r),o=Of(e);e.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(n.underline=s);var i=e.read_shift(1);i>0&&(n.family=i);var o=e.read_shift(1);switch(o>0&&(n.charset=o),e.l++,n.color=function(e){var t={},r=e.read_shift(1)>>>1,n=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=n;var l=ep[n];l&&(t.rgb=Ng(l));break;case 2:t.rgb=Ng([s,i,o]);break;case 3:t.theme=n}return 0!=a&&(t.tint=a>0?a/32767:a/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=wf(e),n}},44:{f:function(e,t){return[e.read_shift(2),wf(e)]}},45:{f:Hg},46:{f:$g},47:{f:function(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Bm},62:{f:function(e){return[Af(e),_f(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=uf(r);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Xh,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var r={},n=e[e.l];return++e.l,r.above=!(64&n),r.left=!(128&n),e.l+=18,r.name=Pf(e,t-19),r}},148:{f:Hb,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?wf(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(65536&n),r.backupFile=!!(64&n),r.checkCompatibility=!!(4096&n),r.date1904=!!(1&n),r.filterPrivacy=!!(8&n),r.hidePivotFieldList=!!(1024&n),r.promptedSolutions=!!(16&n),r.publishItems=!!(2048&n),r.refreshAllConnections=!!(262144&n),r.saveExternalLinkValues=!!(128&n),r.showBorderUnselectedTables=!!(4&n),r.showInkAnnotation=!!(32&n),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(32768&n),r.updateLinks=["userSet","never","always"][n>>8&3],r}},154:{},155:{},156:{f:function(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Rf(e,t-8),r.name=wf(e),r}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:Uf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Kb},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:wf(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Rf},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Im},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,r){var n=e.l+t,a=zf(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=sb(e,n-e.l,r);i[1]=o}else e.l=n;return i}},427:{f:function(e,t,r){var n=e.l+t,a=[Uf(e,16)];if(r.cellFormula){var s=lb(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return Yb.forEach(function(r){t[r]=Wf(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var r=e.l+t,n=Uf(e,16),a=Of(e),s=wf(e),i=wf(e),o=wf(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Rf},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:xv},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var r=Uf(e,16);return t.rfx=r.s,t.ref=uf(r.s),e.l+=16,t}},636:{T:-1},637:{f:Sf},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:wf(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},ly={6:{f:rb},10:{f:Hp},12:{f:Kp},13:{f:Kp},14:{f:Vp},15:{f:Vp},16:{f:Wf},17:{f:Vp},18:{f:Vp},19:{f:Kp},20:{f:Tm},21:{f:Tm},23:{f:Im},24:{f:Om},25:{f:Vp},26:{},27:{},28:{f:function(e,t,r){return function(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=rm(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}(e,0,r)}},29:{},34:{f:Vp},35:{f:Pm},38:{f:Wf},39:{f:Wf},40:{f:Wf},41:{f:Wf},42:{f:Vp},43:{f:Vp},47:{f:function(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?wg(e,t-2,n):function(e,t,r,n){var a={key:Kp(e),verificationBytes:Kp(e)};r.password&&(a.verifier=bg(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=yg(r.password))}(e,r.biff,r,n),n}},49:{f:function(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return n.name=Jp(e,0,r),n}},51:{f:Kp},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:Vp},65:{f:function(){}},66:{f:Kp},77:{},80:{},81:{},82:{},85:{f:Kp},89:{},90:{},91:{},92:{f:function(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=rm(e,0,r);return e.read_shift(t+n-e.l),a}},93:{f:function(e,t,r){if(r&&r.biff<8)return function(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((Rm[n]||Xh)(e,t,r)),{cmo:[a,n,s],ft:i}}(e,t,r);var n=bm(e),a=function(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(ym[a](e,r-e.l))}catch(f2){return e.l=r,n}}return e.l!=r&&(e.l=r),n}(e,t-22,n[1]);return{cmo:n,ft:a}}},94:{},95:{f:Vp},96:{},97:{},99:{f:Vp},125:{f:Bm},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,r){var n=r&&8==r.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&n,fBelow:64&n,fRight:128&n}}},130:{f:Kp},131:{f:Vp},132:{f:Vp},133:{f:function(e,t,r){var n=e.read_shift(4),a=3&e.read_shift(1),s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule"}var i=Jp(e,0,r);return 0===i.length&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}},134:{},140:{f:function(e){var t,r=[0,0];return t=e.read_shift(2),r[0]=Jf[t]||t,t=e.read_shift(2),r[1]=Jf[t]||t,r}},141:{f:Kp},144:{},146:{f:function(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(cm(e));return r}},151:{},152:{},153:{},154:{},155:{},156:{f:Kp},157:{},158:{},160:{f:Um},161:{f:function(e,t){var r={};return t<32||(e.l+=16,r.header=Wf(e),r.footer=Wf(e),e.l+=2),r}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(fm(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}},190:{f:function(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}},193:{f:Hp},197:{},198:{},199:{},200:{},201:{},202:{f:Vp},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Kp},220:{},221:{f:Vp},222:{},224:{f:function(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,n.data=function(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=Zf[o>>26],n.cellStyles?(a.alc=7&s,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=15&i,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=127&o,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=127&l,a.icvBack=l>>7&127,a.fsxButton=l>>14&1,a):a}(e,0,n.fStyle,r),n}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:Hp},227:{},229:{f:function(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(pm(e));return r}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(Zp(e));return s.Count=n,s.Unique=a,s}},253:{f:function(e){var t=dm(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Yp},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Vp},353:{f:Hp},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,1025==s||14849==s)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=em(e,s),o=[];n>e.l;)o.push(tm(e));return[s,a,i,o]}},431:{f:Vp},432:{},433:{},434:{},437:{},438:{f:function(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(s)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}(e);var i=e.read_shift(2);e.read_shift(2),Kp(e);var o=e.read_shift(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-n!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((a+=em(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?i:2*i))break}if(a.length!==i&&a.length!==2*i)throw new Error("cchText: "+i+" != "+a.length);return e.l=n+t,{t:a}}catch(f2){return e.l=n+t,{t:a}}}},439:{f:Vp},440:{f:function(e,t){var r=pm(e);e.l+=16;var n=function(e,t){var r=e.l+t,n=e.read_shift(4);if(2!==n)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,l,c,d,u="";16&a&&(s=sm(e,e.l)),128&a&&(i=sm(e,e.l)),257===(257&a)&&(o=sm(e,e.l)),1===(257&a)&&(l=am(e,e.l)),8&a&&(u=sm(e,e.l)),32&a&&(c=e.read_shift(16)),64&a&&(d=Ep(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),2&a&&"/"==h.charAt(0)&&"/"!=h.charAt(1)&&(h="file://"+h);var f={Target:h};return c&&(f.guid=c),d&&(f.time=d),s&&(f.Tooltip=s),f}(e,t-24);return[r,n]}},441:{},442:{f:tm},443:{},444:{f:Kp},445:{},446:{},448:{f:Hp},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:Hp},512:{f:Am},513:{f:zm},515:{f:function(e,t,r){r.biffguess&&2==r.biff&&(r.biff=5);var n=dm(e),a=Wf(e);return n.val=a,n}},516:{f:function(e,t,r){r.biffguess&&2==r.biff&&(r.biff=5),e.l;var n=dm(e);2==r.biff&&e.l++;var a=tm(e,e.l,r);return n.val=a,n}},517:{f:Cm},519:{f:qm},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,7&n&&(t.level=7&n),32&n&&(t.hidden=!0),64&n&&(t.hpt=r/20),t}},523:{},545:{f:Mm},549:{f:_m},566:{},574:{f:function(e,t,r){return r&&r.biff>=2&&r.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),r=e.read_shift(2),n=fm(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}},659:{},1048:{},1054:{f:function(e,t,r){return[e.read_shift(2),rm(e,0,r)]}},1084:{},1212:{f:function(e,t,r){var n=gm(e);e.l++;var a=e.read_shift(1);return[tb(e,t-=8,r),a,n]}},2048:{f:function(e,t){e.read_shift(2);var r=pm(e),n=e.read_shift((t-10)/2,"dbcs-cont");return[r,n=n.replace(Cc,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:wm},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Hp},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var r=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),a=[];n-- >0;)a.push(dv(e,e.l));return{ixfe:r,ext:a}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Vp,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2);return[em(e,n,r),em(e,a,r)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,r){var n=e.l+t;if(124226!==e.read_shift(4))if(r.cellStyles){var a,s=e.slice(e.l);e.l=n;try{a=lu(s,{type:"array"})}catch(f2){return}var i=nu(a,"theme/theme/theme1.xml",!0);if(i)return ov(i,r)}else e.l=n},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:Hp},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Kp},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,r){var n={area:!1};if(5!=r.biff)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,16&a&&(n.area=!0),n}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(cm(e));return r}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Am},1:{},2:{f:function(e){var t=dm(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}},3:{f:function(e){var t=dm(e);++e.l;var r=Wf(e);return t.t="n",t.val=r,t}},4:{f:function(e,t,r){r.biffguess&&5==r.biff&&(r.biff=2);var n=dm(e);++e.l;var a=rm(e,0,r);return n.t="str",n.val=a,n}},5:{f:Cm},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:wm},11:{},22:{f:Kp},30:{f:km},31:{},32:{},33:{f:Mm},36:{},37:{f:_m},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:Kp},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,r){var n=e.l+t,a=dm(e),s=e.read_shift(2),i=em(e,s,r);return e.l=n,a.t="str",a.val=i,a}},223:{},234:{},354:{},421:{},518:{f:rb},521:{f:wm},536:{f:Om},547:{f:Pm},561:{},579:{},1030:{f:rb},1033:{f:wm},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function cy(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&Mh(r)&&e.push(r)}}function dy(e,t,r){return e||(e=Jh(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function uy(e,t,r,n){if(null!=t.v)switch(t.t){case"d":case"n":var a="d"==t.t?Md(Hd(t.v)):t.v;return void(a==(0|a)&&a>=0&&a<65536?cy(e,2,function(e,t,r){var n=Jh(9);return dy(n,e,t),n.write_shift(2,r),n}(r,n,a)):cy(e,3,function(e,t,r){var n=Jh(15);return dy(n,e,t),n.write_shift(8,r,"f"),n}(r,n,a)));case"b":case"e":return void cy(e,5,function(e,t,r,n){var a=Jh(9);return dy(a,e,t),Xp(r,n||"b",a),a}(r,n,t.v,t.t));case"s":case"str":return void cy(e,4,function(e,t,r){var n=Jh(8+2*r.length);return dy(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}(r,n,(t.v||"").slice(0,255)))}cy(e,1,dy(null,r,n))}function hy(e,t){var r=t||{};for(var n=Qh(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(0==a&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return cy(n,4==r.biff?1033:3==r.biff?521:9,jm(0,16,r)),function(e,t,r,n){var a,s=Array.isArray(t),i=pf(t["!ref"]||"A1"),o="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=ff(i)}for(var c=i.s.r;c<=i.e.r;++c){o=of(c);for(var d=i.s.c;d<=i.e.c;++d){c===i.s.r&&(l[d]=cf(d)),a=l[d]+o;var u=s?(t[c]||[])[d]:t[a];u&&uy(e,u,c,d)}}}(n,e.Sheets[e.SheetNames[a]],0,r),cy(n,10),n.end()}function fy(e,t,r){cy(e,49,function(e,t){var r=e.name||"Arial",n=t&&5==t.biff,a=Jh(n?15+r.length:16+2*r.length);return a.write_shift(2,20*(e.sz||12)),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function py(e,t){if(t){var r=0;t.forEach(function(t,n){++r<=256&&t&&cy(e,125,function(e,t){var r=Jh(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,256*e.width),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}(yb(n,t),n))})}}function my(e,t,r,n,a){var s=16+jb(a.cellXfs,t,a);if(null!=t.v||t.bf)if(t.bf)cy(e,6,nb(t,r,n,0,s));else switch(t.t){case"d":case"n":cy(e,515,function(e,t,r,n){var a=Jh(14);return um(e,t,n,a),Hf(r,a),a}(r,n,"d"==t.t?Md(Hd(t.v)):t.v,s));break;case"b":case"e":cy(e,517,function(e,t,r,n,a,s){var i=Jh(8);return um(e,t,n,i),Xp(r,s,i),i}(r,n,t.v,s,0,t.t));break;case"s":case"str":if(a.bookSST)cy(e,253,function(e,t,r,n){var a=Jh(10);return um(e,t,n,a),a.write_shift(4,r),a}(r,n,xb(a.Strings,t.v,a.revStrings),s));else cy(e,516,function(e,t,r,n,a){var s=!a||8==a.biff,i=Jh(+s+8+(1+s)*r.length);return um(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}(r,n,(t.v||"").slice(0,255),s,a));break;default:cy(e,513,um(r,n,s))}else cy(e,513,um(r,n,s))}function gy(e,t,r){var n,a=Qh(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=8==t.biff,u="",h=[],f=pf(i["!ref"]||"A1"),p=d?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}cy(a,2057,jm(0,16,t)),cy(a,13,$p(1)),cy(a,12,$p(100)),cy(a,15,Gp(!0)),cy(a,17,Gp(!1)),cy(a,16,Hf(.001)),cy(a,95,Gp(!0)),cy(a,42,Gp(!1)),cy(a,43,Gp(!1)),cy(a,130,$p(1)),cy(a,128,function(e){var t=Jh(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),cy(a,131,Gp(!1)),cy(a,132,Gp(!1)),d&&py(a,i["!cols"]),cy(a,512,function(e,t){var r=8!=t.biff&&t.biff?2:4,n=Jh(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}(f,t)),d&&(i["!links"]=[]);for(var m=f.s.r;m<=f.e.r;++m){u=of(m);for(var g=f.s.c;g<=f.e.c;++g){m===f.s.r&&(h[g]=cf(g)),n=h[g]+u;var v=c?(i[m]||[])[g]:i[n];v&&(my(a,v,m,g,t),d&&v.l&&i["!links"].push([n,v.l]))}}var b=l.CodeName||l.name||s;return d&&cy(a,574,function(e){var t=Jh(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&cy(a,229,function(e){var t=Jh(2+8*e.length);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)mm(e[r],t);return t}(i["!merges"])),d&&function(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];cy(e,440,Lm(n)),n[1].Tooltip&&cy(e,2048,Fm(n))}delete t["!links"]}(a,i),cy(a,442,nm(b)),d&&function(e,t){var r=Jh(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),cy(e,2151,r),(r=Jh(39)).write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),mm(pf(t["!ref"]||"A1"),r),r.write_shift(4,4),cy(e,2152,r)}(a,i),cy(a,10),a.end()}function vy(e,t,r){var n=Qh(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=8==r.biff,l=5==r.biff;(cy(n,2057,jm(0,5,r)),"xla"==r.bookType&&cy(n,135),cy(n,225,o?$p(1200):null),cy(n,193,function(e,t){t||(t=Jh(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}(2)),l&&cy(n,191),l&&cy(n,192),cy(n,226),cy(n,92,function(e,t){var r=!t||8==t.biff,n=Jh(r?112:54);for(n.write_shift(8==t.biff?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}(0,r)),cy(n,66,$p(o?1200:1252)),o&&cy(n,353,$p(0)),o&&cy(n,448),cy(n,317,function(e){for(var t=Jh(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&cy(n,211),o&&e.vbaraw)&&cy(n,442,nm(i.CodeName||"ThisWorkbook"));cy(n,156,$p(17)),cy(n,25,Gp(!1)),cy(n,18,Gp(!1)),cy(n,19,$p(0)),o&&cy(n,431,Gp(!1)),o&&cy(n,444,$p(0)),cy(n,61,function(){var e=Jh(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),cy(n,64,Gp(!1)),cy(n,141,$p(0)),cy(n,34,Gp("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Eu(e.Workbook.WBProps.date1904)?"true":"false"}(e))),cy(n,14,Gp(!0)),o&&cy(n,439,Gp(!1)),cy(n,218,$p(0)),fy(n,0,r),function(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)null!=t[a]&&cy(e,1054,Sm(a,t[a],r))})}(n,e.SSF,r),function(e,t){for(var r=0;r<16;++r)cy(e,224,Em({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){cy(e,224,Em(r,0,t))})}(n,r),o&&cy(n,352,Gp(!1));var c=n.end(),d=Qh();o&&cy(d,140,function(e){return e||(e=Jh(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),o&&r.Strings&&function(e,t,r,n){var a=n||(r||[]).length||0;if(a<=8224)return cy(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<a;){for((d=e.next(4)).write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}(d,252,function(e){var t=Jh(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=Qp(e[n]);var a=Ec([t].concat(r));return a.parts=[t.length].concat(r.map(function(e){return e.length})),a}(r.Strings)),cy(d,10);var u=d.end(),h=Qh(),f=0,p=0;for(p=0;p<e.SheetNames.length;++p)f+=(o?12:11)+(o?2:1)*e.SheetNames[p].length;var m=c.length+f+u.length;for(p=0;p<e.SheetNames.length;++p){cy(h,133,Nm({pos:m,hs:(s[p]||{}).Hidden||0,dt:0,name:e.SheetNames[p]},r)),m+=t[p].length}var g=h.end();if(f!=g.length)throw new Error("BS8 "+f+" != "+g.length);var v=[];return c.length&&v.push(c),g.length&&v.push(g),u.length&&v.push(u),Ec(v)}function by(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(n&&n["!ref"])hf(n["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}var a=t||{};switch(a.biff||2){case 8:case 5:return function(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Gd(zc)),e&&e.SSF&&(wd(),yd(e.SSF),r.revssf=Od(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,uw(r),r.cellXfs=[],jb(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=gy(a,r,e);return n.unshift(vy(e,n,r)),Ec(n)}(e,t);case 4:case 3:case 2:return hy(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function xy(e,t){var r=t||{};var n=r.dense?[]:{},a=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,l=Jd(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,u=0,h=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(i=0;i<l.length;++i){var m=l[i].trim(),g=m.slice(0,3).toLowerCase();if("<tr"!=g){if("<td"==g||"<th"==g){var v=m.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var b=v[o].trim();if(b.match(/<t[dh]/i)){for(var x=b,y=0;"<"==x.charAt(0)&&(y=x.indexOf(">"))>-1;)x=x.slice(y+1);for(var w=0;w<p.length;++w){var j=p[w];j.s.c==d&&j.s.r<c&&c<=j.e.r&&(d=j.e.c+1,w=-1)}var N=gu(b.slice(0,b.indexOf(">")));h=N.colspan?+N.colspan:1,((u=+N.rowspan)>1||h>1)&&p.push({s:{r:c,c:d},e:{r:c+(u||1)-1,c:d+h-1}});var _=N.t||N["data-t"]||"";if(x.length)if(x=Ru(x),f.s.r>c&&(f.s.r=c),f.e.r<c&&(f.e.r=c),f.s.c>d&&(f.s.c=d),f.e.c<d&&(f.e.c=d),x.length){var S={t:"s",v:x};r.raw||!x.trim().length||"s"==_||("TRUE"===x?S={t:"b",v:!0}:"FALSE"===x?S={t:"b",v:!1}:isNaN($d(x))?isNaN(Xd(x).getDate())||(S={t:"d",v:Hd(x)},r.cellDates||(S={t:"n",v:Md(S.v)}),S.z=r.dateNF||zc[14]):S={t:"n",v:$d(x)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=S):n[uf({r:c,c:d})]=S,d+=h}else d+=h;else d+=h}}}}else{if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0}}return n["!ref"]=ff(f),p.length&&(n["!merges"]=p),n}function yy(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<a.length;++c)if(!(a[c].s.r>r||a[c].s.c>i)&&!(a[c].e.r<r||a[c].e.c<i)){if(a[c].s.r<r||a[c].s.c<i){o=-1;break}o=a[c].e.r-a[c].s.r+1,l=a[c].e.c-a[c].s.c+1;break}if(!(o<0)){var d=uf({r:r,c:i}),u=n.dense?(e[r]||[])[i]:e[d],h=u&&null!=u.v&&(u.h||ku(u.w||(gf(u),u.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":u&&(f["data-t"]=u&&u.t||"z",null!=u.v&&(f["data-v"]=u.v),null!=u.z&&(f["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(h='<a href="'+u.l.Target+'">'+h+"</a>")),f.id=(n.id||"sjs")+"-"+d,s.push(Hu("td",h,f))}}return"<tr>"+s.join("")+"</tr>"}var wy='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',jy="</body></html>";function Ny(e,t,r){return[].join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function _y(e,t){var r=t||{},n=null!=r.header?r.header:wy,a=null!=r.footer?r.footer:jy,s=[n],i=hf(e["!ref"]);r.dense=Array.isArray(e),s.push(Ny(0,0,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(yy(e,i,o,r));return s.push("</table>"+a),s.join("")}function Sy(e,t,r){var n=r||{};var a=0,s=0;if(null!=n.origin)if("number"==typeof n.origin)a=n.origin;else{var i="string"==typeof n.origin?df(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=hf(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==a&&(c.e.r=a=d.e.r+1)}var u=[],h=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,g=0,v=0,b=0,x=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&m<l;++p){var y=o[p];if(Ay(y)){if(n.display)continue;f[m]={hidden:!0}}var w=y.children;for(g=v=0;g<w.length;++g){var j=w[g];if(!n.display||!Ay(j)){var N=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):Ru(j.innerHTML),_=j.getAttribute("data-z")||j.getAttribute("z");for(h=0;h<u.length;++h){var S=u[h];S.s.c==v+s&&S.s.r<m+a&&m+a<=S.e.r&&(v=S.e.c+1-s,h=-1)}x=+j.getAttribute("colspan")||1,((b=+j.getAttribute("rowspan")||1)>1||x>1)&&u.push({s:{r:m+a,c:v+s},e:{r:m+a+(b||1)-1,c:v+s+(x||1)-1}});var k={t:"s",v:N},A=j.getAttribute("data-t")||j.getAttribute("t")||"";null!=N&&(0==N.length?k.t=A||"z":n.raw||0==N.trim().length||"s"==A||("TRUE"===N?k={t:"b",v:!0}:"FALSE"===N?k={t:"b",v:!1}:isNaN($d(N))?isNaN(Xd(N).getDate())||(k={t:"d",v:Hd(N)},n.cellDates||(k={t:"n",v:Md(k.v)}),k.z=n.dateNF||zc[14]):k={t:"n",v:$d(N)})),void 0===k.z&&null!=_&&(k.z=_);var E="",C=j.getElementsByTagName("A");if(C&&C.length)for(var T=0;T<C.length&&(!C[T].hasAttribute("href")||"#"==(E=C[T].getAttribute("href")).charAt(0));++T);E&&"#"!=E.charAt(0)&&(k.l={Target:E}),n.dense?(e[m+a]||(e[m+a]=[]),e[m+a][v+s]=k):e[uf({c:v+s,r:m+a})]=k,c.e.c<v+s&&(c.e.c=v+s),v+=x}}++m}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,m-1+a),e["!ref"]=ff(c),m>=l&&(e["!fullref"]=ff((c.e.r=o.length-p+m-1+a,c))),e}function ky(e,t){return Sy((t||{}).dense?[]:{},e,t)}function Ay(e){var t="",r=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function Ey(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(e,t){return Array(parseInt(t,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[yu(t.replace(/<[^>]*>/g,""))]}var Cy={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Ty(e,t){var r=t||{};var n,a,s,i,o,l,c=Gu(e),d=[],u={name:""},h="",f=0,p={},m=[],g=r.dense?[]:{},v={value:""},b="",x=0,y=[],w=-1,j=-1,N={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,S={},k=[],A={},E=[],C=1,T=1,P=[],D={Names:[]},O={},I=["",""],M=[],R={},L="",F=0,B=!1,z=!1,U=0;for(Ku.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");o=Ku.exec(c);)switch(o[3]=o[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===o[1]?(N.e.c>=N.s.c&&N.e.r>=N.s.r?g["!ref"]=ff(N):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=N.e.r&&(g["!fullref"]=g["!ref"],N.e.r=r.sheetRows-1,g["!ref"]=ff(N)),k.length&&(g["!merges"]=k),E.length&&(g["!rows"]=E),s.name=s["\u540d\u79f0"]||s.name,"undefined"!==typeof JSON&&JSON.stringify(s),m.push(s.name),p[s.name]=g,z=!1):"/"!==o[0].charAt(o[0].length-2)&&(s=gu(o[0],!1),w=j=-1,N.s.r=N.s.c=1e7,N.e.r=N.e.c=0,g=r.dense?[]:{},k=[],E=[],z=!0);break;case"table-row-group":"/"===o[1]?--_:++_;break;case"table-row":case"\u884c":if("/"===o[1]){w+=C,C=1;break}if((i=gu(o[0],!1))["\u884c\u53f7"]?w=i["\u884c\u53f7"]-1:-1==w&&(w=0),(C=+i["number-rows-repeated"]||1)<10)for(U=0;U<C;++U)_>0&&(E[w+U]={level:_});j=-1;break;case"covered-table-cell":"/"!==o[1]&&++j,r.sheetStubs&&(r.dense?(g[w]||(g[w]=[]),g[w][j]={t:"z"}):g[uf({r:w,c:j})]={t:"z"}),b="",y=[];break;case"table-cell":case"\u6570\u636e":if("/"===o[0].charAt(o[0].length-2))++j,v=gu(o[0],!1),T=parseInt(v["number-columns-repeated"]||"1",10),l={t:"z",v:null},v.formula&&0!=r.cellFormula&&(l.f=hb(yu(v.formula))),"string"==(v["\u6570\u636e\u7c7b\u578b"]||v["value-type"])&&(l.t="s",l.v=yu(v["string-value"]||""),r.dense?(g[w]||(g[w]=[]),g[w][j]=l):g[uf({r:w,c:j})]=l),j+=T-1;else if("/"!==o[1]){b="",x=0,y=[],T=1;var q=C?w+C-1:w;if(++j>N.e.c&&(N.e.c=j),j<N.s.c&&(N.s.c=j),w<N.s.r&&(N.s.r=w),q>N.e.r&&(N.e.r=q),M=[],R={},l={t:(v=gu(o[0],!1))["\u6570\u636e\u7c7b\u578b"]||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=yu(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(A={s:{r:w,c:j},e:{r:w+(parseInt(v["number-matrix-rows-spanned"],10)||0)-1,c:j+(parseInt(v["number-matrix-columns-spanned"],10)||0)-1}},l.F=ff(A),P.push([A,l.F])),v.formula)l.f=hb(v.formula);else for(U=0;U<P.length;++U)w>=P[U][0].s.r&&w<=P[U][0].e.r&&j>=P[U][0].s.c&&j<=P[U][0].e.c&&(l.F=P[U][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(A={s:{r:w,c:j},e:{r:w+(parseInt(v["number-rows-spanned"],10)||0)-1,c:j+(parseInt(v["number-columns-spanned"],10)||0)-1}},k.push(A)),v["number-columns-repeated"]&&(T=parseInt(v["number-columns-repeated"],10)),l.t){case"boolean":l.t="b",l.v=Eu(v["boolean-value"]);break;case"float":case"percentage":case"currency":l.t="n",l.v=parseFloat(v.value);break;case"date":l.t="d",l.v=Hd(v["date-value"]),r.cellDates||(l.t="n",l.v=Md(l.v)),l.z="m/d/yy";break;case"time":l.t="n",l.v=zd(v["time-value"])/86400,r.cellDates&&(l.t="d",l.v=Bd(l.v)),l.z="HH:MM:SS";break;case"number":l.t="n",l.v=parseFloat(v["\u6570\u636e\u6570\u503c"]);break;default:if("string"!==l.t&&"text"!==l.t&&l.t)throw new Error("Unsupported value type "+l.t);l.t="s",null!=v["string-value"]&&(b=yu(v["string-value"]),y=[])}}else{if(B=!1,"s"===l.t&&(l.v=b||"",y.length&&(l.R=y),B=0==x),O.Target&&(l.l=O),M.length>0&&(l.c=M,M=[]),b&&!1!==r.cellText&&(l.w=b),B&&(l.t="z",delete l.v),(!B||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=w))for(var W=0;W<C;++W){if(T=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(g[w+W]||(g[w+W]=[]),g[w+W][j]=0==W?l:Gd(l);--T>0;)g[w+W][j+T]=Gd(l);else for(g[uf({r:w+W,c:j})]=l;--T>0;)g[uf({r:w+W,c:j+T})]=Gd(l);N.e.c<=j&&(N.e.c=j)}j+=(T=parseInt(v["number-columns-repeated"]||"1",10))-1,T=0,l={},b="",y=[]}O={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===o[1]){if((n=d.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!0]);break;case"annotation":if("/"===o[1]){if((n=d.pop())[0]!==o[3])throw"Bad state: "+n;R.t=b,y.length&&(R.R=y),R.a=L,M.push(R)}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!1]);L="",F=0,b="",x=0,y=[];break;case"creator":"/"===o[1]?L=c.slice(F,o.index):F=o.index+o[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===o[1]){if((n=d.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!1]);b="",x=0,y=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===o[1]){if(S[u.name]=h,(n=d.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&(h="",u=gu(o[0],!1),d.push([o[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(d[d.length-1][0]){case"time-style":case"date-style":a=gu(o[0],!1),h+=Cy[o[3]]["long"===a.style?1:0]}break;case"text":if("/>"===o[0].slice(-2))break;if("/"===o[1])switch(d[d.length-1][0]){case"number-style":case"date-style":case"time-style":h+=c.slice(f,o.index)}else f=o.index+o[0].length;break;case"named-range":I=pb((a=gu(o[0],!1))["cell-range-address"]);var H={Name:a.name,Ref:I[0]+"!"+I[1]};z&&(H.Sheet=m.length),D.Names.push(H);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(d[d.length-1][0])>-1)break;if("/"!==o[1]||v&&v["string-value"])gu(o[0],!1),x=o.index+o[0].length;else{var V=Ey(c.slice(x,o.index));b=(b.length>0?b+"\n":"")+V[0]}break;case"database-range":if("/"===o[1])break;try{p[(I=pb(gu(o[0])["target-range-address"]))[0]]["!autofilter"]={ref:I[1]}}catch(f2){}break;case"a":if("/"!==o[1]){if(!(O=gu(o[0],!1)).href)break;O.Target=yu(O.href),delete O.href,"#"==O.Target.charAt(0)&&O.Target.indexOf(".")>-1?(I=pb(O.Target.slice(1)),O.Target="#"+I[0]+"!"+I[1]):O.Target.match(/^\.\.[\\\/]/)&&(O.Target=O.Target.slice(3))}break;default:switch(o[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(r.WTF)throw new Error(o)}}var G={Sheets:p,SheetNames:m,Workbook:D};return r.bookSheets&&delete G.Sheets,G}function Py(e,t){t=t||{},eu(e,"META-INF/manifest.xml")&&function(e,t){for(var r,n,a=Gu(e);r=Ku.exec(a);)switch(r[3]){case"manifest":break;case"file-entry":if("/"==(n=gu(r[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==n.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw r}}(ru(e,"META-INF/manifest.xml"),t);var r=nu(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Ty(Ou(r),t);return eu(e,"meta.xml")&&(n.Props=gp(ru(e,"meta.xml"))),n}function Dy(e,t){return Ty(e,t)}var Oy=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Wu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return du+t}}(),Iy=function(){var e=function(e){return Nu(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",r=function(r,n,a){var s=[];s.push('      <table:table table:name="'+Nu(n.SheetNames[a])+'" table:style-name="ta1">\n');var i=0,o=0,l=hf(r["!ref"]||"A1"),c=r["!merges"]||[],d=0,u=Array.isArray(r);if(r["!cols"])for(o=0;o<=l.e.c;++o)s.push("        <table:table-column"+(r["!cols"][o]?' table:style-name="co'+r["!cols"][o].ods+'"':"")+"></table:table-column>\n");var h="",f=r["!rows"]||[];for(i=0;i<l.s.r;++i)h=f[i]?' table:style-name="ro'+f[i].ods+'"':"",s.push("        <table:table-row"+h+"></table:table-row>\n");for(;i<=l.e.r;++i){for(h=f[i]?' table:style-name="ro'+f[i].ods+'"':"",s.push("        <table:table-row"+h+">\n"),o=0;o<l.s.c;++o)s.push(t);for(;o<=l.e.c;++o){var p=!1,m={},g="";for(d=0;d!=c.length;++d)if(!(c[d].s.c>o)&&!(c[d].s.r>i)&&!(c[d].e.c<o)&&!(c[d].e.r<i)){c[d].s.c==o&&c[d].s.r==i||(p=!0),m["table:number-columns-spanned"]=c[d].e.c-c[d].s.c+1,m["table:number-rows-spanned"]=c[d].e.r-c[d].s.r+1;break}if(p)s.push("          <table:covered-table-cell/>\n");else{var v=uf({r:i,c:o}),b=u?(r[i]||[])[o]:r[v];if(b&&b.f&&(m["table:formula"]=Nu(fb(b.f)),b.F&&b.F.slice(0,v.length)==v)){var x=hf(b.F);m["table:number-matrix-columns-spanned"]=x.e.c-x.s.c+1,m["table:number-matrix-rows-spanned"]=x.e.r-x.s.r+1}if(b){switch(b.t){case"b":g=b.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=b.v?"true":"false";break;case"n":g=b.w||String(b.v||0),m["office:value-type"]="float",m["office:value"]=b.v||0;break;case"s":case"str":g=null==b.v?"":b.v,m["office:value-type"]="string";break;case"d":g=b.w||Hd(b.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=Hd(b.v).toISOString(),m["table:style-name"]="ce1";break;default:s.push(t);continue}var y=e(g);if(b.l&&b.l.Target){var w=b.l.Target;"#"==(w="#"==w.charAt(0)?"#"+mb(w.slice(1)):w).charAt(0)||w.match(/^\w+:/)||(w="../"+w),y=Hu("text:a",y,{"xlink:href":w.replace(/&/g,"&amp;")})}s.push("          "+Hu("table:table-cell",Hu("text:p",y,{}),m)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var n=[du],a=Wu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=Wu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(n.push("<office:document"+a+s+">\n"),n.push(fp().replace(/office:document-meta/g,"office:meta"))):n.push("<office:document-content"+a+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var n=0;n<t["!cols"].length;++n)if(t["!cols"][n]){var a=t["!cols"][n];if(null==a.width&&null==a.wpx&&null==a.wch)continue;Pg(a),a.ods=r;var s=t["!cols"][n].wpx+"px";e.push('  <style:style style:name="co'+r+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++r}});var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var r=0;r<t["!rows"].length;++r)if(t["!rows"][r]){t["!rows"][r].ods=n;var a=t["!rows"][r].hpx+"px";e.push('  <style:style style:name="ro'+n+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+a+'"/>\n'),e.push("  </style:style>\n"),++n}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(n,e),n.push("  <office:body>\n"),n.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)n.push(r(e.Sheets[e.SheetNames[i]],e,i));return n.push("    </office:spreadsheet>\n"),n.push("  </office:body>\n"),"fods"==t.bookType?n.push("</office:document>"):n.push("</office:document-content>"),n.join("")}}();function My(e,t){if("fods"==t.bookType)return Iy(e,t);var r=ou(),n="",a=[],s=[];return iu(r,n="mimetype","application/vnd.oasis.opendocument.spreadsheet"),iu(r,n="content.xml",Iy(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),iu(r,n="styles.xml",Oy(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),iu(r,n="meta.xml",du+fp()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),iu(r,n="manifest.rdf",function(e){var t=[du];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var r=0;r!=e.length;++r)t.push(up(e[r][0],e[r][1])),t.push(hp("",e[r][0]));return t.push(up("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),a.push([n,"application/rdf+xml"]),iu(r,n="META-INF/manifest.xml",function(e){var t=[du];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(a)),r}function Ry(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ly(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Ou(kc(e))}function Fy(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):_c(Iu(e))}function By(e){var t=e.reduce(function(e,t){return e+t.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r}function zy(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function Uy(e,t){var r=t?t[0]:0,n=127&e[r];e:if(e[r++]>=128){if(n|=(127&e[r])<<7,e[r++]<128)break e;if(n|=(127&e[r])<<14,e[r++]<128)break e;if(n|=(127&e[r])<<21,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,28),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,35),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,42),++r,e[r++]<128)break e}return t&&(t[0]=r),n}function qy(e){var t=new Uint8Array(7);t[0]=127&e;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383)break e;if(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)break e;if(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)break e;if(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)break e;if(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103)break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Wy(e){var t=0,r=127&e[t];e:if(e[t++]>=128){if(r|=(127&e[t])<<7,e[t++]<128)break e;if(r|=(127&e[t])<<14,e[t++]<128)break e;if(r|=(127&e[t])<<21,e[t++]<128)break e;r|=(127&e[t])<<28}return r}function Hy(e){for(var t=[],r=[0];r[0]<e.length;){var n,a=r[0],s=Uy(e,r),i=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(i){case 0:for(var l=r[0];e[r[0]++]>=128;);n=e.slice(l,r[0]);break;case 5:o=4,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Uy(e,r),n=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var c={data:n,type:i};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function Vy(e){var t=[];return e.forEach(function(e,r){e.forEach(function(e){e.data&&(t.push(qy(8*r+e.type)),2==e.type&&t.push(qy(e.data.length)),t.push(e.data))})}),By(t)}function Gy(e,t){return(null==e?void 0:e.map(function(e){return t(e.data)}))||[]}function Ky(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Uy(e,n),s=Hy(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Wy(s[1][0].data),messages:[]};s[2].forEach(function(t){var r=Hy(t.data),a=Wy(r[3][0].data);i.messages.push({meta:r,data:e.slice(n[0],n[0]+a)}),n[0]+=a}),(null==(t=s[3])?void 0:t[0])&&(i.merge=Wy(s[3][0].data)>>>0>0),r.push(i)}return r}function $y(e){var t=[];return e.forEach(function(e){var r=[];r[1]=[{data:qy(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:qy(+!!e.merge),type:0}]);var n=[];e.messages.forEach(function(e){n.push(e.data),e.meta[3]=[{type:0,data:qy(e.data.length)}],r[2].push({data:Vy(e.meta),type:2})});var a=Vy(r);t.push(qy(a.length)),t.push(a),n.forEach(function(e){return t.push(e)})}),By(t)}function Yy(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Uy(t,r),a=[];r[0]<t.length;){var s=3&t[r[0]];if(0!=s){var i=0,o=0;if(1==s?(o=4+(t[r[0]]>>2&7),i=(224&t[r[0]++])<<3,i|=t[r[0]++]):(o=1+(t[r[0]++]>>2),2==s?(i=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(i=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[By(a)],0==i)throw new Error("Invalid offset 0");if(i>a[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(a.push(a[0].slice(-i)),o-=i;o>=a[a.length-1].length;)a.push(a[a.length-1]),o-=a[a.length-1].length;a.push(a[0].slice(-i,-i+o))}else{var l=t[r[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[r[0]],c>1&&(l|=t[r[0]+1]<<8),c>2&&(l|=t[r[0]+2]<<16),c>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=c}a.push(t.slice(r[0],r[0]+l)),r[0]+=l}}var d=By(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Xy(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Yy(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return By(t)}function Jy(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=qy(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=255&i,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return By(t)}function Zy(e,t,r){var n,a=Ry(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);switch(1&s&&(c=function(e,t){for(var r=(127&e[t+15])<<7|e[t+14]>>1,n=1&e[t+14],a=t+13;a>=t;--a)n=256*n+e[a];return(128&e[t+15]?-n:n)*Math.pow(10,r-6176)}(e,i),i+=16),2&s&&(d=a.getFloat64(i,!0),i+=8),4&s&&(u.setTime(u.getTime()+1e3*a.getFloat64(i,!0)),i+=8),8&s&&(l=a.getUint32(i,!0),i+=4),16&s&&(o=a.getUint32(i,!0),i+=4),e[1]){case 0:break;case 2:case 10:n={t:"n",v:c};break;case 3:n={t:"s",v:t[l]};break;case 5:n={t:"d",v:u};break;case 6:n={t:"b",v:d>0};break;case 7:n={t:"n",v:d/86400};break;case 8:n={t:"e",v:0};break;case 9:if(!(o>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)));n={t:"s",v:r[o]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)))}return n}function Qy(e,t){var r=new Uint8Array(32),n=Ry(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,function(e,t,r){var n=Math.floor(0==r?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(127&n)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=255&a;e[t+15]|=r>=0?0:128}(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function ew(e,t){var r=new Uint8Array(32),n=Ry(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function tw(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,r,n){var a,s=Ry(e),i=s.getUint32(4,!0),o=(n>1?12:8)+4*zy(i&(n>1?3470:398)),l=-1,c=-1,d=NaN,u=new Date(2001,0,1);switch(512&i&&(l=s.getUint32(o,!0),o+=4),o+=4*zy(i&(n>1?12288:4096)),16&i&&(c=s.getUint32(o,!0),o+=4),32&i&&(d=s.getFloat64(o,!0),o+=8),64&i&&(u.setTime(u.getTime()+1e3*s.getFloat64(o,!0)),o+=8),e[2]){case 0:break;case 2:a={t:"n",v:d};break;case 3:a={t:"s",v:t[c]};break;case 5:a={t:"d",v:u};break;case 6:a={t:"b",v:d>0};break;case 7:a={t:"n",v:d/86400};break;case 8:a={t:"e",v:0};break;case 9:if(l>-1)a={t:"s",v:r[l]};else if(c>-1)a={t:"s",v:t[c]};else{if(isNaN(d))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));a={t:"n",v:d}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return a}(e,t,r,e[0]);case 5:return Zy(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function rw(e){return Uy(Hy(e)[1][0].data)}function nw(e,t){var r=Hy(t.data),n=Wy(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(t){var r=Hy(t.data),a=Wy(r[1][0].data)>>>0;switch(n){case 1:s[a]=Ly(r[3][0].data);break;case 8:var i=Hy(e[rw(r[9][0].data)][0].data),o=e[rw(i[1][0].data)][0],l=Wy(o.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=Hy(o.data);s[a]=c[3].map(function(e){return Ly(e.data)}).join("")}}),s}function aw(e,t){var r,n=Hy(t.data),a=(null==(r=null==n?void 0:n[7])?void 0:r[0])?Wy(n[7][0].data)>>>0>0?1:0:-1,s=Gy(n[5],function(e){return function(e,t){var r,n,a,s,i,o,l,c,d,u,h,f,p,m,g,v,b=Hy(e),x=Wy(b[1][0].data)>>>0,y=Wy(b[2][0].data)>>>0,w=(null==(n=null==(r=b[8])?void 0:r[0])?void 0:n.data)&&Wy(b[8][0].data)>0||!1;if((null==(s=null==(a=b[7])?void 0:a[0])?void 0:s.data)&&0!=t)g=null==(o=null==(i=b[7])?void 0:i[0])?void 0:o.data,v=null==(c=null==(l=b[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(u=null==(d=b[4])?void 0:d[0])?void 0:u.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");g=null==(f=null==(h=b[4])?void 0:h[0])?void 0:f.data,v=null==(m=null==(p=b[3])?void 0:p[0])?void 0:m.data}for(var j=w?4:1,N=Ry(g),_=[],S=0;S<g.length/2;++S){var k=N.getUint16(2*S,!0);k<65535&&_.push([S,k])}if(_.length!=y)throw"Expected ".concat(y," cells, found ").concat(_.length);var A=[];for(S=0;S<_.length-1;++S)A[_[S][0]]=v.subarray(_[S][1]*j,_[S+1][1]*j);return _.length>=1&&(A[_[_.length-1][0]]=v.subarray(_[_.length-1][1]*j)),{R:x,cells:A}}(e,a)});return{nrows:Wy(n[4][0].data)>>>0,data:s.reduce(function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach(function(r,n){if(e[t.R][n])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(n));e[t.R][n]=r}),e},[])}}function sw(e,t){var r={"!ref":"A1"},n=e[rw(Hy(t.data)[2][0].data)],a=Wy(n[0].meta[1][0].data);if(6001!=a)throw new Error("6000 unexpected reference to ".concat(a));return function(e,t,r){var n,a=Hy(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Wy(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Wy(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=ff(s);var i=Hy(a[4][0].data),o=nw(e,e[rw(i[4][0].data)][0]),l=(null==(n=i[17])?void 0:n[0])?nw(e,e[rw(i[17][0].data)][0]):[],c=Hy(i[3][0].data),d=0;c[1].forEach(function(t){var n=Hy(t.data),a=e[rw(n[2][0].data)][0],s=Wy(a.meta[1][0].data);if(6002!=s)throw new Error("6001 unexpected reference to ".concat(s));var i=aw(0,a);i.data.forEach(function(e,t){e.forEach(function(e,n){var a=uf({r:d+t,c:n}),s=tw(e,o,l);s&&(r[a]=s)})}),d+=i.nrows})}(e,n[0],r),r}function iw(e,t){var r={SheetNames:[],Sheets:{}};if(Gy(Hy(t.data)[1],rw).forEach(function(t){e[t].forEach(function(t){if(2==Wy(t.meta[1][0].data)){var n=function(e,t){var r,n=Hy(t.data),a={name:(null==(r=n[1])?void 0:r[0])?Ly(n[1][0].data):"",sheets:[]};return Gy(n[2],rw).forEach(function(t){e[t].forEach(function(t){6e3==Wy(t.meta[1][0].data)&&a.sheets.push(sw(e,t))})}),a}(e,t);n.sheets.forEach(function(e,t){Fw(r,e,0==t?n.name:n.name+"_"+t,!0)})}})}),0==r.SheetNames.length)throw new Error("Empty NUMBERS file");return r}function ow(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(e){if(e.name.match(/\.iwa$/)){var t,r;try{t=Xy(e.content)}catch(f2){return console.log("?? "+e.content.length+" "+(f2.message||f2))}try{r=Ky(t)}catch(f2){return console.log("## "+(f2.message||f2))}r.forEach(function(e){s[e.id]=e.messages,i.push(e.id)})}}),!i.length)throw new Error("File has no messages");var o=(null==(a=null==(n=null==(r=null==(t=null==s?void 0:s[1])?void 0:t[0])?void 0:r.meta)?void 0:n[1])?void 0:a[0].data)&&1==Wy(s[1][0].meta[1][0].data)&&s[1][0];if(o||i.forEach(function(e){s[e].forEach(function(e){if(1==Wy(e.meta[1][0].data)>>>0){if(o)throw new Error("Document has multiple roots");o=e}})}),!o)throw new Error("Cannot find Document root");return iw(s,o)}function lw(e,t,r){var n,a,s,i;if(!(null==(n=e[6])?void 0:n[0])||!(null==(a=e[7])?void 0:a[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(s=e[8])?void 0:s[0])?void 0:i.data)&&Wy(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=Ry(e[7][0].data),c=0,d=[],u=Ry(e[4][0].data),h=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var m,g;switch(l.setUint16(2*p,c,!0),u.setUint16(2*p,h,!0),typeof t[p]){case"string":m=Qy({t:"s",v:t[p]},r),g=ew({t:"s",v:t[p]},r);break;case"number":m=Qy({t:"n",v:t[p]},r),g=ew({t:"n",v:t[p]},r);break;case"boolean":m=Qy({t:"b",v:t[p]},r),g=ew({t:"b",v:t[p]},r);break;default:throw new Error("Unsupported value "+t[p])}d.push(m),c+=m.length,f.push(g),h+=g.length,++o}else l.setUint16(2*p,65535,!0),u.setUint16(2*p,65535);for(e[2][0].data=qy(o);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),u.setUint16(2*p,65535,!0);return e[6][0].data=By(d),e[3][0].data=By(f),o}function cw(e){return function(t){for(var r=0;r!=e.length;++r){var n=e[r];void 0===t[n[0]]&&(t[n[0]]=n[1]),"n"===n[2]&&(t[n[0]]=Number(t[n[0]]))}}}function dw(e){cw([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function uw(e){cw([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function hw(e,t,r,n,a,s,i,o,l,c,d,u){try{s[n]=lp(nu(e,r,!0),t);var h,f=ru(e,t);switch(o){case"sheet":h=jx(f,t,a,l,s[n],c,d,u);break;case"chart":if(!(h=Nx(f,t,a,l,s[n],c))||!h["!drawel"])break;var p=cu(h["!drawel"].Target,t),m=op(p),g=function(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}(nu(e,p,!0),lp(nu(e,m,!0),p)),v=cu(g,p),b=op(v);h=ax(nu(e,v,!0),0,0,lp(nu(e,b,!0),v),0,h);break;case"macro":y=t,s[n],y.slice(-4),h={"!type":"macro"};break;case"dialog":h=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,s[n]);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=h;var x=[];s&&s[n]&&Td(s[n]).forEach(function(r){var a="";if(s[n][r].Type==ip.CMNT){a=cu(s[n][r].Target,t);var i=kx(ru(e,a,!0),a,l);if(!i||!i.length)return;gv(h,i,!1)}s[n][r].Type==ip.TCMNT&&(a=cu(s[n][r].Target,t),x=x.concat(function(e,t){var r=[],n=!1,a={},s=0;return e.replace(fu,function(i,o){var l=gu(i);switch(vu(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":a={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=a.t&&r.push(a);break;case"<text>":case"<text":s=o+i.length;break;case"</text>":a.t=e.slice(s,o).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":n=!0;break;case"</mentions>":case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}(ru(e,a,!0),l)))}),x&&x.length&&gv(h,x,!0,l.people||[])}catch(f2){if(l.WTF)throw f2}var y}function fw(e){return"/"==e.charAt(0)?e.slice(1):e}function pw(e,t){if(wd(),dw(t=t||{}),eu(e,"META-INF/manifest.xml"))return Py(e,t);if(eu(e,"objectdata.xml"))return Py(e,t);if(eu(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return ow(e);var r=kd.utils.cfb_new();return su(e).forEach(function(t){iu(r,t,au(e,t))}),ow(r)}if(!eu(e,"[Content_Types].xml")){if(eu(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(eu(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var n,a,s=su(e),i=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var r={};if((e.match(fu)||[]).forEach(function(e){var n=gu(e);switch(n[0].replace(pu,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":void 0!==t[np[n.ContentType]]&&t[np[n.ContentType]].push(n.PartName)}}),t.xmlns!==Ju)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}(nu(e,"[Content_Types].xml")),o=!1;if(0===i.workbooks.length&&ru(e,a="xl/workbook.xml",!0)&&i.workbooks.push(a),0===i.workbooks.length){if(!ru(e,a="xl/workbook.bin",!0))throw new Error("Could not find workbook");i.workbooks.push(a),o=!0}"bin"==i.workbooks[0].slice(-3)&&(o=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(gb=[],i.sst)try{gb=Sx(ru(e,fw(i.sst)),i.sst,t)}catch(f2){if(t.WTF)throw f2}t.cellStyles&&i.themes.length&&(l=function(e,t,r){return ov(e,r)}(nu(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=_x(ru(e,fw(i.style)),i.style,l,t))}i.links.map(function(r){try{lp(nu(e,op(fw(r))),r);return Ex(ru(e,fw(r)),0,r,t)}catch(f2){}});var d=wx(ru(e,fw(i.workbooks[0])),i.workbooks[0],t),u={},h="";i.coreprops.length&&((h=ru(e,fw(i.coreprops[0]),!0))&&(u=gp(h)),0!==i.extprops.length&&(h=ru(e,fw(i.extprops[0]),!0))&&function(e,t,r){var n={};t||(t={}),e=Ou(e),xp.forEach(function(r){var a=(e.match(Mu(r[0]))||[])[1];switch(r[2]){case"string":a&&(t[r[1]]=yu(a));break;case"bool":t[r[1]]="true"===a;break;case"raw":var s=e.match(new RegExp("<"+r[0]+"[^>]*>([\\s\\S]*?)</"+r[0]+">"));s&&s.length>0&&(n[r[1]]=s[1])}}),n.HeadingPairs&&n.TitlesOfParts&&wp(n.HeadingPairs,n.TitlesOfParts,t,r)}(h,u,t));var f={};t.bookSheets&&!t.bookProps||0!==i.custprops.length&&(h=nu(e,fw(i.custprops[0]),!0))&&(f=function(e,t){var r={},n="",a=e.match(Np);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=gu(i);switch(o[0]){case"<?xml":case"<Properties":break;case"<property":n=yu(o.name);break;case"</property>":n=null;break;default:if(0===i.indexOf("<vt:")){var l=i.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":r[n]=yu(d);break;case"bool":r[n]=Eu(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Hd(d);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",i,c,l)}}else if("</"===i.slice(0,2));else if(t.WTF)throw new Error(i)}}return r}(h,t));var p={};if((t.bookSheets||t.bookProps)&&(d.Sheets?n=d.Sheets.map(function(e){return e.name}):u.Worksheets&&u.SheetNames.length>0&&(n=u.SheetNames),t.bookProps&&(p.Props=u,p.Custprops=f),t.bookSheets&&"undefined"!==typeof n&&(p.SheetNames=n),t.bookSheets?p.SheetNames:t.bookProps))return p;n={};var m={};t.bookDeps&&i.calcchain&&(m=Ax(ru(e,fw(i.calcchain)),i.calcchain));var g,v,b=0,x={},y=d.Sheets;u.Worksheets=y.length,u.SheetNames=[];for(var w=0;w!=y.length;++w)u.SheetNames[w]=y[w].name;var j=o?"bin":"xml",N=i.workbooks[0].lastIndexOf("/"),_=(i.workbooks[0].slice(0,N+1)+"_rels/"+i.workbooks[0].slice(N+1)+".rels").replace(/^\//,"");eu(e,_)||(_="xl/_rels/workbook."+j+".rels");var S=lp(nu(e,_,!0),_.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=Cx(ru(e,fw(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=function(e,t){var r=[],n=!1;return e.replace(fu,function(e){var a=gu(e);switch(vu(a[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return e}),r}(ru(e,fw(i.people[0])),t)),S&&(S=function(e,t){if(!e)return 0;try{e=t.map(function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,(r=e["!id"][t.id].Type,ip.WS.indexOf(r)>-1?"sheet":ip.CS&&r==ip.CS?"chart":ip.DS&&r==ip.DS?"dialog":ip.MS&&r==ip.MS?"macro":r&&r.length?r:"sheet")];var r})}catch(f2){return null}return e&&0!==e.length?e:null}(S,d.Sheets));var k=ru(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=u.Worksheets;++b){var A="sheet";if(S&&S[b]?(g="xl/"+S[b][1].replace(/[\/]?xl\//,""),eu(e,g)||(g=S[b][1]),eu(e,g)||(g=_.replace(/_rels\/.*$/,"")+S[b][1]),A=S[b][2]):g=(g="xl/worksheets/sheet"+(b+1-k)+"."+j).replace(/sheet0\./,"sheet."),v=g.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(u.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var E=!1,C=0;C!=t.sheets.length;++C)"number"==typeof t.sheets[C]&&t.sheets[C]==b&&(E=1),"string"==typeof t.sheets[C]&&t.sheets[C].toLowerCase()==u.SheetNames[b].toLowerCase()&&(E=1);if(!E)continue e}}hw(e,g,v,u.SheetNames[b],b,x,n,A,t,d,l,c)}return p={Directory:i,Workbook:d,Props:u,Custprops:f,Deps:m,Sheets:n,SheetNames:u.SheetNames,Strings:gb,Styles:c,Themes:l,SSF:Gd(zc)},t&&t.bookFiles&&(e.files?(p.keys=s,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(t,r){t=t.replace(/^Root Entry[\/]/,""),p.keys.push(t),p.files[t]=e.FileIndex[r]}))),t&&t.bookVBA&&(i.vba.length>0?p.vbaraw=ru(e,fw(i.vba[0]),!0):i.defaults&&"application/vnd.ms-office.vbaProject"===i.defaults.bin&&(p.vbaraw=ru(e,"xl/vbaProject.bin",!0))),p}function mw(e,t){var r=t||{},n="Workbook",a=kd.find(e,n);try{if(n="/!DataSpaces/Version",!(a=kd.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(function(e){var t={};t.id=e.read_shift(0,"lpp4"),t.R=dg(e,4),t.U=dg(e,4),t.W=dg(e,4)}(a.content),n="/!DataSpaces/DataSpaceMap",!(a=kd.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=function(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(ug(e));return t}(a.content);if(1!==s.length||1!==s[0].comps.length||0!==s[0].comps[0].t||"StrongEncryptionDataSpace"!==s[0].name||"EncryptedPackage"!==s[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(a=kd.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=function(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(a.content);if(1!=i.length||"StrongEncryptionTransform"!=i[0])throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(a=kd.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);hg(a.content)}catch(f2){}if(n="/EncryptionInfo",!(a=kd.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=function(e){var t=dg(e);switch(t.Minor){case 2:return[t.Minor,mg(e)];case 3:return[t.Minor,gg()];case 4:return[t.Minor,vg(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(a.content);if(n="/EncryptedPackage",!(a=kd.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(4==o[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(o[1],a.content,r.password||"",r);if(2==o[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function gw(e,t){return"ods"==t.bookType?My(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=hf(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(ff(n)));var s=Tw(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&i.push(e)})});var o={},l=[],c=kd.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],r=e[1];2==t.type&&t.name.match(/\.iwa/)&&Ky(Xy(t.content)).forEach(function(e){l.push(e.id),o[e.id]={deps:[],location:r,type:Wy(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var d=l.filter(function(e){return e>1}).map(function(e){return[e,qy(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&Ky(Xy(t.content)).forEach(function(e){e.messages.forEach(function(t){d.forEach(function(t){e.messages.some(function(e){return 11006!=Wy(e.meta[1][0].data)&&function(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}(e.data,t[1])})&&o[t[0]].deps.push(e.id)})})})});for(var u,h=kd.find(c,o[1].location),f=Ky(Xy(h.content)),p=0;p<f.length;++p){var m=f[p];1==m.id&&(u=m)}var g=rw(Hy(u.messages[0].data)[1][0].data);for(f=Ky(Xy((h=kd.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(u=m);for(g=rw(Hy(u.messages[0].data)[2][0].data),f=Ky(Xy((h=kd.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(u=m);for(g=rw(Hy(u.messages[0].data)[2][0].data),f=Ky(Xy((h=kd.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(u=m);var v=Hy(u.messages[0].data);v[6][0].data=qy(n.e.r+1),v[7][0].data=qy(n.e.c+1);for(var b=rw(v[46][0].data),x=kd.find(c,o[b].location),y=Ky(Xy(x.content)),w=0;w<y.length&&y[w].id!=b;++w);if(y[w].id!=b)throw"Bad ColumnRowUIDMapArchive";var j=Hy(y[w].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var N=0;N<=n.e.c;++N){var _=[];_[1]=_[2]=[{type:0,data:qy(N+420690)}],j[1].push({type:2,data:Vy(_)}),j[2].push({type:0,data:qy(N)}),j[3].push({type:0,data:qy(N)})}j[4]=[],j[5]=[],j[6]=[];for(var S=0;S<=n.e.r;++S)(_=[])[1]=_[2]=[{type:0,data:qy(S+726270)}],j[4].push({type:2,data:Vy(_)}),j[5].push({type:0,data:qy(S)}),j[6].push({type:0,data:qy(S)});y[w].messages[0].data=Vy(j),x.content=Jy($y(y)),x.size=x.content.length,delete v[46];var k=Hy(v[4][0].data);k[7][0].data=qy(n.e.r+1);var A=rw(Hy(k[1][0].data)[2][0].data);if((y=Ky(Xy((x=kd.find(c,o[A].location)).content)))[0].id!=A)throw"Bad HeaderStorageBucket";var E=Hy(y[0].messages[0].data);for(S=0;S<s.length;++S){var C=Hy(E[2][0].data);C[1][0].data=qy(S),C[4][0].data=qy(s[S].length),E[2][S]={type:E[2][0].type,data:Vy(C)}}y[0].messages[0].data=Vy(E),x.content=Jy($y(y)),x.size=x.content.length;var T=rw(k[2][0].data);if((y=Ky(Xy((x=kd.find(c,o[T].location)).content)))[0].id!=T)throw"Bad HeaderStorageBucket";for(E=Hy(y[0].messages[0].data),N=0;N<=n.e.c;++N)(C=Hy(E[2][0].data))[1][0].data=qy(N),C[4][0].data=qy(n.e.r+1),E[2][N]={type:E[2][0].type,data:Vy(C)};y[0].messages[0].data=Vy(E),x.content=Jy($y(y)),x.size=x.content.length;var P=rw(k[4][0].data);!function(){for(var e,t=kd.find(c,o[P].location),r=Ky(Xy(t.content)),n=0;n<r.length;++n){var a=r[n];a.id==P&&(e=a)}var s=Hy(e.messages[0].data);s[3]=[];var l=[];i.forEach(function(e,t){l[1]=[{type:0,data:qy(t)}],l[2]=[{type:0,data:qy(1)}],l[3]=[{type:2,data:Fy(e)}],s[3].push({type:2,data:Vy(l)})}),e.messages[0].data=Vy(s);var d=Jy($y(r));t.content=d,t.size=t.content.length}();var D=Hy(k[3][0].data),O=D[1][0];delete D[2];var I=Hy(O.data),M=rw(I[2][0].data);!function(){for(var e,t=kd.find(c,o[M].location),r=Ky(Xy(t.content)),a=0;a<r.length;++a){var l=r[a];l.id==M&&(e=l)}var d=Hy(e.messages[0].data);delete d[6],delete D[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var h=0,f=0;f<=n.e.r;++f){var p=Hy(u);h+=lw(p,s[f],i),p[1][0].data=qy(f),d[5].push({data:Vy(p),type:2})}d[1]=[{type:0,data:qy(n.e.c+1)}],d[2]=[{type:0,data:qy(n.e.r+1)}],d[3]=[{type:0,data:qy(h)}],d[4]=[{type:0,data:qy(n.e.r+1)}],e.messages[0].data=Vy(d);var m=Jy($y(r));t.content=m,t.size=t.content.length}(),O.data=Vy(I),k[3][0].data=Vy(D),v[4][0].data=Vy(k),u.messages[0].data=Vy(v);var R=Jy($y(f));return h.content=R,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){pv=1024,e&&!e.SSF&&(e.SSF=Gd(zc));e&&e.SSF&&(wd(),yd(e.SSF),t.revssf=Od(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,bb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xlsb"==t.bookType?"bin":"xml",n=wv.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};uw(t=t||{});var s=ou(),i="",o=0;t.cellXfs=[],jb(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(i="docProps/core.xml",iu(s,i,bp(e.Props,t)),a.coreprops.push(i),dp(t.rels,2,i,ip.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,iu(s,i,jp(e.Props)),a.extprops.push(i),dp(t.rels,3,i,ip.EXT_PROPS),e.Custprops!==e.Props&&Td(e.Custprops||{}).length>0&&(iu(s,i="docProps/custom.xml",_p(e.Custprops)),a.custprops.push(i),dp(t.rels,4,i,ip.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},u=e.Sheets[e.SheetNames[o-1]];(u||{})["!type"];if(iu(s,i="xl/worksheets/sheet"+o+"."+r,Tx(o-1,i,t,e,d)),a.sheets.push(i),dp(t.wbrels,-1,"worksheets/sheet"+o+"."+r,ip.WS[0]),u){var h=u["!comments"],f=!1,p="";h&&h.length>0&&(iu(s,p="xl/comments"+o+"."+r,Px(h,p,t)),a.comments.push(p),dp(d,-1,"../comments"+o+"."+r,ip.CMNT),f=!0),u["!legacy"]&&f&&iu(s,"xl/drawings/vmlDrawing"+o+".vml",mv(o,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&iu(s,op(i),cp(d))}null!=t.Strings&&t.Strings.length>0&&(iu(s,i="xl/sharedStrings."+r,function(e,t,r){return(".bin"===t.slice(-4)?lg:ig)(e,r)}(t.Strings,i,t)),a.strs.push(i),dp(t.wbrels,-1,"sharedStrings."+r,ip.SST));i="xl/workbook."+r,iu(s,i,function(e,t,r){return(".bin"===t.slice(-4)?yx:gx)(e,r)}(e,i,t)),a.workbooks.push(i),dp(t.rels,1,i,ip.WB),i="xl/theme/theme1.xml",iu(s,i,lv(e.Themes,t)),a.themes.push(i),dp(t.wbrels,-1,"theme/theme1.xml",ip.THEME),i="xl/styles."+r,iu(s,i,function(e,t,r){return(".bin"===t.slice(-4)?Zg:Bg)(e,r)}(e,i,t)),a.styles.push(i),dp(t.wbrels,-1,"styles."+r,ip.STY),e.vbaraw&&n&&(iu(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),dp(t.wbrels,-1,"vbaProject.bin",ip.VBA));return i="xl/metadata."+r,iu(s,i,function(e){return(".bin"===e.slice(-4)?hv:fv)()}(i)),a.metadata.push(i),dp(t.wbrels,-1,"metadata."+r,ip.XLMETA),iu(s,"[Content_Types].xml",sp(a,t)),iu(s,"_rels/.rels",cp(t.rels)),iu(s,"xl/_rels/workbook."+r+".rels",cp(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):vw(e,t)}function vw(e,t){pv=1024,e&&!e.SSF&&(e.SSF=Gd(zc)),e&&e.SSF&&(wd(),yd(e.SSF),t.revssf=Od(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,bb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=wv.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};uw(t=t||{});var s=ou(),i="",o=0;if(t.cellXfs=[],jb(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),iu(s,i="docProps/core.xml",bp(e.Props,t)),a.coreprops.push(i),dp(t.rels,2,i,ip.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,iu(s,i,jp(e.Props)),a.extprops.push(i),dp(t.rels,3,i,ip.EXT_PROPS),e.Custprops!==e.Props&&Td(e.Custprops||{}).length>0&&(iu(s,i="docProps/custom.xml",_p(e.Custprops)),a.custprops.push(i),dp(t.rels,4,i,ip.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(iu(s,i="xl/worksheets/sheet"+o+"."+r,qb(o-1,t,e,u)),a.sheets.push(i),dp(t.wbrels,-1,"worksheets/sheet"+o+"."+r,ip.WS[0]),h){var f=h["!comments"],p=!1,m="";if(f&&f.length>0){var g=!1;f.forEach(function(e){e[1].forEach(function(e){1==e.T&&(g=!0)})}),g&&(iu(s,m="xl/threadedComments/threadedComment"+o+"."+r,bv(f,d,t)),a.threadedcomments.push(m),dp(u,-1,"../threadedComments/threadedComment"+o+"."+r,ip.TCMNT)),iu(s,m="xl/comments"+o+"."+r,vv(f)),a.comments.push(m),dp(u,-1,"../comments"+o+"."+r,ip.CMNT),p=!0}h["!legacy"]&&p&&iu(s,"xl/drawings/vmlDrawing"+o+".vml",mv(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&iu(s,op(i),cp(u))}return null!=t.Strings&&t.Strings.length>0&&(iu(s,i="xl/sharedStrings."+r,ig(t.Strings,t)),a.strs.push(i),dp(t.wbrels,-1,"sharedStrings."+r,ip.SST)),iu(s,i="xl/workbook."+r,gx(e)),a.workbooks.push(i),dp(t.rels,1,i,ip.WB),iu(s,i="xl/theme/theme1.xml",lv(e.Themes,t)),a.themes.push(i),dp(t.wbrels,-1,"theme/theme1.xml",ip.THEME),iu(s,i="xl/styles."+r,Bg(e,t)),a.styles.push(i),dp(t.wbrels,-1,"styles."+r,ip.STY),e.vbaraw&&n&&(iu(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),dp(t.wbrels,-1,"vbaProject.bin",ip.VBA)),iu(s,i="xl/metadata."+r,fv()),a.metadata.push(i),dp(t.wbrels,-1,"metadata."+r,ip.XLMETA),d.length>1&&(iu(s,i="xl/persons/person.xml",function(e){var t=[du,Hu("personList",null,{xmlns:Qu,"xmlns:x":oh[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,r){t.push(Hu("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(d)),a.people.push(i),dp(t.wbrels,-1,"persons/person.xml",ip.PEOPLE)),iu(s,"[Content_Types].xml",sp(a,t)),iu(s,"_rels/.rels",cp(t.rels)),iu(s,"xl/_rels/workbook.xml.rels",cp(t.wbrels)),delete t.revssf,delete t.ssf,s}function bw(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=xc(e.slice(0,12));break;case"binary":r=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function xw(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Wx(e.slice(r),t);default:break e}return $m.to_workbook(e,t)}function yw(e,t,r,n){return n?(r.type="string",$m.to_workbook(e,r)):$m.to_workbook(t,r)}function ww(e,t){dc();var r=t||{};if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer)return ww(new Uint8Array(e),((r=Gd(r)).type="array",r));"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&!r.type&&(r.type="undefined"!==typeof Deno?"buffer":"array");var n,a=e,s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),vb={},r.dateNF&&(vb.dateNF=r.dateNF),r.type||(r.type=yc&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==r.type&&(r.type=yc?"buffer":"binary",a=function(e){if("undefined"!==typeof Ad)return Ad.readFileSync(e);if("undefined"!==typeof Deno)return Deno.readFileSync(e);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(f2){if(!f2.message||!f2.message.match(/onstruct/))throw f2}throw new Error("Cannot access file "+e)}(e),"undefined"===typeof Uint8Array||yc||(r.type="array")),"string"==r.type&&(s=!0,r.type="binary",r.codepage=65001,a=function(e){return e.match(/[^\x00-\x7F]/)?Iu(e):e}(e)),"array"==r.type&&"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return(r=Gd(r)).type="array",ww(Ac(a),r)}switch((n=bw(a,r))[0]){case 208:if(207===n[1]&&17===n[2]&&224===n[3]&&161===n[4]&&177===n[5]&&26===n[6]&&225===n[7])return function(e,t){return kd.find(e,"EncryptedPackage")?mw(e,t):sy(e,t)}(kd.read(a,r),r);break;case 9:if(n[1]<=8)return sy(a,r);break;case 60:return Wx(a,r);case 73:if(73===n[1]&&42===n[2]&&0===n[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===n[1])return function(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Vm.to_workbook(e,r);return r.WTF=n,a}catch(f2){if(r.WTF=n,!f2.message.match(/SYLK bad record ID/)&&n)throw f2;return $m.to_workbook(e,t)}}(a,r);break;case 84:if(65===n[1]&&66===n[2]&&76===n[3])return Gm.to_workbook(a,r);break;case 80:return 75===n[1]&&n[2]<9&&n[3]<9?function(e,t){var r=e,n=t||{};return n.type||(n.type=yc&&Buffer.isBuffer(e)?"buffer":"base64"),pw(lu(r,n),n)}(a,r):yw(e,a,r,s);case 239:return 60===n[3]?Wx(a,r):yw(e,a,r,s);case 255:if(254===n[1])return function(e,t){var r=e;return"base64"==t.type&&(r=xc(r)),r=fc.utils.decode(1200,r.slice(2),"str"),t.type="binary",xw(r,t)}(a,r);if(0===n[1]&&2===n[2]&&0===n[3])return Ym.to_workbook(a,r);break;case 0:if(0===n[1]){if(n[2]>=2&&0===n[3])return Ym.to_workbook(a,r);if(0===n[2]&&(8===n[3]||9===n[3]))return Ym.to_workbook(a,r)}break;case 3:case 131:case 139:case 140:return Hm.to_workbook(a,r);case 123:if(92===n[1]&&114===n[2]&&116===n[3])return jg.to_workbook(a,r);break;case 10:case 13:case 32:return function(e,t){var r="",n=bw(e,t);switch(t.type){case"base64":r=xc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Vd(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]&&(r=Ou(r)),t.type="binary",xw(r,t)}(a,r);case 137:if(80===n[1]&&78===n[2]&&71===n[3])throw new Error("PNG Image File is not a spreadsheet")}return Wm.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?Hm.to_workbook(a,r):yw(e,a,r,s)}function jw(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Cd(t.file,kd.write(e,{type:yc?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return kd.write(e,t)}function Nw(e,t){var r={},n=yc?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?kd.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if("undefined"!==typeof Deno&&"string"==typeof a){if("binary"==t.type||"base64"==t.type)return a;a=new Uint8Array(Sc(a))}return t.password&&"undefined"!==typeof encrypt_agile?jw(encrypt_agile(a,t.password),t):"file"===t.type?Cd(t.file,a):"string"==t.type?Ou(a):a}function _w(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return bc(Iu(n));case"binary":return Iu(n);case"string":return e;case"file":return Cd(t.file,n,"utf8");case"buffer":return yc?wc(n,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(n):_w(n,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Sw(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return"base64"==t.type?bc(r):"string"==t.type?Ou(r):r;case"file":return Cd(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function kw(e,t){dc(),px(e);var r=Gd(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),"array"==r.type){r.type="binary";var n=kw(e,r);return r.type="array",Sc(n)}var a=0;if(r.sheet&&(a="number"==typeof r.sheet?r.sheet:e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return _w(Yx(e,r),r);case"slk":case"sylk":return _w(Vm.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return _w(_y(e.Sheets[e.SheetNames[a]],r),r);case"txt":return function(e,t){switch(t.type){case"base64":return bc(e);case"binary":case"string":return e;case"file":return Cd(t.file,e,"binary");case"buffer":return yc?wc(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(Iw(e.Sheets[e.SheetNames[a]],r),r);case"csv":return _w(Ow(e.Sheets[e.SheetNames[a]],r),r,"\ufeff");case"dif":return _w(Gm.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return Sw(Hm.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return _w($m.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return _w(jg.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return _w(Km.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return _w(My(e,r),r);case"wk1":return Sw(Ym.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return Sw(Ym.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Sw(by(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),function(e,t){var r=t||{};return jw(iy(e,r),r)}(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var r=Gd(t||{});return Nw(gw(e,r),r)}(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Aw(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function Ew(e,t,r){var n=r||{};return n.type="file",n.file=t,Aw(n),kw(e,n)}function Cw(e,t,r,n,a,s,i,o){var l=of(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),u=!0,h=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch(f2){h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var f=t.s.c;f<=t.e.c;++f){var p=i?e[r][f]:e[n[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=s[f]){if(null==m)if("e"==p.t&&null===m)h[s[f]]=null;else if(void 0!==c)h[s[f]]=c;else{if(!d||null!==m)continue;h[s[f]]=null}else h[s[f]]=d&&("n"!==p.t||"n"===p.t&&!1!==o.rawNumbers)?m:gf(p,m,o);null!=m&&(u=!1)}}else{if(void 0===c)continue;null!=s[f]&&(h[s[f]]=c)}}return{row:h,isempty:u}}function Tw(e,t){if(null==e||null==e["!ref"])return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof d){case"string":l=pf(d);break;case"number":(l=pf(e["!ref"])).s.r=d;break;default:l=d}n>0&&(a=0);var u=of(l.s.r),h=[],f=[],p=0,m=0,g=Array.isArray(e),v=l.s.r,b=0,x={};g&&!e[v]&&(e[v]=[]);var y=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(b=l.s.c;b<=l.e.c;++b)if(!(y[b]||{}).hidden)switch(h[b]=cf(b),r=g?e[v][b]:e[h[b]+u],n){case 1:s[b]=b-l.s.c;break;case 2:s[b]=h[b];break;case 3:s[b]=c.header[b-l.s.c];break;default:if(null==r&&(r={w:"__EMPTY",t:"s"}),o=i=gf(r,null,c),m=x[i]||0){do{o=i+"_"+m++}while(x[o]);x[i]=m,x[o]=1}else x[i]=1;s[b]=o}for(v=l.s.r+a;v<=l.e.r;++v)if(!(w[v]||{}).hidden){var j=Cw(e,l,v,h,n,s,g,c);(!1===j.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(f[p++]=j.row)}return f.length=p,f}var Pw=/"/g;function Dw(e,t,r,n,a,s,i,o){for(var l=!0,c=[],d="",u=of(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var f=o.dense?(e[r]||[])[h]:e[n[h]+u];if(null==f)d="";else if(null!=f.v){l=!1,d=""+(o.rawNumbers&&"n"==f.t?f.v:gf(f,null,o));for(var p=0,m=0;p!==d.length;++p)if((m=d.charCodeAt(p))===a||m===s||34===m||o.forceQuotes){d='"'+d.replace(Pw,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==f.f||f.F?d="":(l=!1,(d="="+f.f).indexOf(",")>=0&&(d='"'+d.replace(Pw,'""')+'"'));c.push(d)}return!1===o.blankrows&&l?null:c.join(i)}function Ow(e,t){var r=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var a=pf(e["!ref"]),s=void 0!==n.FS?n.FS:",",i=s.charCodeAt(0),o=void 0!==n.RS?n.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),d="",u=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],f=n.skipHidden&&e["!rows"]||[],p=a.s.c;p<=a.e.c;++p)(h[p]||{}).hidden||(u[p]=cf(p));for(var m=0,g=a.s.r;g<=a.e.r;++g)(f[g]||{}).hidden||null!=(d=Dw(e,a,g,u,i,l,s,n))&&(n.strip&&(d=d.replace(c,"")),(d||!1!==n.blankrows)&&r.push((m++?o:"")+d));return delete n.dense,r.join("")}function Iw(e,t){t||(t={}),t.FS="\t",t.RS="\n";var r=Ow(e,t);if("undefined"==typeof fc||"string"==t.type)return r;var n=fc.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+n}function Mw(e,t,r){var n,a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&null!=a.origin)if("number"==typeof a.origin)o=a.origin;else{var c="string"==typeof a.origin?df(a.origin):a.origin;o=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var u=pf(i["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==o&&(o=u.e.r+1,d.e.r=o+t.length-1+s)}else-1==o&&(o=0,d.e.r=t.length-1+s);var h=a.header||[],f=0;t.forEach(function(e,t){Td(e).forEach(function(r){-1==(f=h.indexOf(r))&&(h[f=h.length]=r);var c=e[r],d="z",u="",p=uf({c:l+f,r:o+t+s});n=Rw(i,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",a.cellDates||(d="n",c=Md(c)),u=a.dateNF||zc[14]):null===c&&a.nullError&&(d="e",c=0),n?(n.t=d,n.v=c,delete n.w,delete n.R,u&&(n.z=u)):i[p]=n={t:d,v:c},u&&(n.z=u)):i[p]=c})}),d.e.c=Math.max(d.e.c,l+h.length-1);var p=of(o);if(s)for(f=0;f<h.length;++f)i[cf(f+l)+p]={t:"s",v:h[f]};return i["!ref"]=ff(d),i}function Rw(e,t,r){if("string"==typeof t){if(Array.isArray(e)){var n=df(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return Rw(e,uf("number"!=typeof t?t:{r:t,c:r||0}))}function Lw(){return{SheetNames:[],Sheets:{}}}function Fw(e,t,r,n){var a=1;if(!r)for(;a<=65535&&-1!=e.SheetNames.indexOf(r="Sheet"+a);++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&-1!=e.SheetNames.indexOf(r=i+a);++a);}if(fx(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Bw(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}var zw={encode_col:cf,encode_row:of,encode_cell:uf,encode_range:ff,decode_col:lf,decode_row:sf,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:df,decode_range:hf,format_cell:gf,sheet_add_aoa:bf,sheet_add_json:Mw,sheet_add_dom:Sy,aoa_to_sheet:xf,json_to_sheet:function(e,t){return Mw(null,e,t)},table_to_sheet:ky,table_to_book:function(e,t){return vf(ky(e,t),t)},sheet_to_csv:Ow,sheet_to_txt:Iw,sheet_to_json:Tw,sheet_to_html:_y,sheet_to_formulae:function(e){var t,r="",n="";if(null==e||null==e["!ref"])return[];var a,s=pf(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(a=s.s.c;a<=s.e.c;++a)o[a]=cf(a);for(var d=s.s.r;d<=s.e.r;++d)for(i=of(d),a=s.s.c;a<=s.e.c;++a)if(r=o[a]+i,n="",void 0!==(t=c?(e[d]||[])[a]:e[r])){if(null!=t.F){if(r=t.F,!t.f)continue;n=t.f,-1==r.indexOf(":")&&(r=r+":"+r)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=r+"="+n}return l},sheet_to_row_object_array:Tw,sheet_get_cell:Rw,book_new:Lw,book_append_sheet:Fw,book_set_sheet_visibility:function(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:Bw,cell_set_internal_link:function(e,t,r){return Bw(e,"#"+t,r)},cell_add_comment:function(e,t,r){e.c||(e.c=[]),e.c.push({t:t,a:r||"SheetJS"})},sheet_set_array_formula:function(e,t,r,n){for(var a="string"!=typeof t?t:pf(t),s="string"==typeof t?t:ff(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=Rw(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};nc.version;jo.register(gl,yl,Go,Zo,fl,Xo);const Uw=e=>{let{projects:r=[],tasksByProject:n={},purchaseOrdersByProject:a={},advancesByProject:s={},invoicesByProject:i={}}=e;const[o,l]=(0,t.useState)("12"),[c,d]=(0,t.useState)((new Date).toISOString().split("T")[0]),u=r.filter(e=>"active"===e.status);console.log("\ud83d\udd0d CONSOLIDATED CASHFLOW DEBUG:",{projects:(null===r||void 0===r?void 0:r.length)||0,activeProjects:u.length,tasksByProject:Object.keys(n||{}).length,purchaseOrdersByProject:Object.keys(a||{}).length,advancesByProject:Object.keys(s||{}).length,invoicesByProject:Object.keys(i||{}).length,activeProjectIds:u.map(e=>e.id)}),Object.keys(a||{}).forEach(e=>{const t=a[e]||[];console.log("\ud83d\udd0d \xd3RDENES DE COMPRA para proyecto ".concat(e,":"),{total:t.length,orders:t.map(e=>({id:e.id,number:e.number,approvalDate:e.approvalDate,date:e.date,status:e.status,totalAmount:e.totalAmount}))})});const h=(e,t)=>{if(!e||0===e.length)return 0;const r=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);return e.reduce((e,t)=>{const a=new Date(t.startDate),s=new Date(t.endDate);return a<=n&&s>=r?e+(t.cost||0):e},0)},f=(e,t)=>{if(console.log("\ud83d\udd0d CALCULANDO GASTO COMPROMETIDO - Iniciando funci\xf3n:",{purchaseOrdersLength:(null===e||void 0===e?void 0:e.length)||0,monthDate:t.toISOString().substring(0,7),purchaseOrders:e}),!e||0===e.length)return console.log("\ud83d\udd0d No hay \xf3rdenes de compra para calcular gasto comprometido"),0;const r=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);return r.setHours(0,0,0,0),n.setHours(23,59,59,999),console.log("\ud83d\udd0d Calculando gasto comprometido para mes:",{month:t.toISOString().substring(0,7),monthStart:r.toISOString().split("T")[0],monthEnd:n.toISOString().split("T")[0],totalPOs:e.length}),console.log("\ud83d\udd0d DETALLE COMPLETO DE \xd3RDENES DE COMPRA:"),e.forEach((e,t)=>{console.log("\ud83d\udd0d OC ".concat(t+1,":"),{id:e.id,number:e.number,approvalDate:e.approvalDate,date:e.date,status:e.status,totalAmount:e.totalAmount,allFields:Object.keys(e)})}),e.reduce((e,a)=>{const s="approved"===a.status||"delivered"===a.status;if(!s)return e;let i;if(a.approvalDate&&""!==a.approvalDate.trim())i=new Date(a.approvalDate+"T00:00:00");else{if(!a.date||""===a.date.trim())return console.log("\u26a0\ufe0f OC sin fecha v\xe1lida:",{id:a.id,number:a.number,approvalDate:a.approvalDate,date:a.date}),e;i=new Date(a.date+"T00:00:00")}if(isNaN(i.getTime()))return console.log("\u26a0\ufe0f OC con fecha inv\xe1lida:",{id:a.id,number:a.number,approvalDate:a.approvalDate,date:a.date,poDate:i}),e;const o=i>=r&&i<=n;return console.log("\ud83d\udd0d Evaluando OC:",{id:a.id,number:a.number,approvalDate:a.approvalDate,date:a.date,poDate:i.toISOString().split("T")[0],monthStart:r.toISOString().split("T")[0],monthEnd:n.toISOString().split("T")[0],status:a.status,totalAmount:a.totalAmount,isInMonth:o,isApproved:s,willInclude:o&&s}),o?(console.log("\u2705 INCLUYENDO OC ".concat(a.number,": $").concat(a.totalAmount," en mes ").concat(t.toISOString().substring(0,7))),e+(a.totalAmount||0)):e},0)},p=(e,t,r)=>{if(!e&&!t)return 0;const n=new Date(r.getFullYear(),r.getMonth(),1),a=new Date(r.getFullYear(),r.getMonth()+1,0);let s=0;return e&&e.length>0&&(s+=e.reduce((e,t)=>{if(!t.paymentDate||""===t.paymentDate.trim())return e;const r=new Date(t.paymentDate+"T00:00:00");if(isNaN(r.getTime()))return e;const s=r>=n&&r<=a,i="paid"===t.status;return s&&i?e+(t.amount||0):e},0)),t&&t.length>0&&(s+=t.reduce((e,t)=>{if(!t.paymentDate||""===t.paymentDate.trim())return e;const r=new Date(t.paymentDate+"T00:00:00");if(isNaN(r.getTime()))return e;const s=r>=n&&r<=a,i="pagada"===t.status;return s&&i?e+(t.amount||0):e},0)),s},m=(0,t.useMemo)(()=>{if(0===u.length)return{projection:[],metrics:{}};const e=[],t=new Date(c);for(let r=0;r<parseInt(o);r++){const o=new Date(t.getFullYear(),t.getMonth()+r,1),l=o.toISOString().split("T")[0].substring(0,7);let c=0,d=0,m=0;u.forEach(e=>{const t=n[e.id]||[],r=a[e.id]||[],u=s[e.id]||[],g=i[e.id]||[];console.log("\ud83d\udd0d Proyecto ".concat(e.id," (").concat(e.name,"):"),{tasks:t.length,purchaseOrders:r.length,advances:u.length,invoices:g.length});const v=h(t,o);c+=v,console.log("\ud83d\udd0d LLAMANDO calculateMonthCommittedExpense para proyecto ".concat(e.id," en mes ").concat(l));const b=f(r,o);console.log("\ud83d\udd0d RESULTADO calculateMonthCommittedExpense: $".concat(b)),d+=b;const x=p(u,g,o);m+=x,console.log("\ud83d\udd0d Gastos del mes ".concat(l," para proyecto ").concat(e.id,":"),{planned:v,committed:b,real:x})}),e.push({month:o.toLocaleDateString("es-ES",{month:"long",year:"numeric"}),monthKey:l,revenue:c,expenses:d,realExpenses:m,netFlow:c-m})}return{projection:e,metrics:{totalPlannedExpense:e.reduce((e,t)=>e+t.revenue,0),totalCommittedExpenses:e.reduce((e,t)=>e+t.expenses,0),totalRealExpenses:e.reduce((e,t)=>e+t.realExpenses,0),totalNetCashFlow:e.reduce((e,t)=>e+t.netFlow,0)}}},[u,n,a,s,i,o,c]);return 0===u.length?(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb0"}),"Flujo de Caja Consolidado"]}),(0,At.jsx)("div",{className:"text-center py-8",children:(0,At.jsx)("div",{className:"text-gray-500 text-lg",children:"No hay proyectos activos para mostrar el flujo de caja consolidado"})})]}):(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb0"}),"Flujo de Caja Consolidado"]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Per\xedodo:"}),(0,At.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"6",children:"6 meses"}),(0,At.jsx)("option",{value:"12",children:"12 meses"}),(0,At.jsx)("option",{value:"18",children:"18 meses"}),(0,At.jsx)("option",{value:"24",children:"24 meses"})]})]}),(0,At.jsxs)("button",{onClick:()=>{const e=m.projection.map(e=>({Mes:e.month,"Gasto Planificado":e.revenue,"Gasto Comprometido (OCs)":e.expenses,"Gasto Real":e.realExpenses,"Flujo Neto":e.netFlow})),t=zw.json_to_sheet(e),r=zw.book_new();zw.book_append_sheet(r,t,"Flujo de Caja Consolidado");Ew(r,"Flujo_Caja_Consolidado_".concat((new Date).toISOString().split("T")[0],".xlsx"))},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[(0,At.jsx)("span",{children:"\ud83d\udcca"}),(0,At.jsx)("span",{children:"Exportar Excel"})]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,At.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udcb0"}),(0,At.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Gasto Planificado Total"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-orange-800",children:["$",(m.metrics.totalPlannedExpense/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udccb"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Gasto Comprometido Total"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:["$",(m.metrics.totalCommittedExpenses/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udcb8"}),(0,At.jsx)("span",{className:"text-sm font-medium text-red-600",children:"Gasto Real Total"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-red-800",children:["$",(m.metrics.totalRealExpenses/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udcc8"}),(0,At.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Flujo Neto Total"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-800",children:["$",(m.metrics.totalNetCashFlow/1e3).toFixed(0),"K"]})]})]}),(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Gasto Planificado vs Gasto Comprometido vs Gasto Real"}),(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)(rc,{data:{labels:m.projection.map(e=>e.month),datasets:[{label:"Gasto Planificado",data:m.projection.map(e=>e.revenue),backgroundColor:"rgba(255, 159, 64, 0.8)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1},{label:"Gasto Comprometido (OCs)",data:m.projection.map(e=>e.expenses),backgroundColor:"rgba(54, 162, 235, 0.8)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Gasto Real",data:m.projection.map(e=>e.realExpenses),backgroundColor:"rgba(255, 99, 132, 0.8)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}},scales:{x:{stacked:!1,title:{display:!0,text:"Meses"},ticks:{maxRotation:60,minRotation:60,padding:15,font:{size:9}}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Monto (USD)"},ticks:{callback:function(e){return"$"+e.toLocaleString()}}}}},height:400})})]}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full border-collapse",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-50",children:[(0,At.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Mes"}),(0,At.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Gasto Planificado"}),(0,At.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Gasto Comprometido (OCs)"}),(0,At.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Gasto Real"}),(0,At.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Flujo Neto"})]})}),(0,At.jsx)("tbody",{children:m.projection.map((e,t)=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 font-medium text-gray-800",children:e.month}),(0,At.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right text-orange-600 font-medium",children:["$",e.revenue.toLocaleString()]}),(0,At.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right text-blue-600 font-medium",children:["$",e.expenses.toLocaleString()]}),(0,At.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right text-red-600 font-medium",children:["$",e.realExpenses.toLocaleString()]}),(0,At.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-medium ".concat(e.netFlow>=0?"text-green-600":"text-red-600"),children:["$",e.netFlow.toLocaleString()]})]},t))})]})})]})};function qw(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=qw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ww(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=qw(e))&&(n&&(n+=" "),n+=t);return n}var Hw=r(6135),Vw=r.n(Hw),Gw=r(4879),Kw=r.n(Gw),$w=e=>0===e?0:e>0?1:-1,Yw=e=>"number"==typeof e&&e!=+e,Xw=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,Jw=e=>("number"===typeof e||e instanceof Number)&&!Yw(e),Zw=e=>Jw(e)||"string"===typeof e,Qw=0,ej=e=>{var t=++Qw;return"".concat(e||"").concat(t)},tj=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Jw(e)&&"string"!==typeof e)return n;if(Xw(e)){if(null==t)return n;var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return Yw(r)&&(r=n),a&&null!=t&&r>t&&(r=t),r},rj=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function nj(e,t,r){return Jw(e)&&Jw(t)?e+r*(t-e):t}var aj=e=>null===e||"undefined"===typeof e,sj=e=>aj(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),ij=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]};function oj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oj(Object(r),!0).forEach(function(t){cj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dj=(0,t.forwardRef)((e,r)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:f,onResize:p,style:m={}}=e,g=(0,t.useRef)(null),v=(0,t.useRef)();v.current=p,(0,t.useImperativeHandle)(r,()=>g.current);var[b,x]=(0,t.useState)({containerWidth:a.width,containerHeight:a.height}),y=(0,t.useCallback)((e,t)=>{x(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);(0,t.useEffect)(()=>{var e=e=>{var t,{width:r,height:n}=e[0].contentRect;y(r,n),null===(t=v.current)||void 0===t||t.call(v,r,n)};u>0&&(e=Vw()(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return y(r,n),t.observe(g.current),()=>{t.disconnect()}},[y,u]);var w=(0,t.useMemo)(()=>{var{containerWidth:e,containerHeight:r}=b;if(e<0||r<0)return null;ij(Xw(s)||Xw(i),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,i),ij(!n||n>0,"The aspect(%s) must be greater than zero.",n);var a=Xw(s)?e:s,u=Xw(i)?r:i;return n&&n>0&&(a?u=a/n:u&&(a=u*n),c&&u>c&&(u=c)),ij(a>0||u>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,u,s,i,o,l,n),t.Children.map(d,e=>(0,t.cloneElement)(e,{width:a,height:u,style:lj({width:a,height:u},e.props.style)}))},[n,d,i,c,l,o,b,s]);return t.createElement("div",{id:h?"".concat(h):void 0,className:Ww("recharts-responsive-container",f),style:lj(lj({},m),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},t.createElement("div",{style:{width:0,height:0,overflow:"visible"}},w))});function uj(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var hj=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),fj=()=>Math.random().toString(36).substring(7).split("").join("."),pj={INIT:"@@redux/INIT".concat(fj()),REPLACE:"@@redux/REPLACE".concat(fj()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(fj())};function mj(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function gj(e,t,r){if("function"!==typeof e)throw new Error(uj(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(uj(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(uj(1));return r(gj)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function c(){i===s&&(i=new Map,s.forEach((e,t)=>{i.set(t,e)}))}function d(){if(l)throw new Error(uj(3));return a}function u(e){if("function"!==typeof e)throw new Error(uj(4));if(l)throw new Error(uj(5));let t=!0;c();const r=o++;return i.set(r,e),function(){if(t){if(l)throw new Error(uj(6));t=!1,c(),i.delete(r),s=null}}}function h(e){if(!mj(e))throw new Error(uj(7));if("undefined"===typeof e.type)throw new Error(uj(8));if("string"!==typeof e.type)throw new Error(uj(17));if(l)throw new Error(uj(9));try{l=!0,a=n(a,e)}finally{l=!1}return(s=i).forEach(e=>{e()}),e}h({type:pj.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(uj(10));n=e,h({type:pj.REPLACE})},[hj]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(uj(11));function r(){const e=t;e.next&&e.next(d())}r();return{unsubscribe:e(r)}},[hj](){return this}}}}}function vj(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const n=t[s];0,"function"===typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if("undefined"===typeof r(void 0,{type:pj.INIT}))throw new Error(uj(12));if("undefined"===typeof r(void 0,{type:pj.PROBE_UNKNOWN_ACTION()}))throw new Error(uj(13))})}(r)}catch(f2){a=f2}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let s=!1;const i={};for(let a=0;a<n.length;a++){const o=n[a],l=r[o],c=e[o],d=l(c,t);if("undefined"===typeof d){t&&t.type;throw new Error(uj(14))}i[o]=d,s=s||d!==c}return s=s||n.length!==Object.keys(e).length,s?i:e}}function bj(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function xj(e){return mj(e)&&"type"in e&&"string"===typeof e.type}function yj(e){return t=>{let{dispatch:r,getState:n}=t;return t=>a=>"function"===typeof a?a(r,n,e):t(a)}}var wj=yj(),jj=yj,Nj=Symbol.for("immer-nothing"),_j=Symbol.for("immer-draftable"),Sj=Symbol.for("immer-state");function kj(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Aj=Object.getPrototypeOf;function Ej(e){return!!e&&!!e[Sj]}function Cj(e){var t;return!!e&&(Pj(e)||Array.isArray(e)||!!e[_j]||!(null===(t=e.constructor)||void 0===t||!t[_j])||Rj(e)||Lj(e))}var Tj=Object.prototype.constructor.toString();function Pj(e){if(!e||"object"!==typeof e)return!1;const t=Aj(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Tj}function Dj(e,t){0===Oj(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Oj(e){const t=e[Sj];return t?t.type_:Array.isArray(e)?1:Rj(e)?2:Lj(e)?3:0}function Ij(e,t){return 2===Oj(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Mj(e,t,r){const n=Oj(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Rj(e){return e instanceof Map}function Lj(e){return e instanceof Set}function Fj(e){return e.copy_||e.base_}function Bj(e,t){if(Rj(e))return new Map(e);if(Lj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Pj(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[Sj];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Aj(e),t)}{const t=Aj(e);if(null!==t&&r)return(0,s.A)({},e);const n=Object.create(t);return Object.assign(n,e)}}function zj(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return qj(e)||Ej(e)||!Cj(e)||(Oj(e)>1&&Object.defineProperties(e,{set:{value:Uj},add:{value:Uj},clear:{value:Uj},delete:{value:Uj}}),Object.freeze(e),t&&Object.values(e).forEach(e=>zj(e,!0))),e}function Uj(){kj(2)}function qj(e){return Object.isFrozen(e)}var Wj,Hj={};function Vj(e){const t=Hj[e];return t||kj(0),t}function Gj(){return Wj}function Kj(e,t){t&&(Vj("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $j(e){Yj(e),e.drafts_.forEach(Jj),e.drafts_=null}function Yj(e){e===Wj&&(Wj=e.parent_)}function Xj(e){return Wj={drafts_:[],parent_:Wj,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Jj(e){const t=e[Sj];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Zj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[Sj].modified_&&($j(t),kj(4)),Cj(e)&&(e=Qj(t,e),t.parent_||tN(t,e)),t.patches_&&Vj("Patches").generateReplacementPatches_(r[Sj].base_,e,t.patches_,t.inversePatches_)):e=Qj(t,r,[]),$j(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Nj?e:void 0}function Qj(e,t,r){if(qj(t))return t;const n=t[Sj];if(!n)return Dj(t,(a,s)=>eN(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return tN(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,s=!1;3===n.type_&&(a=new Set(t),t.clear(),s=!0),Dj(a,(a,i)=>eN(e,n,t,a,i,r,s)),tN(e,t,!1),r&&e.patches_&&Vj("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function eN(e,t,r,n,a,s,i){if(Ej(a)){const i=Qj(e,a,s&&t&&3!==t.type_&&!Ij(t.assigned_,n)?s.concat(n):void 0);if(Mj(r,n,i),!Ej(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(Cj(a)&&!qj(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Qj(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!(Rj(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||tN(e,a)}}function tN(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zj(t,r)}var rN={get(e,t){if(t===Sj)return e;const r=Fj(e);if(!Ij(r,t))return function(e,t,r){var n;const a=sN(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!Cj(n)?n:n===aN(e.base_,t)?(oN(e),e.copy_[t]=lN(n,e)):n},has:(e,t)=>t in Fj(e),ownKeys:e=>Reflect.ownKeys(Fj(e)),set(e,t,r){const n=sN(Fj(e),t);if(null!==n&&void 0!==n&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=aN(Fj(e),t),a=null===n||void 0===n?void 0:n[Sj];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,n)&&(void 0!==r||Ij(e.base_,t)))return!0;oN(e),iN(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==aN(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,oN(e),iN(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Fj(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){kj(11)},getPrototypeOf:e=>Aj(e.base_),setPrototypeOf(){kj(12)}},nN={};function aN(e,t){const r=e[Sj];return(r?Fj(r):e)[t]}function sN(e,t){if(!(t in e))return;let r=Aj(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Aj(r)}}function iN(e){e.modified_||(e.modified_=!0,e.parent_&&iN(e.parent_))}function oN(e){e.copy_||(e.copy_=Bj(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Dj(rN,(e,t)=>{nN[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),nN.deleteProperty=function(e,t){return nN.set.call(this,e,t,void 0)},nN.set=function(e,t,r){return rN.set.call(this,e[0],t,r,e[0])};function lN(e,t){const r=Rj(e)?Vj("MapSet").proxyMap_(e,t):Lj(e)?Vj("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Gj(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=rN;r&&(a=[n],s=nN);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}(e,t);return(t?t.scope_:Gj()).drafts_.push(r),r}function cN(e){return Ej(e)||kj(10),dN(e)}function dN(e){if(!Cj(e)||qj(e))return e;const t=e[Sj];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Bj(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Bj(e,!0);return Dj(r,(e,t)=>{Mj(r,e,dN(t))}),t&&(t.finalized_=!1),r}var uN=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return n.produce(e,e=>t.call(this,e,...s))}}let n;if("function"!==typeof t&&kj(6),void 0!==r&&"function"!==typeof r&&kj(7),Cj(e)){const a=Xj(this),s=lN(e,void 0);let i=!0;try{n=t(s),i=!1}finally{i?$j(a):Yj(a)}return Kj(a,r),Zj(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===Nj&&(n=void 0),this.autoFreeze_&&zj(n,!0),r){const t=[],a=[];Vj("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}kj(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;const s=this.produce(e,r,(e,t)=>{n=e,a=t});return[s,n,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Cj(e)||kj(8),Ej(e)&&(e=cN(e));const t=Xj(this),r=lN(e,void 0);return r[Sj].isManual_=!0,Yj(t),r}finishDraft(e,t){const r=e&&e[Sj];r&&r.isManual_||kj(9);const{scope_:n}=r;return Kj(n,t),Zj(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=Vj("Patches").applyPatches_;return Ej(e)?n(e,t):this.produce(e,e=>n(e,t))}},hN=uN.produce;const fN=["reducerPath"];var pN="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?bj:bj.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function mN(e,t){function r(){if(t){let r=t(...arguments);if(!r)throw new Error(c_(0));return(0,s.A)((0,s.A)({type:e,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=()=>"".concat(e),r.type=e,r.match=t=>xj(t)&&t.type===e,r}var gN=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?new e(...r[0].concat(this)):new e(...r.concat(this))}};function vN(e){return Cj(e)?hN(e,()=>{}):e}function bN(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var xN="RTK_autoBatch",yN=e=>t=>{setTimeout(t,e)},wN=e=>function(t){const{autoBatch:r=!0}=null!==t&&void 0!==t?t:{};let n=new gN(e);return r&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const r=t(...arguments);let n=!0,a=!1,s=!1;const i=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:yN(10):"callback"===e.type?e.queueNotification:yN(e.timeout),l=()=>{s=!1,a&&(a=!1,i.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>n&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{var t;return n=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[xN]),a=!n,a&&(s||(s=!0,o(l))),r.dispatch(e)}finally{n=!0}}})}}("object"===typeof r?r:void 0)),n};function jN(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let s=new gN;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(wj):s.push(jj(t.extraArgument))),s},{reducer:r,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o,enhancers:l}=e||{};let c,d;if("function"===typeof r)c=r;else{if(!mj(r))throw new Error(c_(1));c=vj(r)}d="function"===typeof n?n(t):t();let u=bj;a&&(u=pN((0,s.A)({trace:!1},"object"===typeof a&&a)));const h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{const a=e(r,n);let i=()=>{throw new Error(uj(15))};const o={getState:a.getState,dispatch:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,...r)}},l=t.map(e=>e(o));return i=bj(...l)(a.dispatch),(0,s.A)((0,s.A)({},a),{},{dispatch:i})}}(...d),f=wN(h);return gj(c,o,u(..."function"===typeof l?l(f):f()))}function NN(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"===typeof e?e:e.type;if(!n)throw new Error(c_(28));if(n in t)throw new Error(c_(29));return t[n]=r,a},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),a),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}var _N=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var SN=Symbol.for("rtk-slice-createasyncthunk");function kN(e,t){return"".concat(e,"/").concat(t)}function AN(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[SN];return function(e){const{name:t,reducerPath:n=t}=e;if(!t)throw new Error(c_(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return(0,s.A)({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(e,t){const r="string"===typeof e?e:e.type;if(!r)throw new Error(c_(12));if(r in l.sliceCaseReducersByType)throw new Error(c_(13));return l.sliceCaseReducersByType[r]=t,c},addMatcher:(e,t)=>(l.sliceMatchers.push({matcher:e,reducer:t}),c),exposeAction:(e,t)=>(l.actionCreators[e]=t,c),exposeCaseReducer:(e,t)=>(l.sliceCaseReducersByName[e]=t,c)};function d(){const[t={},r=[],n]="function"===typeof e.extraReducers?NN(e.extraReducers):[e.extraReducers],a=(0,s.A)((0,s.A)({},t),l.sliceCaseReducersByType);return function(e,t){let r,[n,a,s]=NN(t);if(function(e){return"function"===typeof e}(e))r=()=>vN(e());else{const t=vN(e);r=()=>t}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1?arguments[1]:void 0,i=[n[t.type],...a.filter(e=>{let{matcher:r}=e;return r(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===i.filter(e=>!!e).length&&(i=[s]),i.reduce((e,r)=>{if(r){if(Ej(e)){const n=r(e,t);return void 0===n?e:n}if(Cj(e))return hN(e,e=>r(e,t));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return i.getInitialState=r,i}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of l.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}o.forEach(n=>{const s=a[n],i={reducerName:n,type:kN(t,n),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,r){let n,a,{type:s,reducerName:i,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(c_(17));n=t.reducer,a=t.prepare}else n=t;r.addCase(s,n).exposeCaseReducer(i,n).exposeAction(i,a?mN(s,a):mN(s))}(i,s,c):function(e,t,r,n){let{type:a,reducerName:s}=e;if(!n)throw new Error(c_(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=t,h=n(a,i,u);r.exposeAction(s,h),o&&r.addCase(h.fulfilled,o);l&&r.addCase(h.pending,l);c&&r.addCase(h.rejected,c);d&&r.addMatcher(h.settled,d);r.exposeCaseReducer(s,{fulfilled:o||TN,pending:l||TN,rejected:c||TN,settled:d||TN})}(i,s,c,r)});const u=e=>e,h=new Map,f=new WeakMap;let p;function m(e,t){return p||(p=d()),p(e,t)}function g(){return p||(p=d()),p.getInitialState()}function v(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){let a=e[t];return"undefined"===typeof a&&r&&(a=bN(f,n,g)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const n=bN(h,r,()=>new WeakMap);return bN(n,t,()=>{const n={};for(const[s,i]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;n[s]=EN(i,t,()=>bN(f,t,g),r)}return n})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const b=(0,s.A)((0,s.A)({name:t,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g},v(n)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:r}=t,a=i(t,fN);const o=null!==r&&void 0!==r?r:n;return e.inject({reducerPath:o,reducer:m},a),(0,s.A)((0,s.A)({},b),v(o,!0))}});return b}}function EN(e,t,r,n){function a(a){let s=t(a);"undefined"===typeof s&&n&&(s=r());for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e(s,...o)}return a.unwrapped=e,a}var CN=AN();function TN(){}var PN="listener",DN="completed",ON="cancelled",IN="task-".concat(ON),MN="task-".concat(DN),RN="".concat(PN,"-").concat(ON),LN="".concat(PN,"-").concat(DN),FN=class{constructor(e){(0,qt.A)(this,"name","TaskAbortError"),(0,qt.A)(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(ON," (reason: ").concat(e,")")}},BN=(e,t)=>{if("function"!==typeof e)throw new TypeError(c_(32))},zN=()=>{},UN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zN;return e.catch(t),e},qN=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),WN=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},HN=e=>{if(e.aborted){const{reason:t}=e;throw new FN(t)}};function VN(e,t){let r=zN;return new Promise((n,a)=>{const s=()=>a(new FN(e.reason));e.aborted?s():(r=qN(e,s),t.finally(()=>r()).then(n,a))}).finally(()=>{r=zN})}var GN=e=>t=>UN(VN(e,t).then(t=>(HN(e),t))),KN=e=>{const t=GN(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:$N}=Object,YN={},XN="listenerMiddleware",JN=(e,t)=>(r,n)=>{BN(r);const a=new AbortController;var s;s=a,qN(e,()=>WN(s,e.reason));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof FN?"cancelled":"rejected",error:r}}finally{null===t||void 0===t||t()}})(async()=>{HN(e),HN(a.signal);const t=await r({pause:GN(a.signal),delay:KN(a.signal),signal:a.signal});return HN(a.signal),t},()=>WN(a,MN));return null!==n&&void 0!==n&&n.autoJoin&&t.push(i.catch(zN)),{result:GN(e)(i),cancel(){WN(a,IN)}}},ZN=(e,t)=>(r,n)=>UN((async(r,n)=>{HN(t);let a=()=>{};const s=new Promise((t,n)=>{let s=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});a=()=>{s(),n()}}),i=[s];null!=n&&i.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await VN(t,Promise.race(i));return HN(t),e}finally{a()}})(r,n)),QN=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=mN(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(c_(21));return BN(s),{predicate:a,type:t,effect:s}},e_=$N(e=>{const{type:t,predicate:r,effect:n}=QN(e);return{id:_N(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(c_(22))}}},{withTypes:()=>e_}),t_=(e,t)=>{const{type:r,effect:n,predicate:a}=QN(t);return Array.from(e.values()).find(e=>("string"===typeof r?e.type===r:e.predicate===a)&&e.effect===n)},r_=e=>{e.pending.forEach(e=>{WN(e,RN)})},n_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},a_=$N(mN("".concat(XN,"/add")),{withTypes:()=>a_}),s_=mN("".concat(XN,"/removeAll")),i_=$N(mN("".concat(XN,"/remove")),{withTypes:()=>i_}),o_=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.error("".concat(XN,"/error"),...t)},l_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,{extra:r,onError:n=o_}=e;BN(n);const a=e=>{var r;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&r_(e)}))(null!==(r=t_(t,e))&&void 0!==r?r:e_(e))};$N(a,{withTypes:()=>a});const s=e=>{const r=t_(t,e);return r&&(r.unsubscribe(),e.cancelActive&&r_(r)),!!r};$N(s,{withTypes:()=>s});const i=async(e,s,i,o)=>{const l=new AbortController,c=ZN(a,l.signal),d=[];try{e.pending.add(l),await Promise.resolve(e.effect(s,$N({},i,{getOriginalState:o,condition:(e,t)=>c(e,t).then(Boolean),take:c,delay:KN(l.signal),pause:GN(l.signal),extra:r,signal:l.signal,fork:JN(l.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==l&&(WN(e,RN),r.delete(e))})},cancel:()=>{WN(l,RN),e.pending.delete(l)},throwIfCancelled:()=>{HN(l.signal)}})))}catch(u){u instanceof FN||n_(n,u,{raisedBy:"effect"})}finally{await Promise.all(d),WN(l,LN),e.pending.delete(l)}},o=(e=>()=>{e.forEach(r_),e.clear()})(t);return{middleware:e=>r=>l=>{if(!xj(l))return r(l);if(a_.match(l))return a(l.payload);if(s_.match(l))return void o();if(i_.match(l))return s(l.payload);let c=e.getState();const d=()=>{if(c===YN)throw new Error(c_(23));return c};let u;try{if(u=r(l),t.size>0){const r=e.getState(),a=Array.from(t.values());for(const t of a){let a=!1;try{a=t.predicate(l,r,c)}catch(h){a=!1,n_(n,h,{raisedBy:"predicate"})}a&&i(t,l,e,d)}}}finally{c=YN}return u},startListening:a,stopListening:s,clearListeners:o}};Symbol.for("rtk-state-proxy-original");function c_(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function d_(e,t){if(t){var r=Number.parseInt(t,10);if(!Yw(r))return null===e||void 0===e?void 0:e[r]}}var u_=CN({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),h_=u_.reducer,{createEventEmitter:f_}=u_.actions;r(7256);function p_(e){e()}var m_={notify(){},get:()=>[]};function g_(e,t){let r,n=m_,a=0,s=!1;function i(){c.onStateChange&&c.onStateChange()}function o(){a++,r||(r=t?t.addNestedSub(i):e.subscribe(i),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){p_(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){n&&null!==e&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,r&&0===a&&(r(),r=void 0,n.clear(),n=m_)}const c={addNestedSub:function(e){o();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>n};return c}var v_=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),b_=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),x_=(()=>v_||b_?t.useLayoutEffect:t.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var y_=Symbol.for("react-redux-context"),w_="undefined"!==typeof globalThis?globalThis:{};function j_(){var e;if(!t.createContext)return{};const r=null!==(e=w_[y_])&&void 0!==e?e:w_[y_]=new Map;let n=r.get(t.createContext);return n||(n=t.createContext(null),r.set(t.createContext,n)),n}var N_=j_();var __=function(e){const{children:r,context:n,serverState:a,store:s}=e,i=t.useMemo(()=>{const e=g_(s);return{store:s,subscription:e,getServerState:a?()=>a:void 0}},[s,a]),o=t.useMemo(()=>s.getState(),[s]);x_(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,o]);const l=n||N_;return t.createElement(l.Provider,{value:i},r)};var S_=Symbol.for("immer-nothing"),k_=Symbol.for("immer-draftable"),A_=Symbol.for("immer-state");function E_(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var C_=Object.getPrototypeOf;function T_(e){return!!e&&!!e[A_]}function P_(e){var t;return!!e&&(O_(e)||Array.isArray(e)||!!e[k_]||!(null===(t=e.constructor)||void 0===t||!t[k_])||F_(e)||B_(e))}var D_=Object.prototype.constructor.toString();function O_(e){if(!e||"object"!==typeof e)return!1;const t=C_(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===D_}function I_(e,t){0===M_(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function M_(e){const t=e[A_];return t?t.type_:Array.isArray(e)?1:F_(e)?2:B_(e)?3:0}function R_(e,t){return 2===M_(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function L_(e,t,r){const n=M_(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function F_(e){return e instanceof Map}function B_(e){return e instanceof Set}function z_(e){return e.copy_||e.base_}function U_(e,t){if(F_(e))return new Map(e);if(B_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=O_(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[A_];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(C_(e),t)}{const t=C_(e);if(null!==t&&r)return(0,s.A)({},e);const n=Object.create(t);return Object.assign(n,e)}}function q_(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return H_(e)||T_(e)||!P_(e)||(M_(e)>1&&Object.defineProperties(e,{set:{value:W_},add:{value:W_},clear:{value:W_},delete:{value:W_}}),Object.freeze(e),t&&Object.values(e).forEach(e=>q_(e,!0))),e}function W_(){E_(2)}function H_(e){return Object.isFrozen(e)}var V_,G_={};function K_(e){const t=G_[e];return t||E_(0),t}function $_(){return V_}function Y_(e,t){t&&(K_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X_(e){J_(e),e.drafts_.forEach(Q_),e.drafts_=null}function J_(e){e===V_&&(V_=e.parent_)}function Z_(e){return V_={drafts_:[],parent_:V_,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Q_(e){const t=e[A_];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function eS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[A_].modified_&&(X_(t),E_(4)),P_(e)&&(e=tS(t,e),t.parent_||nS(t,e)),t.patches_&&K_("Patches").generateReplacementPatches_(r[A_].base_,e,t.patches_,t.inversePatches_)):e=tS(t,r,[]),X_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==S_?e:void 0}function tS(e,t,r){if(H_(t))return t;const n=t[A_];if(!n)return I_(t,(a,s)=>rS(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return nS(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,s=!1;3===n.type_&&(a=new Set(t),t.clear(),s=!0),I_(a,(a,i)=>rS(e,n,t,a,i,r,s)),nS(e,t,!1),r&&e.patches_&&K_("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function rS(e,t,r,n,a,s,i){if(T_(a)){const i=tS(e,a,s&&t&&3!==t.type_&&!R_(t.assigned_,n)?s.concat(n):void 0);if(L_(r,n,i),!T_(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(P_(a)&&!H_(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tS(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!(F_(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||nS(e,a)}}function nS(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&q_(t,r)}var aS={get(e,t){if(t===A_)return e;const r=z_(e);if(!R_(r,t))return function(e,t,r){var n;const a=oS(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!P_(n)?n:n===iS(e.base_,t)?(cS(e),e.copy_[t]=dS(n,e)):n},has:(e,t)=>t in z_(e),ownKeys:e=>Reflect.ownKeys(z_(e)),set(e,t,r){const n=oS(z_(e),t);if(null!==n&&void 0!==n&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=iS(z_(e),t),a=null===n||void 0===n?void 0:n[A_];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,n)&&(void 0!==r||R_(e.base_,t)))return!0;cS(e),lS(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==iS(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,cS(e),lS(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=z_(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){E_(11)},getPrototypeOf:e=>C_(e.base_),setPrototypeOf(){E_(12)}},sS={};function iS(e,t){const r=e[A_];return(r?z_(r):e)[t]}function oS(e,t){if(!(t in e))return;let r=C_(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=C_(r)}}function lS(e){e.modified_||(e.modified_=!0,e.parent_&&lS(e.parent_))}function cS(e){e.copy_||(e.copy_=U_(e.base_,e.scope_.immer_.useStrictShallowCopy_))}I_(aS,(e,t)=>{sS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),sS.deleteProperty=function(e,t){return sS.set.call(this,e,t,void 0)},sS.set=function(e,t,r){return aS.set.call(this,e[0],t,r,e[0])};function dS(e,t){const r=F_(e)?K_("MapSet").proxyMap_(e,t):B_(e)?K_("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:$_(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=aS;r&&(a=[n],s=sS);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}(e,t);return(t?t.scope_:$_()).drafts_.push(r),r}function uS(e){if(!P_(e)||H_(e))return e;const t=e[A_];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=U_(e,t.scope_.immer_.useStrictShallowCopy_)}else r=U_(e,!0);return I_(r,(e,t)=>{L_(r,e,uS(t))}),t&&(t.finalized_=!1),r}var hS=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return n.produce(e,e=>t.call(this,e,...s))}}let n;if("function"!==typeof t&&E_(6),void 0!==r&&"function"!==typeof r&&E_(7),P_(e)){const a=Z_(this),s=dS(e,void 0);let i=!0;try{n=t(s),i=!1}finally{i?X_(a):J_(a)}return Y_(a,r),eS(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===S_&&(n=void 0),this.autoFreeze_&&q_(n,!0),r){const t=[],a=[];K_("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}E_(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;const s=this.produce(e,r,(e,t)=>{n=e,a=t});return[s,n,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){P_(e)||E_(8),T_(e)&&(e=function(e){T_(e)||E_(10);return uS(e)}(e));const t=Z_(this),r=dS(e,void 0);return r[A_].isManual_=!0,J_(t),r}finishDraft(e,t){const r=e&&e[A_];r&&r.isManual_||E_(9);const{scope_:n}=r;return Y_(n,t),eS(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=K_("Patches").applyPatches_;return T_(e)?n(e,t):this.produce(e,e=>n(e,t))}};hS.produce;var fS={active:!1,index:null,dataKey:void 0,coordinate:void 0},pS=CN({name:"tooltip",initialState:{itemInteraction:{click:fS,hover:fS},axisInteraction:{click:fS,hover:fS},keyboardInteraction:fS,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=cN(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:mS,removeTooltipEntrySettings:gS,setTooltipSettingsState:vS,setActiveMouseOverItemIndex:bS,mouseLeaveItem:xS,mouseLeaveChart:yS,setActiveClickItemIndex:wS,setMouseOverAxisIndex:jS,setMouseClickAxisIndex:NS,setSyncInteraction:_S,setKeyboardInteraction:SS}=pS.actions,kS=pS.reducer,AS=CN({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:ES,setDataStartEndIndexes:CS,setComputedData:TS}=AS.actions,PS=AS.reducer,DS=CN({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(a=t.payload.bottom)&&void 0!==a?a:0,e.margin.left=null!==(s=t.payload.left)&&void 0!==s?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:OS,setLayout:IS,setChartSize:MS,setScale:RS}=DS.actions,LS=DS.reducer;function FS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var BS=e=>Array.isArray(e)?e:[e];function zS(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const r=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(r,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var US="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function qS(){return{s:0,v:void 0,o:null,p:null}}function WS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let a,s=0;function i(){let t=r;const{length:i}=arguments;for(let e=0,r=i;e<r;e++){const r=arguments[e];if("function"===typeof r||"object"===typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=qS(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=qS(),e.set(r,t)):t=n}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),s++,n){var c,d,u;const e=null!==(c=null===(d=a)||void 0===d||null===(u=d.deref)||void 0===u?void 0:u.call(d))&&void 0!==c?c:a;null!=e&&n(e,l)&&(l=e,0!==s&&s--);a="object"===typeof l&&null!==l||"function"===typeof l?new US(l):l}return o.s=1,o.v=l,l}return i.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function HS(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const a="function"===typeof e?{memoize:e,memoizeOptions:r}:e,i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n,i=0,o=0,l={},c=t.pop();"object"===typeof c&&(l=c,c=t.pop()),FS(c,"createSelector expects an output function after the inputs, but received: [".concat(typeof c,"]"));const d=(0,s.A)((0,s.A)({},a),l),{memoize:u,memoizeOptions:h=[],argsMemoize:f=WS,argsMemoizeOptions:p=[],devModeChecks:m={}}=d,g=BS(h),v=BS(p),b=zS(t),x=u(function(){return i++,c.apply(null,arguments)},...g);const y=f(function(){o++;const e=function(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}(b,arguments);return n=x.apply(null,e),n},...v);return Object.assign(y,{resultFunc:c,memoizedResultFunc:x,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>n,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:u,argsMemoize:f})};return Object.assign(i,{withTypes:()=>i}),i}var VS=HS(WS),GS=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VS;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const r=Object.keys(e),n=t(r.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t,n)=>(e[r[n]]=t,e),{})});return n},{withTypes:()=>GS}),KS=r(3044),$S=(0,t.createContext)(null),YS=e=>e,XS=()=>{var e=(0,t.useContext)($S);return e?e.store.dispatch:YS},JS=()=>{},ZS=()=>JS,QS=(e,t)=>e===t;function ek(e){var r=(0,t.useContext)($S);return(0,KS.useSyncExternalStoreWithSelector)(r?r.subscription.addNestedSub:ZS,r?r.store.getState:JS,r?r.store.getState:JS,r?e:JS,QS)}var tk=r(830),rk=r.n(tk),nk=e=>e.legend.settings,ak=VS([e=>e.legend.payload,nk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?rk()(n,r):n});function sk(e,t){if((a=e.length)>1)for(var r,n,a,s=1,i=e[t[0]],o=i.length;s<a;++s)for(n=i,i=e[t[s]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}Array.prototype.slice;function ik(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function ok(e){return function(){return e}}function lk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ck(e,t){return e[t]}function dk(e){const t=[];return t.key=e,t}function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(t){fk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fk(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pk=Math.PI/180,mk=e=>180*e/Math.PI,gk=(e,t,r,n)=>({x:e+Math.cos(-pk*n)*r,y:t+Math.sin(-pk*n)*r}),vk=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},bk=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=((e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)})({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:mk(l),angleInRadian:l}},xk=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360);return e+360*Math.min(a,s)},yk=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=bk({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o)return null;if(0===a)return null;var l,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-360*s,endAngle:r-360*s}})(t),u=s;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;l=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;l=u>=d&&u<=c}return l?hk(hk({},t),{},{radius:a,angle:xk(u,t)}):null};function wk(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Nk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jk(Object(r),!0).forEach(function(t){_k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sk(e,t,r){return aj(e)||aj(t)?r:Zw(t)?Kw()(e,t,r):"function"===typeof t?t(e):r}var kk=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Ak=1e-4,Ek={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Yw(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,s=0,i=e[0].length;s<i;++s){for(a=r=0;r<n;++r)a+=e[r][s][1]||0;if(a)for(r=0;r<n;++r)e[r][s][1]/=a}sk(e,t)}},none:sk,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],s=a.length;n<s;++n){for(var i=0,o=0;i<r;++i)o+=e[i][n][1]||0;a[n][1]+=a[n][0]=-o/2}sk(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,s=0,i=1;i<n;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,h=(u-(d[i-1][1]||0))/2,f=0;f<o;++f){var p=e[t[f]];h+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=h*u}r[i-1][1]+=r[i-1][0]=s,l&&(s-=c/l)}r[i-1][1]+=r[i-1][0]=s,sk(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Yw(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},Ck=(e,t,r)=>{var n=Ek[r],a=function(){var e=ok([]),t=lk,r=sk,n=ck;function a(a){var s,i,o=Array.from(e.apply(this,arguments),dk),l=o.length,c=-1;for(const e of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(e,o[s].key,c,a)]).data=e;for(s=0,i=ik(t(o));s<l;++s)o[i[s]].index=s;return r(o,i),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:ok(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"===typeof e?e:ok(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?lk:"function"===typeof e?e:ok(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?sk:e,a):r},a}().keys(t).value((e,t)=>+Sk(e,t,0)).order(lk).offset(n);return a(e)};var Tk=(e,t,r)=>{var n;if(null!=e)return n=Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((e,n)=>{var a=(e=>{var t=e.flat(2).filter(Jw);return[Math.min(...t),Math.max(...t)]})(wk(n,t,r));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]),[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]},Pk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/;function Ok(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Nk(Nk({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Ik(e,t){return e?String(e):"string"===typeof t?t:void 0}var Mk=e=>e.layout.width,Rk=e=>e.layout.height,Lk=e=>e.layout.scale,Fk=e=>e.layout.margin,Bk=VS(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),zk=VS(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Uk="data-recharts-item-index",qk="data-recharts-item-data-key";function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Hk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(t){Vk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vk(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gk=VS([Mk,Rk,Fk,e=>e.brush.height,function(e){return zk(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return zk(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return Bk(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return Bk(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},nk,e=>e.legend.size],(e,t,r,n,a,s,i,o,l,c)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},u=Hk(Hk({},{top:(r.top||0)+i,bottom:(r.bottom||0)+o}),d),h=u.bottom;u.bottom+=n,u=((e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===i)&&"center"!==s&&Jw(e[s]))return Nk(Nk({},e),{},{[s]:e[s]+(n||0)});if(("horizontal"===o||"vertical"===o&&"center"===s)&&"middle"!==i&&Jw(e[i]))return Nk(Nk({},e),{},{[i]:e[i]+(a||0)})}return e})(u,l,c);var f=e-u.left-u.right,p=t-u.top-u.bottom;return Hk(Hk({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(p,0)})}),Kk=VS(Gk,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),$k=(VS(Mk,Rk,(e,t)=>({x:0,y:0,width:e,height:t})),(0,t.createContext)(null)),Yk=()=>null!=(0,t.useContext)($k),Xk=e=>e.brush,Jk=VS([Xk,Gk,Fk],(e,t,r)=>({height:e.height,x:Jw(e.x)?e.x:t.left,y:Jw(e.y)?e.y:t.top+t.height+t.brushBottom-((null===r||void 0===r?void 0:r.bottom)||0),width:Jw(e.width)?e.width:t.width})),Zk=()=>{var e,t=Yk(),r=ek(Kk),n=ek(Jk),a=null===(e=ek(Xk))||void 0===e?void 0:e.padding;return t&&n&&a?{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}:r},Qk={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},eA=()=>ek(Mk),tA=()=>ek(Rk),rA=e=>e.layout.layoutType,nA=()=>ek(rA),aA=r(8354),sA=r.n(aA);function iA(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function oA(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class lA extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hA;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(cA(this,e))}has(e){return super.has(cA(this,e))}set(e,t){return super.set(dA(this,e),t)}delete(e){return super.delete(uA(this,e))}}Set;function cA(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):t}function dA(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):(r.set(a,t),t)}function uA(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)&&(t=r.get(a),r.delete(a)),t}function hA(e){return null!==e&&"object"===typeof e?e.valueOf():e}const fA=Symbol("implicit");function pA(){var e=new lA,t=[],r=[],n=fA;function a(a){let s=e.get(a);if(void 0===s){if(n!==fA)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new lA;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return pA(t,r).unknown(n)},iA.apply(a,arguments),a}function mA(){var e,t,r=pA().unknown(void 0),n=r.domain,a=r.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=i<s,h=u?i:s,f=u?s:i;e=(f-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(f-h-e*(r-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(a);++n<a;)s[n]=e+n*r;return s}(r).map(function(t){return h+e*t});return a(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},r.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return mA(n(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},iA.apply(u(),arguments)}function gA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gA(t())},e}function vA(){return gA(mA.apply(null,arguments).paddingInner(1))}const bA=Math.sqrt(50),xA=Math.sqrt(10),yA=Math.sqrt(2);function wA(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=bA?10:s>=xA?5:s>=yA?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?wA(e,t,2*r):[o,l,c]}function jA(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,s,i]=n?wA(t,e,r):wA(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function NA(e,t,r){return wA(e=+e,t=+t,r=+r)[2]}function _A(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?NA(t,e,r):NA(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function SA(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kA(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function AA(e){let t,r,n;function a(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<0?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=SA,r=(t,r)=>SA(e(t),r),n=(t,r)=>e(t)-r):(t=e===SA||e===kA?e:EA,r=e,n=e),{left:a,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=a(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>r&&n(e[s-1],t)>-n(e[s],t)?s-1:s},right:function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<=0?a=t+1:s=t}while(a<s)}return a}}}function EA(){return 0}function CA(e){return null===e?NaN:+e}const TA=AA(SA),PA=TA.right,DA=(TA.left,AA(CA).center,PA);function OA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function IA(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function MA(){}var RA=.7,LA=1/RA,FA="\\s*([+-]?\\d+)\\s*",BA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UA=/^#([0-9a-f]{3,8})$/,qA=new RegExp("^rgb\\(".concat(FA,",").concat(FA,",").concat(FA,"\\)$")),WA=new RegExp("^rgb\\(".concat(zA,",").concat(zA,",").concat(zA,"\\)$")),HA=new RegExp("^rgba\\(".concat(FA,",").concat(FA,",").concat(FA,",").concat(BA,"\\)$")),VA=new RegExp("^rgba\\(".concat(zA,",").concat(zA,",").concat(zA,",").concat(BA,"\\)$")),GA=new RegExp("^hsl\\(".concat(BA,",").concat(zA,",").concat(zA,"\\)$")),KA=new RegExp("^hsla\\(".concat(BA,",").concat(zA,",").concat(zA,",").concat(BA,"\\)$")),$A={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function YA(){return this.rgb().formatHex()}function XA(){return this.rgb().formatRgb()}function JA(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=UA.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?ZA(t):3===r?new tE(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?QA(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?QA(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=qA.exec(e))?new tE(t[1],t[2],t[3],1):(t=WA.exec(e))?new tE(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=HA.exec(e))?QA(t[1],t[2],t[3],t[4]):(t=VA.exec(e))?QA(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=GA.exec(e))?oE(t[1],t[2]/100,t[3]/100,1):(t=KA.exec(e))?oE(t[1],t[2]/100,t[3]/100,t[4]):$A.hasOwnProperty(e)?ZA($A[e]):"transparent"===e?new tE(NaN,NaN,NaN,0):null}function ZA(e){return new tE(e>>16&255,e>>8&255,255&e,1)}function QA(e,t,r,n){return n<=0&&(e=t=r=NaN),new tE(e,t,r,n)}function eE(e,t,r,n){return 1===arguments.length?function(e){return e instanceof MA||(e=JA(e)),e?new tE((e=e.rgb()).r,e.g,e.b,e.opacity):new tE}(e):new tE(e,t,r,null==n?1:n)}function tE(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function rE(){return"#".concat(iE(this.r)).concat(iE(this.g)).concat(iE(this.b))}function nE(){const e=aE(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(sE(this.r),", ").concat(sE(this.g),", ").concat(sE(this.b)).concat(1===e?")":", ".concat(e,")"))}function aE(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sE(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function iE(e){return((e=sE(e))<16?"0":"")+e.toString(16)}function oE(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new cE(e,t,r,n)}function lE(e){if(e instanceof cE)return new cE(e.h,e.s,e.l,e.opacity);if(e instanceof MA||(e=JA(e)),!e)return new cE;if(e instanceof cE)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(r-n)/o+6*(r<n):r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new cE(i,o,l,e.opacity)}function cE(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function dE(e){return(e=(e||0)%360)<0?e+360:e}function uE(e){return Math.max(0,Math.min(1,e||0))}function hE(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function fE(e,t,r,n,a){var s=e*e,i=s*e;return((1-3*e+3*s-i)*t+(4-6*s+3*i)*r+(1+3*e+3*s-3*i)*n+i*a)/6}OA(MA,JA,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YA,formatHex:YA,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return lE(this).formatHsl()},formatRgb:XA,toString:XA}),OA(tE,eE,IA(MA,{brighter(e){return e=null==e?LA:Math.pow(LA,e),new tE(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?RA:Math.pow(RA,e),new tE(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tE(sE(this.r),sE(this.g),sE(this.b),aE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rE,formatHex:rE,formatHex8:function(){return"#".concat(iE(this.r)).concat(iE(this.g)).concat(iE(this.b)).concat(iE(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:nE,toString:nE})),OA(cE,function(e,t,r,n){return 1===arguments.length?lE(e):new cE(e,t,r,null==n?1:n)},IA(MA,{brighter(e){return e=null==e?LA:Math.pow(LA,e),new cE(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?RA:Math.pow(RA,e),new cE(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new tE(hE(e>=240?e-240:e+120,a,n),hE(e,a,n),hE(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new cE(dE(this.h),uE(this.s),uE(this.l),aE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=aE(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(dE(this.h),", ").concat(100*uE(this.s),"%, ").concat(100*uE(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const pE=e=>()=>e;function mE(e,t){return function(r){return e+r*t}}function gE(e){return 1===(e=+e)?vE:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):pE(isNaN(t)?r:t)}}function vE(e,t){var r=t-e;return r?mE(e,r):pE(isNaN(e)?t:e)}const bE=function e(t){var r=gE(t);function n(e,t){var n=r((e=eE(e)).r,(t=eE(t)).r),a=r(e.g,t.g),s=r(e.b,t.b),i=vE(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function xE(e){return function(t){var r,n,a=t.length,s=new Array(a),i=new Array(a),o=new Array(a);for(r=0;r<a;++r)n=eE(t[r]),s[r]=n.r||0,i[r]=n.g||0,o[r]=n.b||0;return s=e(s),i=e(i),o=e(o),n.opacity=1,function(e){return n.r=s(e),n.g=i(e),n.b=o(e),n+""}}}xE(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],s=e[n+1],i=n>0?e[n-1]:2*a-s,o=n<t-1?e[n+2]:2*s-a;return fE((r-n/t)*t,i,a,s,o)}}),xE(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],s=e[n%t],i=e[(n+1)%t],o=e[(n+2)%t];return fE((r-n/t)*t,a,s,i,o)}});function yE(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n);for(r=0;r<a;++r)s[r]=EE(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=s[r](e);return i}}function wE(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function jE(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function NE(e,t){var r,n={},a={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=EE(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var _E=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SE=new RegExp(_E.source,"g");function kE(e,t){var r,n,a,s=_E.lastIndex=SE.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(r=_E.exec(e))&&(n=SE.exec(t));)(a=n.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(n=n[0])?o[i]?o[i]+=n:o[++i]=n:(o[++i]=null,l.push({i:i,x:jE(r,n)})),s=SE.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function AE(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(r=0;r<n;++r)a[r]=e[r]*(1-s)+t[r]*s;return a}}function EE(e,t){var r,n=typeof t;return null==t||"boolean"===n?pE(t):("number"===n?jE:"string"===n?(r=JA(t))?(t=r,bE):kE:t instanceof JA?bE:t instanceof Date?wE:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?AE:Array.isArray(t)?yE:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?NE:jE)(e,t)}function CE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function TE(e){return+e}var PE=[0,1];function DE(e){return e}function OE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function IE(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=OE(a,n),s=r(i,s)):(n=OE(n,a),s=r(s,i)),function(e){return s(n(e))}}function ME(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=OE(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(t){var r=DA(e,t,1,n)-1;return s[r](a[r](t))}}function RE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function LE(){var e,t,r,n,a,s,i=PE,o=PE,l=EE,c=DE;function d(){var e=Math.min(i.length,o.length);return c!==DE&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(i[0],i[e-1])),n=e>2?ME:IE,a=s=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=n(o,i.map(e),jE)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,TE),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=CE,d()},u.clamp=function(e){return arguments.length?(c=!!e||DE,d()):c!==DE},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function FE(){return LE()(DE,DE)}var BE,zE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function UE(e){if(!(t=zE.exec(e)))throw new Error("invalid format: "+e);var t;return new qE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function qE(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function WE(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function HE(e){return(e=WE(Math.abs(e)))?e[1]:NaN}function VE(e,t){var r=WE(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}UE.prototype=qE.prototype,qE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const GE={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>VE(100*e,t),r:VE,s:function(e,t){var r=WE(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(BE=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+WE(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KE(e){return e}var $E,YE,XE,JE=Array.prototype.map,ZE=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function QE(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?KE:(t=JE.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,s=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[i=(i+1)%t.length];return s.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?KE:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(JE.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=UE(e)).fill,r=e.align,u=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,v=e.trim,b=e.type;"n"===b?(m=!0,b="g"):GE[b]||(void 0===g&&(g=12),v=!0,b="g"),(f||"0"===t&&"="===r)&&(f=!0,t="0",r="=");var x="$"===h?a:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===h?s:/[%p]/.test(b)?l:"",w=GE[b],j=/[defgprs%]/.test(b);function N(e){var a,s,l,h=x,N=y;if("c"===b)N=w(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),h=(_?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===b?ZE[8+BE/3]:"")+N+(_&&"("===u?")":""),j)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}m&&!f&&(e=n(e,1/0));var S=h.length+e.length+N.length,k=S<p?new Array(p-S+1).join(t):"";switch(m&&f&&(e=n(k+e,k.length?p-N.length:1/0),k=""),r){case"<":e=h+e+N+k;break;case"=":e=h+k+e+N;break;case"^":e=k.slice(0,S=k.length>>1)+h+e+N+k.slice(S);break;default:e=k+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=UE(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(HE(t)/3))),a=Math.pow(10,-n),s=ZE[8+n/3];return function(e){return r(a*e)+s}}}}function eC(e,t,r,n){var a,s=_A(e,t,r);switch((n=UE(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(HE(t)/3)))-HE(Math.abs(e)))}(s,i))||(n.precision=a),XE(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,HE(t)-HE(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-HE(Math.abs(e)))}(s))||(n.precision=a-2*("%"===n.type))}return YE(n)}function tC(e){var t=e.domain;return e.ticks=function(e){var r=t();return jA(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return eC(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=NA(l,c,r))===n)return s[i]=l,s[o]=c,t(s);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function rC(){var e=FE();return e.copy=function(){return RE(e,rC())},iA.apply(e,arguments),tC(e)}function nC(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,TE),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return nC(e).unknown(t)},e=arguments.length?Array.from(e,TE):[0,1],tC(r)}function aC(e,t){var r,n=0,a=(e=e.slice()).length-1,s=e[n],i=e[a];return i<s&&(r=n,n=a,a=r,r=s,s=i,i=r),e[n]=t.floor(s),e[a]=t.ceil(i),e}function sC(e){return Math.log(e)}function iC(e){return Math.exp(e)}function oC(e){return-Math.log(-e)}function lC(e){return-Math.exp(-e)}function cC(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dC(e){return(t,r)=>-e(-t,r)}function uC(e){const t=e(sC,iC),r=t.domain;let n,a,s=10;function i(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),a=function(e){return 10===e?cC:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(n=dC(n),a=dC(a),e(oC,lC)):e(sC,iC),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=n(i),h=n(o);const f=null==e?10:+e;let p=[];if(!(s%1)&&h-u<f){if(u=Math.floor(u),h=Math.ceil(h),i>0){for(;u<=h;++u)for(c=1;c<s;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=h;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<f&&(p=jA(i,o,f))}else p=jA(u,h,Math.min(h-u,f)).map(a);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!==typeof r&&(s%1||null!=(r=UE(r)).precision||(r.trim=!0),r=YE(r)),e===1/0)return r;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*s<s-.5&&(t*=s),t<=i?r(e):""}},t.nice=()=>r(aC(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function hC(){const e=uC(LE()).domain([1,10]);return e.copy=()=>RE(e,hC()).base(e.base()),iA.apply(e,arguments),e}function fC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mC(e){var t=1,r=e(fC(t),pC(t));return r.constant=function(r){return arguments.length?e(fC(t=+r),pC(t)):t},tC(r)}function gC(){var e=mC(LE());return e.copy=function(){return RE(e,gC()).constant(e.constant())},iA.apply(e,arguments)}function vC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function bC(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function xC(e){return e<0?-e*e:e*e}function yC(e){var t=e(DE,DE),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(DE,DE):.5===r?e(bC,xC):e(vC(r),vC(1/r)):r},tC(t)}function wC(){var e=yC(LE());return e.copy=function(){return RE(e,wC()).exponent(e.exponent())},iA.apply(e,arguments),e}function jC(){return wC.apply(null,arguments).exponent(.5)}function NC(e){return Math.sign(e)*e*e}function _C(){var e,t=FE(),r=[0,1],n=!1;function a(r){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(a)?e:n?Math.round(a):a}return a.invert=function(e){return t.invert(NC(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((r=Array.from(e,TE)).map(NC)),a):r.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(n=!!e,a):n},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return _C(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},iA.apply(a,arguments),tC(a)}function SC(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function kC(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function AC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SA;if(e===SA)return EC;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function EC(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function CC(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?EC:AC(a);n>r;){if(n-r>600){const s=n-r+1,i=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);CC(e,t,Math.max(r,Math.floor(t-i*l/s+c)),Math.min(n,Math.floor(t+(s-i)*l/s+c)),a)}const s=e[t];let i=r,o=n;for(TC(e,r,t),a(e[n],s)>0&&TC(e,r,n);i<o;){for(TC(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}0===a(e[r],s)?TC(e,r,o):(++o,TC(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function TC(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function PC(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return kC(e);if(t>=1)return SC(e);var n,a=(n-1)*t,s=Math.floor(a),i=SC(CC(e,s).subarray(0,s+1));return i+(kC(e.subarray(s+1))-i)*(a-s)}}function DC(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:CA;if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e);return i+(+r(e[s+1],s+1,e)-i)*(a-s)}}function OC(){var e,t=[],r=[],n=[];function a(){var e=0,a=Math.max(1,r.length);for(n=new Array(a-1);++e<a;)n[e-1]=DC(t,e/a);return s}function s(t){return null==t||isNaN(t=+t)?e:r[DA(n,t)]}return s.invertExtent=function(e){var a=r.indexOf(e);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(SA),a()},s.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return n.slice()},s.copy=function(){return OC().domain(t).range(r).unknown(e)},iA.apply(s,arguments)}function IC(){var e,t=0,r=1,n=1,a=[.5],s=[0,1];function i(t){return null!=t&&t<=t?s[DA(a,t,0,n)]:e}function o(){var e=-1;for(a=new Array(n);++e<n;)a[e]=((e+1)*r-(e-n)*t)/(n+1);return i}return i.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,o()):[t,r]},i.range=function(e){return arguments.length?(n=(s=Array.from(e)).length-1,o()):s.slice()},i.invertExtent=function(e){var i=s.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=n?[a[n-1],r]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return IC().domain([t,r]).range(s).unknown(e)},iA.apply(tC(i),arguments)}function MC(){var e,t=[.5],r=[0,1],n=1;function a(a){return null!=a&&a<=a?r[DA(t,a,0,n)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return MC().domain(t).range(r).unknown(e)},iA.apply(a,arguments)}$E=QE({thousands:",",grouping:[3],currency:["$",""]}),YE=$E.format,XE=$E.formatPrefix;const RC=1e3,LC=6e4,FC=36e5,BC=864e5,zC=6048e5,UC=2592e6,qC=31536e6,WC=new Date,HC=new Date;function VC(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,s)=>{const i=[];if(r=a.ceil(r),s=null==s?1:Math.floor(s),!(r<n)||!(s>0))return i;let o;do{i.push(o=new Date(+r)),t(r,s),e(r)}while(o<r&&r<n);return i},a.filter=r=>VC(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(WC.setTime(+t),HC.setTime(+n),e(WC),e(HC),Math.floor(r(WC,HC))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const GC=VC(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);GC.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?VC(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):GC:null);GC.range;const KC=VC(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*RC)},(e,t)=>(t-e)/RC,e=>e.getUTCSeconds()),$C=(KC.range,VC(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*RC)},(e,t)=>{e.setTime(+e+t*LC)},(e,t)=>(t-e)/LC,e=>e.getMinutes())),YC=($C.range,VC(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*LC)},(e,t)=>(t-e)/LC,e=>e.getUTCMinutes())),XC=(YC.range,VC(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*RC-e.getMinutes()*LC)},(e,t)=>{e.setTime(+e+t*FC)},(e,t)=>(t-e)/FC,e=>e.getHours())),JC=(XC.range,VC(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*FC)},(e,t)=>(t-e)/FC,e=>e.getUTCHours())),ZC=(JC.range,VC(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*LC)/BC,e=>e.getDate()-1)),QC=(ZC.range,VC(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/BC,e=>e.getUTCDate()-1)),eT=(QC.range,VC(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/BC,e=>Math.floor(e/BC)));eT.range;function tT(e){return VC(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*LC)/zC)}const rT=tT(0),nT=tT(1),aT=tT(2),sT=tT(3),iT=tT(4),oT=tT(5),lT=tT(6);rT.range,nT.range,aT.range,sT.range,iT.range,oT.range,lT.range;function cT(e){return VC(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/zC)}const dT=cT(0),uT=cT(1),hT=cT(2),fT=cT(3),pT=cT(4),mT=cT(5),gT=cT(6),vT=(dT.range,uT.range,hT.range,fT.range,pT.range,mT.range,gT.range,VC(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),bT=(vT.range,VC(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),xT=(bT.range,VC(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));xT.every=e=>isFinite(e=Math.floor(e))&&e>0?VC(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null;xT.range;const yT=VC(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yT.every=e=>isFinite(e=Math.floor(e))&&e>0?VC(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null;yT.range;function wT(e,t,r,n,a,s){const i=[[KC,1,RC],[KC,5,5e3],[KC,15,15e3],[KC,30,3e4],[s,1,LC],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,FC],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,BC],[n,2,1728e5],[r,1,zC],[t,1,UC],[t,3,7776e6],[e,1,qC]];function o(t,r,n){const a=Math.abs(r-t)/n,s=AA(e=>{let[,,t]=e;return t}).right(i,a);if(s===i.length)return e.every(_A(t/qC,r/qC,n));if(0===s)return GC.every(Math.max(_A(t,r,n),1));const[o,l]=i[a/i[s-1][2]<i[s][2]/a?s-1:s];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"===typeof r.range?r:o(e,t,r),s=a?a.range(e,+t+1):[];return n?s.reverse():s},o]}const[jT,NT]=wT(yT,bT,dT,eT,JC,YC),[_T,ST]=wT(xT,vT,rT,ZC,XC,$C);function kT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function AT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ET(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var CT,TT,PT,DT={"-":"",_:" ",0:"0"},OT=/^\s*\d+/,IT=/^%/,MT=/[\\^$*+?|[\]().{}]/g;function RT(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function LT(e){return e.replace(MT,"\\$&")}function FT(e){return new RegExp("^(?:"+e.map(LT).join("|")+")","i")}function BT(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function zT(e,t,r){var n=OT.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function UT(e,t,r){var n=OT.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function qT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function WT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function HT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function VT(e,t,r){var n=OT.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function GT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function KT(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function $T(e,t,r){var n=OT.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function YT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function XT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function JT(e,t,r){var n=OT.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function ZT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function QT(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function eP(e,t,r){var n=OT.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function tP(e,t,r){var n=OT.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function rP(e,t,r){var n=OT.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function nP(e,t,r){var n=IT.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function aP(e,t,r){var n=OT.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function sP(e,t,r){var n=OT.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function iP(e,t){return RT(e.getDate(),t,2)}function oP(e,t){return RT(e.getHours(),t,2)}function lP(e,t){return RT(e.getHours()%12||12,t,2)}function cP(e,t){return RT(1+ZC.count(xT(e),e),t,3)}function dP(e,t){return RT(e.getMilliseconds(),t,3)}function uP(e,t){return dP(e,t)+"000"}function hP(e,t){return RT(e.getMonth()+1,t,2)}function fP(e,t){return RT(e.getMinutes(),t,2)}function pP(e,t){return RT(e.getSeconds(),t,2)}function mP(e){var t=e.getDay();return 0===t?7:t}function gP(e,t){return RT(rT.count(xT(e)-1,e),t,2)}function vP(e){var t=e.getDay();return t>=4||0===t?iT(e):iT.ceil(e)}function bP(e,t){return e=vP(e),RT(iT.count(xT(e),e)+(4===xT(e).getDay()),t,2)}function xP(e){return e.getDay()}function yP(e,t){return RT(nT.count(xT(e)-1,e),t,2)}function wP(e,t){return RT(e.getFullYear()%100,t,2)}function jP(e,t){return RT((e=vP(e)).getFullYear()%100,t,2)}function NP(e,t){return RT(e.getFullYear()%1e4,t,4)}function _P(e,t){var r=e.getDay();return RT((e=r>=4||0===r?iT(e):iT.ceil(e)).getFullYear()%1e4,t,4)}function SP(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+RT(t/60|0,"0",2)+RT(t%60,"0",2)}function kP(e,t){return RT(e.getUTCDate(),t,2)}function AP(e,t){return RT(e.getUTCHours(),t,2)}function EP(e,t){return RT(e.getUTCHours()%12||12,t,2)}function CP(e,t){return RT(1+QC.count(yT(e),e),t,3)}function TP(e,t){return RT(e.getUTCMilliseconds(),t,3)}function PP(e,t){return TP(e,t)+"000"}function DP(e,t){return RT(e.getUTCMonth()+1,t,2)}function OP(e,t){return RT(e.getUTCMinutes(),t,2)}function IP(e,t){return RT(e.getUTCSeconds(),t,2)}function MP(e){var t=e.getUTCDay();return 0===t?7:t}function RP(e,t){return RT(dT.count(yT(e)-1,e),t,2)}function LP(e){var t=e.getUTCDay();return t>=4||0===t?pT(e):pT.ceil(e)}function FP(e,t){return e=LP(e),RT(pT.count(yT(e),e)+(4===yT(e).getUTCDay()),t,2)}function BP(e){return e.getUTCDay()}function zP(e,t){return RT(uT.count(yT(e)-1,e),t,2)}function UP(e,t){return RT(e.getUTCFullYear()%100,t,2)}function qP(e,t){return RT((e=LP(e)).getUTCFullYear()%100,t,2)}function WP(e,t){return RT(e.getUTCFullYear()%1e4,t,4)}function HP(e,t){var r=e.getUTCDay();return RT((e=r>=4||0===r?pT(e):pT.ceil(e)).getUTCFullYear()%1e4,t,4)}function VP(){return"+0000"}function GP(){return"%"}function KP(e){return+e}function $P(e){return Math.floor(+e/1e3)}function YP(e){return new Date(e)}function XP(e){return e instanceof Date?+e:+new Date(+e)}function JP(e,t,r,n,a,s,i,o,l,c){var d=FE(),u=d.invert,h=d.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),b=c("%b %d"),x=c("%B"),y=c("%Y");function w(e){return(l(e)<e?f:o(e)<e?p:i(e)<e?m:s(e)<e?g:n(e)<e?a(e)<e?v:b:r(e)<e?x:y)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,XP)):h().map(YP)},d.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?w:c(t)},d.nice=function(e){var r=h();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(aC(r,e)):d},d.copy=function(){return RE(d,JP(e,t,r,n,a,s,i,o,l,c))},d}function ZP(){return iA.apply(JP(_T,ST,xT,vT,rT,ZC,XC,$C,KC,TT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function QP(){return iA.apply(JP(jT,NT,yT,bT,dT,QC,JC,YC,KC,PT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function eD(){var e,t,r,n,a,s=0,i=1,o=DE,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([s,i]=a,e=n(s=+s),t=n(i=+i),r=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(EE),c.rangeRound=d(CE),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(s),t=a(i),r=e===t?0:1/(t-e),c}}function tD(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rD(){var e=tC(eD()(DE));return e.copy=function(){return tD(e,rD())},oA.apply(e,arguments)}function nD(){var e=uC(eD()).domain([1,10]);return e.copy=function(){return tD(e,nD()).base(e.base())},oA.apply(e,arguments)}function aD(){var e=mC(eD());return e.copy=function(){return tD(e,aD()).constant(e.constant())},oA.apply(e,arguments)}function sD(){var e=yC(eD());return e.copy=function(){return tD(e,sD()).exponent(e.exponent())},oA.apply(e,arguments)}function iD(){return sD.apply(null,arguments).exponent(.5)}function oD(){var e=[],t=DE;function r(r){if(null!=r&&!isNaN(r=+r))return t((DA(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(SA),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>PC(e,n/t))},r.copy=function(){return oD(t).domain(e)},oA.apply(r,arguments)}function lD(){var e,t,r,n,a,s,i,o=0,l=.5,c=1,d=1,u=DE,h=!1;function f(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?n:a),u(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,u=function(e,t){void 0===t&&(t=e,e=EE);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}(e,[r,n,a]),f):[u(0),u(.5),u(1)]}}return f.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),r=s(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,f):[o,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(u=e,f):u},f.range=p(EE),f.rangeRound=p(CE),f.unknown=function(e){return arguments.length?(i=e,f):i},function(i){return s=i,e=i(o),t=i(l),r=i(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,f}}function cD(){var e=tC(lD()(DE));return e.copy=function(){return tD(e,cD())},oA.apply(e,arguments)}function dD(){var e=uC(lD()).domain([.1,1,10]);return e.copy=function(){return tD(e,dD()).base(e.base())},oA.apply(e,arguments)}function uD(){var e=mC(lD());return e.copy=function(){return tD(e,uD()).constant(e.constant())},oA.apply(e,arguments)}function hD(){var e=yC(lD());return e.copy=function(){return tD(e,hD()).exponent(e.exponent())},oA.apply(e,arguments)}function fD(){return hD.apply(null,arguments).exponent(.5)}!function(e){CT=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=FT(a),d=BT(a),u=FT(s),h=BT(s),f=FT(i),p=BT(i),m=FT(o),g=BT(o),v=FT(l),b=BT(l),x={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:iP,e:iP,f:uP,g:jP,G:_P,H:oP,I:lP,j:cP,L:dP,m:hP,M:fP,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:KP,s:$P,S:pP,u:mP,U:gP,V:bP,w:xP,W:yP,x:null,X:null,y:wP,Y:NP,Z:SP,"%":GP},y={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:kP,e:kP,f:PP,g:qP,G:HP,H:AP,I:EP,j:CP,L:TP,m:DP,M:OP,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:KP,s:$P,S:IP,u:MP,U:RP,V:FP,w:BP,W:zP,x:null,X:null,y:UP,Y:WP,Z:VP,"%":GP},w={a:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=b.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return _(e,t,r,n)},d:XT,e:XT,f:rP,g:GT,G:VT,H:ZT,I:ZT,j:JT,L:tP,m:YT,M:QT,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:$T,Q:aP,s:sP,S:eP,u:UT,U:qT,V:WT,w:zT,W:HT,x:function(e,t,n){return _(e,r,t,n)},X:function(e,t,r){return _(e,n,t,r)},y:GT,Y:VT,Z:KT,"%":nP};function j(e,t){return function(r){var n,a,s,i=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=DT[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(s=t[n])&&(n=s(r,a)),i.push(n),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(r){var n,a,s=ET(1900,void 0,1);if(_(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(n=AT(ET(s.y,0,1))).getUTCDay(),n=a>4||0===a?uT.ceil(n):uT(n),n=QC.offset(n,7*(s.V-1)),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(a=(n=kT(ET(s.y,0,1))).getDay(),n=a>4||0===a?nT.ceil(n):nT(n),n=ZC.offset(n,7*(s.V-1)),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?AT(ET(s.y,0,1)).getUTCDay():kT(ET(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,AT(s)):kT(s)}}function _(e,t,r,n){for(var a,s,i=0,o=t.length,l=r.length;i<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(s=w[a in DT?t.charAt(i++):a])||(n=s(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return x.x=j(r,x),x.X=j(n,x),x.c=j(t,x),y.x=j(r,y),y.X=j(n,y),y.c=j(t,y),{format:function(e){var t=j(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),TT=CT.format,CT.parse,PT=CT.utcFormat,CT.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var pD=e=>e.chartData,mD=VS([pD],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),gD=(e,t,r,n)=>n?mD(e):pD(e);function vD(e){return Number.isFinite(e)}function bD(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function xD(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(vD(t)&&vD(r))return!0}return!1}function yD(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}var wD=r(4441),jD=r.n(wD),ND=e=>e,_D={"@@functional/placeholder":!0},SD=e=>e===_D,kD=e=>function t(){return 0===arguments.length||1===arguments.length&&SD(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},AD=(e,t)=>1===e?t:kD(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(e=>e!==_D).length;return s>=e?t(...n):AD(e-s,kD(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var s=n.map(e=>SD(e)?r.shift():e);return t(...s,...r)}))}),ED=e=>AD(e.length,e),CD=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},TD=ED((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),PD=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),DD=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((e,r)=>{var n;return e===(null===(n=t)||void 0===n?void 0:n[r])})?r:(t=a,r=e(...a))}};function OD(e){return 0===e?1:Math.floor(new(jD())(e).abs().log(10).toNumber())+1}function ID(e,t,r){for(var n=new(jD())(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}ED((e,t,r)=>{var n=+e;return n+r*(+t-n)}),ED((e,t,r)=>{var n=t-+e;return(r-e)/(n=n||1/0)}),ED((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var MD=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},RD=(e,t,r)=>{if(e.lte(0))return new(jD())(0);var n=OD(e.toNumber()),a=new(jD())(10).pow(n),s=e.div(a),i=1!==n?.05:.1,o=new(jD())(Math.ceil(s.div(i).toNumber())).add(r).mul(i).mul(a);return t?new(jD())(o.toNumber()):new(jD())(Math.ceil(o.toNumber()))},LD=(e,t,r)=>{var n=new(jD())(1),a=new(jD())(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new(jD())(10).pow(OD(e)-1),a=new(jD())(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new(jD())(Math.floor(e)))}else 0===e?a=new(jD())(Math.floor((t-1)/2)):r||(a=new(jD())(Math.floor(e)));var i=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return ND;var n=t.reverse(),a=n[0],s=n.slice(1);return function(){return s.reduce((e,t)=>t(e),a(...arguments))}}(TD(e=>a.add(new(jD())(e-i).mul(n)).toNumber()),CD)(0,t)},FD=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(jD())(0),tickMin:new(jD())(0),tickMax:new(jD())(0)};var s,i=RD(new(jD())(t).sub(e).div(r-1),n,a);s=e<=0&&t>=0?new(jD())(0):(s=new(jD())(e).add(t).div(2)).sub(new(jD())(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new(jD())(t).sub(s).div(i).toNumber()),c=o+l+1;return c>r?FD(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:i,tickMin:s.sub(new(jD())(o).mul(i)),tickMax:s.add(new(jD())(l).mul(i))})};var BD=DD(function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(n,2),[i,o]=MD([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...CD(0,n-1).map(()=>1/0)]:[...CD(0,n-1).map(()=>-1/0),o];return t>r?PD(l):l}if(i===o)return LD(i,n,a);var{step:c,tickMin:d,tickMax:u}=FD(i,o,s,a,0),h=ID(d,u.add(new(jD())(.1).mul(c)),c);return t>r?PD(h):h}),zD=DD(function(e,t){var[r,n]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[s,i]=MD([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),l=RD(new(jD())(i).sub(s).div(o-1),a,0),c=[...ID(new(jD())(s),new(jD())(i),l),i];return!1===a&&(c=c.map(e=>Math.round(e))),r>n?PD(c):c}),UD=e=>e.rootProps.stackOffset,qD=e=>e.options.chartName,WD=e=>e.rootProps.syncId,HD=e=>e.rootProps.syncMethod,VD=e=>e.options.eventEmitter,GD=0,KD="auto",$D=!0,YD=!1,XD=!0,JD=0,ZD="auto",QD=!0,eO=5,tO=(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t},rO={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:GD,includeHidden:!1,name:void 0,reversed:!1,scale:KD,tick:$D,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},nO={allowDataOverflow:YD,allowDecimals:!1,allowDuplicatedCategory:XD,dataKey:void 0,domain:void 0,id:JD,includeHidden:!1,name:void 0,reversed:!1,scale:ZD,tick:QD,tickCount:eO,ticks:void 0,type:"number",unit:void 0},aO={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:GD,includeHidden:!1,name:void 0,reversed:!1,scale:KD,tick:$D,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},sO={allowDataOverflow:YD,allowDecimals:!1,allowDuplicatedCategory:XD,dataKey:void 0,domain:void 0,id:JD,includeHidden:!1,name:void 0,reversed:!1,scale:ZD,tick:QD,tickCount:eO,ticks:void 0,type:"category",unit:void 0},iO=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?aO:rO,oO=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?sO:nO,lO=e=>e.polarOptions,cO=VS([Mk,Rk,Gk],vk),dO=VS([lO,cO],(e,t)=>{if(null!=e)return tj(e.innerRadius,t,0)}),uO=VS([lO,cO],(e,t)=>{if(null!=e)return tj(e.outerRadius,t,.8*t)}),hO=VS([lO],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}),fO=(VS([iO,hO],tO),VS([cO,dO,uO],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]})),pO=(VS([oO,fO],tO),VS([rA,lO,dO,uO,Mk,Rk],(e,t,r,n,a,s)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:i,cy:o,startAngle:l,endAngle:c}=t;return{cx:tj(i,a,a/2),cy:tj(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}})),mO=(e,t)=>t,gO=(e,t,r)=>r;function vO(e){return null===e||void 0===e?void 0:e.id}var bO=e=>{var t=rA(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},xO=e=>e.tooltip.settings.axisId,yO=e=>{var t=bO(e),r=xO(e);return MO(e,t,r)},wO=VS([yO],e=>null===e||void 0===e?void 0:e.dataKey);function jO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var o=vO(e);r.forEach((t,r)=>{var n,l=null==s||a?r:String(Sk(t,s,null)),c=Sk(t,e.dataKey,0);n=i.has(l)?i.get(l):{},Object.assign(n,{[o]:c}),i.set(l,n)})}}),Array.from(i.values())}function NO(e){return null!=e.stackId&&null!=e.dataKey}function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function SO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_O(Object(r),!0).forEach(function(t){kO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AO=[0,"auto"],EO={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},CO=(e,t)=>{var r=((e,t)=>e.cartesianAxis.xAxis[t])(e,t);return null==r?EO:r},TO={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:AO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},PO=(e,t)=>{var r=((e,t)=>e.cartesianAxis.yAxis[t])(e,t);return null==r?TO:r},DO={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OO=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?DO:r},IO=(e,t,r)=>{switch(t){case"xAxis":return CO(e,r);case"yAxis":return PO(e,r);case"zAxis":return OO(e,r);case"angleAxis":return iO(e,r);case"radiusAxis":return oO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},MO=(e,t,r)=>{switch(t){case"xAxis":return CO(e,r);case"yAxis":return PO(e,r);case"angleAxis":return iO(e,r);case"radiusAxis":return oO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RO=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function LO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var FO=VS([mO,gO],LO),BO=(e,t,r)=>e.filter(r).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),zO=VS([e=>e.graphicalItems.cartesianItems,IO,FO],BO),UO=VS([zO],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(NO)),qO=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),WO=VS([zO],qO),HO=e=>e.map(e=>e.data).filter(Boolean).flat(1),VO=VS([zO],HO),GO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},KO=VS([VO,gD],GO),$O=(e,t,r)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Sk(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Sk(e,t)}))):e.map(e=>({value:e})),YO=VS([KO,IO,zO],$O);function XO(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function JO(e){return e.filter(e=>Zw(e)||e instanceof Date).map(Number).filter(e=>!1===Yw(e))}function ZO(e,t,r){return!r||"number"!==typeof t||Yw(t)?[]:r.length?JO(r.flatMap(r=>{var n,a,s=Sk(e,r.dataKey);if(Array.isArray(s)?[n,a]=s:n=a=s,vD(n)&&vD(a))return[t-n,t+a]})):[]}var QO=VS([UO,gD,yO],jO),eI=(e,t,r)=>{var n=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(n).map(t=>{var[n,a]=t,s=a.map(vO);return[n,{stackedData:Ck(e,s,r),graphicalItems:a}]}))},tI=VS([QO,UO,UD],eI),rI=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if("zAxis"!==r){var s=Tk(e,n,a);if(null==s||0!==s[0]||0!==s[1])return s}},nI=VS([tI,pD,mO],rI),aI=(e,t,r,n,a)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var s,i,o=null===(s=n[r.id])||void 0===s?void 0:s.filter(e=>XO(a,e)),l=Sk(e,null!==(i=t.dataKey)&&void 0!==i?i:r.dataKey);return{value:l,errorDomain:ZO(e,l,o)}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Sk(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})),sI=e=>e.errorBars,iI=(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>XO(r,e)),oI=(VS([WO,sI,mO],iI),VS([KO,IO,WO,sI,mO],aI));function lI(e){var{value:t}=e;if(Zw(t)||t instanceof Date)return t}var cI=e=>{var t=e.flatMap(e=>[e.value,e.errorDomain]).flat(1),r=JO(t);if(0!==r.length)return[Math.min(...r),Math.max(...r)]},dI=e=>{var t;if(null==e||!("domain"in e))return AO;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=JO(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:AO},uI=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var a=n.flat();return[Math.min(...a),Math.max(...a)]}},hI=e=>e.referenceElements.dots,fI=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),pI=VS([hI,mO,gO],fI),mI=e=>e.referenceElements.areas,gI=VS([mI,mO,gO],fI),vI=e=>e.referenceElements.lines,bI=VS([vI,mO,gO],fI),xI=(e,t)=>{var r=JO(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},yI=VS(pI,mO,xI),wI=(e,t)=>{var r=JO(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},jI=VS([gI,mO],wI),NI=(e,t)=>{var r=JO(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},_I=VS(bI,mO,NI),SI=VS(yI,_I,jI,(e,t,r)=>uI(e,r,t)),kI=VS([IO],dI),AI=(e,t,r,n,a,s,i)=>{var o=function(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var r,n,[a,s]=e;if(vD(a))r=a;else if("function"===typeof a)return;if(vD(s))n=s;else if("function"===typeof s)return;var i=[r,n];if(xD(i))return i}}(t,e.allowDataOverflow);return null!=o?o:function(e,t,r){if(r||null!=t){if("function"===typeof e&&null!=t)try{var n=e(t,r);if(xD(n))return yD(n,t,r)}catch(f){}if(Array.isArray(e)&&2===e.length){var a,s,[i,o]=e;if("auto"===i)null!=t&&(a=Math.min(...t));else if(Jw(i))a=i;else if("function"===typeof i)try{null!=t&&(a=i(null===t||void 0===t?void 0:t[0]))}catch(p){}else if("string"===typeof i&&Pk.test(i)){var l=Pk.exec(i);if(null==l||null==t)a=void 0;else{var c=+l[1];a=t[0]-c}}else a=null===t||void 0===t?void 0:t[0];if("auto"===o)null!=t&&(s=Math.max(...t));else if(Jw(o))s=o;else if("function"===typeof o)try{null!=t&&(s=o(null===t||void 0===t?void 0:t[1]))}catch(m){}else if("string"===typeof o&&Dk.test(o)){var d=Dk.exec(o);if(null==d||null==t)s=void 0;else{var u=+d[1];s=t[1]+u}}else s=null===t||void 0===t?void 0:t[1];var h=[a,s];if(xD(h))return null==t?h:yD(h,t,r)}}}(t,"vertical"===s&&"xAxis"===i||"horizontal"===s&&"yAxis"===i?uI(r,a,cI(n)):uI(a,cI(n)),e.allowDataOverflow)},EI=VS([IO,kI,nI,oI,SI,rA,mO],AI),CI=[0,1],TI=(e,t,r,n,a,s,i)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==i){var{dataKey:o,type:l}=e,c=kk(t,s);return c&&null==o?sA()(0,r.length):"category"===l?((e,t,r)=>{var n=e.map(lI).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&rj(n))?sA()(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,c):"expand"===a?CI:i}},PI=VS([IO,rA,KO,YO,UD,mO,EI],TI),DI=(t,r,n,a,s)=>{if(null!=t){var{scale:i,type:o}=t;if("auto"===i)return"radial"===r&&"radiusAxis"===s?"band":"radial"===r&&"angleAxis"===s?"linear":"category"===o&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":"category"===o?"band":"linear";if("string"===typeof i){var l="scale".concat(sj(i));return l in e?l:"point"}}},OI=VS([IO,rA,RO,qD,mO],DI);function II(t,r,n,a){if(null!=n&&null!=a){if("function"===typeof t.scale)return t.scale.copy().domain(n).range(a);var s=function(t){if(null!=t){if(t in e)return e[t]();var r="scale".concat(sj(t));return r in e?e[r]():void 0}}(r);if(null!=s){var i=s.domain(n).range(a);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Ak,s=Math.max(n[0],n[1])+Ak,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}})(i),i}}}var MI=(e,t,r)=>{var n=dI(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&xD(e)?BD(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&xD(e)?zD(e,t.tickCount,t.allowDecimals):void 0},RI=VS([PI,MO,OI],MI),LI=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null===e||void 0===e?void 0:e.type)&&xD(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},FI=VS([IO,PI,RI,mO],LI),BI=VS(YO,IO,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(JO(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(0===a)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),zI=VS(BI,rA,e=>e.rootProps.barCategoryGap,Gk,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!vD(e))return 0;var s="vertical"===t?n.height:n.width;if("gap"===a)return e*s/2;if("no-gap"===a){var i=tj(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),UI=VS(CO,(e,t)=>{var r=CO(e,t);return null==r||"string"!==typeof r.padding?0:zI(e,"xAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"===typeof a?{left:t,right:t}:{left:(null!==(r=a.left)&&void 0!==r?r:0)+t,right:(null!==(n=a.right)&&void 0!==n?n:0)+t}}),qI=VS(PO,(e,t)=>{var r=PO(e,t);return null==r||"string"!==typeof r.padding?0:zI(e,"yAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"===typeof a?{top:t,bottom:t}:{top:(null!==(r=a.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=a.bottom)&&void 0!==n?n:0)+t}}),WI=VS([Gk,UI,Jk,Xk,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),HI=VS([Gk,rA,qI,Jk,Xk,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),VI=(e,t,r,n)=>{var a;switch(t){case"xAxis":return WI(e,r,n);case"yAxis":return HI(e,r,n);case"zAxis":return null===(a=OO(e,r))||void 0===a?void 0:a.range;case"angleAxis":return hO(e);case"radiusAxis":return fO(e,r);default:return}},GI=VS([IO,VI],tO),KI=VS([IO,OI,FI,GI],II);VS([zO,sI,mO],iI);function $I(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var YI=(e,t)=>t,XI=(e,t,r)=>r,JI=VS(Bk,YI,XI,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort($I)),ZI=VS(zk,YI,XI,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort($I)),QI=(e,t)=>({width:e.width,height:t.height}),eM=(VS(Gk,CO,QI),VS(Rk,Gk,JI,YI,XI,(e,t,r,n,a)=>{var s,i={};return r.forEach(r=>{var o=QI(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!a||"bottom"===n&&a;i[r.id]=s-Number(l)*o.height,s+=(l?-1:1)*o.height}),i})),tM=VS(Mk,Gk,ZI,YI,XI,(e,t,r,n,a)=>{var s,i={};return r.forEach(r=>{var o=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!a||"right"===n&&a;i[r.id]=s-Number(l)*o.width,s+=(l?-1:1)*o.width}),i}),rM=(VS([Gk,CO,(e,t)=>{var r=CO(e,t);if(null!=r)return eM(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null===r||void 0===r?void 0:r[n];return null==a?{x:e.left,y:0}:{x:e.left,y:a}}}),VS([Gk,PO,(e,t)=>{var r=PO(e,t);if(null!=r)return tM(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null===r||void 0===r?void 0:r[n];return null==a?{x:0,y:e.top}:{x:a,y:e.top}}}),VS(Gk,PO,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=kk(e,n),l=t.map(e=>e.value);return i&&o&&"category"===s&&a&&rj(l)?l:void 0}}),nM=VS([rA,YO,IO,mO],rM),aM=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:a,scale:s}=r;return!kk(e,n)||"number"!==a&&"auto"===s?void 0:t.map(e=>e.value)}},sM=VS([rA,YO,MO,mO],aM),iM=(VS([rA,(e,t,r)=>{switch(t){case"xAxis":return CO(e,r);case"yAxis":return PO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},OI,KI,nM,sM,VI,RI,mO],(e,t,r,n,a,s,i,o,l)=>{if(null==t)return null;var c=kk(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:a,isCategorical:c,niceTicks:o,range:i,realScaleType:r,scale:n}}),VS([rA,MO,OI,KI,RI,VI,nM,sM,mO],(e,t,r,n,a,s,i,o,l)=>{if(null!=t&&null!=n){var c=kk(e,l),{type:d,ticks:u,tickCount:h}=t,f="scaleBand"===r&&"function"===typeof n.bandwidth?n.bandwidth()/2:2,p="category"===d&&n.bandwidth?n.bandwidth()/f:0;p="angleAxis"===l&&null!=s&&s.length>=2?2*$w(s[0]-s[1])*p:p;var m=u||a;if(m){var g=m.map((e,t)=>{var r=i?i.indexOf(e):e;return{index:t,coordinate:n(r)+p,value:e,offset:p}});return g.filter(e=>!Yw(e.coordinate))}return c&&o?o.map((e,t)=>({coordinate:n(e)+p,value:e,index:t,offset:p})):n.ticks?n.ticks(h).map(e=>({coordinate:n(e)+p,value:e,offset:p})):n.domain().map((e,t)=>({coordinate:n(e)+p,value:i?i[e]:e,index:t,offset:p}))}}),VS([rA,MO,KI,VI,nM,sM,mO],(e,t,r,n,a,s,i)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var o=kk(e,i),{tickCount:l}=t,c=0;return c="angleAxis"===i&&(null===n||void 0===n?void 0:n.length)>=2?2*$w(n[0]-n[1])*c:c,o&&s?s.map((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c})):r.ticks?r.ticks(l).map(e=>({coordinate:r(e)+c,value:e,offset:c})):r.domain().map((e,t)=>({coordinate:r(e)+c,value:a?a[e]:e,index:t,offset:c}))}}),VS(IO,KI,(e,t)=>{if(null!=e&&null!=t)return SO(SO({},e),{},{scale:t})}),VS([IO,OI,PI,GI],II)),oM=(VS((e,t,r)=>OO(e,r),iM,(e,t)=>{if(null!=e&&null!=t)return SO(SO({},e),{},{scale:t})}),VS([rA,Bk,zk],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),lM=e=>e.options.defaultTooltipEventType,cM=e=>e.options.validateTooltipEventTypes;function dM(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function uM(e,t){return dM(t,lM(e),cM(e))}var hM=(e,t)=>{var r,n=Number(t);if(!Yw(n)&&null!=t)return n>=0?null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.value:void 0};function fM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fM(Object(r),!0).forEach(function(t){mM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gM=(e,t,r,n)=>{if(null==t)return fS;var a=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==a)return fS;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var s=!0===e.settings.active;if(null!=a.index){if(s)return pM(pM({},a),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return pM(pM({},fS),{},{coordinate:a.coordinate})},vM=(e,t)=>{var r=null===e||void 0===e?void 0:e.index;if(null==r)return null;var n=Number(r);if(!vD(n))return r;var a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(0,Math.min(n,a)))},bM=(e,t,r,n,a,s,i,o)=>{if(null!=s&&null!=o){var l=i[0],c=null==l?void 0:o(l.positions,s);if(null!=c)return c;var d=null===a||void 0===a?void 0:a[Number(s)];if(d)return"horizontal"===r?{x:d.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:d.coordinate}}},xM=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(a="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===a});var a},yM=e=>e.options.tooltipPayloadSearcher,wM=e=>e.tooltip;function jM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(r),!0).forEach(function(t){_M(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SM=(e,t,r,n,a,s,i)=>{if(null!=t&&null!=s){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:d}=r;return e.reduce((e,r)=>{var u,h,f,{dataDefinedOnItem:p,settings:m}=r,g=function(e,t){return null!=e?e:t}(p,o),v=Array.isArray(g)?wk(g,c,d):g,b=null!==(u=null===m||void 0===m?void 0:m.dataKey)&&void 0!==u?u:n,x=null===m||void 0===m?void 0:m.nameKey;(h=n&&Array.isArray(v)&&!Array.isArray(v[0])&&"axis"===i?function(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):Kw()(e,t))===r)}(v,n,a):s(v,t,l,x),Array.isArray(h))?h.forEach(t=>{var r=NM(NM({},m),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(Ok({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:Sk(t.payload,t.dataKey),name:t.name}))}):e.push(Ok({tooltipEntrySettings:m,dataKey:b,payload:h,value:Sk(h,b),name:null!==(f=Sk(h,x))&&void 0!==f?f:null===m||void 0===m?void 0:m.name}));return e},[])}},kM=VS([yO,rA,RO,qD,bO],DI),AM=VS([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),EM=VS([bO,xO],LO),CM=VS([AM,yO,EM],BO),TM=VS([CM],e=>e.filter(NO)),PM=VS([CM],HO),DM=VS([PM,pD],GO),OM=VS([TM,pD,yO],jO),IM=VS([DM,yO,CM],$O),MM=VS([yO],dI),RM=VS([CM],e=>e.filter(NO)),LM=VS([OM,RM,UD],eI),FM=VS([LM,pD,bO],rI),BM=VS([CM],qO),zM=VS([DM,yO,BM,sI,bO],aI),UM=VS([hI,bO,xO],fI),qM=VS([UM,bO],xI),WM=VS([mI,bO,xO],fI),HM=VS([WM,bO],wI),VM=VS([vI,bO,xO],fI),GM=VS([VM,bO],NI),KM=VS([qM,GM,HM],uI),$M=VS([yO,MM,FM,zM,KM,rA,bO],AI),YM=VS([yO,rA,DM,IM,UD,bO,$M],TI),XM=VS([YM,yO,kM],MI),JM=VS([yO,YM,XM,bO],LI),ZM=e=>{var t=bO(e),r=xO(e);return VI(e,t,r,!1)},QM=VS([yO,ZM],tO),eR=VS([yO,kM,JM,QM],II),tR=VS([rA,IM,yO,bO],rM),rR=VS([rA,IM,yO,bO],aM),nR=VS([rA,yO,kM,eR,ZM,tR,rR,bO],(e,t,r,n,a,s,i,o)=>{if(t){var{type:l}=t,c=kk(e,o);if(n){var d="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,u="category"===l&&n.bandwidth?n.bandwidth()/d:0;return u="angleAxis"===o&&null!=a&&(null===a||void 0===a?void 0:a.length)>=2?2*$w(a[0]-a[1])*u:u,c&&i?i.map((e,t)=>({coordinate:n(e)+u,value:e,index:t,offset:u})):n.domain().map((e,t)=>({coordinate:n(e)+u,value:s?s[e]:e,index:t,offset:u}))}}}),aR=VS([lM,cM,e=>e.tooltip.settings],(e,t,r)=>dM(r.shared,e,t)),sR=e=>e.tooltip.settings.trigger,iR=e=>e.tooltip.settings.defaultIndex,oR=VS([wM,aR,sR,iR],gM),lR=VS([oR,DM],vM),cR=VS([nR,lR],hM),dR=VS([oR],e=>{if(e)return e.dataKey}),uR=VS([wM,aR,sR,iR],xM),hR=VS([Mk,Rk,rA,Gk,nR,iR,uR,yM],bM),fR=VS([oR,hR],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),pR=VS([oR],e=>e.active),mR=VS([uR,lR,pD,wO,cR,yM,aR],SM),gR=(VS([mR],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}}),(e,t)=>t),vR=(e,t,r)=>r,bR=(e,t,r,n)=>n,xR=VS(nR,e=>rk()(e,e=>e.coordinate)),yR=VS([wM,gR,vR,bR],gM),wR=VS([yR,DM],vM),jR=VS([wM,gR,vR,bR],xM),NR=VS([Mk,Rk,rA,Gk,nR,bR,jR,yM],bM),_R=VS([yR,NR],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),SR=VS(nR,wR,hM),kR=VS([jR,wR,pD,wO,SR,yM,gR],SM),AR=VS([yR],e=>({isActive:e.active,activeIndex:e.index})),ER=VS([(e,t)=>t,rA,pO,bO,QM,nR,xR,Gk],(e,t,r,n,a,s,i,o)=>{if(e&&t&&n&&a&&s){var l=function(e,t,r,n,a){return"horizontal"===r||"vertical"===r?e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height?{x:e,y:t}:null:n?yk({x:e,y:t},n):null}(e.chartX,e.chartY,t,r,o);if(l){var c=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(l,t),d=((e,t,r,n,a)=>{var s,i=-1,o=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0;if(o<=1||null==e)return 0;if("angleAxis"===n&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,u=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if($w(d-c)!==$w(u-d)){var f=[];if($w(u-d)===$w(a[1]-a[0])){h=u;var p=d+a[1]-a[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var m=u+a[1]-a[0];f[0]=Math.min(d,(m+d)/2),f[1]=Math.max(d,(m+d)/2)}var g=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){({index:i}=r[l]);break}}else{var v=Math.min(c,u),b=Math.max(c,u);if(e>(v+d)/2&&e<=(b+d)/2){({index:i}=r[l]);break}}}else if(t)for(var x=0;x<o;x++)if(0===x&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x>0&&x<o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x===o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2){({index:i}=t[x]);break}return i})(c,i,s,n,a),u=((e,t,r,n)=>{var a=t.find(e=>e&&e.index===r);if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var s=a.coordinate,{radius:i}=n;return Nk(Nk(Nk({},n),gk(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:l}=n;return Nk(Nk(Nk({},n),gk(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}})(t,s,d,l);return{activeIndex:String(d),activeCoordinate:u}}}}),CR=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},TR=mN("mouseClick"),PR=l_();PR.startListening({actionCreator:TR,effect:(e,t)=>{var r=e.payload,n=ER(t.getState(),CR(r));null!=(null===n||void 0===n?void 0:n.activeIndex)&&t.dispatch(NS({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var DR=mN("mouseMove"),OR=l_();function IR(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MR(Object(r),!0).forEach(function(t){LR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function LR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}OR.startListening({actionCreator:DR,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=uM(n,n.tooltip.settings.shared),s=ER(n,CR(r));"axis"===a&&(null!=(null===s||void 0===s?void 0:s.activeIndex)?t.dispatch(jS({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(yS()))}});var FR=CN({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=RR(RR({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:BR,removeXAxis:zR,addYAxis:UR,removeYAxis:qR,addZAxis:WR,removeZAxis:HR,updateYAxisWidth:VR}=FR.actions,GR=FR.reducer,KR=CN({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=cN(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=cN(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=cN(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:$R,replaceCartesianGraphicalItem:YR,removeCartesianGraphicalItem:XR,addPolarGraphicalItem:JR,removePolarGraphicalItem:ZR}=KR.actions,QR=KR.reducer,eL=CN({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=cN(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=cN(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=cN(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:tL,removeDot:rL,addArea:nL,removeArea:aL,addLine:sL,removeLine:iL}=eL.actions,oL=eL.reducer,lL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},cL=CN({name:"brush",initialState:lL,reducers:{setBrushSettings:(e,t)=>null==t.payload?lL:t.payload}}),{setBrushSettings:dL}=cL.actions,uL=cL.reducer,hL=CN({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=cN(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:fL,setLegendSettings:pL,addLegendPayload:mL,removeLegendPayload:gL}=hL.actions,vL=hL.reducer,bL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},xL=CN({name:"rootProps",initialState:bL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:bL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),yL=xL.reducer,{updateOptions:wL}=xL.actions,jL=CN({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:NL,removeRadiusAxis:_L,addAngleAxis:SL,removeAngleAxis:kL}=jL.actions,AL=jL.reducer,EL=CN({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:CL}=EL.actions,TL=EL.reducer,PL=mN("keyDown"),DL=mN("focus"),OL=l_();OL.startListening({actionCreator:PL,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var s=Number(vM(n,DM(r))),i=nR(r);if("Enter"!==a){var o=s+("ArrowRight"===a?1:-1)*("left-to-right"===oM(r)?1:-1);if(!(null==i||o>=i.length||o<0)){var l=NR(r,"axis","hover",String(o));t.dispatch(SS({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var c=NR(r,"axis","hover",String(n.index));t.dispatch(SS({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}))}}}}}),OL.startListening({actionCreator:DL,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var a=NR(r,"axis","hover",String("0"));t.dispatch(SS({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var IL=mN("externalEvent"),ML=l_();ML.startListening({actionCreator:IL,effect:(e,t)=>{if(null!=e.payload.handler){var r=t.getState(),n={activeCoordinate:fR(r),activeDataKey:dR(r),activeIndex:lR(r),activeLabel:cR(r),activeTooltipIndex:lR(r),isTooltipActive:pR(r)};e.payload.handler(n,e.payload.reactEvent)}}});var RL=VS([wM],e=>e.tooltipItemPayloads),LL=VS([RL,yM,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(e=>e.settings.dataKey===n);if(null!=a){var{positions:s}=a;if(null!=s)return t(s,r)}}),FL=mN("touchMove"),BL=l_();BL.startListening({actionCreator:FL,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=uM(n,n.tooltip.settings.shared);if("axis"===a){var s=ER(n,CR({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null===s||void 0===s?void 0:s.activeIndex)&&t.dispatch(jS({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if("item"===a){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Uk),d=null!==(i=l.getAttribute(qk))&&void 0!==i?i:void 0,u=LL(t.getState(),c,d);t.dispatch(bS({activeDataKey:d,activeIndex:c,activeCoordinate:u}))}}});var zL=CN({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?a:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:UL,replaceErrorBar:qL,removeErrorBar:WL}=zL.actions,HL=zL.reducer,VL=!1,GL=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout),KL=vj({brush:uL,cartesianAxis:GR,chartData:PS,errorBars:HL,graphicalItems:QR,layout:LS,legend:vL,options:h_,polarAxis:AL,polarOptions:TL,referenceElements:oL,rootProps:yL,tooltip:kS});function $L(e){var{preloadedState:r,children:n,reduxStoreName:a}=e,s=Yk(),i=(0,t.useRef)(null);if(s)return n;null==i.current&&(i.current=function(e){return jN({reducer:KL,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([PR.middleware,OR.middleware,OL.middleware,ML.middleware,BL.middleware]),devTools:VL&&{serialize:{replacer:IR},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(r,a));var o=$S;return t.createElement(__,{context:o,store:i.current},n)}var YL=e=>{var{chartData:r}=e,n=XS(),a=Yk();return(0,t.useEffect)(()=>a?()=>{}:(n(ES(r)),()=>{n(ES(void 0))}),[r,n,a]),null};function XL(e){var{layout:r,width:n,height:a,margin:s}=e,i=XS(),o=Yk();return(0,t.useEffect)(()=>{o||(i(IS(r)),i(MS({width:n,height:a})),i(OS(s)))},[i,o,r,n,a,s]),null}function JL(e){var r=XS();return(0,t.useEffect)(()=>{r(wL(e))},[r,e]),null}function ZL(e){var r=XS();return(0,t.useEffect)(()=>{r(CL(e))},[r,e]),null}var QL=()=>ek(e=>e.rootProps.accessibilityLayer),eF=r(6429),tF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function rF(e){return"string"===typeof e&&tF.includes(e)}var nF=["points","pathLength"],aF={svg:["viewBox","children"],polygon:nF,polyline:nF},sF=(e,t,r)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];rF(a)&&"function"===typeof s&&(n||(n={}),n[a]=((e,t,r)=>n=>(e(t,r,n),null))(s,t,r))}),n},iF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function oF(e){return"string"===typeof e&&iF.includes(e)}function lF(e){var t=Object.entries(e).filter(e=>{var[t]=e;return oF(t)});return Object.fromEntries(t)}var cF=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",dF=null,uF=null,hF=e=>{if(e===dF&&Array.isArray(uF))return uF;var r=[];return t.Children.forEach(e,e=>{aj(e)||((0,eF.isFragment)(e)?r=r.concat(hF(e.props.children)):r.push(e))}),uF=r,dF=e,r};function fF(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(e=>cF(e)):[cF(t)],hF(e).forEach(e=>{var t=Kw()(e,"type.displayName")||Kw()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}var pF=(e,r,n)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var a=e;if((0,t.isValidElement)(e)&&(a=e.props),"object"!==typeof a&&"function"!==typeof a)return null;var s={};return Object.keys(a).forEach(e=>{var t;((e,t,r,n)=>{var a;if("symbol"===typeof t||"number"===typeof t)return!0;var s=null!==(a=n&&(null===aF||void 0===aF?void 0:aF[n]))&&void 0!==a?a:[],i=t.startsWith("data-"),o="function"!==typeof e&&(Boolean(n)&&s.includes(t)||oF(t)),l=Boolean(r)&&rF(t);return i||o||l})(null===(t=a)||void 0===t?void 0:t[e],e,r,n)&&(s[e]=a[e])}),s},mF=["children","width","height","viewBox","className","style","title","desc"];function gF(){return gF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gF.apply(null,arguments)}var vF=(0,t.forwardRef)((e,r)=>{var{children:n,width:a,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,mF),h=i||{width:a,height:s,x:0,y:0},f=Ww("recharts-surface",o);return t.createElement("svg",gF({},pF(u,!0,"svg"),{className:f,width:a,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:r}),t.createElement("title",null,c),t.createElement("desc",null,d),n)}),bF=["children"];function xF(){return xF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xF.apply(null,arguments)}var yF={width:"100%",height:"100%"},wF=(0,t.forwardRef)((e,r)=>{var n=eA(),a=tA(),s=QL();if(!bD(n)||!bD(a))return null;var i,o,{children:l,otherAttributes:c,title:d,desc:u}=e;return i="number"===typeof c.tabIndex?c.tabIndex:s?0:void 0,o="string"===typeof c.role?c.role:s?"application":void 0,t.createElement(vF,xF({},c,{title:d,desc:u,role:o,tabIndex:i,width:n,height:a,style:yF,ref:r}),l)}),jF=e=>{var{children:r}=e,n=ek(Jk);if(!n)return null;var{width:a,height:s,y:i,x:o}=n;return t.createElement(vF,{width:a,height:s,x:o,y:i},r)},NF=(0,t.forwardRef)((e,r)=>{var{children:n}=e,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,bF);return Yk()?t.createElement(jF,null,n):t.createElement(wF,xF({ref:r},a),n)});var _F=new(r(6150)),SF="recharts.syncEvent.tooltip",kF="recharts.syncEvent.brush";function AF(e){return e.tooltip.syncInteraction}var EF=["x","y"];function CF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CF(Object(r),!0).forEach(function(t){PF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function PF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DF=()=>{};function OF(){var e=ek(WD),r=ek(VD),n=XS(),a=ek(HD),s=ek(nR),i=nA(),o=Zk(),l=ek(e=>e.rootProps.className);(0,t.useEffect)(()=>{if(null==e)return DF;var t=(t,l,c)=>{var d;if(r!==c&&e===t)if("index"!==a){if(null!=s){var u;if("function"===typeof a){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},f=a(s,h);u=s[f]}else"value"===a&&(u=s.find(e=>String(e.value)===l.payload.label));var{coordinate:p}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=p&&null!=o){var{x:m,y:g}=p,v=Math.min(m,o.x+o.width),b=Math.min(g,o.y+o.height),x={x:"horizontal"===i?u.coordinate:v,y:"horizontal"===i?b:u.coordinate},y=_S({active:l.payload.active,coordinate:x,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label});n(y)}else n(_S({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}))}}else if(o&&null!==l&&void 0!==l&&null!==(d=l.payload)&&void 0!==d&&d.coordinate){var w=l.payload.coordinate,{x:j,y:N}=w,_=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(w,EF),S=TF(TF(TF({},_),"number"===typeof j&&{x:Math.max(o.x,Math.min(j,o.x+o.width))}),"number"===typeof N&&{y:Math.max(o.y,Math.min(N,o.y+o.height))}),k=TF(TF({},l),{},{payload:TF(TF({},l.payload),{},{coordinate:S})});n(k)}else n(l)};return _F.on(SF,t),()=>{_F.off(SF,t)}},[l,n,r,e,a,s,i,o])}function IF(){var e=XS();(0,t.useEffect)(()=>{e(f_())},[e]),OF(),function(){var e=ek(WD),r=ek(VD),n=XS();(0,t.useEffect)(()=>{if(null==e)return DF;var t=(t,a,s)=>{r!==s&&e===t&&n(CS(a))};return _F.on(kF,t),()=>{_F.off(kF,t)}},[n,r,e])}()}function MF(e,r,n,a,s,i){var o=ek(t=>((e,t,r)=>{if(null!=t){var n=wM(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(t,e,r)),l=ek(VD),c=ek(WD),d=ek(HD),u=ek(AF),h=null===u||void 0===u?void 0:u.active;(0,t.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=_S({active:i,coordinate:n,dataKey:o,index:s,label:"number"===typeof a?String(a):a});_F.emit(SF,c,e,l)}},[h,n,o,s,a,l,c,d,i])}var RF=(0,t.createContext)(null),LF=(0,t.createContext)(null);function FF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function BF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FF(Object(r),!0).forEach(function(t){zF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UF=(0,t.forwardRef)((e,r)=>{var{children:n,className:a,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:m,onTouchStart:g,style:v,width:b}=e,x=XS(),[y,w]=(0,t.useState)(null),[j,N]=(0,t.useState)(null);IF();var _=function(){var e=XS(),[r,n]=(0,t.useState)(null),a=ek(Lk);return(0,t.useEffect)(()=>{if(null!=r){var t=r.getBoundingClientRect().width/r.offsetWidth;vD(t)&&t!==a&&e(RS(t))}},[r,e,a]),n}(),S=(0,t.useCallback)(e=>{_(e),"function"===typeof r&&r(e),w(e),N(e)},[_,r,w,N]),k=(0,t.useCallback)(e=>{x(TR(e)),x(IL({handler:i,reactEvent:e}))},[x,i]),A=(0,t.useCallback)(e=>{x(DR(e)),x(IL({handler:d,reactEvent:e}))},[x,d]),E=(0,t.useCallback)(e=>{x(yS()),x(IL({handler:u,reactEvent:e}))},[x,u]),C=(0,t.useCallback)(e=>{x(DR(e)),x(IL({handler:h,reactEvent:e}))},[x,h]),T=(0,t.useCallback)(()=>{x(DL())},[x]),P=(0,t.useCallback)(e=>{x(PL(e.key))},[x]),D=(0,t.useCallback)(e=>{x(IL({handler:o,reactEvent:e}))},[x,o]),O=(0,t.useCallback)(e=>{x(IL({handler:l,reactEvent:e}))},[x,l]),I=(0,t.useCallback)(e=>{x(IL({handler:c,reactEvent:e}))},[x,c]),M=(0,t.useCallback)(e=>{x(IL({handler:f,reactEvent:e}))},[x,f]),R=(0,t.useCallback)(e=>{x(IL({handler:g,reactEvent:e}))},[x,g]),L=(0,t.useCallback)(e=>{x(FL(e)),x(IL({handler:m,reactEvent:e}))},[x,m]),F=(0,t.useCallback)(e=>{x(IL({handler:p,reactEvent:e}))},[x,p]);return t.createElement(RF.Provider,{value:y},t.createElement(LF.Provider,{value:j},t.createElement("div",{className:Ww("recharts-wrapper",a),style:BF({position:"relative",cursor:"default",width:b,height:s},v),onClick:k,onContextMenu:D,onDoubleClick:O,onFocus:T,onKeyDown:P,onMouseDown:I,onMouseEnter:A,onMouseLeave:E,onMouseMove:C,onMouseUp:M,onTouchEnd:F,onTouchMove:L,onTouchStart:R,ref:S},n)))}),qF=VS([Gk],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),WF=VS([qF,Mk,Rk],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),HF=(0,t.createContext)(void 0),VF=e=>{var{children:r}=e,[n]=(0,t.useState)("".concat(ej("recharts"),"-clip")),a=ek(WF);if(null==a)return null;var{x:s,y:i,width:o,height:l}=a;return t.createElement(HF.Provider,{value:n},t.createElement("defs",null,t.createElement("clipPath",{id:n},t.createElement("rect",{x:s,y:i,height:l,width:o}))),r)},GF=["children","className","width","height","style","compact","title","desc"];var KF=(0,t.forwardRef)((e,r)=>{var{children:n,className:a,width:s,height:i,style:o,compact:l,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,GF),h=lF(u);return l?t.createElement(NF,{otherAttributes:h,title:c,desc:d},n):t.createElement(UF,{className:a,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},t.createElement(NF,{otherAttributes:h,title:c,desc:d,ref:r},t.createElement(VF,null,n)))});function $F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XF(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$F(Object(r),!0).forEach(function(t){YF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}var JF=["width","height","layout"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZF.apply(null,arguments)}var QF={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial"},eB=(0,t.forwardRef)(function(e,r){var n,a=XF(e.categoricalChartProps,QF),{width:s,height:i,layout:o}=a,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(a,JF);if(!bD(s)||!bD(i))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,f={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return t.createElement($L,{preloadedState:{options:f},reduxStoreName:null!==(n=a.id)&&void 0!==n?n:c},t.createElement(YL,{chartData:a.data}),t.createElement(XL,{width:s,height:i,layout:o,margin:a.margin}),t.createElement(JL,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),t.createElement(ZL,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),t.createElement(KF,ZF({width:s,height:i},l,{ref:r})))}),tB=["item"],rB={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},nB=(0,t.forwardRef)((e,r)=>{var n=XF(e,rB);return t.createElement(eB,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:tB,tooltipPayloadSearcher:d_,categoricalChartProps:n,ref:r})}),aB=e=>e.graphicalItems.polarItems,sB=VS([mO,gO],LO),iB=VS([aB,IO,sB],BO),oB=VS([iB],HO),lB=VS([oB,mD],GO),cB=VS([lB,IO,iB],$O),dB=VS([lB,IO,iB],(e,t,r)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var n;return{value:Sk(e,null!==(n=t.dataKey)&&void 0!==n?n:r.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Sk(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),uB=()=>{},hB=VS([IO,kI,uB,dB,uB,rA,mO],AI),fB=VS([IO,rA,lB,cB,UD,mO,hB],TI),pB=VS([fB,IO,OI],MI);VS([IO,fB,pB,mO],LI);function mB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mB(Object(r),!0).forEach(function(t){vB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vB(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bB=VS([aB,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),xB=[],yB=(e,t,r)=>0===(null===r||void 0===r?void 0:r.length)?xB:r,wB=VS([mD,bB,yB],(e,t,r)=>{var n,{chartData:a}=e;if(null!=t&&((n=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:a)&&n.length||null==r||(n=r.map(e=>gB(gB({},t.presentationProps),e.props))),null!=n))return n}),jB=VS([wB,bB,yB],(e,t,r)=>{if(null!=e&&null!=t)return e.map((e,n)=>{var a,s,i=Sk(e,t.nameKey,t.name);return s=null!==r&&void 0!==r&&null!==(a=r[n])&&void 0!==a&&null!==(a=a.props)&&void 0!==a&&a.fill?r[n].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:Ik(i,t.dataKey),color:s,payload:e,type:t.legendType}})}),NB=VS([wB,bB,yB,Gk],(e,t,r,n)=>{if(null!=t&&null!=e)return function(e){var t,r,n,{pieSettings:a,displayedData:s,cells:i,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:d,dataKey:u,nameKey:h,tooltipType:f}=a,p=Math.abs(a.minAngle),m=PW(c,d),g=Math.abs(m),v=s.length<=1?0:null!==(t=a.paddingAngle)&&void 0!==t?t:0,b=s.filter(e=>0!==Sk(e,u,0)).length,x=g-b*p-(g>=360?b:b-1)*v,y=s.reduce((e,t)=>{var r=Sk(t,u,0);return e+(Jw(r)?r:0)},0);y>0&&(r=s.map((e,t)=>{var r,s=Sk(e,u,0),d=Sk(e,h,t),g=TW(a,o,e),b=(Jw(s)?s:0)/y,w=_W(_W({},e),i&&i[t]&&i[t].props),j=(r=t?n.endAngle+$w(m)*v*(0!==s?1:0):c)+$w(m)*((0!==s?p:0)+b*x),N=(r+j)/2,_=(g.innerRadius+g.outerRadius)/2,S=[{name:d,value:s,payload:w,dataKey:u,type:f}],k=gk(g.cx,g.cy,_,N);return n=_W(_W(_W(_W({},a.presentationProps),{},{percent:b,cornerRadius:l,name:d,tooltipPayload:S,midAngle:N,middleRadius:_,tooltipPosition:k},w),g),{},{value:s,startAngle:r,endAngle:j,payload:w,paddingAngle:$w(m)*v})}));return r}({offset:n,pieSettings:t,displayedData:e,cells:r})}),_B=["children","className"];function SB(){return SB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SB.apply(null,arguments)}var kB,AB,EB,CB,TB,PB,DB,OB,IB,MB,RB,LB,FB,BB,zB=t.forwardRef((e,r)=>{var{children:n,className:a}=e,s=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,_B),i=Ww("recharts-layer",a);return t.createElement("g",SB({className:i},pF(s,!0),{ref:r}),n)});function UB(){}function qB(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function WB(e){this._context=e}function HB(e){this._context=e}function VB(e){this._context=e}WB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qB(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},HB.prototype={areaStart:UB,areaEnd:UB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:qB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},VB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:qB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class GB{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function KB(e){this._context=e}function $B(e){this._context=e}function YB(e){return new $B(e)}function XB(e){return e<0?-1:1}function JB(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(XB(s)+XB(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function ZB(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function QB(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function ez(e){this._context=e}function tz(e){this._context=new rz(e)}function rz(e){this._context=e}function nz(e){this._context=e}function az(e){var t,r,n=e.length-1,a=new Array(n),s=new Array(n),i=new Array(n);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,i[t]-=r*i[t-1];for(a[n-1]=i[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function sz(e,t){this._context=e,this._t=t}function iz(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}KB.prototype={areaStart:UB,areaEnd:UB,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},$B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},ez.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:QB(this,this._t0,ZB(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,QB(this,ZB(this,r=JB(this,e,t)),r);break;default:QB(this,this._t0,r=JB(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(tz.prototype=Object.create(ez.prototype)).point=function(e,t){ez.prototype.point.call(this,t,e)},rz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}},nz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=az(e),a=az(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},sz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};const oz=Math.PI,lz=2*oz,cz=1e-6,dz=lz-cz;function uz(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class hz{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?uz:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return uz;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append(kB||(kB=iz(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(AB||(AB=iz(["Z"]))))}lineTo(e,t){this._append(EB||(EB=iz(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,r,n){this._append(CB||(CB=iz(["Q",",",",",",",""])),+e,+t,this._x1=+r,this._y1=+n)}bezierCurveTo(e,t,r,n,a,s){this._append(TB||(TB=iz(["C",",",",",",",",",",",""])),+e,+t,+r,+n,this._x1=+a,this._y1=+s)}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error("negative radius: ".concat(a));let s=this._x1,i=this._y1,o=r-e,l=n-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append(PB||(PB=iz(["M",",",""])),this._x1=e,this._y1=t);else if(u>cz)if(Math.abs(d*o-l*c)>cz&&a){let h=r-s,f=n-i,p=o*o+l*l,m=h*h+f*f,g=Math.sqrt(p),v=Math.sqrt(u),b=a*Math.tan((oz-Math.acos((p+u-m)/(2*g*v)))/2),x=b/v,y=b/g;Math.abs(x-1)>cz&&this._append(OB||(OB=iz(["L",",",""])),e+x*c,t+x*d),this._append(IB||(IB=iz(["A",",",",0,0,",",",",",""])),a,a,+(d*h>c*f),this._x1=e+y*o,this._y1=t+y*l)}else this._append(DB||(DB=iz(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,r,n,a,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error("negative radius: ".concat(r));let i=r*Math.cos(n),o=r*Math.sin(n),l=e+i,c=t+o,d=1^s,u=s?n-a:a-n;null===this._x1?this._append(MB||(MB=iz(["M",",",""])),l,c):(Math.abs(this._x1-l)>cz||Math.abs(this._y1-c)>cz)&&this._append(RB||(RB=iz(["L",",",""])),l,c),r&&(u<0&&(u=u%lz+lz),u>dz?this._append(LB||(LB=iz(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),r,r,d,e-i,t-o,r,r,d,this._x1=l,this._y1=c):u>cz&&this._append(FB||(FB=iz(["A",",",",0,",",",",",",",""])),r,r,+(u>=oz),d,this._x1=e+r*Math.cos(a),this._y1=t+r*Math.sin(a)))}rect(e,t,r,n){this._append(BB||(BB=iz(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,r=+r,+n,-r)}toString(){return this._}}function fz(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError("invalid digits: ".concat(r));t=e}return e},()=>new hz(t)}function pz(e){return e[0]}function mz(e){return e[1]}function gz(e,t){var r=ok(!0),n=null,a=YB,s=null,i=fz(o);function o(o){var l,c,d,u=(o=ik(o)).length,h=!1;for(null==n&&(s=a(d=i())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"===typeof e?e:void 0===e?pz:ok(e),t="function"===typeof t?t:void 0===t?mz:ok(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:ok(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:ok(+e),o):t},o.defined=function(e){return arguments.length?(r="function"===typeof e?e:ok(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(s=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=s=null:s=a(n=e),o):n},o}function vz(e,t,r){var n=null,a=ok(!0),s=null,i=YB,o=null,l=fz(c);function c(c){var d,u,h,f,p,m=(c=ik(c)).length,g=!1,v=new Array(m),b=new Array(m);for(null==s&&(o=i(p=l())),d=0;d<=m;++d){if(!(d<m&&a(f=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(v[h],b[h]);o.lineEnd(),o.areaEnd()}g&&(v[d]=+e(f,d,c),b[d]=+t(f,d,c),o.point(n?+n(f,d,c):v[d],r?+r(f,d,c):b[d]))}if(p)return o=null,p+""||null}function d(){return gz().defined(a).curve(i).context(s)}return e="function"===typeof e?e:void 0===e?pz:ok(+e),t="function"===typeof t?t:ok(void 0===t?0:+t),r="function"===typeof r?r:void 0===r?mz:ok(+r),c.x=function(t){return arguments.length?(e="function"===typeof t?t:ok(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:ok(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:ok(+e),c):n},c.y=function(e){return arguments.length?(t="function"===typeof e?e:ok(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:ok(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:ok(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:ok(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}function bz(){return bz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bz.apply(null,arguments)}function xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xz(Object(r),!0).forEach(function(t){wz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jz={curveBasisClosed:function(e){return new HB(e)},curveBasisOpen:function(e){return new VB(e)},curveBasis:function(e){return new WB(e)},curveBumpX:function(e){return new GB(e,!0)},curveBumpY:function(e){return new GB(e,!1)},curveLinearClosed:function(e){return new KB(e)},curveLinear:YB,curveMonotoneX:function(e){return new ez(e)},curveMonotoneY:function(e){return new tz(e)},curveNatural:function(e){return new nz(e)},curveStep:function(e){return new sz(e,.5)},curveStepAfter:function(e){return new sz(e,1)},curveStepBefore:function(e){return new sz(e,0)}},Nz=e=>vD(e.x)&&vD(e.y),_z=e=>e.x,Sz=e=>e.y,kz=e=>{var t,{type:r="linear",points:n=[],baseLine:a,layout:s,connectNulls:i=!1}=e,o=((e,t)=>{if("function"===typeof e)return e;var r="curve".concat(sj(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?jz[r]||YB:jz["".concat(r).concat("vertical"===t?"Y":"X")]})(r,s),l=i?n.filter(Nz):n;if(Array.isArray(a)){var c=i?a.filter(e=>Nz(e)):a,d=l.map((e,t)=>yz(yz({},e),{},{base:c[t]}));return t="vertical"===s?vz().y(Sz).x1(_z).x0(e=>e.base.x):vz().x(_z).y1(Sz).y0(e=>e.base.y),t.defined(Nz).curve(o),t(d)}return(t="vertical"===s&&Jw(a)?vz().y(Sz).x1(_z).x0(a):Jw(a)?vz().x(_z).y1(Sz).y0(a):gz().x(_z).y(Sz)).defined(Nz).curve(o),t(l)},Az=e=>{var{className:r,points:n,path:a,pathRef:s}=e;if((!n||!n.length)&&!a)return null;var i=n&&n.length?kz(e):a;return t.createElement("path",bz({},lF(e),((e,r)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,t.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var a={};return Object.keys(n).forEach(e=>{rF(e)&&(a[e]=r||(t=>n[e](n,t)))}),a})(e),{className:Ww("recharts-curve",r),d:null===i?void 0:i,ref:s}))};function Ez(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Tz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cz(Object(r),!0).forEach(function(t){Pz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dz=Tz({},{cacheSize:2e3,enableCache:!0}),Oz=new class{constructor(e){Ez(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(Dz.cacheSize),Iz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Mz="recharts_measurement_span";var Rz=(e,t)=>{try{var r=document.getElementById(Mz);r||((r=document.createElement("span")).setAttribute("id",Mz),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Iz,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(a){return{width:0,height:0}}},Lz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||GL)return{width:0,height:0};if(!Dz.enableCache)return Rz(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}(e,t),n=Oz.get(r);if(n)return n;var a=Rz(e,t);return Oz.set(r,a),a},Fz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Uz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Wz=Object.keys(qz),Hz="NaN";class Vz{static parse(e){var t,[,r,n]=null!==(t=Uz.exec(e))&&void 0!==t?t:[];return new Vz(parseFloat(r),null!==n&&void 0!==n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Yw(e)&&(this.unit=""),""===t||zz.test(t)||(this.num=NaN,this.unit=""),Wz.includes(t)&&(this.num=function(e,t){return e*qz[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Vz(NaN,""):new Vz(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Vz(NaN,""):new Vz(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Vz(NaN,""):new Vz(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Vz(NaN,""):new Vz(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Yw(this.num)}}function Gz(e){if(e.includes(Hz))return Hz;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=null!==(r=Fz.exec(t))&&void 0!==r?r:[],i=Vz.parse(null!==n&&void 0!==n?n:""),o=Vz.parse(null!==s&&void 0!==s?s:""),l="*"===a?i.multiply(o):i.divide(o);if(l.isNaN())return Hz;t=t.replace(Fz,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,h]=null!==(c=Bz.exec(t))&&void 0!==c?c:[],f=Vz.parse(null!==d&&void 0!==d?d:""),p=Vz.parse(null!==h&&void 0!==h?h:""),m="+"===u?f.add(p):f.subtract(p);if(m.isNaN())return Hz;t=t.replace(Bz,m.toString())}return t}var Kz=/\(([^()]*)\)/;function $z(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=Kz.exec(r));){var[,n]=t;r=r.replace(Kz,Gz(n))}return r}(t),t=Gz(t)}function Yz(e){var t=function(e){try{return $z(e)}catch(t){return Hz}}(e.slice(5,-1));return t===Hz?"":t}var Xz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Jz=["dx","dy","angle","className","breakAll"];function Zz(){return Zz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zz.apply(null,arguments)}function Qz(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var eU=/[ \f\n\r\t\v\u2028\u2029]+/,tU=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];return aj(t)||(a=r?t.toString().split(""):t.toString().split(eU)),{wordsWithComputedWidth:a.map(e=>({word:e,width:Lz(e,n).width})),spaceWidth:r?0:Lz("\xa0",n).width}}catch(s){return null}},rU=e=>[{words:aj(e)?[]:e.toString().split(eU)}],nU=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!GL){var o=tU({breakAll:s,children:n,style:a});if(!o)return rU(n);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,c=Jw(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{var{word:s,width:i}=t,o=e[e.length-1];if(o&&(null==n||a||o.width+i+r<Number(n)))o.words.push(s),o.width+=i+r;else{var l={words:[s],width:i};e.push(l)}return e},[])},h=u(t),f=e=>e.reduce((e,t)=>e.width>t.width?e:t);if(!c||a)return h;if(!(h.length>s||f(h).width>Number(n)))return h;for(var p,m=e=>{var t=d.slice(0,e),r=tU({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,a=u(r);return[a.length>s||f(a).width>Number(n),a]},g=0,v=d.length-1,b=0;g<=v&&b<=d.length-1;){var x=Math.floor((g+v)/2),y=x-1,[w,j]=m(y),[N]=m(x);if(w||N||(g=x+1),w&&N&&(v=x-1),!w&&N){p=j;break}b++}return p||h})({breakAll:s,children:n,maxLines:i,style:a},l,c,t,r)}return rU(n)},aU="#808080",sU=(0,t.forwardRef)((e,r)=>{var{x:n=0,y:a=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=aU}=e,u=Qz(e,Xz),h=(0,t.useMemo)(()=>nU({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:m,className:g,breakAll:v}=u,b=Qz(u,Jz);if(!Zw(n)||!Zw(a)||0===h.length)return null;var x,y=n+(Jw(f)?f:0),w=a+(Jw(p)?p:0);switch(c){case"start":x=Yz("calc(".concat(i,")"));break;case"middle":x=Yz("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:x=Yz("calc(".concat(h.length-1," * -").concat(s,")"))}var j=[];if(o){var N=h[0].width,{width:_}=u;j.push("scale(".concat(Jw(_)?_/N:1,")"))}return m&&j.push("rotate(".concat(m,", ").concat(y,", ").concat(w,")")),j.length&&(b.transform=j.join(" ")),t.createElement("text",Zz({},pF(b,!0),{ref:r,x:y,y:w,className:Ww("recharts-text",g),textAnchor:l,fill:d.includes("url")?aU:d}),h.map((e,r)=>{var n=e.words.join(v?"":" ");return t.createElement("tspan",{x:y,dy:0===r?x:s,key:"".concat(n,"-").concat(r)},n)}))});sU.displayName="Text";var iU=e=>null;iU.displayName="Cell";var oU=r(2540),lU=r.n(oU);function cU(){}function dU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dU(Object(r),!0).forEach(function(t){hU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fU=(e,t,r)=>e.map(e=>{return"".concat((n=e,n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var n}).join(","),pU=(e,t)=>Object.keys(t).reduce((r,n)=>uU(uU({},r),{},{[n]:e(n,t[n])}),{});function mU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mU(Object(r),!0).forEach(function(t){vU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bU=(e,t,r)=>e+(t-e)*r,xU=e=>{var{from:t,to:r}=e;return t!==r},yU=(e,t,r)=>{var n=pU((t,r)=>{if(xU(r)){var[n,a]=e(r.from,r.to,r.velocity);return gU(gU({},r),{},{from:n,velocity:a})}return r},t);return r<1?pU((e,t)=>xU(t)?gU(gU({},t),{},{velocity:bU(t.velocity,n[e].velocity,r),from:bU(t.from,n[e].from,r)}):t,t):yU(e,n,r-1)};function wU(e,t,r,n,a,s){var i,o=n.reduce((r,n)=>gU(gU({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,c=n=>{i||(i=n);var d=(n-i)/r.dt;o=yU(r,o,d),a(gU(gU(gU({},e),t),pU((e,t)=>t.from,o))),i=n,Object.values(o).filter(xU).length&&(l=s.setTimeout(c))};return()=>(l=s.setTimeout(c),()=>{l()})}const jU=(e,t,r,n,a,s)=>{var i,o,l=(i=e,o=t,[Object.keys(i),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return!0===r.isStepper?wU(e,t,r,l,a,s):function(e,t,r,n,a,s,i){var o,l=null,c=a.reduce((r,n)=>gU(gU({},r),{},{[n]:[e[n],t[n]]}),{}),d=a=>{o||(o=a);var u=(a-o)/n,h=pU((e,t)=>bU(...t,r(u)),c);if(s(gU(gU(gU({},e),t),h)),u<1)l=i.setTimeout(d);else{var f=pU((e,t)=>bU(...t,r(1)),c);s(gU(gU(gU({},e),t),f))}};return()=>(l=i.setTimeout(d),()=>{l()})}(e,t,r,n,l,a,s)};var NU=1e-4,_U=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],SU=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),kU=(e,t)=>r=>{var n=_U(e,t);return SU(n,r)},AU=function(){for(var e,t,r,n,a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];if(1===s.length)switch(s[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:var o=s[0].split("(");"cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length&&([e,r,t,n]=o[1].split(")")[0].split(",").map(e=>parseFloat(e)))}else 4===s.length&&([e,r,t,n]=s);var l,c,d=kU(e,t),u=kU(r,n),h=(l=e,c=t,e=>{var t=[..._U(l,c).map((e,t)=>e*t).slice(1),0];return SU(t,e)}),f=e=>e>1?1:e<0?0:e,p=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=d(r)-t,s=h(r);if(Math.abs(a-t)<NU||s<NU)return u(r);r=f(r-a/s)}return u(r)};return p.isStepper=!1,p},EU=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AU(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,a=(e,a,s)=>{var i=s+(-(e-a)*t-s*r)*n/1e3,o=s*n/1e3+e;return Math.abs(o-a)<NU&&Math.abs(i)<NU?[a,0]:[o,i]};return a.isStepper=!0,a.dt=n,a}();default:if("cubic-bezier"===e.split("(")[0])return AU(e)}return"function"===typeof e?e:null};class CU{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,a=s=>{s-r>=t?e(s):"function"===typeof requestAnimationFrame&&(n=requestAnimationFrame(a))};return n=requestAnimationFrame(a),()=>{cancelAnimationFrame(n)}}}function TU(){return function(e){var t=()=>null,r=!1,n=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var i=s,[o,...l]=i;return"number"===typeof o?void(n=e.setTimeout(a.bind(null,l),o)):(a(o),void(n=e.setTimeout(a.bind(null,l))))}"string"===typeof s&&t(s),"object"===typeof s&&t(s),"function"===typeof s&&s()}};return{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new CU)}var PU=(0,t.createContext)(TU);var DU={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},OU={t:0},IU={t:1};function MU(e){var r=XF(e,DU),{isActive:n,canBegin:a,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=r,u=function(e,r){var n=(0,t.useContext)(PU);return(0,t.useMemo)(()=>null!==r&&void 0!==r?r:n(e),[e,r,n])}(r.animationId,r.animationManager),[h,f]=(0,t.useState)(n?OU:IU),p=(0,t.useRef)(null);return(0,t.useEffect)(()=>{n||f(IU)},[n]),(0,t.useEffect)(()=>{if(!n||!a)return cU;var e=jU(OU,IU,EU(i),s,f,u.getTimeoutController());return u.start([c,o,()=>{p.current=e()},s,l]),()=>{u.stop(),p.current&&p.current(),l()}},[n,a,s,i,o,c,l,u]),d(h.t)}function RU(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,t.useRef)(ej(r)),a=(0,t.useRef)(e);return a.current!==e&&(n.current=ej(r),a.current=e),n.current}function LU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function FU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(r),!0).forEach(function(t){BU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function BU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zU(){return zU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zU.apply(null,arguments)}var UU=(e,t,r,n,a)=>{var s,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),s+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),s+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),s+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},qU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WU=e=>{var r=XF(e,qU),n=(0,t.useRef)(null),[a,s]=(0,t.useState)(-1);(0,t.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(t){}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=r,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:m,isUpdateAnimationActive:g}=r,v=(0,t.useRef)(l),b=(0,t.useRef)(c),x=(0,t.useRef)(i),y=(0,t.useRef)(o),w=RU((0,t.useMemo)(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var j=Ww("recharts-rectangle",u);if(!g)return t.createElement("path",zU({},pF(r,!0),{className:j,d:UU(i,o,l,c,d)}));var N=v.current,_=b.current,S=x.current,k=y.current,A="0px ".concat(-1===a?1:a,"px"),E="".concat(a,"px 0px"),C=fU(["strokeDasharray"],f,"string"===typeof h?h:void 0);return t.createElement(MU,{animationId:w,key:w,canBegin:a>0,duration:f,easing:h,isActive:g,begin:p},e=>{var a,s=nj(N,l,e),u=nj(_,c,e),h=nj(S,i,e),f=nj(k,o,e);return n.current&&(v.current=s,b.current=u,x.current=h,y.current=f),a=m?e>0?{transition:C,strokeDasharray:E}:{strokeDasharray:A}:{strokeDasharray:E},t.createElement("path",zU({},pF(r,!0),{className:j,d:UU(h,f,s,u,d),ref:n,style:FU(FU({},a),r.style)}))})};function HU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function VU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HU(Object(r),!0).forEach(function(t){GU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KU(){return KU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KU.apply(null,arguments)}var $U=(e,t,r,n,a)=>{var s,i=r-n;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z")},YU={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XU=e=>{var r=XF(e,YU),{x:n,y:a,upperWidth:s,lowerWidth:i,height:o,className:l}=r,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:h}=r,f=(0,t.useRef)(),[p,m]=(0,t.useState)(-1),g=(0,t.useRef)(s),v=(0,t.useRef)(i),b=(0,t.useRef)(o),x=(0,t.useRef)(n),y=(0,t.useRef)(a),w=RU(e,"trapezoid-");if((0,t.useEffect)(()=>{if(f.current&&f.current.getTotalLength)try{var e=f.current.getTotalLength();e&&m(e)}catch(t){}},[]),n!==+n||a!==+a||s!==+s||i!==+i||o!==+o||0===s&&0===i||0===o)return null;var j=Ww("recharts-trapezoid",l);if(!h)return t.createElement("g",null,t.createElement("path",KU({},pF(r,!0),{className:j,d:$U(n,a,s,i,o)})));var N=g.current,_=v.current,S=b.current,k=x.current,A=y.current,E="0px ".concat(-1===p?1:p,"px"),C="".concat(p,"px 0px"),T=fU(["strokeDasharray"],d,c);return t.createElement(MU,{animationId:w,key:w,canBegin:p>0,duration:d,easing:c,isActive:h,begin:u},e=>{var l=nj(N,s,e),c=nj(_,i,e),d=nj(S,o,e),u=nj(k,n,e),h=nj(A,a,e);f.current&&(g.current=l,v.current=c,b.current=d,x.current=u,y.current=h);var p=e>0?{transition:T,strokeDasharray:C}:{strokeDasharray:E};return t.createElement("path",KU({},pF(r,!0),{className:j,d:$U(u,h,l,c,d),ref:f,style:VU(VU({},p),r.style)}))})};function JU(){return JU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JU.apply(null,arguments)}var ZU=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,c=o*(i?1:-1)+n,d=Math.asin(o/c)/pk,u=l?a:a+s*d,h=l?a-s*d:a;return{center:gk(t,r,c,u),circleTangency:gk(t,r,n,u),lineTangency:gk(t,r,c*Math.cos(d*pk),h),theta:d}},QU=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=((e,t)=>$w(t-e)*Math.min(Math.abs(t-e),359.999))(s,i),l=s+o,c=gk(t,r,a,s),d=gk(t,r,a,l),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(s>l),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(n>0){var h=gk(t,r,n,s),f=gk(t,r,n,l);u+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(s<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},eq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tq=e=>{var r=XF(e,eq),{cx:n,cy:a,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=r;if(i<s||d===u)return null;var f,p=Ww("recharts-sector",h),m=i-s,g=tj(o,m,0,!0);return f=g>0&&Math.abs(d-u)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:c}=e,d=$w(c-l),{circleTangency:u,lineTangency:h,theta:f}=ZU({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:p,lineTangency:m,theta:g}=ZU({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),v=o?Math.abs(l-c):Math.abs(l-c)-f-g;if(v<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):QU({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var b="M ".concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n  ");if(n>0){var{circleTangency:x,lineTangency:y,theta:w}=ZU({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:j,lineTangency:N,theta:_}=ZU({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),S=o?Math.abs(l-c):Math.abs(l-c)-w-_;if(S<0&&0===s)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(N.x,",").concat(N.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(S>180),",").concat(+(d>0),",").concat(x.x,",").concat(x.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b})({cx:n,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):QU({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),t.createElement("path",JU({},pF(r,!0),{className:p,d:f}))};Math.abs,Math.atan2;const rq=Math.cos,nq=(Math.max,Math.min,Math.sin),aq=Math.sqrt,sq=Math.PI,iq=2*sq;const oq={draw(e,t){const r=aq(t/sq);e.moveTo(r,0),e.arc(0,0,r,0,iq)}},lq={draw(e,t){const r=aq(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},cq=aq(1/3),dq=2*cq,uq={draw(e,t){const r=aq(t/dq),n=r*cq;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},hq={draw(e,t){const r=aq(t),n=-r/2;e.rect(n,n,r,r)}},fq=nq(sq/10)/nq(7*sq/10),pq=nq(iq/10)*fq,mq=-rq(iq/10)*fq,gq={draw(e,t){const r=aq(.8908130915292852*t),n=pq*r,a=mq*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const t=iq*s/5,i=rq(t),o=nq(t);e.lineTo(o*r,-i*r),e.lineTo(i*n-o*a,o*n+i*a)}e.closePath()}},vq=aq(3),bq={draw(e,t){const r=-aq(t/(3*vq));e.moveTo(0,2*r),e.lineTo(-vq*r,-r),e.lineTo(vq*r,-r),e.closePath()}},xq=-.5,yq=aq(3)/2,wq=1/aq(12),jq=3*(wq/2+1),Nq={draw(e,t){const r=aq(t/jq),n=r/2,a=r*wq,s=n,i=r*wq+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(xq*n-yq*a,yq*n+xq*a),e.lineTo(xq*s-yq*i,yq*s+xq*i),e.lineTo(xq*o-yq*l,yq*o+xq*l),e.lineTo(xq*n+yq*a,xq*a-yq*n),e.lineTo(xq*s+yq*i,xq*i-yq*s),e.lineTo(xq*o+yq*l,xq*l-yq*o),e.closePath()}};aq(3),aq(3);var _q=["type","size","sizeType"];function Sq(){return Sq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sq.apply(null,arguments)}function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Aq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(t){Eq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Eq(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cq={symbolCircle:oq,symbolCross:lq,symbolDiamond:uq,symbolSquare:hq,symbolStar:gq,symbolTriangle:bq,symbolWye:Nq},Tq=Math.PI/180,Pq=e=>{var{type:r="circle",size:n=64,sizeType:a="area"}=e,s=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,_q),i=Aq(Aq({},s),{},{type:r,size:n,sizeType:a}),o="circle";"string"===typeof r&&(o=r);var{className:l,cx:c,cy:d}=i,u=pF(i,!0);return c===+c&&d===+d&&n===+n?t.createElement("path",Sq({},u,{className:Ww("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:(()=>{var e=(e=>{var t="symbol".concat(sj(e));return Cq[t]||oq})(o),t=function(e,t){let r=null,n=fz(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"===typeof e?e:ok(e||oq),t="function"===typeof t?t:ok(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:ok(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:ok(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*Tq;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,a,o));return t()})()})):null};Pq.registerSymbol=(e,t)=>{Cq["symbol".concat(sj(e))]=t};var Dq=["option","shapeType","propTransformer","activeClassName","isActive"];function Oq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Iq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oq(Object(r),!0).forEach(function(t){Mq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Mq(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rq(e,t){return Iq(Iq({},t),e)}function Lq(e){var{shapeType:r,elementProps:n}=e;switch(r){case"rectangle":return t.createElement(WU,n);case"trapezoid":return t.createElement(XU,n);case"sector":return t.createElement(tq,n);case"symbols":if(function(e){return"symbols"===e}(r))return t.createElement(Pq,n);break;default:return null}}function Fq(e){var r,{option:n,shapeType:a,propTransformer:s=Rq,activeClassName:i="recharts-active-shape",isActive:o}=e,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Dq);if((0,t.isValidElement)(n))r=(0,t.cloneElement)(n,Iq(Iq({},l),function(e){return(0,t.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)r=n(l);else if(lU()(n)&&"boolean"!==typeof n){var c=s(n,l);r=t.createElement(Lq,{shapeType:a,elementProps:c})}else{var d=l;r=t.createElement(Lq,{shapeType:a,elementProps:d})}return o?t.createElement(zB,{className:i},r):r}function Bq(e){var{fn:r,args:n}=e,a=XS(),s=Yk();return(0,t.useEffect)(()=>{if(!s){var e=r(n);return a(mS(e)),()=>{a(gS(e))}}},[r,n,a,s]),null}var zq,Uq=()=>{};function qq(e){var{legendPayload:r}=e,n=XS(),a=ek(rA);return(0,t.useEffect)(()=>"centric"!==a&&"radial"!==a?Uq:(n(mL(r)),()=>{n(gL(r))}),[n,a,r]),null}var Wq=null!==(zq=n["useId".toString()])&&void 0!==zq?zq:()=>{var[e]=t.useState(()=>ej("uid-"));return e};var Hq=(0,t.createContext)(void 0),Vq=e=>{var{id:r,type:n,children:a}=e,s=function(e,t){var r=Wq();return t||(e?"".concat(e,"-").concat(r):r)}("recharts-".concat(n),r);return t.createElement(Hq.Provider,{value:s},a(s))};function Gq(e){var r=XS();return(0,t.useEffect)(()=>(r(JR(e)),()=>{r(ZR(e))}),[r,e]),null}var Kq=r(6667),$q=r.n(Kq),Yq=["labelRef"];function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(t){Zq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zq(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qq(){return Qq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qq.apply(null,arguments)}var eW=(0,t.createContext)(null),tW=()=>{var e=(0,t.useContext)(eW),r=Zk();return e||r},rW=(0,t.createContext)(null),nW=()=>{var e=(0,t.useContext)(rW),r=ek(pO);return e||r},aW=e=>null!=e&&"function"===typeof e,sW=(e,r,n,a,s)=>{var i,o,{offset:l,className:c}=e,{cx:d,cy:u,innerRadius:h,outerRadius:f,startAngle:p,endAngle:m,clockWise:g}=s,v=(h+f)/2,b=((e,t)=>$w(t-e)*Math.min(Math.abs(t-e),360))(p,m),x=b>=0?1:-1;switch(r){case"insideStart":i=p+x*l,o=g;break;case"insideEnd":i=m-x*l,o=!g;break;case"end":i=m+x*l,o=g;break;default:throw new Error("Unsupported position ".concat(r))}o=b<=0?o:!o;var y=gk(d,u,v,i),w=gk(d,u,v,i+359*(o?1:-1)),j="M".concat(y.x,",").concat(y.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(o?0:1,",\n    ").concat(w.x,",").concat(w.y),N=aj(e.id)?ej("recharts-radial-line-"):e.id;return t.createElement("text",Qq({},a,{dominantBaseline:"central",className:Ww("recharts-radial-bar-label",c)}),t.createElement("defs",null,t.createElement("path",{id:N,d:j})),t.createElement("textPath",{xlinkHref:"#".concat(N)},n))},iW=e=>"cx"in e&&Jw(e.cx),oW={offset:5};function lW(e){var r=XF(e,oW),{viewBox:n,position:a,value:s,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=r,u=nW(),h=tW(),f=n||("center"===a?h:null!==u&&void 0!==u?u:h);if(!f||aj(s)&&aj(i)&&!(0,t.isValidElement)(o)&&"function"!==typeof o)return null;var p,m=Jq(Jq({},r),{},{viewBox:f});if((0,t.isValidElement)(o)){var{labelRef:g}=m,v=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(m,Yq);return(0,t.cloneElement)(o,v)}if("function"===typeof o){if(p=(0,t.createElement)(o,m),(0,t.isValidElement)(p))return p}else p=(e=>{var{value:t,formatter:r}=e,n=aj(e.children)?t:e.children;return"function"===typeof r?r(n):n})(r);var b=iW(f),x=pF(r,!0);if(b&&("insideStart"===a||"insideEnd"===a||"end"===a))return sW(r,a,p,x,f);var y=b?((e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===r){var{x:d,y:u}=gk(n,a,i+t,c);return{x:d,y:u,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:f,y:p}=gk(n,a,h,c);return{x:f,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(f,r.offset,r.position):((e,t)=>{var r,{parentViewBox:n,offset:a,position:s}=e;null==n||iW(n)||(r=n);var{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*a,h=d>0?"end":"start",f=d>0?"start":"end",p=l>=0?1:-1,m=p*a,g=p>0?"end":"start",v=p>0?"start":"end";if("top"===s)return Jq(Jq({},{x:i+l/2,y:o-d*a,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===s)return Jq(Jq({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:f}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===s){var b={x:i-m,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return Jq(Jq({},b),r?{width:Math.max(b.x-r.x,0),height:c}:{})}if("right"===s){var x={x:i+l+m,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Jq(Jq({},x),r?{width:Math.max(r.x+r.width-x.x,0),height:c}:{})}var y=r?{width:l,height:c}:{};return"insideLeft"===s?Jq({x:i+m,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},y):"insideRight"===s?Jq({x:i+l-m,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},y):"insideTop"===s?Jq({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:f},y):"insideBottom"===s?Jq({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},y):"insideTopLeft"===s?Jq({x:i+m,y:o+u,textAnchor:v,verticalAnchor:f},y):"insideTopRight"===s?Jq({x:i+l-m,y:o+u,textAnchor:g,verticalAnchor:f},y):"insideBottomLeft"===s?Jq({x:i+m,y:o+c-u,textAnchor:v,verticalAnchor:h},y):"insideBottomRight"===s?Jq({x:i+l-m,y:o+c-u,textAnchor:g,verticalAnchor:h},y):s&&"object"===typeof s&&(Jw(s.x)||Xw(s.x))&&(Jw(s.y)||Xw(s.y))?Jq({x:i+tj(s.x,l),y:o+tj(s.y,c),textAnchor:"end",verticalAnchor:"end"},y):Jq({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},y)})(r,f);return t.createElement(sU,Qq({ref:d,className:Ww("recharts-label",l)},x,y,{breakAll:c}),p)}lW.displayName="Label";var cW=["valueAccessor"],dW=["dataKey","clockWise","id","textBreakAll"];function uW(){return uW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uW.apply(null,arguments)}function hW(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var fW=e=>Array.isArray(e.value)?$q()(e.value):e.value,pW=(0,t.createContext)(void 0),mW=(pW.Provider,(0,t.createContext)(void 0)),gW=mW.Provider;function vW(e){var{valueAccessor:r=fW}=e,n=hW(e,cW),{dataKey:a,clockWise:s,id:i,textBreakAll:o}=n,l=hW(n,dW),c=(0,t.useContext)(pW),d=(0,t.useContext)(mW),u=c||d;return u&&u.length?t.createElement(zB,{className:"recharts-label-list"},u.map((e,s)=>{var c,d=aj(a)?r(e,s):Sk(e&&e.payload,a),u=aj(i)?{}:{id:"".concat(i,"-").concat(s)};return t.createElement(lW,uW({},pF(e,!0),l,u,{fill:null!==(c=n.fill)&&void 0!==c?c:e.fill,parentViewBox:e.parentViewBox,value:d,textBreakAll:o,viewBox:e.viewBox,key:"label-".concat(s),index:s}))})):null}function bW(e){var{label:r}=e;return r?!0===r?t.createElement(vW,{key:"labelList-implicit"}):t.isValidElement(r)||aW(r)?t.createElement(vW,{key:"labelList-implicit",content:r}):"object"===typeof r?t.createElement(vW,uW({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}vW.displayName="LabelList";var xW=["onMouseEnter","onClick","onMouseLeave"],yW=["id"],wW=["id"];function jW(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NW(Object(r),!0).forEach(function(t){SW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function SW(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kW(){return kW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kW.apply(null,arguments)}function AW(e){var r=(0,t.useMemo)(()=>fF(e.children,iU),[e.children]),n=ek(t=>jB(t,e.id,r));return null==n?null:t.createElement(qq,{legendPayload:n})}function EW(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:n.map(e=>e.tooltipPayload),positions:n.map(e=>e.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:Ik(o,t),hide:l,type:c,color:i,unit:""}}}var CW=(e,t)=>e>t?"start":e<t?"end":"middle",TW=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=vk(s,i),l=a+tj(e.cx,s,s/2),c=n+tj(e.cy,i,i/2),d=tj(e.innerRadius,o,0),u=((e,t,r)=>tj("function"===typeof t?t(e):t,r,.8*r))(r,e.outerRadius,o);return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:e.maxRadius||Math.sqrt(s*s+i*i)/2}},PW=(e,t)=>$w(t-e)*Math.min(Math.abs(t-e),360);function DW(e){var{sectors:r,props:n,showLabels:a}=e,{label:s,labelLine:i,dataKey:o}=n;if(!a||!s||!r)return null;var l=lF(n),c=pF(s,!1),d=pF(i,!1),u="object"===typeof s&&"offsetRadius"in s&&"number"===typeof s.offsetRadius&&s.offsetRadius||20,h=r.map((e,r)=>{var n=(e.startAngle+e.endAngle)/2,a=gk(e.cx,e.cy,e.outerRadius+u,n),h=_W(_W(_W(_W({},l),e),{},{stroke:"none"},c),{},{index:r,textAnchor:CW(a.x,e.cx)},a),f=_W(_W(_W(_W({},l),e),{},{fill:"none",stroke:e.fill},d),{},{index:r,points:[gk(e.cx,e.cy,e.outerRadius,n),a],key:"line"});return t.createElement(zB,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(r)},i&&((e,r)=>{if(t.isValidElement(e))return t.cloneElement(e,r);if("function"===typeof e)return e(r);var n=Ww("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return t.createElement(Az,kW({},r,{type:"linear",className:n}))})(i,f),((e,r,n)=>{if(t.isValidElement(e))return t.cloneElement(e,r);var a=n;if("function"===typeof e&&(a=e(r),t.isValidElement(a)))return a;var s=Ww("recharts-pie-label-text",function(e){return e&&"object"===typeof e&&"className"in e&&"string"===typeof e.className?e.className:""}(e));return t.createElement(sU,kW({},r,{alignmentBaseline:"middle",className:s}),a)})(s,h,Sk(e,o)))});return t.createElement(zB,{className:"recharts-pie-labels"},h)}function OW(e){var{sectors:r,props:n,showLabels:a}=e,{label:s}=n;return"object"===typeof s&&null!=s&&"position"in s?t.createElement(bW,{label:s}):t.createElement(DW,{sectors:r,props:n,showLabels:a})}function IW(e){var{sectors:r,activeShape:n,inactiveShape:a,allOtherPieProps:s}=e,i=ek(lR),{onMouseEnter:o,onClick:l,onMouseLeave:c}=s,d=jW(s,xW),u=((e,t)=>{var r=XS();return(n,a)=>s=>{null===e||void 0===e||e(n,a,s),r(bS({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}})(o,s.dataKey),h=(e=>{var t=XS();return(r,n)=>a=>{null===e||void 0===e||e(r,n,a),t(xS())}})(c),f=((e,t)=>{var r=XS();return(n,a)=>s=>{null===e||void 0===e||e(n,a,s),r(wS({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}})(l,s.dataKey);return null==r||0===r.length?null:t.createElement(t.Fragment,null,r.map((e,o)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==r.length)return null;var l=n&&String(o)===i,c=l?n:i?a:null,p=_W(_W({},e),{},{stroke:e.stroke,tabIndex:-1,[Uk]:o,[qk]:s.dataKey});return t.createElement(zB,kW({tabIndex:-1,className:"recharts-pie-sector"},sF(d,e,o),{onMouseEnter:u(e,o),onMouseLeave:h(e,o),onClick:f(e,o),key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(o)}),t.createElement(Fq,kW({option:c,isActive:l,shapeType:"sector"},p)))}))}function MW(e){var{showLabels:r,sectors:n,children:a}=e,s=(0,t.useMemo)(()=>r&&n?n.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[n,r]);return t.createElement(gW,{value:r?s:void 0},a)}function RW(e){var{props:r,previousSectorsRef:n}=e,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:h}=r,f=RU(r,"recharts-pie-"),p=n.current,[m,g]=(0,t.useState)(!1),v=(0,t.useCallback)(()=>{"function"===typeof h&&h(),g(!1)},[h]),b=(0,t.useCallback)(()=>{"function"===typeof u&&u(),g(!0)},[u]);return t.createElement(MW,{showLabels:!m,sectors:a},t.createElement(MU,{animationId:f,begin:i,duration:o,isActive:s,easing:l,onAnimationStart:b,onAnimationEnd:v,key:f},e=>{var s=[],i=a&&a[0],o=null===i||void 0===i?void 0:i.startAngle;return null===a||void 0===a||a.forEach((t,r)=>{var n=p&&p[r],a=r>0?Kw()(t,"paddingAngle",0):0;if(n){var i=nj(n.endAngle-n.startAngle,t.endAngle-t.startAngle,e),l=_W(_W({},t),{},{startAngle:o+a,endAngle:o+i+a});s.push(l),o=l.endAngle}else{var{endAngle:c,startAngle:d}=t,u=nj(0,c-d,e),h=_W(_W({},t),{},{startAngle:o+a,endAngle:o+u+a});s.push(h),o=h.endAngle}}),n.current=s,t.createElement(zB,null,t.createElement(IW,{sectors:s,activeShape:c,inactiveShape:d,allOtherPieProps:r}))}),t.createElement(OW,{showLabels:!m,sectors:a,props:r}),r.children)}var LW={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!GL,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function FW(e){var{id:r}=e,n=jW(e,yW),{hide:a,className:s,rootTabIndex:i}=e,o=(0,t.useMemo)(()=>fF(e.children,iU),[e.children]),l=ek(e=>NB(e,r,o)),c=(0,t.useRef)(null),d=Ww("recharts-pie",s);return a||null==l?(c.current=null,t.createElement(zB,{tabIndex:i,className:d})):t.createElement(t.Fragment,null,t.createElement(Bq,{fn:EW,args:_W(_W({},e),{},{sectors:l})}),t.createElement(zB,{tabIndex:i,className:d},t.createElement(RW,{props:_W(_W({},n),{},{sectors:l}),previousSectorsRef:c})))}function BW(e){var r=XF(e,LW),{id:n}=r,a=jW(r,wW),s=lF(a);return t.createElement(Vq,{id:n,type:"pie"},e=>t.createElement(t.Fragment,null,t.createElement(Gq,{type:"pie",id:e,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:s,maxRadius:r.maxRadius}),t.createElement(AW,kW({},a,{id:e})),t.createElement(FW,kW({},a,{id:e}))))}BW.displayName="Pie";var zW=r(7119);function UW(){return UW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UW.apply(null,arguments)}function qW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function WW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qW(Object(r),!0).forEach(function(t){HW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function HW(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VW(e){return Array.isArray(e)&&Zw(e[0])&&Zw(e[1])?e.join(" ~ "):e}var GW=e=>{var{separator:r=" : ",contentStyle:n={},itemStyle:a={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=WW({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),m=WW({margin:0},s),g=!aj(u),v=g?u:"",b=Ww("recharts-default-tooltip",c),x=Ww("recharts-tooltip-label",d);g&&h&&void 0!==i&&null!==i&&(v=h(u,i));var y=f?{role:"status","aria-live":"assertive"}:{};return t.createElement("div",UW({className:b,style:p},y),t.createElement("p",{className:x,style:m},t.isValidElement(v)?v:"".concat(v)),(()=>{if(i&&i.length){var e=(l?rk()(i,l):i).map((e,n)=>{if("none"===e.type)return null;var s=e.formatter||o||VW,{value:l,name:c}=e,d=l,u=c;if(s){var h=s(l,c,e,n,i);if(Array.isArray(h))[d,u]=h;else{if(null==h)return null;d=h}}var f=WW({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a);return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:f},Zw(u)?t.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Zw(u)?t.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,t.createElement("span",{className:"recharts-tooltip-item-value"},d),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},KW="recharts-tooltip-wrapper",$W={visibility:"hidden"};function YW(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ww(KW,{["".concat(KW,"-right")]:Jw(r)&&t&&Jw(t.x)&&r>=t.x,["".concat(KW,"-left")]:Jw(r)&&t&&Jw(t.x)&&r<t.x,["".concat(KW,"-bottom")]:Jw(n)&&t&&Jw(t.y)&&n>=t.y,["".concat(KW,"-top")]:Jw(n)&&t&&Jw(t.y)&&n<t.y})}function XW(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(s&&Jw(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),u=r[n]+a;if(t[n])return i[n]?d:u;var h=l[n];return null==h?0:i[n]?d<h?Math.max(u,h):Math.max(d,h):null==c?0:u+o>h+c?Math.max(d,h):Math.max(u,h)}function JW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JW(Object(r),!0).forEach(function(t){QW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function QW(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eH extends t.PureComponent{constructor(){super(...arguments),QW(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),QW(this,"handleKeyDown",e=>{var t,r,n,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:l,offset:c,position:d,reverseDirection:u,useTranslate3d:h,viewBox:f,wrapperStyle:p,lastBoundingBox:m,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:b,cssProperties:x}=function(e){var t,r,n,{allowEscapeViewBox:a,coordinate:s,offsetTopLeft:i,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:u}=e;return t=c.height>0&&c.width>0&&s?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=XW({allowEscapeViewBox:a,coordinate:s,key:"x",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=XW({allowEscapeViewBox:a,coordinate:s,key:"y",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:d}):$W,{cssProperties:t,cssClasses:YW({translateX:r,translateY:n,coordinate:s})}}({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:c,position:d,reverseDirection:u,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:f}),y=v?{}:ZW(ZW({transition:l&&e?"transform ".concat(n,"ms ").concat(a):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),w=ZW(ZW({},y),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return t.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:w,ref:g},s)}}var tH=r(2239),rH=r.n(tH);function nH(e,t,r){return!0===t?rH()(e,r):"function"===typeof t?rH()(e,t):e}function aH(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[r,n]=(0,t.useState)({height:0,left:0,top:0,width:0}),a=(0,t.useCallback)(e=>{if(null!=e){var t=e.getBoundingClientRect(),a={height:t.height,left:t.left,top:t.top,width:t.width};(Math.abs(a.height-r.height)>1||Math.abs(a.left-r.left)>1||Math.abs(a.top-r.top)>1||Math.abs(a.width-r.width)>1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,a]}var sH=["x","y","top","left","width","height","className"];function iH(){return iH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iH.apply(null,arguments)}function oH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cH=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),dH=e=>{var{x:r=0,y:n=0,top:a=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,sH),d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oH(Object(r),!0).forEach(function(t){lH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:n,top:a,left:s,width:i,height:o},c);return Jw(r)&&Jw(n)&&Jw(i)&&Jw(o)&&Jw(a)&&Jw(s)?t.createElement("path",iH({},pF(d,!0),{className:Ww("recharts-cross",l),d:cH(r,n,i,o,a,s)})):null};function uH(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e;return{points:[gk(t,r,n,a),gk(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function hH(e,t,r){var n,a,s,i;if("horizontal"===e)s=n=t.x,a=r.top,i=r.top+r.height;else if("vertical"===e)i=a=t.y,n=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return uH(t);var{cx:o,cy:l,innerRadius:c,outerRadius:d,angle:u}=t,h=gk(o,l,c,u),f=gk(o,l,d,u);n=h.x,a=h.y,s=f.x,i=f.y}return[{x:n,y:a},{x:s,y:i}]}function fH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fH(Object(r),!0).forEach(function(t){mH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gH=()=>{var e=ek(yO),t=ek(nR),r=ek(eR);return((e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=rk()(t,e=>e.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0})(pH(pH({},e),{},{scale:r}),t)};function vH(){return vH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vH.apply(null,arguments)}function bH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bH(Object(r),!0).forEach(function(t){yH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wH(e){var r,n,{coordinate:a,payload:s,index:i,offset:o,tooltipAxisBandSize:l,layout:c,cursor:d,tooltipEventType:u,chartName:h}=e,f=a,p=s,m=i;if(!d||!f||"ScatterChart"!==h&&"axis"!==u)return null;if("ScatterChart"===h)r=f,n=dH;else if("BarChart"===h)r=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(c,f,o,l),n=WU;else if("radial"===c){var{cx:g,cy:v,radius:b,startAngle:x,endAngle:y}=uH(f);r={cx:g,cy:v,startAngle:x,endAngle:y,innerRadius:b,outerRadius:b},n=tq}else r={points:hH(c,f,o)},n=Az;var w="object"===typeof d&&"className"in d?d.className:void 0,j=xH(xH(xH(xH({stroke:"#ccc",pointerEvents:"none"},o),r),pF(d,!1)),{},{payload:p,payloadIndex:m,className:Ww("recharts-tooltip-cursor",w)});return(0,t.isValidElement)(d)?(0,t.cloneElement)(d,j):(0,t.createElement)(n,j)}function jH(e){var r=gH(),n=(()=>{var e;return null!==(e=ek(Gk))&&void 0!==e?e:Qk})(),a=nA(),s=ek(qD);return t.createElement(wH,vH({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:a,tooltipAxisBandSize:r,chartName:s}))}function NH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NH(Object(r),!0).forEach(function(t){SH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function SH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){return e.dataKey}var AH=[],EH={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!GL,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function CH(e){var r=XF(e,EH),{active:n,allowEscapeViewBox:a,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:m,cursor:g,shared:v,trigger:b,defaultIndex:x,portal:y,axisId:w}=r,j=XS(),N="number"===typeof x?String(x):x;(0,t.useEffect)(()=>{j(vS({shared:v,trigger:b,axisId:w,active:n,defaultIndex:N}))},[j,v,b,w,n,N]);var _=Zk(),S=QL(),k=function(e){return ek(t=>uM(t,e))}(v),{activeIndex:A,isActive:E}=ek(e=>AR(e,k,b,N)),C=ek(e=>kR(e,k,b,N)),T=ek(e=>SR(e,k,b,N)),P=ek(e=>_R(e,k,b,N)),D=C,O=(0,t.useContext)(RF),I=null!==n&&void 0!==n?n:E,[M,R]=aH([D,I]),L="axis"===k?T:void 0;MF(k,b,P,L,A,I);var F=null!==y&&void 0!==y?y:O;if(null==F)return null;var B=null!==D&&void 0!==D?D:AH;I||(B=AH),l&&B.length&&(B=nH(D.filter(e=>null!=e.value&&(!0!==e.hide||r.includeHidden)),u,kH));var z=B.length>0,U=t.createElement(eH,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:c,active:I,coordinate:P,hasPayload:z,offset:d,position:h,reverseDirection:f,useTranslate3d:p,viewBox:_,wrapperStyle:m,lastBoundingBox:M,innerRef:R,hasPortalFromProps:Boolean(y)},function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):"function"===typeof e?t.createElement(e,r):t.createElement(GW,r)}(o,_H(_H({},r),{},{payload:B,label:L,active:I,coordinate:P,accessibilityLayer:S})));return t.createElement(t.Fragment,null,(0,zW.createPortal)(U,F),I&&t.createElement(jH,{cursor:g,tooltipEventType:k,coordinate:P,payload:D,index:A}))}function TH(){return TH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TH.apply(null,arguments)}function PH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function DH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var OH=32;class IH extends t.PureComponent{renderIcon(e,r){var{inactiveColor:n}=this.props,a=16,s=OH/6,i=OH/3,o=e.inactive?n:e.color,l=null!==r&&void 0!==r?r:e.type;if("none"===l)return null;if("plainline"===l)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:a,x2:OH,y2:a,className:"recharts-legend-icon"});if("line"===l)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,"\n            H").concat(OH,"M").concat(2*i,",").concat(a,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if("rect"===l)return t.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(OH,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(e.legendIcon)){var c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PH(Object(r),!0).forEach(function(t){DH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete c.legendIcon,t.cloneElement(e.legendIcon,c)}return t.createElement(Pq,{fill:o,cx:a,cy:a,size:OH,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,o={x:0,y:0,width:OH,height:OH},l={display:"horizontal"===n?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((e,n)=>{var d=e.formatter||a,u=Ww({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:e.inactive});if("none"===e.type)return null;var h=e.inactive?s:e.color,f=d?d(e.value,e,n):e.value;return t.createElement("li",TH({className:u,style:l,key:"legend-item-".concat(n)},sF(this.props,e,n)),t.createElement(vF,{width:r,height:r,viewBox:o,style:c,"aria-label":"".concat(f," legend icon")},this.renderIcon(e,i)),t.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},f))})}render(){var{payload:e,layout:r,align:n}=this.props;if(!e||!e.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return t.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}DH(IH,"displayName","Legend"),DH(IH,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var MH=["contextPayload"];function RH(){return RH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RH.apply(null,arguments)}function LH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function FH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LH(Object(r),!0).forEach(function(t){BH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function BH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zH(e){return e.value}function UH(e){var{contextPayload:r}=e,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,MH),a=nH(r,e.payloadUniqBy,zH),s=FH(FH({},n),{},{payload:a});return t.isValidElement(e.content)?t.cloneElement(e.content,s):"function"===typeof e.content?t.createElement(e.content,s):t.createElement(IH,s)}function qH(e){var r=XS();return(0,t.useEffect)(()=>{r(pL(e))},[r,e]),null}function WH(e){var r=XS();return(0,t.useEffect)(()=>(r(fL(e)),()=>{r(fL({width:0,height:0}))}),[r,e]),null}function HH(e){var r=ek(ak),n=(0,t.useContext)(LF),a=ek(e=>e.layout.margin),{width:s,height:i,wrapperStyle:o,portal:l}=e,[c,d]=aH([r]),u=eA(),h=tA();if(null==u||null==h)return null;var f=u-(a.left||0)-(a.right||0),p=VH.getWidthOrHeight(e.layout,i,s,f),m=l?o:FH(FH({position:"absolute",width:(null===p||void 0===p?void 0:p.width)||s||"auto",height:(null===p||void 0===p?void 0:p.height)||i||"auto"},function(e,t,r,n,a,s){var i,o,{layout:l,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(i="center"===c&&"vertical"===l?{left:((n||0)-s.width)/2}:"right"===c?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(o="middle"===d?{top:((a||0)-s.height)/2}:"bottom"===d?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),FH(FH({},i),o)}(o,e,a,u,h,c)),o),g=null!==l&&void 0!==l?l:n;if(null==g)return null;var v=t.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:d},t.createElement(qH,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),t.createElement(WH,{width:c.width,height:c.height}),t.createElement(UH,RH({},e,p,{margin:a,chartWidth:u,chartHeight:h,contextPayload:r})));return(0,zW.createPortal)(v,g)}class VH extends t.PureComponent{static getWidthOrHeight(e,t,r,n){return"vertical"===e&&Jw(t)?{height:t}:"horizontal"===e?{width:r||n}:null}render(){return t.createElement(HH,this.props)}}BH(VH,"displayName","Legend"),BH(VH,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});const GH=function(e){const t=(e/1e3).toFixed(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"$".concat(t.join("."),"K")},KH=e=>{let{totalPurchaseOrders:r,totalAdvances:n,totalInvoices:a}=e;const s=(0,t.useMemo)(()=>{const e=r-(n+a);return[{name:"Anticipos",value:n,color:"#3B82F6"},{name:"Facturaci\xf3n",value:a,color:"#9CA3AF"},{name:"Por pagar",value:Math.max(0,e),color:"#1E3A8A"}]},[r,n,a]),i=e=>{let{active:t,payload:r}=e;return t&&r&&r.length?(0,At.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[(0,At.jsx)("p",{className:"font-semibold text-gray-800",children:r[0].name}),(0,At.jsx)("p",{className:"text-lg font-bold",style:{color:r[0].payload.color},children:GH(r[0].value)})]}):null};return(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-cyan-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb5"}),"Flujo de Caja $M MXN"]}),(0,At.jsx)("div",{className:"w-full",style:{height:"400px"},children:(0,At.jsx)(dj,{width:"100%",height:"100%",children:(0,At.jsxs)(nB,{children:[(0,At.jsx)(BW,{data:s,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:t,cy:r,midAngle:n,innerRadius:a,outerRadius:s,value:i}=e;const o=Math.PI/180,l=a+.5*(s-a),c=t+l*Math.cos(-n*o),d=r+l*Math.sin(-n*o);return(0,At.jsx)("text",{x:c,y:d,fill:"black",textAnchor:c>t?"start":"end",dominantBaseline:"central",className:"font-bold text-sm",children:GH(i)})},outerRadius:120,innerRadius:70,fill:"#8884d8",dataKey:"value",children:s.map((e,t)=>(0,At.jsx)(iU,{fill:e.color},"cell-".concat(t)))}),(0,At.jsx)(CH,{content:(0,At.jsx)(i,{})}),(0,At.jsx)(VH,{content:e=>{const{payload:t}=e;return(0,At.jsx)("div",{className:"flex justify-center items-center space-x-6 mt-4",children:t.map((e,t)=>(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.value})]},"legend-".concat(t)))})}})]})})}),(0,At.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,At.jsx)("div",{className:"grid grid-cols-3 gap-4",children:s.map((e,t)=>(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,At.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-600",children:e.name})]}),(0,At.jsx)("div",{className:"text-xl font-bold",style:{color:e.color},children:GH(e.value)})]},t))})})]})},$H=e=>{let{projects:r,portfolioMetrics:n,workPackages:a=[],risks:s=[],purchaseOrders:i=[],advances:o=[],invoices:l=[],tasksByProject:c={},purchaseOrdersByProject:d={},advancesByProject:u={},invoicesByProject:h={}}=e;const[f,p]=(0,t.useState)(0);(0,t.useEffect)(()=>{const e=e=>{const{tareaId:t,newStatus:r,projectId:n,timestamp:a}=e.detail;console.log("\ud83d\udd04 ConsolidatedDashboard: Evento minutaStatusChanged recibido:",{tareaId:t,newStatus:r,projectId:n,timestamp:a}),console.log("\ud83d\udd04 ConsolidatedDashboard: Forzando re-render del Dashboard..."),p(e=>e+1)};return window.addEventListener("minutaStatusChanged",e),()=>{window.removeEventListener("minutaStatusChanged",e)}},[]);const m=(null===r||void 0===r?void 0:r.filter(e=>"active"===e.status))||[],g=m.reduce((e,t)=>e+(t.budget||0),0),v=m.reduce((e,t)=>e+.15*(t.budget||0),0),b=m.map(e=>({start:e.startDate?new Date(e.startDate):null,end:e.endDate?new Date(e.endDate):null})).filter(e=>e.start&&e.end),x=b.length>0?new Date(Math.min(...b.map(e=>e.start.getTime()))):null,y=b.length>0?new Date(Math.max(...b.map(e=>e.end.getTime()))):null,w=(null===i||void 0===i?void 0:i.reduce((e,t)=>e+(t.totalAmount||0),0))||0,j=(null===o||void 0===o?void 0:o.reduce((e,t)=>e+(t.amount||0),0))||0,N=(null===l||void 0===l?void 0:l.reduce((e,t)=>e+(t.amount||0),0))||0,_=(null===s||void 0===s?void 0:s.filter(e=>"active"===e.status))||[],S=_.filter(e=>"high"===e.priority),k=_.filter(e=>"medium"===e.priority),A=_.filter(e=>"low"===e.priority),E=Object.values(c||{}).flat(),C=E.filter(e=>e.isMilestone),T=C.filter(e=>(e.progress||0)>=100),P=C.filter(e=>(e.progress||0)>0),D=new Date,O=C.filter(e=>{const t=e.progress||0;if(t>=100)return!1;if(e.endDate){return new Date(e.endDate)<D&&t<100}return!1}),I=C.filter(e=>0===(e.progress||0)&&!O.includes(e));let M,R,L;if(console.log("\ud83d\udd0d DEBUG HITOS PORTFOLIO MEJORADO:",{totalTasks:E.length,totalMilestones:C.length,completed:T.length,inProgress:P.length,delayed:O.length,pending:I.length,currentDate:D.toISOString().split("T")[0],milestonesData:C.slice(0,5).map(e=>({id:e.id,name:e.name,progress:e.progress,endDate:e.endDate,isDelayed:!!e.endDate&&(new Date(e.endDate)<D&&(e.progress||0)<100),classification:(e.progress||0)>=100?"completed":(e.progress||0)>0?"in-progress":"pending"})),progressDistribution:{"0%":C.filter(e=>0===(e.progress||0)).length,"1-99%":C.filter(e=>(e.progress||0)>0&&(e.progress||0)<100).length,"100%":C.filter(e=>(e.progress||0)>=100).length},dateAnalysis:{milestonesWithEndDate:C.filter(e=>e.endDate).length,milestonesPastDueDate:C.filter(e=>e.endDate&&new Date(e.endDate)<D).length,milestonesPastDueAndIncomplete:O.length}}),a&&a.length>0)M=a.reduce((e,t)=>e+(t.budget||0),0),R=a.reduce((e,t)=>e+(t.earnedValue||0),0),L=a.reduce((e,t)=>e+(t.actualCost||0),0);else{const e=Object.values(c||{}).flat();M=e.reduce((e,t)=>e+(t.cost||0),0),R=e.reduce((e,t)=>{const r=(t.progress||0)/100;return e+(t.cost||0)*r},0),L=e.reduce((e,t)=>{const r=(t.progress||0)/100;return e+(t.cost||0)*r*.8},0)}const F=L>0?R/L:1,B=M>0?R/M:1,z=M-(L+(M-R)),U=M/F;console.log("\ud83d\udcca M\xc9TRICAS EVM CALCULADAS:",{dataSource:a&&a.length>0?"workPackages":"tasks",workPackagesCount:(null===a||void 0===a?void 0:a.length)||0,tasksCount:Object.values(c||{}).flat().length,totalWorkPackageBudget:M,totalWorkPackageEarned:R,totalWorkPackageActual:L,consolidatedCPI:F,consolidatedSPI:B,consolidatedVAC:z,consolidatedEAC:U});const q=(e,t)=>"cpi"===t||"spi"===t?e>=1?"text-green-600":e>=.9?"text-yellow-600":"text-red-600":"variance"===t?e>=0?"text-green-600":"text-red-600":"text-gray-600",W=e=>{switch(e){case"active":return"\ud83d\udd04";case"completed":return"\u2705";case"on-hold":default:return"\u23f8\ufe0f";case"cancelled":return"\u274c"}};return(0,At.jsxs)("div",{className:"space-y-8",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\ud83d\udcc8 Dashboard Consolidado"}),(0,At.jsx)("p",{className:"text-indigo-100 text-lg",children:"Vista ejecutiva del estado general del portfolio de proyectos"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83c\udfe2"}),"Vista General del Portfolio"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Proyectos Activos"})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-blue-800",children:m.length}),(0,At.jsxs)("div",{className:"text-sm text-blue-600 mt-1",children:["de ",(null===r||void 0===r?void 0:r.length)||0," total"]})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"}),(0,At.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Presupuesto Total"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-green-800",children:["$",(g/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-green-600 mt-1",children:"Presupuesto asignado"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"}),(0,At.jsx)("span",{className:"text-sm font-medium text-purple-600",children:"Inicio M\xe1s Temprano"})]}),(0,At.jsx)("div",{className:"text-xl font-bold text-purple-800",children:x?x.toLocaleDateString("es-ES"):"N/A"}),(0,At.jsx)("div",{className:"text-sm text-purple-600 mt-1",children:"Fecha de inicio del portfolio"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83c\udfc1"}),(0,At.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Fin M\xe1s Tard\xedo"})]}),(0,At.jsx)("div",{className:"text-xl font-bold text-orange-800",children:y?y.toLocaleDateString("es-ES"):"N/A"}),(0,At.jsx)("div",{className:"text-sm text-orange-600 mt-1",children:"Fecha de fin del portfolio"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcca"}),"Indicadores por Proyecto"]}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full text-sm",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-50",children:[(0,At.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Proyecto"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Estatus"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Presupuesto"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Inicio"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Fin"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Progreso"})]})}),(0,At.jsx)("tbody",{children:m.map((e,t)=>(0,At.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-4 py-3",children:(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("span",{className:"text-lg",children:W(e.status)}),(0,At.jsx)("span",{className:"font-medium text-gray-800",children:e.name})]})}),(0,At.jsx)("td",{className:"px-4 py-3",children:(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-blue-100 text-blue-800":"on-hold"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"active"===e.status?"Activo":"completed"===e.status?"Completado":"on-hold"===e.status?"En Pausa":"Cancelado"})}),(0,At.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-800",children:["$",((e.budget||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.startDate?new Date(e.startDate).toLocaleDateString("es-ES"):"N/A"}),(0,At.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.endDate?new Date(e.endDate).toLocaleDateString("es-ES"):"N/A"}),(0,At.jsx)("td",{className:"px-4 py-3",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(Math.min(100,Math.max(0,e.progress||0)),"%")}})}),(0,At.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.round(e.progress||0),"%"]})]})})]},e.id))})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-emerald-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb3"}),"Indicadores Financieros Consolidados"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-lg border border-emerald-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udccb"}),(0,At.jsx)("span",{className:"text-sm font-medium text-emerald-600",children:"\xd3rdenes de Compra"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-emerald-800",children:["$",(w/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-emerald-600 mt-1",children:"Total en OC aprobadas"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-lg border border-amber-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb8"}),(0,At.jsx)("span",{className:"text-sm font-medium text-amber-600",children:"Anticipos"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-amber-800",children:["$",(j/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-amber-600 mt-1",children:"Anticipos solicitados"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 p-6 rounded-lg border border-cyan-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83e\uddfe"}),(0,At.jsx)("span",{className:"text-sm font-medium text-cyan-600",children:"Facturas"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-cyan-800",children:["$",(N/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-cyan-600 mt-1",children:"Facturas ingresadas"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udee1\ufe0f"}),(0,At.jsx)("span",{className:"text-sm font-medium text-purple-600",children:"Reservas"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-purple-800",children:["$",(v/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-purple-600 mt-1",children:"Contingencia + Gesti\xf3n"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udee1\ufe0f"}),"Indicadores de Riesgos del Portfolio"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-lg border border-red-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udea8"}),(0,At.jsx)("span",{className:"text-sm font-medium text-red-600",children:"Riesgos Activos"})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-red-800",children:_.length}),(0,At.jsx)("div",{className:"text-sm text-red-600 mt-1",children:"Total de riesgos identificados"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,At.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Alta Prioridad"})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-orange-800",children:S.length}),(0,At.jsx)("div",{className:"text-sm text-orange-600 mt-1",children:"Requieren atenci\xf3n inmediata"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-lg border border-yellow-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,At.jsx)("span",{className:"text-sm font-medium text-yellow-600",children:"Distribuci\xf3n"})]}),(0,At.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,At.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,At.jsxs)("span",{children:["Alta: ",S.length]}),(0,At.jsxs)("span",{children:["Media: ",k.length]})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsxs)("span",{children:["Baja: ",A.length]}),(0,At.jsxs)("span",{children:["Total: ",_.length]})]})]})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83c\udfaf"}),"Hitos del Portafolio"]}),(0,At.jsx)("div",{className:"space-y-6",children:r&&r.length>0?r.filter(e=>"active"===e.status).map(e=>{const t=((null===c||void 0===c?void 0:c[e.id])||[]).filter(e=>e.isMilestone),r=t.filter(e=>(e.progress||0)>=100),n=t.filter(e=>(e.progress||0)>0),a=new Date,s=t.filter(e=>{const t=e.progress||0;if(t>=100)return!1;if(e.endDate){return new Date(e.endDate)<a&&t<100}return!1}),i=t.length>0?Math.round(r.length/t.length*100):0;return(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udccb"}),e.name,(0,At.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",t.length," hitos)"]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\u2705"}),(0,At.jsx)("span",{className:"text-xs font-medium text-green-600",children:"Completados"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-green-800",children:r.length}),(0,At.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Hitos realizados"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\ud83d\udd04"}),(0,At.jsx)("span",{className:"text-xs font-medium text-yellow-600",children:"En Proceso"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:n.length}),(0,At.jsx)("div",{className:"text-xs text-yellow-600 mt-1",children:"Hitos en ejecuci\xf3n"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg border border-red-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\u26a0\ufe0f"}),(0,At.jsx)("span",{className:"text-xs font-medium text-red-600",children:"Atrasados"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-red-800",children:s.length}),(0,At.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Hitos retrasados"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\ud83d\udcc8"}),(0,At.jsx)("span",{className:"text-xs font-medium text-blue-600",children:"Progreso"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:[i,"%"]}),(0,At.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Completitud"})]})]})]},e.id)}):(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83d\udccb"}),(0,At.jsx)("p",{children:"No hay proyectos activos con hitos"})]})}),r&&r.filter(e=>"active"===e.status).length>1&&(0,At.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udcca"}),"Resumen Consolidado"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\u2705"}),(0,At.jsx)("span",{className:"text-xs font-medium text-green-600",children:"Total Completados"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-green-800",children:T.length}),(0,At.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Hitos realizados"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\ud83d\udd04"}),(0,At.jsx)("span",{className:"text-xs font-medium text-yellow-600",children:"Total En Proceso"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:P.length}),(0,At.jsx)("div",{className:"text-xs text-yellow-600 mt-1",children:"Hitos en ejecuci\xf3n"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg border border-red-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\u26a0\ufe0f"}),(0,At.jsx)("span",{className:"text-xs font-medium text-red-600",children:"Total Atrasados"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-red-800",children:O.length}),(0,At.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Hitos retrasados"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\ud83d\udcc8"}),(0,At.jsx)("span",{className:"text-xs font-medium text-blue-600",children:"Progreso General"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:[C.length>0?Math.round(T.length/C.length*100):0,"%"]}),(0,At.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Completitud general"})]})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-indigo-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcca"}),"Indicadores PMBOK v7 - Gesti\xf3n de Costos"]}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"text-blue-600 text-xl mr-3",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{className:"text-blue-800",children:[(0,At.jsx)("strong",{children:"Fuente de datos:"})," ",a&&a.length>0?"Calculado basado en ".concat(a.length," paquetes de trabajo"):"Calculado basado en ".concat(Object.values(c||{}).flat().length," tareas del cronograma"),!(a&&a.length>0)&&(0,At.jsx)("span",{className:"block text-sm mt-1",children:'Los costos se estiman bas\xe1ndose en el campo "Costo" de cada tarea y su progreso actual.'})]})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"CPI - Cost Performance Index"}),(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-2",children:F.toFixed(2)}),(0,At.jsx)("div",{className:"text-sm font-medium mb-2 ".concat(q(F,"cpi")),children:F>=1?"\u2705 Eficiencia de costos positiva":F>=.9?"\u26a0\ufe0f Eficiencia de costos aceptable":"\u274c Eficiencia de costos deficiente"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,At.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Mide la eficiencia del costo del trabajo realizado. Valores \u2265 1.0 indican que el proyecto est\xe1 dentro del presupuesto."]})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"SPI - Schedule Performance Index"}),(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-green-800 mb-2",children:B.toFixed(2)}),(0,At.jsx)("div",{className:"text-sm font-medium mb-2 ".concat(q(B,"spi")),children:B>=1?"\u2705 Eficiencia de cronograma positiva":B>=.9?"\u26a0\ufe0f Eficiencia de cronograma aceptable":"\u274c Eficiencia de cronograma deficiente"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,At.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Mide la eficiencia del cronograma del trabajo realizado. Valores \u2265 1.0 indican que el proyecto est\xe1 adelantado."]})]})]}),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:"VAC - Variance at Completion"}),(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold mb-2 ".concat(q(z,"variance")),children:["$",(z/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm font-medium mb-2 ".concat(q(z,"variance")),children:z>=0?"\u2705 Proyecto dentro del presupuesto":"\u274c Proyecto exceder\xe1 el presupuesto"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,At.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Predice la diferencia entre el presupuesto total y el costo final estimado. Valores positivos indican ahorro proyectado."]})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-orange-800",children:"EAC - Estimate at Completion"}),(0,At.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-orange-800 mb-2",children:["$",(U/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm font-medium mb-2 text-orange-700",children:"Costo total estimado del proyecto"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,At.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Predice el costo total del proyecto basado en el rendimiento actual. Se calcula como: Presupuesto Total \xf7 CPI."]})]})]})]})]}),(0,At.jsx)(KH,{totalPurchaseOrders:w,totalAdvances:j,totalInvoices:N}),(0,At.jsx)(Uw,{projects:r,tasksByProject:c,purchaseOrdersByProject:d,advancesByProject:u,invoicesByProject:h})]})},YH={maxFileSize:10485760,maxFilesPerProject:100,maxTotalSizePerProject:524288e3,allowedTypes:["pdf","jpg","jpeg","png","doc","docx","xls","xlsx"],allowedMimeTypes:["application/pdf","image/jpeg","image/jpg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},XH=e=>{const[r,n]=(0,t.useState)([]),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)("local"),[u,h]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{if(kt.default.isAuthenticated()){console.log("\ud83d\udd0d Verificando disponibilidad de Supabase Storage...");const e=await kt.default.initializeStorage();h(e),d(e?"supabase":"local"),console.log("\u2705 Storage provider configurado: ".concat(e?"Supabase":"Local"))}else console.log("\u26a0\ufe0f Usuario no autenticado, usando almacenamiento local"),h(!1),d("local")}catch(o){console.error("\u274c Error verificando Supabase:",o),console.log("\ud83d\udd04 Fallback a localStorage debido a error de Supabase"),h(!1),d("local")}})()},[]),(0,t.useEffect)(()=>{e&&f()},[e,c,u]);const f=(0,t.useCallback)(async()=>{if(e){i(!0),l(null);try{if(u&&"supabase"===c){console.log("\ud83d\udcc2 Cargando archivos desde Supabase para proyecto ".concat(e,"..."));const{success:t,files:r,error:a}=await kt.default.listProjectFiles(e);if(t){const e=r.map(e=>{var t,r,n,a;return(0,s.A)((0,s.A)({},e),{},{mimeType:(null===(t=e.metadata)||void 0===t?void 0:t.mimeType)||"application/octet-stream",description:(null===(r=e.metadata)||void 0===r?void 0:r.description)||"",relatedItemId:(null===(n=e.metadata)||void 0===n?void 0:n.relatedItemId)||null,content:e.publicUrl,fileExtension:(null===(a=e.fileName.split(".").pop())||void 0===a?void 0:a.toLowerCase())||""})});n(e),console.log("\u2705 ".concat(e.length," archivos cargados desde Supabase"))}else console.error("\u274c Error cargando desde Supabase:",a),p()}else p()}catch(o){console.error("\u274c Error cargando archivos:",o),l("Error al cargar archivos del proyecto"),p()}finally{i(!1)}}},[e,u,c]),p=(0,t.useCallback)(()=>{try{const t=localStorage.getItem("project-files-".concat(e));if(t){const e=JSON.parse(t);n(e),console.log("\u2705 ".concat(e.length," archivos cargados desde localStorage"))}}catch(o){console.error("\u274c Error cargando desde localStorage:",o),l("Error al cargar archivos del proyecto")}},[e]),m=(0,t.useCallback)(t=>{if(e)try{localStorage.setItem("project-files-".concat(e),JSON.stringify(t))}catch(o){console.error("Error saving project files:",o),l("Error al guardar archivos del proyecto")}},[e]),g=(0,t.useCallback)(e=>{if(e.size>YH.maxFileSize)throw new Error("El archivo es demasiado grande. M\xe1ximo ".concat(YH.maxFileSize/1048576,"MB"));const t=e.name.split(".").pop().toLowerCase();if(!YH.allowedTypes.includes(t))throw new Error("Tipo de archivo no permitido. Tipos permitidos: ".concat(YH.allowedTypes.join(", ")));if(!YH.allowedMimeTypes.includes(e.type))throw new Error("Tipo de archivo no v\xe1lido");return!0},[]),v=(0,t.useCallback)(async e=>e.type.startsWith("image/")?new Promise(t=>{const r=document.createElement("canvas"),n=r.getContext("2d"),a=new Image;a.onload=()=>{const s=1200;let{width:i,height:o}=a;i>o&&i>s?(o=o*s/i,i=s):o>s&&(i=i*s/o,o=s),r.width=i,r.height=o,n.drawImage(a,0,0,i,o),r.toBlob(r=>{const n=new File([r],e.name,{type:e.type,lastModified:Date.now()});t(n)},e.type,.8)},a.src=URL.createObjectURL(e)}):e,[]),b=(0,t.useCallback)(e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>r(e)}),[]),x=(0,t.useCallback)(async function(t,a,d){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";i(!0),l(null);try{if(g(t),r.length>=YH.maxFilesPerProject)throw new Error("L\xedmite de archivos alcanzado. M\xe1ximo ".concat(YH.maxFilesPerProject," archivos por proyecto"));const i=r.reduce((e,t)=>e+t.fileSize,0)+t.size;if(i>YH.maxTotalSizePerProject)throw new Error("L\xedmite de tama\xf1o alcanzado. M\xe1ximo ".concat(YH.maxTotalSizePerProject/1048576,"MB por proyecto"));const o=await v(t);let l;if(u&&"supabase"===c){var f;console.log("\u2601\ufe0f Subiendo archivo a Supabase Storage...");const i={description:h,relatedItemId:d,originalName:t.name,uploadedBy:(null===(f=kt.default.getCurrentUser())||void 0===f?void 0:f.email)||"Usuario",mimeType:t.type},c=await kt.default.uploadFileToStorage(o,e,a,i);var p;if(!c.success)throw new Error("Error subiendo a Supabase: ".concat((null===(p=c.error)||void 0===p?void 0:p.message)||"Error desconocido"));{var x;l=(0,s.A)((0,s.A)({},c.file),{},{description:h,relatedItemId:d,fileExtension:t.name.split(".").pop().toLowerCase(),uploadedBy:(null===(x=kt.default.getCurrentUser())||void 0===x?void 0:x.email)||"Usuario Actual"});const e=r.slice();e.push(l),n(e),console.log("\u2705 Archivo subido exitosamente a Supabase Storage:",l.fileName)}}else{console.log("\ud83d\udcbe Subiendo archivo a localStorage...");const s=await b(o);l={id:"file-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),projectId:e,category:a,relatedItemId:d,fileName:t.name,originalName:t.name,fileSize:o.size,mimeType:t.type,uploadDate:(new Date).toISOString(),uploadedBy:"Usuario Actual",description:h,content:s,fileExtension:t.name.split(".").pop().toLowerCase(),metadata:{storageProvider:"local"}};const i=r.slice();i.push(l),n(i),m(i),console.log("\u2705 Archivo subido exitosamente a localStorage:",l.fileName)}return l}catch(o){throw console.error("Error uploading file:",o),l(o.message),o}finally{i(!1)}},[r,e,g,v,b,m,u,c]),y=(0,t.useCallback)(async e=>{try{const t=r.find(t=>t.id===e);if(!t)throw new Error("Archivo no encontrado");if(u&&"supabase"===c&&t.storagePath){console.log("\ud83d\uddd1\ufe0f Eliminando archivo de Supabase Storage...");const e=await kt.default.deleteFileFromStorage(t.storagePath);e.success?console.log("\u2705 Archivo eliminado de Supabase Storage"):console.warn("\u26a0\ufe0f Error eliminando archivo de Supabase Storage:",e.error)}const a=r.filter(t=>t.id!==e);n(a),"local"===c&&m(a),console.log("\u2705 Archivo eliminado exitosamente:",e)}catch(o){console.error("Error deleting file:",o),l("Error al eliminar archivo")}},[r,m,u,c]),w=(0,t.useCallback)(e=>"financial-only"===e?r.filter(e=>["purchase-order","invoice","advance","contract"].includes(e.category)):"risk-evidence"===e?r.filter(e=>["risk-evidence"].includes(e.category)):r.filter(t=>t.category===e),[r]),j=(0,t.useCallback)(e=>r.filter(t=>t.relatedItemId===e),[r]),N=(0,t.useCallback)(e=>{const t=e.toLowerCase();return r.filter(e=>e.fileName.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))},[r]),_=(0,t.useCallback)(()=>{const e=r.reduce((e,t)=>e+t.fileSize,0),t=Array.from(new Set(r.map(e=>e.category)));return{totalFiles:r.length,totalSize:e,totalSizeMB:(e/1048576).toFixed(2),categories:t,filesByCategory:t.reduce((e,t)=>(e[t]=r.filter(e=>e.category===t).length,e),{})}},[r]),S=(0,t.useCallback)(()=>{if(e)try{localStorage.removeItem("project-files-".concat(e)),n([]),console.log("\u2705 Archivos del proyecto limpiados")}catch(o){console.error("Error clearing project files:",o),l("Error al limpiar archivos del proyecto")}},[e]),k=(0,t.useCallback)(async e=>"supabase"!==e||u?(d(e),console.log("\ud83d\udd04 Cambiando a proveedor de almacenamiento: ".concat(e)),await f(),!0):(console.warn("\u26a0\ufe0f Supabase no est\xe1 disponible"),!1),[u,f]),A=(0,t.useCallback)(async()=>{if(!u)return console.warn("\u26a0\ufe0f Supabase no est\xe1 disponible para sincronizaci\xf3n"),!1;try{console.log("\ud83d\udd04 Iniciando sincronizaci\xf3n con Supabase...");const e=r.filter(e=>{var t;return"local"===(null===(t=e.metadata)||void 0===t?void 0:t.storageProvider)});if(0===e.length)return console.log("\u2705 No hay archivos locales para sincronizar"),!0;let t=0,a=0;for(const i of e)try{const e=await fetch(i.content),o=await e.blob(),l=new File([o],i.fileName,{type:i.mimeType}),c=await kt.default.uploadFileToStorage(l,i.projectId,i.category,{description:i.description,relatedItemId:i.relatedItemId,originalName:i.fileName,uploadedBy:i.uploadedBy,mimeType:i.mimeType});if(c.success){const e=(0,s.A)((0,s.A)((0,s.A)({},i),c.file),{},{metadata:(0,s.A)((0,s.A)({},i.metadata),{},{storageProvider:"supabase",syncedAt:(new Date).toISOString()})}),a=r.map(t=>t.id===i.id?e:t);n(a),t++,console.log("\u2705 Sincronizado: ".concat(i.fileName))}else console.error("\u274c Error sincronizando ".concat(i.fileName,":"),c.error),a++}catch(o){console.error("\u274c Error procesando ".concat(i.fileName,":"),o),a++}return console.log("\ud83c\udf89 Sincronizaci\xf3n completada: ".concat(t," exitosos, ").concat(a," errores")),!0}catch(o){return console.error("\u274c Error en sincronizaci\xf3n:",o),!1}},[r,u]);return{files:r,isLoading:a,error:o,storageProvider:c,isSupabaseAvailable:u,uploadFile:x,deleteFile:y,getFilesByCategory:w,getFilesByRelatedItem:j,searchFiles:N,getFileStats:_,clearProjectFiles:S,switchStorageProvider:k,syncWithSupabase:A,loadProjectFiles:f,fileLimits:YH}},JH=e=>{let{projectId:r,category:n="general",relatedItemId:a=null,onFileUploaded:s=null,showUploadArea:i=!0,isContextual:o=!1,title:l="\ud83d\udcce Gesti\xf3n de Archivos"}=e;const{permissions:c}=Ot(),{files:d,isLoading:u,error:h,uploadFile:f,deleteFile:p,getFilesByCategory:m,getFilesByRelatedItem:g,searchFiles:v,getFileStats:b,fileLimits:x}=XH(r),[y,w]=(0,t.useState)(!1),[j,N]=(0,t.useState)(""),[_,S]=(0,t.useState)(n),[k,A]=(0,t.useState)(!1),[E,C]=(0,t.useState)(""),T=i&&c.canEdit,[P,D]=(0,t.useState)([]),[O,I]=(0,t.useState)("grid"),M=(0,t.useRef)(null),R=(0,t.useMemo)(()=>{let e=d;return console.log("\ud83d\udd0d FileManager - Filtrado:",{totalFiles:d.length,category:n,selectedCategory:_,isContextual:o,searchTerm:j}),"general"!==n&&o?(e=m(n),console.log("\ud83d\udcc2 Filtrado por categor\xeda contextual:",n,"archivos:",e.length)):"general"!==_&&(e=m(_),console.log("\ud83d\udcc2 Filtrado por categor\xeda seleccionada:",_,"archivos:",e.length)),a&&(e=g(a),console.log("\ud83d\udd17 Filtrado por item relacionado:",a,"archivos:",e.length)),j&&(e=v(j),console.log("\ud83d\udd0d Filtrado por b\xfasqueda:",j,"archivos:",e.length)),console.log("\u2705 Archivos finales filtrados:",e.length),e.sort((e,t)=>new Date(t.uploadDate)-new Date(e.uploadDate))},[d,n,_,a,j,o,m,g,v]),L=(0,t.useMemo)(()=>b(),[b]),F=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?w(!0):"dragleave"===e.type&&w(!1)},B=async e=>{D(Array.from(e)),A(!0)},z=e=>{const t=document.createElement("a");t.href=e.content,t.download=e.fileName,document.body.appendChild(t),t.click(),document.body.removeChild(t)},U=e=>{const t=e.mimeType||e.type||"";t.startsWith("image/")||"application/pdf"===t?window.open(e.content,"_blank"):z(e)},q=e=>{const t=e.mimeType||e.type||"";return t.startsWith("image/")?"\ud83d\uddbc\ufe0f":"application/pdf"===t?"\ud83d\udcc4":t.includes("word")?"\ud83d\udcdd":t.includes("excel")?"\ud83d\udcca":"\ud83d\udcce"},W=e=>{const t=e.type||"";return t.startsWith("image/")?"\ud83d\uddbc\ufe0f":"application/pdf"===t?"\ud83d\udcc4":t.includes("word")?"\ud83d\udcdd":t.includes("excel")?"\ud83d\udcca":"\ud83d\udcce"},H=e=>{const t=e.mimeType||e.type||"";return t.startsWith("image/")?"from-pink-500 to-rose-500":"application/pdf"===t?"from-red-500 to-pink-500":t.includes("word")?"from-blue-500 to-indigo-500":t.includes("excel")?"from-green-500 to-emerald-500":"from-gray-500 to-slate-500"},V=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},G=[{id:"purchase-order",name:"\xd3rdenes de Compra",icon:"\ud83d\uded2",color:"bg-blue-100 text-blue-800"},{id:"invoice",name:"Facturas",icon:"\ud83e\uddfe",color:"bg-green-100 text-green-800"},{id:"advance",name:"Anticipos",icon:"\ud83d\udcb0",color:"bg-yellow-100 text-yellow-800"},{id:"contract",name:"Contratos",icon:"\ud83d\udccb",color:"bg-purple-100 text-purple-800"},{id:"risk-evidence",name:"Evidencia de Riesgos",icon:"\ud83d\udee1\ufe0f",color:"bg-red-100 text-red-800"},{id:"general",name:"General",icon:"\ud83d\udcc1",color:"bg-gray-100 text-gray-800"}],K=G.find(e=>e.id===_);return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl text-white",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcce"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:l}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:o?"Archivos relacionados con este contexto":"Gesti\xf3n completa de documentos del proyecto"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:L.totalFiles}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"archivos"})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsxs)("div",{className:"text-lg font-semibold text-gray-800",children:[L.totalSizeMB,"MB"]}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:"total"})]}),T&&(0,At.jsxs)("button",{onClick:()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,At.jsx)("span",{className:"mr-2",children:"\ud83d\udce4"}),"Subir Archivos"]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,At.jsx)("div",{className:"lg:col-span-2",children:(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,At.jsx)("span",{className:"text-gray-400",children:"\ud83d\udd0d"})}),(0,At.jsx)("input",{type:"text",placeholder:"Buscar archivos por nombre, descripci\xf3n o categor\xeda...",value:j,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm transition-all duration-200"})]})}),"general"===n&&(0,At.jsx)("div",{children:(0,At.jsx)("select",{value:_,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm transition-all duration-200",children:G.map(e=>(0,At.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))})})]}),K&&(0,At.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,At.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(K.color),children:[K.icon," ",K.name]}),(0,At.jsxs)("span",{className:"text-sm text-gray-500",children:[R.length," archivo",1!==R.length?"s":""," encontrado",1!==R.length?"s":""]})]})]}),!c.canEdit&&i&&(0,At.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-6 text-center",children:(0,At.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-orange-700",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udc40"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"font-medium text-lg",children:"Modo Solo Lectura"}),(0,At.jsx)("p",{className:"text-sm text-orange-600",children:"Puedes visualizar y descargar archivos, pero no subir nuevos"})]})]})}),T&&(0,At.jsx)("div",{className:"border-2 border-dashed rounded-xl p-12 text-center transition-all duration-300 ".concat(y?"border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 scale-105":"border-gray-300 hover:border-blue-400 hover:bg-gradient-to-r hover:from-gray-50 hover:to-blue-50"),onDragEnter:F,onDragLeave:F,onDragOver:F,onDrop:e=>{e.preventDefault(),e.stopPropagation(),w(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&B(e.dataTransfer.files)},children:(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("div",{className:"text-6xl",children:"\ud83d\udcc1"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:"Arrastra archivos aqu\xed"}),(0,At.jsx)("div",{className:"text-lg text-gray-600",children:"o haz clic para seleccionar"})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500 max-w-md mx-auto",children:["Tipos permitidos: PDF, JPG, PNG, DOC, DOCX, XLS, XLSX",(0,At.jsx)("br",{}),"Tama\xf1o m\xe1ximo: ",x.maxFileSize/1048576,"MB por archivo"]}),(0,At.jsx)("button",{onClick:()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.click()},className:"px-8 py-4 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-xl hover:from-gray-200 hover:to-gray-300 transition-all duration-200 font-medium shadow-sm hover:shadow-md",children:"Seleccionar Archivos"})]})}),R.length>0&&(0,At.jsx)("div",{className:"flex items-center justify-between",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"Vista:"}),(0,At.jsx)("button",{onClick:()=>I("grid"),className:"p-2 rounded-lg transition-colors ".concat("grid"===O?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),children:"\u2b1b\u2b1b"}),(0,At.jsx)("button",{onClick:()=>I("list"),className:"p-2 rounded-lg transition-colors ".concat("list"===O?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),children:"\u2630"})]})}),R.length>0?(0,At.jsx)("div",{className:"space-y-4",children:"grid"===O?(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:R.map(e=>(0,At.jsxs)("div",{className:"group bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-200 hover:-translate-y-1",children:[(0,At.jsx)("div",{className:"p-4 bg-gradient-to-r ".concat(H(e)," rounded-t-xl text-white"),children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-2xl",children:q(e)}),(0,At.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,At.jsx)("button",{onClick:()=>p(e.id),className:"p-1 bg-white bg-opacity-20 rounded hover:bg-opacity-30 transition-colors",title:"Eliminar",children:"\ud83d\uddd1\ufe0f"})})]})}),(0,At.jsxs)("div",{className:"p-4",children:[(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold text-gray-900 truncate",title:e.fileName,children:e.fileName}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:V(e.fileSize)})]}),e.description&&(0,At.jsx)("div",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,At.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.uploadDate).toLocaleDateString()})]}),(0,At.jsxs)("div",{className:"mt-4 flex items-center justify-between opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,At.jsx)("button",{onClick:()=>U(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Vista previa",children:"\ud83d\udc41\ufe0f"}),(0,At.jsx)("button",{onClick:()=>z(e),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Descargar",children:"\u2b07\ufe0f"})]})]})]},e.id))}):(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archivo"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tama\xf1o"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,At.jsx)("tbody",{className:"divide-y divide-gray-100",children:R.map(e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-r ".concat(H(e)," text-white"),children:q(e)}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:e.fileName}),e.description&&(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),(0,At.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:V(e.fileSize)}),(0,At.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.uploadDate).toLocaleDateString()}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("button",{onClick:()=>U(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Vista previa",children:"\ud83d\udc41\ufe0f"}),(0,At.jsx)("button",{onClick:()=>z(e),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Descargar",children:"\u2b07\ufe0f"}),(0,At.jsx)("button",{onClick:()=>p(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id))})]})})})}):(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[(0,At.jsx)("div",{className:"text-6xl mb-6",children:"\ud83d\udcc1"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:"No hay archivos"}),(0,At.jsx)("div",{className:"text-gray-500 max-w-md mx-auto",children:j?"No se encontraron archivos con esa b\xfasqueda":"Sube tu primer archivo para comenzar"})]})]}),(0,At.jsx)("input",{ref:M,type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",onChange:e=>{e.target.files&&e.target.files[0]&&B(e.target.files)},className:"hidden"}),k&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"\ud83d\udce4 Subir Archivos"}),(0,At.jsx)("button",{onClick:()=>{A(!1),D([]),C("")},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcc2 Categor\xeda"}),(0,At.jsx)("select",{value:_,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:G.map(e=>(0,At.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcdd Descripci\xf3n (opcional)"}),(0,At.jsx)("textarea",{value:E,onChange:e=>C(e.target.value),placeholder:"Describe brevemente estos archivos...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors resize-none",rows:"3"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\ud83d\udcce Archivos seleccionados (",P.length,")"]}),(0,At.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-2",children:P.map((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-lg",children:W(e)}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]}),(0,At.jsx)("span",{className:"text-xs text-gray-500",children:V(e.size)})]},t))})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-8",children:[(0,At.jsx)("button",{onClick:()=>{A(!1),D([]),C("")},className:"px-6 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-colors font-medium",children:"Cancelar"}),(0,At.jsx)("button",{onClick:async()=>{try{for(const e of P)await f(e,_,a,E);A(!1),D([]),C(""),s&&s()}catch(h){console.error("Error uploading files:",h)}},disabled:u,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none",children:u?(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"animate-spin mr-2",children:"\u23f3"}),"Subiendo..."]}):(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"mr-2",children:"\ud83d\udce4"}),"Subir Archivos"]})})]})]})})}),h&&(0,At.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl p-4",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-red-600 text-lg",children:"\u274c"}),(0,At.jsx)("span",{className:"text-red-800 font-medium",children:h})]})})]})},ZH=e=>{let{error:t}=e;return t?(0,At.jsx)("p",{className:"text-red-500 text-xs mt-1",children:t}):null},QH=e=>{var r,n;let{projects:a,currentProjectId:i,setCurrentProjectId:o,portfolioMetrics:l,workPackages:c,risks:d,globalResources:u,setGlobalResources:h,tasksByProject:f,createProject:p,updateProject:m,deleteProject:g,duplicateProject:v,archiveProject:b,includeWeekendsByProject:x,setIncludeWeekendsByProject:y,getCurrentProjectIncludeWeekends:w}=e;const[j,N]=(0,t.useState)(!1),[_,S]=(0,t.useState)(null),[k,A]=(0,t.useState)(!1),[E,C]=(0,t.useState)(null),[T,P]=(0,t.useState)({}),{permissions:D,isReadOnly:O,isLoading:I}=Ot(),M=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},R=e=>{switch(e){case"active":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"on-hold":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=e=>{switch(e){case"active":return"\ud83d\udd04";case"completed":return"\u2705";case"on-hold":default:return"\u23f8\ufe0f";case"cancelled":return"\u274c"}},F=(e,t)=>{C(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))},B=(e,t)=>{const r=Object.assign({},T);switch(e){case"name":!t||t.trim().length<3?r.name="El nombre debe tener al menos 3 caracteres":delete r.name;break;case"manager":!t||t.trim().length<2?r.manager="El manager debe tener al menos 2 caracteres":delete r.manager;break;case"sponsor":!t||t.trim().length<2?r.sponsor="El sponsor debe tener al menos 2 caracteres":delete r.sponsor;break;case"startDate":t?delete r.startDate:r.startDate="La fecha de inicio es requerida";break;case"endDate":t?null!==E&&void 0!==E&&E.startDate&&t<=E.startDate?r.endDate="La fecha de fin debe ser posterior a la fecha de inicio":delete r.endDate:r.endDate="La fecha de fin es requerida";break;case"budget":!t||t<=0?r.budget="El presupuesto debe ser mayor a 0":delete r.budget;break;case"irr":t&&(t<0||t>100)?r.irr="La TIR debe estar entre 0% y 100%":delete r.irr}return P(r),0===Object.keys(r).length},z=()=>{C({id:"",name:"",description:"",status:"inactive",priority:"medium",startDate:(new Date).toISOString().split("T")[0],endDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],budget:1e5,contingencyReserve:1e4,managementReserve:5e3,manager:"",sponsor:"",objective:"",businessCase:"",irr:0,roi:0,kickoffDate:"",stakeholders:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:"1.0.0"}),P({}),A(!0)},U=(0,t.useMemo)(()=>{if(!a||0===a.length)return{totalProjects:0,activeProjects:0,completedProjects:0,totalBudget:0,averageProgress:0,totalWorkPackages:0,totalRisks:0,activeRisks:0};const e=a.length,t=a.filter(e=>"active"===e.status).length,r=a.filter(e=>"completed"===e.status).length,n=a.filter(e=>"active"===e.status),s=n.reduce((e,t)=>e+(t.budget||0),0),i=n.length>0?n.reduce((e,t)=>e+(t.progress||0),0)/n.length:0,o=c?c.length:0,l=d?d.length:0,u=d?d.filter(e=>"active"===e.status).length:0;return{totalProjects:e,activeProjects:t,completedProjects:r,totalBudget:s,averageProgress:Math.round(i),totalWorkPackages:o,totalRisks:l,activeRisks:u}},[a,c,d]),q=l||U;return(0,At.jsxs)("div",{className:"space-y-6 max-w-full overflow-hidden",children:[(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"text-blue-600 text-xl mr-3",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{className:"text-blue-800",children:[(0,At.jsx)("strong",{children:"Nota:"}),' Las m\xe9tricas financieras y KPIs solo consideran proyectos con estado "Activo". Los proyectos "Inactivos" o "Completados" no influyen en los indicadores financieros.']})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Total Proyectos"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:q.totalProjects})]}),(0,At.jsx)("div",{className:"text-blue-500 text-2xl",children:"\ud83d\udcca"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Proyectos Activos"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:q.activeProjects})]}),(0,At.jsx)("div",{className:"text-green-500 text-2xl",children:"\ud83d\udd04"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Completados"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:q.completedProjects})]}),(0,At.jsx)("div",{className:"text-purple-500 text-2xl",children:"\u2705"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-indigo-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Presupuesto Proyectos Activos"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",(q.totalBudget/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-indigo-500 text-2xl",children:"\ud83d\udcb0"})]})})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Acciones del Portfolio"}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[D.canEdit&&(0,At.jsxs)("button",{onClick:z,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\u2795"}),(0,At.jsx)("span",{children:"Nuevo Proyecto"})]}),O()&&(0,At.jsxs)("div",{className:"text-sm text-gray-500 italic bg-gray-50 px-3 py-2 rounded-lg border",children:[(0,At.jsx)("span",{children:"\ud83d\udc40"})," Modo solo lectura"]})]})]})}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Proyectos del Portfolio"}),0===a.length?(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc1"}),(0,At.jsx)("div",{children:"No hay proyectos en el portfolio"}),(0,At.jsx)("button",{onClick:z,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Crear Primer Proyecto"})]}):(0,At.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,At.jsx)("div",{className:"border rounded-lg p-4 transition-all duration-200 cursor-pointer hover:shadow-md ".concat(i===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>o(e.id),children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(M(e.priority)),children:e.priority}),(0,At.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(R(e.status)),children:[L(e.status)," ",e.status]})]}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,At.jsxs)("span",{children:["\ud83d\udcc5 ",e.startDate," - ",e.endDate]}),(0,At.jsxs)("span",{children:["\ud83d\udcb0 $",(e.budget/1e3).toFixed(0),"K"]}),(0,At.jsxs)("span",{children:["\ud83d\udc64 ",e.manager]})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e),N(!0)},className:"p-2 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded transition-colors",title:"Ver archivos del proyecto",children:"\ud83d\udcce"}),(0,At.jsx)("button",{onClick:t=>{t.stopPropagation(),v(e.id)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Duplicar proyecto",children:"\ud83d\udccb"}),(0,At.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{console.log("\ud83d\udd0d Proyecto original para editar:",e),console.log("\ud83d\udd0d Estado del proyecto original:",e.status);const t=(0,s.A)((0,s.A)({},e),{},{description:e.description||"",objective:e.objective||"",businessCase:e.businessCase||"",kickoffDate:e.kickoffDate||"",stakeholders:e.stakeholders||[]});console.log("\ud83d\udd0d Proyecto preparado para editar:",t),console.log("\ud83d\udd0d Estado del proyecto preparado:",t.status),C(t),P({}),A(!0)})(e)},className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded",title:"Editar proyecto",children:"\u270f\ufe0f"}),(0,At.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm('\xbfArchivar proyecto "'.concat(e.name,'"? Se mover\xe1 al archivo y se limpiar\xe1n sus datos del sistema activo.'))&&b(e.id)},className:"p-2 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded",title:"Archivar proyecto",children:"\ud83d\udcc1"}),(0,At.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm('\xbfEliminar proyecto "'.concat(e.name,'"? Esta acci\xf3n no se puede deshacer.'))&&g(e.id)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Eliminar proyecto",children:"\ud83d\uddd1\ufe0f"})]})]})},e.id))})]}),i&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"M\xe9tricas del Proyecto Actual"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===l||void 0===l||null===(r=l.currentProjectCPI)||void 0===r?void 0:r.toFixed(2))||"N/A"}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"CPI"})]}),(0,At.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===l||void 0===l||null===(n=l.currentProjectSPI)||void 0===n?void 0:n.toFixed(2))||"N/A"}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"SPI"})]}),(0,At.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",((null===l||void 0===l?void 0:l.currentProjectCV)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"CV"})]}),(0,At.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",((null===l||void 0===l?void 0:l.currentProjectSV)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"SV"})]})]})]}),(0,At.jsx)(Ut,{projects:a,portfolioMetrics:l}),(0,At.jsx)(zt,{projects:a,portfolioMetrics:l,workPackages:c,risks:d,tasksByProject:f,includeWeekendsByProject:x,setIncludeWeekendsByProject:y,getCurrentProjectIncludeWeekends:w}),j&&_&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl text-white",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcce"})}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["Archivos del Proyecto: ",_.name]}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Gesti\xf3n completa de documentos y archivos adjuntos"})]})]}),(0,At.jsx)("button",{onClick:()=>{N(!1),S(null)},className:"px-4 py-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-sm hover:shadow-md",children:"\u2715 Cerrar"})]}),(0,At.jsx)(JH,{projectId:_.id,category:"general",isContextual:!0,title:"\ud83d\udcce Archivos de ".concat(_.name),onFileUploaded:()=>{}})]}),k&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,At.jsx)("h2",{className:"text-xl font-bold",children:null!==E&&void 0!==E&&E.id?"Editar Proyecto":"Nuevo Proyecto"}),(0,At.jsx)("button",{onClick:()=>{A(!1),C(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Proyecto *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 ".concat(T.name?"border-red-500":"border-gray-300"),value:(null===E||void 0===E?void 0:E.name)||"",onChange:e=>{C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,name:e.target.value}),B("name",e.target.value)},onBlur:e=>B("name",e.target.value),placeholder:"Nombre del proyecto"}),(0,At.jsx)(ZH,{error:T.name})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 ".concat(T.manager?"border-red-500":"border-gray-300"),value:(null===E||void 0===E?void 0:E.manager)||"",onChange:e=>{C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,manager:e.target.value}),B("manager",e.target.value)},onBlur:e=>B("manager",e.target.value),placeholder:"Gerente del proyecto"}),(0,At.jsx)(ZH,{error:T.manager})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sponsor *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 ".concat(T.sponsor?"border-red-500":"border-gray-300"),value:(null===E||void 0===E?void 0:E.sponsor)||"",onChange:e=>{F("sponsor",e.target.value),B("sponsor",e.target.value)},onBlur:e=>B("sponsor",e.target.value),placeholder:"Patrocinador del proyecto"}),(0,At.jsx)(ZH,{error:T.sponsor})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),(0,At.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:(null===E||void 0===E?void 0:E.priority)||"medium",onChange:e=>C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,priority:e.target.value}),children:[(0,At.jsx)("option",{value:"low",children:"Baja"}),(0,At.jsx)("option",{value:"medium",children:"Media"}),(0,At.jsx)("option",{value:"high",children:"Alta"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado del Proyecto *"}),(0,At.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:(null===E||void 0===E?void 0:E.status)||"inactive",onChange:e=>C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,status:e.target.value}),children:[(0,At.jsx)("option",{value:"inactive",children:"\u26ab Inactivo"}),(0,At.jsx)("option",{value:"active",children:"\ud83d\udfe2 Activo"})]}),(0,At.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,At.jsx)("strong",{children:"Por defecto:"}),' Los proyectos nuevos y duplicados aparecen como "Inactivos" para revisi\xf3n. Solo los proyectos "Activos" suman al dashboard consolidado y aparecen en Gesti\xf3n de Proyectos.']})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Inicio *"}),(0,At.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2 ".concat(T.startDate?"border-red-500":"border-gray-300"),value:(null===E||void 0===E?void 0:E.startDate)||"",onChange:e=>{C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,startDate:e.target.value}),B("startDate",e.target.value),null!==E&&void 0!==E&&E.endDate&&B("endDate",E.endDate)},onBlur:e=>B("startDate",e.target.value)}),(0,At.jsx)(ZH,{error:T.startDate})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Fin *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 ".concat(T.endDate?"border-red-500":"border-gray-300"),value:(null===E||void 0===E?void 0:E.endDate)||"",onChange:e=>{C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,endDate:e.target.value}),B("endDate",e.target.value)},onBlur:e=>B("endDate",e.target.value),placeholder:"YYYY-MM-DD"}),(0,At.jsx)(ZH,{error:T.endDate})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Presupuesto (USD) *"}),(0,At.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2 ".concat(T.budget?"border-red-500":"border-gray-300"),value:(null===E||void 0===E?void 0:E.budget)||"",onChange:e=>{const t=e.target.value;if(""===t||/^\d+$/.test(t)){const e=""===t?"":Number(t);C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,budget:e}),B("budget",e)}},onBlur:e=>{const t=""===e.target.value?"":Number(e.target.value);B("budget",t)},placeholder:"Presupuesto en USD (ej: 100000)",min:"0"}),(0,At.jsx)(ZH,{error:T.budget})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TIR (%)"}),(0,At.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2 ".concat(T.irr?"border-red-500":"border-gray-300"),value:(null===E||void 0===E?void 0:E.irr)||"",onChange:e=>{const t=e.target.value;if(""===t||/^\d*\.?\d*$/.test(t)){const e=""===t?"":Number(t);F("irr",e),B("irr",e)}},onBlur:e=>{const t=""===e.target.value?"":Number(e.target.value);B("irr",t)},placeholder:"Tasa Interna de Retorno (ej: 15.5)",min:"0",max:"100",step:"0.01"}),(0,At.jsx)(ZH,{error:T.irr})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===E||void 0===E?void 0:E.description)||"",onChange:e=>C({id:E.id,name:E.name,manager:E.manager,sponsor:E.sponsor,priority:E.priority,status:E.status,startDate:E.startDate,endDate:E.endDate,budget:E.budget,irr:E.irr,description:E.description,objectives:E.objectives,scope:E.scope,deliverables:E.deliverables,assumptions:E.assumptions,constraints:E.constraints,dependencies:E.dependencies,risks:E.risks,stakeholders:E.stakeholders,team:E.team,resources:E.resources,timeline:E.timeline,milestones:E.milestones,successCriteria:E.successCriteria,qualityStandards:E.qualityStandards,communicationPlan:E.communicationPlan,riskManagement:E.riskManagement,changeManagement:E.changeManagement,lessonsLearned:E.lessonsLearned,createdAt:E.createdAt,updatedAt:E.updatedAt,version:E.version,progress:E.progress,description:e.target.value}),placeholder:"Descripci\xf3n detallada del proyecto"})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objetivo del Proyecto"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===E||void 0===E?void 0:E.objective)||"",onChange:e=>F("objective",e.target.value),placeholder:"\xbfQu\xe9 se busca lograr con este proyecto?"})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caso de Negocio"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===E||void 0===E?void 0:E.businessCase)||"",onChange:e=>F("businessCase",e.target.value),placeholder:"Justificaci\xf3n del proyecto desde el punto de vista del negocio"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>{A(!1),C(null)},className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,At.jsxs)("button",{onClick:()=>{P({});const e={};if((!E.name||E.name.trim().length<3)&&(e.name="El nombre debe tener al menos 3 caracteres"),(!E.manager||E.manager.trim().length<2)&&(e.manager="El manager debe tener al menos 2 caracteres"),(!E.sponsor||E.sponsor.trim().length<2)&&(e.sponsor="El sponsor debe tener al menos 2 caracteres"),E.startDate||(e.startDate="La fecha de inicio es requerida"),E.endDate?E.startDate&&E.endDate<=E.startDate&&(e.endDate="La fecha de fin debe ser posterior a la fecha de inicio"):e.endDate="La fecha de fin es requerida",(!E.budget||E.budget<=0)&&(e.budget="El presupuesto debe ser mayor a 0"),E.irr&&(E.irr<0||E.irr>100)&&(e.irr="La TIR debe estar entre 0% y 100%"),Object.keys(e).length>0)return P(e),void alert("\u274c No se puede guardar el proyecto. Hay ".concat(Object.keys(e).length," errores de validaci\xf3n."));try{E.id?(m(E.id,E),alert("\u2705 Proyecto actualizado exitosamente")):(p(E),alert("\u2705 Proyecto creado exitosamente")),A(!1),C(null),P({})}catch(t){alert("\u274c Error al guardar el proyecto: ".concat(t.message))}},disabled:Object.keys(T).length>0,className:"px-4 py-2 rounded transition-colors ".concat(Object.keys(T).length>0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:["Guardar Proyecto ",Object.keys(T).length>0&&"(".concat(Object.keys(T).length," errores)")]})]})]})})})]})},eV=e=>{let{globalResources:r,setGlobalResources:n}=e;const[a,s]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(""),[h,f]=(0,t.useState)("all"),[p,m]=(0,t.useState)("all"),[g,v]=(0,t.useState)({name:"",role:"",skills:"",availability:100,hourlyRate:0,status:"active",email:"",phone:"",department:"",experience:"",certifications:"",notes:""}),b=(0,t.useMemo)(()=>r.filter(e=>{const t=!d||e.name.toLowerCase().includes(d.toLowerCase())||e.role.toLowerCase().includes(d.toLowerCase())||e.email&&e.email.toLowerCase().includes(d.toLowerCase()),r="all"===h||e.role===h,n="all"===p||e.status===p;return t&&r&&n}),[r,d,h,p]),x=(0,t.useMemo)(()=>{const e=r.map(e=>e.role);return Array.from(new Set(e))},[r]),y=(0,t.useMemo)(()=>{const e=r.length,t=r.filter(e=>"active"===e.status).length,n=r.filter(e=>"inactive"===e.status).length,a=r.filter(e=>"on-leave"===e.status).length,s=r.reduce((e,t)=>e+160*t.availability*t.hourlyRate,0);return{totalResources:e,activeResources:t,inactiveResources:n,onLeaveResources:a,totalCost:s}},[r]),w=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"on-leave":return"bg-yellow-100 text-yellow-800";case"terminated":return"bg-red-100 text-red-800"}},j=e=>{switch(e){case"active":return"\u2705";case"inactive":default:return"\u23f8\ufe0f";case"on-leave":return"\ud83c\udfd6\ufe0f";case"terminated":return"\u274c"}};return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center mb-6",children:[(0,At.jsx)("div",{className:"bg-blue-100 rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udc65"})}),(0,At.jsx)("div",{children:(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Gesti\xf3n global de recursos humanos del portafolio"})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udc65"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Total Recursos"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:y.totalResources})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\u2705"}),(0,At.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Activos"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:y.activeResources})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\u23f8\ufe0f"}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Inactivos"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:y.inactiveResources})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-yellow-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83c\udfd6\ufe0f"}),(0,At.jsx)("span",{className:"text-sm font-medium text-yellow-600",children:"En Licencia"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:y.onLeaveResources})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-purple-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udcb0"}),(0,At.jsx)("span",{className:"text-sm font-medium text-purple-600",children:"Costo Mensual"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",(y.totalCost/1e3).toFixed(0),"K"]})]})]}),(0,At.jsx)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:(0,At.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,At.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,At.jsx)("input",{type:"text",placeholder:"Buscar recursos...",value:d,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,At.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"all",children:"Todos los roles"}),x.map(e=>(0,At.jsx)("option",{value:e,children:e},e))]}),(0,At.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"all",children:"Todos los estados"}),(0,At.jsx)("option",{value:"active",children:"Activo"}),(0,At.jsx)("option",{value:"inactive",children:"Inactivo"}),(0,At.jsx)("option",{value:"on-leave",children:"En licencia"}),(0,At.jsx)("option",{value:"terminated",children:"Terminado"})]})]}),(0,At.jsx)("div",{className:"flex space-x-2",children:(0,At.jsxs)("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\u2795"}),(0,At.jsx)("span",{children:"Agregar Recurso"})]})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200",children:(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recurso"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Disponibilidad"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Costo/Hora"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===b.length?(0,At.jsx)("tr",{children:(0,At.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:(0,At.jsxs)("div",{className:"flex flex-col items-center",children:[(0,At.jsx)("span",{className:"text-4xl mb-2",children:"\ud83d\udc65"}),(0,At.jsx)("p",{className:"text-lg font-medium",children:"No hay recursos registrados"}),(0,At.jsx)("p",{className:"text-sm",children:"Agrega tu primer recurso para comenzar"})]})})}):b.map(e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,At.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-sm font-medium text-blue-700",children:e.name.split(" ").map(e=>e[0]).join("")})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.email||"Sin email"})]})]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.role})}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.availability,"%"]}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.hourlyRate,"/h"]}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(w(e.status)),children:[j(e.status)," ","active"===e.status?"Activo":"inactive"===e.status?"Inactivo":"on-leave"===e.status?"Licencia":"Terminado"]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:()=>(e=>{c(Object.assign({},e,{skills:Array.isArray(e.skills)?e.skills.join(", "):e.skills,certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications})),o(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"Editar recurso",children:"\u270f\ufe0f"}),(0,At.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este recurso?")&&n(e=>e.filter(e=>e.id!==t)));var t},className:"text-red-600 hover:text-red-900",title:"Eliminar recurso",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id))})]})})}),a&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Agregar Nuevo Recurso"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre *"}),(0,At.jsx)("input",{type:"text",value:g.name,onChange:e=>v({id:g.id,name:g.name,role:g.role,email:g.email,skills:g.skills,availability:g.availability,hourlyRate:g.hourlyRate,status:g.status,projectId:g.projectId,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nombre completo"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rol *"}),(0,At.jsx)("input",{type:"text",value:g.role,onChange:e=>v({id:g.id,name:g.name,role:g.role,email:g.email,skills:g.skills,availability:g.availability,hourlyRate:g.hourlyRate,status:g.status,projectId:g.projectId,role:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Project Manager, Desarrollador, etc."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,At.jsx)("input",{type:"email",value:g.email,onChange:e=>v({id:g.id,name:g.name,role:g.role,email:g.email,skills:g.skills,availability:g.availability,hourlyRate:g.hourlyRate,status:g.status,projectId:g.projectId,email:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@empresa.com"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Habilidades (separadas por comas)"}),(0,At.jsx)("input",{type:"text",value:g.skills,onChange:e=>v({id:g.id,name:g.name,role:g.role,email:g.email,skills:g.skills,availability:g.availability,hourlyRate:g.hourlyRate,status:g.status,projectId:g.projectId,skills:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"React, JavaScript, PMBOK, etc."})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Disponibilidad (%)"}),(0,At.jsx)("input",{type:"number",min:"0",max:"100",value:g.availability,onChange:e=>v({id:g.id,name:g.name,role:g.role,email:g.email,skills:g.skills,availability:g.availability,hourlyRate:g.hourlyRate,status:g.status,projectId:g.projectId,availability:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Costo por Hora ($)"}),(0,At.jsx)("input",{type:"number",min:"0",value:g.hourlyRate,onChange:e=>v({id:g.id,name:g.name,role:g.role,email:g.email,skills:g.skills,availability:g.availability,hourlyRate:g.hourlyRate,status:g.status,projectId:g.projectId,hourlyRate:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),(0,At.jsxs)("select",{value:g.status,onChange:e=>v({id:g.id,name:g.name,role:g.role,email:g.email,skills:g.skills,availability:g.availability,hourlyRate:g.hourlyRate,status:g.status,projectId:g.projectId,status:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"active",children:"Activo"}),(0,At.jsx)("option",{value:"inactive",children:"Inactivo"}),(0,At.jsx)("option",{value:"on-leave",children:"En licencia"}),(0,At.jsx)("option",{value:"terminated",children:"Terminado"})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{if(!g.name||!g.role)return;const e={id:"res-"+String(Date.now()).slice(-6),name:g.name,role:g.role,skills:g.skills.split(",").map(e=>e.trim()).filter(e=>e),experience:g.experience,certifications:g.certifications?g.certifications.split(",").map(e=>e.trim()).filter(e=>e):[],notes:g.notes};console.log("\u2795 Agregando nuevo recurso:",e),console.log("\u2795 Recursos actuales antes de agregar:",r),n(t=>{const r=t.slice();return r.push(e),console.log("\u2795 Nuevos recursos despu\xe9s de agregar:",r),r}),s(!1),v({name:"",role:"",skills:"",availability:100,hourlyRate:0,status:"active",email:"",phone:"",department:"",experience:"",certifications:"",notes:""})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Agregar"})]})]})})}),i&&l&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Editar Recurso"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre *"}),(0,At.jsx)("input",{type:"text",value:l.name,onChange:e=>c({id:l.id,name:l.name,role:l.role,email:l.email,skills:l.skills,availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,projectId:l.projectId,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rol *"}),(0,At.jsx)("input",{type:"text",value:l.role,onChange:e=>c({id:l.id,name:l.name,role:l.role,email:l.email,skills:l.skills,availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,projectId:l.projectId,role:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,At.jsx)("input",{type:"email",value:l.email,onChange:e=>c({id:l.id,name:l.name,role:l.role,email:l.email,skills:l.skills,availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,projectId:l.projectId,email:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Habilidades (separadas por comas)"}),(0,At.jsx)("input",{type:"text",value:l.skills,onChange:e=>c({id:l.id,name:l.name,role:l.role,email:l.email,skills:l.skills,availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,projectId:l.projectId,skills:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Disponibilidad (%)"}),(0,At.jsx)("input",{type:"number",min:"0",max:"100",value:l.availability,onChange:e=>c({id:l.id,name:l.name,role:l.role,email:l.email,skills:l.skills,availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,projectId:l.projectId,availability:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Costo por Hora ($)"}),(0,At.jsx)("input",{type:"number",min:"0",value:l.hourlyRate,onChange:e=>c({id:l.id,name:l.name,role:l.role,email:l.email,skills:l.skills,availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,projectId:l.projectId,hourlyRate:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),(0,At.jsxs)("select",{value:l.status,onChange:e=>c({id:l.id,name:l.name,role:l.role,email:l.email,skills:l.skills,availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,projectId:l.projectId,status:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"active",children:"Activo"}),(0,At.jsx)("option",{value:"inactive",children:"Inactivo"}),(0,At.jsx)("option",{value:"on-leave",children:"En licencia"}),(0,At.jsx)("option",{value:"terminated",children:"Terminado"})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>{o(!1),c(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{l&&(n(e=>e.map(e=>e.id===l.id?Object.assign({},e,{name:l.name,role:l.role,skills:l.skills.split(",").map(e=>e.trim()).filter(e=>e),availability:l.availability,hourlyRate:l.hourlyRate,status:l.status,email:l.email||e.email,phone:l.phone||e.phone,department:l.department||e.department,experience:l.experience||e.experience,certifications:l.certifications?l.certifications.split(",").map(e=>e.trim()).filter(e=>e):e.certifications,notes:l.notes||e.notes}):e)),o(!1),c(null))},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Guardar Cambios"})]})]})})})]})},tV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rV=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},nV=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var aV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sV=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],iV=(0,t.forwardRef)((e,r)=>{let{color:n="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u}=e,h=i(e,sV);return(0,t.createElement)("svg",(0,s.A)((0,s.A)((0,s.A)({ref:r},aV),{},{width:a,height:a,stroke:n,strokeWidth:l?24*Number(o)/Number(a):o,className:nV("lucide",c)},!d&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...u.map(e=>{let[r,n]=e;return(0,t.createElement)(r,n)}),...Array.isArray(d)?d:[d]])}),oV=["className"],lV=(e,r)=>{const n=(0,t.forwardRef)((n,a)=>{let{className:o}=n,l=i(n,oV);return(0,t.createElement)(iV,(0,s.A)({ref:a,iconNode:r,className:nV("lucide-".concat(tV(rV(e))),"lucide-".concat(e),o)},l))});return n.displayName=rV(e),n},cV=lV("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),dV=lV("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),uV=lV("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),hV=lV("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),fV=lV("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),pV=lV("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),mV=lV("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var gV=r(2284),vV=Uint8Array,bV=Uint16Array,xV=Int32Array,yV=new vV([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wV=new vV([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jV=new vV([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NV=function(e,t){for(var r=new bV(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var a=new xV(r[30]);for(n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},_V=NV(yV,2),SV=_V.b,kV=_V.r;SV[28]=258,kV[258]=28;for(var AV=NV(wV,0),EV=(AV.b,AV.r),CV=new bV(32768),TV=0;TV<32768;++TV){var PV=(43690&TV)>>1|(21845&TV)<<1;PV=(61680&(PV=(52428&PV)>>2|(13107&PV)<<2))>>4|(3855&PV)<<4,CV[TV]=((65280&PV)>>8|(255&PV)<<8)>>1}var DV=function(e,t,r){for(var n=e.length,a=0,s=new bV(t);a<n;++a)e[a]&&++s[e[a]-1];var i,o=new bV(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(r){i=new bV(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],u=o[e[a]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)i[CV[u]>>l]=c}else for(i=new bV(n),a=0;a<n;++a)e[a]&&(i[a]=CV[o[e[a]-1]++]>>15-e[a]);return i},OV=new vV(288);for(TV=0;TV<144;++TV)OV[TV]=8;for(TV=144;TV<256;++TV)OV[TV]=9;for(TV=256;TV<280;++TV)OV[TV]=7;for(TV=280;TV<288;++TV)OV[TV]=8;var IV=new vV(32);for(TV=0;TV<32;++TV)IV[TV]=5;var MV=DV(OV,9,0),RV=DV(IV,5,0),LV=function(e){return(e+7)/8|0},FV=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new vV(e.subarray(t,r))},BV=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},zV=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},UV=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:$V,l:0};if(1==a){var i=new vV(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,d=1,u=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[c].f<r[u].f?c++:u++],l=r[c!=d&&r[c].f<r[u].f?c++:u++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};var h=s[0].s;for(n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var f=new bV(h+1),p=qV(r[d-1],f,0);if(p>t){n=0;var m=0,g=p-t,v=1<<g;for(s.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});n<a;++n){var b=s[n].s;if(!(f[b]>t))break;m+=v-(1<<p-f[b]),f[b]=t}for(m>>=g;m>0;){var x=s[n].s;f[x]<t?m-=1<<t-f[x]++-1:++n}for(;n>=0&&m;--n){var y=s[n].s;f[y]==t&&(--f[y],++m)}p=t}return{t:new vV(f),l:p}},qV=function(e,t,r){return-1==e.s?Math.max(qV(e.l,t,r+1),qV(e.r,t,r+1)):t[e.s]=r},WV=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new bV(++t),n=0,a=e[0],s=1,i=function(e){r[n++]=e},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},HV=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},VV=function(e,t,r){var n=r.length,a=LV(t+2);e[a]=255&n,e[a+1]=n>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var s=0;s<n;++s)e[a+s+4]=r[s];return 8*(a+4+n)},GV=function(e,t,r,n,a,s,i,o,l,c,d){BV(t,d++,r),++a[256];for(var u=UV(a,15),h=u.t,f=u.l,p=UV(s,15),m=p.t,g=p.l,v=WV(h),b=v.c,x=v.n,y=WV(m),w=y.c,j=y.n,N=new bV(19),_=0;_<b.length;++_)++N[31&b[_]];for(_=0;_<w.length;++_)++N[31&w[_]];for(var S=UV(N,7),k=S.t,A=S.l,E=19;E>4&&!k[jV[E-1]];--E);var C,T,P,D,O=c+5<<3,I=HV(a,OV)+HV(s,IV)+i,M=HV(a,h)+HV(s,m)+i+14+3*E+HV(N,k)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&O<=I&&O<=M)return VV(t,d,e.subarray(l,l+c));if(BV(t,d,1+(M<I)),d+=2,M<I){C=DV(h,f,0),T=h,P=DV(m,g,0),D=m;var R=DV(k,A,0);BV(t,d,x-257),BV(t,d+5,j-1),BV(t,d+10,E-4),d+=14;for(_=0;_<E;++_)BV(t,d+3*_,k[jV[_]]);d+=3*E;for(var L=[b,w],F=0;F<2;++F){var B=L[F];for(_=0;_<B.length;++_){var z=31&B[_];BV(t,d,R[z]),d+=k[z],z>15&&(BV(t,d,B[_]>>5&127),d+=B[_]>>12)}}}else C=MV,T=OV,P=RV,D=IV;for(_=0;_<o;++_){var U=n[_];if(U>255){zV(t,d,C[(z=U>>18&31)+257]),d+=T[z+257],z>7&&(BV(t,d,U>>23&31),d+=yV[z]);var q=31&U;zV(t,d,P[q]),d+=D[q],q>3&&(zV(t,d,U>>5&8191),d+=wV[q])}else zV(t,d,C[U]),d+=T[U]}return zV(t,d,C[256]),d+T[256]},KV=new xV([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$V=new vV(0),YV=function(e,t,r,n,a,s){var i=s.z||e.length,o=new vV(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),c=s.l,d=7&(s.r||0);if(t){d&&(l[0]=s.r>>3);for(var u=KV[t-1],h=u>>13,f=8191&u,p=(1<<r)-1,m=s.p||new bV(32768),g=s.h||new bV(p+1),v=Math.ceil(r/3),b=2*v,x=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<b)&p},y=new xV(25e3),w=new bV(288),j=new bV(32),N=0,_=0,S=s.i||0,k=0,A=s.w||0,E=0;S+2<i;++S){var C=x(S),T=32767&S,P=g[C];if(m[T]=P,g[C]=T,A<=S){var D=i-S;if((N>7e3||k>24576)&&(D>423||!c)){d=GV(e,l,0,y,w,j,_,k,E,S-E,d),k=N=_=0,E=S;for(var O=0;O<286;++O)w[O]=0;for(O=0;O<30;++O)j[O]=0}var I=2,M=0,R=f,L=T-P&32767;if(D>2&&C==x(S-L))for(var F=Math.min(h,D)-1,B=Math.min(32767,S),z=Math.min(258,D);L<=B&&--R&&T!=P;){if(e[S+I]==e[S+I-L]){for(var U=0;U<z&&e[S+U]==e[S+U-L];++U);if(U>I){if(I=U,M=L,U>F)break;var q=Math.min(L,U-2),W=0;for(O=0;O<q;++O){var H=S-L+O&32767,V=H-m[H]&32767;V>W&&(W=V,P=H)}}}L+=(T=P)-(P=m[T])&32767}if(M){y[k++]=268435456|kV[I]<<18|EV[M];var G=31&kV[I],K=31&EV[M];_+=yV[G]+wV[K],++w[257+G],++j[K],A=S+I,++N}else y[k++]=e[S],++w[e[S]]}}for(S=Math.max(S,A);S<i;++S)y[k++]=e[S],++w[e[S]];d=GV(e,l,c,y,w,j,_,k,E,S-E,d),c||(s.r=7&d|l[d/8|0]<<3,d-=7,s.h=g,s.p=m,s.i=S,s.w=A)}else{for(S=s.w||0;S<i+c;S+=65535){var $=S+65535;$>=i&&(l[d/8|0]=c,$=i),d=VV(l,d+1,e.subarray(S,$))}s.i=i}return FV(o,0,n+LV(d)+a)},XV=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=0|r.length,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(65535&n)+15*(n>>16),a=(65535&a)+15*(a>>16)}e=n,t=a},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},JV=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new vV(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return YV(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,n,a)},ZV=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},QV=function(e,t){var r=t.level,n=0==r?0:r<6?1:9==r?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=XV();a.p(t.dictionary),ZV(e,2,a.d())}};function eG(e,t){t||(t={});var r=XV();r.p(e);var n=JV(e,t,t.dictionary?6:2,4);return QV(n,t),ZV(n,n.length-4,r.d()),n}var tG="undefined"!=typeof TextDecoder&&new TextDecoder;try{tG.decode($V,{stream:!0})}catch(f2){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function rG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rG(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rG(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aG(e){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(e)}const sG=new TextEncoder;const iG=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),oG={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class lG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,qt.A)(this,"buffer",void 0),(0,qt.A)(this,"byteLength",void 0),(0,qt.A)(this,"byteOffset",void 0),(0,qt.A)(this,"length",void 0),(0,qt.A)(this,"offset",void 0),(0,qt.A)(this,"lastWrittenByte",void 0),(0,qt.A)(this,"littleEndian",void 0),(0,qt.A)(this,"_data",void 0),(0,qt.A)(this,"_mark",void 0),(0,qt.A)(this,"_marks",void 0);let r=!1;"number"===typeof e?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const n=t.offset?t.offset>>>0:0,a=e.byteLength-n;let s=n;(ArrayBuffer.isView(e)||e instanceof lG)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+n),e=e.buffer),this.lastWrittenByte=r?a:0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){const t=2*(this.offset+e),r=new Uint8Array(t);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,"uint8")}readArray(e,t){const r=oG[t].BYTES_PER_ELEMENT*e,n=this.byteOffset+this.offset,a=this.buffer.slice(n,n+r);if(this.littleEndian===iG&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(n,n+r));e.reverse();const a=new oG[t](e.buffer);return this.offset+=r,a.reverse(),a}const s=new oG[t](a);return this.offset+=r,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return aG(this.readBytes(e))}decodeText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return aG(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return sG.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function cG(e){let t=e.length;for(;--t>=0;)e[t]=0}const dG=256,uG=286,hG=30,fG=15,pG=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),mG=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gG=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),vG=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bG=new Array(576);cG(bG);const xG=new Array(60);cG(xG);const yG=new Array(512);cG(yG);const wG=new Array(256);cG(wG);const jG=new Array(29);cG(jG);const NG=new Array(hG);function _G(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let SG,kG,AG;function EG(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}cG(NG);const CG=e=>e<256?yG[e]:yG[256+(e>>>7)],TG=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},PG=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,TG(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},DG=(e,t,r)=>{PG(e,r[2*t],r[2*t+1])},OG=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},IG=(e,t,r)=>{const n=new Array(16);let a,s,i=0;for(a=1;a<=fG;a++)i=i+r[a-1]<<1,n[a]=i;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=OG(n[t]++,t))}},MG=e=>{let t;for(t=0;t<uG;t++)e.dyn_ltree[2*t]=0;for(t=0;t<hG;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},RG=e=>{e.bi_valid>8?TG(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},LG=(e,t,r,n)=>{const a=2*t,s=2*r;return e[a]<e[s]||e[a]===e[s]&&n[t]<=n[r]},FG=(e,t,r)=>{const n=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&LG(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!LG(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},BG=(e,t,r)=>{let n,a,s,i,o=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+o++],n+=(255&e.pending_buf[e.sym_buf+o++])<<8,a=e.pending_buf[e.sym_buf+o++],0===n?DG(e,a,t):(s=wG[a],DG(e,s+dG+1,t),i=pG[s],0!==i&&(a-=jG[s],PG(e,a,i)),n--,s=CG(n),DG(e,s,r),i=mG[s],0!==i&&(n-=NG[s],PG(e,n,i)))}while(o<e.sym_next);DG(e,256,t)},zG=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems;let i,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<s;i++)0!==r[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,r[2*l]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=n[2*l+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)FG(e,r,i);l=s;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],FG(e,r,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,r[2*l]=r[2*i]+r[2*o],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,r[2*i+1]=r[2*o+1]=l,e.heap[1]=l++,FG(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,u,h,f,p,m=0;for(h=0;h<=fG;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],h=r[2*r[2*d+1]+1]+1,h>l&&(h=l,m++),r[2*d+1]=h,d>n||(e.bl_count[h]++,f=0,d>=o&&(f=i[d-o]),p=r[2*d],e.opt_len+=p*(h+f),s&&(e.static_len+=p*(a[2*d+1]+f)));if(0!==m){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--c],u>n||(r[2*u+1]!==h&&(e.opt_len+=(h-r[2*u+1])*r[2*u],r[2*u+1]=h),d--)}})(e,t),IG(r,c,e.bl_count)},UG=(e,t,r)=>{let n,a,s=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=i,i=t[2*(n+1)+1],++o<l&&a===i||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=a,0===i?(l=138,c=3):a===i?(l=6,c=3):(l=7,c=4))},qG=(e,t,r)=>{let n,a,s=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),n=0;n<=r;n++)if(a=i,i=t[2*(n+1)+1],!(++o<l&&a===i)){if(o<c)do{DG(e,a,e.bl_tree)}while(0!==--o);else 0!==a?(a!==s&&(DG(e,a,e.bl_tree),o--),DG(e,16,e.bl_tree),PG(e,o-3,2)):o<=10?(DG(e,17,e.bl_tree),PG(e,o-3,3)):(DG(e,18,e.bl_tree),PG(e,o-11,7));o=0,s=a,0===i?(l=138,c=3):a===i?(l=6,c=3):(l=7,c=4)}};let WG=!1;const HG=(e,t,r,n)=>{PG(e,0+(n?1:0),3),RG(e),TG(e,r),TG(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var VG=e=>{WG||((()=>{let e,t,r,n,a;const s=new Array(16);for(r=0,n=0;n<28;n++)for(jG[n]=r,e=0;e<1<<pG[n];e++)wG[r++]=n;for(wG[r-1]=n,a=0,n=0;n<16;n++)for(NG[n]=a,e=0;e<1<<mG[n];e++)yG[a++]=n;for(a>>=7;n<hG;n++)for(NG[n]=a<<7,e=0;e<1<<mG[n]-7;e++)yG[256+a++]=n;for(t=0;t<=fG;t++)s[t]=0;for(e=0;e<=143;)bG[2*e+1]=8,e++,s[8]++;for(;e<=255;)bG[2*e+1]=9,e++,s[9]++;for(;e<=279;)bG[2*e+1]=7,e++,s[7]++;for(;e<=287;)bG[2*e+1]=8,e++,s[8]++;for(IG(bG,287,s),e=0;e<hG;e++)xG[2*e+1]=5,xG[2*e]=OG(e,5);SG=new _G(bG,pG,257,uG,fG),kG=new _G(xG,mG,0,hG,fG),AG=new _G(new Array(0),gG,0,19,7)})(),WG=!0),e.l_desc=new EG(e.dyn_ltree,SG),e.d_desc=new EG(e.dyn_dtree,kG),e.bl_desc=new EG(e.bl_tree,AG),e.bi_buf=0,e.bi_valid=0,MG(e)},GG=(e,t,r,n)=>{let a,s,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<dG;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),zG(e,e.l_desc),zG(e,e.d_desc),i=(e=>{let t;for(UG(e,e.dyn_ltree,e.l_desc.max_code),UG(e,e.dyn_dtree,e.d_desc.max_code),zG(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*vG[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==t?HG(e,t,r,n):4===e.strategy||s===a?(PG(e,2+(n?1:0),3),BG(e,bG,xG)):(PG(e,4+(n?1:0),3),((e,t,r,n)=>{let a;for(PG(e,t-257,5),PG(e,r-1,5),PG(e,n-4,4),a=0;a<n;a++)PG(e,e.bl_tree[2*vG[a]+1],3);qG(e,e.dyn_ltree,t-1),qG(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),BG(e,e.dyn_ltree,e.dyn_dtree)),MG(e),n&&RG(e)},KG=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(wG[r]+dG+1)]++,e.dyn_dtree[2*CG(t)]++),e.sym_next===e.sym_end),$G=e=>{PG(e,2,3),DG(e,256,bG),(e=>{16===e.bi_valid?(TG(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},YG={_tr_init:VG,_tr_stored_block:HG,_tr_flush_block:GG,_tr_tally:KG,_tr_align:$G};var XG=(e,t,r,n)=>{let a=65535&e,s=e>>>16&65535,i=0;for(;0!==r;){i=r>2e3?2e3:r,r-=i;do{a=a+t[n++]|0,s=s+a|0}while(--i);a%=65521,s%=65521}return a|s<<16};const JG=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var ZG=(e,t,r,n)=>{const a=JG,s=n+r;e^=-1;for(let i=n;i<s;i++)e=e>>>8^a[255&(e^t[i])];return-1^e},QG={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eK={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:tK,_tr_stored_block:rK,_tr_flush_block:nK,_tr_tally:aK,_tr_align:sK}=YG,{Z_NO_FLUSH:iK,Z_PARTIAL_FLUSH:oK,Z_FULL_FLUSH:lK,Z_FINISH:cK,Z_BLOCK:dK,Z_OK:uK,Z_STREAM_END:hK,Z_STREAM_ERROR:fK,Z_DATA_ERROR:pK,Z_BUF_ERROR:mK,Z_DEFAULT_COMPRESSION:gK,Z_FILTERED:vK,Z_HUFFMAN_ONLY:bK,Z_RLE:xK,Z_FIXED:yK,Z_DEFAULT_STRATEGY:wK,Z_UNKNOWN:jK,Z_DEFLATED:NK}=eK,_K=258,SK=262,kK=42,AK=113,EK=666,CK=(e,t)=>(e.msg=QG[t],t),TK=e=>2*e-(e>4?9:0),PK=e=>{let t=e.length;for(;--t>=0;)e[t]=0},DK=e=>{let t,r,n,a=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=a?r-a:0}while(--t);t=a,n=t;do{r=e.prev[--n],e.prev[n]=r>=a?r-a:0}while(--t)};let OK=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const IK=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},MK=(e,t)=>{nK(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,IK(e.strm)},RK=(e,t)=>{e.pending_buf[e.pending++]=t},LK=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},FK=(e,t,r,n)=>{let a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=XG(e.adler,t,a,r):2===e.state.wrap&&(e.adler=ZG(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},BK=(e,t)=>{let r,n,a=e.max_chain_length,s=e.strstart,i=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-SK?e.strstart-(e.w_size-SK):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+_K;let f=c[s+i-1],p=c[s+i];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(r=t,c[r+i]===p&&c[r+i-1]===f&&c[r]===c[s]&&c[++r]===c[s+1]){s+=2,r++;do{}while(c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&s<h);if(n=_K-(h-s),s=h-_K,n>i){if(e.match_start=t,i=n,n>=o)break;f=c[s+i-1],p=c[s+i]}}}while((t=u[t&d])>l&&0!==--a);return i<=e.lookahead?i:e.lookahead},zK=e=>{const t=e.w_size;let r,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-SK)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),DK(e),n+=t),0===e.strm.avail_in)break;if(r=FK(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=OK(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=OK(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<SK&&0!==e.strm.avail_in)},UK=(e,t)=>{let r,n,a,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i=0,o=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>a&&(r=a),r<s&&(0===r&&t!==cK||t===iK||r!==n+e.strm.avail_in))break;i=t===cK&&r===n+e.strm.avail_in?1:0,rK(e,0,0,i),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,IK(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(FK(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===i);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?4:t!==iK&&t!==cK&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(FK(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,s=a>e.w_size?e.w_size:a,n=e.strstart-e.block_start,(n>=s||(n||t===cK)&&t!==iK&&0===e.strm.avail_in&&n<=a)&&(r=n>a?a:n,i=t===cK&&0===e.strm.avail_in&&r===n?1:0,rK(e,e.block_start,r,i),e.block_start+=r,IK(e.strm)),i?3:1)},qK=(e,t)=>{let r,n;for(;;){if(e.lookahead<SK){if(zK(e),e.lookahead<SK&&t===iK)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=OK(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-SK&&(e.match_length=BK(e,r)),e.match_length>=3)if(n=aK(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=OK(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=OK(e,e.ins_h,e.window[e.strstart+1]);else n=aK(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(MK(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===cK?(MK(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(MK(e,!1),0===e.strm.avail_out)?1:2},WK=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<SK){if(zK(e),e.lookahead<SK&&t===iK)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=OK(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-SK&&(e.match_length=BK(e,r),e.match_length<=5&&(e.strategy===vK||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=aK(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=OK(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(MK(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=aK(e,0,e.window[e.strstart-1]),n&&MK(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=aK(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===cK?(MK(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(MK(e,!1),0===e.strm.avail_out)?1:2};function HK(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}const VK=[new HK(0,0,0,0,UK),new HK(4,4,8,4,qK),new HK(4,5,16,8,qK),new HK(4,6,32,32,qK),new HK(4,4,16,16,WK),new HK(8,16,32,32,WK),new HK(8,16,128,128,WK),new HK(8,32,128,256,WK),new HK(32,128,258,1024,WK),new HK(32,258,258,4096,WK)];function GK(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=NK,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),PK(this.dyn_ltree),PK(this.dyn_dtree),PK(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),PK(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),PK(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const KK=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==kK&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==AK&&t.status!==EK?1:0},$K=e=>{if(KK(e))return CK(e,fK);e.total_in=e.total_out=0,e.data_type=jK;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?kK:AK,e.adler=2===t.wrap?0:1,t.last_flush=-2,tK(t),uK},YK=e=>{const t=$K(e);return t===uK&&(e=>{e.window_size=2*e.w_size,PK(e.head),e.max_lazy_match=VK[e.level].max_lazy,e.good_match=VK[e.level].good_length,e.nice_match=VK[e.level].nice_length,e.max_chain_length=VK[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},XK=(e,t,r,n,a,s)=>{if(!e)return fK;let i=1;if(t===gK&&(t=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),a<1||a>9||r!==NK||n<8||n>15||t<0||t>9||s<0||s>yK||8===n&&1!==i)return CK(e,fK);8===n&&(n=9);const o=new GK;return e.state=o,o.strm=e,o.status=kK,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=s,o.method=r,YK(e)};var JK=(e,t)=>{if(KK(e)||t>dK||t<0)return e?CK(e,fK):fK;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===EK&&t!==cK)return CK(e,0===e.avail_out?mK:fK);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(IK(e),0===e.avail_out)return r.last_flush=-1,uK}else if(0===e.avail_in&&TK(t)<=TK(n)&&t!==cK)return CK(e,mK);if(r.status===EK&&0!==e.avail_in)return CK(e,mK);if(r.status===kK&&0===r.wrap&&(r.status=AK),r.status===kK){let t=NK+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=bK||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,LK(r,t),0!==r.strstart&&(LK(r,e.adler>>>16),LK(r,65535&e.adler)),e.adler=1,r.status=AK,IK(e),0!==r.pending)return r.last_flush=-1,uK}if(57===r.status)if(e.adler=0,RK(r,31),RK(r,139),RK(r,8),r.gzhead)RK(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),RK(r,255&r.gzhead.time),RK(r,r.gzhead.time>>8&255),RK(r,r.gzhead.time>>16&255),RK(r,r.gzhead.time>>24&255),RK(r,9===r.level?2:r.strategy>=bK||r.level<2?4:0),RK(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(RK(r,255&r.gzhead.extra.length),RK(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=ZG(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(RK(r,0),RK(r,0),RK(r,0),RK(r,0),RK(r,0),RK(r,9===r.level?2:r.strategy>=bK||r.level<2?4:0),RK(r,3),r.status=AK,IK(e),0!==r.pending)return r.last_flush=-1,uK;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=ZG(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=a,IK(e),0!==r.pending)return r.last_flush=-1,uK;t=0,n-=a}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=ZG(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=ZG(e.adler,r.pending_buf,r.pending-n,n)),IK(e),0!==r.pending)return r.last_flush=-1,uK;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,RK(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=ZG(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=ZG(e.adler,r.pending_buf,r.pending-n,n)),IK(e),0!==r.pending)return r.last_flush=-1,uK;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,RK(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=ZG(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(IK(e),0!==r.pending))return r.last_flush=-1,uK;RK(r,255&e.adler),RK(r,e.adler>>8&255),e.adler=0}if(r.status=AK,IK(e),0!==r.pending)return r.last_flush=-1,uK}if(0!==e.avail_in||0!==r.lookahead||t!==iK&&r.status!==EK){let n=0===r.level?UK(r,t):r.strategy===bK?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(zK(e),0===e.lookahead)){if(t===iK)return 1;break}if(e.match_length=0,r=aK(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(MK(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===cK?(MK(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(MK(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===xK?((e,t)=>{let r,n,a,s;const i=e.window;for(;;){if(e.lookahead<=_K){if(zK(e),e.lookahead<=_K&&t===iK)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,n=i[a],n===i[++a]&&n===i[++a]&&n===i[++a])){s=e.strstart+_K;do{}while(n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&a<s);e.match_length=_K-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=aK(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=aK(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(MK(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===cK?(MK(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(MK(e,!1),0===e.strm.avail_out)?1:2})(r,t):VK[r.level].func(r,t);if(3!==n&&4!==n||(r.status=EK),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),uK;if(2===n&&(t===oK?sK(r):t!==dK&&(rK(r,0,0,!1),t===lK&&(PK(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),IK(e),0===e.avail_out))return r.last_flush=-1,uK}return t!==cK?uK:r.wrap<=0?hK:(2===r.wrap?(RK(r,255&e.adler),RK(r,e.adler>>8&255),RK(r,e.adler>>16&255),RK(r,e.adler>>24&255),RK(r,255&e.total_in),RK(r,e.total_in>>8&255),RK(r,e.total_in>>16&255),RK(r,e.total_in>>24&255)):(LK(r,e.adler>>>16),LK(r,65535&e.adler)),IK(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?uK:hK)},ZK=(e,t)=>{let r=t.length;if(KK(e))return fK;const n=e.state,a=n.wrap;if(2===a||1===a&&n.status!==kK||n.lookahead)return fK;if(1===a&&(e.adler=XG(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(PK(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const s=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,zK(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=OK(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,zK(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=i,e.input=o,e.avail_in=s,n.wrap=a,uK},QK={deflateInit:(e,t)=>XK(e,t,NK,15,8,wK),deflateInit2:XK,deflateReset:YK,deflateResetKeep:$K,deflateSetHeader:(e,t)=>KK(e)||2!==e.state.wrap?fK:(e.state.gzhead=t,uK),deflate:JK,deflateEnd:e=>{if(KK(e))return fK;const t=e.state.status;return e.state=null,t===AK?CK(e,pK):uK},deflateSetDictionary:ZK,deflateInfo:"pako deflate (from Nodeca project)"};const e$=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t$=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(const t in r)e$(r,t)&&(e[t]=r[t])}}return e},r$=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,s=e.length;n<s;n++){let t=e[n];r.set(t,a),a+=t.length}return r};let n$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(p2){n$=!1}const a$=new Uint8Array(256);for(let r=0;r<256;r++)a$[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;a$[254]=a$[254]=1;var s$=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,a,s,i=e.length,o=0;for(a=0;a<i;a++)r=e.charCodeAt(a),55296===(64512&r)&&a+1<i&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),s=0,a=0;s<o;a++)r=e.charCodeAt(a),55296===(64512&r)&&a+1<i&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t},i$=(e,t)=>{const r=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,a;const s=new Array(2*r);for(a=0,n=0;n<r;){let t=e[n++];if(t<128){s[a++]=t;continue}let i=a$[t];if(i>4)s[a++]=65533,n+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&n<r;)t=t<<6|63&e[n++],i--;i>1?s[a++]=65533:t<65536?s[a++]=t:(t-=65536,s[a++]=55296|t>>10&1023,s[a++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&n$)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(s,a)},o$=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128===(192&e[r]);)r--;return r<0||0===r?t:r+a$[e[r]]>t?r:t};var l$=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const c$=Object.prototype.toString,{Z_NO_FLUSH:d$,Z_SYNC_FLUSH:u$,Z_FULL_FLUSH:h$,Z_FINISH:f$,Z_OK:p$,Z_STREAM_END:m$,Z_DEFAULT_COMPRESSION:g$,Z_DEFAULT_STRATEGY:v$,Z_DEFLATED:b$}=eK;function x$(e){this.options=t$({level:g$,method:b$,chunkSize:16384,windowBits:15,memLevel:8,strategy:v$},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l$,this.strm.avail_out=0;let r=QK.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==p$)throw new Error(QG[r]);if(t.header&&QK.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?s$(t.dictionary):"[object ArrayBuffer]"===c$.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=QK.deflateSetDictionary(this.strm,e),r!==p$)throw new Error(QG[r]);this._dict_set=!0}}function y$(e,t){const r=new x$(t);if(r.push(e,!0),r.err)throw r.msg||QG[r.err];return r.result}x$.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let a,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?f$:d$,"string"===typeof e?r.input=s$(e):"[object ArrayBuffer]"===c$.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===u$||s===h$)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(a=QK.deflate(r,s),a===m$)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=QK.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===p$;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},x$.prototype.onData=function(e){this.chunks.push(e)},x$.prototype.onEnd=function(e){e===p$&&(this.result=r$(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var w$={Deflate:x$,deflate:y$,deflateRaw:function(e,t){return(t=t||{}).raw=!0,y$(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,y$(e,t)},constants:eK};const j$=16209;var N$=function(e,t){let r,n,a,s,i,o,l,c,d,u,h,f,p,m,g,v,b,x,y,w,j,N,_,S;const k=e.state;r=e.next_in,_=e.input,n=r+(e.avail_in-5),a=e.next_out,S=e.output,s=a-(t-e.avail_out),i=a+(e.avail_out-257),o=k.dmax,l=k.wsize,c=k.whave,d=k.wnext,u=k.window,h=k.hold,f=k.bits,p=k.lencode,m=k.distcode,g=(1<<k.lenbits)-1,v=(1<<k.distbits)-1;e:do{f<15&&(h+=_[r++]<<f,f+=8,h+=_[r++]<<f,f+=8),b=p[h&g];t:for(;;){if(x=b>>>24,h>>>=x,f-=x,x=b>>>16&255,0===x)S[a++]=65535&b;else{if(!(16&x)){if(0===(64&x)){b=p[(65535&b)+(h&(1<<x)-1)];continue t}if(32&x){k.mode=16191;break e}e.msg="invalid literal/length code",k.mode=j$;break e}y=65535&b,x&=15,x&&(f<x&&(h+=_[r++]<<f,f+=8),y+=h&(1<<x)-1,h>>>=x,f-=x),f<15&&(h+=_[r++]<<f,f+=8,h+=_[r++]<<f,f+=8),b=m[h&v];r:for(;;){if(x=b>>>24,h>>>=x,f-=x,x=b>>>16&255,!(16&x)){if(0===(64&x)){b=m[(65535&b)+(h&(1<<x)-1)];continue r}e.msg="invalid distance code",k.mode=j$;break e}if(w=65535&b,x&=15,f<x&&(h+=_[r++]<<f,f+=8,f<x&&(h+=_[r++]<<f,f+=8)),w+=h&(1<<x)-1,w>o){e.msg="invalid distance too far back",k.mode=j$;break e}if(h>>>=x,f-=x,x=a-s,w>x){if(x=w-x,x>c&&k.sane){e.msg="invalid distance too far back",k.mode=j$;break e}if(j=0,N=u,0===d){if(j+=l-x,x<y){y-=x;do{S[a++]=u[j++]}while(--x);j=a-w,N=S}}else if(d<x){if(j+=l+d-x,x-=d,x<y){y-=x;do{S[a++]=u[j++]}while(--x);if(j=0,d<y){x=d,y-=x;do{S[a++]=u[j++]}while(--x);j=a-w,N=S}}}else if(j+=d-x,x<y){y-=x;do{S[a++]=u[j++]}while(--x);j=a-w,N=S}for(;y>2;)S[a++]=N[j++],S[a++]=N[j++],S[a++]=N[j++],y-=3;y&&(S[a++]=N[j++],y>1&&(S[a++]=N[j++]))}else{j=a-w;do{S[a++]=S[j++],S[a++]=S[j++],S[a++]=S[j++],y-=3}while(y>2);y&&(S[a++]=S[j++],y>1&&(S[a++]=S[j++]))}break}}break}}while(r<n&&a<i);y=f>>3,r-=y,f-=y<<3,h&=(1<<f)-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<i?i-a+257:257-(a-i),k.hold=h,k.bits=f};const _$=15,S$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),k$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),A$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),E$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var C$=(e,t,r,n,a,s,i,o)=>{const l=o.bits;let c,d,u,h,f,p,m=0,g=0,v=0,b=0,x=0,y=0,w=0,j=0,N=0,_=0,S=null;const k=new Uint16Array(16),A=new Uint16Array(16);let E,C,T,P=null;for(m=0;m<=_$;m++)k[m]=0;for(g=0;g<n;g++)k[t[r+g]]++;for(x=l,b=_$;b>=1&&0===k[b];b--);if(x>b&&(x=b),0===b)return a[s++]=20971520,a[s++]=20971520,o.bits=1,0;for(v=1;v<b&&0===k[v];v++);for(x<v&&(x=v),j=1,m=1;m<=_$;m++)if(j<<=1,j-=k[m],j<0)return-1;if(j>0&&(0===e||1!==b))return-1;for(A[1]=0,m=1;m<_$;m++)A[m+1]=A[m]+k[m];for(g=0;g<n;g++)0!==t[r+g]&&(i[A[t[r+g]]++]=g);if(0===e?(S=P=i,p=20):1===e?(S=S$,P=k$,p=257):(S=A$,P=E$,p=0),_=0,g=0,m=v,f=s,y=x,w=0,u=-1,N=1<<x,h=N-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){E=m-w,i[g]+1<p?(C=0,T=i[g]):i[g]>=p?(C=P[i[g]-p],T=S[i[g]-p]):(C=96,T=0),c=1<<m-w,d=1<<y,v=d;do{d-=c,a[f+(_>>w)+d]=E<<24|C<<16|T}while(0!==d);for(c=1<<m-1;_&c;)c>>=1;if(0!==c?(_&=c-1,_+=c):_=0,g++,0===--k[m]){if(m===b)break;m=t[r+i[g]]}if(m>x&&(_&h)!==u){for(0===w&&(w=x),f+=v,y=m-w,j=1<<y;y+w<b&&(j-=k[y+w],!(j<=0));)y++,j<<=1;if(N+=1<<y,1===e&&N>852||2===e&&N>592)return 1;u=_&h,a[u]=x<<24|y<<16|f-s}}return 0!==_&&(a[f+_]=m-w<<24|64<<16),o.bits=x,0};const{Z_FINISH:T$,Z_BLOCK:P$,Z_TREES:D$,Z_OK:O$,Z_STREAM_END:I$,Z_NEED_DICT:M$,Z_STREAM_ERROR:R$,Z_DATA_ERROR:L$,Z_MEM_ERROR:F$,Z_BUF_ERROR:B$,Z_DEFLATED:z$}=eK,U$=16180,q$=16190,W$=16191,H$=16192,V$=16194,G$=16199,K$=16200,$$=16206,Y$=16209,X$=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function J$(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Z$=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<U$||t.mode>16211?1:0},Q$=e=>{if(Z$(e))return R$;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=U$,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,O$},eY=e=>{if(Z$(e))return R$;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Q$(e)},tY=(e,t)=>{let r;if(Z$(e))return R$;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?R$:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,eY(e))},rY=(e,t)=>{if(!e)return R$;const r=new J$;e.state=r,r.strm=e,r.window=null,r.mode=U$;const n=tY(e,t);return n!==O$&&(e.state=null),n};let nY,aY,sY=!0;const iY=e=>{if(sY){nY=new Int32Array(512),aY=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(C$(1,e.lens,0,288,nY,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;C$(2,e.lens,0,32,aY,0,e.work,{bits:5}),sY=!1}e.lencode=nY,e.lenbits=9,e.distcode=aY,e.distbits=5},oY=(e,t,r,n)=>{let a;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(t.subarray(r-n,r-n+a),s.wnext),(n-=a)?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0};var lY=(e,t)=>{let r,n,a,s,i,o,l,c,d,u,h,f,p,m,g,v,b,x,y,w,j,N,_=0;const S=new Uint8Array(4);let k,A;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Z$(e)||!e.output||!e.input&&0!==e.avail_in)return R$;r=e.state,r.mode===W$&&(r.mode=H$),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,c=r.hold,d=r.bits,u=o,h=l,N=O$;e:for(;;)switch(r.mode){case U$:if(0===r.wrap){r.mode=H$;break}for(;d<16;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(2&r.wrap&&35615===c){0===r.wbits&&(r.wbits=15),r.check=0,S[0]=255&c,S[1]=c>>>8&255,r.check=ZG(r.check,S,2,0),c=0,d=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=Y$;break}if((15&c)!==z$){e.msg="unknown compression method",r.mode=Y$;break}if(c>>>=4,d-=4,j=8+(15&c),0===r.wbits&&(r.wbits=j),j>15||j>r.wbits){e.msg="invalid window size",r.mode=Y$;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:W$,c=0,d=0;break;case 16181:for(;d<16;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(r.flags=c,(255&r.flags)!==z$){e.msg="unknown compression method",r.mode=Y$;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Y$;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&4&r.wrap&&(S[0]=255&c,S[1]=c>>>8&255,r.check=ZG(r.check,S,2,0)),c=0,d=0,r.mode=16182;case 16182:for(;d<32;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}r.head&&(r.head.time=c),512&r.flags&&4&r.wrap&&(S[0]=255&c,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,r.check=ZG(r.check,S,4,0)),c=0,d=0,r.mode=16183;case 16183:for(;d<16;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&4&r.wrap&&(S[0]=255&c,S[1]=c>>>8&255,r.check=ZG(r.check,S,2,0)),c=0,d=0,r.mode=16184;case 16184:if(1024&r.flags){for(;d<16;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&4&r.wrap&&(S[0]=255&c,S[1]=c>>>8&255,r.check=ZG(r.check,S,2,0)),c=0,d=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>o&&(f=o),f&&(r.head&&(j=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),j)),512&r.flags&&4&r.wrap&&(r.check=ZG(r.check,n,f,s)),o-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===o)break e;f=0;do{j=n[s+f++],r.head&&j&&r.length<65536&&(r.head.name+=String.fromCharCode(j))}while(j&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=ZG(r.check,n,f,s)),o-=f,s+=f,j)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===o)break e;f=0;do{j=n[s+f++],r.head&&j&&r.length<65536&&(r.head.comment+=String.fromCharCode(j))}while(j&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=ZG(r.check,n,f,s)),o-=f,s+=f,j)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;d<16;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Y$;break}c=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=W$;break;case 16189:for(;d<32;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}e.adler=r.check=X$(c),c=0,d=0,r.mode=q$;case q$:if(0===r.havedict)return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,r.hold=c,r.bits=d,M$;e.adler=r.check=1,r.mode=W$;case W$:if(t===P$||t===D$)break e;case H$:if(r.last){c>>>=7&d,d-=7&d,r.mode=$$;break}for(;d<3;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}switch(r.last=1&c,c>>>=1,d-=1,3&c){case 0:r.mode=16193;break;case 1:if(iY(r),r.mode=G$,t===D$){c>>>=2,d-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Y$}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Y$;break}if(r.length=65535&c,c=0,d=0,r.mode=V$,t===D$)break e;case V$:r.mode=16195;case 16195:if(f=r.length,f){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;a.set(n.subarray(s,s+f),i),o-=f,s+=f,l-=f,i+=f,r.length-=f;break}r.mode=W$;break;case 16196:for(;d<14;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(r.nlen=257+(31&c),c>>>=5,d-=5,r.ndist=1+(31&c),c>>>=5,d-=5,r.ncode=4+(15&c),c>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Y$;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;d<3;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}r.lens[E[r.have++]]=7&c,c>>>=3,d-=3}for(;r.have<19;)r.lens[E[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,k={bits:r.lenbits},N=C$(0,r.lens,0,19,r.lencode,0,r.work,k),r.lenbits=k.bits,N){e.msg="invalid code lengths set",r.mode=Y$;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[c&(1<<r.lenbits)-1],g=_>>>24,v=_>>>16&255,b=65535&_,!(g<=d);){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(b<16)c>>>=g,d-=g,r.lens[r.have++]=b;else{if(16===b){for(A=g+2;d<A;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(c>>>=g,d-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=Y$;break}j=r.lens[r.have-1],f=3+(3&c),c>>>=2,d-=2}else if(17===b){for(A=g+3;d<A;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}c>>>=g,d-=g,j=0,f=3+(7&c),c>>>=3,d-=3}else{for(A=g+7;d<A;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}c>>>=g,d-=g,j=0,f=11+(127&c),c>>>=7,d-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Y$;break}for(;f--;)r.lens[r.have++]=j}}if(r.mode===Y$)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Y$;break}if(r.lenbits=9,k={bits:r.lenbits},N=C$(1,r.lens,0,r.nlen,r.lencode,0,r.work,k),r.lenbits=k.bits,N){e.msg="invalid literal/lengths set",r.mode=Y$;break}if(r.distbits=6,r.distcode=r.distdyn,k={bits:r.distbits},N=C$(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,k),r.distbits=k.bits,N){e.msg="invalid distances set",r.mode=Y$;break}if(r.mode=G$,t===D$)break e;case G$:r.mode=K$;case K$:if(o>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,r.hold=c,r.bits=d,N$(e,h),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,c=r.hold,d=r.bits,r.mode===W$&&(r.back=-1);break}for(r.back=0;_=r.lencode[c&(1<<r.lenbits)-1],g=_>>>24,v=_>>>16&255,b=65535&_,!(g<=d);){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(v&&0===(240&v)){for(x=g,y=v,w=b;_=r.lencode[w+((c&(1<<x+y)-1)>>x)],g=_>>>24,v=_>>>16&255,b=65535&_,!(x+g<=d);){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}c>>>=x,d-=x,r.back+=x}if(c>>>=g,d-=g,r.back+=g,r.length=b,0===v){r.mode=16205;break}if(32&v){r.back=-1,r.mode=W$;break}if(64&v){e.msg="invalid literal/length code",r.mode=Y$;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(A=r.extra;d<A;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;_=r.distcode[c&(1<<r.distbits)-1],g=_>>>24,v=_>>>16&255,b=65535&_,!(g<=d);){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(0===(240&v)){for(x=g,y=v,w=b;_=r.distcode[w+((c&(1<<x+y)-1)>>x)],g=_>>>24,v=_>>>16&255,b=65535&_,!(x+g<=d);){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}c>>>=x,d-=x,r.back+=x}if(c>>>=g,d-=g,r.back+=g,64&v){e.msg="invalid distance code",r.mode=Y$;break}r.offset=b,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(A=r.extra;d<A;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Y$;break}r.mode=16204;case 16204:if(0===l)break e;if(f=h-l,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Y$;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),m=r.window}else m=a,p=i-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do{a[i++]=m[p++]}while(--f);0===r.length&&(r.mode=K$);break;case 16205:if(0===l)break e;a[i++]=r.length,l--,r.mode=K$;break;case $$:if(r.wrap){for(;d<32;){if(0===o)break e;o--,c|=n[s++]<<d,d+=8}if(h-=l,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?ZG(r.check,a,h,i-h):XG(r.check,a,h,i-h)),h=l,4&r.wrap&&(r.flags?c:X$(c))!==r.check){e.msg="incorrect data check",r.mode=Y$;break}c=0,d=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;d<32;){if(0===o)break e;o--,c+=n[s++]<<d,d+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Y$;break}c=0,d=0}r.mode=16208;case 16208:N=I$;break e;case Y$:N=L$;break e;case 16210:return F$;default:return R$}return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,r.hold=c,r.bits=d,(r.wsize||h!==e.avail_out&&r.mode<Y$&&(r.mode<$$||t!==T$))&&oY(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?ZG(r.check,a,h,e.next_out-h):XG(r.check,a,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===W$?128:0)+(r.mode===G$||r.mode===V$?256:0),(0===u&&0===h||t===T$)&&N===O$&&(N=B$),N},cY={inflateReset:eY,inflateReset2:tY,inflateResetKeep:Q$,inflateInit:e=>rY(e,15),inflateInit2:rY,inflate:lY,inflateEnd:e=>{if(Z$(e))return R$;let t=e.state;return t.window&&(t.window=null),e.state=null,O$},inflateGetHeader:(e,t)=>{if(Z$(e))return R$;const r=e.state;return 0===(2&r.wrap)?R$:(r.head=t,t.done=!1,O$)},inflateSetDictionary:(e,t)=>{const r=t.length;let n,a,s;return Z$(e)?R$:(n=e.state,0!==n.wrap&&n.mode!==q$?R$:n.mode===q$&&(a=1,a=XG(a,t,r,0),a!==n.check)?L$:(s=oY(e,t,r,r),s?(n.mode=16210,F$):(n.havedict=1,O$)))},inflateInfo:"pako inflate (from Nodeca project)"};var dY=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const uY=Object.prototype.toString,{Z_NO_FLUSH:hY,Z_FINISH:fY,Z_OK:pY,Z_STREAM_END:mY,Z_NEED_DICT:gY,Z_STREAM_ERROR:vY,Z_DATA_ERROR:bY,Z_MEM_ERROR:xY}=eK;function yY(e){this.options=t$({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l$,this.strm.avail_out=0;let r=cY.inflateInit2(this.strm,t.windowBits);if(r!==pY)throw new Error(QG[r]);if(this.header=new dY,cY.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=s$(t.dictionary):"[object ArrayBuffer]"===uY.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=cY.inflateSetDictionary(this.strm,t.dictionary),r!==pY)))throw new Error(QG[r])}function wY(e,t){const r=new yY(t);if(r.push(e),r.err)throw r.msg||QG[r.err];return r.result}yY.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,i,o;if(this.ended)return!1;for(i=t===~~t?t:!0===t?fY:hY,"[object ArrayBuffer]"===uY.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=cY.inflate(r,i),s===gY&&a&&(s=cY.inflateSetDictionary(r,a),s===pY?s=cY.inflate(r,i):s===bY&&(s=gY));r.avail_in>0&&s===mY&&r.state.wrap>0&&0!==e[r.next_in];)cY.inflateReset(r),s=cY.inflate(r,i);switch(s){case vY:case bY:case gY:case xY:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(0===r.avail_out||s===mY))if("string"===this.options.to){let e=o$(r.output,r.next_out),t=r.next_out-e,a=i$(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(a)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==pY||0!==o){if(s===mY)return s=cY.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},yY.prototype.onData=function(e){this.chunks.push(e)},yY.prototype.onEnd=function(e){e===pY&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r$(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var jY={Inflate:yY,inflate:wY,inflateRaw:function(e,t){return(t=t||{}).raw=!0,wY(e,t)},ungzip:wY,constants:eK};const{Deflate:NY,deflate:_Y,deflateRaw:SY,gzip:kY}=w$,{Inflate:AY,inflate:EY,inflateRaw:CY,ungzip:TY}=jY;var PY=AY,DY=EY;const OY=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;OY[r]=e}const IY=4294967295;function MY(e,t){return(function(e,t,r){let n=e;for(let a=0;a<r;a++)n=OY[255&(n^t[a])]^n>>>8;return n}(IY,e,t)^IY)>>>0}function RY(e,t,r){const n=e.readUint32(),a=MY(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error("CRC mismatch for chunk ".concat(r,". Expected ").concat(n,", found ").concat(a))}function LY(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function FY(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function BY(e,t,r,n){let a=0;if(0===r.length)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function zY(e,t,r,n,a){let s=0;if(0===r.length){for(;s<a;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+(t[s-a]>>1)&255}else{for(;s<a;s++)t[s]=e[s]+(r[s]>>1)&255;for(;s<n;s++)t[s]=e[s]+(t[s-a]+r[s]>>1)&255}}function UY(e,t,r,n,a){let s=0;if(0===r.length){for(;s<a;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-a]&255}else{for(;s<a;s++)t[s]=e[s]+r[s]&255;for(;s<n;s++)t[s]=e[s]+qY(t[s-a],r[s],r[s-a])&255}}function qY(e,t,r){const n=e+t-r,a=Math.abs(n-e),s=Math.abs(n-t),i=Math.abs(n-r);return a<=s&&a<=i?e:s<=i?t:r}function WY(e,t,r,n,a,s){switch(e){case 0:LY(t,r,a);break;case 1:FY(t,r,a,s);break;case 2:BY(t,r,n,a);break;case 3:zY(t,r,n,a,s);break;case 4:UY(t,r,n,a,s);break;default:throw new Error("Unsupported filter: ".concat(e))}}const HY=new Uint16Array([255]),VY=255===new Uint8Array(HY.buffer)[0];function GY(e){return(255&e)<<8|e>>8&255}const KY=new Uint16Array([255]),$Y=255===new Uint8Array(KY.buffer)[0],YY=new Uint8Array(0);function XY(e){const{data:t,width:r,height:n,channels:a,depth:s}=e,i=Math.ceil(s/8)*a,o=Math.ceil(s/8*a*r),l=new Uint8Array(n*o);let c,d,u=YY,h=0;for(let f=0;f<n;f++){switch(c=t.subarray(h+1,h+1+o),d=l.subarray(f*o,(f+1)*o),t[h]){case 0:LY(c,d,o);break;case 1:FY(c,d,o,i);break;case 2:BY(c,d,u,o);break;case 3:zY(c,d,u,o,i);break;case 4:UY(c,d,u,o,i);break;default:throw new Error("Unsupported filter: ".concat(t[h]))}u=d,h+=o+1}if(16===s){const e=new Uint16Array(l.buffer);if($Y)for(let t=0;t<e.length;t++)e[t]=JY(e[t]);return e}return l}function JY(e){return(255&e)<<8|e>>8&255}const ZY=Uint8Array.of(137,80,78,71,13,10,26,10);function QY(e){if(!function(e){if(e.length<ZY.length)return!1;for(let t=0;t<ZY.length;t++)if(e[t]!==ZY[t])return!1;return!0}(e.readBytes(ZY.length)))throw new Error("wrong PNG signature")}const eX="tEXt",tX=new TextDecoder("latin1");function rX(e){if(aX(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const nX=/^[\u0000-\u00FF]*$/;function aX(e){if(!nX.test(e))throw new Error("invalid latin1 text")}function sX(e,t,r){const n=iX(t);e[n]=function(e,t){return tX.decode(e.readBytes(t))}(t,r-n.length-1)}function iX(e){for(e.mark();0!==e.readByte(););const t=e.offset;e.reset();const r=tX.decode(e.readBytes(t-e.offset-1));return e.skip(1),rX(r),r}const oX=-1,lX=0,cX=2,dX=3,uX=4,hX=6,fX=-1,pX=0,mX=-1,gX=0,vX=-1,bX=0,xX=1,yX=0,wX=1,jX=2,NX=0,_X=1;class SX extends lG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,qt.A)(this,"_checkCrc",void 0),(0,qt.A)(this,"_inflator",void 0),(0,qt.A)(this,"_png",void 0),(0,qt.A)(this,"_apng",void 0),(0,qt.A)(this,"_end",void 0),(0,qt.A)(this,"_hasPalette",void 0),(0,qt.A)(this,"_palette",void 0),(0,qt.A)(this,"_hasTransparency",void 0),(0,qt.A)(this,"_transparency",void 0),(0,qt.A)(this,"_compressionMethod",void 0),(0,qt.A)(this,"_filterMethod",void 0),(0,qt.A)(this,"_interlaceMethod",void 0),(0,qt.A)(this,"_colorType",void 0),(0,qt.A)(this,"_isAnimated",void 0),(0,qt.A)(this,"_numberOfFrames",void 0),(0,qt.A)(this,"_numberOfPlays",void 0),(0,qt.A)(this,"_frames",void 0),(0,qt.A)(this,"_writingDataChunks",void 0);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new PY,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=fX,this._filterMethod=mX,this._interlaceMethod=vX,this._colorType=oX,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(QY(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(QY(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case eX:sX(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-r!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?RY(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e}if(this.offset-r!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?RY(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error("invalid bit depth: ".concat(e));return e}(this.readUint8());const t=this.readUint8();let r;switch(this._colorType=t,t){case lX:r=1;break;case cX:r=3;break;case dX:r=1;break;case uX:r=2;break;case hX:r=4;break;default:throw new Error("Unknown color type: ".concat(t))}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==pX)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(e));const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let n=0;n<t;n++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodetRNS(e){switch(this._colorType){case lX:case cX:if(e%2!==0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(e));if(e/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(e/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case dX:{if(e>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(e," vs ").concat(this._palette.length,")"));let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}decodeiCCP(e){const t=iX(this),r=this.readUint8();if(r!==pX)throw new Error("Unsupported iCCP compression method: ".concat(r));const n=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:DY(n)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=XY({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===r.xOffset&&0===r.yOffset&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const n=this._apng.frames.at(e-1);this.disposeFrame(r,n,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case yX:break;case wX:for(let t=0;t<this._png.height;t++)for(let n=0;n<this._png.width;n++){const a=(t*e.width+n)*this._png.channels;for(let e=0;e<this._png.channels;e++)r.data[a+e]=0}break;case jX:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,n=(e,r)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+r)*this._png.channels,frameIndex:(e*t.width+r)*this._png.channels});switch(t.blendOp){case NX:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:s,frameIndex:i}=n(r,a);for(let r=0;r<this._png.channels;r++)e.data[s+r]=t.data[i+r]}break;case _X:for(let a=0;a<t.height;a++)for(let s=0;s<t.width;s++){const{index:i,frameIndex:o}=n(a,s);for(let n=0;n<this._png.channels;n++){const a=t.data[o+this._png.channels-1]/r,s=n%(this._png.channels-1)===0?1:t.data[o+n],l=Math.floor(a*s+(1-a)*e.data[i+n]);e.data[i+n]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var e;if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));const t=this._isAnimated?(null===(e=this._frames)||void 0===e?void 0:e.at(0)).data:this._inflator.result;if(this._filterMethod!==gX)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod===bX)this._png.data=XY({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==xX)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this._png.data=function(e){const{data:t,width:r,height:n,channels:a,depth:s}=e,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*a,l=new Uint8Array(n*r*o);let c=0;for(let d=0;d<7;d++){const e=i[d],a=Math.ceil((r-e.x)/e.xStep),s=Math.ceil((n-e.y)/e.yStep);if(a<=0||s<=0)continue;const u=a*o,h=new Uint8Array(u);for(let i=0;i<s;i++){const s=t[c++],d=t.subarray(c,c+u);c+=u;const f=new Uint8Array(u);WY(s,d,f,h,u,o),h.set(f);for(let t=0;t<a;t++){const a=e.x+t*e.xStep,s=e.y+i*e.yStep;if(!(a>=r||s>=n))for(let e=0;e<o;e++)l[(s*r+a)*o+e]=f[t*o+e]}}}if(16===s){const e=new Uint16Array(l.buffer);if(VY)for(let t=0;t<e.length;t++)e[t]=GY(e[t]);return e}return l}({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:yX,blendOp:NX,data:e}),this._inflator=new PY,this._writingDataChunks=!1}}var kX;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"}(kX||(kX={}));var AX=function(){return"undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:this}();function EX(){AX.console&&"function"==typeof AX.console.log&&AX.console.log.apply(AX.console,arguments)}var CX={log:EX,warn:function(e){AX.console&&("function"==typeof AX.console.warn?AX.console.warn.apply(AX.console,arguments):EX.call(null,arguments))},error:function(e){AX.console&&("function"==typeof AX.console.error?AX.console.error.apply(AX.console,arguments):EX(e))}};function TX(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){OX(n.response,t,r)},n.onerror=function(){CX.error("could not download file")},n.send()}function PX(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(r){}return t.status>=200&&t.status<=299}function DX(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var OX=AX.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,gV.A)(window))||window!==AX?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=AX.URL||AX.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?PX(a.href)?TX(e,t,r):DX(a,a.target="_blank"):DX(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){DX(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download","string"==typeof e)if(PX(e))TX(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){DX(n)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,gV.A)(t)&&(CX.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return TX(e,t,r);var a="application/octet-stream"===e.type,s=/constructor/i.test(AX.HTMLElement)||AX.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&"object"===("undefined"==typeof FileReader?"undefined":(0,gV.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},o.readAsDataURL(e)}else{var l=AX.URL||AX.webkitURL,c=l.createObjectURL(e);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function IX(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r}}var MX=AX.atob.bind(AX),RX=AX.btoa.bind(AX);function LX(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=BX(r,n,a,s,t[0],7,-680876936),s=BX(s,r,n,a,t[1],12,-389564586),a=BX(a,s,r,n,t[2],17,606105819),n=BX(n,a,s,r,t[3],22,-1044525330),r=BX(r,n,a,s,t[4],7,-176418897),s=BX(s,r,n,a,t[5],12,1200080426),a=BX(a,s,r,n,t[6],17,-1473231341),n=BX(n,a,s,r,t[7],22,-45705983),r=BX(r,n,a,s,t[8],7,1770035416),s=BX(s,r,n,a,t[9],12,-1958414417),a=BX(a,s,r,n,t[10],17,-42063),n=BX(n,a,s,r,t[11],22,-1990404162),r=BX(r,n,a,s,t[12],7,1804603682),s=BX(s,r,n,a,t[13],12,-40341101),a=BX(a,s,r,n,t[14],17,-1502002290),r=zX(r,n=BX(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=zX(s,r,n,a,t[6],9,-1069501632),a=zX(a,s,r,n,t[11],14,643717713),n=zX(n,a,s,r,t[0],20,-373897302),r=zX(r,n,a,s,t[5],5,-701558691),s=zX(s,r,n,a,t[10],9,38016083),a=zX(a,s,r,n,t[15],14,-660478335),n=zX(n,a,s,r,t[4],20,-405537848),r=zX(r,n,a,s,t[9],5,568446438),s=zX(s,r,n,a,t[14],9,-1019803690),a=zX(a,s,r,n,t[3],14,-187363961),n=zX(n,a,s,r,t[8],20,1163531501),r=zX(r,n,a,s,t[13],5,-1444681467),s=zX(s,r,n,a,t[2],9,-51403784),a=zX(a,s,r,n,t[7],14,1735328473),r=UX(r,n=zX(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=UX(s,r,n,a,t[8],11,-2022574463),a=UX(a,s,r,n,t[11],16,1839030562),n=UX(n,a,s,r,t[14],23,-35309556),r=UX(r,n,a,s,t[1],4,-1530992060),s=UX(s,r,n,a,t[4],11,1272893353),a=UX(a,s,r,n,t[7],16,-155497632),n=UX(n,a,s,r,t[10],23,-1094730640),r=UX(r,n,a,s,t[13],4,681279174),s=UX(s,r,n,a,t[0],11,-358537222),a=UX(a,s,r,n,t[3],16,-722521979),n=UX(n,a,s,r,t[6],23,76029189),r=UX(r,n,a,s,t[9],4,-640364487),s=UX(s,r,n,a,t[12],11,-421815835),a=UX(a,s,r,n,t[15],16,530742520),r=qX(r,n=UX(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=qX(s,r,n,a,t[7],10,1126891415),a=qX(a,s,r,n,t[14],15,-1416354905),n=qX(n,a,s,r,t[5],21,-57434055),r=qX(r,n,a,s,t[12],6,1700485571),s=qX(s,r,n,a,t[3],10,-1894986606),a=qX(a,s,r,n,t[10],15,-1051523),n=qX(n,a,s,r,t[1],21,-2054922799),r=qX(r,n,a,s,t[8],6,1873313359),s=qX(s,r,n,a,t[15],10,-30611744),a=qX(a,s,r,n,t[6],15,-1560198380),n=qX(n,a,s,r,t[13],21,1309151649),r=qX(r,n,a,s,t[4],6,-145523070),s=qX(s,r,n,a,t[11],10,-1120210379),a=qX(a,s,r,n,t[2],15,718787259),n=qX(n,a,s,r,t[9],21,-343485551),e[0]=XX(r,e[0]),e[1]=XX(n,e[1]),e[2]=XX(a,e[2]),e[3]=XX(s,e[3])}function FX(e,t,r,n,a,s){return t=XX(XX(t,e),XX(n,s)),XX(t<<a|t>>>32-a,r)}function BX(e,t,r,n,a,s,i){return FX(t&r|~t&n,e,t,a,s,i)}function zX(e,t,r,n,a,s,i){return FX(t&n|r&~n,e,t,a,s,i)}function UX(e,t,r,n,a,s,i){return FX(t^r^n,e,t,a,s,i)}function qX(e,t,r,n,a,s,i){return FX(r^(t|~n),e,t,a,s,i)}function WX(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)LX(n,HX(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(LX(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,LX(n,a),n}function HX(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var VX="0123456789abcdef".split("");function GX(e){for(var t="",r=0;r<4;r++)t+=VX[e>>8*r+4&15]+VX[e>>8*r&15];return t}function KX(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function $X(e){return WX(e).map(KX).join("")}var YX="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=GX(e[t]);return e.join("")}(WX("hello"));function XX(e,t){if(YX){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function JX(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length|0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}r=e,n=o}else o=n;var u=t.length,h=0,f=0,p="";for(l=0;l<u;l++)f=(f+(d=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=d,i=o[(o[h]+o[f])%256],p+=String.fromCharCode(t.charCodeAt(l)^i);return p}var ZX={print:4,modify:8,copy:16,"annot-forms":32};function QX(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(e){if(void 0!==ZX.perm)throw new Error("Invalid permission: "+e);a+=ZX[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=$X(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=JX(this.encryptionKey,this.padding)}function eJ(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function tJ(e){if("object"!==(0,gV.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,n){if(n=n||!1,"string"!=typeof e||"function"!=typeof r||"boolean"!=typeof n)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[r,!!n],a},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],0===Object.keys(t[r]).length&&delete t[r],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(xq){AX.console&&CX.error("jsPDF PubSub Error",xq.message,xq)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function rJ(e){if(!(this instanceof rJ))return new rJ(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function nJ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function aJ(e,t,r,n,a){if(!(this instanceof aJ))return new aJ(e,t,r,n,a);this.type="axial"===e?2:3,this.coords=t,this.colors=r,nJ.call(this,n,a)}function sJ(e,t,r,n,a){if(!(this instanceof sJ))return new sJ(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,nJ.call(this,n,a)}function iJ(e){var t,r="string"==typeof arguments[0]?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,c="S",d=null;"object"===(0,gV.A)(e=e||{})&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),i=e.filters||(!0===s?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=tJ;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var v=f.__private__.getPageFormat=function(e){return g[e]};a=a||"a4";var b="compat",x="advanced",y=b;function w(){this.saveGraphicsState(),J(new Pe(he,0,0,-he,0,hr()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),c="n",y=x}function j(){this.restoreGraphicsState(),c="S",y=b}var N=f.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};f.advancedAPI=function(e){var t=y===b;return t&&w.call(this),"function"!=typeof e||(e(this),t&&j.call(this)),this},f.compatAPI=function(e){var t=y===x;return t&&j.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},f.isAdvancedAPI=function(){return y===x};var _,S=function(e){if(y!==x)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=f.roundToPrecision=f.__private__.roundToPrecision=function(e,r){var n=t||r;if(isNaN(e)||isNaN(n))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(n).replace(/0+$/,"")};_=f.hpf=f.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,16)};var A=f.f2=f.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return k(e,2)},E=f.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return k(e,3)},C=f.scale=f.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return y===b?e*he:y===x?e:void 0},T=function(e){return C(function(e){return y===b?hr()-e:y===x?e:void 0}(e))};f.__private__.setPrecision=f.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var P,D="00000000000000000000000000000000",O=f.__private__.getFileId=function(){return D},I=f.__private__.setFileId=function(e){return D=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():D.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(bt=new QX(d.userPermissions,d.userPassword,d.ownerPassword,D)),D};f.setFileId=function(e){return I(e),this},f.getFileId=function(){return O()};var M=f.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),r=t<0?"+":"-",n=Math.floor(Math.abs(t/60)),a=Math.abs(t%60),s=[r,z(n),"'",z(a),"'"].join("");return["D:",e.getFullYear(),z(e.getMonth()+1),z(e.getDate()),z(e.getHours()),z(e.getMinutes()),z(e.getSeconds()),s].join("")},R=f.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),r=parseInt(e.substr(6,2),10)-1,n=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,r,n,a,s,i,0)},L=f.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=M(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return P=t},F=f.__private__.getCreationDate=function(e){var t=P;return"jsDate"===e&&(t=R(P)),t};f.setCreationDate=function(e){return L(e),this},f.getCreationDate=function(e){return F(e)};var B,z=f.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},U=f.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},q=0,W=[],H=[],V=0,G=[],K=[],$=!1,Y=H;f.__private__.setCustomOutputDestination=function(e){$=!0,Y=e};var X=function(e){$||(Y=e)};f.__private__.resetCustomOutputDestination=function(){$=!1,Y=H};var J=f.__private__.out=function(e){return e=e.toString(),V+=e.length+1,Y.push(e),Y},Z=f.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Q=f.__private__.getArrayBuffer=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);t--;)n[t]=e.charCodeAt(t);return r},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(e){return te=y===x?e/he:e,this};var re,ne=f.__private__.getFontSize=f.getFontSize=function(){return y===b?te:te*he},ae=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(e){return ae=e,this},f.__private__.getR2L=f.getR2L=function(){return ae};var se,ie=f.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))re=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');re=e}else re=parseInt(e,10)};f.__private__.getZoomMode=function(){return re};var oe,le=f.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');se=e};f.__private__.getPageMode=function(){return se};var ce=f.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};f.__private__.getLayoutMode=function(){return oe},f.__private__.setDisplayMode=f.setDisplayMode=function(e,t,r){return ie(e),ce(t),le(r),this};var de={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(e){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return de[e]},f.__private__.getDocumentProperties=function(){return de},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(e){for(var t in de)de.hasOwnProperty(t)&&e[t]&&(de[t]=e[t]);return this},f.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return de[e]=t};var ue,he,fe,pe,me,ge={},ve={},be=[],xe={},ye={},we={},je={},Ne=null,_e=0,Se=[],ke=new tJ(f),Ae=e.hotfixes||[],Ee={},Ce={},Te=[],Pe=function e(t,r,n,a,s,i){if(!(this instanceof e))return new e(t,r,n,a,s,i);isNaN(t)&&(t=1),isNaN(r)&&(r=0),isNaN(n)&&(n=0),isNaN(a)&&(a=1),isNaN(s)&&(s=0),isNaN(i)&&(i=0),this._matrix=[t,r,n,a,s,i]};Object.defineProperty(Pe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Pe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Pe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Pe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Pe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Pe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Pe.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Pe.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Pe.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Pe.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Pe.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Pe.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Pe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pe.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Pe.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(e)},Pe.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,r=e.sx*this.shy+e.shy*this.sy,n=e.shx*this.sx+e.sy*this.shx,a=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Pe(t,r,n,a,s,i)},Pe.prototype.decompose=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,s=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*r+(t/=i)*n;r-=e*o,n-=t*o;var l=Math.sqrt(r*r+n*n);return o/=l,e*(n/=l)<t*(r/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new Pe(i,0,0,l,0,0),translate:new Pe(1,0,0,1,a,s),rotate:new Pe(e,t,-t,e,0,0),skew:new Pe(1,0,o,1,0,0)}},Pe.prototype.toString=function(e){return this.join(" ")},Pe.prototype.inversed=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,s=this.ty,i=1/(e*n-t*r),o=n*i,l=-t*i,c=-r*i,d=e*i;return new Pe(o,l,c,d,-o*a-c*s,-l*a-d*s)},Pe.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,r=e.x*this.shy+e.y*this.sy+this.ty;return new tr(t,r)},Pe.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),r=this.applyToPoint(new tr(e.x+e.w,e.y+e.h));return new rr(t.x,t.y,r.x-t.x,r.y-t.y)},Pe.prototype.clone=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,s=this.ty;return new Pe(e,t,r,n,a,s)},f.Matrix=Pe;var De=f.matrixMult=function(e,t){return t.multiply(e)},Oe=new Pe(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Oe;var Ie=function(e,t){if(!ye[e]){var r=(t instanceof aJ?"Sh":"P")+(Object.keys(xe).length+1).toString(10);t.id=r,ye[e]=r,xe[r]=t,ke.publish("addPattern",t)}};f.ShadingPattern=aJ,f.TilingPattern=sJ,f.addShadingPattern=function(e,t){return S("addShadingPattern()"),Ie(e,t),this},f.beginTilingPattern=function(e){S("beginTilingPattern()"),ar(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},f.endTilingPattern=function(e,t){S("endTilingPattern()"),t.stream=K[B].join("\n"),Ie(e,t),ke.publish("endTilingPattern",t),Te.pop().restore()};var Me,Re=f.__private__.newObject=function(){var e=Le();return Fe(e,!0),e},Le=f.__private__.newObjectDeferred=function(){return q++,W[q]=function(){return V},q},Fe=function(e,t){return t="boolean"==typeof t&&t,W[e]=V,t&&J(e+" 0 obj"),e},Be=f.__private__.newAdditionalObject=function(){var e={objId:Le(),content:""};return G.push(e),e},ze=Le(),Ue=Le(),qe=f.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var r=parseFloat(t[0]);t=[r,r,r,"r"]}for(var n="#",a=0;a<3;a++)n+=("0"+Math.floor(255*parseFloat(t[a])).toString(16)).slice(-2);return n},We=f.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var r=e.ch1,n=e.ch2,a=e.ch3,s=e.ch4,i="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var o=new IX(r);if(o.ok)r=o.toHex();else if(!/^\d*\.?\d*$/.test(r))throw new Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var l=parseInt(r.substr(1),16);r=l>>16&255,n=l>>8&255,a=255&l}if(void 0===n||void 0===s&&r===n&&n===a)t="string"==typeof r?r+" "+i[0]:2===e.precision?A(r/255)+" "+i[0]:E(r/255)+" "+i[0];else if(void 0===s||"object"===(0,gV.A)(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",i[1]].join(" ");t="string"==typeof r?[r,n,a,i[1]].join(" "):2===e.precision?[A(r/255),A(n/255),A(a/255),i[1]].join(" "):[E(r/255),E(n/255),E(a/255),i[1]].join(" ")}else t="string"==typeof r?[r,n,a,s,i[2]].join(" "):2===e.precision?[A(r),A(n),A(a),A(s),i[2]].join(" "):[E(r),E(n),E(a),E(s),i[2]].join(" ");return t},He=f.__private__.getFilters=function(){return i},Ve=f.__private__.putStream=function(e){var t=(e=e||{}).data||"",r=e.filters||He(),n=e.alreadyAppliedFilters||[],a=e.addLength1||!1,s=t.length,i=e.objectId,o=function(e){return e};if(null!==d&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=bt.encryptor(i,0));var l={};!0===r&&(r=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==iJ.API.processDataByFilters?iJ.API.processDataByFilters(t,r):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===a&&c.push({key:"Length1",value:s})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var f=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)f.push("null");f.push(c[h].value),c[h].value="["+f.join(" ")+"]"}}J("<<");for(var m=0;m<c.length;m++)J("/"+c[m].key+" "+c[m].value);J(">>"),0!==l.data.length&&(J("stream"),J(o(l.data)),J("endstream"))},Ge=f.__private__.putPage=function(e){var t=e.number,r=e.data,n=e.objId,a=e.contentsObjId;Fe(n,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(_(e.mediaBox.bottomLeftX))+" "+parseFloat(_(e.mediaBox.bottomLeftY))+" "+_(e.mediaBox.topRightX)+" "+_(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+_(e.cropBox.bottomLeftX)+" "+_(e.cropBox.bottomLeftY)+" "+_(e.cropBox.topRightX)+" "+_(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+_(e.bleedBox.bottomLeftX)+" "+_(e.bleedBox.bottomLeftY)+" "+_(e.bleedBox.topRightX)+" "+_(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+_(e.trimBox.bottomLeftX)+" "+_(e.trimBox.bottomLeftY)+" "+_(e.trimBox.topRightX)+" "+_(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+_(e.artBox.bottomLeftX)+" "+_(e.artBox.bottomLeftY)+" "+_(e.artBox.topRightX)+" "+_(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),ke.publish("putPage",{objId:n,pageContext:Se[t],pageNumber:t,page:r}),J("/Contents "+a+" 0 R"),J(">>"),J("endobj");var s=r.join("\n");return y===x&&(s+="\nQ"),Fe(a,!0),Ve({data:s,filters:He(),objectId:a}),J("endobj"),n},Ke=f.__private__.putPages=function(){var e,t,r=[];for(e=1;e<=_e;e++)Se[e].objId=Le(),Se[e].contentsObjId=Le();for(e=1;e<=_e;e++)r.push(Ge({number:e,data:K[e],objId:Se[e].objId,contentsObjId:Se[e].contentsObjId,mediaBox:Se[e].mediaBox,cropBox:Se[e].cropBox,bleedBox:Se[e].bleedBox,trimBox:Se[e].trimBox,artBox:Se[e].artBox,userUnit:Se[e].userUnit,rootDictionaryObjId:ze,resourceDictionaryObjId:Ue}));Fe(ze,!0),J("<</Type /Pages");var n="/Kids [";for(t=0;t<_e;t++)n+=r[t]+" 0 R ";J(n+"]"),J("/Count "+_e),J(">>"),J("endobj"),ke.publish("postPutPages")},$e=function(e){ke.publish("putFont",{font:e,out:J,newObject:Re,putStream:Ve}),!0!==e.isAlreadyPutted&&(e.objectNumber=Re(),J("<<"),J("/Type /Font"),J("/BaseFont /"+eJ(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Ye=function(e){e.objectNumber=Re();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[_(e.x),_(e.y),_(e.x+e.width),_(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var r=e.pages[1].join("\n");Ve({data:r,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},Xe=function(e,t){t||(t=21);var r=Re(),n=function(e,t){var r,n=[],a=1/(t-1);for(r=0;r<1;r+=a)n.push(r);if(n.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<n.length;c++){for(r=n[c];r>e[l+1].offset;)l++;var d=e[l].offset,u=(r-d)/(e[l+1].offset-d),h=e[l].color,f=e[l+1].color;o+=U(Math.round((1-u)*h[0]+u*f[0]).toString(16))+U(Math.round((1-u)*h[1]+u*f[1]).toString(16))+U(Math.round((1-u)*h[2]+u*f[2]).toString(16))}return o.trim()}(e.colors,t),a=[];a.push({key:"FunctionType",value:"0"}),a.push({key:"Domain",value:"[0.0 1.0]"}),a.push({key:"Size",value:"["+t+"]"}),a.push({key:"BitsPerSample",value:"8"}),a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve({data:n,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:r}),J("endobj"),e.objectNumber=Re(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var s="/Coords ["+_(parseFloat(e.coords[0]))+" "+_(parseFloat(e.coords[1]))+" ";2===e.type?s+=_(parseFloat(e.coords[2]))+" "+_(parseFloat(e.coords[3])):s+=_(parseFloat(e.coords[2]))+" "+_(parseFloat(e.coords[3]))+" "+_(parseFloat(e.coords[4]))+" "+_(parseFloat(e.coords[5])),J(s+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+r+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Je=function(e,t){var r=Le(),n=Re();t.push({resourcesOid:r,objectOid:n}),e.objectNumber=n;var a=[];a.push({key:"Type",value:"/Pattern"}),a.push({key:"PatternType",value:"1"}),a.push({key:"PaintType",value:"1"}),a.push({key:"TilingType",value:"1"}),a.push({key:"BBox",value:"["+e.boundingBox.map(_).join(" ")+"]"}),a.push({key:"XStep",value:_(e.xStep)}),a.push({key:"YStep",value:_(e.yStep)}),a.push({key:"Resources",value:r+" 0 R"}),e.matrix&&a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ve({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber}),J("endobj")},Ze=function(e){for(var t in e.objectNumber=Re(),J("<<"),e)switch(t){case"opacity":J("/ca "+A(e[t]));break;case"stroke-opacity":J("/CA "+A(e[t]))}J(">>"),J("endobj")},Qe=function(e){Fe(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&J("/"+e+" "+ge[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(xe).length>0){for(var e in J("/Shading <<"),xe)xe.hasOwnProperty(e)&&xe[e]instanceof aJ&&xe[e].objectNumber>=0&&J("/"+e+" "+xe[e].objectNumber+" 0 R");ke.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(xe).length>0){for(var t in J("/Pattern <<"),xe)xe.hasOwnProperty(t)&&xe[t]instanceof f.TilingPattern&&xe[t].objectNumber>=0&&xe[t].objectNumber<e&&J("/"+t+" "+xe[t].objectNumber+" 0 R");ke.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(we).length>0){var e;for(e in J("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&J("/"+e+" "+we[e].objectNumber+" 0 R");ke.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),Ee)Ee.hasOwnProperty(e)&&Ee[e].objectNumber>=0&&J("/"+e+" "+Ee[e].objectNumber+" 0 R");ke.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},et=function(e){ve[e.fontName]=ve[e.fontName]||{},ve[e.fontName][e.fontStyle]=e.id},tt=function(e,t,r,n,a){var s={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:r,encoding:n,isStandardFont:a||!1,metadata:{}};return ke.publish("addFont",{font:s,instance:this}),ge[s.id]=s,et(s),s.id},rt=f.__private__.pdfEscape=f.pdfEscape=function(e,t){return function(e,t){var r,n,a,s,i,o,l,c,d;if(a=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&ge[ue].metadata&&ge[ue].metadata[a]&&ge[ue].metadata[a].encoding&&(s=ge[ue].metadata[a].encoding,!i&&ge[ue].encoding&&(i=ge[ue].encoding),!i&&s.codePages&&(i=s.codePages[0]),"string"==typeof i&&(i=s[i]),i)){for(l=!1,o=[],r=0,n=e.length;r<n;r++)(c=i[e.charCodeAt(r)])?o.push(String.fromCharCode(c)):o.push(e[r]),o[r].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(r=e.length;void 0===l&&0!==r;)e.charCodeAt(r-1)>>8&&(l=!0),r--;if(!l)return e;for(o=t.noBOM?[]:[254,255],r=0,n=e.length;r<n;r++){if((d=(c=e.charCodeAt(r))>>8)>>8)throw new Error("Character at position "+r+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nt=f.__private__.beginPage=function(e){K[++_e]=[],Se[_e]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},it(_e),X(K[B])},at=function(e,t){var n,s,i;switch(r=t||r,"string"==typeof e&&(n=v(e.toLowerCase()),Array.isArray(n)&&(s=n[0],i=n[1])),Array.isArray(e)&&(s=e[0]*he,i=e[1]*he),isNaN(s)&&(s=a[0],i=a[1]),(s>14400||i>14400)&&(CX.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),i=Math.min(14400,i)),a=[s,i],r.substr(0,1)){case"l":i>s&&(a=[i,s]);break;case"p":s>i&&(a=[i,s])}nt(a),Ft(Rt),J(Gt),0!==Zt&&J(Zt+" J"),0!==Qt&&J(Qt+" j"),ke.publish("addPage",{pageNumber:_e})},st=function(e){e>0&&e<=_e&&(K.splice(e,1),Se.splice(e,1),_e--,B>_e&&(B=_e),this.setPage(B))},it=function(e){e>0&&e<=_e&&(B=e)},ot=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return K.length-1},lt=function(e,t,r){var n,a=void 0;return r=r||{},e=void 0!==e?e:ge[ue].fontName,t=void 0!==t?t:ge[ue].fontStyle,n=e.toLowerCase(),void 0!==ve[n]&&void 0!==ve[n][t]?a=ve[n][t]:void 0!==ve[e]&&void 0!==ve[e][t]?a=ve[e][t]:!1===r.disableWarning&&CX.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),a||r.noFallback||null==(a=ve.times[t])&&(a=ve.times.normal),a},ct=f.__private__.putInfo=function(){var e=Re(),t=function(e){return e};for(var r in null!==d&&(t=bt.encryptor(e,0)),J("<<"),J("/Producer ("+rt(t("jsPDF "+iJ.version))+")"),de)de.hasOwnProperty(r)&&de[r]&&J("/"+r.substr(0,1).toUpperCase()+r.substr(1)+" ("+rt(t(de[r]))+")");J("/CreationDate ("+rt(t(P))+")"),J(">>"),J("endobj")},dt=f.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||ze;switch(Re(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),re||(re="fullwidth"),re){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var r=""+re;"%"===r.substr(r.length-1)&&(re=parseInt(re)/100),"number"==typeof re&&J("/OpenAction [3 0 R /XYZ null null "+A(re)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}se&&J("/PageMode /"+se),ke.publish("putCatalog"),J(">>"),J("endobj")},ut=f.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(q+1)),J("/Root "+q+" 0 R"),J("/Info "+(q-1)+" 0 R"),null!==d&&J("/Encrypt "+bt.oid+" 0 R"),J("/ID [ <"+D+"> <"+D+"> ]"),J(">>")},ht=f.__private__.putHeader=function(){J("%PDF-"+p),J("%\xba\xdf\xac\xe0")},ft=f.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(q+1)),J("0000000000 65535 f ");for(var t=1;t<=q;t++)"function"==typeof W[t]?J((e+W[t]()).slice(-10)+" 00000 n "):void 0!==W[t]?J((e+W[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},pt=f.__private__.buildDocument=function(){var e;q=0,V=0,H=[],W=[],G=[],ze=Le(),Ue=Le(),X(H),ke.publish("buildDocument"),ht(),Ke(),function(){ke.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Fe(t.objId,!0),J(t.content),J("endobj")}ke.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&$e(ge[e])}(),function(){var e;for(e in we)we.hasOwnProperty(e)&&Ze(we[e])}(),function(){for(var e in Ee)Ee.hasOwnProperty(e)&&Ye(Ee[e])}(),function(e){var t;for(t in xe)xe.hasOwnProperty(t)&&(xe[t]instanceof aJ?Xe(xe[t]):xe[t]instanceof sJ&&Je(xe[t],e))}(e),ke.publish("putResources"),e.forEach(Qe),Qe({resourcesOid:Ue,objectOid:Number.MAX_SAFE_INTEGER}),ke.publish("postPutResources"),null!==d&&(bt.oid=Re(),J("<<"),J("/Filter /Standard"),J("/V "+bt.v),J("/R "+bt.r),J("/U <"+bt.toHexString(bt.U)+">"),J("/O <"+bt.toHexString(bt.O)+">"),J("/P "+bt.P),J(">>"),J("endobj")),ct(),dt();var t=V;return ft(),ut(),J("startxref"),J(""+t),J("%%EOF"),X(K[B]),H.join("\n")},mt=f.__private__.getBlob=function(e){return new Blob([Q(e)],{type:"application/pdf"})},gt=f.output=f.__private__.output=(Me=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":f.save(t.filename);break;case"arraybuffer":return Q(pt());case"blob":return mt(pt());case"bloburi":case"bloburl":if(void 0!==AX.URL&&"function"==typeof AX.URL.createObjectURL)return AX.URL&&AX.URL.createObjectURL(mt(pt()))||void 0;CX.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var r="",n=pt();try{r=RX(n)}catch(d){r=RX(unescape(encodeURIComponent(n)))}return"data:application/pdf;filename="+t.filename+";base64,"+r;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(AX)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,s="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=AX.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(AX)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=AX.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(AX))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',p=AX.open();if(null!==p&&(p.document.write(h),p.document.title=t.filename),p||"undefined"==typeof safari)return p;break;case"datauri":case"dataurl":return AX.document.location.href=this.output("datauristring",t);default:return null}},Me.foo=function(){try{return Me.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var r="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!AX.console)throw new Error(r);AX.console.error(r,t),AX.alert&&alert(r)}},Me.foo.bar=Me,Me.foo),vt=function(e){return!0===Array.isArray(Ae)&&Ae.indexOf(e)>-1};switch(n){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==vt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof n)throw new Error("Invalid unit: "+n);he=n}var bt=null;L(),I();var xt=f.__private__.getPageInfo=f.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Se[e].objId,pageNumber:e,pageContext:Se[e]}},yt=f.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Se)if(Se[t].objId===e)break;return xt(t)},wt=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Se[B].objId,pageNumber:B,pageContext:Se[B]}};f.addPage=function(){return at.apply(this,arguments),this},f.setPage=function(){return it.apply(this,arguments),X.call(this,K[B]),this},f.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},f.movePage=function(e,t){var r,n;if(e>t){r=K[e],n=Se[e];for(var a=e;a>t;a--)K[a]=K[a-1],Se[a]=Se[a-1];K[t]=r,Se[t]=n,this.setPage(t)}else if(e<t){r=K[e],n=Se[e];for(var s=e;s<t;s++)K[s]=K[s+1],Se[s]=Se[s+1];K[t]=r,Se[t]=n,this.setPage(t)}return this},f.deletePage=function(){return st.apply(this,arguments),this},f.__private__.text=f.text=function(e,t,r,n,a){var s,i,o,l,c,d,u,f,p,m=(n=n||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof r||Array.isArray(r))){var g=r;r=t,t=e,e=g}if(arguments[3]instanceof Pe==0?(o=arguments[4],l=arguments[5],"object"===(0,gV.A)(u=arguments[3])&&null!==u||("string"==typeof o&&(l=o,o=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(o=u,u=null),n={flags:u,angle:o,align:l})):(S("The transform parameter of text() with a Matrix value"),p=a),isNaN(t)||isNaN(r)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var v,b="",w="number"==typeof n.lineHeightFactor?n.lineHeightFactor:Mt,j=m.internal.scaleFactor;function N(e){return e=e.split("\t").join(Array(n.TabLen||9).join(" ")),rt(e,u)}function k(e){for(var t,r=e.concat(),n=[],a=r.length;a--;)"string"==typeof(t=r.shift())?n.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?n.push(t[0]):n.push([t[0],t[1],t[2]]);return n}function A(e,t){var r;if("string"==typeof e)r=t(e)[0];else if(Array.isArray(e)){for(var n,a,s=e.concat(),i=[],o=s.length;o--;)"string"==typeof(n=s.shift())?i.push(t(n)[0]):Array.isArray(n)&&"string"==typeof n[0]&&(a=t(n[0],n[1],n[2]),i.push([a[0],a[1],a[2]]));r=i}return r}var E=!1,T=!0;if("string"==typeof e)E=!0;else if(Array.isArray(e)){var P=e.concat();i=[];for(var D,O=P.length;O--;)("string"!=typeof(D=P.shift())||Array.isArray(D)&&"string"!=typeof D[0])&&(T=!1);E=T}if(!1===E)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var I=te/m.internal.scaleFactor,M=I*(w-1);switch(n.baseline){case"bottom":r-=M;break;case"top":r+=I-M;break;case"hanging":r+=I-2*M;break;case"middle":r+=I/2-M}if((d=n.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(m.splitTextToSize(t,d))},[]))),s={text:e,x:t,y:r,options:n,mutex:{pdfEscape:rt,activeFontKey:ue,fonts:ge,activeFontSize:te}},ke.publish("preProcessText",s),e=s.text,o=(n=s.options).angle,p instanceof Pe==0&&o&&"number"==typeof o){o*=Math.PI/180,0===n.rotationDirection&&(o=-o),y===x&&(o=-o);var R=Math.cos(o),L=Math.sin(o);p=new Pe(R,L,-L,R,0,0)}else o&&o instanceof Pe&&(p=o);y!==x||p||(p=Oe),void 0!==(c=n.charSpace||Xt)&&(b+=_(C(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=n.horizontalScale)&&(b+=_(100*f)+" Tz\n"),n.lang;var F=-1,B=void 0!==n.renderingMode?n.renderingMode:n.stroke,z=m.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":F=0;break;case 1:case!0:case"stroke":F=1;break;case 2:case"fillThenStroke":F=2;break;case 3:case"invisible":F=3;break;case 4:case"fillAndAddForClipping":F=4;break;case 5:case"strokeAndAddPathForClipping":F=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":F=6;break;case 7:case"addToPathForClipping":F=7}var U=void 0!==z.usedRenderingMode?z.usedRenderingMode:-1;-1!==F?b+=F+" Tr\n":-1!==U&&(b+="0 Tr\n"),-1!==F&&(z.usedRenderingMode=F),l=n.align||"left";var q,W=te*w,H=m.internal.pageSize.getWidth(),V=ge[ue];c=n.charSpace||Xt,d=n.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},n.flags);var G=[],K=function(e){return m.getStringUnitWidth(e,{font:V,charSpace:c,fontSize:te,doKerning:!1})*te/j};if("[object Array]"===Object.prototype.toString.call(e)){var $;i=k(e),"left"!==l&&(q=i.map(K));var Y,X=0;if("right"===l){t-=q[0],e=[],O=i.length;for(var Z=0;Z<O;Z++)0===Z?(Y=qt(t),$=Wt(r)):(Y=C(X-q[Z]),$=-W),e.push([i[Z],Y,$]),X=q[Z]}else if("center"===l){t-=q[0]/2,e=[],O=i.length;for(var Q=0;Q<O;Q++)0===Q?(Y=qt(t),$=Wt(r)):(Y=C((X-q[Q])/2),$=-W),e.push([i[Q],Y,$]),X=q[Q]}else if("left"===l){e=[],O=i.length;for(var ee=0;ee<O;ee++)e.push(i[ee])}else if("justify"===l&&"Identity-H"===V.encoding){e=[],O=i.length,d=0!==d?d:H;for(var re=0,ne=0;ne<O;ne++)if($=0===ne?Wt(r):-W,Y=0===ne?qt(t):re,ne<O-1){var se=C((d-q[ne])/(i[ne].split(" ").length-1)),ie=i[ne].split(" ");e.push([ie[0]+" ",Y,$]),re=0;for(var oe=1;oe<ie.length;oe++){var le=(K(ie[oe-1]+" "+ie[oe])-K(ie[oe]))*j+se;oe==ie.length-1?e.push([ie[oe],le,0]):e.push([ie[oe]+" ",le,0]),re-=le}}else e.push([i[ne],Y,$]);e.push(["",re,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],O=i.length,d=0!==d?d:H,ne=0;ne<O;ne++){$=0===ne?Wt(r):-W,Y=0===ne?qt(t):0;var ce=i[ne].split(" ").length-1,de=ce>0?(d-q[ne])/ce:0;ne<O-1?G.push(_(C(de))):G.push(0),e.push([i[ne],Y,$])}}}!0===("boolean"==typeof n.R2L?n.R2L:ae)&&(e=A(e,function(e,t,r){return[e.split("").reverse().join(""),t,r]})),s={text:e,x:t,y:r,options:n,mutex:{pdfEscape:rt,activeFontKey:ue,fonts:ge,activeFontSize:te}},ke.publish("postProcessText",s),e=s.text,v=s.mutex.isHex||!1;var he=ge[ue].encoding;"WinAnsiEncoding"!==he&&"StandardEncoding"!==he||(e=A(e,function(e,t,r){return[N(e),t,r]})),i=k(e),e=[];for(var fe,pe,me,ve=Array.isArray(i[0])?1:0,be="",xe=function(e,t,r){var a="";return r instanceof Pe?(r="number"==typeof n.angle?De(r,new Pe(1,0,0,1,e,t)):De(new Pe(1,0,0,1,e,t),r),y===x&&(r=De(new Pe(1,0,0,-1,0,0),r)),a=r.join(" ")+" Tm\n"):a=_(e)+" "+_(t)+" Td\n",a},ye=0;ye<i.length;ye++){switch(be="",ve){case 1:me=(v?"<":"(")+i[ye][0]+(v?">":")"),fe=parseFloat(i[ye][1]),pe=parseFloat(i[ye][2]);break;case 0:me=(v?"<":"(")+i[ye]+(v?">":")"),fe=qt(t),pe=Wt(r)}void 0!==G&&void 0!==G[ye]&&(be=G[ye]+" Tw\n"),0===ye?e.push(be+xe(fe,pe,p)+me):0===ve?e.push(be+me):1===ve&&e.push(be+xe(fe,pe,p)+me)}e=0===ve?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var we="BT\n/";return we+=ue+" "+te+" Tf\n",we+=_(te*w)+" TL\n",we+=$t+"\n",we+=b,we+=e,J(we+="ET"),h[ue]=!0,m};var jt=f.__private__.clip=f.clip=function(e){return J("evenodd"===e?"W*":"W"),this};f.clipEvenOdd=function(){return jt("evenodd")},f.__private__.discardPath=f.discardPath=function(){return J("n"),this};var Nt=f.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(e){return Nt(e)&&(c=e),this};var _t=f.__private__.getStyle=f.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},St=f.close=function(){return J("h"),this};f.stroke=function(){return J("S"),this},f.fill=function(e){return kt("f",e),this},f.fillEvenOdd=function(e){return kt("f*",e),this},f.fillStroke=function(e){return kt("B",e),this},f.fillStrokeEvenOdd=function(e){return kt("B*",e),this};var kt=function(e,t){"object"===(0,gV.A)(t)?Ct(t,e):J(e)},At=function(e){null===e||y===x&&void 0===e||(e=_t(e),J(e))};function Et(e,t,r,n,a){var s=new sJ(t||this.boundingBox,r||this.xStep,n||this.yStep,this.gState,a||this.matrix);s.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Ie(i,s),s}var Ct=function(e,t){var r=ye[e.key],n=xe[r];if(n instanceof aJ)J("q"),J(Tt(t)),n.gState&&f.setGState(n.gState),J(e.matrix.toString()+" cm"),J("/"+r+" sh"),J("Q");else if(n instanceof sJ){var a=new Pe(1,0,0,-1,0,hr());e.matrix&&(a=a.multiply(e.matrix||Oe),r=Et.call(n,e.key,e.boundingBox,e.xStep,e.yStep,a).id),J("q"),J("/Pattern cs"),J("/"+r+" scn"),n.gState&&f.setGState(n.gState),J(t),J("Q")}},Tt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pt=f.moveTo=function(e,t){return J(_(C(e))+" "+_(T(t))+" m"),this},Dt=f.lineTo=function(e,t){return J(_(C(e))+" "+_(T(t))+" l"),this},Ot=f.curveTo=function(e,t,r,n,a,s){return J([_(C(e)),_(T(t)),_(C(r)),_(T(n)),_(C(a)),_(T(s)),"c"].join(" ")),this};f.__private__.line=f.line=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!Nt(a))throw new Error("Invalid arguments passed to jsPDF.line");return y===b?this.lines([[r-e,n-t]],e,t,[1,1],a||"S"):this.lines([[r-e,n-t]],e,t,[1,1]).stroke()},f.__private__.lines=f.lines=function(e,t,r,n,a,s){var i,o,l,c,d,u,h,f,p,m,g,v;if("number"==typeof e&&(v=r,r=t,t=e,e=v),n=n||[1,1],s=s||!1,isNaN(t)||isNaN(r)||!Array.isArray(e)||!Array.isArray(n)||!Nt(a)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Pt(t,r),i=n[0],o=n[1],c=e.length,m=t,g=r,l=0;l<c;l++)2===(d=e[l]).length?(m=d[0]*i+m,g=d[1]*o+g,Dt(m,g)):(u=d[0]*i+m,h=d[1]*o+g,f=d[2]*i+m,p=d[3]*o+g,m=d[4]*i+m,g=d[5]*o+g,Ot(u,h,f,p,m,g));return s&&St(),At(a),this},f.path=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.c;switch(r.op){case"m":Pt(n[0],n[1]);break;case"l":Dt(n[0],n[1]);break;case"c":Ot.apply(this,n);break;case"h":St()}}return this},f.__private__.rect=f.rect=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!Nt(a))throw new Error("Invalid arguments passed to jsPDF.rect");return y===b&&(n=-n),J([_(C(e)),_(T(t)),_(C(r)),_(C(n)),"re"].join(" ")),At(a),this},f.__private__.triangle=f.triangle=function(e,t,r,n,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(s)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[r-e,n-t],[a-r,s-n],[e-a,t-s]],e,t,[1,1],i,!0),this},f.__private__.roundedRect=f.roundedRect=function(e,t,r,n,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(s)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return a=Math.min(a,.5*r),s=Math.min(s,.5*n),this.lines([[r-2*a,0],[a*o,0,a,s-s*o,a,s],[0,n-2*s],[0,s*o,-a*o,s,-a,s],[2*a-r,0],[-a*o,0,-a,-s*o,-a,-s],[0,2*s-n],[0,-s*o,a*o,-s,a,-s]],e+a,t,[1,1],i,!0),this},f.__private__.ellipse=f.ellipse=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!Nt(a))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*r,i=4/3*(Math.SQRT2-1)*n;return Pt(e+r,t),Ot(e+r,t-i,e+s,t-n,e,t-n),Ot(e-s,t-n,e-r,t-i,e-r,t),Ot(e-r,t+i,e-s,t+n,e,t+n),Ot(e+s,t+n,e+r,t+i,e+r,t),At(a),this},f.__private__.circle=f.circle=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||!Nt(n))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,r,r,n)},f.setFont=function(e,t,r){return r&&(t=N(t,r)),ue=lt(e,t,{disableWarning:!1}),this};var It=f.__private__.getFont=f.getFont=function(){return ge[lt.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var e,t,r={};for(e in ve)if(ve.hasOwnProperty(e))for(t in r[e]=[],ve[e])ve[e].hasOwnProperty(t)&&r[e].push(t);return r},f.addFont=function(e,t,r,n,a){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?a=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(r=N(r,n)),tt.call(this,e,t,r,a=a||"Identity-H")};var Mt,Rt=e.lineWidth||.200025,Lt=f.__private__.getLineWidth=f.getLineWidth=function(){return Rt},Ft=f.__private__.setLineWidth=f.setLineWidth=function(e){return Rt=e,J(_(C(e))+" w"),this};f.__private__.setLineDash=iJ.API.setLineDash=iJ.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return _(C(e))}).join(" "),t=_(C(t)),J("["+e+"] "+t+" d"),this};var Bt=f.__private__.getLineHeight=f.getLineHeight=function(){return te*Mt};f.__private__.getLineHeight=f.getLineHeight=function(){return te*Mt};var zt=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Mt=e),this},Ut=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Mt};zt(e.lineHeight);var qt=f.__private__.getHorizontalCoordinate=function(e){return C(e)},Wt=f.__private__.getVerticalCoordinate=function(e){return y===x?e:Se[B].mediaBox.topRightY-Se[B].mediaBox.bottomLeftY-C(e)},Ht=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(e){return _(qt(e))},Vt=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(e){return _(Wt(e))},Gt=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return qe(Gt)},f.__private__.setStrokeColor=f.setDrawColor=function(e,t,r,n){return Gt=We({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"draw",precision:2}),J(Gt),this};var Kt=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return qe(Kt)},f.__private__.setFillColor=f.setFillColor=function(e,t,r,n){return Kt=We({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"fill",precision:2}),J(Kt),this};var $t=e.textColor||"0 g",Yt=f.__private__.getTextColor=f.getTextColor=function(){return qe($t)};f.__private__.setTextColor=f.setTextColor=function(e,t,r,n){return $t=We({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"text",precision:3}),this};var Xt=e.charSpace,Jt=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Xt||0)};f.__private__.setCharSpace=f.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xt=e,this};var Zt=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,J(t+" J"),this};var Qt=0;f.__private__.setLineJoin=f.setLineJoin=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qt=t,J(t+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(_(C(e))+" M"),this},f.GState=rJ,f.setGState=function(e){(e="string"==typeof e?we[je[e]]:er(null,e)).equals(Ne)||(J("/"+e.id+" gs"),Ne=e)};var er=function(e,t){if(!e||!je[e]){var r=!1;for(var n in we)if(we.hasOwnProperty(n)&&we[n].equals(t)){r=!0;break}if(r)t=we[n];else{var a="GS"+(Object.keys(we).length+1).toString(10);we[a]=t,t.id=a}return e&&(je[e]=t.id),ke.publish("addGState",t),t}};f.addGState=function(e,t){return er(e,t),this},f.saveGraphicsState=function(){return J("q"),be.push({key:ue,size:te,color:$t}),this},f.restoreGraphicsState=function(){J("Q");var e=be.pop();return ue=e.key,te=e.size,$t=e.color,Ne=null,this},f.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},f.comment=function(e){return J("#"+e),this};var tr=function(e,t){var r=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var n=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var a="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return a},set:function(e){a=e.toString()}}),this},rr=function(e,t,r,n){tr.call(this,e,t),this.type="rect";var a=r||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var s=n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},nr=function(){this.page=_e,this.currentPage=B,this.pages=K.slice(0),this.pagesContext=Se.slice(0),this.x=fe,this.y=pe,this.matrix=me,this.width=ir(B),this.height=lr(B),this.outputDestination=Y,this.id="",this.objectNumber=-1};nr.prototype.restore=function(){_e=this.page,B=this.currentPage,Se=this.pagesContext,K=this.pages,fe=this.x,pe=this.y,me=this.matrix,or(B,this.width),cr(B,this.height),Y=this.outputDestination};var ar=function(e,t,r,n,a){Te.push(new nr),_e=B=0,K=[],fe=e,pe=t,me=a,nt([r,n])};for(var sr in f.beginFormObject=function(e,t,r,n,a){return ar(e,t,r,n,a),this},f.endFormObject=function(e){return function(e){if(Ce[e])Te.pop().restore();else{var t=new nr,r="Xo"+(Object.keys(Ee).length+1).toString(10);t.id=r,Ce[e]=r,Ee[r]=t,ke.publish("addFormObject",t),Te.pop().restore()}}(e),this},f.doFormObject=function(e,t){var r=Ee[Ce[e]];return J("q"),J(t.toString()+" cm"),J("/"+r.id+" Do"),J("Q"),this},f.getFormObject=function(e){var t=Ee[Ce[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},f.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(OX(mt(pt()),e),"function"==typeof OX.unload&&AX.setTimeout&&setTimeout(OX.unload,911),this):new Promise(function(t,r){try{var a=OX(mt(pt()),e);"function"==typeof OX.unload&&AX.setTimeout&&setTimeout(OX.unload,911),t(a)}catch(n){r(n.message)}})},iJ.API)iJ.API.hasOwnProperty(sr)&&("events"===sr&&iJ.API.events.length?function(e,t){var r,n,a;for(a=t.length-1;-1!==a;a--)r=t[a][0],n=t[a][1],e.subscribe.apply(e,[r].concat("function"==typeof n?[n]:n))}(ke,iJ.API.events):f[sr]=iJ.API[sr]);function ir(e){return Se[e].mediaBox.topRightX-Se[e].mediaBox.bottomLeftX}function or(e,t){Se[e].mediaBox.topRightX=t+Se[e].mediaBox.bottomLeftX}function lr(e){return Se[e].mediaBox.topRightY-Se[e].mediaBox.bottomLeftY}function cr(e,t){Se[e].mediaBox.topRightY=t+Se[e].mediaBox.bottomLeftY}var dr=f.getPageWidth=function(e){return ir(e=e||B)/he},ur=f.setPageWidth=function(e,t){or(e,t*he)},hr=f.getPageHeight=function(e){return lr(e=e||B)/he},fr=f.setPageHeight=function(e,t){cr(e,t*he)};return f.internal={pdfEscape:rt,getStyle:_t,getFont:It,getFontSize:ne,getCharSpace:Jt,getTextColor:Yt,getLineHeight:Bt,getLineHeightFactor:Ut,getLineWidth:Lt,write:Z,getHorizontalCoordinate:qt,getVerticalCoordinate:Wt,getCoordinateString:Ht,getVerticalCoordinateString:Vt,collections:{},newObject:Re,newAdditionalObject:Be,newObjectDeferred:Le,newObjectDeferredBegin:Fe,getFilters:He,putStream:Ve,events:ke,scaleFactor:he,pageSize:{getWidth:function(){return dr(B)},setWidth:function(e){ur(B,e)},getHeight:function(){return hr(B)},setHeight:function(e){fr(B,e)}},encryptionOptions:d,encryption:bt,getEncryptor:function(e){return null!==d?bt.encryptor(e,0):function(e){return e}},output:gt,getNumberOfPages:ot,pages:K,out:J,f2:A,f3:E,getPageInfo:xt,getPageInfoByObjId:yt,getCurrentPageInfo:wt,getPDFVersion:m,Point:tr,Rectangle:rr,Matrix:Pe,hasHotfix:vt},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return dr(B)},set:function(e){ur(B,e)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return hr(B)},set:function(e){fr(B,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,r=ee.length;t<r;t++){var n=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(h[n]=!0);var a=e[t][0].split("-");et({id:n,fontName:a[0],fontStyle:a[1]||""})}ke.publish("addFonts",{fonts:ge,dictionary:ve})}.call(f,ee),ue="F1",at(a,r),ke.publish("initialized"),f}QX.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},QX.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},QX.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},QX.prototype.processOwnerPassword=function(e,t){return JX($X(t).substr(0,5),e)},QX.prototype.encryptor=function(e,t){var r=$X(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return JX(r,e)}},rJ.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||(0,gV.A)(e)!==(0,gV.A)(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return 0===n},iJ.API={events:[]},iJ.version="3.0.3";var oJ=iJ.API,lJ=1,cJ=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},dJ=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},uJ=function(e){return e.toFixed(2)},hJ=function(e){return e.toFixed(5)};oJ.__acroform__={};var fJ=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},pJ=function(e){return e*lJ},mJ=function(e){var t=new PJ,r=VJ.internal.getHeight(e)||0,n=VJ.internal.getWidth(e)||0;return t.BBox=[0,0,Number(uJ(n)),Number(uJ(r))],t},gJ=oJ.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},vJ=oJ.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},bJ=oJ.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},xJ=oJ.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bJ(e,t-1)},yJ=oJ.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return gJ(e,t-1)},wJ=oJ.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return vJ(e,t-1)},jJ=oJ.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(uJ(l.lowerLeft_X)),Number(uJ(l.lowerLeft_Y)),Number(uJ(l.upperRight_X)),Number(uJ(l.upperRight_Y))]},NJ=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=_J(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+uJ(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=mJ(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},_J=function(e,t){var r=0===e.fontSize?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(e){return e.split("\n")}):a.map(function(e){return[e]});var s=r,i=VJ.internal.getHeight(e)||0;i=i<0?-i:i;var o=VJ.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,r,n){if(t+1<a.length){var s=r+" "+a[t+1][0];return SJ(s,e,n).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,d,u=SJ("3",e,s).height,h=e.multiline?i-s:(i-u)/2,f=h+=2,p=0,m=0,g=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+SJ(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var v="",b=0,x=0;x<a.length;x++)if(a.hasOwnProperty(x)){var y=!1;if(1!==a[x].length&&g!==a[x].length-1){if((u+2)*(b+2)+2>i)continue e;v+=a[x][g],y=!0,m=x,x--}else{v=" "==(v+=a[x][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var w=parseInt(x),j=l(w,v,s),N=x>=a.length-1;if(j&&!N){v+=" ",g=0;continue}if(j||N){if(N)m=w;else if(e.multiline&&(u+2)*(b+2)+2>i)continue e}else{if(!e.multiline)continue e;if((u+2)*(b+2)+2>i)continue e;m=w}}for(var _="",S=p;S<=m;S++){var k=a[S];if(e.multiline){if(S===m){_+=k[g]+" ",g=(g+1)%k.length;continue}if(S===p){_+=k[k.length-1]+" ";continue}}_+=k[0]+" "}switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,d=SJ(_,e,s).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=uJ(c)+" "+uJ(f)+" Td\n",t+="("+cJ(_)+") Tj\n",t+=-uJ(c)+" 0 Td\n",f=-(s+2),d=0,p=y?m:m+1,b++,v=""}break}return n.text=t,n.fontSize=s,n},SJ=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},kJ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},AJ=function(e,t){var r={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===r.type&&e.object===r.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},EJ=oJ.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(e){return e};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(0!==s&&(a+=" "),(0,gV.A)(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":"/"!==e[s].substr(0,1)?(void 0!==t&&r&&(n=r.internal.getEncryptor(t)),a+="("+cJ(n(e[s].toString()))+")"):a+=e[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},CJ=function(e,t,r){var n=function(e){return e};return void 0!==t&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+cJ(n(e))+")"},TJ=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};TJ.prototype.toString=function(){return this.objId+" 0 R"},TJ.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},TJ.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var r in t)if(!1===Object.getOwnPropertyDescriptor(this,t[r]).configurable){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:EJ(a,this.objId,this.scope)}):a instanceof TJ?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):"function"!=typeof a&&e.push({key:n,value:a}))}return e};var PJ=function(){TJ.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};fJ(PJ,TJ);var DJ=function(){TJ.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+cJ(t(e))+")"}},set:function(t){e=t}})};fJ(DJ,TJ);var OJ=function e(){TJ.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(t,3))},set:function(e){!0===Boolean(e)?this.F=yJ(t,3):this.F=wJ(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');r=e}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==n.length)return n},set:function(e){n=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(e){n[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(e){n[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(e){n[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(e){n[3]=e}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof UJ)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+cJ(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/lJ:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof UJ||this instanceof WJ))return CJ(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof FJ==0?CJ(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof FJ==0?"("===e.substr(0,1)?dJ(e.substr(1,e.length-2)):dJ(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof FJ==1?dJ(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof FJ==1?"/"+e:e}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof FJ==0?CJ(f,this.objId,this.scope):f},set:function(e){e=e.toString(),f=this instanceof FJ==0?"("===e.substr(0,1)?dJ(e.substr(1,e.length-2)):dJ(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof FJ==1?dJ(f.substr(1,f.length-1)):f},set:function(e){e=e.toString(),f=this instanceof FJ==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,1):this.Ff=wJ(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,2):this.Ff=wJ(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,3):this.Ff=wJ(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};fJ(OJ,TJ);var IJ=function(){OJ.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return EJ(t,this.objId,this.scope)},set:function(e){var r,n;n=[],"string"==typeof(r=e)&&(n=function(e,t,r){r||(r=1);for(var n,a=[];n=t.exec(e);)a.push(n[r]);return a}(r,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,18):this.Ff=wJ(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=yJ(this.Ff,19):this.Ff=wJ(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=yJ(this.Ff,20),t.sort()):this.Ff=wJ(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,22):this.Ff=wJ(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,23):this.Ff=wJ(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,27):this.Ff=wJ(this.Ff,27)}}),this.hasAppearanceStream=!1};fJ(IJ,OJ);var MJ=function(){IJ.call(this),this.fontName="helvetica",this.combo=!1};fJ(MJ,IJ);var RJ=function(){MJ.call(this),this.combo=!0};fJ(RJ,MJ);var LJ=function(){RJ.call(this),this.edit=!0};fJ(LJ,RJ);var FJ=function(){OJ.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,15):this.Ff=wJ(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,16):this.Ff=wJ(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,17):this.Ff=wJ(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,26):this.Ff=wJ(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var r,n=[];for(r in n.push("<<"),t)n.push("/"+r+" ("+cJ(e(t[r]))+")");return n.push(">>"),n.join("\n")}},set:function(e){"object"===(0,gV.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};fJ(FJ,OJ);var BJ=function(){FJ.call(this),this.pushButton=!0};fJ(BJ,FJ);var zJ=function(){FJ.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};fJ(zJ,FJ);var UJ=function(){var e,t;OJ.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,r=[];for(t in r.push("<<"),n)r.push("/"+t+" ("+cJ(e(n[t]))+")");return r.push(">>"),r.join("\n")},set:function(e){"object"===(0,gV.A)(e)&&(n=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(e){"string"==typeof e&&(n.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=VJ.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fJ(UJ,OJ),zJ.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},zJ.prototype.createOption=function(e){var t=new UJ;return t.Parent=this,t.optionName=e,this.Kids.push(t),GJ.call(this.scope,t),t};var qJ=function(){FJ.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=VJ.CheckBox.createAppearanceStream()};fJ(qJ,FJ);var WJ=function(){OJ.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,13):this.Ff=wJ(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,21):this.Ff=wJ(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,23):this.Ff=wJ(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,24):this.Ff=wJ(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,25):this.Ff=wJ(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,26):this.Ff=wJ(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fJ(WJ,OJ);var HJ=function(){WJ.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(xJ(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=yJ(this.Ff,14):this.Ff=wJ(this.Ff,14)}}),this.password=!0};fJ(HJ,WJ);var VJ={CheckBox:{createAppearanceStream:function(){return{N:{On:VJ.CheckBox.YesNormal},D:{On:VJ.CheckBox.YesPushDown,Off:VJ.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=mJ(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=_J(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+uJ(VJ.internal.getWidth(e))+" "+uJ(VJ.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+uJ(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join("\n"),t},YesNormal:function(e){var t=mJ(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=VJ.internal.getHeight(e),i=VJ.internal.getWidth(e),o=_J(e,e.caption);return a.push("1 g"),a.push("0 0 "+uJ(i)+" "+uJ(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+uJ(i-1)+" "+uJ(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+uJ(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=mJ(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+uJ(VJ.internal.getWidth(e))+" "+uJ(VJ.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:VJ.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=VJ.RadioButton.Circle.YesNormal,t.D[e]=VJ.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=mJ(e);t.scope=e.scope;var r=[],n=VJ.internal.getWidth(e)<=VJ.internal.getHeight(e)?VJ.internal.getWidth(e)/4:VJ.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=VJ.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+hJ(VJ.internal.getWidth(e)/2)+" "+hJ(VJ.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=mJ(e);t.scope=e.scope;var r=[],n=VJ.internal.getWidth(e)<=VJ.internal.getHeight(e)?VJ.internal.getWidth(e)/4:VJ.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*VJ.internal.Bezier_C).toFixed(5)),i=Number((n*VJ.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+hJ(VJ.internal.getWidth(e)/2)+" "+hJ(VJ.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+hJ(VJ.internal.getWidth(e)/2)+" "+hJ(VJ.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=mJ(e);t.scope=e.scope;var r=[],n=VJ.internal.getWidth(e)<=VJ.internal.getHeight(e)?VJ.internal.getWidth(e)/4:VJ.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*VJ.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+hJ(VJ.internal.getWidth(e)/2)+" "+hJ(VJ.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:VJ.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=VJ.RadioButton.Cross.YesNormal,t.D[e]=VJ.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=mJ(e);t.scope=e.scope;var r=[],n=VJ.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+uJ(VJ.internal.getWidth(e)-2)+" "+uJ(VJ.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(uJ(n.x1.x)+" "+uJ(n.x1.y)+" m"),r.push(uJ(n.x2.x)+" "+uJ(n.x2.y)+" l"),r.push(uJ(n.x4.x)+" "+uJ(n.x4.y)+" m"),r.push(uJ(n.x3.x)+" "+uJ(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=mJ(e);t.scope=e.scope;var r=VJ.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+uJ(VJ.internal.getWidth(e))+" "+uJ(VJ.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+uJ(VJ.internal.getWidth(e)-2)+" "+uJ(VJ.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(uJ(r.x1.x)+" "+uJ(r.x1.y)+" m"),n.push(uJ(r.x2.x)+" "+uJ(r.x2.y)+" l"),n.push(uJ(r.x4.x)+" "+uJ(r.x4.y)+" m"),n.push(uJ(r.x3.x)+" "+uJ(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=mJ(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+uJ(VJ.internal.getWidth(e))+" "+uJ(VJ.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};VJ.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=VJ.internal.getWidth(e),r=VJ.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},VJ.internal.getWidth=function(e){var t=0;return"object"===(0,gV.A)(e)&&(t=pJ(e.Rect[2])),t},VJ.internal.getHeight=function(e){var t=0;return"object"===(0,gV.A)(e)&&(t=pJ(e.Rect[3])),t};var GJ=oJ.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(OJ.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(kJ)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");lJ=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new DJ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];n.objId=void 0,n.hasAnnotation&&AJ(n,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var r=!e;for(var n in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(n)){var a=e[n],s=[],i=a.Rect;if(a.Rect&&(a.Rect=jJ(a.Rect,t)),t.internal.newObjectDeferredBegin(a.objId,!0),a.DA=VJ.createDefaultAppearanceStream(a),"object"===(0,gV.A)(a)&&"function"==typeof a.getKeyValueListForStream&&(s=a.getKeyValueListForStream()),a.Rect=i,a.hasAppearanceStream&&!a.appearanceStreamContent){var o=NJ(a);s.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(a.appearanceStreamContent){var l="";for(var c in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(c)){var d=a.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var n in d)if(d.hasOwnProperty(n)){var u=d[n];"function"==typeof u&&(u=u.call(t,a)),l+="/"+n+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,a)),l+="/"+n+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}s.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:s,objectId:a.objId}),t.internal.out("endobj")}r&&function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,gV.A)(a)&&"function"==typeof a.putStream&&a.putStream(),delete e[n]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof OJ))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};oJ.AcroFormChoiceField=IJ,oJ.AcroFormListBox=MJ,oJ.AcroFormComboBox=RJ,oJ.AcroFormEditBox=LJ,oJ.AcroFormButton=FJ,oJ.AcroFormPushButton=BJ,oJ.AcroFormRadioButton=zJ,oJ.AcroFormCheckBox=qJ,oJ.AcroFormTextField=WJ,oJ.AcroFormPasswordField=HJ,oJ.AcroFormAppearance=VJ,oJ.AcroForm={ChoiceField:IJ,ListBox:MJ,ComboBox:RJ,EditBox:LJ,Button:FJ,PushButton:BJ,RadioButton:zJ,CheckBox:qJ,TextField:WJ,PasswordField:HJ,Appearance:VJ},iJ.AcroForm={ChoiceField:IJ,ListBox:MJ,ComboBox:RJ,EditBox:LJ,Button:FJ,PushButton:BJ,RadioButton:zJ,CheckBox:qJ,TextField:WJ,PasswordField:HJ,Appearance:VJ};iJ.AcroForm;function KJ(e){return e.reduce(function(e,t,r){return e[t]=r,e},{})}!function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(e,t){var a,s,i,o,l,c=r;if("RGBA"===(t=t||r)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(j(e))for(l in n)for(i=n[l],a=0;a<i.length;a+=1){for(o=!0,s=0;s<i[a].length;s+=1)if(void 0!==i[a][s]&&i[a][s]!==e[s]){o=!1;break}if(!0===o){c=l;break}}else for(l in n)for(i=n[l],a=0;a<i.length;a+=1){for(o=!0,s=0;s<i[a].length;s+=1)if(void 0!==i[a][s]&&i[a][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){c=l;break}}return c===r&&t!==r&&(c=t),c},s=function e(t){for(var r=this.internal.write,n=this.internal.putStream,a=(0,this.internal.getFilters)();-1!==a.indexOf("FlateEncode");)a.splice(a.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===v.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===v.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)&&t.transparency.length>0){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(n({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:t.objectId}),r("endobj"),"sMask"in t&&void 0!==t.sMask){var d,u=null!==(d=t.sMaskBitsPerComponent)&&void 0!==d?d:t.bitsPerComponent,h={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:u,data:t.sMask};"filter"in t&&(h.decodeParameters="/Predictor ".concat(t.predictor," /Colors 1 /BitsPerComponent ").concat(u," /Columns ").concat(t.width),h.filter=t.filter),e.call(this,h)}if(t.colorSpace===v.INDEXED){var f=this.internal.newObject();n({data:_(new Uint8Array(t.palette)),objectId:f}),r("endobj")}},i=function(){var e=this.internal.collections[t+"images"];for(var r in e)s.call(this,e[r])},o=function(){var e,r=this.internal.collections[t+"images"],n=this.internal.write;for(var a in r)n("/I"+(e=r[a]).index,e.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections[t+"images"];return l.call(this),e},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,gV.A)(e)&&1===e.nodeType},f=function(t,r){if("IMG"===t.nodeName&&t.hasAttribute("src")){var n=""+t.getAttribute("src");if(0===n.indexOf("data:image/"))return MX(unescape(n).split("base64,").pop());var a=e.loadFile(n,!0);if(void 0!==a)return a}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(r){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return MX(t.toDataURL(s,1).split("base64,").pop())}},p=function(e){var r=this.internal.collections[t+"images"];if(r)for(var n in r)if(e===r[n].alias)return r[n]},m=function(e,t,r){return e||t||(e=-96,t=-96),e<0&&(e=-1*r.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*r.height*72/t/this.internal.scaleFactor),0===e&&(e=t*r.width/r.height),0===t&&(t=e*r.height/r.width),[e,t]},g=function(e,t,r,n,a,s){var i=m.call(this,r,n,a),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(r=i[0],n=i[1],d[a.index]=a,s){s*=Math.PI/180;var u=Math.cos(s),h=Math.sin(s),f=function(e){return e.toFixed(4)},p=[f(u),f(h),f(-1*h),f(u),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),l(t+n),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([o(r),"0","0",o(n),"0","0","cm"].join(" "))):this.internal.write([o(r),"0","0",o(n),o(e),l(t+n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+a.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=e.__addimage__.sHashCode=function(e){var t,r,n=0;if("string"==typeof e)for(r=e.length,t=0;t<r;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;else if(j(e))for(r=e.byteLength/2,t=0;t<r;t++)n=(n<<5)-n+e[t],n|=0;return n},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var j=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},N=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},_=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",r=j(e)?e:new Uint8Array(e),n=0;n<r.length;n+=8192)t+=String.fromCharCode.apply(null,r.subarray(n,n+8192));return t};e.addImage=function(){var e,t,n,a,s,i,o,c,d;if("number"==typeof arguments[1]?(t=r,n=arguments[1],a=arguments[2],s=arguments[3],i=arguments[4],o=arguments[5],c=arguments[6],d=arguments[7]):(t=arguments[1],n=arguments[2],a=arguments[3],s=arguments[4],i=arguments[5],o=arguments[6],c=arguments[7],d=arguments[8]),"object"===(0,gV.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var u=e;e=u.imageData,t=u.format||t||r,n=u.x||n||0,a=u.y||a||0,s=u.w||u.width||s,i=u.h||u.height||i,o=u.alias||o,c=u.compression||c,d=u.rotation||u.angle||d}var f=this.internal.getFilters();if(void 0===c&&-1!==f.indexOf("FlateEncode")&&(c="SLOW"),isNaN(n)||isNaN(a))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var p=S.call(this,e,t,o,c);return g.call(this,n,a,s,i,p,d),this};var S=function(t,n,s,i){var o,l,c;if("string"==typeof t&&a(t)===r){t=unescape(t);var m=k(t,!1);(""!==m||void 0!==(m=e.loadFile(t,!0)))&&(t=m)}if(h(t)&&(t=f(t,n)),n=a(t,n),!u(n))throw new Error("addImage does not support files of type '"+n+"', please ensure that a plugin for '"+n+"' support is added.");if((null==(c=s)||0===c.length)&&(s=function(e){return"string"==typeof e||j(e)?x(e):j(e.data)?x(e.data):null}(t)),(o=p.call(this,s))||(t instanceof Uint8Array||"RGBA"===n||(l=t,t=N(t)),o=this["process"+n.toUpperCase()](t,d.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:b.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},k=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var r,n="";if("string"==typeof e){var s;r=null!==(s=w(e))&&void 0!==s?s:e;try{n=MX(r)}catch(a){if(t)throw y(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+a.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return n};e.getImageProperties=function(t){var n,s,i="";if(h(t)&&(t=f(t)),"string"==typeof t&&a(t)===r&&(""===(i=k(t,!1))&&(i=e.loadFile(t)||""),t=i),s=a(t),!u(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(t instanceof Uint8Array||(t=N(t)),!(n=this["process"+s.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return n.fileType=s,n}}(iJ.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};iJ.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var r,n,a,s=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((r=l[d]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){r=l[u];var h=this.internal.pdfEscape,f=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),v=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(n="/Rect ["+s(r.bounds.x)+" "+i(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y)+"] ")+"/Contents ("+h(g(r.contents))+")",a+=" /Popup "+m.objId+" 0 R",a+=" /P "+o.objId+" 0 R",a+=" /T ("+h(g(v))+") >>",p.content=a;var b=p.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+s(r.bounds.x+30)+" "+i(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+i(r.bounds.y)+"] ")+" /Parent "+b,r.open&&(a+=" /Open true"),a+=" >>",m.content=a,this.internal.write(p.objId,"0 R",m.objId,"0 R");break;case"freetext":n="/Rect ["+s(r.bounds.x)+" "+i(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y+r.bounds.h)+"] ";var x=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+h(f(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var y=this.annotations._nameMap[r.options.name];r.options.pageNumber=y.page,r.options.top=y.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+h(f(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var w=i(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+w+" "+r.options.zoom+"]"}""!=a&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,r,n,a){var s=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+r),h:o(t+n)},options:a,type:"link"})},e.textWithLink=function(e,t,r,n){var a,s,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){s=n.maxWidth;var l=this.splitTextToSize(e,s).length;a=Math.ceil(o*l)}else s=i,a=o;return this.text(e,t,r,n),r+=.2*o,"center"===n.align&&(t-=i/2),"right"===n.align&&(t-=i),this.link(t,r-o,s,a,n),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(iJ.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&a.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&s(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,n=r,a="",s=0;for(t=0;t<e.length;t+=1)void 0!==n[e.charCodeAt(t)]?(s++,"number"==typeof(n=n[e.charCodeAt(t)])&&(a+=String.fromCharCode(n),n=r,s=0),t===e.length-1&&(n=r,a+=e.charAt(t-(s-1)),t-=s-1,s=0)):(n=r,a+=e.charAt(t-s),t-=s,s=0);return a};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==n[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,r){return i(e)?!1===s(e)?-1:!c(e)||!i(t)&&!i(r)||!i(r)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&i(t)&&!o(t)&&i(r)&&c(r)?3:o(e)||!i(r)?1:2:-1},f=function(e){var r=0,n=0,a=0,s="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(r=0;r<c.length;r+=1){for(d.push(""),n=0;n<c[r].length;n+=1)s=c[r][n],o=c[r][n-1],l=c[r][n+1],i(s)?(a=h(s,o,l),d[r]+=-1!==a?String.fromCharCode(t[s.charCodeAt(0)][a]):s):d[r]+=s;d[r]=u(d[r])}return d.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,r=[];if(Array.isArray(t)){var n=0;for(r=[],n=0;n<t.length;n+=1)Array.isArray(t[n])?r.push([f(t[n][0]),t[n][1],t[n][2]]):r.push([f(t[n])]);e=r}else e=f(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(iJ.API),iJ.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(e){r=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(e){n=e}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var r;if("2d"!==(e=e||"2d"))return null;for(r in t)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=t[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(iJ.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var r=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var n=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return n.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){n.call(this);var r=(t=t||{}).fontSize||this.getFontSize(),a=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)i<(l=this.getStringUnitWidth(e[u],{font:a})*r)&&(i=l);return 0!==i&&(o=e.length),{w:i/=s,h:Math.max((o*r*this.getLineHeightFactor()-r*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var e;e=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var a=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==a.lineNumber&&(a.lineNumber===e.lineNumber?(e.x=(a.x||0)+(a.width||0),e.y=a.y||0):a.y+a.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=a.y+a.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===r?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-i,e.y+i,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+i,{align:"center",baseline:"top",maxWidth:e.width-i-i}):this.text(e.text,e.x+i,e.y+i,{align:"left",baseline:"top",maxWidth:e.width-i-i})),this.internal.__cell__.lastCell=e,this};e.table=function(e,r,l,c,d){if(n.call(this),!l)throw new Error("No data for PDF table.");var u,h,f,p,m=[],g=[],v=[],b={},x={},y=[],w=[],j=(d=d||{}).autoSize||!1,N=!1!==d.printHeaders,_=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,S=d.margins||Object.assign({width:this.getPageWidth()},t),k="number"==typeof d.padding?d.padding:3,A=d.headerBackgroundColor||"#c8c8c8",E=d.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=_,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=E,this.setFontSize(_),null==c)g=m=Object.keys(l[0]),v=m.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,gV.A)(c[0]))for(m=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),v=c.map(function(e){return e.align||"left"}),u=0;u<c.length;u+=1)x[c[u].name]=.7499990551181103*c[u].width;else Array.isArray(c)&&"string"==typeof c[0]&&(g=m=c,v=m.map(function(){return"left"}));if(j||Array.isArray(c)&&"string"==typeof c[0])for(u=0;u<m.length;u+=1){for(b[p=m[u]]=l.map(function(e){return e[p]}),this.setFont(void 0,"bold"),y.push(this.getTextDimensions(g[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=b[p],this.setFont(void 0,"normal"),f=0;f<h.length;f+=1)y.push(this.getTextDimensions(h[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);x[p]=Math.max.apply(null,y)+k+k,y=[]}if(N){var C={};for(u=0;u<m.length;u+=1)C[m[u]]={},C[m[u]].text=g[u],C[m[u]].align=v[u];var T=o.call(this,C,x);w=m.map(function(t){return new s(e,r,x[t],T,C[t].text,void 0,C[t].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var P=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:l[u]},this);var D=o.call(this,l[u],x);for(f=0;f<m.length;f+=1){var O=l[u][m[f]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:f,data:O},this),i.call(this,new s(e,r,x[m[f]],D,O,u+2,P[m[f]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=r,this};var o=function(e,t){var r=this.internal.__cell__.padding,n=this.internal.__cell__.table_font_size,a=this.internal.scaleFactor;return Object.keys(e).map(function(n){var a=e[n];return this.splitTextToSize(a.hasOwnProperty("text")?a.text:a,t[n]-r-r)},this).map(function(e){return this.getLineHeightFactor()*e.length*n/a+r+r},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){n.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var a;if(r=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){a=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(a.y=this.internal.__cell__.margins.top||0,l.push(a)),a.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,a),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),r=!1}}(iJ.API);var $J={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},YJ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],XJ=KJ(YJ),JJ=[100,200,300,400,500,600,700,800,900],ZJ=KJ(JJ);function QJ(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(e){return $J[e=e||"normal"]?e:"normal"}(e.style),n=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),a=function(e){return"number"==typeof XJ[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function eZ(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var tZ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},rZ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function nZ(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function aZ(e){return e.trimLeft()}function sZ(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function iZ(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var oZ,lZ,cZ,dZ,uZ,hZ,fZ,pZ,mZ,gZ=["times"];function vZ(e,t,r,n,a){var s=4,i=yZ;switch(a){case iJ.API.image_compression.FAST:s=1,i=xZ;break;case iJ.API.image_compression.MEDIUM:s=6,i=wZ;break;case iJ.API.image_compression.SLOW:s=9,i=jZ}e=function(e,t,r,n){for(var a,s=e.length/t,i=new Uint8Array(e.length+s),o=[bZ,xZ,yZ,wZ,jZ],l=0;l<s;l+=1){var c=l*t,d=e.subarray(c,c+t);if(n)i.set(n(d,r,a),c+l);else{for(var u=o.length,h=[],f=0;f<u;f+=1)h[f]=o[f](d,r,a);var p=_Z(h.concat());i.set(h[p],c+l)}a=d}return i}(e,t,Math.ceil(r*n/8),i);var o=eG(e,{level:s});return iJ.API.__addimage__.arrayBufferToBinaryString(o)}function bZ(e){var t=Array.apply([],e);return t.unshift(0),t}function xZ(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=e[a-t]||0;n[a+1]=e[a]-s+256&255}return n}function yZ(e,t,r){var n=e.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var i=r&&r[s]||0;a[s+1]=e[s]-i+256&255}return a}function wZ(e,t,r){var n=e.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var i=e[s-t]||0,o=r&&r[s]||0;a[s+1]=e[s]+256-(i+o>>>1)&255}return a}function jZ(e,t,r){var n=e.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var i=NZ(e[s-t]||0,r&&r[s]||0,r&&r[s-t]||0);a[s+1]=e[s]-i+256&255}return a}function NZ(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),s=Math.abs(e+t-r-r);return n<=a&&n<=s?e:a<=s?t:r}function _Z(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function SZ(e,t,r){var n=t*r,a=Math.floor(n/8),s=16-(n-8*a+r),i=(1<<r)-1;return AZ(e,a)>>s&i}function kZ(e,t,r,n){var a=r*n,s=Math.floor(a/8),i=16-(a-8*s+n),o=(1<<n)-1,l=(t&o)<<i;!function(e,t,r){if(t+1<e.byteLength)e.setUint16(t,r,!1);else{var n=r>>8&255;e.setUint8(t,n)}}(e,s,AZ(e,s)&~(o<<i)&65535|l)}function AZ(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function EZ(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<1+(7&a);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var c=!0,d=[],u=0,h=null,f=0,p=null;for(this.width=r,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],1&m||(h=null),f=m>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++],w=y>>6&1,j=1<<1+(7&y),N=o,_=l,S=!1;y>>7&&(S=!0,N=t,_=j,t+=3*j);var k=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}d.push({x:g,y:v,width:b,height:x,has_local_palette:S,palette_offset:N,palette_size:_,data_offset:k,data_length:t-k,transparent_index:h,interlaced:!!w,delay:u,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,n){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);CZ(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,d=r-c,u=c,h=4*(a.y*r+a.x),f=4*((a.y+a.height)*r+a.x),p=h,m=4*d;!0===a.interlaced&&(m+=4*r*7);for(var g=8,v=0,b=i.length;v<b;++v){var x=i[v];if(0===u&&(u=c,(p+=m)>=f&&(m=4*d+4*r*(g-1),p=h+(c+d)*(g<<1),g>>=1)),x===l)p+=4;else{var y=e[o+3*x],w=e[o+3*x+1],j=e[o+3*x+2];n[p++]=j,n[p++]=w,n[p++]=y,n[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,n){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);CZ(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,d=r-c,u=c,h=4*(a.y*r+a.x),f=4*((a.y+a.height)*r+a.x),p=h,m=4*d;!0===a.interlaced&&(m+=4*r*7);for(var g=8,v=0,b=i.length;v<b;++v){var x=i[v];if(0===u&&(u=c,(p+=m)>=f&&(m=4*d+4*r*(g-1),p=h+(c+d)*(g<<1),g>>=1)),x===l)p+=4;else{var y=e[o+3*x],w=e[o+3*x+1],j=e[o+3*x+2];n[p++]=y,n[p++]=w,n[p++]=j,n[p++]=255}--u}}}function CZ(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,c=(1<<l)-1,d=0,u=0,h=0,f=e[t++],p=new Int32Array(4096),m=null;;){for(;d<16&&0!==f;)u|=e[t++]<<d,d+=8,1===f?f=e[t++]:--f;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==s){if(g===i)break;for(var v=g<o?g:m,b=0,x=v;x>s;)x=p[x]>>8,++b;var y=x;if(h+b+(v!==g?1:0)>n)return void CX.log("Warning, gif stream longer than expected.");r[h++]=y;var w=h+=b;for(v!==g&&(r[h++]=y),x=v;b--;)x=p[x],r[--w]=255&x,x>>=8;null!==m&&o<4096&&(p[o++]=m<<8|y,o>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else o=i+1,c=(1<<(l=a+1))-1,m=null}return h!==n&&CX.log("Warning, gif stream shorter than expected."),r}function TZ(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),m=[],g=0,v=7,b=new Array(64),x=new Array(64),y=new Array(64),w=new Array(256),j=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function D(e,t){for(var r=0,n=0,a=new Array,s=1;s<=16;s++){for(var i=1;i<=e[s];i++)a[t[n]]=[],a[t[n]][0]=r,a[t[n]][1]=s,n++,r++;r*=2}return a}function O(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(g|=1<<v),r--,--v<0&&(255==g?(I(255),I(0)):I(g),v=7,g=0)}function I(e){m.push(e)}function M(e){I(e>>8&255),I(255&e)}function R(e,t,r,n,a){for(var s,i=a[0],o=a[240],l=function(e,t){var r,n,a,s,i,o,l,c,d,u,h=0;for(d=0;d<8;++d){r=e[h],n=e[h+1],a=e[h+2],s=e[h+3],i=e[h+4],o=e[h+5],l=e[h+6];var p=r+(c=e[h+7]),m=r-c,g=n+l,v=n-l,b=a+o,x=a-o,y=s+i,w=s-i,j=p+y,N=p-y,_=g+b,S=g-b;e[h]=j+_,e[h+4]=j-_;var k=.707106781*(S+N);e[h+2]=N+k,e[h+6]=N-k;var A=.382683433*((j=w+x)-(S=v+m)),E=.5411961*j+A,C=1.306562965*S+A,T=.707106781*(_=x+v),P=m+T,D=m-T;e[h+5]=D+E,e[h+3]=D-E,e[h+1]=P+C,e[h+7]=P-C,h+=8}for(h=0,d=0;d<8;++d){r=e[h],n=e[h+8],a=e[h+16],s=e[h+24],i=e[h+32],o=e[h+40],l=e[h+48];var O=r+(c=e[h+56]),I=r-c,M=n+l,R=n-l,L=a+o,F=a-o,B=s+i,z=s-i,U=O+B,q=O-B,W=M+L,H=M-L;e[h]=U+W,e[h+32]=U-W;var V=.707106781*(H+q);e[h+16]=q+V,e[h+48]=q-V;var G=.382683433*((U=z+F)-(H=R+I)),K=.5411961*U+G,$=1.306562965*H+G,Y=.707106781*(W=F+R),X=I+Y,J=I-Y;e[h+40]=J+K,e[h+24]=J-K,e[h+8]=X+$,e[h+56]=X-$,h++}for(d=0;d<64;++d)u=e[d]*t[d],f[d]=u>0?u+.5|0:u-.5|0;return f}(e,t),c=0;c<64;++c)p[N[c]]=l[c];var d=p[0]-r;r=p[0],0==d?O(n[0]):(O(n[h[s=32767+d]]),O(u[s]));for(var m=63;m>0&&0==p[m];)m--;if(0==m)return O(i),r;for(var g,v=1;v<=m;){for(var b=v;0==p[v]&&v<=m;)++v;var x=v-b;if(x>=16){g=x>>4;for(var y=1;y<=g;++y)O(o);x&=15}s=32767+p[v],O(a[(x<<4)+h[s]]),O(u[s]),v++}return 63!=m&&O(i),r}function L(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=i((t[r]*e+50)/100);n=Math.min(Math.max(n,1),255),o[N[r]]=n}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var u=i((a[s]*e+50)/100);u=Math.min(Math.max(u,1),255),l[N[s]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var m=0;m<8;m++)c[f]=1/(o[N[f]]*h[p]*h[m]*8),d[f]=1/(l[N[f]]*h[p]*h[m]*8),f++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&L(s),m=new Array,g=0,v=7,M(65496),M(65504),M(16),I(74),I(70),I(73),I(70),I(0),I(1),I(1),I(0),M(1),M(1),I(0),I(0),function(){M(65499),M(132),I(0);for(var e=0;e<64;e++)I(o[e]);I(1);for(var t=0;t<64;t++)I(l[t])}(),function(e,t){M(65472),M(17),I(8),M(t),M(e),I(3),I(1),I(17),I(0),I(2),I(17),I(1),I(3),I(17),I(1)}(e.width,e.height),function(){M(65476),M(418),I(0);for(var e=0;e<16;e++)I(_[e+1]);for(var t=0;t<=11;t++)I(S[t]);I(16);for(var r=0;r<16;r++)I(k[r+1]);for(var n=0;n<=161;n++)I(A[n]);I(1);for(var a=0;a<16;a++)I(E[a+1]);for(var s=0;s<=11;s++)I(C[s]);I(17);for(var i=0;i<16;i++)I(T[i+1]);for(var o=0;o<=161;o++)I(P[o])}(),M(65498),M(12),I(3),I(1),I(0),I(2),I(17),I(3),I(17),I(0),I(63),I(0);var i=0,u=0,h=0;g=0,v=7,this.encode.displayName="_encode_";for(var f,p,w,N,D,F,B,z,U,q=e.data,W=e.width,H=e.height,V=4*W,G=0;G<H;){for(f=0;f<V;){for(D=V*G+f,B=-1,z=0,U=0;U<64;U++)F=D+(z=U>>3)*V+(B=4*(7&U)),G+z>=H&&(F-=V*(G+1+z-H)),f+B>=V&&(F-=f+B-V+4),p=q[F++],w=q[F++],N=q[F++],b[U]=(j[p]+j[w+256|0]+j[N+512|0]>>16)-128,x[U]=(j[p+768|0]+j[w+1024|0]+j[N+1280|0]>>16)-128,y[U]=(j[p+1280|0]+j[w+1536|0]+j[N+1792|0]>>16)-128;i=R(b,c,i,t,n),u=R(x,d,u,r,a),h=R(y,d,h,r,a),f+=32}G+=8}if(v>=0){var K=[];K[1]=v+1,K[0]=(1<<v+1)-1,O(K)}return M(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=D(_,S),r=D(E,C),n=D(k,A),a=D(T,P),function(){for(var e=1,t=2,r=1;r<=15;r++){for(var n=e;n<t;n++)h[32767+n]=r,u[32767+n]=[],u[32767+n][1]=r,u[32767+n][0]=n;for(var a=-(t-1);a<=-e;a++)h[32767+a]=r,u[32767+a]=[],u[32767+a][1]=r,u[32767+a][0]=t-1+a;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)j[e]=19595*e,j[e+256|0]=38470*e,j[e+512|0]=7471*e+32768,j[e+768|0]=-11059*e,j[e+1024|0]=-21709*e,j[e+1280|0]=32768*e+8421375,j[e+1536|0]=-27439*e,j[e+1792|0]=-5329*e}(),L(e)}function PZ(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function DZ(e){function t(e){if(!e)throw Error("assert :P")}function r(e,t,r){for(var n=0;4>n;n++)if(e[t+n]!=r.charCodeAt(n))return!0;return!1}function n(e,t,r,n,a){for(var s=0;s<a;s++)e[t+s]=r[n+s]}function a(e,t,r,n){for(var a=0;a<n;a++)e[t+a]=r}function s(e){return new Int32Array(e)}function i(e,t){for(var r=[],n=0;n<e;n++)r.push(new t);return r}function o(e,t){var r=[];return function e(r,n,a){for(var s=a[n],i=0;i<s&&(r.push(a.length>n+1?[]:new t),!(a.length<n+1));i++)e(r[i],n+1,a)}(r,0,e),r}var l=function(){var e=this;function l(e,t){for(var r=1<<t-1>>>0;e&r;)r>>>=1;return r?(e&r-1)+r:e}function c(e,r,n,a,s){t(!(a%n));do{e[r+(a-=n)]=s}while(0<a)}function d(e,r,n,a,i){if(t(2328>=i),512>=i)var o=s(512);else if(null==(o=s(i)))return 0;return function(e,r,n,a,i,o){var d,h,f=r,p=1<<n,m=s(16),g=s(16);for(t(0!=i),t(null!=a),t(null!=e),t(0<n),h=0;h<i;++h){if(15<a[h])return 0;++m[a[h]]}if(m[0]==i)return 0;for(g[1]=0,d=1;15>d;++d){if(m[d]>1<<d)return 0;g[d+1]=g[d]+m[d]}for(h=0;h<i;++h)d=a[h],0<a[h]&&(o[g[d]++]=h);if(1==g[15])return(a=new u).g=0,a.value=o[0],c(e,f,1,p,a),p;var v,b=-1,x=p-1,y=0,w=1,j=1,N=1<<n;for(h=0,d=1,i=2;d<=n;++d,i<<=1){if(w+=j<<=1,0>(j-=m[d]))return 0;for(;0<m[d];--m[d])(a=new u).g=d,a.value=o[h++],c(e,f+y,i,N,a),y=l(y,d)}for(d=n+1,i=2;15>=d;++d,i<<=1){if(w+=j<<=1,0>(j-=m[d]))return 0;for(;0<m[d];--m[d]){if(a=new u,(y&x)!=b){for(f+=N,v=1<<(b=d)-n;15>b&&!(0>=(v-=m[b]));)++b,v<<=1;p+=N=1<<(v=b-n),e[r+(b=y&x)].g=v+n,e[r+b].value=f-r-b}a.g=d-n,a.value=o[h++],c(e,f+(y>>n),i,N,a),y=l(y,d)}}return w!=2*g[15]-1?0:p}(e,r,n,a,i,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function f(){this.G=i(5,u),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Lr,h)}function p(e,r,n,a){t(null!=e),t(null!=r),t(2147483648>a),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=r,e.pa=n,e.Jd=r,e.Yc=n+a,e.Zc=4<=a?n+a-4+1:n,k(e)}function m(e,t){for(var r=0;0<t--;)r|=E(e,128)<<t;return r}function g(e,t){var r=m(e,t);return A(e)?-r:r}function v(e,r,n,a){var s,i=0;for(t(null!=e),t(null!=r),t(4294967288>a),e.Sb=a,e.Ra=0,e.u=0,e.h=0,4<a&&(a=4),s=0;s<a;++s)i+=r[n+s]<<8*s;e.Ra=i,e.bb=a,e.oa=r,e.pa=n}function b(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<zr-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function x(e,r){if(t(0<=r),!e.h&&r<=Br){var n=j(e)&Fr[r];return e.u+=r,b(e),n}return e.h=1,e.u=0}function y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(e){return e.Ra>>>(e.u&zr-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>zr}function _(e,t){e.u=t,e.h=N(e)}function S(e){e.u>=Ur&&(t(e.u>=Ur),b(e))}function k(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function A(e){return m(e,1)}function E(e,t){var r=e.Ca;0>e.b&&k(e);var n=e.b,a=r*t>>>8,s=(e.I>>>n>a)+0;for(s?(r-=a,e.I-=a+1<<n>>>0):r=a+1,n=r,a=0;256<=n;)a+=8,n>>=8;return n=7^a+qr[n],e.b-=n,e.Ca=(r<<n)-1,s}function C(e,t,r){e[t+0]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function T(e,t){return e[t+0]|e[t+1]<<8}function P(e,t){return T(e,t)|e[t+2]<<16}function D(e,t){return T(e,t)|T(e,t+2)<<16}function O(e,r){var n=1<<r;return t(null!=e),t(0<r),e.X=s(n),null==e.X?0:(e.Mb=32-r,e.Xa=r,1)}function I(e,r){t(null!=e),t(null!=r),t(e.Xa==r.Xa),n(r.X,0,e.X,0,1<<r.Xa)}function M(){this.X=[],this.Xa=this.Mb=0}function R(e,r,n,a){t(null!=n),t(null!=a);var s=n[0],i=a[0];return 0==s&&(s=(e*i+r/2)/r),0==i&&(i=(r*s+e/2)/e),0>=s||0>=i?0:(n[0]=s,a[0]=i,1)}function L(e,t){return e+(1<<t)-1>>>t}function F(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function B(t,r){e[r]=function(r,n,a,s,i,o,l){var c;for(c=0;c<i;++c){var d=e[t](o[l+c-1],a,s+c);o[l+c]=F(r[n+c],d)}}}function z(){this.ud=this.hd=this.jd=0}function U(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function q(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function W(e,t){return q(e+(e-t+.5>>1))}function H(e,t,r){return Math.abs(t-r)-Math.abs(e-r)}function V(e,t,r,n,a,s,i){for(n=s[i-1],r=0;r<a;++r)s[i+r]=n=F(e[t+r],n)}function G(e,t,r,n,a){var s;for(s=0;s<r;++s){var i=e[t+s],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));n[a+s]=(4278255360&i)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function $(e,t,r,n,a,s){var i;for(i=0;i<n;++i){var o=t[r+i],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),a[s+i]=(4278255360&o)+(d<<16)+c}}function Y(t,r,n,a,s){e[r]=function(e,t,r,n,i,o,l,c,d){for(n=l;n<c;++n)for(l=0;l<d;++l)i[o++]=s(r[a(e[t++])])},e[t]=function(t,r,i,o,l,c,d){var u=8>>t.b,h=t.Ea,f=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;r<i;++r){var m,g=0;for(m=0;m<h;++m)m&t||(g=a(o[l++])),c[d++]=s(f[g&p]),g>>=u}else e["VP8LMapColor"+n](o,l,f,p,c,d,r,i,h)}}function X(e,t,r,n,a){for(r=t+r;t<r;){var s=e[t++];n[a++]=s>>16&255,n[a++]=s>>8&255,n[a++]=255&s}}function J(e,t,r,n,a){for(r=t+r;t<r;){var s=e[t++];n[a++]=s>>16&255,n[a++]=s>>8&255,n[a++]=255&s,n[a++]=s>>24&255}}function Z(e,t,r,n,a){for(r=t+r;t<r;){var s=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;n[a++]=s,n[a++]=i}}function Q(e,t,r,n,a){for(r=t+r;t<r;){var s=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;n[a++]=s,n[a++]=i}}function ee(e,t,r,n,a){for(r=t+r;t<r;){var s=e[t++];n[a++]=255&s,n[a++]=s>>8&255,n[a++]=s>>16&255}}function te(e,t,r,a,s,i){if(0==i)for(r=t+r;t<r;)C(a,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),s+=32;else n(a,s,e,t,r)}function re(t,r){e[r][0]=e[t+"0"],e[r][1]=e[t+"1"],e[r][2]=e[t+"2"],e[r][3]=e[t+"3"],e[r][4]=e[t+"4"],e[r][5]=e[t+"5"],e[r][6]=e[t+"6"],e[r][7]=e[t+"7"],e[r][8]=e[t+"8"],e[r][9]=e[t+"9"],e[r][10]=e[t+"10"],e[r][11]=e[t+"11"],e[r][12]=e[t+"12"],e[r][13]=e[t+"13"],e[r][14]=e[t+"0"],e[r][15]=e[t+"0"]}function ne(e){return e==qn||e==Wn||e==Hn||e==Vn}function ae(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ae,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var r=e.T,a=t.ba.f.RGBA,s=a.eb,i=a.fb+e.ka*a.A,o=ga[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,f=e.W,p=t.cc,m=t.dc,g=t.Mc,v=t.Nc,b=e.ka,x=e.ka+e.T,y=e.U,w=y+1>>1;for(0==b?o(l,c,null,null,d,u,h,f,d,u,h,f,s,i,null,null,y):(o(t.ec,t.fc,l,c,p,m,g,v,d,u,h,f,s,i-a.A,s,i,y),++r);b+2<x;b+=2)p=d,m=u,g=h,v=f,u+=e.Rc,f+=e.Rc,i+=2*a.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,m,g,v,d,u,h,f,s,i-a.A,s,i,y);return c+=e.fa,e.j+x<e.o?(n(t.ec,t.fc,l,c,y),n(t.cc,t.dc,d,u,w),n(t.Mc,t.Nc,h,f,w),r--):1&x||o(l,c,null,null,d,u,h,f,d,u,h,f,s,i+a.A,null,null,y),r}function ue(e,r,n){var a=e.F,s=[e.J];if(null!=a){var i=e.U,o=r.ba.S,l=o==Bn||o==Hn;r=r.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=r.eb;d=r.fb+d*r.A,e=_n(a,s[0],e.width,i,c,u,d+(l?0:3),r.A),t(n==c),e&&ne(o)&&jn(u,d,l,i,c,r.A)}return 0}function he(e){var t=e.ma,r=t.ba.S,n=11>r,a=r==Rn||r==Fn||r==Bn||r==zn||12==r||ne(r);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Ir(t.Oa,e,a?11:12))return 0;if(a&&ne(r)&&vr(),e.da)alert("todo:use_scaling");else{if(n){if(t.Ib=ce,e.Kb){if(r=e.U+1>>1,t.memory=s(e.U+2*r),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+r,t.Ib=de,vr()}}else alert("todo:EmitYUV");a&&(t.Jb=ue,n&&mr())}if(n&&!Ta){for(e=0;256>e;++e)Pa[e]=89858*(e-128)+Sa>>_a,Ia[e]=-22014*(e-128)+Sa,Oa[e]=-45773*(e-128),Da[e]=113618*(e-128)+Sa>>_a;for(e=ka;e<Aa;++e)t=76283*(e-16)+Sa>>_a,Ma[e-ka]=Ve(t,255),Ra[e-ka]=Ve(t+8>>4,15);Ta=1}return 1}function fe(e){var r=e.ma,n=e.U,a=e.T;return t(!(1&e.ka)),0>=n||0>=a?0:(n=r.Ib(e,r),null!=r.Jb&&r.Jb(e,r,n),r.Dc+=n,1)}function pe(e){e.ma.memory=null}function me(e,t,r,n){return 47!=x(e,8)?0:(t[0]=x(e,14)+1,r[0]=x(e,14)+1,n[0]=x(e,1),0!=x(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var r=e-2>>1;return(2+(1&e)<<r)+x(t,r)+1}function ve(e,t){return 120<t?t-120:1<=(r=((r=Jn[t-1])>>4)*e+(8-(15&r)))?r:1;var r}function be(e,t,r){var n=j(r),a=e[t+=255&n].g-8;return 0<a&&(_(r,r.u+8),n=j(r),t+=e[t].value,t+=n&(1<<a)-1),_(r,r.u+e[t].g),e[t].value}function xe(e,r,n){return n.g+=e.g,n.value+=e.value<<r>>>0,t(8>=n.g),e.g}function ye(e,r,n){var a=e.xc;return t((r=0==a?0:e.vc[e.md*(n>>a)+(r>>a)])<e.Wb),e.Ya[r]}function we(e,r,a,s){var i=e.ab,o=e.c*r,l=e.C;r=l+r;var c=a,d=s;for(s=e.Ta,a=e.Ua;0<i--;){var u=e.gc[i],h=l,f=r,p=c,m=d,g=(d=s,c=a,u.Ea);switch(t(h<f),t(f<=u.nc),u.hc){case 2:Vr(p,m,(f-h)*g,d,c);break;case 0:var v=h,b=f,x=d,y=c,w=(k=u).Ea;0==v&&(Wr(p,m,null,null,1,x,y),V(p,m+1,0,0,w-1,x,y+1),m+=w,y+=w,++v);for(var j=1<<k.b,N=j-1,_=L(w,k.b),S=k.K,k=k.w+(v>>k.b)*_;v<b;){var A=S,E=k,C=1;for(Hr(p,m,x,y-w,1,x,y);C<w;){var T=(C&~N)+j;T>w&&(T=w),(0,Xr[A[E++]>>8&15])(p,m+ +C,x,y+C-w,T-C,x,y+C),C=T}m+=w,y+=w,++v&N||(k+=_)}f!=u.nc&&n(d,c-g,d,c+(f-h-1)*g,g);break;case 1:for(g=p,b=m,w=(p=u.Ea)-(y=p&~(x=(m=1<<u.b)-1)),v=L(p,u.b),j=u.K,u=u.w+(h>>u.b)*v;h<f;){for(N=j,_=u,S=new z,k=b+y,A=b+p;b<k;)K(N[_++],S),Jr(S,g,b,m,d,c),b+=m,c+=m;b<A&&(K(N[_++],S),Jr(S,g,b,w,d,c),b+=w,c+=w),++h&x||(u+=v)}break;case 3:if(p==d&&m==c&&0<u.b){for(b=d,p=g=c+(f-h)*g-(y=(f-h)*L(u.Ea,u.b)),m=d,x=c,v=[],y=(w=y)-1;0<=y;--y)v[y]=m[x+y];for(y=w-1;0<=y;--y)b[p+y]=v[y];Gr(u,h,f,d,g,d,c)}else Gr(u,h,f,p,m,d,c)}c=s,d=a}d!=a&&n(s,a,c,d,o)}function je(e,r){var n=e.V,a=e.Ba+e.c*e.C,s=r-e.C;if(t(r<=e.l.o),t(16>=s),0<s){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(we(e,s,n,a),s=l=[l],t((n=e.C)<(a=r)),t(i.v<i.va),a>i.o&&(a=i.o),n<i.j){var d=i.j-n;n=i.j,s[0]+=d*c}if(n>=a?n=0:(s[0]+=4*i.v,i.ka=n-i.j,i.U=i.va-i.v,i.T=a-n,n=1),n){if(l=l[0],11>(n=e.ca).S){var u=n.f.RGBA,h=(a=n.S,s=i.U,i=i.T,d=u.eb,u.A),f=i;for(u=u.fb+e.Ma*u.A;0<f--;){var p=o,m=l,g=s,v=d,b=u;switch(a){case Mn:Zr(p,m,g,v,b);break;case Rn:Qr(p,m,g,v,b);break;case qn:Qr(p,m,g,v,b),jn(v,b,0,g,1,0);break;case Ln:rn(p,m,g,v,b);break;case Fn:te(p,m,g,v,b,1);break;case Wn:te(p,m,g,v,b,1),jn(v,b,0,g,1,0);break;case Bn:te(p,m,g,v,b,0);break;case Hn:te(p,m,g,v,b,0),jn(v,b,1,g,1,0);break;case zn:en(p,m,g,v,b);break;case Vn:en(p,m,g,v,b),Nn(v,b,g,1,0);break;case Un:tn(p,m,g,v,b);break;default:t(0)}l+=c,u+=h}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=n.height)}}e.C=r,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var r=e.Ya[t].G,n=e.Ya[t].H;if(0<r[1][n[1]+0].g||0<r[2][n[2]+0].g||0<r[3][n[3]+0].g)return 0}return 1}function _e(e,r,n,a,s,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ma[e.Z]);r<n;++r)ma[e.Z](o,l,a,s,a,s,i),o=a,l=s,s+=i;e.qd=o,e.rd=l}}function Se(e,r){var n=e.l.ma,a=0==n.Z||1==n.Z?e.l.j:e.C;if(a=e.C<a?a:e.C,t(r<=e.l.o),r>a){var s=e.l.width,i=n.ca,o=n.tb+s*a,l=e.V,c=e.Ba+e.c*a,d=e.gc;t(1==e.ab),t(3==d[0].hc),$r(d[0],a,r,l,c,i,o),_e(n,a,r,i,o,s)}e.C=e.Ma=r}function ke(e,r,n,a,s,i,o){var l=e.$/a,c=e.$%a,d=e.m,u=e.s,h=n+e.$,f=h;s=n+a*s;var p=n+a*i,m=280+u.ua,g=e.Pb?l:16777216,v=0<u.ua?u.Wa:null,b=u.wc,x=h<p?ye(u,c,l):null;t(e.C<i),t(p<=s);var y=!1;e:for(;;){for(;y||h<p;){var w=0;if(l>=g){var k=h-n;t((g=e).Pb),g.wd=g.m,g.xd=k,0<g.s.ua&&I(g.s.Wa,g.s.vb),g=l+Qn}if(c&b||(x=ye(u,c,l)),t(null!=x),x.Qb&&(r[h]=x.qb,y=!0),!y)if(S(d),x.jc){w=d,k=r;var A=h,E=x.pd[j(w)&Lr-1];t(x.jc),256>E.g?(_(w,w.u+E.g),k[A]=E.value,w=0):(_(w,w.u+E.g-256),t(256<=E.value),w=E.value),0==w&&(y=!0)}else w=be(x.G[0],x.H[0],d);if(d.h)break;if(y||256>w){if(!y)if(x.nd)r[h]=(x.qb|w<<8)>>>0;else{if(S(d),y=be(x.G[1],x.H[1],d),S(d),k=be(x.G[2],x.H[2],d),A=be(x.G[3],x.H[3],d),d.h)break;r[h]=(A<<24|y<<16|w<<8|k)>>>0}if(y=!1,++h,++c>=a&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=v))for(;f<h;)w=r[f++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else if(280>w){if(w=ge(w-256,d),k=be(x.G[4],x.H[4],d),S(d),k=ve(a,k=ge(k,d)),d.h)break;if(h-n<k||s-h<w)break e;for(A=0;A<w;++A)r[h+A]=r[h+A-k];for(h+=w,c+=w;c>=a;)c-=a,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(h<=s),c&b&&(x=ye(u,c,l)),null!=v)for(;f<h;)w=r[f++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else{if(!(w<m))break e;for(y=w-280,t(null!=v);f<h;)w=r[f++],v.X[(506832829*w&4294967295)>>>v.Mb]=w;w=h,t(!(y>>>(k=v).Xa)),r[w]=k.X[y],y=!0}y||t(d.h==N(d))}if(e.Pb&&d.h&&h<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&I(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=h-n}return 1}return e.a=3,0}function Ae(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var r=e.Wa;null!=r&&(r.X=null),e.vb=null,t(null!=e)}function Ee(){var t=new sr;return null==t?null:(t.a=0,t.xb=pa,re("Predictor","VP8LPredictors"),re("Predictor","VP8LPredictors_C"),re("PredictorAdd","VP8LPredictorsAdd"),re("PredictorAdd","VP8LPredictorsAdd_C"),Vr=G,Jr=$,Zr=X,Qr=J,en=Z,tn=Q,rn=ee,e.VP8LMapColor32b=Kr,e.VP8LMapColor8b=Yr,t)}function Ce(e,r,n,o,l){var c=1,h=[e],p=[r],m=o.m,g=o.s,v=null,b=0;e:for(;;){if(n)for(;c&&x(m,1);){var y=h,w=p,N=o,k=1,A=N.m,E=N.gc[N.ab],C=x(A,2);if(N.Oc&1<<C)c=0;else{switch(N.Oc|=1<<C,E.hc=C,E.Ea=y[0],E.nc=w[0],E.K=[null],++N.ab,t(4>=N.ab),C){case 0:case 1:E.b=x(A,3)+2,k=Ce(L(E.Ea,E.b),L(E.nc,E.b),0,N,E.K),E.K=E.K[0];break;case 3:var T,P=x(A,8)+1,D=16<P?0:4<P?1:2<P?2:3;if(y[0]=L(E.Ea,D),E.b=D,T=k=Ce(P,1,0,N,E.K)){var I,M=P,R=E,B=1<<(8>>R.b),z=s(B);if(null==z)T=0;else{var U=R.K[0],q=R.w;for(z[0]=R.K[0][0],I=1;I<1*M;++I)z[I]=F(U[q+I],z[I-1]);for(;I<4*B;++I)z[I]=0;R.K[0]=null,R.K[0]=z,T=1}}k=T;break;case 2:break;default:t(0)}c=k}}if(h=h[0],p=p[0],c&&x(m,1)&&!(c=1<=(b=x(m,4))&&11>=b)){o.a=3;break e}var W;if(W=c)t:{var H,V,G,K=o,$=h,Y=p,X=b,J=n,Z=K.m,Q=K.s,ee=[null],te=1,re=0,ne=Zn[X];r:for(;;){if(J&&x(Z,1)){var ae=x(Z,3)+2,se=L($,ae),ie=L(Y,ae),oe=se*ie;if(!Ce(se,ie,0,K,ee))break r;for(ee=ee[0],Q.xc=ae,H=0;H<oe;++H){var le=ee[H]>>8&65535;ee[H]=le,le>=te&&(te=le+1)}}if(Z.h)break r;for(V=0;5>V;++V){var ce=$n[V];!V&&0<X&&(ce+=1<<X),re<ce&&(re=ce)}var de=i(te*ne,u),ue=te,he=i(ue,f);if(null==he)var fe=null;else t(65536>=ue),fe=he;var pe=s(re);if(null==fe||null==pe||null==de){K.a=1;break r}var me=de;for(H=G=0;H<te;++H){var ge=fe[H],ve=ge.G,be=ge.H,ye=0,we=1,je=0;for(V=0;5>V;++V){ce=$n[V],ve[V]=me,be[V]=G,!V&&0<X&&(ce+=1<<X);n:{var Ne,_e=ce,Se=K,Ee=pe,Te=me,Pe=G,De=0,Oe=Se.m,Ie=x(Oe,1);if(a(Ee,0,0,_e),Ie){var Me=x(Oe,1)+1,Re=x(Oe,1),Le=x(Oe,0==Re?1:8);Ee[Le]=1,2==Me&&(Ee[Le=x(Oe,8)]=1);var Fe=1}else{var Be=s(19),ze=x(Oe,4)+4;if(19<ze){Se.a=3;var Ue=0;break n}for(Ne=0;Ne<ze;++Ne)Be[Xn[Ne]]=x(Oe,3);var qe=void 0,We=void 0,He=Se,Ve=Be,Ge=_e,Ke=Ee,$e=0,Ye=He.m,Xe=8,Je=i(128,u);a:for(;d(Je,0,7,Ve,19);){if(x(Ye,1)){var Ze=2+2*x(Ye,3);if((qe=2+x(Ye,Ze))>Ge)break a}else qe=Ge;for(We=0;We<Ge&&qe--;){S(Ye);var Qe=Je[0+(127&j(Ye))];_(Ye,Ye.u+Qe.g);var et=Qe.value;if(16>et)Ke[We++]=et,0!=et&&(Xe=et);else{var tt=16==et,rt=et-16,nt=Kn[rt],at=x(Ye,Gn[rt])+nt;if(We+at>Ge)break a;for(var st=tt?Xe:0;0<at--;)Ke[We++]=st}}$e=1;break a}$e||(He.a=3),Fe=$e}(Fe=Fe&&!Oe.h)&&(De=d(Te,Pe,8,Ee,_e)),Fe&&0!=De?Ue=De:(Se.a=3,Ue=0)}if(0==Ue)break r;if(we&&1==Yn[V]&&(we=0==me[G].g),ye+=me[G].g,G+=Ue,3>=V){var it,ot=pe[0];for(it=1;it<ce;++it)pe[it]>ot&&(ot=pe[it]);je+=ot}}if(ge.nd=we,ge.Qb=0,we&&(ge.qb=(ve[3][be[3]+0].value<<24|ve[1][be[1]+0].value<<16|ve[2][be[2]+0].value)>>>0,0==ye&&256>ve[0][be[0]+0].value&&(ge.Qb=1,ge.qb+=ve[0][be[0]+0].value<<8)),ge.jc=!ge.Qb&&6>je,ge.jc){var lt,ct=ge;for(lt=0;lt<Lr;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=xe(ht,8,ut),dt>>=xe(ct.G[1][ct.H[1]+dt],16,ut),dt>>=xe(ct.G[2][ct.H[2]+dt],0,ut),xe(ct.G[3][ct.H[3]+dt],24,ut))}}}Q.vc=ee,Q.Wb=te,Q.Ya=fe,Q.yc=de,W=1;break t}W=0}if(!(c=W)){o.a=3;break e}if(0<b){if(g.ua=1<<b,!O(g.Wa,b)){o.a=1,c=0;break e}}else g.ua=0;var ft=o,pt=h,mt=p,gt=ft.s,vt=gt.xc;if(ft.c=pt,ft.i=mt,gt.md=L(pt,vt),gt.wc=0==vt?-1:(1<<vt)-1,n){o.xb=fa;break e}if(null==(v=s(h*p))){o.a=1,c=0;break e}c=(c=ke(o,v,0,h,p,p,null))&&!m.h;break e}return c?(null!=l?l[0]=v:(t(null==v),t(n)),o.$=0,n||Ae(g)):Ae(g),c}function Te(e,r){var n=e.c*e.i,a=n+r+16*r;return t(e.c<=r),e.V=s(a),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+n+r,1)}function Pe(e,r){var n=e.C,a=r-n,s=e.V,i=e.Ba+e.c*n;for(t(r<=e.l.o);0<a;){var o=16<a?16:a,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*n,f=e.Ta,p=e.Ua;we(e,o,s,i),Sn(f,p,u,h,d),_e(l,n,n+o,u,h,c),a-=o,s+=o*e.c,n+=o}t(n==r),e.C=e.Ma=r}function De(){this.ub=this.yd=this.td=this.Rb=0}function Oe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ie(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Me(){this.Yb=function(){var e=[];return function e(t,r,n){for(var a=n[r],s=0;s<a&&(t.push(n.length>r+1?[]:0),!(n.length<r+1));s++)e(t[s],r+1,n)}(e,0,[3,11]),e}()}function Re(){this.jb=s(3),this.Wc=o([4,8],Me),this.Xc=o([4,17],Me)}function Le(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Fe(){this.ld=this.La=this.dd=this.tc=0}function Be(){this.Na=this.la=0}function ze(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ue(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qe(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fe),this.Y=0,this.ya=Array(new Ue),this.aa=0,this.l=new Ge}function We(){this.y=s(16),this.f=s(8),this.ea=s(8)}function He(){this.cb=this.a=0,this.sc="",this.m=new y,this.Od=new De,this.Kc=new Oe,this.ed=new Le,this.Qa=new Ie,this.Ic=this.$c=this.Aa=0,this.D=new qe,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,y),this.ia=0,this.pb=i(4,ze),this.Pa=new Re,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new We),this.Hd=0,this.rb=Array(new Be),this.sb=0,this.wa=Array(new Fe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ue),this.L=this.aa=0,this.gd=o([4,2],Fe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new He;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ra||(ra=Je)),e}function $e(e,t,r){return 0==e.a&&(e.a=t,e.sc=r,e.cb=0),0}function Ye(e,t,r){return 3<=r&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Xe(e,r){if(null==e)return 0;if(e.a=0,e.sc="OK",null==r)return $e(e,2,"null VP8Io passed to VP8GetHeaders()");var n=r.data,s=r.w,i=r.ha;if(4>i)return $e(e,7,"Truncated header.");var o=n[s+0]|n[s+1]<<8|n[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return $e(e,3,"Incorrect keyframe parameters.");if(!l.yd)return $e(e,4,"Frame not displayable.");s+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return $e(e,7,"cannot parse picture header");if(!Ye(n,s,i))return $e(e,3,"Bad code word");c.c=16383&(n[s+4]<<8|n[s+3]),c.Td=n[s+4]>>6,c.i=16383&(n[s+6]<<8|n[s+5]),c.Ud=n[s+6]>>6,s+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,r.width=c.c,r.height=c.i,r.Da=0,r.j=0,r.v=0,r.va=r.width,r.o=r.height,r.da=0,r.ib=r.width,r.hb=r.height,r.U=r.width,r.T=r.height,a((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,a(o.Zb,0,0,o.Zb.length),a(o.Lb,0,0,o.Lb)}if(l.ub>i)return $e(e,7,"bad partition length");p(o=e.m,n,s,l.ub),s+=l.ub,i-=l.ub,l.Rb&&(c.Ld=A(o),c.Kd=A(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=A(o),c.Cb){if(c.Bb=A(o),A(o)){for(c.Fb=A(o),d=0;4>d;++d)c.Zb[d]=A(o)?g(o,7):0;for(d=0;4>d;++d)c.Lb[d]=A(o)?g(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=A(o)?m(o,8):255}else c.Bb=0;if(o.Ka)return $e(e,3,"cannot parse segment header");if((c=e.ed).zd=A(o),c.Tb=m(o,6),c.wb=m(o,3),c.Pc=A(o),c.Pc&&A(o)){for(u=0;4>u;++u)A(o)&&(c.vd[u]=g(o,6));for(u=0;4>u;++u)A(o)&&(c.od[u]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return $e(e,3,"cannot parse filter header");var h=i;if(i=d=s,s=d+h,c=h,e.Xb=(1<<m(e.m,2))-1,h<3*(u=e.Xb))n=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var f=n[i+0]|n[i+1]<<8|n[i+2]<<16;f>c&&(f=c),p(e.Jc[+h],n,d,f),d+=f,c-=f,i+=3}p(e.Jc[+u],n,d,c),n=d<s?0:5}if(0!=n)return $e(e,n,"cannot parse partitions");for(n=m(d=e.m,7),i=A(d)?g(d,4):0,s=A(d)?g(d,4):0,c=A(d)?g(d,4):0,u=A(d)?g(d,4):0,d=A(d)?g(d,4):0,h=e.Qa,f=0;4>f;++f){if(h.Cb){var v=h.Zb[f];h.Fb||(v+=n)}else{if(0<f){e.pb[f]=e.pb[0];continue}v=n}var b=e.pb[f];b.Sc[0]=ea[Ve(v+i,127)],b.Sc[1]=ta[Ve(v+0,127)],b.Eb[0]=2*ea[Ve(v+s,127)],b.Eb[1]=101581*ta[Ve(v+c,127)]>>16,8>b.Eb[1]&&(b.Eb[1]=8),b.Qc[0]=ea[Ve(v+u,117)],b.Qc[1]=ta[Ve(v+d,127)],b.lc=v+d}if(!l.Rb)return $e(e,4,"Not a key frame.");for(A(o),l=e.Pa,n=0;4>n;++n){for(i=0;8>i;++i)for(s=0;3>s;++s)for(c=0;11>c;++c)u=E(o,la[n][i][s][c])?m(o,8):ia[n][i][s][c],l.Wc[n][i].Yb[s][c]=u;for(i=0;17>i;++i)l.Xc[n][i]=l.Wc[n][ca[i]]}return e.kc=A(o),e.kc&&(e.Bd=m(o,8)),e.cb=1}function Je(e,t,r,n,a,s,i){var o=t[a].Yb[r];for(r=0;16>a;++a){if(!E(e,o[r+0]))return a;for(;!E(e,o[r+1]);)if(o=t[++a].Yb[0],r=0,16==a)return 16;var l=t[a+1].Yb;if(E(e,o[r+2])){var c=e,d=0;if(E(c,(h=o)[(u=r)+3]))if(E(c,h[u+6])){for(o=0,u=2*(d=E(c,h[u+8]))+(h=E(c,h[u+9+d])),d=0,h=na[u];h[o];++o)d+=d+E(c,h[o]);d+=3+(8<<u)}else E(c,h[u+7])?(d=7+2*E(c,165),d+=E(c,145)):d=5+E(c,159);else d=E(c,h[u+4])?3+E(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=i+aa[a],0>(c=e).b&&k(c);var u,h=c.b,f=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=f,c.Ca|=1,c.I-=(u+1&f)<<h,s[l]=((d^f)-f)*n[(0<a)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,a(e.zc,0,0,e.zc.length),e.ja=0}function Qe(e,t,r,n,a){a=e[t+r+32*n]+(a>>3),e[t+r+32*n]=-256&a?0>a?0:255:a}function et(e,t,r,n,a,s){Qe(e,t,0,r,n+a),Qe(e,t,1,r,n+s),Qe(e,t,2,r,n-s),Qe(e,t,3,r,n-a)}function tt(e){return(20091*e>>16)+e}function rt(e,t,r,n){var a,i=0,o=s(16);for(a=0;4>a;++a){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-tt(e[t+12]),u=tt(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+u,o[i+1]=c+d,o[i+2]=c-d,o[i+3]=l-u,i+=4,t++}for(a=i=0;4>a;++a)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],d=(35468*o[i+4]>>16)-tt(o[i+12]),Qe(r,n,0,0,l+(u=tt(o[i+4])+(35468*o[i+12]>>16))),Qe(r,n,1,0,c+d),Qe(r,n,2,0,c-d),Qe(r,n,3,0,l-u),i++,n+=32}function nt(e,t,r,n){var a=e[t+0]+4,s=35468*e[t+4]>>16,i=tt(e[t+4]),o=35468*e[t+1]>>16;et(r,n,0,a+i,e=tt(e[t+1]),o),et(r,n,1,a+s,e,o),et(r,n,2,a-s,e,o),et(r,n,3,a-i,e,o)}function at(e,t,r,n,a){rt(e,t,r,n),a&&rt(e,t+16,r,n+4)}function st(e,t,r,n){an(e,t+0,r,n,1),an(e,t+32,r,n+128,1)}function it(e,t,r,n){var a;for(e=e[t+0]+4,a=0;4>a;++a)for(t=0;4>t;++t)Qe(r,n,t,a,e)}function ot(e,t,r,n){e[t+0]&&ln(e,t+0,r,n),e[t+16]&&ln(e,t+16,r,n+4),e[t+32]&&ln(e,t+32,r,n+128),e[t+48]&&ln(e,t+48,r,n+128+4)}function lt(e,t,r,n){var a,i=s(16);for(a=0;4>a;++a){var o=e[t+0+a]+e[t+12+a],l=e[t+4+a]+e[t+8+a],c=e[t+4+a]-e[t+8+a],d=e[t+0+a]-e[t+12+a];i[0+a]=o+l,i[8+a]=o-l,i[4+a]=d+c,i[12+a]=d-c}for(a=0;4>a;++a)o=(e=i[0+4*a]+3)+i[3+4*a],l=i[1+4*a]+i[2+4*a],c=i[1+4*a]-i[2+4*a],d=e-i[3+4*a],r[n+0]=o+l>>3,r[n+16]=d+c>>3,r[n+32]=o-l>>3,r[n+48]=d-c>>3,n+=64}function ct(e,t,r){var n,a=t-32,s=On,i=255-e[a-1];for(n=0;n<r;++n){var o,l=s,c=i+e[t-1];for(o=0;o<r;++o)e[t+o]=l[c+e[a+o]];t+=32}}function dt(e,t){ct(e,t,4)}function ut(e,t){ct(e,t,8)}function ht(e,t){ct(e,t,16)}function ft(e,t){var r;for(r=0;16>r;++r)n(e,t+32*r,e,t-32,16)}function pt(e,t){var r;for(r=16;0<r;--r)a(e,t,e[t-1],16),t+=32}function mt(e,t,r){var n;for(n=0;16>n;++n)a(t,r+32*n,e,16)}function gt(e,t){var r,n=16;for(r=0;16>r;++r)n+=e[t-1+32*r]+e[t+r-32];mt(n>>5,e,t)}function vt(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t-1+32*r];mt(n>>4,e,t)}function bt(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t+r-32];mt(n>>4,e,t)}function xt(e,t){mt(128,e,t)}function yt(e,t,r){return e+2*t+r+2>>2}function wt(e,t){var r,a=t-32;for(a=new Uint8Array([yt(e[a-1],e[a+0],e[a+1]),yt(e[a+0],e[a+1],e[a+2]),yt(e[a+1],e[a+2],e[a+3]),yt(e[a+2],e[a+3],e[a+4])]),r=0;4>r;++r)n(e,t+32*r,a,0,a.length)}function jt(e,t){var r=e[t-1],n=e[t-1+32],a=e[t-1+64],s=e[t-1+96];C(e,t+0,16843009*yt(e[t-1-32],r,n)),C(e,t+32,16843009*yt(r,n,a)),C(e,t+64,16843009*yt(n,a,s)),C(e,t+96,16843009*yt(a,s,s))}function Nt(e,t){var r,n=4;for(r=0;4>r;++r)n+=e[t+r-32]+e[t-1+32*r];for(n>>=3,r=0;4>r;++r)a(e,t+32*r,n,4)}function _t(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=yt(n,a,e[t-1+96]),e[t+1+96]=e[t+0+64]=yt(r,n,a),e[t+2+96]=e[t+1+64]=e[t+0+32]=yt(s,r,n),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=yt(i,s,r),e[t+3+64]=e[t+2+32]=e[t+1+0]=yt(o,i,s),e[t+3+32]=e[t+2+0]=yt(l,o,i),e[t+3+0]=yt(c,l,o)}function St(e,t){var r=e[t+1-32],n=e[t+2-32],a=e[t+3-32],s=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=yt(e[t+0-32],r,n),e[t+1+0]=e[t+0+32]=yt(r,n,a),e[t+2+0]=e[t+1+32]=e[t+0+64]=yt(n,a,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=yt(a,s,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=yt(s,i,o),e[t+3+64]=e[t+2+96]=yt(i,o,l),e[t+3+96]=yt(o,l,l)}function kt(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=s+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=yt(a,n,r),e[t+0+64]=yt(n,r,s),e[t+0+32]=e[t+1+96]=yt(r,s,i),e[t+1+32]=e[t+2+96]=yt(s,i,o),e[t+2+32]=e[t+3+96]=yt(i,o,l),e[t+3+32]=yt(o,l,c)}function At(e,t){var r=e[t+0-32],n=e[t+1-32],a=e[t+2-32],s=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=r+n+1>>1,e[t+1+0]=e[t+0+64]=n+a+1>>1,e[t+2+0]=e[t+1+64]=a+s+1>>1,e[t+3+0]=e[t+2+64]=s+i+1>>1,e[t+0+32]=yt(r,n,a),e[t+1+32]=e[t+0+96]=yt(n,a,s),e[t+2+32]=e[t+1+96]=yt(a,s,i),e[t+3+32]=e[t+2+96]=yt(s,i,o),e[t+3+64]=yt(i,o,l),e[t+3+96]=yt(o,l,c)}function Et(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1+96];e[t+0+0]=r+n+1>>1,e[t+2+0]=e[t+0+32]=n+a+1>>1,e[t+2+32]=e[t+0+64]=a+s+1>>1,e[t+1+0]=yt(r,n,a),e[t+3+0]=e[t+1+32]=yt(n,a,s),e[t+3+32]=e[t+1+64]=yt(a,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function Ct(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=r+i+1>>1,e[t+0+32]=e[t+2+64]=n+r+1>>1,e[t+0+64]=e[t+2+96]=a+n+1>>1,e[t+0+96]=s+a+1>>1,e[t+3+0]=yt(o,l,c),e[t+2+0]=yt(i,o,l),e[t+1+0]=e[t+3+32]=yt(r,i,o),e[t+1+32]=e[t+3+64]=yt(n,r,i),e[t+1+64]=e[t+3+96]=yt(a,n,r),e[t+1+96]=yt(s,a,n)}function Tt(e,t){var r;for(r=0;8>r;++r)n(e,t+32*r,e,t-32,8)}function Pt(e,t){var r;for(r=0;8>r;++r)a(e,t,e[t-1],8),t+=32}function Dt(e,t,r){var n;for(n=0;8>n;++n)a(t,r+32*n,e,8)}function Ot(e,t){var r,n=8;for(r=0;8>r;++r)n+=e[t+r-32]+e[t-1+32*r];Dt(n>>4,e,t)}function It(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t+r-32];Dt(n>>3,e,t)}function Mt(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t-1+32*r];Dt(n>>3,e,t)}function Rt(e,t){Dt(128,e,t)}function Lt(e,t,r){var n=e[t-r],a=e[t+0],s=3*(a-n)+Pn[1020+e[t-2*r]-e[t+r]],i=Dn[112+(s+4>>3)];e[t-r]=On[255+n+Dn[112+(s+3>>3)]],e[t+0]=On[255+a-i]}function Ft(e,t,r,n){var a=e[t+0],s=e[t+r];return In[255+e[t-2*r]-e[t-r]]>n||In[255+s-a]>n}function Bt(e,t,r,n){return 4*In[255+e[t-r]-e[t+0]]+In[255+e[t-2*r]-e[t+r]]<=n}function zt(e,t,r,n,a){var s=e[t-3*r],i=e[t-2*r],o=e[t-r],l=e[t+0],c=e[t+r],d=e[t+2*r],u=e[t+3*r];return 4*In[255+o-l]+In[255+i-c]>n?0:In[255+e[t-4*r]-s]<=a&&In[255+s-i]<=a&&In[255+i-o]<=a&&In[255+u-d]<=a&&In[255+d-c]<=a&&In[255+c-l]<=a}function Ut(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)Bt(e,t+n,r,a)&&Lt(e,t+n,r)}function qt(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)Bt(e,t+n*r,1,a)&&Lt(e,t+n*r,1)}function Wt(e,t,r,n){var a;for(a=3;0<a;--a)Ut(e,t+=4*r,r,n)}function Ht(e,t,r,n){var a;for(a=3;0<a;--a)qt(e,t+=4,r,n)}function Vt(e,t,r,n,a,s,i,o){for(s=2*s+1;0<a--;){if(zt(e,t,r,s,i))if(Ft(e,t,r,o))Lt(e,t,r);else{var l=e,c=t,d=r,u=l[c-2*d],h=l[c-d],f=l[c+0],p=l[c+d],m=l[c+2*d],g=27*(b=Pn[1020+3*(f-h)+Pn[1020+u-p]])+63>>7,v=18*b+63>>7,b=9*b+63>>7;l[c-3*d]=On[255+l[c-3*d]+b],l[c-2*d]=On[255+u+v],l[c-d]=On[255+h+g],l[c+0]=On[255+f-g],l[c+d]=On[255+p-v],l[c+2*d]=On[255+m-b]}t+=n}}function Gt(e,t,r,n,a,s,i,o){for(s=2*s+1;0<a--;){if(zt(e,t,r,s,i))if(Ft(e,t,r,o))Lt(e,t,r);else{var l=e,c=t,d=r,u=l[c-d],h=l[c+0],f=l[c+d],p=Dn[112+(4+(m=3*(h-u))>>3)],m=Dn[112+(m+3>>3)],g=p+1>>1;l[c-2*d]=On[255+l[c-2*d]+g],l[c-d]=On[255+u+m],l[c+0]=On[255+h-p],l[c+d]=On[255+f-g]}t+=n}}function Kt(e,t,r,n,a,s){Vt(e,t,r,1,16,n,a,s)}function $t(e,t,r,n,a,s){Vt(e,t,1,r,16,n,a,s)}function Yt(e,t,r,n,a,s){var i;for(i=3;0<i;--i)Gt(e,t+=4*r,r,1,16,n,a,s)}function Xt(e,t,r,n,a,s){var i;for(i=3;0<i;--i)Gt(e,t+=4,1,r,16,n,a,s)}function Jt(e,t,r,n,a,s,i,o){Vt(e,t,a,1,8,s,i,o),Vt(r,n,a,1,8,s,i,o)}function Zt(e,t,r,n,a,s,i,o){Vt(e,t,1,a,8,s,i,o),Vt(r,n,1,a,8,s,i,o)}function Qt(e,t,r,n,a,s,i,o){Gt(e,t+4*a,a,1,8,s,i,o),Gt(r,n+4*a,a,1,8,s,i,o)}function er(e,t,r,n,a,s,i,o){Gt(e,t+4,1,a,8,s,i,o),Gt(r,n+4,1,a,8,s,i,o)}function tr(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ar(){this.ua=0,this.Wa=new M,this.vb=new M,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new u}function sr(){this.xb=this.a=0,this.l=new Ge,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ar,this.ab=0,this.gc=i(4,nr),this.Oc=0}function ir(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function or(e,t,r,n,a,s,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)a[s+t]=e+r[n+t]&255,e=a[s+t]}function lr(e,t,r,n,a,s,i){var o;if(null==e)or(null,null,r,n,a,s,i);else for(o=0;o<i;++o)a[s+o]=e[t+o]+r[n+o]&255}function cr(e,t,r,n,a,s,i){if(null==e)or(null,null,r,n,a,s,i);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<i;++o)c=d+(l=e[t+o])-c,d=r[n+o]+(-256&c?0>c?0:255:c)&255,c=l,a[s+o]=d}}function dr(e,r,a,i){var o=r.width,l=r.o;if(t(null!=e&&null!=r),0>a||0>=i||a+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ir,(c=null==e.ga)||(c=r.width*r.o,t(0==e.Gb.length),e.Gb=s(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,f=e.mb,p=e.nb,m=u+1,g=h-1,b=c.l;if(t(null!=d&&null!=f&&null!=r),ma[0]=null,ma[1]=or,ma[2]=lr,ma[3]=cr,c.ca=f,c.tb=p,c.c=r.width,c.i=r.height,t(0<c.c&&0<c.i),1>=h)r=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)r=0;else if(b.put=fe,b.ac=he,b.bc=pe,b.ma=c,b.width=r.width,b.height=r.height,b.Da=r.Da,b.v=r.v,b.va=r.va,b.j=r.j,b.o=r.o,c.$a)e:{t(1==c.$a),r=Ee();t:for(;;){if(null==r){r=0;break e}if(t(null!=c),c.mc=r,r.c=c.c,r.i=c.i,r.l=c.l,r.l.ma=c,r.l.width=c.c,r.l.height=c.i,r.a=0,v(r.m,d,m,g),!Ce(c.c,c.i,1,r,null))break t;if(1==r.ab&&3==r.gc[0].hc&&Ne(r.s)?(c.ic=1,d=r.c*r.i,r.Ta=null,r.Ua=0,r.V=s(d),r.Ba=0,null==r.V?(r.a=1,r=0):r=1):(c.ic=0,r=Te(r,c.c)),!r)break t;r=1;break e}c.mc=null,r=0}else r=g>=c.c*c.i;c=!r}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-a}t(null!=e.ga),t(a+i<=l);e:{if(r=(d=e.ga).c,l=d.l.o,0==d.$a){if(m=e.rc,g=e.Vc,b=e.Fa,u=e.P+1+a*r,h=e.mb,f=e.nb+a*r,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=ma[d.Z]),c=0;c<i;++c)ma[d.Z](m,g,b,u,h,f,r),m=h,g=f,f+=r,u+=r;else for(c=0;c<i;++c)n(h,f,b,u,r),m=h,g=f,f+=r,u+=r;e.rc=m,e.Vc=g}else{if(t(null!=d.mc),r=a+i,t(null!=(c=d.mc)),t(r<=c.i),c.C>=r)r=1;else if(d.ic||mr(),d.ic){d=c.V,m=c.Ba,g=c.c;var x=c.i,y=(b=1,u=c.$/g,h=c.$%g,f=c.m,p=c.s,c.$),w=g*x,j=g*r,_=p.wc,k=y<j?ye(p,h,u):null;t(y<=w),t(r<=x),t(Ne(p));t:for(;;){for(;!f.h&&y<j;){if(h&_||(k=ye(p,h,u)),t(null!=k),S(f),256>(x=be(k.G[0],k.H[0],f)))d[m+y]=x,++y,++h>=g&&(h=0,++u<=r&&!(u%16)&&Se(c,u));else{if(!(280>x)){b=0;break t}x=ge(x-256,f);var A,E=be(k.G[4],k.H[4],f);if(S(f),!(y>=(E=ve(g,E=ge(E,f)))&&w-y>=x)){b=0;break t}for(A=0;A<x;++A)d[m+y+A]=d[m+y+A-E];for(y+=x,h+=x;h>=g;)h-=g,++u<=r&&!(u%16)&&Se(c,u);y<j&&h&_&&(k=ye(p,h,u))}t(f.h==N(f))}Se(c,u>r?r:u);break t}!b||f.h&&y<w?(b=0,c.a=f.h?5:3):c.$=y,r=b}else r=ke(c,c.V,c.Ba,c.c,c.i,r,Pe);if(!r){i=0;break e}}a+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*o}function ur(e,t,r,n,a,s){for(;0<a--;){var i,o=e,l=t+(r?1:0),c=e,d=t+(r?0:3);for(i=0;i<n;++i){var u=c[d+4*i];255!=u&&(u*=32897,o[l+4*i+0]=o[l+4*i+0]*u>>23,o[l+4*i+1]=o[l+4*i+1]*u>>23,o[l+4*i+2]=o[l+4*i+2]*u>>23)}t+=s}}function hr(e,t,r,n,a){for(;0<n--;){var s;for(s=0;s<r;++s){var i=e[t+2*s+0],o=15&(c=e[t+2*s+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*s+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*s+1]=240&c|o}t+=a}}function fr(e,t,r,n,a,s,i,o){var l,c,d=255;for(c=0;c<a;++c){for(l=0;l<n;++l){var u=e[t+l];s[i+4*l]=u,d&=u}t+=r,i+=o}return 255!=d}function pr(e,t,r,n,a){var s;for(s=0;s<a;++s)r[n+s]=e[t+s]>>8}function mr(){jn=ur,Nn=hr,_n=fr,Sn=pr}function gr(r,n,a){e[r]=function(e,r,s,i,o,l,c,d,u,h,f,p,m,g,v,b,x){var y,w=x-1>>1,j=o[l+0]|c[d+0]<<16,N=u[h+0]|f[p+0]<<16;t(null!=e);var _=3*j+N+131074>>2;for(n(e[r+0],255&_,_>>16,m,g),null!=s&&(_=3*N+j+131074>>2,n(s[i+0],255&_,_>>16,v,b)),y=1;y<=w;++y){var S=o[l+y]|c[d+y]<<16,k=u[h+y]|f[p+y]<<16,A=j+S+N+k+524296,E=A+2*(S+N)>>3;_=E+j>>1,j=(A=A+2*(j+k)>>3)+S>>1,n(e[r+2*y-1],255&_,_>>16,m,g+(2*y-1)*a),n(e[r+2*y-0],255&j,j>>16,m,g+(2*y-0)*a),null!=s&&(_=A+N>>1,j=E+k>>1,n(s[i+2*y-1],255&_,_>>16,v,b+(2*y-1)*a),n(s[i+2*y+0],255&j,j>>16,v,b+(2*y+0)*a)),j=S,N=k}1&x||(_=3*j+N+131074>>2,n(e[r+x-1],255&_,_>>16,m,g+(x-1)*a),null!=s&&(_=3*N+j+131074>>2,n(s[i+x-1],255&_,_>>16,v,b+(x-1)*a)))}}function vr(){ga[Mn]=va,ga[Rn]=xa,ga[Ln]=ba,ga[Fn]=ya,ga[Bn]=wa,ga[zn]=ja,ga[Un]=Na,ga[qn]=xa,ga[Wn]=ya,ga[Hn]=wa,ga[Vn]=ja}function br(e){return e&~Ca?0>e?0:255:e>>Ea}function xr(e,t){return br((19077*e>>8)+(26149*t>>8)-14234)}function yr(e,t,r){return br((19077*e>>8)-(6419*t>>8)-(13320*r>>8)+8708)}function wr(e,t){return br((19077*e>>8)+(33050*t>>8)-17685)}function jr(e,t,r,n,a){n[a+0]=xr(e,r),n[a+1]=yr(e,t,r),n[a+2]=wr(e,t)}function Nr(e,t,r,n,a){n[a+0]=wr(e,t),n[a+1]=yr(e,t,r),n[a+2]=xr(e,r)}function _r(e,t,r,n,a){var s=yr(e,t,r);t=s<<3&224|wr(e,t)>>3,n[a+0]=248&xr(e,r)|s>>5,n[a+1]=t}function Sr(e,t,r,n,a){var s=240&wr(e,t)|15;n[a+0]=240&xr(e,r)|yr(e,t,r)>>4,n[a+1]=s}function kr(e,t,r,n,a){n[a+0]=255,jr(e,t,r,n,a+1)}function Ar(e,t,r,n,a){Nr(e,t,r,n,a),n[a+3]=255}function Er(e,t,r,n,a){jr(e,t,r,n,a),n[a+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function Cr(t,r,n){e[t]=function(e,t,a,s,i,o,l,c,d){for(var u=c+(-2&d)*n;c!=u;)r(e[t+0],a[s+0],i[o+0],l,c),r(e[t+1],a[s+0],i[o+0],l,c+n),t+=2,++s,++o,c+=2*n;1&d&&r(e[t+0],a[s+0],i[o+0],l,c)}}function Tr(e,t,r){return 0==r?0==e?0==t?6:5:0==t?4:0:r}function Pr(e,t,r,n,a){switch(e>>>30){case 3:an(t,r,n,a,0);break;case 2:sn(t,r,n,a);break;case 1:ln(t,r,n,a)}}function Dr(e,t){var r,s,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,f=e.pc+600;for(r=0;16>r;++r)l[c+32*r-1]=129;for(r=0;8>r;++r)d[u+32*r-1]=129,h[f+32*r-1]=129;for(0<i?l[c-1-32]=d[u-1-32]=h[f-1-32]=129:(a(l,c-32-1,127,21),a(d,u-32-1,127,9),a(h,f-32-1,127,9)),s=0;s<e.za;++s){var p=t.ya[t.aa+s];if(0<s){for(r=-1;16>r;++r)n(l,c+32*r-4,l,c+32*r+12,4);for(r=-1;8>r;++r)n(d,u+32*r-4,d,u+32*r+4,4),n(h,f+32*r-4,h,f+32*r+4,4)}var m=e.Gd,g=e.Hd+s,v=p.ad,b=p.Hc;if(0<i&&(n(l,c-32,m[g].y,0,16),n(d,u-32,m[g].f,0,8),n(h,f-32,m[g].ea,0,8)),p.Za){var x=l,y=c-32+16;for(0<i&&(s>=e.za-1?a(x,y,m[g].y[15],4):n(x,y,m[g+1].y,0,4)),r=0;4>r;r++)x[y+128+r]=x[y+256+r]=x[y+384+r]=x[y+0+r];for(r=0;16>r;++r,b<<=2)x=l,y=c+La[r],ua[p.Ob[r]](x,y),Pr(b,v,16*+r,x,y)}else if(x=Tr(s,i,p.Ob[0]),da[x](l,c),0!=b)for(r=0;16>r;++r,b<<=2)Pr(b,v,16*+r,l,c+La[r]);for(r=p.Gc,x=Tr(s,i,p.Dd),ha[x](d,u),ha[x](h,f),b=v,x=d,y=u,255&(p=0|r)&&(170&p?on(b,256,x,y):cn(b,256,x,y)),p=h,b=f,255&(r>>=8)&&(170&r?on(v,320,p,b):cn(v,320,p,b)),i<e.Ub-1&&(n(m[g].y,0,l,c+480,16),n(m[g].f,0,d,u+224,8),n(m[g].ea,0,h,f+224,8)),r=8*o*e.B,m=e.sa,g=e.ta+16*s+16*o*e.R,v=e.qa,p=e.ra+8*s+r,b=e.Ha,x=e.Ia+8*s+r,r=0;16>r;++r)n(m,g+r*e.R,l,c+32*r,16);for(r=0;8>r;++r)n(v,p+r*e.B,d,u+32*r,8),n(b,x+r*e.B,h,f+32*r,8)}}function Or(e,n,a,s,i,o,l,c,d){var u=[0],h=[0],f=0,p=null!=d?d.kd:0,m=null!=d?d:new rr;if(null==e||12>a)return 7;m.data=e,m.w=n,m.ha=a,n=[n],a=[a],m.gb=[m.gb];e:{var g=n,b=a,x=m.gb;if(t(null!=e),t(null!=b),t(null!=x),x[0]=0,12<=b[0]&&!r(e,g[0],"RIFF")){if(r(e,g[0]+8,"WEBP")){x=3;break e}var y=D(e,g[0]+4);if(12>y||4294967286<y){x=3;break e}if(p&&y>b[0]-8){x=7;break e}x[0]=y,g[0]+=12,b[0]-=12}x=0}if(0!=x)return x;for(y=0<m.gb[0],a=a[0];;){e:{var j=e;b=n,x=a;var N=u,_=h,S=g=[0];if((E=f=[f])[0]=0,8>x[0])x=7;else{if(!r(j,b[0],"VP8X")){if(10!=D(j,b[0]+4)){x=3;break e}if(18>x[0]){x=7;break e}var k=D(j,b[0]+8),A=1+P(j,b[0]+12);if(2147483648<=A*(j=1+P(j,b[0]+15))){x=3;break e}null!=S&&(S[0]=k),null!=N&&(N[0]=A),null!=_&&(_[0]=j),b[0]+=18,x[0]-=18,E[0]=1}x=0}}if(f=f[0],g=g[0],0!=x)return x;if(b=!!(2&g),!y&&f)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=b),null!=c&&(c[0]=0),l=u[0],g=h[0],f&&b&&null==d){x=0;break}if(4>a){x=7;break}if(y&&f||!y&&!f&&!r(e,n[0],"ALPH")){a=[a],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{k=e,x=n,y=a;var E=m.gb;N=m.na,_=m.P,S=m.Sa,A=22,t(null!=k),t(null!=y),j=x[0];var C=y[0];for(t(null!=N),t(null!=S),N[0]=null,_[0]=null,S[0]=0;;){if(x[0]=j,y[0]=C,8>C){x=7;break e}var T=D(k,j+4);if(4294967286<T){x=3;break e}var O=8+T+1&-2;if(A+=O,0<E&&A>E){x=3;break e}if(!r(k,j,"VP8 ")||!r(k,j,"VP8L")){x=0;break e}if(C[0]<O){x=7;break e}r(k,j,"ALPH")||(N[0]=k,_[0]=j+8,S[0]=T),j+=O,C-=O}}if(a=a[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=x)break}a=[a],m.Ja=[m.Ja],m.xa=[m.xa];e:if(E=e,x=n,y=a,N=m.gb[0],_=m.Ja,S=m.xa,k=x[0],j=!r(E,k,"VP8 "),A=!r(E,k,"VP8L"),t(null!=E),t(null!=y),t(null!=_),t(null!=S),8>y[0])x=7;else{if(j||A){if(E=D(E,k+4),12<=N&&E>N-12){x=3;break e}if(p&&E>y[0]-8){x=7;break e}_[0]=E,x[0]+=8,y[0]-=8,S[0]=A}else S[0]=5<=y[0]&&47==E[k+0]&&!(E[k+4]>>5),_[0]=y[0];x=0}if(a=a[0],m.Ja=m.Ja[0],m.xa=m.xa[0],n=n[0],0!=x)break;if(4294967286<m.Ja)return 3;if(null==c||b||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>a){x=7;break}c=l,p=g,b=o,null==e||5>a?e=0:5<=a&&47==e[n+0]&&!(e[n+4]>>5)?(y=[0],E=[0],N=[0],v(_=new w,e,n,a),me(_,y,E,N)?(null!=c&&(c[0]=y[0]),null!=p&&(p[0]=E[0]),null!=b&&(b[0]=N[0]),e=1):e=0):e=0}else{if(10>a){x=7;break}c=g,null==e||10>a||!Ye(e,n+3,a-3)?e=0:(p=e[n+0]|e[n+1]<<8|e[n+2]<<16,b=16383&(e[n+7]<<8|e[n+6]),e=16383&(e[n+9]<<8|e[n+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=m.Ja||!b||!e?e=0:(l&&(l[0]=b),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],f&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=m,d.offset=n-d.w,t(4294967286>n-d.w),t(d.offset==d.ha-a));break}return 0==x||7==x&&f&&null==d?(null!=o&&(o[0]|=null!=m.na&&0<m.na.length),null!=s&&(s[0]=l),null!=i&&(i[0]=g),0):x}function Ir(e,t,r){var n=t.width,a=t.height,s=0,i=0,o=n,l=a;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,i=e.j,11>r||(s&=-2,i&=-2),0>s||0>i||0>=o||0>=l||s+o>n||i+l>a))return 0;if(t.v=s,t.j=i,t.va=s+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!R(o,l,r=[e.ib],s=[e.hb]))return 0;t.ib=r[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*n/4&&t.hb<3*a/4,t.Kb=0),1}function Mr(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Rr(e,t,r,n){if(null==n||0>=e||0>=t)return 2;if(null!=r){if(r.Da){var a=r.cd,i=r.bd,o=-2&r.v,l=-2&r.j;if(0>o||0>l||0>=a||0>=i||o+a>e||l+i>t)return 2;e=a,t=i}if(r.da){if(!R(e,t,a=[r.ib],i=[r.hb]))return 2;e=a[0],t=i[0]}}n.width=e,n.height=t;e:{var c=n.width,d=n.height;if(e=n.S,0>=c||0>=d||!(e>=Mn&&13>e))e=2;else{if(0>=n.Rd&&null==n.sd){o=i=a=t=0;var u=(l=c*za[e])*d;if(11>e||(i=(d+1)/2*(t=(c+1)/2),12==e&&(o=(a=c)*d)),null==(d=s(u+2*i+o))){e=1;break e}n.sd=d,11>e?((c=n.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=n.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=i,c.ea=d,c.W=0+u+i,c.Db=t,c.Ed=i,12==e&&(c.F=d,c.J=0+u+2*i),c.Tc=o,c.lb=a)}if(t=1,a=n.S,i=n.width,o=n.height,a>=Mn&&13>a)if(11>a)e=n.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*za[a],t&=null!=e.eb;else{e=n.f.kb,l=(i+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),f=Math.abs(e.lb),p=f*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=i&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==a&&(t&=f>=i,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=r&&r.fd&&(e=Mr(n)),e}var Lr=64,Fr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Br=24,zr=32,Ur=8,qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,r){return t[r+0]},e.Predictor3=function(e,t,r){return t[r+1]},e.Predictor4=function(e,t,r){return t[r-1]},e.Predictor5=function(e,t,r){return U(U(e,t[r+1]),t[r+0])},e.Predictor6=function(e,t,r){return U(e,t[r-1])},e.Predictor7=function(e,t,r){return U(e,t[r+0])},e.Predictor8=function(e,t,r){return U(t[r-1],t[r+0])},e.Predictor9=function(e,t,r){return U(t[r+0],t[r+1])},e.Predictor10=function(e,t,r){return U(U(e,t[r-1]),U(t[r+0],t[r+1]))},e.Predictor11=function(e,t,r){var n=t[r+0];return 0>=H(n>>24&255,e>>24&255,(t=t[r-1])>>24&255)+H(n>>16&255,e>>16&255,t>>16&255)+H(n>>8&255,e>>8&255,t>>8&255)+H(255&n,255&e,255&t)?n:e},e.Predictor12=function(e,t,r){var n=t[r+0];return(q((e>>24&255)+(n>>24&255)-((t=t[r-1])>>24&255))<<24|q((e>>16&255)+(n>>16&255)-(t>>16&255))<<16|q((e>>8&255)+(n>>8&255)-(t>>8&255))<<8|q((255&e)+(255&n)-(255&t)))>>>0},e.Predictor13=function(e,t,r){var n=t[r-1];return(W((e=U(e,t[r+0]))>>24&255,n>>24&255)<<24|W(e>>16&255,n>>16&255)<<16|W(e>>8&255,n>>8&255)<<8|W(255&e,255&n))>>>0};var Wr=e.PredictorAdd0;e.PredictorAdd1=V,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Hr=e.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Vr,Gr=e.ColorIndexInverseTransform,Kr=e.MapARGB,$r=e.VP8LColorIndexInverseTransformAlpha,Yr=e.MapAlpha,Xr=e.VP8LPredictorsAdd=[];Xr.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Jr,Zr,Qr,en,tn,rn,nn,an,sn,on,ln,cn,dn,un,hn,fn,pn,mn,gn,vn,bn,xn,yn,wn,jn,Nn,_n,Sn,kn=s(511),An=s(2041),En=s(225),Cn=s(767),Tn=0,Pn=An,Dn=En,On=Cn,In=kn,Mn=0,Rn=1,Ln=2,Fn=3,Bn=4,zn=5,Un=6,qn=7,Wn=8,Hn=9,Vn=10,Gn=[2,3,7],Kn=[3,3,11],$n=[280,256,256,256,40],Yn=[0,1,1,1,0],Xn=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Qn=8,ea=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ta=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ra=null,na=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],aa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sa=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ia=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oa=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],la=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ca=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],da=[],ua=[],ha=[],fa=1,pa=2,ma=[],ga=[];gr("UpsampleRgbLinePair",jr,3),gr("UpsampleBgrLinePair",Nr,3),gr("UpsampleRgbaLinePair",Er,4),gr("UpsampleBgraLinePair",Ar,4),gr("UpsampleArgbLinePair",kr,4),gr("UpsampleRgba4444LinePair",Sr,2),gr("UpsampleRgb565LinePair",_r,2);var va=e.UpsampleRgbLinePair,ba=e.UpsampleBgrLinePair,xa=e.UpsampleRgbaLinePair,ya=e.UpsampleBgraLinePair,wa=e.UpsampleArgbLinePair,ja=e.UpsampleRgba4444LinePair,Na=e.UpsampleRgb565LinePair,_a=16,Sa=1<<_a-1,ka=-227,Aa=482,Ea=6,Ca=(256<<Ea)-1,Ta=0,Pa=s(256),Da=s(256),Oa=s(256),Ia=s(256),Ma=s(Aa-ka),Ra=s(Aa-ka);Cr("YuvToRgbRow",jr,3),Cr("YuvToBgrRow",Nr,3),Cr("YuvToRgbaRow",Er,4),Cr("YuvToBgraRow",Ar,4),Cr("YuvToArgbRow",kr,4),Cr("YuvToRgba4444Row",Sr,2),Cr("YuvToRgb565Row",_r,2);var La=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fa=[0,2,8],Ba=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,r,o,l,c){var d=Rn,u=new tr,h=new ie;u.ba=h,h.S=d,h.width=[h.width],h.height=[h.height];var f=h.width,p=h.height,m=new oe;if(null==m||null==e)var g=2;else t(null!=m),g=Or(e,r,o,m.width,m.height,m.Pd,m.Qd,m.format,null);if(0!=g?f=0:(null!=f&&(f[0]=m.width[0]),null!=p&&(p[0]=m.height[0]),f=1),f){h.width=h.width[0],h.height=h.height[0],null!=l&&(l[0]=h.width),null!=c&&(c[0]=h.height);e:{if(l=new Ge,(c=new rr).data=e,c.w=r,c.ha=o,c.kd=1,r=[0],t(null!=c),(0==(e=Or(c.data,c.w,c.ha,null,null,null,r,null,c))||7==e)&&r[0]&&(e=4),0==(r=e)){if(t(null!=u),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=fe,l.ac=he,l.bc=pe,l.ma=u,c.xa){if(null==(e=Ee())){u=1;break e}if(function(e,r){var n=[0],a=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==r)return e.a=2,0;if(e.l=r,e.a=0,v(e.m,r.data,r.w,r.ha),!me(e.m,n,a,s)){e.a=3;break t}if(e.xb=pa,r.width=n[0],r.height=a[0],!Ce(n[0],a[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(r=Rr(l.width,l.height,u.Oa,u.ba))){t:{l=e;r:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!Ir(c.Oa,o,Fn)){l.a=2;break r}if(!Te(l,o.width))break r;if(o.da)break r;if((o.da||ne(l.ca.S))&&mr(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&mr()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!O(l.s.vb,l.s.Wa.Xa)){l.a=1;break r}l.xb=0}if(!ke(l,l.V,l.Ba,l.c,l.i,o.o,je))break r;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(r=e.a)}else r=e.a}else{if(null==(e=new Ke)){u=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,Xe(e,l)){if(0==(r=Rr(l.width,l.height,u.Oa,u.ba))){if(e.Aa=0,o=u.Oa,t(null!=(c=e)),null!=o){if(0<(f=0>(f=o.Md)?0:100<f?255:255*f/100)){for(p=m=0;4>p;++p)12>(g=c.pb[p]).lc&&(g.ia=f*Ba[0>g.lc?0:g.lc]>>3),m|=g.ia;m&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,r){if(null==e)return 0;if(null==r)return $e(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Xe(e,r))return 0;if(t(e.cb),null==r.ac||r.ac(r)){r.ob&&(e.L=0);var o=Fa[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=r.v-o>>4,e.zb=r.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=r.o+15+o>>4,e.Hb=r.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var f=h;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),u.dd=f,u.tc=2*h+f,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}o=0}else $e(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);t:{o=e.Ic,l=4*(f=e.za);var p=32*f,m=f+1,g=0<e.L?f*(0<e.Aa?2:1):0,v=(2==e.Aa?2:1)*f;if((u=l+832+(c=3*(16*o+Fa[e.L])/2*p)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=s(u),e.Fc=0,null==e.Ec){o=$e(e,1,"no memory during frame initialization.");break t}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=i(p,We),e.Hd=0,e.rb=i(m+1,Be),e.sb=1,e.wa=g?i(g,Fe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=f),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=i(v,Ue),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=f),e.R=16*f,e.B=8*f,f=(p=Fa[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=h+f,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Ze(e),a(e.Ac,e.Bc,0,l),o=1}}if(o){if(r.ka=0,r.y=e.sa,r.O=e.ta,r.f=e.qa,r.N=e.ra,r.ea=e.Ha,r.Vd=e.Ia,r.fa=e.R,r.Rc=e.B,r.F=null,r.J=0,!Tn){for(o=-255;255>=o;++o)kn[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)An[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)En[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Cn[255+o]=0>o?0:255<o?255:o;Tn=1}nn=lt,an=at,on=st,ln=it,cn=ot,sn=nt,dn=Kt,un=$t,hn=Jt,fn=Zt,pn=Yt,mn=Xt,gn=Qt,vn=er,bn=Ut,xn=qt,yn=Wt,wn=Ht,ua[0]=Nt,ua[1]=dt,ua[2]=wt,ua[3]=jt,ua[4]=_t,ua[5]=kt,ua[6]=St,ua[7]=At,ua[8]=Ct,ua[9]=Et,da[0]=gt,da[1]=ht,da[2]=ft,da[3]=pt,da[4]=vt,da[5]=bt,da[6]=xt,ha[0]=Ot,ha[1]=ut,ha[2]=Tt,ha[3]=Pt,ha[4]=Mt,ha[5]=It,ha[6]=Rt,o=1}else o=0}o&&(o=function(e,r){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var d=l,u=c,h=u.Ac,f=u.Bc+4*i,p=u.zc,m=u.ya[u.aa+i];if(u.Qa.Bb?m.$b=E(d,u.Pa.jb[0])?2+E(d,u.Pa.jb[2]):E(d,u.Pa.jb[1]):m.$b=0,u.kc&&(m.Ad=E(d,u.Bd)),m.Za=!E(d,145)+0,m.Za){var g=m.Ob,v=0;for(u=0;4>u;++u){var b,x=p[0+u];for(b=0;4>b;++b){x=oa[h[f+b]][x];for(var y=sa[E(d,x[0])];0<y;)y=sa[2*y+E(d,x[y])];x=-y,h[f+b]=x}n(g,v,h,f,4),v+=4,p[0+u]=x}}else x=E(d,156)?E(d,128)?1:3:E(d,163)?2:0,m.Ob[0]=x,a(h,f,x,4),a(p,0,x,4);m.Dd=E(d,142)?E(d,114)?E(d,183)?1:3:2:0}if(c.m.Ka)return $e(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],f=l.kc?i.Ad:0)d.la=h.la=0,i.Za||(d.Na=h.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var w,j;if(d=h,h=c,f=l.Pa.Xc,p=l.ya[l.aa+l.ja],m=l.pb[p.$b],u=p.ad,g=0,v=l.rb[l.sb-1],x=b=0,a(u,g,0,384),p.Za)var N=0,_=f[3];else{y=s(16);var S=d.Na+v.Na;if(S=ra(h,f[1],S,m.Eb,0,y,0),d.Na=v.Na=(0<S)+0,1<S)nn(y,0,u,g);else{var k=y[0]+3>>3;for(y=0;256>y;y+=16)u[g+y]=k}N=1,_=f[0]}var A=15&d.la,C=15&v.la;for(y=0;4>y;++y){var T=1&C;for(k=j=0;4>k;++k)A=A>>1|(T=(S=ra(h,_,S=T+(1&A),m.Sc,N,u,g))>N)<<7,j=j<<2|(3<S?3:1<S?2:0!=u[g+0]),g+=16;A>>=4,C=C>>1|T<<7,b=(b<<8|j)>>>0}for(_=A,N=C>>4,w=0;4>w;w+=2){for(j=0,A=d.la>>4+w,C=v.la>>4+w,y=0;2>y;++y){for(T=1&C,k=0;2>k;++k)S=T+(1&A),A=A>>1|(T=0<(S=ra(h,f[2],S,m.Qc,0,u,g)))<<3,j=j<<2|(3<S?3:1<S?2:0!=u[g+0]),g+=16;A>>=2,C=C>>1|T<<5}x|=j<<4*w,_|=A<<4<<w,N|=(240&C)<<w}d.la=_,v.la=N,p.Hc=b,p.Gc=x,p.ia=43690&x?0:m.ia,f=!(b|x)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!f),c.Ka)return $e(e,7,"Premature end-of-file encountered.")}if(Ze(e),l=r,c=1,i=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(i.M=o.M,i.uc=d,Dr(o,i),c=1,i=(j=o.D).Nb,d=(x=Fa[o.L])*o.R,h=x/2*o.B,y=16*i*o.R,k=8*i*o.B,f=o.sa,p=o.ta-d+y,m=o.qa,u=o.ra-h+k,g=o.Ha,v=o.Ia-h+k,C=0==(A=j.M),b=A>=o.Va-1,2==o.Aa&&Dr(o,j),j.uc)for(T=(S=o).D.M,t(S.D.uc),j=S.yb;j<S.Hb;++j){N=j,_=T;var P=(D=(U=S).D).Nb;w=U.R;var D=D.wa[D.Y+N],O=U.sa,I=U.ta+16*P*w+16*N,M=D.dd,R=D.tc;if(0!=R)if(t(3<=R),1==U.L)0<N&&xn(O,I,w,R+4),D.La&&wn(O,I,w,R),0<_&&bn(O,I,w,R+4),D.La&&yn(O,I,w,R);else{var L=U.B,F=U.qa,B=U.ra+8*P*L+8*N,z=U.Ha,U=U.Ia+8*P*L+8*N;P=D.ld,0<N&&(un(O,I,w,R+4,M,P),fn(F,B,z,U,L,R+4,M,P)),D.La&&(mn(O,I,w,R,M,P),vn(F,B,z,U,L,R,M,P)),0<_&&(dn(O,I,w,R+4,M,P),hn(F,B,z,U,L,R+4,M,P)),D.La&&(pn(O,I,w,R,M,P),gn(F,B,z,U,L,R,M,P))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(j=16*A,A=16*(A+1),C?(l.y=o.sa,l.O=o.ta+y,l.f=o.qa,l.N=o.ra+k,l.ea=o.Ha,l.W=o.Ia+k):(j-=x,l.y=f,l.O=p,l.f=m,l.N=u,l.ea=g,l.W=v),b||(A-=x),A>l.o&&(A=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&j<A&&(l.J=dr(o,l,j,A-j),l.F=o.mb,null==l.F&&0==l.F.length)){c=$e(o,3,"Could not decode alpha data.");break t}j<l.j&&(x=l.j-j,j=l.j,t(!(1&x)),l.O+=o.R*x,l.N+=o.B*(x>>1),l.W+=o.B*(x>>1),null!=l.F&&(l.J+=l.width*x)),j<A&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=j-l.j,l.U=l.va-l.v,l.T=A-j,c=l.put(l))}i+1!=o.Ic||b||(n(o.sa,o.ta-d,f,p+16*o.R,d),n(o.qa,o.ra-h,m,u+8*o.B,h),n(o.Ha,o.Ia-h,g,v+8*o.B,h))}if(!c)return $e(e,6,"Output aborted.")}return 1}(e,r)),null!=r.bc&&r.bc(r),o&=1}return o?(e.cb=0,o):0})(e,l)||(r=e.a)}}else r=e.a}0==r&&null!=u.Oa&&u.Oa.fd&&(r=Mr(u.ba))}u=r}d=0!=u?null:11>d?h.f.RGBA.eb:h.f.kb.y}else d=null;return d};var za=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var r="",n=0;n<4;n++)r+=String.fromCharCode(e[t++]);return r}function d(e,t){return e[t+0]|e[t+1]<<8}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function h(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var f=[0],p=[0],m=[],g=new l,v=e,b=function(e,t){var r={},n=0,a=!1,s=0,i=0;if(r.frames=[],!function(e,t){for(var r=0;r<4;r++)if(e[t+r]!="RIFF".charCodeAt(r))return!0;return!1}(e,t)){for(h(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=h(e,t+=4);t+=4;var f=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===r.frames[n]&&(r.frames[n]={}),(g=r.frames[n]).src_off=a?i:t-8,g.src_size=s+l+8,n++,a&&(a=!1,s=0,i=0);break;case"VP8X":(g=r.header={}).feature_flags=e[t];var p=t+4;g.canvas_width=1+u(e,p),p+=3,g.canvas_height=1+u(e,p),p+=3;break;case"ALPH":a=!0,s=f+8,i=t-8;break;case"ANIM":(g=r.header).bgcolor=h(e,t),p=t+4,g.loop_count=d(e,p),p+=2;break;case"ANMF":var m,g;(g=r.frames[n]={}).offset_x=2*u(e,t),t+=3,g.offset_y=2*u(e,t),t+=3,g.width=1+u(e,t),t+=3,g.height=1+u(e,t),t+=3,g.duration=u(e,t),t+=3,m=e[t++],g.dispose=1&m,g.blend=m>>1&1}"ANMF"!=o&&(t+=f)}return r}}(v,0);b.response=v,b.rgbaoutput=!0,b.dataurl=!1;var x=b.header?b.header:null,y=b.frames?b.frames:null;if(x){x.loop_counter=x.loop_count,f=[x.canvas_height],p=[x.canvas_width];for(var w=0;w<y.length&&0!=y[w].blend;w++);}var j=y[0],N=g.WebPDecodeRGBA(v,j.src_off,j.src_size,p,f);j.rgba=N,j.imgwidth=p[0],j.imgheight=f[0];for(var _=0;_<p[0]*f[0]*4;_++)m[_]=N[_];return this.width=p,this.height=f,this.data=m,this}!function(e){var t,r,n,a,s,i,o,l,c,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new i,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new i,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var r=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var a=0;Object.defineProperty(this,"posX",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof d&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var f=null,p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(e){f=null,p=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var r=t[1];t[2];var n=t[3],a=t[4];t[5];var s=t[6],i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(a)[2];a="px"===i?Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(a)*this.pdf.getFontSize()):Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(a);var o=function(e){var t,r,n=[],a=e.trim();if(""===a)return gZ;if(a in rZ)return[rZ[a]];for(;""!==a;){switch(r=null,t=(a=aZ(a)).charAt(0)){case'"':case"'":r=sZ(a.substring(1),t);break;default:r=iZ(a)}if(null===r)return gZ;if(n.push(r[0]),""!==(a=aZ(r[1]))&&","!==a.charAt(0))return gZ;a=a.replace(/^,/,"")}return n}(s);if(this.fontFaces){var l=function(e,t){if(null===f){var r=function(e){var t=[];return Object.keys(e).forEach(function(r){e[r].forEach(function(e){var n=null;switch(e){case"bold":n={family:r,weight:"bold"};break;case"italic":n={family:r,style:"italic"};break;case"bolditalic":n={family:r,weight:"bold",style:"italic"};break;case"":case"normal":n={family:r}}null!==n&&(n.ref={name:r,style:e},t.push(n))})}),t}(e.getFontList());f=function(e){for(var t={},r=0;r<e.length;++r){var n=QJ(e[r]),a=n.family,s=n.stretch,i=n.style,o=n.weight;t[a]=t[a]||{},t[a][s]=t[a][s]||{},t[a][s][i]=t[a][s][i]||{},t[a][s][i][o]=n}return t}(r.concat(t))}return f}(this.pdf,this.fontFaces),c=o.map(function(e){return{family:e,stretch:"normal",weight:n,style:r}}),d=function(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},tZ,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=QJ(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+nZ(s)+"' and default family '"+n+"'.");if(i=function(e,t){if(t[e])return t[e];var r=XJ[e],n=r<=XJ.normal?-1:1,a=eZ(t,YJ,r,n);if(!a)throw new Error("Could not find a matching font-stretch value for "+e);return a}(s.stretch,i),i=function(e,t){if(t[e])return t[e];for(var r=$J[e],n=0;n<r.length;++n)if(t[r[n]])return t[r[n]];throw new Error("Could not find a matching font-style for "+e)}(s.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var r=ZJ[e],n=eZ(t,JJ,r,e<400?-1:1);if(!n)throw new Error("Could not find a matching font-weight for value "+e);return n}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+nZ(s)+"'.");return i}(l,c);this.pdf.setFont(d.ref.name,d.ref.style)}else{var u="";("bold"===n||parseInt(n,10)>=700||"bold"===r)&&(u="bold"),"italic"===r&&(u+="italic"),0===u.length&&(u="normal");for(var h="",p={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},m=0;m<o.length;m++){if(void 0!==this.pdf.internal.getFont(o[m],u,{noFallback:!0,disableWarning:!0})){h=o[m];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(o[m],"bold",{noFallback:!0,disableWarning:!0}))h=o[m],u="bold";else if(void 0!==this.pdf.internal.getFont(o[m],"normal",{noFallback:!0,disableWarning:!0})){h=o[m],u="normal";break}}if(""===h)for(var g=0;g<o.length;g++)if(p[o[g]]){h=p[o[g]];break}h=""===h?"Times":h,this.pdf.setFont(h,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,L.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,L.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){y.call(this,"fill",!1)},u.prototype.stroke=function(){y.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw CX.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var r=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"mt",x:r.x,y:r.y}),this.ctx.lastPoint=new i(e,t)},u.prototype.closePath=function(){var e=new i(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,gV.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new i(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw CX.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var r=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"lt",x:r.x,y:r.y}),this.ctx.lastPoint=new i(r.x,r.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),y.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,r,n){if(isNaN(r)||isNaN(n)||isNaN(e)||isNaN(t))throw CX.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var a=this.ctx.transform.applyToPoint(new i(r,n)),s=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:a.x,y:a.y}),this.ctx.lastPoint=new i(a.x,a.y)},u.prototype.bezierCurveTo=function(e,t,r,n,a,s){if(isNaN(a)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw CX.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new i(a,s)),l=this.ctx.transform.applyToPoint(new i(e,t)),c=this.ctx.transform.applyToPoint(new i(r,n));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new i(o.x,o.y)},u.prototype.arc=function(e,t,r,n,a,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a))throw CX.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new i(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new i(0,r)),c=this.ctx.transform.applyToPoint(new i(0,0));r=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(a-n)>=2*Math.PI&&(n=0,a=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:r,startAngle:n,endAngle:a,counterclockwise:s})},u.prototype.arcTo=function(e,t,r,n,a){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw CX.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.lineTo(e+r,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw CX.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var a={};"butt"!==this.lineCap&&(a.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(a.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,r,n),this.fill(),a.hasOwnProperty("lineCap")&&(this.lineCap=a.lineCap),a.hasOwnProperty("lineJoin")&&(this.lineJoin=a.lineJoin)}},u.prototype.strokeRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw CX.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,r,n),this.stroke())},u.prototype.clearRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw CX.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,r,n))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var n=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=n}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,r,n,a;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,r=0,n=0,a=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),r=parseInt(s[2]),n=parseInt(s[3]),a=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),r=parseInt(s[2]),n=parseInt(s[3]),a=parseFloat(s[4]);else{if(a=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new IX(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,r=e.substring(2,3),r+=r,n=e.substring(3,4),n+=n):(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7)),t=parseInt(t,16),r=parseInt(r,16),n=parseInt(n,16)}}return{r:t,g:r,b:n,a:a,style:e}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw CX.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(n=isNaN(n)?void 0:n,!f.call(this)){var a=I(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:r,scale:s,angle:a,align:this.textAlign,maxWidth:n})}},u.prototype.strokeText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw CX.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){n=isNaN(n)?void 0:n;var a=I(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:r,scale:s,renderingMode:"stroke",angle:a,align:this.textAlign,maxWidth:n})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw CX.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,r=this.pdf.internal.scaleFactor,n=t.internal.getFontSize(),a=t.getStringUnitWidth(e)*n/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:a*=Math.round(96*r/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw CX.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var r=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(r)},u.prototype.rotate=function(e){if(isNaN(e))throw CX.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw CX.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var r=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(r)},u.prototype.transform=function(e,t,r,n,a,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(s))throw CX.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new l(e,t,r,n,a,s);this.ctx.transform=this.ctx.transform.multiply(i)},u.prototype.setTransform=function(e,t,r,n,a,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,r=isNaN(r)?0:r,n=isNaN(n)?1:n,a=isNaN(a)?0:a,s=isNaN(s)?0:s,this.ctx.transform=new l(e,t,r,n,a,s)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,r,n,a,s,i,c,d){var u=this.pdf.getImageProperties(e),h=1,f=1,p=1,v=1;void 0!==n&&void 0!==c&&(p=c/n,v=d/a,h=u.width/n*c/n,f=u.height/a*d/a),void 0===s&&(s=t,i=r,t=0,r=0),void 0!==n&&void 0===c&&(c=n,d=a),void 0===n&&void 0===c&&(c=u.width,d=u.height);for(var y,j=this.ctx.transform.decompose(),N=I(j.rotate.shx),_=new l,S=(_=(_=(_=_.multiply(j.translate)).multiply(j.skew)).multiply(j.scale)).applyToRectangle(new o(s-t*p,i-r*v,n*h,a*f)),k=g.call(this,S),A=[],E=0;E<k.length;E+=1)-1===A.indexOf(k[E])&&A.push(k[E]);if(x(A),this.autoPaging)for(var C=A[0],T=A[A.length-1],P=C;P<T+1;P++){this.pdf.setPage(P);var D=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],O=1===P?this.posY+this.margin[0]:this.margin[0],M=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],R=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],L=1===P?0:M+(P-2)*R;if(0!==this.ctx.clip_path.length){var F=this.path;y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(y,this.posX+this.margin[3],-L+O+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=F}var B=JSON.parse(JSON.stringify(S));B=b([B],this.posX+this.margin[3],-L+O+this.ctx.prevPageLastElemOffset)[0];var z=(P>C||P<T)&&m.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,R,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,N),z&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",S.x,S.y,S.w,S.h,null,null,N)};var g=function(e,t,r){var n=[];t=t||this.pdf.internal.pageSize.width,r=r||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":n.push(Math.floor((e.y+a)/r)+1);break;case"arc":n.push(Math.floor((e.y+a-e.radius)/r)+1),n.push(Math.floor((e.y+a+e.radius)/r)+1);break;case"qct":var s=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);n.push(Math.floor((s.y+a)/r)+1),n.push(Math.floor((s.y+s.h+a)/r)+1);break;case"bct":var i=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);n.push(Math.floor((i.y+a)/r)+1),n.push(Math.floor((i.y+i.h+a)/r)+1);break;case"rect":n.push(Math.floor((e.y+a)/r)+1),n.push(Math.floor((e.y+e.h+a)/r)+1)}for(var o=0;o<n.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<n[o];)v.call(this);return n},v=function(){var e=this.fillStyle,t=this.strokeStyle,r=this.font,n=this.lineCap,a=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=r,this.lineCap=n,this.lineWidth=a,this.lineJoin=s},b=function(e,t,r){for(var n=0;n<e.length;n++)switch(e[n].type){case"bct":e[n].x2+=t,e[n].y2+=r;case"qct":e[n].x1+=t,e[n].y1+=r;default:e[n].x+=t,e[n].y+=r}return e},x=function(e){return e.sort(function(e,t){return e-t})},y=function(e,t){for(var r,n,a=this.fillStyle,s=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],f=0;f<u.length;f++)if(void 0!==u[f].x)for(var p=g.call(this,u[f]),y=0;y<p.length;y+=1)-1===h.indexOf(p[y])&&h.push(p[y]);for(var j=0;j<h.length;j++)for(;this.pdf.internal.getNumberOfPages()<h[j];)v.call(this);if(x(h),this.autoPaging)for(var N=h[0],_=h[h.length-1],S=N;S<_+1;S++){this.pdf.setPage(S),this.fillStyle=a,this.strokeStyle=s,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],A=1===S?this.posY+this.margin[0]:this.margin[0],E=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],C=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],T=1===S?0:E+(S-2)*C;if(0!==this.ctx.clip_path.length){var P=this.path;r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(r,this.posX+this.margin[3],-T+A+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=P}if(n=JSON.parse(JSON.stringify(d)),this.path=b(n,this.posX+this.margin[3],-T+A+this.ctx.prevPageLastElemOffset),!1===t||0===S){var D=(S>N||S<_)&&m.call(this);D&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,C,null).clip().discardPath()),w.call(this,e,t),D&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=d},w=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!f.call(this))){for(var r,n,a=[],s=this.path,i=0;i<s.length;i++){var o=s[i];switch(o.type){case"begin":a.push({begin:!0});break;case"close":a.push({close:!0});break;case"mt":a.push({start:o,deltas:[],abs:[]});break;case"lt":var l=a.length;if(s[i-1]&&!isNaN(s[i-1].x)&&(r=[o.x-s[i-1].x,o.y-s[i-1].y],l>0))for(;l>=0;l--)if(!0!==a[l-1].close&&!0!==a[l-1].begin){a[l-1].deltas.push(r),a[l-1].abs.push(o);break}break;case"bct":r=[o.x1-s[i-1].x,o.y1-s[i-1].y,o.x2-s[i-1].x,o.y2-s[i-1].y,o.x-s[i-1].x,o.y-s[i-1].y],a[a.length-1].deltas.push(r);break;case"qct":var c=s[i-1].x+2/3*(o.x1-s[i-1].x),d=s[i-1].y+2/3*(o.y1-s[i-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),m=o.x,g=o.y;r=[c-s[i-1].x,d-s[i-1].y,u-s[i-1].x,h-s[i-1].y,m-s[i-1].x,g-s[i-1].y],a[a.length-1].deltas.push(r);break;case"arc":a.push({deltas:[],abs:[],arc:!0}),Array.isArray(a[a.length-1].abs)&&a[a.length-1].abs.push(o)}}n=t?null:"stroke"===e?"stroke":"fill";for(var v=!1,b=0;b<a.length;b++)if(a[b].arc)for(var x=a[b].abs,y=0;y<x.length;y++){var w=x[y];"arc"===w.type?_.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!v):C.call(this,w.x,w.y),v=!0}else if(!0===a[b].close)this.pdf.internal.out("h"),v=!1;else if(!0!==a[b].begin){var j=a[b].start.x,N=a[b].start.y;T.call(this,a[b].deltas,j,N),v=!0}n&&S.call(this,n),t&&k.call(this)}},j=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,r=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-r;case"top":return e+t-r;case"hanging":return e+t-2*r;case"middle":return e+t/2-r;default:return e}},N=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(e,t,r,n,a,s,i,o,l){for(var c=D.call(this,r,n,a,s),d=0;d<c.length;d++){var u=c[d];0===d&&(l?A.call(this,u.x1+e,u.y1+t):C.call(this,u.x1+e,u.y1+t)),P.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?k.call(this):S.call(this,i)},S=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(e,t){this.pdf.internal.out(r(e)+" "+n(t)+" m")},E=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var r=this.pdf.getTextDimensions(e.text),n=j.call(this,e.y),a=N.call(this,n)-r.h,s=this.ctx.transform.applyToPoint(new i(e.x,n)),c=this.ctx.transform.decompose(),d=new l;d=(d=(d=d.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var u,h,f,p=this.ctx.transform.applyToRectangle(new o(e.x,n,r.w,r.h)),v=d.applyToRectangle(new o(e.x,a,r.w,r.h)),y=g.call(this,v),_=[],S=0;S<y.length;S+=1)-1===_.indexOf(y[S])&&_.push(y[S]);if(x(_),this.autoPaging)for(var k=_[0],A=_[_.length-1],E=k;E<A+1;E++){this.pdf.setPage(E);var C=1===E?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[2],D=P-this.margin[0],O=this.pdf.internal.pageSize.width-this.margin[1],I=O-this.margin[3],M=1===E?0:T+(E-2)*D;if(0!==this.ctx.clip_path.length){var R=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(u,this.posX+this.margin[3],-1*M+C),w.call(this,"fill",!0),this.path=R}var L=b([JSON.parse(JSON.stringify(v))],this.posX+this.margin[3],-M+C+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale);var F="text"!==this.autoPaging;if(F||L.y+L.h<=P){if(F||L.y>=C&&L.x<=O){var B=F?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||O-L.x)[0],z=b([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-M+C+this.ctx.prevPageLastElemOffset)[0],U=F&&(E>k||E<A)&&m.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,D,null).clip().discardPath()),this.pdf.text(B,z.x,z.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),U&&this.pdf.restoreGraphicsState()}}else L.y<P&&(this.ctx.prevPageLastElemOffset+=P-L.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)},C=function(e,t,a,s){a=a||0,s=s||0,this.pdf.internal.out(r(e+a)+" "+n(t+s)+" l")},T=function(e,t,r){return this.pdf.lines(e,t,r,null,null)},P=function(e,r,n,i,o,l,c,d){this.pdf.internal.out([t(a(n+e)),t(s(i+r)),t(a(o+e)),t(s(l+r)),t(a(c+e)),t(s(d+r)),"c"].join(" "))},D=function(e,t,r,n){for(var a=2*Math.PI,s=Math.PI/2;t>r;)t-=a;var i=Math.abs(r-t);i<a&&n&&(i=a-i);for(var o=[],l=n?-1:1,c=t;i>1e-5;){var d=c+l*Math.min(i,s);o.push(O.call(this,e,c,d)),i-=Math.abs(d-c),c=d}return o},O=function(e,t,r){var n=(r-t)/2,a=e*Math.cos(n),s=e*Math.sin(n),i=a,o=-s,l=i*i+o*o,c=l+i*a+o*s,d=4/3*(Math.sqrt(2*l*c)-c)/(i*s-o*a),u=i-d*o,h=o+d*i,f=u,p=-h,m=n+t,g=Math.cos(m),v=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*v,y2:u*v+h*g,x3:f*g-p*v,y3:f*v+p*g,x4:e*Math.cos(r),y4:e*Math.sin(r)}},I=function(e){return 180*e/Math.PI},M=function(e,t,r,n,a,s){var i=e+.5*(r-e),l=t+.5*(n-t),c=a+.5*(r-a),d=s+.5*(n-s),u=Math.min(e,a,i,c),h=Math.max(e,a,i,c),f=Math.min(t,s,l,d),p=Math.max(t,s,l,d);return new o(u,f,h-u,p-f)},R=function(e,t,r,n,a,s,i,l){var c,d,u,h,f,p,m,g,v,b,x,y,w,j,N=r-e,_=n-t,S=a-r,k=s-n,A=i-a,E=l-s;for(d=0;d<41;d++)v=(m=(u=e+(c=d/40)*N)+c*((f=r+c*S)-u))+c*(f+c*(a+c*A-f)-m),b=(g=(h=t+c*_)+c*((p=n+c*k)-h))+c*(p+c*(s+c*E-p)-g),0==d?(x=v,y=b,w=v,j=b):(x=Math.min(x,v),y=Math.min(y,b),w=Math.max(w,v),j=Math.max(j,b));return new o(Math.round(x),Math.round(y),Math.round(w-x),Math.round(j-y))},L=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,r=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==r&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=r)}}}(iJ.API),function(e){var t=function(e){var t,r,n,a,s,i,o,l,c,d;for(/[^\x00-\xFF]/.test(e),r=[],n=0,a=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;a>n;n+=4)0!==(s=(e.charCodeAt(n)<<24)+(e.charCodeAt(n+1)<<16)+(e.charCodeAt(n+2)<<8)+e.charCodeAt(n+3))?(i=(s=((s=((s=((s=(s-(d=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,r.push(i+33,o+33,l+33,c+33,d+33)):r.push(122);return function(e,t){for(var r=t;r>0;r--)e.pop()}(r,t.length),String.fromCharCode.apply(String,r)+"~>"},r=function(e){var t,r,n,a,s,i=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),n=[],a=0,s=(e+=t="uuuuu"[d](e[o]%5||5))[o];s>a;a+=5)r=52200625*(e[c](a)-33)+614125*(e[c](a+1)-33)+7225*(e[c](a+2)-33)+85*(e[c](a+3)-33)+(e[c](a+4)-33),n.push(l&r>>24,l&r>>16,l&r>>8,l&r);return function(e,t){for(var r=t;r>0;r--)e.pop()}(n,t[o]),i.fromCharCode.apply(i,n)},n=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var r="",n=0;n<e.length;n+=2)r+=String.fromCharCode("0x"+(e[n]+e[n+1]));return r},s=function(e){for(var t=new Uint8Array(e.length),r=e.length;r--;)t[r]=e.charCodeAt(r);return(t=eG(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,i){var o=0,l=e||"",c=[];for("string"==typeof(i=i||[])&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=a(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=n(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(iJ.API),(mZ=iJ.API).loadFile=function(e,t,r){return function(e,t,r){t=!1!==t,r="function"==typeof r?r:function(){};var n=void 0;try{n=function(e,t,r){var n=new XMLHttpRequest,a=0,s=function(e){var t=e.length,r=[],n=String.fromCharCode;for(a=0;a<t;a+=1)r.push(n(255&e.charCodeAt(a)));return r.join("")};if(n.open("GET",e,!t),n.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(n.onload=function(){200===n.status?r(s(this.responseText)):r(void 0)}),n.send(null),t&&200===n.status)return s(n.responseText)}(e,t,r)}catch(TV){}return n}(e,t,r)},mZ.loadImageFile=mZ.loadFile,function(e){function t(){return(AX.html2canvas?Promise.resolve(AX.html2canvas):r.e(52).then(r.t.bind(r,1052,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function n(){return(AX.DOMPurify?Promise.resolve(AX.DOMPurify):r.e(82).then(r.bind(r,7082))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var a=function(e){var t=(0,gV.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},s=function(e,t){var r=document.createElement(e);for(var n in t.className&&(r.className=t.className),t.innerHTML&&t.dompurify&&(r.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)r.style[n]=t.style[n];return r},i=function e(t,r){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==r&&1===a.nodeType&&"SCRIPT"===a.nodeName||n.appendChild(e(a,r));return 1===t.nodeType&&("CANVAS"===t.nodeName?(n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value),n.addEventListener("load",function(){n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft},!0)),n},o=function e(t){var r=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),n=e.convert(Promise.resolve(),r);return(n=n.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(a(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.then(n).then(function(t){return this.set({src:s("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,r=this.opt.fontFaces,n="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,a=Object.assign({async:!0,allowTaint:!0,scale:n,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=r,r)for(var s=0;s<r.length;++s){var i=r[s],o=i.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,i.ref.name,i.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=0==a.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,t.context2d.save(!0),e(this.prop.container,a)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,r){return"img"===(r=r||"pdf").toLowerCase()||"image"===r.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==a(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var r=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(r):r})},o.prototype.setMargin=function(e){return this.then(function(){switch(a(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||iJ.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,r,n){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=r&&(this.progress.n=r),null!=n&&(this.progress.stack=n),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,r,n){return this.setProgress(e?this.progress.val+e:null,t||null,r?this.progress.n+r:null,n?this.progress.stack.concat(n):null)},o.prototype.then=function(e,t){var r=this;return this.thenCore(e,t,function(e,t){return r.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return r.updateProgress(null,e),t}).then(e,t).then(function(e){return r.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,r){r=r||Promise.prototype.then;var n=this;e&&(e=e.bind(n)),t&&(t=t.bind(n));var a=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?n:o.convert(Object.assign({},n),Promise.prototype),s=r.call(a,e,t);return o.convert(s,n.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,iJ.getPageSize=function(e,t,r){if("object"===(0,gV.A)(e)){var n=e;e=n.orientation,t=n.unit||t,r=n.format||r}t=t||"mm",r=r||"a4",e=(""+(e||"P")).toLowerCase();var a,s=(""+r).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(i.hasOwnProperty(s))l=i[s][1]/a,c=i[s][0]/a;else try{l=r[1],c=r[0]}catch(IX){throw new Error("Invalid format: "+r)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:a,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(QJ):null;var r=new o(t);return t.worker?r:r.from(e).doCallback()}}(iJ.API),iJ.API.addJS=function(e){return cZ=e,this.internal.events.subscribe("postPutResources",function(){oZ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(oZ+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),lZ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+cZ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==oZ&&void 0!==lZ&&this.internal.out("/Names <</JavaScript "+oZ+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=e.outline.render().split(/\r\n/),a=0;a<n.length;a++){var s=n[a],i=r.exec(s);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(a=0;a<l;a++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<c.length;a++)e.internal.write("(page_"+(a+1)+")"+c[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,r){var n={title:t,options:r,children:[]};return null==e&&(e=this.root),e.children.push(n),n},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var r=0;r<t.children.length;r++)this.genIds_r(t.children[r])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<t.children.length;n++){var a=t.children[n];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(t)),n>0&&this.line("/Prev "+this.makeRef(t.children[n-1])),n<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[n+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var i=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var r=0;r<t.children.length;r++)e.count++,this.count_r(e,t.children[r]);return e.count}}])}(iJ.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,r,n,a,s,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,o=function(e){for(var r,n=256*e.charCodeAt(4)+e.charCodeAt(5),a=e.length,s={width:0,height:0,numcomponents:1},i=4;i<a;i+=2){if(i+=n,-1!==t.indexOf(e.charCodeAt(i+1))){r=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),s={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:r,numcomponents:e.charCodeAt(i+9)};break}n=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),o.numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:r,alias:n}}return c}}(iJ.API),iJ.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,s=function(e,t){return new SX(e,t).decode()}(e,{checkCrc:!0}),i=s.width,o=s.height,l=s.channels,c=s.palette,d=s.depth;a=c&&1===l?function(e){for(var t=e.width,r=e.height,n=e.data,a=e.palette,s=e.depth,i=!1,o=[],l=[],c=void 0,d=!1,u=0,h=0;h<a.length;h++){var f=nG(a[h],4),p=f[0],m=f[1],g=f[2],v=f[3];o.push(p,m,g),null!=v&&(0===v?(u++,l.length<1&&l.push(h)):v<255&&(d=!0))}if(d||u>1){i=!0,l=void 0;var b=t*r;c=new Uint8Array(b);for(var x=new DataView(n.buffer),y=0;y<b;y++){var w=nG(a[SZ(x,y,s)],4)[3];c[y]=w}}else 0===u&&(l=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:i?8:void 0,colorBytes:n,alphaBytes:c,needSMask:i,palette:o,mask:l}}(s):2===l||4===l?function(e){for(var t=e.data,r=e.width,n=e.height,a=e.channels,s=e.depth,i=2===a?"DeviceGray":"DeviceRGB",o=a-1,l=r*n,c=o,d=l*c,u=1*l,h=Math.ceil(d*s/8),f=Math.ceil(u*s/8),p=new Uint8Array(h),m=new Uint8Array(f),g=new DataView(t.buffer),v=new DataView(p.buffer),b=new DataView(m.buffer),x=!1,y=0;y<l;y++){for(var w=y*a,j=0;j<c;j++)kZ(v,SZ(g,w+j,s),y*c+j,s);var N=SZ(g,w+c,s);N<(1<<s)-1&&(x=!0),kZ(b,N,1*y,s)}return{colorSpace:i,colorsPerPixel:o,sMaskBitsPerComponent:x?s:void 0,colorBytes:p,alphaBytes:m,needSMask:x}}(s):function(e){var t=e.data,r=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:r,colorsPerPixel:"DeviceGray"===r?1:3,colorBytes:t instanceof Uint16Array?function(e){for(var t=e.length,r=new Uint8Array(2*t),n=new DataView(r.buffer,r.byteOffset,r.byteLength),a=0;a<t;a++)n.setUint16(2*a,e[a],!1);return r}(t):t,needSMask:!1}}(s);var u,h,f,p=a,m=p.colorSpace,g=p.colorsPerPixel,v=p.sMaskBitsPerComponent,b=p.colorBytes,x=p.alphaBytes,y=p.needSMask,w=p.palette,j=p.mask,N=null;return n!==iJ.API.image_compression.NONE?(N=function(e){var t;switch(e){case iJ.API.image_compression.FAST:t=11;break;case iJ.API.image_compression.MEDIUM:t=13;break;case iJ.API.image_compression.SLOW:t=14;break;default:t=12}return t}(n),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(N," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(i),e=vZ(b,Math.ceil(i*g*d/8),g,d,n),y&&(f=vZ(x,Math.ceil(i*v/8),1,v,n))):(u=void 0,h=void 0,e=b,y&&(f=x)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:e,index:t,filter:u,decodeParameters:h,transparency:j,palette:w,sMask:f,predictor:N,width:i,height:o,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:m}}},function(e){e.processGIF89A=function(t,r,n,a){var s=new EZ(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new TZ(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(iJ.API),PZ.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},PZ.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){CX.log("bit decode error:"+r)}},PZ.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==r&&(this.pos+=4-r)}},PZ.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},PZ.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},PZ.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=e}},PZ.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&r)/r*255|0,c=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},PZ.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},PZ.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},PZ.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new PZ(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new TZ(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(iJ.API),DZ.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new DZ(t),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new TZ(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(iJ.API),iJ.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var d=n[c],u=n[c+1],h=n[c+2],f=n[c+3];s[o++]=d,s[o++]=u,s[o++]=h,i[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:p,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},iJ.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},dZ=iJ.API,uZ=dZ.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=!1!==t.doKerning,h=0,f=e.length,p=0,m=o[0]||l,g=[];for(r=0;r<f;r++)n=e.charCodeAt(r),"function"==typeof a.metadata.widthOfString?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=u&&"object"===(0,gV.A)(c[n])&&!isNaN(parseInt(c[n][p],10))?c[n][p]/d:0,g.push((o[n]||m)/l+h)),p=n;return g},hZ=dZ.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return dZ.processArabic&&(e=dZ.processArabic(e)),"function"==typeof n.metadata.widthOfString?n.metadata.widthOfString(e,r,a)/r:uZ.apply(this,arguments).reduce(function(e,t){return e+t},0)},fZ=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},pZ=function(e,t,r){r||(r={});var n,a,s,i,o,l,c,d=[],u=[d],h=r.textIndent||0,f=0,p=0,m=e.split(" "),g=uZ.apply(this,[" ",r])[0];if(l=-1===r.lineIndent?m[0].length+2:r.lineIndent||0){var v=Array(l).join(" "),b=[];m.map(function(e){(e=e.split(/\s*\n/)).length>1?b=b.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):b.push(e[0])}),m=b,l=hZ.apply(this,[v,r])}for(s=0,i=m.length;s<i;s++){var x=0;if(n=m[s],l&&"\n"==n[0]&&(n=n.substr(1),x=1),h+f+(p=(a=uZ.apply(this,[n,r])).reduce(function(e,t){return e+t},0))>t||x){if(p>t){for(o=fZ.apply(this,[n,a,t-(h+f),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);p=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[n];u.push(d),h=p+l,f=g}else d.push(n),h+=f+p,f=g}return c=l?function(e,t){return(t?v:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},dZ.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),r="Unicode";return t.metadata[r]?{widths:t.metadata[r].widths||{0:1},kerning:t.metadata[r].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(pZ.apply(this,[n[o],i,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=t[s],a[t[s]]=r[s];var i=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,r,n,s,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?r="'"+c+"'":(c=parseInt(c,10),r=(r=i(c).slice(2)).slice(0,-1)+a[r.slice(-1)]),"number"==typeof t)t<0?(n=i(t).slice(3),s="-"):(n=i(t).slice(2),s=""),n=s+n.slice(0,-1)+a[n.slice(-1)];else{if("object"!==(0,gV.A)(t))throw new Error("Don't know what to do with value type "+(0,gV.A)(t)+".");n=o(t)}l.push(r+n)}return l.push("}"),l.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,a,s,i={},o=1,l=i,c=[],d="",u="",h=e.length-1,f=1;f<h;f+=1)"'"==(s=e[f])?t?(a=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(c.push([l,a]),l={},a=void 0):"}"==s?((r=c.pop())[0][r[1]]=l,a=void 0,l=r[0]):"-"==s?o=-1:void 0===a?n.hasOwnProperty(s)?(d+=n[s],a=parseInt(d,16)*o,o=1,d=""):d+=s:n.hasOwnProperty(s)?(u+=n[s],l[a]=parseInt(u,16)*o,o=1,a=void 0,u=""):u+=s;return i},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode={},t.metadata.Unicode.widths=r.widths,t.metadata.Unicode.kerning=r.kerning);var n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode.encoding=n,t.encoding=n.codePages[0])}])}(iJ.API),function(e){var t=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(n=!1===s.existsFileInVFS(a.postScriptName)?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");!function(r,n){n=/^\x00\x01\x00\x00/.test(n)?t(n):t(MX(n)),r.metadata=e.API.TTFFont.open(n),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]}(a,n)}}])}(iJ),iJ.API.addSvgAsImage=function(e,t,n,a,s,i,o,l){if(isNaN(t)||isNaN(n))throw CX.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw CX.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=a,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(AX.canvg?Promise.resolve(AX.canvg):r.e(239).then(r.bind(r,4620))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,n,a,s,o,l)})},iJ.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},iJ.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],c=0,d=0,u=0;function h(e,t){var r,n=!1;for(r=0;r<e.length;r+=1)e[r]===t&&(n=!0);return n}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var f=o.length;for(u=0;u<f;u+=1)r[o[u]].value=r[o[u]].defaultValue,r[o[u]].explicitSet=!1}if("object"===(0,gV.A)(e))for(a in e)if(s=e[a],h(o,a)&&void 0!==s){if("boolean"===r[a].type&&"boolean"==typeof s)r[a].value=s;else if("name"===r[a].type&&h(r[a].valueSet,s))r[a].value=s;else if("integer"===r[a].type&&Number.isInteger(s))r[a].value=s;else if("array"===r[a].type){for(c=0;c<s.length;c+=1)if(n=!0,1===s[c].length&&"number"==typeof s[c][0])l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)"number"!=typeof s[c][d]&&(n=!1);!0===n&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in r)!0===r[e].explicitSet&&("name"===r[e].type?t.push("/"+e+" /"+r[e].value):t.push("/"+e+" "+r[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(e)),n=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),i=r.length+n.length+a.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+r+n+a+s),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,n){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(iJ.API),function(e){var t=e.API,r=t.pdfEscape16=function(e,t){for(var r,n=t.metadata.Unicode.widths,a=["","0","00","000","0000"],s=[""],i=0,o=e.length;i<o;++i){if(r=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(r),t.metadata.toUnicode[r]=e.charCodeAt(i),-1==n.indexOf(r)&&(n.push(r),n.push([parseInt(t.metadata.widthOfGlyph(r),10)])),"0"==r)return s.join("");r=r.toString(16),s.push(a[4-r.length],r)}return s.join("")},n=function(e){var t,r,n,a,s,i,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",n=[],i=0,o=(r=Object.keys(e).sort(function(e,t){return e-t})).length;i<o;i++)t=r[i],n.length>=100&&(s+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar",n=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(a=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),n.push("<"+t+"><"+a+">"));return n.length&&(s+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,s=t.newObject,i=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"Identity-H"===r.encoding){for(var o=r.metadata.Unicode.widths,l=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=s();i({data:c,addLength1:!0,objectId:u}),a("endobj");var h=s();i({data:n(r.metadata.toUnicode),addLength1:!0,objectId:h}),a("endobj");var f=s();a("<<"),a("/Type /FontDescriptor"),a("/FontName /"+eJ(r.fontName)),a("/FontFile2 "+u+" 0 R"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/Flags "+r.metadata.flags),a("/StemV "+r.metadata.stemV),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a(">>"),a("endobj");var p=s();a("<<"),a("/Type /Font"),a("/BaseFont /"+eJ(r.fontName)),a("/FontDescriptor "+f+" 0 R"),a("/W "+e.API.PDFObject.convert(o)),a("/CIDToGIDMap /Identity"),a("/DW 1000"),a("/Subtype /CIDFontType2"),a("/CIDSystemInfo"),a("<<"),a("/Supplement 0"),a("/Registry (Adobe)"),a("/Ordering ("+r.encoding+")"),a(">>"),a(">>"),a("endobj"),r.objectNumber=s(),a("<<"),a("/Type /Font"),a("/Subtype /Type0"),a("/ToUnicode "+h+" 0 R"),a("/BaseFont /"+eJ(r.fontName)),a("/Encoding /"+r.encoding),a("/DescendantFonts ["+p+" 0 R]"),a(">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,s=t.newObject,i=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===r.encoding){for(var o=r.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=s();i({data:l,addLength1:!0,objectId:d}),a("endobj");var u=s();i({data:n(r.metadata.toUnicode),addLength1:!0,objectId:u}),a("endobj");var h=s();a("<<"),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a("/StemV "+r.metadata.stemV),a("/Type /FontDescriptor"),a("/FontFile2 "+d+" 0 R"),a("/Flags 96"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/FontName /"+eJ(r.fontName)),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a(">>"),a("endobj"),r.objectNumber=s();for(var f=0;f<r.metadata.hmtx.widths.length;f++)r.metadata.hmtx.widths[f]=parseInt(r.metadata.hmtx.widths[f]*(1e3/r.metadata.head.unitsPerEm));a("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+eJ(r.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]);var a=function(e){var t,n=e.text||"",a=e.x,s=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",f=0,p="",m=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:n,x:a,y:s,options:i,mutex:o};for(p=n,u=c,Array.isArray(n)&&(p=n[0]),f=0;f<p.length;f+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),t||p[f].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=p[f]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===m?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===m&&(g=r(h,d[u])),o.isHex=!0,{text:g,x:a,y:s,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",r=[],n={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?r.push([a(Object.assign({},n,{text:t[s][0]})).text,t[s][1],t[s][2]]):r.push(a(Object.assign({},n,{text:t[s]})).text);e.text=r}else e.text=a(Object.assign({},n,{text:t})).text}])}(iJ),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(iJ.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var r,n,a,s,i,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var b=function(e){var t=e.charCodeAt(),r=t>>8,n=f[r];return void 0!==n?c[256*n+(255&t)]:252===r||253===r?"AL":m.test(r)?"L":8===r?"R":"N"},x=function(e){for(var t,r=0;r<e.length;r++){if("L"===(t=b(e.charAt(r))))return!1;if("R"===t)return!0}return!1},y=function(e,t,i,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){h="EN";break}if(g){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(a&&!s){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var f=e[o],p=f>=1425&&f<=2303||64286===f;if(l=t[d],p&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":g=!1,r=!0,h=v;break;case"S":n=!0,h="N"}return h},w=function(e,t,r){var n=e.split("");return r&&j(n,r,{hiLevel:v}),n.reverse(),t&&t.reverse(),n.join("")},j=function(e,t,a){var s,i,o,l,c,f=-1,p=e.length,m=0,x=[],w=v?u:d,j=[];for(g=!1,r=!1,n=!1,i=0;i<p;i++)j[i]=b(e[i]);for(o=0;o<p;o++){if(c=m,x[o]=y(e,j,x,o),s=240&(m=w[c][h[x[o]]]),m&=15,t[o]=l=w[m][5],s>0)if(16===s){for(i=f;i<o;i++)t[i]=1;f=-1}else f=-1;if(w[m][6])-1===f&&(f=o);else if(f>-1){for(i=f;i<o;i++)t[i]=l;f=-1}"B"===j[o]&&(t[o]=0),a.hiLevel|=l}n&&function(e,t,r){for(var n=0;n<r;n++)if("S"===e[n]){t[n]=v;for(var a=n-1;a>=0&&"WS"===e[a];a--)t[a]=v}}(j,t,p)},N=function(e,t,n,a,s){if(!(s.hiLevel<e)){if(1===e&&1===v&&!r)return t.reverse(),void(n&&n.reverse());for(var i,o,l,c,d=t.length,u=0;u<d;){if(a[u]>=e){for(l=u+1;l<d&&a[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,n&&(i=n[c],n[c]=n[o],n[o]=i);u=l}u++}}},_=function(e,t,r){var n=e.split(""),a={hiLevel:v};return r||(r=[]),j(n,r,a),function(e,t,r){if(0!==r.hiLevel&&l)for(var n,a=0;a<e.length;a++)1===t[a]&&(n=p.indexOf(e[a]))>=0&&(e[a]=p[n+1])}(n,r,a),N(2,n,t,r,a),N(1,n,t,r,a),n.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,r){if(function(e,t){if(t)for(var r=0;r<e.length;r++)t[r]=r;void 0===s&&(s=x(e)),void 0===o&&(o=x(e))}(e,t),a||!i||o)if(a&&i&&s^o)v=s?1:0,e=w(e,t,r);else if(!a&&i&&o)v=s?1:0,e=_(e,t,r),e=w(e,t);else if(!a||s||i||o){if(a&&!i&&s^o)e=w(e,t),s?(v=0,e=_(e,t,r)):(v=1,e=_(e,t,r),e=w(e,t));else if(a&&s&&!i&&o)v=1,e=_(e,t,r),e=w(e,t);else if(!a&&!i&&s^o){var n=l;s?(v=1,e=_(e,t,r),v=0,l=!1,e=_(e,t,r),l=n):(v=0,e=_(e,t,r),e=w(e,t),v=1,l=!1,e=_(e,t,r),l=n,e=w(e,t))}}else v=0,e=_(e,t,r);else v=s?1:0,e=_(e,t,r);return e},this.__bidiEngine__.setOptions=function(e){e&&(a=e.isInputVisual,i=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var n=e.options||{};e.mutex,n.lang;var a=[];if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,r.setOptions(n),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(a=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?a.push([r.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):a.push([r.doBidiReorder(t[s])]);e.text=a}else e.text=r.doBidiReorder(t);r.setOptions({isInputVisual:!0})}])}(iJ),iJ.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new IZ(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new QZ(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new MZ(this.contents),this.head=new FZ(this),this.name=new VZ(this),this.cmap=new zZ(this),this.toUnicode={},this.hhea=new UZ(this),this.maxp=new GZ(this),this.hmtx=new KZ(this),this.post=new WZ(this),this.os2=new qZ(this),this.loca=new ZZ(this),this.glyf=new YZ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,r,n,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,r,n,a;for(a=[],t=0,r=(n=this.bbox).length;t<r;t++)e=n[t],a.push(Math.round(e*this.scaleFactor));return a}.call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),32768&(t=n>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(a=this.familyClass)||2===a||3===a||4===a||5===a||7===a,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,r){var n,a,s,i;for(s=0,a=0,i=(e=""+e).length;0<=i?a<i:a>i;a=0<=i?++a:--a)n=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var r;return null==t&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},e}();var OZ,IZ=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(e){var t,r,n;for(n=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)n.push(this.writeByte(e.charCodeAt(t)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,r,n,a,s,i,o;return e=this.readByte(),t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^a)+65536*(255^s)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*n+16777216*a+65536*s+256*i+o},e.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(e){var t,r,n,a;for(a=[],r=0,n=e.length;r<n;r++)t=e[r],a.push(this.writeByte(t));return a},e}(),MZ=function(){var e;function t(e){var t,r,n;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,n=this.tableCount;0<=n?r<n:r>n;r=0<=n?++r:--r)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var r,n,a,s,i,o,l,c,d,u,h,f,p;for(p in h=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(h)/o),s=Math.floor(d/o),c=16*h-d,(n=new IZ).writeInt(this.scalarType),n.writeShort(h),n.writeShort(d),n.writeShort(s),n.writeShort(c),a=16*h,l=n.pos+a,i=null,f=[],t)for(u=t[p],n.writeString(p),n.writeInt(e(u)),n.writeInt(l),n.writeInt(u.length),f=f.concat(u),"head"===p&&(i=l),l+=u.length;l%4;)f.push(0),l++;return n.write(f),r=2981146554-e(n.data),n.pos=i+8,n.writeUInt32(r),n.data},e=function(e){var t,r,n,a;for(e=$Z.call(e);e.length%4;)e.push(0);for(n=new IZ(e),r=0,t=0,a=e.length;t<a;t=t+=4)r+=n.readUInt32();return 4294967295&r},t}(),RZ={}.hasOwnProperty,LZ=function(e,t){for(var r in t)RZ.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};OZ=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var FZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new IZ).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),BZ=function(){function e(e,t){var r,n,a,s,i,o,l,c,d,u,h,f,p,m,g,v,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,a=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),e.pos+=2,p=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),l=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),c=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),n=(this.length-e.pos+this.offset)/2,i=function(){var t,r;for(r=[],o=t=0;0<=n?t<n:t>n;o=0<=n?++t:--t)r.push(e.readUInt16());return r}(),o=g=0,b=a.length;g<b;o=++g)for(m=a[o],r=v=f=p[o];f<=m?v<=m:v>=m;r=f<=m?++v:--v)0===c[o]?s=r+l[o]:0!==(s=i[c[o]/2+(r-f)-(u-o)]||0)&&(s+=l[o]),this.codeMap[r]=65535&s}e.pos=d}return e.encode=function(e,t){var r,n,a,s,i,o,l,c,d,u,h,f,p,m,g,v,b,x,y,w,j,N,_,S,k,A,E,C,T,P,D,O,I,M,R,L,F,B,z,U,q,W,H,V,G,K;switch(C=new IZ,s=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,m=function(){var e=[];for(f=0;f<256;++f)e.push(0);return e}(),v={0:0},a={},T=0,I=s.length;T<I;T++)null==v[H=e[n=s[T]]]&&(v[H]=++p),a[n]={old:e[n],new:v[e[n]]},m[n]=v[e[n]];return C.writeUInt16(1),C.writeUInt16(0),C.writeUInt32(12),C.writeUInt16(0),C.writeUInt16(262),C.writeUInt16(0),C.write(m),{charMap:a,subtable:C.data,maxGlyphID:p+1};case"unicode":for(A=[],d=[],b=0,v={},r={},g=l=null,P=0,M=s.length;P<M;P++)null==v[y=e[n=s[P]]]&&(v[y]=++b),r[n]={old:y,new:v[y]},i=v[y]-n,null!=g&&i===l||(g&&d.push(g),A.push(n),l=i),g=n;for(g&&d.push(g),d.push(65535),A.push(65535),S=2*(_=A.length),N=2*Math.pow(Math.log(_)/Math.LN2,2),u=Math.log(N/2)/Math.LN2,j=2*_-N,o=[],w=[],h=[],f=D=0,R=A.length;D<R;f=++D){if(k=A[f],c=d[f],65535===k){o.push(0),w.push(0);break}if(k-(E=r[k].new)>=32768)for(o.push(0),w.push(2*(h.length+_-f)),n=O=k;k<=c?O<=c:O>=c;n=k<=c?++O:--O)h.push(r[n].new);else o.push(E-k),w.push(0)}for(C.writeUInt16(3),C.writeUInt16(1),C.writeUInt32(12),C.writeUInt16(4),C.writeUInt16(16+8*_+2*h.length),C.writeUInt16(0),C.writeUInt16(S),C.writeUInt16(N),C.writeUInt16(u),C.writeUInt16(j),q=0,L=d.length;q<L;q++)n=d[q],C.writeUInt16(n);for(C.writeUInt16(0),W=0,F=A.length;W<F;W++)n=A[W],C.writeUInt16(n);for(V=0,B=o.length;V<B;V++)i=o[V],C.writeUInt16(i);for(G=0,z=w.length;G<z;G++)x=w[G],C.writeUInt16(x);for(K=0,U=h.length;K<U;K++)p=h[K],C.writeUInt16(p);return{charMap:r,subtable:C.data,maxGlyphID:b+1}}},e}(),zZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,r,n;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t=new BZ(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var r,n;return null==t&&(t="macroman"),r=BZ.encode(e,t),(n=new IZ).writeUInt16(0),n.writeUInt16(1),r.table=n.data.concat(r.subtable),r},e}(),UZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),qZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),WZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="post",e.prototype.parse=function(e){var t,r,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)t=e.readByte(),n.push(this.names.push(e.readString(t)));return n;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=function(){var t,r,n;for(n=[],a=t=0,r=this.file.maxp.numGlyphs;0<=r?t<r:t>r;a=0<=r?++t:--t)n.push(e.readUInt32());return n}.call(this)}},e}(),HZ=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},VZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="name",e.prototype.parse=function(e){var t,r,n,a,s,i,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},a=c=0,d=r.length;c<d;a=++c)n=r[a],e.pos=n.offset,l=e.readString(n.length),s=new HZ(l,n),null==o[u=n.nameID]&&(o[u]=[]),o[n.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(MX){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),GZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),KZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,r,n,a,s,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var r,a;for(a=[],t=r=0;0<=n?r<n:r>n;t=0<=n?++r:--r)a.push(e.readInt16());return a}(),this.widths=function(){var e,t,r,n;for(n=[],e=0,t=(r=this.metrics).length;e<t;e++)a=r[e],n.push(a.advance);return n}.call(this),r=this.widths[this.widths.length-1],o=[],t=s=0;0<=n?s<n:s>n;t=0<=n?++s:--s)o.push(this.widths.push(r));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),$Z=[].slice,YZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,r,n,a,s,i,o,l,c,d;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),0===(n=a.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+r,s=(i=new IZ(t.read(n))).readShort(),l=i.readShort(),d=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===s?new JZ(i,l,d,o,c):new XZ(i,s,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,r){var n,a,s,i,o;for(s=[],a=[],i=0,o=t.length;i<o;i++)n=e[t[i]],a.push(s.length),n&&(s=s.concat(n.encode(r)));return a.push(s.length),{table:s,offsets:a}},e}(),XZ=function(){function e(e,t,r,n,a,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),JZ=function(){function e(e,t,r,n,a){var s,i;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=n,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;i=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&i;)s.pos+=1&i?4:2,128&i?s.pos+=8:64&i?s.pos+=4:8&i&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,r;for(t=new IZ($Z.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),ZZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return LZ(e,OZ),e.prototype.tag="loca",e.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=2)n.push(2*e.readUInt16());return n}.call(this):function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=4)n.push(e.readUInt32());return n}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),n=0,a=0,s=0;s<r.length;++s)if(r[s]=n,a<t.length&&t[a]==s){++a,r[s]=n;var i=this.offsets[s],o=this.offsets[s+1]-i;o>0&&(n+=o)}for(var l=new Array(4*r.length),c=0;c<r.length;++c)l[4*c+3]=255&r[c],l[4*c+2]=(65280&r[c])>>8,l[4*c+1]=(16711680&r[c])>>16,l[4*c]=(4278190080&r[c])>>24;return l},e}(),QZ=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,r,n,a;for(t in n=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=n[r];return e},e.prototype.glyphsFor=function(e){var t,r,n,a,s,i,o;for(n={},s=0,i=e.length;s<i;s++)n[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],n)(null!=(r=n[a])?r.compound:void 0)&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in o=this.glyphsFor(t))r=o[a],n[a]=r;return n},e.prototype.encode=function(e,t){var r,n,a,s,i,o,l,c,d,u,h,f,p,m,g;for(n in r=zZ.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},g=r.charMap)h[(o=g[n]).old]=o.new;for(f in u=r.maxGlyphID,s)f in h||(h[f]=u++);return c=function(e){var t,r;for(t in r={},e)r[e[t]]=t;return r}(h),d=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,r;for(r=[],e=0,t=d.length;e<t;e++)i=d[e],r.push(c[i]);return r}(),a=this.font.glyf.encode(s,p,h),l=this.font.loca.encode(a.offsets,p),m={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();iJ.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var e,a,s;for(s=[],e=0,a=r.length;e<a;e++)n=r[e],s.push(t.convert(n));return s}().join(" ")+"]";if("string"==typeof r)return"/"+r;if(null!=r?r.isString:void 0)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(r)){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join("\n")}return""+r},t}();const eQ=function(){false},tQ=e=>{if(!(e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())&&t.getFullYear()>1900})(e))return null;const t=new Date(e);return t.setHours(0,0,0,0),t},rQ=e=>{const t=new Date(e),r=t.getDay(),n=t.getDate()-r+(0===r?-6:1);return t.setDate(n),t.setHours(0,0,0,0),t},nQ=e=>{const t=new Date(e),r=t.getDay(),n=t.getDate()-r+(0===r?-6:1)+6;return t.setDate(n),t.setHours(0,0,0,0),t},aQ=e=>e?new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",sQ=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const t=(e.estatus||"").toLowerCase().trim();return"completado"===t||"completada"===t}return 100===e.progress},iQ=function(e){return!sQ(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},oQ=t.memo(e=>{let{project:r,currentTasks:n,overdueTasks:a}=e;const i=(0,t.useMemo)(()=>[...a.scheduleTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Cronograma",isOverdue:!0})),...a.minuteTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Minuta",name:e.tarea,description:e.responsable,endDate:e.fecha,isOverdue:!0})),...n.scheduleTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Cronograma",isOverdue:!1})),...n.minuteTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Minuta",name:e.tarea,description:e.responsable,endDate:e.fecha,isOverdue:!1}))],[n,a]);if(0===i.length)return(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)(mV,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),(0,At.jsx)("p",{children:"No hay tareas para este proyecto en el per\xedodo seleccionado."})]});const o=i.filter(e=>e.isOverdue),l=i.filter(e=>!e.isOverdue);return(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,At.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,At.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),r.name,(0,At.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",i.length," tareas)"]})]})}),(0,At.jsxs)("div",{className:"divide-y divide-gray-200",children:[o.length>0&&(0,At.jsxs)("div",{className:"p-6 bg-red-50",children:[(0,At.jsxs)("h5",{className:"text-md font-semibold text-red-800 mb-4 flex items-center",children:[(0,At.jsx)(pV,{className:"w-4 h-4 mr-2"}),"Tareas Vencidas (",o.length,")"]}),(0,At.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>(0,At.jsx)(lQ,{task:e,isOverdue:!0},"overdue-".concat(t)))})]}),l.length>0&&(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("h5",{className:"text-md font-semibold text-blue-800 mb-4 flex items-center",children:[(0,At.jsx)(fV,{className:"w-4 h-4 mr-2"}),"Tareas de la Semana (",l.length,")"]}),(0,At.jsx)("div",{className:"space-y-3",children:l.map((e,t)=>(0,At.jsx)(lQ,{task:e,isOverdue:!1},"current-".concat(t)))})]})]})]})}),lQ=t.memo(e=>{let{task:t,isOverdue:r}=e;return(0,At.jsx)("div",{className:"bg-white p-4 rounded-lg border ".concat(r?"border-red-200":"border-gray-200 hover:border-blue-300"," transition-colors"),children:(0,At.jsxs)("div",{className:"flex items-start justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h6",{className:"font-medium text-gray-900 mb-1",children:t.name}),t.description&&(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)(cV,{className:"w-3 h-3 mr-1"}),"Vence: ",aQ(t.endDate)]}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Cronograma"===t.type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:t.type}),t.priority&&(0,At.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-xs",children:t.priority})]})]}),(0,At.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat(r?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:r?"Vencida":"Pendiente"})]})})});oQ.displayName="ProjectTasksList",lQ.displayName="TaskCard";const cQ=e=>{let{projects:n,tasksByProject:a,minutasByProject:i,weeklyPlanningData:o,setWeeklyPlanningData:l,useSupabase:c=!1}=e;const[d,u]=(0,t.useState)((null===o||void 0===o?void 0:o.dateRange)||{start:rQ(new Date),end:nQ(new Date)}),[h,f]=(0,t.useState)(null),[p,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)({}),[b,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=e=>{const{tareaId:t,newStatus:r,projectId:n,timestamp:a}=e.detail;console.log("\ud83d\udd04 WeeklyPlanningTab: Evento minutaStatusChanged recibido:",{tareaId:t,newStatus:r,projectId:n,timestamp:a}),console.log("\ud83d\udd04 WeeklyPlanningTab: Forzando re-render de tareas de minutas...")};return window.addEventListener("minutaStatusChanged",e),()=>{window.removeEventListener("minutaStatusChanged",e)}},[]);const y=(0,t.useMemo)(()=>{const e=n.filter(e=>"active"===e.status);return eQ("\ud83c\udfe2 PROYECTOS ACTIVOS:",{total:n.length,active:e.length,projects:e.map(e=>({id:e.id,name:e.name}))}),eQ("\ud83d\udcca ESTRUCTURA DE DATOS:",{tasksByProjectKeys:Object.keys(a||{}),minutasByProjectKeys:Object.keys(g||{}),tasksByProject:a,localMinutaTasks:g}),e},[n,a,g]),w=(0,t.useMemo)(()=>{const e=new Date(d.start);e.setDate(e.getDate()-7);const t=new Date(d.end);return t.setDate(t.getDate()-7),{start:e,end:t}},[d]),j=(0,t.useMemo)(()=>{const e=new Date;return e.setHours(0,0,0,0),e},[]),N=(0,t.useCallback)(function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.filter(e=>{const a=tQ(n?e.fecha:e.endDate||e.startDate);return a?a>=t&&a<=r:(eQ("\u26a0\ufe0f Fecha inv\xe1lida en tarea:",e.name||e.tarea),!1)})},[]),_=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.filter(e=>{const r=tQ(t?e.fecha:e.endDate||e.startDate);if(!r)return eQ("\u26a0\ufe0f Fecha inv\xe1lida en tarea vencida:",e.name||e.tarea),!1;const n=iQ(e,t);return r<j&&n})},[j]),S=(0,t.useCallback)(e=>{const t=a[e]||[],r=g[e]||[];eQ("\ud83d\udcc5 getCurrentWeekTasks:",{projectId:e,totalScheduleTasks:t.length,totalMinuteTasks:r.length,dateRange:{start:d.start.toISOString().split("T")[0],end:d.end.toISOString().split("T")[0]}}),t.length>0&&eQ("\ud83d\udccb Tareas de cronograma del proyecto:",t.map(e=>({id:e.id,name:e.name,endDate:e.endDate,progress:e.progress}))),r.length>0&&eQ("\ud83d\udccb Tareas de minutas del proyecto:",r.map(e=>({id:e.id,tarea:e.tarea,fecha:e.fecha,estatus:e.estatus})));const n=N(t,d.start,d.end).filter(e=>iQ(e,!1)),s=N(r,d.start,d.end,!0).filter(e=>iQ(e,!0));return eQ("\u2705 Tareas de semana actual:",{projectId:e,scheduleTasks:n.length,minuteTasks:s.length,totalFiltered:n.length+s.length}),{scheduleTasks:n,minuteTasks:s}},[a,g,d,N]),k=(0,t.useCallback)(e=>{const t=a[e]||[],r=g[e]||[];eQ("\ud83d\udd0d getOverdueTasks:",{projectId:e,today:j.toISOString().split("T")[0]});const n=_(t,!1),s=_(r,!0);return eQ("\u2705 Tareas vencidas:",{projectId:e,scheduleTasks:n.length,minuteTasks:s.length}),{scheduleTasks:n,minuteTasks:s}},[a,g,j,_]),A=(0,t.useCallback)(async()=>{const e={totalTasks:0,completedTasks:0,pendingTasks:0,overdueTasks:0,byProject:{}};for(const t of y){const r=a[t.id]||[],n=g[t.id]||[],s=N(r,w.start,w.end),i=N(n,w.start,w.end,!0),o=[...s,...i],l=o.filter((e,t)=>sQ(e,t>=s.length)).length,c=o.filter((e,t)=>iQ(e,t>=s.length)).length,d=o.filter((e,t)=>{const r=t>=s.length;return tQ(r?e.fecha:e.endDate||e.startDate)<j&&iQ(e,r)}).length;e.byProject[t.id]={projectName:t.name,total:o.length,completed:l,pending:c,overdue:d},e.totalTasks+=o.length,e.completedTasks+=l,e.pendingTasks+=c,e.overdueTasks+=d}return e},[y,a,g,w,j,N]),E=(0,t.useCallback)(async()=>{m(!0);try{const e=await A();f(e)}catch(e){console.error("Error cargando datos de la semana pasada:",e)}finally{m(!1)}},[A]);(0,t.useEffect)(()=>{E()},[E]),(0,t.useEffect)(()=>{l&&l({dateRange:d,previousWeekData:h})},[d,h,l]),(0,t.useEffect)(()=>{(async()=>{if(n&&0!==n.length){x(!0);try{eQ("\ud83d\udd0d WeeklyPlanningTab - Iniciando carga independiente de minutas para todos los proyectos activos");const n={};for(const a of y)try{if(c){eQ("\ud83d\udd0d Cargando minutas desde Supabase para proyecto: ".concat(a.id));const{default:e}=await Promise.resolve().then(r.bind(r,9874)),{success:t,minutas:s}=await e.loadMinutasByProject(a.id);t?(n[a.id]=s||[],eQ("\u2705 Minutas cargadas desde Supabase para ".concat(a.name,": ").concat((null===s||void 0===s?void 0:s.length)||0))):(eQ("\u26a0\ufe0f Error cargando minutas desde Supabase para ".concat(a.name)),n[a.id]=[])}else{var e;const t=(null===(e=JSON.parse(localStorage.getItem("portfolioData")||"{}").minutasByProject)||void 0===e?void 0:e[a.id])||[];n[a.id]=t,eQ("\u2705 Minutas cargadas desde localStorage para ".concat(a.name,": ").concat(t.length))}}catch(t){console.error("\u274c Error cargando minutas para proyecto ".concat(a.name,":"),t),n[a.id]=[]}v(n),eQ("\u2705 WeeklyPlanningTab - Carga independiente de minutas completada:",{totalProjects:y.length,minutasByProject:Object.keys(n).reduce((e,t)=>(e[t]=n[t].length,e),{})})}catch(t){console.error("\u274c Error general cargando minutas en WeeklyPlanningTab:",t),v({})}finally{x(!1)}}})()},[n,y,c]);const C=()=>h&&0!==h.totalTasks?Math.round(h.completedTasks/h.totalTasks*100):0,T=(0,t.useCallback)(()=>{try{const e=new iJ,t=e.internal.pageSize.getWidth(),r=e.internal.pageSize.getHeight();let n=20;e.setFontSize(20),e.setFont(void 0,"bold"),e.text("Planificaci\xf3n Semanal",t/2,n,{align:"center"}),n+=10,e.setFontSize(12),e.setFont(void 0,"normal"),e.text("Per\xedodo: ".concat(aQ(d.start)," - ").concat(aQ(d.end)),t/2,n,{align:"center"}),n+=20,h&&(e.setFontSize(14),e.setFont(void 0,"bold"),e.text("Resumen Semana Pasada",20,n),n+=10,e.setFontSize(10),e.setFont(void 0,"normal"),e.text("Tareas Completadas: ".concat(h.completedTasks),20,n),n+=5,e.text("Tareas Pendientes: ".concat(h.pendingTasks),20,n),n+=5,e.text("Tareas Vencidas: ".concat(h.overdueTasks),20,n),n+=5,e.text("Cumplimiento: ".concat(C(),"%"),20,n),n+=15),e.setFontSize(14),e.setFont(void 0,"bold"),e.text("Tareas de la Semana Actual",20,n),n+=15,y.forEach(t=>{const a=S(t.id),i=k(t.id),o=[...i.scheduleTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Cronograma",isOverdue:!0})),...i.minuteTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Minuta",name:e.tarea,description:e.responsable,endDate:e.fecha,isOverdue:!0})),...a.scheduleTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Cronograma",isOverdue:!1})),...a.minuteTasks.map(e=>(0,s.A)((0,s.A)({},e),{},{type:"Minuta",name:e.tarea,description:e.responsable,endDate:e.fecha,isOverdue:!1}))];if(0===o.length)return;n>r-60&&(e.addPage(),n=20),e.setFontSize(12),e.setFont(void 0,"bold"),e.text("".concat(t.name),20,n),n+=8;const l=o.filter(e=>e.isOverdue);l.length>0&&(e.setFontSize(10),e.setFont(void 0,"bold"),e.setTextColor(220,38,38),e.text("Tareas Vencidas:",25,n),n+=6,l.forEach(t=>{n>r-20&&(e.addPage(),n=20),e.setFontSize(9),e.setFont(void 0,"normal"),e.setTextColor(0,0,0),e.text("\u2022 ".concat(t.name," (").concat(t.type,")"),30,n),n+=4,e.text("  Vence: ".concat(aQ(t.endDate)),30,n),n+=4}),n+=5);const c=o.filter(e=>!e.isOverdue);c.length>0&&(e.setFontSize(10),e.setFont(void 0,"bold"),e.setTextColor(59,130,246),e.text("Tareas de la Semana:",25,n),n+=6,c.forEach(t=>{n>r-20&&(e.addPage(),n=20),e.setFontSize(9),e.setFont(void 0,"normal"),e.setTextColor(0,0,0),e.text("\u2022 ".concat(t.name," (").concat(t.type,")"),30,n),n+=4,e.text("  Vence: ".concat(aQ(t.endDate)),30,n),t.description&&(n+=4,e.text("  Responsable: ".concat(t.description),30,n)),n+=4})),n+=10});const a="Planificacion_Semanal_".concat(aQ(d.start).replace(/\//g,"-"),"_").concat(aQ(d.end).replace(/\//g,"-"),".pdf");e.save(a)}catch(e){console.error("Error al exportar PDF:",e),alert("Error al generar el PDF. Por favor intenta de nuevo.")}},[d,h,y,S,k]);return(0,At.jsxs)("div",{className:"weekly-planning-tab bg-gray-50 min-h-screen p-6",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,At.jsx)(cV,{className:"mr-3 h-8 w-8 text-blue-600"}),"Planificaci\xf3n Semanal"]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Desde:"}),(0,At.jsx)("input",{type:"date",value:d.start.toISOString().split("T")[0],onChange:e=>u(t=>(0,s.A)((0,s.A)({},t),{},{start:new Date(e.target.value)})),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Hasta:"}),(0,At.jsx)("input",{type:"date",value:d.end.toISOString().split("T")[0],onChange:e=>u(t=>(0,s.A)((0,s.A)({},t),{},{end:new Date(e.target.value)})),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,At.jsx)(dV,{className:"w-4 h-4"}),"Exportar PDF"]})]})]})}),h&&!p&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(uV,{className:"mr-2 h-5 w-5 text-green-600"}),"Cumplimiento Semana Pasada (",aQ(w.start)," - ",aQ(w.end),")"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,At.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(hV,{className:"h-8 w-8 text-green-600 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Completadas"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-green-900",children:h.completedTasks})]})]})}),(0,At.jsx)("div",{className:"bg-orange-50 p-4 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(fV,{className:"h-8 w-8 text-orange-600 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-orange-800",children:"Pendientes"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:h.pendingTasks})]})]})}),(0,At.jsx)("div",{className:"bg-red-50 p-4 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(pV,{className:"h-8 w-8 text-red-600 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Vencidas"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-red-900",children:h.overdueTasks})]})]})}),(0,At.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(uV,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Cumplimiento"}),(0,At.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:[C(),"%"]})]})]})})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900",children:"Detalle por Proyecto:"}),Object.values(h.byProject).map((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,At.jsx)("span",{className:"font-medium text-gray-900",children:e.projectName}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("span",{className:"text-sm text-green-600",children:["\u2713 ",e.completed]}),(0,At.jsxs)("span",{className:"text-sm text-orange-600",children:["\u23f1 ",e.pending]}),(0,At.jsxs)("span",{className:"text-sm text-red-600",children:["\u26a0 ",e.overdue]}),(0,At.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[e.total>0?Math.round(e.completed/e.total*100):0,"%"]})]})]},t))]})]}),(0,At.jsx)("div",{className:"space-y-6",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[(0,At.jsx)(mV,{className:"mr-2 h-6 w-6 text-blue-600"}),"Tareas de la Semana Actual",(0,At.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",aQ(d.start)," - ",aQ(d.end),")"]})]}),(0,At.jsx)("div",{className:"space-y-6",children:y.map(e=>{const t=S(e.id),r=k(e.id);return 0===t.scheduleTasks.length+t.minuteTasks.length+r.scheduleTasks.length+r.minuteTasks.length?null:(0,At.jsx)(oQ,{project:e,currentTasks:t,overdueTasks:r},e.id)})})]})})]})},dQ=async e=>{let{userEmail:t,userId:r,changeId:n,changeNumber:a,changeTitle:s,notificationType:i,title:o,message:l,priority:c="normal",metadata:d={}}=e;try{kt.default.getCurrentUser();const e=kt.default.getCurrentOrganization();if(!e)return console.warn("No se puede crear notificaci\xf3n: organizaci\xf3n no detectada"),{success:!1,error:"Organizaci\xf3n no detectada"};const u={organization_id:e,user_id:r,user_email:t,change_id:n,change_number:a,change_title:s,notification_type:i,title:o,message:l,priority:c,status:"unread",metadata:d,action_url:"/change-management?changeId=".concat(n),created_at:(new Date).toISOString()},{data:h,error:f}=await kt.default.supabase.from("change_notifications").insert(u).select().single();return f?(console.error("Error creando notificaci\xf3n:",f),{success:!1,error:f}):{success:!0,data:h}}catch(u){return console.error("Error inesperado creando notificaci\xf3n:",u),{success:!1,error:u}}},uQ=async e=>{try{const{data:t,error:r}=await kt.default.supabase.from("change_notifications").select("*").eq("user_email",e).eq("status","unread").order("created_at",{ascending:!1});return r?(console.error("Error obteniendo notificaciones:",r),[]):t||[]}catch(t){return console.error("Error inesperado obteniendo notificaciones:",t),[]}},hQ=async e=>{try{const{error:t}=await kt.default.supabase.from("change_notifications").update({status:"read",read_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("id",e);return t?(console.error("Error marcando notificaci\xf3n como le\xedda:",t),{success:!1,error:t}):{success:!0}}catch(t){return console.error("Error inesperado marcando notificaci\xf3n:",t),{success:!1,error:t}}},fQ=async e=>{try{const{error:t}=await kt.default.supabase.from("change_notifications").update({status:"read",read_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("user_email",e).eq("status","unread");return t?(console.error("Error marcando todas como le\xeddas:",t),{success:!1,error:t}):{success:!0}}catch(t){return console.error("Error inesperado marcando todas como le\xeddas:",t),{success:!1,error:t}}},pQ=async e=>{try{const{count:t,error:r}=await kt.default.supabase.from("change_notifications").select("*",{count:"exact",head:!0}).eq("user_email",e).eq("status","unread");return r?(console.error("Error obteniendo conteo:",r),0):t||0}catch(t){return console.error("Error inesperado obteniendo conteo:",t),0}},mQ=async e=>{let{userEmail:t,userId:r,change:n,assignedBy:a}=e;return dQ({userEmail:t,userId:r,changeId:n.id,changeNumber:n.changeNumber,changeTitle:n.title,notificationType:"assigned",title:"Cambio Asignado",message:"".concat(a,' te ha asignado el cambio "').concat(n.title,'"'),priority:"high",metadata:{assignedBy:a,changeStatus:n.status}})},gQ=async e=>{let{userEmail:t,userId:r,change:n}=e;return dQ({userEmail:t,userId:r,changeId:n.id,changeNumber:n.changeNumber,changeTitle:n.title,notificationType:"approval_required",title:"Aprobaci\xf3n Requerida",message:'El cambio "'.concat(n.title,'" requiere tu aprobaci\xf3n'),priority:"urgent",metadata:{costImpact:n.impactCost,scheduleImpact:n.impactSchedule}})},vQ=async e=>{let{userEmail:t,userId:r,change:n}=e;return dQ({userEmail:t,userId:r,changeId:n.id,changeNumber:n.changeNumber,changeTitle:n.title,notificationType:"ccb_vote_required",title:"Voto CCB Requerido",message:'Tu voto es requerido en el CCB para "'.concat(n.title,'"'),priority:"high",metadata:{changeStatus:n.status}})},bQ=async e=>{let{userEmail:t,userId:r,change:n,oldStatus:a,newStatus:s,changedBy:i}=e;return dQ({userEmail:t,userId:r,changeId:n.id,changeNumber:n.changeNumber,changeTitle:n.title,notificationType:"status_changed",title:"Estado de Cambio Actualizado",message:'El cambio "'.concat(n.title,'" pas\xf3 de ').concat(a," a ").concat(s),priority:"normal",metadata:{oldStatus:a,newStatus:s,changedBy:i}})},xQ=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(0),[i,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),d=(0,t.useRef)(!1),u=(0,t.useRef)(null),h=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(d.current&&!e)return;const t=Date.now();if(!(!e&&u.current&&t-u.current<5e3))try{d.current=!0,o(!0);const e=kt.default.getCurrentUser();if(!e||!e.email)return r([]),void a(0);const n=e.email,s=await uQ(n),i=await pQ(n);r(s),a(i),c(null),u.current=t}catch(l){console.error("Error cargando notificaciones:",l),c("Error cargando notificaciones")}finally{o(!1),d.current=!1}},[]),f=(0,t.useCallback)(async e=>{try{const t=await hQ(e);return t.success&&(r(t=>t.filter(t=>t.id!==e)),a(e=>Math.max(0,e-1))),t}catch(l){return console.error("Error marcando notificaci\xf3n:",l),{success:!1,error:l}}},[]),p=(0,t.useCallback)(async()=>{try{const e=kt.default.getCurrentUser();if(!e||!e.email)return{success:!1};const t=await fQ(e.email);return t.success&&(r([]),a(0)),t}catch(l){return console.error("Error marcando todas como le\xeddas:",l),{success:!1,error:l}}},[]),m=(0,t.useCallback)(()=>{h(!0)},[h]);return(0,t.useEffect)(()=>{h()},[]),(0,t.useEffect)(()=>{const e=setInterval(()=>{h()},3e4);return()=>clearInterval(e)},[]),(0,t.useEffect)(()=>{const e=setInterval(()=>{var e;const t=kt.default.getCurrentUser(),r=null===t||void 0===t?void 0:t.email;r!==(null===(e=u.current)||void 0===e?void 0:e.email)&&(u.current=(0,s.A)((0,s.A)({},u.current),{},{email:r}),h(!0))},5e3);return()=>clearInterval(e)},[]),{notifications:e,unreadCount:n,loading:i,error:l,markAsRead:f,markAllAsRead:p,refresh:m}},yQ=e=>{let{notification:t,onMarkAsRead:r,onClose:n}=e;return(0,At.jsx)("div",{onClick:async()=>{await r(t.id),t.action_url&&(n&&n(),window.location.href=t.action_url)},className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ".concat((e=>{switch(e){case"urgent":return"bg-red-50 border-red-200";case"high":return"bg-orange-50 border-orange-200";case"normal":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}})(t.priority)),children:(0,At.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,At.jsx)("div",{className:"text-2xl flex-shrink-0",children:(e=>{switch(e){case"assigned":return"\ud83d\udccb";case"approval_required":return"\u2705";case"ccb_vote_required":return"\ud83d\uddf3\ufe0f";case"status_changed":return"\ud83d\udd04";case"comment_added":return"\ud83d\udcac";case"implemented":return"\ud83d\ude80";default:return"\ud83d\udd14"}})(t.notification_type)}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 text-sm truncate",children:t.title}),"urgent"===t.priority&&(0,At.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded-full flex-shrink-0",children:"Urgente"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:t.message}),(0,At.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,At.jsx)("span",{children:(e=>{const t=new Date-new Date(e),r=Math.floor(t/6e4),n=Math.floor(t/36e5),a=Math.floor(t/864e5);return r<1?"Hace un momento":r<60?"Hace ".concat(r," min"):n<24?"Hace ".concat(n,"h"):"Hace ".concat(a," d\xeda").concat(a>1?"s":"")})(t.created_at)}),t.change_number&&(0,At.jsx)("span",{className:"font-mono bg-white px-2 py-0.5 rounded",children:t.change_number})]})]})]})})},wQ=e=>{let{isOpen:t,onClose:r,notifications:n,unreadCount:a,loading:s,onMarkAsRead:i,onMarkAllAsRead:o}=e;if(!t)return null;return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"fixed inset-0 z-40",onClick:e=>{e.target===e.currentTarget&&r()}}),(0,At.jsxs)("div",{className:"fixed right-4 top-20 w-96 max-w-full bg-white rounded-lg shadow-2xl border border-gray-200 z-[9999] max-h-[600px] flex flex-col",children:[(0,At.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-xl",children:"\ud83d\udd14"}),(0,At.jsx)("h3",{className:"font-bold text-gray-800",children:"Notificaciones"}),a>0&&(0,At.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:a})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[a>0&&(0,At.jsx)("button",{onClick:o,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Marcar todas"}),(0,At.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"\u2715"})]})]}),(0,At.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:s&&0===n.length?(0,At.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent mb-4"}),(0,At.jsx)("p",{className:"text-gray-500 text-sm",children:"Cargando notificaciones..."})]}):0===n.length?(0,At.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,At.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udced"}),(0,At.jsx)("p",{className:"text-gray-600 font-medium mb-1",children:"No hay notificaciones"}),(0,At.jsx)("p",{className:"text-gray-500 text-sm",children:"Est\xe1s al d\xeda con todo"})]}):(0,At.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,At.jsx)(yQ,{notification:e,onMarkAsRead:i,onClose:r},e.id))})}),n.length>0&&(0,At.jsx)("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:(0,At.jsx)("button",{onClick:r,className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Ver todas las notificaciones"})})]})]})},jQ=e=>{let{className:r=""}=e;const[n,a]=(0,t.useState)(!1),{notifications:s,unreadCount:i,loading:o,error:l,markAsRead:c,markAllAsRead:d,refresh:u}=xQ();return(0,At.jsxs)("div",{className:"relative ".concat(r),children:[(0,At.jsxs)("button",{onClick:()=>{a(!n),n||u()},className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Notificaciones",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udd14"}),i>0&&(0,At.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[20px] h-5 flex items-center justify-center px-1 shadow-lg animate-pulse",children:i>99?"99+":i}),o&&(0,At.jsx)("span",{className:"absolute -bottom-1 -right-1 bg-blue-500 rounded-full w-2 h-2 animate-pulse"})]}),(0,At.jsx)(wQ,{isOpen:n,onClose:()=>a(!1),notifications:s,unreadCount:i,loading:o,onMarkAsRead:c,onMarkAllAsRead:d}),l&&(0,At.jsx)("div",{className:"absolute top-full right-0 mt-2 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-sm shadow-lg",children:l})]})},NQ=e=>{let{error:t}=e;return t?(0,At.jsxs)("div",{className:"text-red-600 text-xs mt-1 flex items-center",children:[(0,At.jsx)("span",{className:"mr-1",children:"\u26a0\ufe0f"}),t]}):null},_Q=e=>{const t=new Date(e),r=t.getDay(),n=t.getDate()-r+(0===r?-6:1);return t.setDate(n),t.setHours(0,0,0,0),t},SQ=e=>{const t=new Date(e),r=t.getDay(),n=t.getDate()-r+(0===r?-6:1)+6;return t.setDate(n),t.setHours(23,59,59,999),t},kQ=e=>{let{projects:r,setProjects:n,currentProjectId:a,setCurrentProjectId:s,portfolioMetrics:i,workPackages:o,risks:l,globalResources:c,setGlobalResources:d,createProject:u,updateProject:h,deleteProject:f,duplicateProject:p,tasks:m,tasksByProject:g,minutasByProject:v,purchaseOrders:b,advances:x,invoices:y,contracts:w,auditLogs:j,includeWeekendsByProject:N,setIncludeWeekendsByProject:_,getCurrentProjectIncludeWeekends:S,useSupabase:k}=e;const[A,E]=(0,t.useState)(!1),[C,T]=(0,t.useState)(null),[P,D]=(0,t.useState)("overview"),[O,I]=(0,t.useState)({}),[M,R]=(0,t.useState)("all"),[L,F]=(0,t.useState)([]),[B,z]=(0,t.useState)(null),[U,q]=(0,t.useState)(!1),[W,H]=(0,t.useState)({dateRange:{start:_Q(new Date),end:SQ(new Date)},previousWeekCompliance:null,projectTasks:{}});t.useEffect(()=>{Object.keys(O).length>0&&console.log("\u274c Errores de validaci\xf3n:",O)},[O]),(0,t.useEffect)(()=>{const e=e=>{const{tareaId:t,newStatus:r,projectId:n,timestamp:a}=e.detail;console.log("\ud83d\udd04 PortfolioStrategic: Evento minutaStatusChanged recibido:",{tareaId:t,newStatus:r,projectId:n,timestamp:a}),console.log("\ud83d\udd04 PortfolioStrategic: Forzando re-render del Dashboard resumen...")};return window.addEventListener("minutaStatusChanged",e),()=>{window.removeEventListener("minutaStatusChanged",e)}},[]);const V=r.find(e=>e.id===a),G=e=>{const t=[];console.log("\ud83d\udd0d VALIDANDO ARCHIVADO para proyecto:",e.name),console.log("\ud83d\udcca Progreso del proyecto:",e.progress),console.log("\ud83d\udccb Total de tareas disponibles:",m.length),e.progress<100&&t.push("El proyecto debe estar 100% completado (actual: ".concat(e.progress,"%)"));const r=m.filter(t=>t.workPackageId===e.id||t.projectId===e.id);console.log("\ud83d\udccb Tareas del proyecto:",r.length);const n=r.filter(e=>e.progress<100&&"completed"!==e.status);console.log("\u274c Tareas incompletas:",n.length),n.length>0&&t.push("Todas las tareas deben estar completadas (".concat(n.length," tareas pendientes)"));const a=r.filter(e=>e.predecessors&&e.predecessors.length>0),s=a.filter(e=>{const t=e.predecessors.map(e=>r.find(t=>t.id===e)).filter(Boolean);return t.some(e=>e.progress<100)});s.length>0&&t.push("No debe haber dependencias activas con tareas incompletas");const i=[],o=["Acta de Inicio","Cronograma","Presupuesto","Acta de Cierre"].filter(e=>!i.some(t=>t.name.includes(e)));o.length>0&&t.push("Documentaci\xf3n incompleta: ".concat(o.join(", ")));const l=b.filter(t=>t.projectId===e.id||t.workPackageId===e.id),c=y.filter(t=>t.projectId===e.id||t.workPackageId===e.id),d=w.filter(t=>t.projectId===e.id||t.workPackageId===e.id),u=[];return l.some(e=>"pending"===e.status)&&u.push("\xd3rdenes de compra pendientes"),c.some(e=>"pending"===e.status)&&u.push("Facturas pendientes"),d.some(e=>"pending"===e.status)&&u.push("Contratos pendientes"),u.length>0&&t.push("Aprobaciones pendientes: ".concat(u.join(", "))),console.log("\u2705 Validaciones encontradas:",t),console.log("\ud83c\udfaf Puede archivar:",0===t.length),{canArchive:0===t.length,validations:t}},K=()=>{z(null),q(!1)},$=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-600 border-gray-300";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";case"on-hold":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"archived":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Y=e=>{switch(e){case"active":return"\ud83d\udfe2";case"inactive":return"\u26ab";case"completed":return"\u2705";case"on-hold":default:return"\u23f8\ufe0f";case"cancelled":return"\u274c";case"archived":return"\ud83d\udcc1"}},X=(e,t)=>{const r=Object.assign({},O);switch(e){case"name":t&&""!==t.trim()?t.length<3?r.name="El nombre debe tener al menos 3 caracteres":delete r.name:r.name="El nombre del proyecto es obligatorio";break;case"manager":t&&""!==t.trim()?delete r.manager:r.manager="El manager es obligatorio";break;case"sponsor":t&&""!==t.trim()?delete r.sponsor:r.sponsor="El sponsor es obligatorio";break;case"startDate":t?delete r.startDate:r.startDate="La fecha de inicio es obligatoria";break;case"endDate":t?null!==C&&void 0!==C&&C.startDate&&new Date(t)<=new Date(C.startDate)?r.endDate="La fecha de fin debe ser posterior a la fecha de inicio":delete r.endDate:r.endDate="La fecha de fin es obligatoria";break;case"budget":""===t||isNaN(t)?r.budget="El presupuesto debe ser un n\xfamero v\xe1lido":!t||t<=0?r.budget="El presupuesto debe ser mayor a 0":t>1e9?r.budget="El presupuesto no puede exceder 1,000,000,000":delete r.budget;break;case"irr":""===t||isNaN(t)?r.irr="La TIR debe ser un n\xfamero v\xe1lido":t<0||t>100?r.irr="La TIR debe estar entre 0% y 100%":delete r.irr}return I(r),0===Object.keys(r).length};return(0,At.jsxs)("div",{className:"space-y-6 max-w-full overflow-hidden",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-indigo-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83c\udfe2"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800",children:"Portafolio de Proyectos"}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Gesti\xf3n estrat\xe9gica y configuraci\xf3n de proyectos"})]})]}),(0,At.jsx)("div",{className:"flex items-center",children:(0,At.jsx)(jQ,{})})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,At.jsx)("div",{className:"border-b border-gray-200",children:(0,At.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",name:"Vista General",icon:"\ud83d\udcca"},{id:"projects",name:"Lista de Proyectos",icon:"\ud83d\udccb"},{id:"resources",name:"Lista de Recursos",icon:"\ud83d\udc65"},{id:"weekly-planning",name:"Planificaci\xf3n Semanal",icon:"\ud83d\udcc5"},{id:"archive",name:"Archivado de Proyectos",icon:"\ud83d\udcc1"},{id:"metrics",name:"M\xe9tricas del Portfolio",icon:"\ud83d\udcc8"}].map(e=>(0,At.jsxs)("button",{onClick:()=>D(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(P===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,At.jsx)("span",{children:e.icon}),(0,At.jsx)("span",{children:e.name})]},e.id))})}),(0,At.jsxs)("div",{className:"p-6",children:["overview"===P&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"Total Proyectos"})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:r.length}),(0,At.jsxs)("div",{className:"text-sm text-blue-600",children:[r.filter(e=>"active"===e.status).length," activos"]})]}),(0,At.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"Presupuesto Total"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:["$",(r.filter(e=>"active"===e.status).reduce((e,t)=>e+t.budget,0)/1e3).toFixed(0),"K USD"]}),(0,At.jsx)("div",{className:"text-sm text-green-600",children:"Solo proyectos activos"})]}),(0,At.jsxs)("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:"Proyectos Prioritarios"})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:r.filter(e=>"high"===e.priority&&"active"===e.status).length}),(0,At.jsx)("div",{className:"text-sm text-purple-600",children:"Prioridad alta (activos)"})]})]}),V&&(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Proyecto Destacado"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Informaci\xf3n General"}),(0,At.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Nombre:"})," ",V.name]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Manager:"})," ",V.manager]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Sponsor:"})," ",V.sponsor]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Estado:"}),(0,At.jsxs)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs ".concat($(V.status)),children:[Y(V.status)," ",V.status]})]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"M\xe9tricas Financieras"}),(0,At.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Presupuesto:"})," $",(V.budget/1e3).toFixed(0),"K USD"]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Reserva Contingencia:"})," $",(V.contingencyReserve/1e3).toFixed(0),"K USD"]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Reserva Gesti\xf3n:"})," $",(V.managementReserve/1e3).toFixed(0),"K USD"]}),V.irr>0&&(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"TIR:"})," ",V.irr.toFixed(2),"%"]})]})]})]})]})]}),"projects"===P&&(0,At.jsx)(QH,{projects:r,currentProjectId:a,setCurrentProjectId:s,portfolioMetrics:i,workPackages:o,risks:l,globalResources:c,setGlobalResources:d,tasksByProject:g,createProject:u,updateProject:h,deleteProject:f,duplicateProject:e=>{console.log("\ud83d\udccb Duplicando proyecto con ID:",e);const t=r.find(t=>t.id===e);if(!t)return void console.error("\u274c Proyecto no encontrado para duplicar");const n={id:"proj-"+String(Date.now()).slice(-6),name:"".concat(t.name," (Copia)"),description:t.description,startDate:t.startDate,endDate:t.endDate,budget:t.budget,status:t.status,priority:t.priority,manager:t.manager,team:t.team,createdAt:t.createdAt,updatedAt:t.updatedAt,version:t.version,progress:t.progress};console.log("\ud83d\udccb Proyecto duplicado creado:",n),u(n)},includeWeekendsByProject:N,setIncludeWeekendsByProject:_,getCurrentProjectIncludeWeekends:S}),"resources"===P&&(0,At.jsx)(eV,{globalResources:c,setGlobalResources:d}),"weekly-planning"===P&&(0,At.jsxs)(At.Fragment,{children:[(()=>{console.log("\ud83d\udd0d DEBUG - Datos que se pasan a WeeklyPlanningTab:"),console.log("  \ud83d\udcca projects:",r),console.log("  \ud83d\udcca tasksByProject:",g),console.log("  \ud83d\udcca minutasByProject:",v),console.log("  \ud83d\udcca Estructura minutasByProject:",Object.keys(v||{}));const e=Object.keys(v||{})[0];return e&&console.log("  \ud83d\udcca Ejemplo minutas proyecto ".concat(e,":"),v[e]),null})(),(0,At.jsx)(cQ,{projects:r,tasksByProject:g,minutasByProject:v,weeklyPlanningData:W,setWeeklyPlanningData:H,useSupabase:k})]}),"archive"===P&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udcc1"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Archivado de Proyectos"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Gesti\xf3n centralizada del ciclo de vida completo de proyectos"})]})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,At.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udccb"}),(0,At.jsx)("span",{children:"Proyectos Activos"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Selecciona un proyecto para archivarlo"})]}),(0,At.jsx)("div",{className:"p-6",children:0===r.filter(e=>"active"===e.status).length?(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)("span",{className:"text-4xl mb-2 block",children:"\ud83d\udced"}),(0,At.jsx)("p",{children:"No hay proyectos activos para archivar"})]}):(0,At.jsx)("div",{className:"space-y-3",children:r.filter(e=>"active"===e.status).map(e=>{const t=G(e),i=t.canArchive;return(0,At.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border ".concat(i?"bg-gray-50 border-gray-200":"bg-red-50 border-red-200"),children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h5",{className:"font-medium text-gray-800",children:e.name}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat($(e.status)),children:e.status}),(0,At.jsxs)("span",{className:"text-xs text-gray-500",children:["Progreso: ",e.progress,"%"]}),(0,At.jsxs)("span",{className:"text-xs text-gray-500",children:["Creado: ",new Date(e.createdAt).toLocaleDateString()]})]}),!i&&(0,At.jsxs)("div",{className:"mt-2 p-2 bg-red-100 rounded border border-red-200",children:[(0,At.jsx)("p",{className:"text-xs text-red-700 font-medium mb-1",children:"\u26a0\ufe0f Requisitos pendientes para archivado:"}),(0,At.jsx)("ul",{className:"text-xs text-red-600 space-y-1",children:t.validations.map((e,t)=>(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-1",children:"\u2022"}),(0,At.jsx)("span",{children:e})]},t))})]})]}),(0,At.jsxs)("div",{className:"ml-4 flex flex-col space-y-2",children:[(0,At.jsxs)("button",{onClick:()=>(e=>{const t=r.find(t=>t.id===e);if(!t)return;const i=G(t);if(!i.canArchive){const e=i.validations.join("\n\u2022 ");return void alert('\u274c No se puede archivar el proyecto "'.concat(t.name,'"\n\nRazones:\n\u2022 ').concat(e,"\n\nPor favor, complete todos los requisitos antes de archivar."))}const o='\xbfEst\xe1 seguro de que desea archivar el proyecto "'.concat(t.name,'"?\n\nEste proyecto ser\xe1 movido al archivo y ya no estar\xe1 disponible para edici\xf3n.');if(!window.confirm(o))return;const l={id:t.id,name:t.name,description:t.description,startDate:t.startDate,endDate:t.endDate,budget:t.budget,status:t.status,priority:t.priority,manager:t.manager,team:t.team,createdAt:t.createdAt,updatedAt:t.updatedAt,version:t.version,progress:t.progress,archivedAt:(new Date).toISOString(),archivedBy:"Usuario Actual"};F(e=>{const t=e.slice();return t.push(l),t});const c=r.map(t=>t.id===e?{id:t.id,name:t.name,description:t.description,startDate:t.startDate,endDate:t.endDate,budget:t.budget,status:"archived",priority:t.priority,manager:t.manager,team:t.team,createdAt:t.createdAt,updatedAt:t.updatedAt,version:t.version,progress:t.progress,archivedAt:(new Date).toISOString()}:t);if(n(c),a===e){const e=c.filter(e=>"active"===e.status);e.length>0&&s(e[0].id)}alert('\u2705 Proyecto "'.concat(t.name,'" archivado exitosamente.'))})(e.id),disabled:!i,className:"px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ".concat(i?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),title:i?"Archivar proyecto":"No cumple requisitos para archivado",children:[(0,At.jsx)("span",{children:"\ud83d\udcc1"}),(0,At.jsx)("span",{children:"Archivar"})]}),!i&&(0,At.jsx)("span",{className:"text-xs text-red-600 text-center",children:"No disponible"})]})]},e.id)})})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,At.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udce6"}),(0,At.jsx)("span",{children:"Proyectos Archivados"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Historial de proyectos archivados"})]}),(0,At.jsx)("div",{className:"p-6",children:0===L.length?(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)("span",{className:"text-4xl mb-2 block",children:"\ud83d\udced"}),(0,At.jsx)("p",{children:"No hay proyectos archivados"})]}):(0,At.jsx)("div",{className:"space-y-3",children:L.map(e=>(0,At.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,At.jsxs)("div",{className:"flex items-start justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h5",{className:"font-medium text-gray-800",children:e.name}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Archivado"}),(0,At.jsxs)("span",{className:"text-xs text-gray-500",children:["Archivado: ",new Date(e.archivedAt).toLocaleDateString()]}),(0,At.jsxs)("span",{className:"text-xs text-gray-500",children:["Por: ",e.archivedBy]})]})]}),(0,At.jsx)("div",{className:"ml-4 flex space-x-2",children:(0,At.jsxs)("button",{onClick:()=>(e=>{z(e),q(!0)})(e),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors flex items-center space-x-1",title:"Ver detalles del proyecto archivado",children:[(0,At.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,At.jsx)("span",{children:"Ver"})]})})]})},e.id))})})]})]})]}),"metrics"===P&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"M\xe9tricas del Portfolio"}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"text-blue-600 text-xl mr-3",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{className:"text-blue-800 text-sm",children:[(0,At.jsx)("strong",{children:"Importante:"}),' Las m\xe9tricas financieras solo consideran proyectos con estado "Activo". Los proyectos "Inactivos" no suman al presupuesto total ni a las reservas del portfolio.']})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-4",children:"Distribuci\xf3n por Estado"}),(0,At.jsx)("div",{className:"space-y-3",children:["active","completed","on-hold","cancelled"].map(e=>{const t=r.filter(t=>t.status===e).length,n=r.length>0?t/r.length*100:0;return(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{children:Y(e)}),(0,At.jsx)("span",{className:"capitalize",children:e})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(n,"%")}})}),(0,At.jsx)("span",{className:"text-sm text-gray-600 w-8 text-right",children:t})]})]},e)})})]}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-4",children:"Distribuci\xf3n por Prioridad"}),(0,At.jsx)("div",{className:"space-y-3",children:["high","medium","low"].map(e=>{const t=r.filter(t=>t.priority===e).length,n=r.length>0?t/r.length*100:0;return(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("div",{className:"flex items-center space-x-2",children:(0,At.jsx)("span",{className:"capitalize",children:e})}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(n,"%")}})}),(0,At.jsx)("span",{className:"text-sm text-gray-600 w-8 text-right",children:t})]})]},e)})})]})]}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-4",children:"An\xe1lisis Financiero (Solo Proyectos Activos)"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",(r.filter(e=>"active"===e.status).reduce((e,t)=>e+t.budget,0)/1e3).toFixed(0),"K USD"]}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Presupuesto Total"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",(r.filter(e=>"active"===e.status).reduce((e,t)=>e+t.contingencyReserve+t.managementReserve,0)/1e3).toFixed(0),"K USD"]}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Reservas Totales"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:r.filter(e=>"active"===e.status&&e.irr>0).length}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Proyectos con TIR"})]})]}),(0,At.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,At.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,At.jsx)("strong",{children:"Nota:"}),' Las m\xe9tricas financieras solo consideran proyectos con estado "Activo". Los proyectos "Inactivos" o "Completados" no influyen en los indicadores financieros.']})})]})]})]})]}),console.log("\ud83c\udfad Renderizando modal - showNewProjectModal:",A),A&&(0,At.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:[console.log("\ud83c\udfad Modal renderizado - editingProject:",C),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,At.jsx)("h2",{className:"text-xl font-bold",children:null!==C&&void 0!==C&&C.id?"Editar Proyecto":"Nuevo Proyecto"}),(0,At.jsx)("button",{onClick:()=>{E(!1),T(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Proyecto *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 ".concat(O.name?"border-red-500":"border-gray-300"),value:(null===C||void 0===C?void 0:C.name)||"",onChange:e=>{T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,name:e.target.value}),X("name",e.target.value)},onBlur:e=>X("name",e.target.value),placeholder:"Nombre del proyecto"}),(0,At.jsx)(NQ,{error:O.name})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 ".concat(O.manager?"border-red-500":"border-gray-300"),value:(null===C||void 0===C?void 0:C.manager)||"",onChange:e=>{T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,manager:e.target.value}),X("manager",e.target.value)},onBlur:e=>X("manager",e.target.value),placeholder:"Gerente del proyecto"}),(0,At.jsx)(NQ,{error:O.manager})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sponsor *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 ".concat(O.sponsor?"border-red-500":"border-gray-300"),value:(null===C||void 0===C?void 0:C.sponsor)||"",onChange:e=>{T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,sponsor:e.target.value}),X("sponsor",e.target.value)},onBlur:e=>X("sponsor",e.target.value),placeholder:"Patrocinador del proyecto"}),(0,At.jsx)(NQ,{error:O.sponsor})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),(0,At.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.priority)||"medium",onChange:e=>T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,priority:e.target.value}),children:[(0,At.jsx)("option",{value:"low",children:"Baja"}),(0,At.jsx)("option",{value:"medium",children:"Media"}),(0,At.jsx)("option",{value:"high",children:"Alta"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado del Proyecto *"}),(0,At.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.status)||"inactive",onChange:e=>T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,status:e.target.value}),children:[(0,At.jsx)("option",{value:"inactive",children:"\u26ab Inactivo"}),(0,At.jsx)("option",{value:"active",children:"\ud83d\udfe2 Activo"})]}),(0,At.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,At.jsx)("strong",{children:"Por defecto:"}),' Los proyectos nuevos y duplicados aparecen como "Inactivos" para revisi\xf3n. Solo los proyectos "Activos" suman al dashboard consolidado y aparecen en Gesti\xf3n de Proyectos.']})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Inicio *"}),(0,At.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2 ".concat(O.startDate?"border-red-500":"border-gray-300"),value:(null===C||void 0===C?void 0:C.startDate)||"",onChange:e=>{T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,startDate:e.target.value}),X("startDate",e.target.value),null!==C&&void 0!==C&&C.endDate&&X("endDate",C.endDate)},onBlur:e=>X("startDate",e.target.value)}),(0,At.jsx)(NQ,{error:O.startDate})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Fin *"}),(0,At.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2 ".concat(O.endDate?"border-red-500":"border-gray-300"),value:(null===C||void 0===C?void 0:C.endDate)||"",onChange:e=>{T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,endDate:e.target.value}),X("endDate",e.target.value)},onBlur:e=>X("endDate",e.target.value)}),(0,At.jsx)(NQ,{error:O.endDate})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Presupuesto (USD) *"}),(0,At.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2 ".concat(O.budget?"border-red-500":"border-gray-300"),value:(null===C||void 0===C?void 0:C.budget)||"",onChange:e=>{const t=e.target.value;if(""===t||/^\d+$/.test(t)){const e=""===t?"":Number(t);T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,budget:e}),X("budget",e)}},onBlur:e=>{const t=""===e.target.value?"":Number(e.target.value);X("budget",t)},placeholder:"Presupuesto en USD (ej: 100000)",min:"0"}),(0,At.jsx)(NQ,{error:O.budget})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TIR (%)"}),(0,At.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2 ".concat(O.irr?"border-red-500":"border-gray-300"),value:(null===C||void 0===C?void 0:C.irr)||"",onChange:e=>{const t=e.target.value;if(""===t||/^\d*\.?\d*$/.test(t)){const e=""===t?"":Number(t);T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,irr:e}),X("irr",e)}},onBlur:e=>{const t=""===e.target.value?"":Number(e.target.value);X("irr",t)},placeholder:"Tasa Interna de Retorno (ej: 15.5)",min:"0",max:"100",step:"0.01"}),(0,At.jsx)(NQ,{error:O.irr})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===C||void 0===C?void 0:C.description)||"",onChange:e=>T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,description:e.target.value}),placeholder:"Descripci\xf3n detallada del proyecto"})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objetivo del Proyecto"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===C||void 0===C?void 0:C.objective)||"",onChange:e=>T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,objective:e.target.value}),placeholder:"\xbfQu\xe9 se busca lograr con este proyecto?"})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caso de Negocio"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===C||void 0===C?void 0:C.businessCase)||"",onChange:e=>T({id:C.id,name:C.name,description:C.description,startDate:C.startDate,endDate:C.endDate,budget:C.budget,status:C.status,priority:C.priority,manager:C.manager,team:C.team,createdAt:C.createdAt,updatedAt:C.updatedAt,version:C.version,progress:C.progress,businessCase:e.target.value}),placeholder:"Justificaci\xf3n del proyecto desde el punto de vista del negocio"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>{E(!1),T(null)},className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,At.jsxs)("button",{onClick:()=>{console.log("\ud83d\udcbe Guardando proyecto:",C),console.log("\ud83d\udcbe ID del proyecto a guardar:",null===C||void 0===C?void 0:C.id),console.log("\ud83d\udcbe \xbfEs edici\xf3n?",!(null===C||void 0===C||!C.id));const e=X("name",C.name),t=X("manager",C.manager),r=X("sponsor",C.sponsor),n=X("startDate",C.startDate),a=X("endDate",C.endDate),s=X("budget",C.budget),i=X("irr",C.irr);console.log("\u2705 Validaciones:",{isNameValid:e,isManagerValid:t,isSponsorValid:r,isStartDateValid:n,isEndDateValid:a,isBudgetValid:s,isIRRValid:i}),e&&t&&r&&n&&a&&s&&i?(C.id&&""!==C.id?(console.log("\ud83d\udd04 Actualizando proyecto existente con ID:",C.id),console.log("\ud83d\udd04 Datos a actualizar:",C),h(C.id,C)):(console.log("\u2795 Creando nuevo proyecto (sin ID)"),console.log("\u2795 Datos del nuevo proyecto:",C),u(C)),E(!1),T(null),I({})):console.log("\u274c Errores de validaci\xf3n:",O)},disabled:Object.keys(O).length>0,className:"px-4 py-2 rounded transition-colors ".concat(Object.keys(O).length>0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:["Guardar Proyecto ",Object.keys(O).length>0&&"(".concat(Object.keys(O).length," errores)")]})]})]})})]}),U&&B&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,At.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udcc1"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:B.name}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Proyecto Archivado"})]})]}),(0,At.jsx)("button",{onClick:K,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]})}),(0,At.jsxs)("div",{className:"p-6 space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udcca Informaci\xf3n General"}),(0,At.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Estado:"}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Archivado"})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Progreso:"}),(0,At.jsxs)("span",{className:"font-medium",children:[B.progress,"%"]})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Archivado:"}),(0,At.jsx)("span",{children:new Date(B.archivedAt).toLocaleDateString()})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Archivado por:"}),(0,At.jsx)("span",{children:B.archivedBy})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Creado:"}),(0,At.jsx)("span",{children:new Date(B.createdAt).toLocaleDateString()})]})]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udcdd Descripci\xf3n"}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:B.description||"Sin descripci\xf3n disponible"})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,At.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udccb"}),(0,At.jsx)("span",{children:"Tareas del Cronograma"})]}),(0,At.jsx)("div",{className:"space-y-2",children:(()=>{const e=m.filter(e=>e.workPackageId===B.id||e.projectId===B.id);return 0===e.length?(0,At.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No hay tareas registradas para este proyecto"}):(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:["Total: ",e.length," tareas"]}),(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:["Completadas: ",e.filter(e=>100===e.progress).length]}),(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:["Pendientes: ",e.filter(e=>e.progress<100).length]})]})})()})]}),(0,At.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,At.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udcce"}),(0,At.jsx)("span",{children:"Auditor\xeda Documental"})]}),(0,At.jsx)("div",{className:"space-y-2",children:(()=>{const e=j.filter(e=>e.projectId===B.id||e.workPackageId===B.id);if(0===e.length)return(0,At.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No hay registros de auditor\xeda para este proyecto"});const t=e.reduce((e,t)=>{const r=t.documentType||"Otros";return e[r]||(e[r]=[]),e[r].push(t),e},{});return(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("p",{className:"text-sm text-gray-600 font-medium",children:["Total de documentos: ",e.length]}),(0,At.jsx)("div",{className:"space-y-1",children:Object.entries(t).map(e=>{let[t,r]=e;return(0,At.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,At.jsxs)("span",{className:"text-gray-600",children:[t,":"]}),(0,At.jsx)("span",{className:"font-medium",children:r.length})]},t)})})]})})()})]})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,At.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udcc8"}),(0,At.jsx)("span",{children:"M\xe9tricas Finales"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[B.progress,"%"]}),(0,At.jsx)("div",{className:"text-gray-600",children:"Progreso Final"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(()=>{const e=m.filter(e=>e.workPackageId===B.id||e.projectId===B.id);return e.length})()}),(0,At.jsx)("div",{className:"text-gray-600",children:"Tareas Totales"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:new Date(B.archivedAt).toLocaleDateString()}),(0,At.jsx)("div",{className:"text-gray-600",children:"Fecha de Archivado"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:B.archivedBy}),(0,At.jsx)("div",{className:"text-gray-600",children:"Responsable"})]})]})]}),(0,At.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,At.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udccb"}),(0,At.jsx)("span",{children:"Registro de Auditor\xeda Documental"})]}),(0,At.jsx)("div",{className:"space-y-3",children:(()=>{const e=j.filter(e=>e.projectId===B.id||e.workPackageId===B.id);if(0===e.length)return(0,At.jsx)("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"No hay registros de auditor\xeda documental para este proyecto"});const t=e.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp));return(0,At.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map((e,t)=>(0,At.jsx)("div",{className:"bg-white p-3 rounded border border-gray-200",children:(0,At.jsx)("div",{className:"flex items-start justify-between",children:(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.documentType||"Documento"}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("create"===e.action?"bg-green-100 text-green-800":"update"===e.action?"bg-blue-100 text-blue-800":"delete"===e.action?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"create"===e.action?"Creado":"update"===e.action?"Modificado":"delete"===e.action?"Eliminado":"Acci\xf3n"})]}),(0,At.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:e.description||"Sin descripci\xf3n"}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,At.jsxs)("span",{children:["Por: ",e.user||"Sistema"]}),(0,At.jsx)("span",{children:"\u2022"}),(0,At.jsx)("span",{children:new Date(e.timestamp).toLocaleString()})]})]})})},t))})})()})]}),(0,At.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg border-l-4 border-gray-400",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-yellow-600 text-xl",children:"\u26a0\ufe0f"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-medium text-gray-800",children:"Proyecto Archivado"}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Este proyecto est\xe1 archivado y es de solo lectura. Los datos se mantienen para consulta hist\xf3rica y auditor\xeda, pero no se puede modificar."})]})]})})]}),(0,At.jsx)("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:(0,At.jsx)("button",{onClick:K,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cerrar"})})]})})]})},AQ=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(e){l(!0);try{if(n){const{default:t}=await Promise.resolve().then(r.bind(r,9874));if(t.isAuthenticated()){const r=await t.loadAuditEvents(e);if(r.success)i(r.events),console.log("\u2705 Logs de auditor\xeda cargados desde Supabase para proyecto ".concat(e,": ").concat(r.events.length," eventos"));else{const t=localStorage.getItem("audit-log-".concat(e));i(t?JSON.parse(t):[])}}else{const t=localStorage.getItem("audit-log-".concat(e));i(t?JSON.parse(t):[])}}else{const t=localStorage.getItem("audit-log-".concat(e));i(t?JSON.parse(t):[])}}catch(t){console.error("Error loading audit log:",t);const r=localStorage.getItem("audit-log-".concat(e));r&&i(JSON.parse(r))}finally{l(!1)}}})()},[e,n]);const c=(0,t.useCallback)(async t=>{localStorage.setItem("audit-log-".concat(e),JSON.stringify(t)),console.log("\ud83d\udccb Logs de auditor\xeda guardados en localStorage para proyecto ".concat(e,": ").concat(t.length," eventos"))},[e]),d=(0,t.useCallback)(async t=>{if(n)try{const{default:n}=await Promise.resolve().then(r.bind(r,9874));if(n.isAuthenticated()){const r=await n.saveAuditEvents(e,[t]);r.success?console.log("\u2705 Evento de auditor\xeda guardado en Supabase: ".concat(t.action)):console.warn("\u26a0\ufe0f Error guardando evento en Supabase:",r.error)}}catch(a){console.error("Error guardando evento en Supabase:",a)}},[e,n]),u=(0,t.useCallback)(async t=>{const r=(0,s.A)({id:crypto.randomUUID(),timestamp:(new Date).toISOString(),projectId:e},t);return i(e=>{const t=[r,...e];return c(t),t}),d(r),r},[e,c,d]),h=(0,t.useCallback)((e,t,r)=>{u({category:"project-status",action:"status-changed",description:'Estado del proyecto cambiado de "'.concat(e,'" a "').concat(t,'"'),details:{previousStatus:e,newStatus:t,projectName:r.name,manager:r.manager,budget:r.budget},severity:"high",user:r.manager||"Sistema"})},[u]),f=(0,t.useCallback)((e,t)=>{u({category:"work-package",action:"created",description:'Work Package "'.concat(e.name,'" creado'),details:{workPackageId:e.id,name:e.name,budget:e.budget,status:e.status},severity:"medium",user:t.manager||"Sistema"})},[u]),p=(0,t.useCallback)((e,t,r)=>{u({category:"work-package",action:"modified",description:'Work Package "'.concat(e.name,'" modificado'),details:{workPackageId:e.id,name:e.name,changes:Object.keys(t),previousValues:t},severity:"medium",user:r.manager||"Sistema"})},[u]),m=(0,t.useCallback)((e,t)=>{u({category:"risk",action:"created",description:'Riesgo "'.concat(e.name,'" identificado'),details:{riskId:e.id,name:e.name,probability:e.probability,impact:e.impact,priority:e.priority},severity:"high"===e.priority?"high":"medium",user:t.manager||"Sistema"})},[u]),g=(0,t.useCallback)((e,t,r)=>{const n={"purchase-order":{action:"created",description:'Orden de Compra "'.concat(t.description,'" creada'),details:{poId:t.id,description:t.description,amount:t.amount,supplier:t.supplier}},advance:{action:"created",description:'Anticipo "'.concat(t.description,'" creado'),details:{advanceId:t.id,description:t.description,amount:t.amount,recipient:t.recipient}},invoice:{action:"created",description:'Factura "'.concat(t.description,'" creada'),details:{invoiceId:t.id,description:t.description,amount:t.amount,supplier:t.supplier}},contract:{action:"created",description:'Contrato "'.concat(t.name,'" creado'),details:{contractId:t.id,name:t.name,value:t.value,contractor:t.contractor}}}[e];n&&u({category:"financial",action:n.action,description:n.description,details:n.details,severity:"high",user:r.manager||"Sistema"})},[u]),v=(0,t.useCallback)((e,t)=>{u({category:"resources",action:"assigned",description:"Recurso asignado al proyecto",details:{assignmentId:e.id,resourceId:e.resourceId,role:e.role,allocation:e.allocation},severity:"medium",user:t.manager||"Sistema"})},[u]),b=(0,t.useCallback)((e,t)=>{u({category:"minutes",action:"minute-task-created",description:'Tarea de minuta "'.concat(e.tarea,'" creada'),details:{taskId:e.id,tarea:e.tarea,responsable:e.responsable,fecha:e.fecha,hitoId:e.hitoId,estatus:e.estatus},severity:"medium",user:t.manager||"Sistema"})},[u]),x=(0,t.useCallback)((e,t,r)=>{u({category:"minutes",action:"minute-task-updated",description:'Tarea de minuta "'.concat(e.tarea,'" actualizada'),details:{taskId:e.id,tarea:e.tarea,changes:t,newStatus:e.estatus},severity:"medium",user:r.manager||"Sistema"})},[u]),y=(0,t.useCallback)(()=>{i([]),localStorage.removeItem("audit-log-".concat(e))},[e]),w=(0,t.useCallback)(()=>{const t={projectId:e,exportDate:(new Date).toISOString(),totalEvents:a.length,events:a},r=JSON.stringify(t,null,2),n=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download="audit-log-".concat(e,"-").concat((new Date).toISOString().split("T")[0],".json"),i.click(),URL.revokeObjectURL(s)},[a,e]);return{auditLog:a,isLoading:o,addAuditEvent:u,logProjectStatusChange:h,logWorkPackageCreated:f,logWorkPackageModified:p,logRiskCreated:m,logFinancialEvent:g,logResourceAssignment:v,logMinutaTaskCreated:b,logMinutaTaskUpdated:x,clearAuditLog:y,exportAuditLog:w}},EQ=lV("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),CQ=lV("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),TQ=lV("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),PQ=lV("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),DQ=lV("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),OQ=lV("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),IQ=lV("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),MQ=lV("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),RQ=lV("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),LQ=lV("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),FQ=lV("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),BQ=lV("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zQ=lV("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),UQ=e=>{var n;let{projects:a,currentProjectId:i,setCurrentProjectId:o,risks:l,setRisks:c,setProjects:d,useSupabase:u=!1}=e;console.log("RiskManagement - risks recibidos:",l),console.log("RiskManagement - tipo de risks:",typeof l),console.log("RiskManagement - es array:",Array.isArray(l));const[h,f]=(0,t.useState)(null),[p,m]=(0,t.useState)("matrix"),[g,v]=(0,t.useState)("all"),[b,x]=(0,t.useState)("all"),[y,w]=(0,t.useState)("all"),[j,N]=(0,t.useState)(!1),[_,S]=(0,t.useState)(null),[k,A]=(0,t.useState)(!1),[E,C]=(0,t.useState)(null),[T,P]=(0,t.useState)(""),[D,O]=(0,t.useState)(!1),{logRiskCreated:I}=((0,t.useRef)(null),AQ(i,u)),M=(e,t)=>{C(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))},R={technical:{label:"T\xe9cnico",color:"blue",icon:EQ},financial:{label:"Financiero",color:"green",icon:CQ},organizational:{label:"Organizacional",color:"purple",icon:TQ},external:{label:"Externo",color:"orange",icon:pV},schedule:{label:"Cronograma",color:"yellow",icon:cV},resource:{label:"Recursos",color:"indigo",icon:TQ},quality:{label:"Calidad",color:"pink",icon:PQ},scope:{label:"Alcance",color:"teal",icon:mV}},L={avoid:{label:"Evitar",color:"red",description:"Eliminar la amenaza o proteger el proyecto"},mitigate:{label:"Mitigar",color:"yellow",description:"Reducir probabilidad o impacto"},transfer:{label:"Transferir",color:"blue",description:"Trasladar el riesgo a un tercero"},accept:{label:"Aceptar",color:"green",description:"Reconocer el riesgo sin acci\xf3n"},exploit:{label:"Explotar",color:"emerald",description:"Aprovechar la oportunidad"},enhance:{label:"Mejorar",color:"cyan",description:"Aumentar probabilidad o impacto positivo"},share:{label:"Compartir",color:"violet",description:"Compartir la oportunidad con terceros"}},F={initiation:"Iniciaci\xf3n",planning:"Planificaci\xf3n",execution:"Ejecuci\xf3n",monitoring:"Monitoreo y Control",closure:"Cierre"},B=(0,t.useMemo)(()=>{if(!l||!Array.isArray(l))return{totalRisks:0,activeRisks:0,highPriority:0,totalExposure:0,avgRiskScore:"0.00",mitigatedRisks:0,occurredRisks:0};const e=l.filter(e=>"active"===e.status),t=e.filter(e=>"high"===e.priority).length,r=e.reduce((e,t)=>e+t.costImpact*t.probability,0),n=e.reduce((e,t)=>e+t.riskScore,0)/e.length,a=l.filter(e=>"mitigated"===e.status).length,s=l.filter(e=>e.actualOccurred).length;return{totalRisks:l.length,activeRisks:e.length,highPriority:t,totalExposure:Math.round(r),avgRiskScore:n.toFixed(2),mitigatedRisks:a,occurredRisks:s}},[l]),z=null===a||void 0===a?void 0:a.find(e=>e.id===i),U=()=>{if(!l||!Array.isArray(l))return.05*(null===z||void 0===z?void 0:z.budget)||0;const e=l.filter(e=>"active"===e.status);if(0===e.length)return.05*(null===z||void 0===z?void 0:z.budget)||0;return.05*((null===z||void 0===z?void 0:z.budget)||0)+e.reduce((e,t)=>e+t.probability*t.costImpact*("high"===t.priority?1.5:"medium"===t.priority?1.2:1),0)},q=()=>{if(!z)return 0;const e=z.budget||0;if(!l||!Array.isArray(l))return.1*e;const t=l.filter(e=>"active"===e.status);let r=.1*e;t.length>10?r*=1.2:t.length>5&&(r*=1.1);const n=t.filter(e=>"high"===e.priority).length;return n>3&&(r*=1.15),r},W=()=>{A(!1),C(null)},H=(0,t.useMemo)(()=>l&&Array.isArray(l)?l.filter(e=>{const t="all"===g||e.category===g,r="all"===b||e.status===b,n="all"===y||e.priority===y,a=e.name.toLowerCase().includes(T.toLowerCase())||e.description.toLowerCase().includes(T.toLowerCase())||e.code.toLowerCase().includes(T.toLowerCase());return t&&r&&n&&a}):[],[l,g,b,y,T]),V=e=>{if(!e||!z||!d)return;const t=Math.max(0,e.p80-e.baseBudget),r=Math.max(0,e.p95-e.p80);if(console.log("\ud83d\udd04 Actualizando reservas bas\xe1ndose en Monte Carlo:"),console.log("\ud83d\udcca P80 Contingency:",t),console.log("\ud83d\udcca P95 Management:",r),z&&d){const n=(0,s.A)((0,s.A)({},z),{},{contingencyReserve:t,managementReserve:r,monteCarloResults:{lastUpdate:(new Date).toISOString(),p80Contingency:t,p95Management:r,recommendedBudget:e.p95}});d(e=>e.map(e=>e.id===z.id?n:e)),alert("\u2705 Reservas actualizadas bas\xe1ndose en an\xe1lisis Monte Carlo:\n      \n\ud83d\udcca Reserva de Contingencia: $".concat((t/1e3).toFixed(1),"K (P80)\n\ud83d\udcca Reserva de Gesti\xf3n: $").concat((r/1e3).toFixed(1),"K (P95)\n\ud83d\udcca Presupuesto Total Recomendado: $").concat((e.p95/1e3).toFixed(1),"K\n\nLas reservas se han actualizado en el proyecto y se reflejar\xe1n en todos los m\xf3dulos.")),console.log("\u2705 Proyecto actualizado con nuevas reservas de Monte Carlo")}};return(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4",children:[(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-red-50 to-orange-100 rounded-2xl shadow-lg p-6 mb-6 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-orange-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udee1\ufe0f"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800",children:"Gesti\xf3n de Riesgos"}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Identificaci\xf3n, an\xe1lisis y respuesta a riesgos del proyecto seg\xfan PMBOK"})]})]}),(0,At.jsx)("div",{className:"flex items-center space-x-4",children:(0,At.jsxs)("select",{value:i||"",onChange:e=>o(e.target.value),className:"px-4 py-2 rounded-lg bg-white text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 shadow-sm",children:[(0,At.jsx)("option",{value:"",children:"Seleccionar Proyecto"}),null===a||void 0===a?void 0:a.filter(e=>"active"===e.status).map(e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id))]})})]})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:B.activeRisks}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Riesgos Activos"})]}),(0,At.jsx)(DQ,{className:"text-red-500",size:32})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-orange-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:B.highPriority}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Alta Prioridad"})]}),(0,At.jsx)(EQ,{className:"text-orange-500",size:32})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-yellow-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",(B.totalExposure/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Exposici\xf3n Total"})]}),(0,At.jsx)(CQ,{className:"text-yellow-500",size:32})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:B.mitigatedRisks}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Mitigados"})]}),(0,At.jsx)(OQ,{className:"text-green-500",size:32})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",((()=>{if(!z)return 0;const e=z.budget||0;if(!l||!Array.isArray(l))return 1.15*e;return e+U()+q()})()/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Presupuesto Total"})]}),(0,At.jsx)(CQ,{className:"text-purple-500",size:32})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reservas de Costos"}),z?(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Presupuesto Base"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["$",((z.budget||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:"Presupuesto asignado al proyecto"})]}),(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Reserva de Contingencia"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:["$",(U()/1e3).toFixed(0),"K"]}),(0,At.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Basada en an\xe1lisis cuantitativo de riesgos activos"})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"Reserva de Gesti\xf3n"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:["$",(q()/1e3).toFixed(0),"K"]}),(0,At.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"10% del presupuesto base del proyecto"})]})]}):(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)(OQ,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,At.jsx)("p",{children:"Selecciona un proyecto para ver las reservas de costos"})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold",children:"An\xe1lisis Monte Carlo"}),(0,At.jsxs)("button",{onClick:()=>{if(!z||!l||!Array.isArray(l))return;const e=1e4,t=z.budget||0,r=l.filter(e=>"active"===e.status);if(0===r.length)return void S({averageCost:t,p50:t,p80:t,p95:t,iterations:e,note:"No hay riesgos activos para simular"});let n=0,a=[];for(let o=0;o<e;o++){let e=t;r.forEach(t=>{if(Math.random()<t.probability){const r=.8+.4*Math.random();e+=t.costImpact*r}}),n+=e,a.push(e)}a.sort((e,t)=>e-t);const s=n/e,i={averageCost:s,p50:a[Math.floor(5e3)],p80:a[Math.floor(8e3)],p95:a[Math.floor(9500)],iterations:e,riskCount:r.length,baseBudget:t,riskImpact:s-t};S(i),V(i)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,At.jsx)(IQ,{size:16}),(0,At.jsx)("span",{children:"Ejecutar Simulaci\xf3n"})]})]}),_?(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Costo Promedio"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:["$",(_.averageCost/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"P50 (Mediana)"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:["$",(_.p50/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"P80"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-yellow-900",children:["$",(_.p80/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"P95"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-red-900",children:["$",(_.p95/1e3).toFixed(0),"K"]})]})]}):(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)(IQ,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,At.jsx)("p",{children:"Ejecuta la simulaci\xf3n Monte Carlo para ver los resultados"})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold",children:"Gesti\xf3n de Riesgos"}),(0,At.jsxs)("button",{onClick:()=>{C({id:"R".concat(Date.now()),code:"",name:"",description:"",category:"technical",phase:"planning",probability:.5,impact:.5,riskScore:.25,status:"active",priority:"medium",owner:"",identifiedDate:(new Date).toISOString().split("T")[0],reviewDate:"",response:"mitigate",responsePlan:"",contingencyPlan:"",triggerConditions:"",costImpact:0,scheduleImpact:0,residualProbability:0,residualImpact:0,monitoringFrequency:"weekly",earlyWarnings:[],actualOccurred:!1,stakeholders:[],assumptions:[],constraints:[],projectId:i}),A(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,At.jsx)(MQ,{size:16}),(0,At.jsx)("span",{children:"Nuevo Riesgo"})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)(RQ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,At.jsx)("input",{type:"text",placeholder:"Buscar riesgos...",value:T,onChange:e=>P(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,At.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"all",children:"Todas las Categor\xedas"}),Object.entries(R).map(e=>{let[t,r]=e;return(0,At.jsx)("option",{value:t,children:r.label},t)})]}),(0,At.jsxs)("select",{value:b,onChange:e=>x(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"all",children:"Todos los Estados"}),(0,At.jsx)("option",{value:"active",children:"Activo"}),(0,At.jsx)("option",{value:"mitigated",children:"Mitigado"}),(0,At.jsx)("option",{value:"closed",children:"Cerrado"})]}),(0,At.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"all",children:"Todas las Prioridades"}),(0,At.jsx)("option",{value:"high",children:"Alta"}),(0,At.jsx)("option",{value:"medium",children:"Media"}),(0,At.jsx)("option",{value:"low",children:"Baja"})]}),(0,At.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"matrix",children:"Vista Matriz"}),(0,At.jsx)("option",{value:"list",children:"Vista Lista"})]})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[H.map(e=>(0,At.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,At.jsx)("span",{className:"font-medium text-gray-900",children:e.code}),(0,At.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.priority.toUpperCase()}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-red-100 text-red-700":"mitigated"===e.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.status.toUpperCase()})]}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-xs text-gray-500",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Probabilidad:"})," ",(100*e.probability).toFixed(0),"%"]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Impacto:"})," ",(100*e.impact).toFixed(0),"%"]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Costo:"})," $",(e.costImpact/1e3).toFixed(0),"K"]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Cronograma:"})," ",e.scheduleImpact," d\xedas"]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Responsable:"})," ",e.owner]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium",children:"Fase:"})," ",F[e.phase]]})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.riskScore.toFixed(2)}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:"Risk Score"})]}),(0,At.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,At.jsx)("button",{onClick:()=>(e=>{C(Object.assign({},e,{projectId:i})),A(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar",children:(0,At.jsx)(LQ,{size:16})}),(0,At.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este riesgo?"))try{const{default:t}=await Promise.resolve().then(r.bind(r,9874)),n=await t.deleteRisk(e);n.success?l&&Array.isArray(l)&&(c(l.filter(t=>t.id!==e)),console.log("\u2705 Riesgo eliminado localmente y de Supabase")):(console.error("\u274c Error eliminando riesgo de Supabase:",n.error),alert("Error eliminando el riesgo. Int\xe9ntalo de nuevo."))}catch(t){console.error("\u274c Error inesperado eliminando riesgo:",t),alert("Error inesperado eliminando el riesgo. Int\xe9ntalo de nuevo.")}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Eliminar",children:(0,At.jsx)(FQ,{size:16})})]})]})]})},e.id)),0===H.length&&(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)(DQ,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,At.jsx)("p",{children:"No se encontraron riesgos con los filtros aplicados"})]})]})]})]}),k&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:null!==E&&void 0!==E&&E.id&&l&&Array.isArray(l)&&l.find(e=>e.id===E.id)?"Editar Riesgo":"Nuevo Riesgo"}),(0,At.jsx)("button",{onClick:W,className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)(BQ,{size:24})})]}),(0,At.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{if(E){const e=E.probability*E.impact,t=Object.assign({},E,{riskScore:e});if(l&&Array.isArray(l))if(l.find(e=>e.id===E.id))c(l.map(e=>e.id===E.id?t:e));else{const e=l.slice();e.push(t),c(e),I&&z&&I(t,z)}else c([t]);A(!1),C(null)}})()},children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Informaci\xf3n B\xe1sica"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xf3digo del Riesgo"}),(0,At.jsx)("input",{type:"text",value:(null===E||void 0===E?void 0:E.code)||"",onChange:e=>M("code",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: TECH-001",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Riesgo"}),(0,At.jsx)("input",{type:"text",value:(null===E||void 0===E?void 0:E.name)||"",onChange:e=>M("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripci\xf3n breve del riesgo",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("textarea",{value:(null===E||void 0===E?void 0:E.description)||"",onChange:e=>M("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripci\xf3n detallada del riesgo",required:!0})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda"}),(0,At.jsx)("select",{value:(null===E||void 0===E?void 0:E.category)||"technical",onChange:e=>M("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(R).map(e=>{let[t,r]=e;return(0,At.jsx)("option",{value:t,children:r.label},t)})})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fase del Proyecto"}),(0,At.jsx)("select",{value:(null===E||void 0===E?void 0:E.phase)||"planning",onChange:e=>M("phase",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(F).map(e=>{let[t,r]=e;return(0,At.jsx)("option",{value:t,children:r},t)})})]})]})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"An\xe1lisis Cualitativo"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Probabilidad (0-1)"}),(0,At.jsx)("input",{type:"number",step:"0.1",min:"0",max:"1",value:(null===E||void 0===E?void 0:E.probability)||.5,onChange:e=>M("probability",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Impacto (0-1)"}),(0,At.jsx)("input",{type:"number",step:"0.1",min:"0",max:"1",value:(null===E||void 0===E?void 0:E.impact)||.5,onChange:e=>M("impact",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),(0,At.jsxs)("select",{value:(null===E||void 0===E?void 0:E.priority)||"medium",onChange:e=>M("priority",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"high",children:"Alta"}),(0,At.jsx)("option",{value:"medium",children:"Media"}),(0,At.jsx)("option",{value:"low",children:"Baja"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,At.jsxs)("select",{value:(null===E||void 0===E?void 0:E.status)||"active",onChange:e=>M("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"active",children:"Activo"}),(0,At.jsx)("option",{value:"mitigated",children:"Mitigado"}),(0,At.jsx)("option",{value:"closed",children:"Cerrado"})]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsable"}),(0,At.jsx)("input",{type:"text",value:(null===E||void 0===E?void 0:E.owner)||"",onChange:e=>M("owner",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nombre del responsable",required:!0})]})]})]}),(0,At.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"An\xe1lisis Cuantitativo"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Impacto en Costos (USD)"}),(0,At.jsx)("input",{type:"number",value:(null===E||void 0===E?void 0:E.costImpact)||0,onChange:e=>M("costImpact",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Impacto en Cronograma (d\xedas)"}),(0,At.jsx)("input",{type:"number",value:(null===E||void 0===E?void 0:E.scheduleImpact)||0,onChange:e=>M("scheduleImpact",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frecuencia de Monitoreo"}),(0,At.jsx)("select",{value:(null===E||void 0===E?void 0:E.monitoringFrequency)||"weekly",onChange:e=>M("monitoringFrequency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries({daily:"Diario",weekly:"Semanal",biweekly:"Quincenal",monthly:"Mensual",quarterly:"Trimestral"}).map(e=>{let[t,r]=e;return(0,At.jsx)("option",{value:t,children:r},t)})})]})]})]}),(0,At.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Plan de Respuesta"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estrategia de Respuesta"}),(0,At.jsx)("select",{value:(null===E||void 0===E?void 0:E.response)||"mitigate",onChange:e=>M("response",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(L).map(e=>{let[t,r]=e;return(0,At.jsx)("option",{value:t,children:r.label},t)})}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:null===(n=L[(null===E||void 0===E?void 0:E.response)||"mitigate"])||void 0===n?void 0:n.description})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Revisi\xf3n"}),(0,At.jsx)("input",{type:"date",value:(null===E||void 0===E?void 0:E.reviewDate)||"",onChange:e=>M("reviewDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan de Respuesta"}),(0,At.jsx)("textarea",{value:(null===E||void 0===E?void 0:E.responsePlan)||"",onChange:e=>M("responsePlan",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe las acciones espec\xedficas para responder al riesgo"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan de Contingencia"}),(0,At.jsx)("textarea",{value:(null===E||void 0===E?void 0:E.contingencyPlan)||"",onChange:e=>M("contingencyPlan",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe las acciones a tomar si el riesgo se materializa"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condiciones Trigger"}),(0,At.jsx)("textarea",{value:(null===E||void 0===E?void 0:E.triggerConditions)||"",onChange:e=>M("triggerConditions",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe las condiciones que activan el plan de contingencia"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t",children:[(0,At.jsx)("button",{type:"button",onClick:W,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancelar"}),(0,At.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,At.jsx)(zQ,{size:16}),(0,At.jsx)("span",{children:"Guardar Riesgo"})]})]})]})]})})}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcce Evidencia y Documentos de Riesgos"}),(0,At.jsxs)("button",{onClick:()=>O(!D),className:"bg-gradient-to-r from-red-600 to-orange-600 text-white px-4 py-2 rounded-lg text-sm hover:from-red-700 hover:to-orange-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[D?"Ocultar":"Mostrar"," Gestor"]})]}),D&&(0,At.jsx)(JH,{projectId:i,category:"risk-evidence",isContextual:!0,title:"\ud83d\udee1\ufe0f Documentos de Riesgos del Proyecto",onFileUploaded:()=>{}})]})]})},qQ=e=>{let{isOpen:r,onClose:n,hitos:a,onSave:i}=e;const[o,l]=(0,t.useState)([{id:1,tarea:"",responsable:"",fecha:"",hitoId:""},{id:2,tarea:"",responsable:"",fecha:"",hitoId:""},{id:3,tarea:"",responsable:"",fecha:"",hitoId:""},{id:4,tarea:"",responsable:"",fecha:"",hitoId:""},{id:5,tarea:"",responsable:"",fecha:"",hitoId:""},{id:6,tarea:"",responsable:"",fecha:"",hitoId:""}]);(0,t.useEffect)(()=>{r&&l([{id:1,tarea:"",responsable:"",fecha:"",hitoId:""},{id:2,tarea:"",responsable:"",fecha:"",hitoId:""},{id:3,tarea:"",responsable:"",fecha:"",hitoId:""},{id:4,tarea:"",responsable:"",fecha:"",hitoId:""},{id:5,tarea:"",responsable:"",fecha:"",hitoId:""},{id:6,tarea:"",responsable:"",fecha:"",hitoId:""}])},[r]);const c=(e,t,r)=>{l(n=>n.map(n=>n.id===e?(0,s.A)((0,s.A)({},n),{},{[t]:r}):n))};return r?(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 p-6 max-h-[90vh] overflow-y-auto",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\ud83d\udccb Nueva Minuta"}),(0,At.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"\xd7"})]}),(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsx)("p",{className:"text-gray-600 text-sm",children:"Complete las tareas derivadas de la reuni\xf3n. Los campos marcados son obligatorios."})}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-blue-50",children:[(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"#"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Tarea *"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Responsable *"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Fecha *"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Hito relacionado *"})]})}),(0,At.jsx)("tbody",{children:o.map(e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-center font-medium text-gray-600",children:e.id}),(0,At.jsxs)("td",{className:"border border-gray-300 px-2 py-2",children:[(0,At.jsx)("textarea",{value:e.tarea,onChange:t=>c(e.id,"tarea",t.target.value),placeholder:"Descripci\xf3n de la tarea...",maxLength:70,rows:2,className:"w-full p-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.tarea.length,"/70 caracteres"]})]}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-2",children:(0,At.jsx)("input",{type:"text",value:e.responsable,onChange:t=>c(e.id,"responsable",t.target.value),placeholder:"Nombre del responsable",className:"w-full p-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-2",children:(0,At.jsx)("input",{type:"date",value:e.fecha,onChange:t=>c(e.id,"fecha",t.target.value),className:"w-full p-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-2",children:(0,At.jsxs)("select",{value:e.hitoId,onChange:t=>c(e.id,"hitoId",t.target.value),className:"w-full p-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,At.jsx)("option",{value:"",children:"Seleccionar hito..."}),a.map(e=>(0,At.jsxs)("option",{value:e.id,children:[e.wbsCode," - ",e.name]},e.id))]})})]},e.id))})]})}),(0,At.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,At.jsx)("button",{onClick:n,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{const e=o.filter(e=>""!==e.tarea.trim());if(0===e.length)return void alert("Debe agregar al menos una tarea para guardar la minuta.");const t=e.filter(e=>!e.responsable.trim()||!e.fecha||!e.hitoId);if(t.length>0)return void alert("Todas las tareas deben tener: Responsable, Fecha y Hito relacionado.");const r=e.map(e=>(0,s.A)((0,s.A)({},e),{},{id:crypto.randomUUID(),fechaCreacion:(new Date).toISOString(),estatus:"Pendiente"}));i(r),n()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\ud83d\udcbe Guardar Minuta"})]})]})}):null},WQ=e=>{let{isOpen:r,onClose:n,minuta:a,hitos:i,onUpdate:o}=e;const[l,c]=(0,t.useState)({id:"",tarea:"",responsable:"",fecha:"",hitoId:"",estatus:"Pendiente"});(0,t.useEffect)(()=>{r&&a&&c({id:a.id,tarea:a.tarea||"",responsable:a.responsable||"",fecha:a.fecha||"",hitoId:a.hitoId||"",estatus:a.estatus||"Pendiente"})},[r,a]);const d=(e,t)=>{c(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))};return r?(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u270f\ufe0f Editar Minuta"}),(0,At.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"\xd7"})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tarea *"}),(0,At.jsx)("textarea",{value:l.tarea,onChange:e=>d("tarea",e.target.value),placeholder:"Descripci\xf3n de la tarea...",maxLength:70,rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[l.tarea.length,"/70 caracteres"]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsable *"}),(0,At.jsx)("input",{type:"text",value:l.responsable,onChange:e=>d("responsable",e.target.value),placeholder:"Nombre del responsable",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha *"}),(0,At.jsx)("input",{type:"date",value:l.fecha,onChange:e=>d("fecha",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hito relacionado *"}),(0,At.jsxs)("select",{value:l.hitoId,onChange:e=>d("hitoId",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Seleccionar hito..."}),i.map(e=>(0,At.jsxs)("option",{value:e.id,children:[e.wbsCode," - ",e.name]},e.id))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estatus"}),(0,At.jsxs)("select",{value:l.estatus,onChange:e=>d("estatus",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,At.jsx)("option",{value:"En Proceso",children:"En Proceso"}),(0,At.jsx)("option",{value:"Completado",children:"Completado"})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,At.jsx)("button",{onClick:n,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{l.tarea.trim()?l.responsable.trim()?l.fecha?l.hitoId?(o(l),n()):alert("El hito relacionado es requerido"):alert("La fecha es requerida"):alert("El responsable es requerido"):alert("La tarea es requerida")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\ud83d\udcbe Guardar Cambios"})]})]})}):null},HQ=e=>{var r,n,a;let{wizardData:s,onUpdate:i,availableTemplates:o}=e;const[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(""),h=[{value:"development",label:"Desarrollo de Software",icon:"\ud83d\udcbb"},{value:"equipment_installation",label:"Compra e Instalaci\xf3n de Equipos",icon:"\ud83c\udfed"},{value:"construction",label:"Construcci\xf3n",icon:"\ud83c\udfd7\ufe0f"},{value:"campaign",label:"Campa\xf1a de Marketing",icon:"\ud83d\udce2"},{value:"research",label:"Proyecto de Investigaci\xf3n",icon:"\ud83d\udd2c"},{value:"custom",label:"Personalizado",icon:"\u2699\ufe0f"}],f=[{value:"agile",label:"Agile/Scrum",description:"Iterativo, adaptativo"},{value:"waterfall",label:"Waterfall",description:"Secuencial, planificado"},{value:"hybrid",label:"H\xedbrido",description:"Combinaci\xf3n de ambos"},{value:"kanban",label:"Kanban",description:"Flujo continuo"}],p=[{value:"software",label:"Software/Tecnolog\xeda"},{value:"equipment",label:"Maquinaria/Equipos"},{value:"construction",label:"Construcci\xf3n"},{value:"marketing",label:"Marketing/Publicidad"},{value:"research",label:"Investigaci\xf3n/Desarrollo"},{value:"manufacturing",label:"Manufactura"},{value:"services",label:"Servicios"},{value:"other",label:"Otro"}];(0,t.useEffect)(()=>{if(l){const e={projectType:l.project_type,industry:l.industry,methodology:l.methodology,templateId:l.id,templateName:l.name};Object.keys(e).some(t=>s[t]!==e[t])&&i(e)}},[l]),(0,t.useEffect)(()=>{if("custom"===s.projectType&&d){const e=d.toLowerCase().replace(/\s+/g,"_");s.customProjectType!==d&&i({projectType:e,customProjectType:d})}},[d,s.projectType]);return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ud83d\udccb An\xe1lisis del Proyecto"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Proporciona informaci\xf3n b\xe1sica sobre tu proyecto para generar el cronograma m\xe1s apropiado"})]}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udcdd"}),"Informaci\xf3n B\xe1sica"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Proyecto *"}),(0,At.jsx)("input",{type:"text",value:s.projectName||"",onChange:e=>i({projectName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ej: Sistema de Gesti\xf3n de Inventarios"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gerente del Proyecto"}),(0,At.jsx)("input",{type:"text",value:s.projectManager||"",onChange:e=>i({projectManager:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ej: Juan P\xe9rez"})]})]}),(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n del Proyecto"}),(0,At.jsx)("textarea",{value:s.projectDescription||"",onChange:e=>i({projectDescription:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe brevemente los objetivos y alcance del proyecto..."})]})]}),(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83c\udfaf"}),"Tipo de Proyecto *"]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:h.map(e=>(0,At.jsx)("button",{onClick:()=>(e=>{i({projectType:e});const t=o.find(t=>t.project_type===e);c(t||null)})(e.value),className:"p-4 rounded-lg border-2 transition-all text-left ".concat(s.projectType===e.value?"border-purple-500 bg-purple-50 text-purple-800":"border-gray-200 hover:border-purple-300 hover:bg-purple-25"),children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-3",children:e.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold",children:e.label}),"equipment_installation"===e.value&&(0,At.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Incluye compra, instalaci\xf3n y puesta en marcha"})]})]})},e.value))}),"custom"===s.projectType&&(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especifica el tipo de proyecto"}),(0,At.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ej: Migraci\xf3n de Datos, Implementaci\xf3n de ERP"})]})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83c\udfe2"}),"Industria"]}),(0,At.jsxs)("select",{value:s.industry||"",onChange:e=>i({industry:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"",children:"Selecciona una industria"}),p.map(e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udcca"}),"Metodolog\xeda Preferida"]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map(e=>(0,At.jsxs)("button",{onClick:()=>i({methodology:e.value}),className:"p-4 rounded-lg border-2 transition-all text-left ".concat(s.methodology===e.value?"border-purple-500 bg-purple-50 text-purple-800":"border-gray-200 hover:border-purple-300 hover:bg-purple-25"),children:[(0,At.jsx)("div",{className:"font-semibold",children:e.label}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description})]},e.value))})]}),o.length>0&&(0,At.jsxs)("div",{className:"bg-purple-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udccb"}),"Templates Disponibles"]}),(0,At.jsx)("div",{className:"space-y-3",children:o.filter(e=>!s.projectType||e.project_type===s.projectType||e.industry===s.industry).map(e=>(0,At.jsx)("button",{onClick:()=>(e=>{c(e)})(e),className:"w-full p-4 rounded-lg border-2 transition-all text-left ".concat((null===l||void 0===l?void 0:l.id)===e.id?"border-purple-500 bg-purple-100 text-purple-800":"border-gray-200 hover:border-purple-300 hover:bg-purple-25"),children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold",children:e.name}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.methodology," \u2022 ",e.estimated_duration_days," d\xedas \u2022 Equipo: ",e.team_size_min,"-",e.team_size_max," personas"]})]}),(null===l||void 0===l?void 0:l.id)===e.id&&(0,At.jsx)("span",{className:"text-purple-600 text-xl",children:"\u2713"})]})},e.id))})]}),(0,At.jsxs)("div",{className:"bg-orange-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udcc5"}),"Fechas del Proyecto"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Inicio"}),(0,At.jsx)("input",{type:"date",value:s.startDate||"",onChange:e=>i({startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha L\xedmite (Opcional)"}),(0,At.jsx)("input",{type:"date",value:s.endDate||"",onChange:e=>i({endDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(s.projectName||s.projectType)&&(0,At.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-800 mb-2",children:"Resumen de Selecci\xf3n:"}),(0,At.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[s.projectName&&(0,At.jsxs)("div",{children:["\u2022 Proyecto: ",s.projectName]}),s.projectType&&(0,At.jsxs)("div",{children:["\u2022 Tipo: ",null===(r=h.find(e=>e.value===s.projectType))||void 0===r?void 0:r.label]}),s.industry&&(0,At.jsxs)("div",{children:["\u2022 Industria: ",null===(n=p.find(e=>e.value===s.industry))||void 0===n?void 0:n.label]}),s.methodology&&(0,At.jsxs)("div",{children:["\u2022 Metodolog\xeda: ",null===(a=f.find(e=>e.value===s.methodology))||void 0===a?void 0:a.label]}),l&&(0,At.jsxs)("div",{children:["\u2022 Template: ",l.name]})]})]})]})},VQ=e=>{var r,n;let{wizardData:a,onUpdate:i}=e;const[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)({name:"",role:"",experience:"intermediate"}),u=[{value:"junior",label:"Junior (0-2 a\xf1os)",description:"Reci\xe9n iniciado, necesita supervisi\xf3n"},{value:"intermediate",label:"Intermedio (2-5 a\xf1os)",description:"Experiencia moderada, trabajo independiente"},{value:"senior",label:"Senior (5-10 a\xf1os)",description:"Experiencia s\xf3lida, puede liderar"},{value:"expert",label:"Experto (10+ a\xf1os)",description:"Experiencia avanzada, mentor\xeda"}],h=[{value:"project_manager",label:"Project Manager",icon:"\ud83d\udc68\u200d\ud83d\udcbc"},{value:"team_lead",label:"Team Lead",icon:"\ud83d\udc68\u200d\ud83d\udcbb"},{value:"buyer",label:"Comprador(a)",icon:"\ud83d\uded2"},{value:"developer",label:"Desarrollador",icon:"\ud83d\udcbb"},{value:"designer",label:"Dise\xf1ador",icon:"\ud83c\udfa8"},{value:"qa_tester",label:"QA/Tester",icon:"\ud83d\udd0d"},{value:"devops",label:"DevOps",icon:"\u2699\ufe0f"},{value:"analyst",label:"Analista",icon:"\ud83d\udcca"},{value:"engineer",label:"Ingeniero",icon:"\ud83d\udd27"},{value:"technician",label:"T\xe9cnico",icon:"\ud83d\udee0\ufe0f"},{value:"specialist",label:"Especialista",icon:"\ud83c\udfaf"},{value:"other",label:"Otro",icon:"\ud83d\udc64"}],f=[{value:"low",label:"Bajo",description:"Prefiero estimaciones conservadoras con m\xe1s tiempo"},{value:"medium",label:"Medio",description:"Equilibrio entre tiempo y riesgo"},{value:"high",label:"Alto",description:"Estimaciones agresivas, menos tiempo"}];(0,t.useEffect)(()=>{if(o.length>0){const e={junior:1,intermediate:2,senior:3,expert:4},t=o.reduce((t,r)=>t+(e[r.experience]||2),0)/o.length;let r="intermediate";t<=1.5?r="junior":t>=3.5?r="expert":t>=2.5&&(r="senior"),i({teamSize:o.length,teamExperience:r,teamMembers:o})}else i({teamSize:a.teamSize||1,teamExperience:a.teamExperience||"intermediate",teamMembers:[]})},[o]);const p=e=>{const t=h.find(t=>t.value===e);return t?t.icon:"\ud83d\udc64"},m=e=>{const t=h.find(t=>t.value===e);return t?t.label:e};return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ud83d\udc65 Configuraci\xf3n de Recursos"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Define el equipo y recursos disponibles para optimizar el cronograma"})]}),(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udc65"}),"Tama\xf1o del Equipo"]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,At.jsxs)("button",{onClick:()=>i({teamSize:e}),className:"p-4 rounded-lg border-2 transition-all text-center ".concat(a.teamSize===e?"border-blue-500 bg-blue-100 text-blue-800":"border-gray-200 hover:border-blue-300 hover:bg-blue-25"),children:[(0,At.jsx)("div",{className:"text-2xl font-bold",children:e}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:1===e?"persona":"personas"})]},e))})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"}),"Composici\xf3n del Equipo"]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4 border border-gray-200",children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-700 mb-3",children:"Agregar Miembro del Equipo"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),(0,At.jsx)("input",{type:"text",value:c.name,onChange:e=>d(t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Ej: Mar\xeda Garc\xeda"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),(0,At.jsxs)("select",{value:c.role,onChange:e=>d(t=>(0,s.A)((0,s.A)({},t),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,At.jsx)("option",{value:"",children:"Seleccionar rol"}),h.map(e=>(0,At.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experiencia"}),(0,At.jsx)("select",{value:c.experience,onChange:e=>d(t=>(0,s.A)((0,s.A)({},t),{},{experience:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:u.map(e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,At.jsx)("button",{onClick:()=>{if(c.name.trim()&&c.role){const e={id:Date.now(),name:c.name.trim(),role:c.role,experience:c.experience};l(t=>[...t,e]),d({name:"",role:"",experience:"intermediate"})}},disabled:!c.name.trim()||!c.role,className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"+ Agregar Miembro"})]}),o.length>0&&(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("h5",{className:"font-semibold text-gray-700",children:["Miembros del Equipo (",o.length,")"]}),o.map(e=>{var t;return(0,At.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-3",children:p(e.role)}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold",children:e.name}),(0,At.jsxs)("div",{className:"text-sm text-gray-600",children:[m(e.role)," \u2022 ",null===(t=u.find(t=>t.value===e.experience))||void 0===t?void 0:t.label]})]})]}),(0,At.jsx)("button",{onClick:()=>{return t=e.id,void l(e=>e.filter(e=>e.id!==t));var t},className:"text-red-500 hover:text-red-700 transition-colors",children:"\ud83d\uddd1\ufe0f"})]},e.id)})]})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83c\udf93"}),"Nivel de Experiencia del Equipo"]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map(e=>(0,At.jsxs)("button",{onClick:()=>i({teamExperience:e.value}),className:"p-4 rounded-lg border-2 transition-all text-left ".concat(a.teamExperience===e.value?"border-yellow-500 bg-yellow-100 text-yellow-800":"border-gray-200 hover:border-yellow-300 hover:bg-yellow-25"),children:[(0,At.jsx)("div",{className:"font-semibold",children:e.label}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description})]},e.value))})]}),(0,At.jsxs)("div",{className:"bg-purple-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\u23f0"}),"Disponibilidad del Equipo"]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:25,label:"25%",description:"Tiempo parcial"},{value:50,label:"50%",description:"Medio tiempo"},{value:75,label:"75%",description:"Tiempo completo"},{value:100,label:"100%",description:"Dedicaci\xf3n total"}].map(e=>(0,At.jsxs)("button",{onClick:()=>i({teamAvailability:e.value}),className:"p-4 rounded-lg border-2 transition-all text-center ".concat(a.teamAvailability===e.value?"border-purple-500 bg-purple-100 text-purple-800":"border-gray-200 hover:border-purple-300 hover:bg-purple-25"),children:[(0,At.jsx)("div",{className:"text-2xl font-bold",children:e.label}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]},e.value))})]}),(0,At.jsxs)("div",{className:"bg-red-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\u26a0\ufe0f"}),"Tolerancia al Riesgo"]}),(0,At.jsx)("div",{className:"space-y-3",children:f.map(e=>(0,At.jsxs)("button",{onClick:()=>i({riskTolerance:e.value}),className:"w-full p-4 rounded-lg border-2 transition-all text-left ".concat(a.riskTolerance===e.value?"border-red-500 bg-red-100 text-red-800":"border-gray-200 hover:border-red-300 hover:bg-red-25"),children:[(0,At.jsx)("div",{className:"font-semibold",children:e.label}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description})]},e.value))})]}),(0,At.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udcb0"}),"Presupuesto del Proyecto"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Presupuesto Total (USD)"}),(0,At.jsx)("input",{type:"number",value:a.budget||"",onChange:e=>i({budget:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ej: 50000"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Presupuesto por Mes (USD)"}),(0,At.jsx)("input",{type:"number",value:a.monthlyBudget||"",onChange:e=>i({monthlyBudget:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ej: 10000"})]})]})]}),(0,At.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-800 mb-2",children:"Resumen de Configuraci\xf3n:"}),(0,At.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,At.jsxs)("div",{children:["\u2022 Equipo: ",a.teamSize||1," personas"]}),(0,At.jsxs)("div",{children:["\u2022 Experiencia: ",null===(r=u.find(e=>e.value===a.teamExperience))||void 0===r?void 0:r.label]}),a.teamAvailability&&(0,At.jsxs)("div",{children:["\u2022 Disponibilidad: ",a.teamAvailability,"%"]}),a.riskTolerance&&(0,At.jsxs)("div",{children:["\u2022 Riesgo: ",null===(n=f.find(e=>e.value===a.riskTolerance))||void 0===n?void 0:n.label]}),a.budget&&(0,At.jsxs)("div",{children:["\u2022 Presupuesto: $",a.budget.toLocaleString()]}),o.length>0&&(0,At.jsxs)("div",{children:["\u2022 Miembros definidos: ",o.length]})]})]})]})},GQ=e=>{let{wizardData:r,onUpdate:n}=e;const[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=u(r.projectType);i(e)},[r.projectType]),(0,t.useEffect)(()=>{n({milestones:a})},[a,n]);const u=e=>{const t={construccion:[{id:"milestone-1",name:"HITO: Aprobaci\xf3n de planos",description:"Aprobaci\xf3n final de planos arquitect\xf3nicos y estructurales"},{id:"milestone-2",name:"HITO: Inicio de obra",description:"Inicio formal de la construcci\xf3n"},{id:"milestone-3",name:"HITO: Estructura terminada",description:"Completar estructura principal"},{id:"milestone-4",name:"HITO: Instalaciones completadas",description:"Instalaciones el\xe9ctricas, hidr\xe1ulicas y sanitarias"},{id:"milestone-5",name:"HITO: Obra terminada",description:"Construcci\xf3n completamente terminada"}],software:[{id:"milestone-1",name:"HITO: An\xe1lisis completado",description:"An\xe1lisis de requisitos y dise\xf1o de sistema"},{id:"milestone-2",name:"HITO: Prototipo funcional",description:"Primera versi\xf3n funcional del software"},{id:"milestone-3",name:"HITO: Desarrollo terminado",description:"Desarrollo completo de funcionalidades"},{id:"milestone-4",name:"HITO: Pruebas completadas",description:"Testing y correcci\xf3n de errores"},{id:"milestone-5",name:"HITO: Despliegue en producci\xf3n",description:"Lanzamiento oficial del software"}],manufactura:[{id:"milestone-1",name:"HITO: Dise\xf1o de producto",description:"Dise\xf1o final del producto a manufacturar"},{id:"milestone-2",name:"HITO: Prototipo validado",description:"Prototipo aprobado y validado"},{id:"milestone-3",name:"HITO: L\xednea de producci\xf3n",description:"Configuraci\xf3n de l\xednea de producci\xf3n"},{id:"milestone-4",name:"HITO: Producci\xf3n piloto",description:"Primera producci\xf3n de prueba"},{id:"milestone-5",name:"HITO: Producci\xf3n en masa",description:"Inicio de producci\xf3n comercial"}],general:[{id:"milestone-1",name:"HITO: Proyecto iniciado",description:"Kickoff formal del proyecto"},{id:"milestone-2",name:"HITO: Planificaci\xf3n completada",description:"Plan detallado del proyecto aprobado"},{id:"milestone-3",name:"HITO: Fase de ejecuci\xf3n",description:"Inicio de la fase principal de ejecuci\xf3n"},{id:"milestone-4",name:"HITO: Entregables completados",description:"Todos los entregables principales terminados"},{id:"milestone-5",name:"HITO: Proyecto cerrado",description:"Cierre formal del proyecto"}]};return t[e]||t.general},h=()=>{if(!o.trim())return;const e={id:"milestone-".concat(Date.now()),name:o.trim(),description:"",isCustom:!0};i(t=>[...t,e]),l(""),d(!1)},f=(e,t,r)=>{i(n=>n.map(n=>n.id===e?(0,s.A)((0,s.A)({},n),{},{[t]:r}):n))},p=(e,t)=>{i(r=>{const n=[...r],[a]=n.splice(e,1);return n.splice(t,0,a),n})};return(0,At.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-4xl mr-3",children:"\ud83c\udfaf"}),"Definir hitos del proyecto"]}),(0,At.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Los hitos son puntos clave en tu proyecto que marcan el progreso y la entrega de resultados importantes. Hemos predefinido algunos hitos comunes para tu tipo de proyecto, pero puedes personalizarlos."})]}),(0,At.jsx)("div",{className:"space-y-4 mb-6",children:a.map((e,t)=>(0,At.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:(0,At.jsxs)("div",{className:"flex items-start justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"}),(0,At.jsx)("div",{className:"flex-1",children:(0,At.jsx)("input",{type:"text",value:e.name,onChange:t=>f(e.id,"name",t.target.value),className:"w-full text-lg font-semibold text-gray-800 border-none bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1",placeholder:"Nombre del hito"})})]}),(0,At.jsx)("textarea",{value:e.description,onChange:t=>f(e.id,"description",t.target.value),className:"w-full text-gray-600 border border-gray-200 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripci\xf3n del hito (opcional)",rows:2}),e.isCustom&&(0,At.jsx)("div",{className:"mt-2",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"\u2728 Personalizado"})})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[t>0&&(0,At.jsx)("button",{onClick:()=>p(t,t-1),className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Mover hacia arriba",children:"\u2b06\ufe0f"}),t<a.length-1&&(0,At.jsx)("button",{onClick:()=>p(t,t+1),className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Mover hacia abajo",children:"\u2b07\ufe0f"}),(0,At.jsx)("button",{onClick:()=>{return t=e.id,void i(e=>e.filter(e=>e.id!==t));var t},className:"text-red-400 hover:text-red-600 transition-colors",title:"Eliminar hito",children:"\ud83d\uddd1\ufe0f"})]})]})},e.id))}),c?(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Agregar nuevo hito"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nombre del nuevo hito",onKeyPress:e=>"Enter"===e.key&&h(),autoFocus:!0}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsx)("button",{onClick:h,disabled:!o.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Agregar hito"}),(0,At.jsx)("button",{onClick:()=>{d(!1),l("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"})]})]})]}):(0,At.jsxs)("button",{onClick:()=>d(!0),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\u2795"}),"Agregar hito personalizado"]}),(0,At.jsxs)("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,At.jsxs)("h4",{className:"font-semibold text-yellow-800 mb-2 flex items-center",children:[(0,At.jsx)("span",{className:"mr-2",children:"\ud83d\udca1"}),"Consejos para definir hitos"]}),(0,At.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Los hitos deben ser medibles y verificables"}),(0,At.jsx)("li",{children:"\u2022 Deben representar entregables tangibles"}),(0,At.jsx)("li",{children:"\u2022 Considera las dependencias entre hitos"}),(0,At.jsx)("li",{children:"\u2022 Incluye hitos de aprobaci\xf3n y validaci\xf3n"})]})]}),(0,At.jsx)("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800",children:"Resumen de hitos"}),(0,At.jsxs)("p",{className:"text-gray-600 text-sm",children:[a.length," hitos definidos para el proyecto"]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:a.length}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"hitos"})]})]})})]})},KQ=e=>{let{wizardData:r,onUpdate:n}=e;const[a,i]=(0,t.useState)({deliveryTime:r.deliveryTime||"",deliveryTimeUnit:r.deliveryTimeUnit||"weeks",requiresInfrastructure:r.requiresInfrastructure||!1,isForeignEquipment:r.isForeignEquipment||!1,numberOfAdvancePayments:r.numberOfAdvancePayments||2,advancePayments:r.advancePayments||[{percentage:30,description:"Anticipo inicial",timing:"order"},{percentage:70,description:"Pago final",timing:"delivery"}]}),[o,l]=(0,t.useState)({});(0,t.useEffect)(()=>{n(a)},[a,n]);const c=(e,t)=>{i(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t})),o[e]&&l(t=>(0,s.A)((0,s.A)({},t),{},{[e]:null}))},d=(e,t,r)=>{const n=[...a.advancePayments];n[e]=(0,s.A)((0,s.A)({},n[e]),{},{[t]:r}),c("advancePayments",n)},u=e=>{switch(e){case 1:return[{percentage:100,description:"Pago completo",timing:"delivery"}];case 2:default:return[{percentage:30,description:"Anticipo inicial",timing:"order"},{percentage:70,description:"Pago final",timing:"delivery"}];case 3:return[{percentage:30,description:"Anticipo inicial",timing:"order"},{percentage:50,description:"Pago pre-embarque",timing:"shipping"},{percentage:20,description:"Pago final",timing:"delivery"}]}};return(0,t.useEffect)(()=>{(()=>{const e={};(!a.deliveryTime||a.deliveryTime<=0)&&(e.deliveryTime="El tiempo de entrega es requerido"),(!a.numberOfAdvancePayments||a.numberOfAdvancePayments<1)&&(e.numberOfAdvancePayments="Debe seleccionar al menos 1 anticipo");const t=a.advancePayments.reduce((e,t)=>e+(parseFloat(t.percentage)||0),0);Math.abs(t-100)>.01&&(e.advancePayments="Los anticipos deben sumar 100%"),l(e),Object.keys(e).length})()},[a]),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Configuraci\xf3n Espec\xedfica de Maquinaria"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Configura los detalles espec\xedficos para la compra e instalaci\xf3n de equipos"})]}),(0,At.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,At.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:"\ud83d\udce6 Tiempo de Entrega de Equipos"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiempo de entrega"}),(0,At.jsx)("input",{type:"number",min:"1",value:a.deliveryTime,onChange:e=>c("deliveryTime",parseInt(e.target.value)||""),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(o.deliveryTime?"border-red-500":"border-gray-300"),placeholder:"Ej: 12"}),o.deliveryTime&&(0,At.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.deliveryTime})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidad de tiempo"}),(0,At.jsxs)("select",{value:a.deliveryTimeUnit,onChange:e=>c("deliveryTimeUnit",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"days",children:"D\xedas"}),(0,At.jsx)("option",{value:"weeks",children:"Semanas"}),(0,At.jsx)("option",{value:"months",children:"Meses"})]})]})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Este tiempo ser\xe1 utilizado para ajustar la duraci\xf3n de las actividades de compra y entrega."})]}),(0,At.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,At.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:"\ud83d\udd27 Requisitos Especiales"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-medium text-gray-800",children:"\xbfRequiere modificaci\xf3n de infraestructura?"}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Preparaci\xf3n del sitio, instalaciones el\xe9ctricas, cimentaciones, etc."})]}),(0,At.jsxs)("label",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",checked:a.requiresInfrastructure,onChange:e=>c("requiresInfrastructure",e.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),(0,At.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"S\xed"})]})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-medium text-gray-800",children:"\xbfEl equipo viene del extranjero?"}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Incluir\xe1 procesos de importaci\xf3n, aduanas y documentaci\xf3n"})]}),(0,At.jsxs)("label",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",checked:a.isForeignEquipment,onChange:e=>c("isForeignEquipment",e.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),(0,At.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"S\xed"})]})]})]})]}),(0,At.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,At.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:"\ud83d\udcb0 Estructura de Anticipos"}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\xbfCu\xe1ntos anticipos tendr\xe1 este proyecto?"}),(0,At.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,At.jsxs)("button",{type:"button",onClick:()=>(e=>{c("numberOfAdvancePayments",e);const t=u(e);c("advancePayments",t)})(e),className:"p-4 border-2 rounded-lg text-center transition-colors ".concat(a.numberOfAdvancePayments===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-blue-300 text-gray-700"),children:[(0,At.jsx)("div",{className:"font-semibold text-lg",children:e}),(0,At.jsx)("div",{className:"text-sm",children:1===e?"Pago \xfanico":2===e?"Dos anticipos":"Tres anticipos"})]},e))}),o.numberOfAdvancePayments&&(0,At.jsx)("p",{className:"text-red-500 text-sm mt-2",children:o.numberOfAdvancePayments})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[a.advancePayments.map((e,t)=>(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porcentaje (%)"}),(0,At.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:e.percentage,onChange:e=>d(t,"percentage",parseFloat(e.target.value)||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"30"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("input",{type:"text",value:e.description,onChange:e=>d(t,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Anticipo inicial"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Momento del pago"}),(0,At.jsxs)("select",{value:e.timing,onChange:e=>d(t,"timing",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"order",children:"Al realizar la orden de compra"}),(0,At.jsx)("option",{value:"production",children:"Durante la fabricaci\xf3n"}),(0,At.jsx)("option",{value:"shipping",children:"Antes de liberar para env\xedo"}),(0,At.jsx)("option",{value:"delivery",children:"Al entregar equipo funcionando"}),(0,At.jsx)("option",{value:"installation",children:"Al completar la instalaci\xf3n"}),(0,At.jsx)("option",{value:"performance",children:"Al finalizar pruebas de performance"})]})]})]},t)),o.advancePayments&&(0,At.jsx)("p",{className:"text-red-500 text-sm",children:o.advancePayments}),(0,At.jsxs)("div",{className:"text-sm text-gray-500 text-center",children:["Total: ",a.advancePayments.reduce((e,t)=>e+(parseFloat(t.percentage)||0),0).toFixed(1),"%"]})]})]})]})},$Q=e=>{var r,n,a,s,i,o,l,c;let{wizardData:d,generatedSchedule:u,isGenerating:h,onGenerate:f}=e;const[p,m]=(0,t.useState)("overview"),[g,v]=(0,t.useState)(!0);console.log("\ud83d\udd0d SchedulePreview props:",{wizardData:d,generatedSchedule:u?"Presente":"Ausente",isGenerating:h,hasOnGenerate:!!f});const b=e=>e<7?"".concat(e," d\xedas"):e<30?"".concat(Math.round(e/7)," semanas"):"".concat(Math.round(e/30)," meses"),x=(e=>{var t;if(!e)return null;const r=e.activities||[],n=e.milestones||[],a=r.reduce((e,t)=>e+(t.duration||0),0),s=r.filter(e=>"high"===e.priority).length,i=(null===(t=e.criticalPath)||void 0===t?void 0:t.length)||0;return{totalActivities:r.length,totalMilestones:n.length,totalDuration:a,highPriorityActivities:s,criticalPathActivities:i,averageActivityDuration:r.length>0?Math.round(a/r.length):0}})(u);return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ud83d\udcca Vista Previa del Cronograma"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Revisa el cronograma generado por IA antes de aplicarlo a tu proyecto"})]}),!u&&!h&&(0,At.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-8 text-center",children:[(0,At.jsx)("div",{className:"text-6xl mb-4",children:"\ud83e\udd16"}),(0,At.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\xa1Listo para Generar tu Cronograma!"}),(0,At.jsx)("p",{className:"text-gray-600 mb-6",children:"Con la informaci\xf3n proporcionada, nuestro asistente de IA generar\xe1 un cronograma optimizado para tu proyecto."}),(0,At.jsx)("button",{onClick:()=>{u||h||f()},className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all transform hover:scale-105",children:"\ud83d\ude80 Generar Cronograma con IA"})]}),h&&(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-8 text-center",children:[(0,At.jsx)("div",{className:"animate-spin text-6xl mb-4",children:"\ud83e\udd16"}),(0,At.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Generando Cronograma..."}),(0,At.jsx)("p",{className:"text-gray-600 mb-4",children:"Nuestro asistente de IA est\xe1 analizando tu proyecto y generando el cronograma m\xe1s apropiado."}),(0,At.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,At.jsx)("div",{className:"animate-bounce w-2 h-2 bg-blue-600 rounded-full"}),(0,At.jsx)("div",{className:"animate-bounce w-2 h-2 bg-blue-600 rounded-full",style:{animationDelay:"0.1s"}}),(0,At.jsx)("div",{className:"animate-bounce w-2 h-2 bg-blue-600 rounded-full",style:{animationDelay:"0.2s"}})]})]}),u&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udccb"}),"Informaci\xf3n del Proyecto"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Proyecto"}),(0,At.jsx)("p",{className:"text-gray-900 font-semibold",children:d.projectName})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),(0,At.jsx)("p",{className:"text-gray-900",children:d.projectType})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Metodolog\xeda"}),(0,At.jsx)("p",{className:"text-gray-900",children:d.methodology})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Equipo"}),(0,At.jsxs)("p",{className:"text-gray-900",children:[d.teamSize," personas"]})]})]})]}),x&&(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:x.totalActivities}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Actividades"})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:x.totalMilestones}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Hitos"})]}),(0,At.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:b(x.totalDuration)}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Duraci\xf3n Total"})]}),(0,At.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:x.criticalPathActivities}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Ruta Cr\xedtica"})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,At.jsx)("div",{className:"flex border-b border-gray-200",children:[{id:"overview",label:"Resumen",icon:"\ud83d\udcca"},{id:"activities",label:"Actividades",icon:"\ud83d\udccb"},{id:"milestones",label:"Hitos",icon:"\ud83c\udfaf"},{id:"timeline",label:"Cronograma",icon:"\ud83d\udcc5"}].map(e=>(0,At.jsxs)("button",{onClick:()=>m(e.id),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat(p===e.id?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,At.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))}),(0,At.jsxs)("div",{className:"p-6",children:["overview"===p&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Resumen del Cronograma"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("h6",{className:"font-semibold text-gray-700 mb-2",children:"Duraci\xf3n del Proyecto"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b(x.totalDuration)}),(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:[x.averageActivityDuration," d\xedas promedio por actividad"]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("h6",{className:"font-semibold text-gray-700 mb-2",children:"Complejidad"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:(null===(r=u.metadata)||void 0===r?void 0:r.complexity)||"medium"}),(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:[x.highPriorityActivities," actividades de alta prioridad"]})]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Template Utilizado"}),(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,At.jsx)("p",{className:"font-semibold text-blue-800",children:(null===(n=u.metadata)||void 0===n?void 0:n.templateUsed)||"Template Gen\xe9rico de Proyecto"}),(0,At.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:["Generado el ",(y=null===(a=u.metadata)||void 0===a?void 0:a.generatedAt,y?new Date(y).toLocaleDateString("es-ES"):"No definida")]}),!(null!==(s=u.metadata)&&void 0!==s&&s.templateUsed)&&(0,At.jsx)("p",{className:"text-xs text-blue-500 mt-2",children:"\u2139\ufe0f Se utiliz\xf3 un template gen\xe9rico basado en mejores pr\xe1cticas"})]})]})]}),"activities"===p&&(0,At.jsxs)("div",{children:[(0,At.jsxs)("h5",{className:"font-semibold text-gray-800 mb-4",children:["Actividades Generadas (",(null===(i=u.activities)||void 0===i?void 0:i.length)||0,")"]}),(0,At.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:null===(o=u.activities)||void 0===o?void 0:o.map((e,t)=>(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h6",{className:"font-semibold text-gray-800",children:e.name}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,At.jsxs)("span",{children:["\u23f1\ufe0f ",e.duration," d\xedas"]}),(0,At.jsxs)("span",{children:["\ud83d\udcc2 ",e.category]}),(0,At.jsxs)("span",{children:["\ud83c\udfaf ",e.priority]}),(0,At.jsxs)("span",{children:["\ud83d\udc64 ",e.assignedTo]})]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.priority}),e.confidence&&(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Confianza: ",Math.round(100*e.confidence),"%"]})]})]})},e.id))})]}),"milestones"===p&&(0,At.jsxs)("div",{children:[(0,At.jsxs)("h5",{className:"font-semibold text-gray-800 mb-4",children:["Hitos Generados (",(null===(l=u.milestones)||void 0===l?void 0:l.length)||0,")"]}),(0,At.jsx)("div",{className:"space-y-3",children:null===(c=u.milestones)||void 0===c?void 0:c.map((e,t)=>(0,At.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-200",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-3",children:"\ud83c\udfaf"}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h6",{className:"font-semibold text-gray-800",children:e.name}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,At.jsxs)("span",{children:["\ud83d\udcc2 ",e.phase]}),(0,At.jsxs)("span",{children:["\ud83d\udc64 ",e.assignedTo]})]}),e.criteria&&(0,At.jsx)("div",{className:"mt-2 p-2 bg-white rounded border border-gray-200",children:(0,At.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,At.jsx)("strong",{children:"Criterio:"})," ",e.criteria]})})]})]})},e.id))})]}),"timeline"===p&&(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-800 mb-4",children:"Cronograma Temporal"}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("p",{className:"text-gray-600 text-center",children:"\ud83d\udcc5 Vista de cronograma temporal disponible despu\xe9s de aplicar el cronograma"}),(0,At.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Una vez aplicado, podr\xe1s ver el cronograma completo en la vista Gantt"})]})]})]})]}),u.recommendations&&u.recommendations.length>0&&(0,At.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udca1"}),"Recomendaciones de IA"]}),(0,At.jsx)("button",{onClick:()=>v(!g),className:"text-gray-600 hover:text-gray-800 transition-colors",children:g?"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f Ocultar":"\ud83d\udc41\ufe0f Mostrar"})]}),g&&(0,At.jsx)("div",{className:"space-y-3",children:u.recommendations.map((e,t)=>(0,At.jsx)("div",{className:"p-4 rounded-lg border-l-4 ".concat("high"===e.priority?"border-red-500 bg-red-50":"medium"===e.priority?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50"),children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-lg mr-3",children:"high"===e.priority?"\u26a0\ufe0f":"medium"===e.priority?"\ud83d\udca1":"\u2705"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h6",{className:"font-semibold text-gray-800",children:e.title}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.action&&(0,At.jsxs)("p",{className:"text-sm text-gray-700 mt-2 font-medium",children:[(0,At.jsx)("strong",{children:"Acci\xf3n sugerida:"})," ",e.action]})]})]})},t))})]}),(0,At.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-3",children:"\ud83e\udd16"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h6",{className:"font-semibold text-blue-800",children:"Generado por Asistente de IA"}),(0,At.jsx)("p",{className:"text-sm text-blue-600",children:"Este cronograma fue generado autom\xe1ticamente bas\xe1ndose en las mejores pr\xe1cticas y patrones de proyectos similares. Puedes modificarlo despu\xe9s de aplicarlo a tu proyecto."})]})]})})]})]});var y};const YQ=new class{constructor(){this.templateData=null,this.templatePath="./template-compra-equipos.xlsx"}async loadTemplate(){try{console.log("\ud83d\udccb Cargando template de compra de equipos...");const e=[["#","Nombre","Duraci\xf3n","Prioridad","Asignado","Predecesoras","Hitos"],[1,"Aprobaci\xf3n y alta del activo en sistema","22 d\xedas","Alta","Team leader","","No"],[2,"Elaboraci\xf3n de edital t\xe9cnico","5 d\xedas","Alta","Team leader","","No"],[3,"Env\xedo de edital a proveedores para participar en el proyecto","5 d\xedas","Media","Comprador(a)",2,"No"],[4,"Soluci\xf3n de dudas t\xe9cnicas","11 d\xedas","Media","Proveedores",3,"No"],[5,"Selecci\xf3n de proveedor","3 d\xedas","Alta","Comprador(a)",4,"No"],[6,"Preparaci\xf3n de contrato con \xe1rea legal","7 d\xedas","Alta","Comprador(a)",5,"No"],[7,"Alta del proveedor en sistema para pago","10 d\xedas","Alta","Comprador(a)",5,"No"],[8,"Definir el equipo de proyecto","1 d\xeda","Media","Project Manager",5,"No"],[9,"Kick-off meeting con proveedor seleccionado","1 d\xeda","Media","Comprador(a)",8,"No"],[10,"Hito: Orden de compra realizada","0 d\xedas","Alta","Comprador(a)",9,"Si"],[11,"Programaci\xf3n de 1er anticipo","12 d\xedas","Alta","Comprador(a)",10,"No"],[12,"Ajuste del cronograma","1 d\xeda","Media","Project Manager",11,"No"],[13,"HITO: 1er anticipo pagado","0 d\xedas","Alta","Tesorero",11,"Si"],[14,"Estudio de sitio","2 d\xedas","Media","Team leader",9,"No"],[15,"Dise\xf1o de layout y distribuci\xf3n de equipos","5 d\xedas","Media","Team leader",14,"No"],[16,"Especificaciones t\xe9cnicas finales","3 d\xedas","Alta","Team leader",15,"No"],[17,"Ingenier\xeda de servicios (vapor, aire, electricidad)","4 d\xedas","Media","Team leader",16,"No"],[18,"Plan de instalaci\xf3n y cronograma detallado","1 d\xeda","Media","Team leader",17,"No"],[19,"An\xe1lisis de riesgos de importaci\xf3n","1 d\xeda","Media","Project Manager",18,"No"],[20,"HITO: Dise\xf1o Aprobado","0 d\xedas","Alta","Team leader",19,"Si"],[21,"Licitaci\xf3n para instalaci\xf3n de servicios e infraestructura","20 d\xedas","Media","Comprador(a)",20,"No"],[22,"HITO: Orden de compra para servicios e infraestructura","0 d\xedas","Alta","Comprador(a)",21,"Si"],[23,"Gesti\xf3n para pago de 1er anticipo de servicios e infraestructura","12 d\xedas","Alta","Comprador(a)",22,"No"],[24,"HITO: 1er anticipo serv e infraestructura pagado","0 d\xedas","Alta","Tesorero",23,"Si"],[25,"Preparaci\xf3n de cimentaci\xf3n y bases (piso)","21 d\xedas","Media","Proveedores",24,"No"],[26,"Instalaci\xf3n de servicios el\xe9ctricos (220V/440V)","5 d\xedas","Media","Proveedores",25,"No"],[27,"Instalaci\xf3n de l\xedneas de vapor","5 d\xedas","Media","Proveedores",25,"No"],[28,"Preparaci\xf3n de conexiones de aire comprimido","3 d\xedas","Media","Proveedores",27,"No"],[29,"Instalaci\xf3n de sistemas de drenaje","5 d\xedas","Media","Proveedores",26,"No"],[30,"Adecuaciones de espacio y accesos","4 d\xedas","Media","Proveedores",29,"No"],[31,"Instalaci\xf3n de sistemas de seguridad","2 d\xedas","Media","Proveedores",30,"No"],[32,"HITO: Sitio Preparado","0 d\xedas","Alta","Team leader",31,"Si"],[33,"Gesti\xf3n para pago 2o anticipo de serv e infraestructura","12 d\xedas","Alta","Comprador(a)",32,"No"],[34,"HITO: 2o anticipo pagado serv e infraestructura","0 d\xedas","Alta","Tesorero",33,"Si"],[35,"Gesti\xf3n entrada \xfaltima factura de serv e infraestructura","100 d\xedas","Alta","Team leader",32,"No"],[36,"HITO: Factura pagada de serv e infraestructura","0 d\xedas","Alta","Tesorero",35,"Si"],[37,"Inicio de fabricaci\xf3n de maquinaria","1 d\xeda","Alta","Proveedores",13,"No"],[38,"Control de calidad durante fabricaci\xf3n","100 d\xedas","Media","Proveedores",37,"No"],[39,"Inspecci\xf3n intermedia","5 d\xedas","Media","Team leader",38,"No"],[40,"Pruebas de f\xe1brica (FAT)","10 d\xedas","Alta","Project Manager",38,"No"],[41,"Gesti\xf3n de 2o anticipo de pago","12 d\xedas","Alta","Comprador(a)",40,"No"],[42,"HITO: 2o anticipo linea de salsas pagado","0 d\xedas","Alta","Tesorero",41,"Si"],[43,"Preparaci\xf3n para env\xedo y embalaje","10 d\xedas","Media","Proveedores",38,"No"],[44,"HITO: FAT Completado","0 d\xedas","Alta","Project Manager",43,"Si"],[45,"Transporte terrestre a puerto","2 d\xedas","Media","Proveedores",44,"No"],[46,"Tr\xe1mites de exportaci\xf3n en origen","1 d\xeda","Media","Proveedores",45,"No"],[47,"Transporte a\xe9reo Origen - Destino","2 d\xedas","Media","Proveedores",46,"No"],[48,"Tr\xe1mites de importaci\xf3n","5 d\xedas","Media","Proveedores",47,"No"],[49,"Liberaci\xf3n aduanal","5 d\xedas","Media","Proveedores",48,"No"],[50,"Transporte hacia Destino","2 d\xedas","Alta","Proveedores",49,"No"],[51,"HITO: Maquinaria entregada a Destino","0 d\xedas","Alta","Proveedores",50,"Si"],[52,"Recepci\xf3n e inspecci\xf3n de equipos","1 d\xeda","Media","Team leader",50,"No"],[53,"Descarga y posicionamiento","2 d\xedas","Media","Team leader",32,"No"],[54,"Montaje de equipos","3 d\xedas","Media","Team leader",53,"No"],[55,"Conexiones el\xe9ctricas y de control","2 d\xedas","Media","Team leader",54,"No"],[56,"Conexiones de vapor y aire comprimido","2 d\xedas","Media","Team leader",55,"No"],[57,"Integraci\xf3n de maquinaria","2 d\xedas","Media","Team leader",56,"No"],[58,"Instalaci\xf3n de sistemas de seguridad","2 d\xedas","Media","Team leader",57,"No"],[59,"HITO: Instalaci\xf3n de maquinaria completada","0 d\xedas","Alta","Team leader",58,"Si"],[60,"Pruebas de integraci\xf3n","1 d\xeda","Alta","Team leader",59,"No"],[61,"Validaci\xf3n de procesos","1 d\xeda","Alta","Team leader",60,"No"],[62,"Documentaci\xf3n de resultados","0 d\xedas","Alta","Team leader",61,"No"],[63,"HITO: Pruebas Exitosas","0 d\xedas","Alta","Team leader",62,"Si"],[64,"Gesti\xf3n de pago de 3er anticipo","12 d\xedas","Alta","Comprador(a)",63,"No"],[65,"HITO: 3er anticipo pagado","0 d\xedas","Alta","Comprador(a)",64,"Si"],[66,"Capacitaci\xf3n a operadores","2 d\xedas","Media","Proveedores",65,"No"],[67,"Capacitaci\xf3n a personal de mantenimiento","2 d\xedas","Media","Proveedores",63,"No"],[68,"Capacitaci\xf3n en control de calidad","1 d\xeda","Media","Proveedores",63,"No"],[69,"Entrega de manuales y documentaci\xf3n","0 d\xedas","Media","Proveedores",68,"No"],[70,"Certificaci\xf3n final de equipos","1 d\xeda","Media","Project Manager",69,"No"],[71,"HITO: Personal Capacitado","0 d\xedas","Alta","Team leader",70,"Si"],[72,"Evaluaci\xf3n post-implementaci\xf3n","2 d\xedas","Media","Project Manager",71,"No"],[73,"Documentaci\xf3n de lecciones aprendidas","2 d\xedas","Media","Team leader",72,"No"],[74,"Entrega de garant\xedas y seguros","1 d\xeda","Media","Team leader",73,"No"],[75,"Cierre administrativo y financiero","1 d\xeda","Media","Project Manager",73,"No"],[76,"HITO: Proyecto completado","0 d\xedas","Media","Project Manager",75,"Si"]];return this.templateData=this.parseTemplateData(e),console.log("\u2705 Template cargado exitosamente:",this.templateData.activities.length,"actividades"),this.templateData}catch(e){throw console.error("\u274c Error cargando template:",e),e}}parseTemplateData(e){const t=[],r=[];return e.slice(1).forEach((e,n)=>{if(e&&e.length>0&&e[1]&&""!==e[1].trim()){var a;const n={id:e[0],originalId:e[0],name:e[1].trim(),duration:this.parseDuration(e[2]),priority:this.parsePriority(e[3]),responsible:(null===(a=e[4])||void 0===a?void 0:a.trim())||"Sin asignar",predecessor:e[5]||null,isMilestone:"Si"===e[6]||e[1].toLowerCase().includes("hito"),category:this.categorizeActivity(e[1]),phase:this.determinePhase(e[1],e[0]),templateBased:!0,customizable:this.isCustomizable(e[1],e[0])};t.push(n),n.isMilestone&&r.push({id:n.id,name:n.name,phase:n.phase,description:"Hito: ".concat(n.name)})}}),{activities:t,milestones:r,metadata:{totalActivities:t.length,totalMilestones:r.length,templateVersion:"1.0",loadedAt:(new Date).toISOString()}}}parseDuration(e){if(!e)return 1;const t=e.toString().match(/(\d+)/);return t?parseInt(t[1]):1}parsePriority(e){if(!e)return"medium";const t=e.toLowerCase();return t.includes("alta")?"high":t.includes("media")?"medium":t.includes("baja")?"low":"medium"}categorizeActivity(e){const t=e.toLowerCase();return t.includes("hito")||t.includes("aprobaci\xf3n")||t.includes("contrato")?"milestone":t.includes("fabricaci\xf3n")||t.includes("producci\xf3n")||t.includes("manufactura")?"manufacturing":t.includes("importaci\xf3n")||t.includes("aduana")||t.includes("embarque")?"import":t.includes("instalaci\xf3n")||t.includes("montaje")||t.includes("conexi\xf3n")?"installation":t.includes("prueba")||t.includes("test")||t.includes("validaci\xf3n")?"testing":t.includes("capacitaci\xf3n")||t.includes("entrenamiento")?"training":t.includes("infraestructura")||t.includes("servicios")||t.includes("cimentaci\xf3n")?"infrastructure":t.includes("anticipo")||t.includes("pago")?"financial":"general"}determinePhase(e,t){const r=parseInt(t);return r>=1&&r<=13?"Planificaci\xf3n":r>=14&&r<=20?"Dise\xf1o":r>=21&&r<=36?"Infraestructura":r>=37&&r<=44?"Fabricaci\xf3n":r>=45&&r<=51?"Importaci\xf3n":r>=52&&r<=63?"Instalaci\xf3n":r>=64&&r<=76?"Cierre":"General"}isCustomizable(e,t){const r=e.toLowerCase(),n=parseInt(t);return 38===n&&r.includes("fabricaci\xf3n")?{type:"manufacturing_time",field:"duration"}:11===n&&r.includes("anticipo")||41===n&&r.includes("anticipo")||64===n&&r.includes("anticipo")?{type:"payment_timing",field:"predecessor"}:n>=45&&n<=50?{type:"conditional",field:"include",condition:"isForeignEquipment"}:n>=25&&n<=31?{type:"conditional",field:"include",condition:"requiresInfrastructure"}:null}mapTeamRoles(e,t){const r={"Team leader":["team_lead","engineer","analyst","technician"],"Comprador(a)":["buyer","specialist","analyst"],"Project Manager":["project_manager"],Proveedores:["external"],Tesorero:["other","specialist"]}[e]||["other"];for(const n of r){const e=t.find(e=>e.role===n);if(e)return{assignedTo:e.name,role:e.role,experience:e.experience}}if(t.length>0){const e=t[0];return{assignedTo:e.name,role:e.role,experience:e.experience}}return{assignedTo:"Sin asignar",role:"other",experience:"intermediate"}}customizeActivities(e,t){return console.log("\ud83d\udd27 Personalizando actividades del template..."),e.map(e=>{var r,n;const a=(0,s.A)({},e);if(t.teamMembers&&t.teamMembers.length>0){const r=this.mapTeamRoles(e.responsible,t.teamMembers);a.assignedTo=r.assignedTo,a.assignedRole=r.role,a.assignedExperience=r.experience}else a.assignedTo=e.responsible;if("manufacturing_time"===(null===(r=e.customizable)||void 0===r?void 0:r.type)&&t.deliveryTime&&t.deliveryTimeUnit){const r=this.convertToDays(t.deliveryTime,t.deliveryTimeUnit);a.duration=r,console.log('\ud83d\udd27 Ajustando "'.concat(e.name,'": ').concat(e.duration,"d \u2192 ").concat(r,"d (tiempo de entrega)"))}if("payment_timing"===(null===(n=e.customizable)||void 0===n?void 0:n.type)&&t.advancePayments&&t.advancePayments.length>0){const r=this.getPaymentTimingFromActivity(e.originalId),n=t.advancePayments.find(e=>e.timing===r);n&&console.log('\ud83d\udcb0 Ajustando timing de "'.concat(e.name,'" seg\xfan configuraci\xf3n: ').concat(n.timing))}return a})}getPaymentTimingFromActivity(e){switch(parseInt(e)){case 11:default:return"order";case 41:return"shipping";case 64:return"delivery"}}convertToDays(e,t){switch(t){case"days":default:return e;case"weeks":return 7*e;case"months":return 30*e}}filterConditionalActivities(e,t){return console.log("\ud83d\udd0d Filtrando actividades condicionales..."),e.filter(e=>{if(!e.customizable)return!0;if("conditional"===e.customizable.type){const r=e.customizable.condition;if("isForeignEquipment"===r){const r=!0===t.isForeignEquipment;return console.log("".concat(r?"\u2705":"\u274c"," ").concat(r?"Incluyendo":"Excluyendo"," actividad de importaci\xf3n: ").concat(e.name)),r}if("requiresInfrastructure"===r){const r=!0===t.requiresInfrastructure;return console.log("".concat(r?"\u2705":"\u274c"," ").concat(r?"Incluyendo":"Excluyendo"," actividad de infraestructura: ").concat(e.name)),r}}return!0})}async generateTemplateBasedSchedule(e){try{var t;console.log("\ud83d\ude80 TEMPLATE-BASED SCHEDULER: Iniciando generaci\xf3n..."),console.log("\ud83d\udccb Wizard Data:",e),this.templateData||(console.log("\ud83d\udccb Cargando template..."),await this.loadTemplate()),console.log("\ud83d\udd27 Personalizando actividades...");let r=this.customizeActivities(this.templateData.activities,e);console.log("\ud83d\udd27 Actividades personalizadas:",r.length),console.log("\ud83d\udd27 Filtrando actividades condicionales..."),r=this.filterConditionalActivities(r,e),console.log("\ud83d\udd27 Actividades filtradas:",r.length),console.log("\ud83d\udd27 Filtrando hitos...");const n=this.templateData.milestones.filter(e=>{const t=r.find(t=>t.id===e.id);return void 0!==t});console.log("\ud83d\udd27 Hitos filtrados:",n.length),console.log("\ud83d\udd27 Calculando ruta cr\xedtica y dependencias...");const a=this.calculateCriticalPath(r),s=a.activities,i=a.criticalPath;console.log("\ud83d\udd27 Actividades con dependencias:",s.length);const o={activities:s,milestones:n,criticalPath:i,recommendations:this.generateRecommendations(e,s),metadata:{templateUsed:"Template compra de equipos.xlsx",templateId:"template-compra-equipos-v1",generatedAt:(new Date).toISOString(),wizardData:e,estimatedDuration:this.calculateTotalDuration(r),complexity:this.assessComplexity(e,r),customizationApplied:{manufacturingTime:e.deliveryTime?"".concat(e.deliveryTime," ").concat(e.deliveryTimeUnit):"default",advancePayments:(null===(t=e.advancePayments)||void 0===t?void 0:t.length)||0,infrastructureIncluded:e.requiresInfrastructure||!1,importIncluded:e.isForeignEquipment||!1}}};return console.log("\u2705 TEMPLATE-BASED SCHEDULER: Cronograma generado exitosamente"),console.log("\ud83d\udcca Actividades: ".concat(r.length,", Hitos: ").concat(n.length)),console.log("\ud83d\udcc5 Primeras 5 actividades con fechas:"),s.slice(0,5).forEach((e,t)=>{console.log("  ".concat(t+1,". ").concat(e.name,": ").concat(e.startDate," - ").concat(e.endDate))}),o}catch(r){throw console.error("\u274c TEMPLATE-BASED SCHEDULER: Error generando cronograma:",r),r}}calculateCriticalPath(e){const t=this.applyDependencies(e),r=this.calculateDates(t);return{activities:r,criticalPath:this.identifyCriticalPath(r)}}applyDependencies(e){console.log("\ud83d\udd17 Aplicando dependencias del template...");const t=e.map(t=>{const r=[];if(t.predecessor&&""!==t.predecessor){const n=e.find(e=>e.originalId===t.predecessor);n?(r.push(n.id),console.log("\ud83d\udd17 ".concat(t.name," (ID: ").concat(t.id,") depende de ").concat(n.name," (ID: ").concat(n.id,")"))):console.warn("\u26a0\ufe0f Predecesora ".concat(t.predecessor," no encontrada para ").concat(t.name))}return(0,s.A)((0,s.A)({},t),{},{dependencies:r})});console.log("\ud83d\udd0d Verificando dependencias circulares...");return this.checkCircularDependencies(t)?console.error("\u274c Se detectaron dependencias circulares en el template!"):console.log("\u2705 No se detectaron dependencias circulares"),t}checkCircularDependencies(e){const t=new Set,r=new Set,n=a=>{if(r.has(a))return console.error("\u274c Dependencia circular detectada: ".concat(a)),!0;if(t.has(a))return!1;t.add(a),r.add(a);const s=e.find(e=>e.id===a);if(s)for(const e of s.dependencies)if(n(e))return!0;return r.delete(a),!1};for(const a of e)if(!t.has(a.id)&&n(a.id))return!0;return!1}calculateDates(e){console.log("\ud83d\udcc5 Calculando fechas basadas en dependencias (algoritmo robusto)...");const t=[...e],r=new Date("2025-09-28");t.forEach(e=>{e.startDate=null,e.endDate=null});const n=new Map;t.forEach(e=>{n.set(e.id,e)});const a=e=>{if(e.startDate&&e.endDate)return;console.log("\ud83d\udd0d Calculando: ".concat(e.name," (ID: ").concat(e.originalId,")"));let t=new Date(r);if(e.dependencies.length>0){console.log("\ud83d\udd17 Dependencias de ".concat(e.name,":"),e.dependencies),e.dependencies.forEach(e=>{const t=n.get(e);t&&a(t)});let r=null;e.dependencies.forEach(e=>{const t=n.get(e);t&&t.endDate&&(console.log("  \ud83d\udcc5 Dependencia ".concat(t.name," termina: ").concat(t.endDate.toLocaleDateString())),(!r||t.endDate>r)&&(r=new Date(t.endDate)))}),r&&(t=new Date(r),t.setDate(t.getDate()+1),console.log("\u2705 ".concat(e.name," inicia despu\xe9s de dependencias: ").concat(t.toLocaleDateString())))}else console.log("\ud83d\udcc5 ".concat(e.name," sin dependencias, inicia en: ").concat(t.toLocaleDateString()));const s=new Date(t);s.setDate(s.getDate()+e.duration-1),e.startDate=t,e.endDate=s,e.earlyStart=t,e.earlyFinish=s,e.templateCalculated=!0,console.log("\ud83d\udcc5 ".concat(e.name,": ").concat(t.toLocaleDateString()," - ").concat(s.toLocaleDateString()," (").concat(e.duration," d\xedas)"))},s=[...t].sort((e,t)=>e.originalId-t.originalId);return s.forEach(e=>{a(e)}),console.log("\ud83d\udd0d Verificando dependencias..."),t.forEach(e=>{e.dependencies.length>0&&e.dependencies.forEach(t=>{const r=n.get(t);r&&r.endDate&&e.startDate&&(e.startDate<=r.endDate?console.error("\u274c ERROR: ".concat(e.name," inicia ").concat(e.startDate.toLocaleDateString()," pero su dependencia ").concat(r.name," termina ").concat(r.endDate.toLocaleDateString())):console.log("\u2705 OK: ".concat(e.name," inicia ").concat(e.startDate.toLocaleDateString()," despu\xe9s de ").concat(r.name," que termina ").concat(r.endDate.toLocaleDateString())))})}),t}topologicalSort(e){console.log("\ud83d\udd04 Iniciando ordenamiento topol\xf3gico...");const t=new Set,r=new Set,n=[],a=s=>{if(r.has(s.id))throw new Error("Dependencia circular detectada");t.has(s.id)||(r.add(s.id),console.log("\ud83d\udd0d Visitando: ".concat(s.name," (ID: ").concat(s.id,")")),s.dependencies.forEach(t=>{const r=e.find(e=>e.id===t);r&&(console.log("  \u21b3 Dependencia: ".concat(r.name," (ID: ").concat(t,")")),a(r))}),r.delete(s.id),t.add(s.id),n.push(s),console.log("\u2705 Agregado a resultado: ".concat(s.name)))},s=[...e].sort((e,t)=>e.originalId-t.originalId);return s.forEach(e=>{t.has(e.id)||a(e)}),console.log("\ud83d\udd04 Ordenamiento topol\xf3gico completado. Orden final:"),n.forEach((e,t)=>{console.log("  ".concat(t+1,". ").concat(e.name," (ID: ").concat(e.id,")"))}),n}identifyCriticalPath(e){return e.filter(e=>"high"===e.priority||e.isMilestone)}generateRecommendations(e,t){const r=[];return e.isForeignEquipment&&r.push({type:"info",title:"Equipo Extranjero",message:"Se incluyeron actividades de importaci\xf3n y aduanas en el cronograma."}),e.requiresInfrastructure&&r.push({type:"info",title:"Infraestructura Requerida",message:"Se incluyeron actividades de preparaci\xf3n de sitio e infraestructura."}),e.advancePayments&&e.advancePayments.length>0&&r.push({type:"financial",title:"Anticipos Configurados",message:"Se configuraron ".concat(e.advancePayments.length," anticipos seg\xfan tus especificaciones.")}),r}calculateTotalDuration(e){return e.reduce((e,t)=>e+t.duration,0)}assessComplexity(e,t){let r="medium";return t.length>50?r="high":t.length<30&&(r="low"),e.isForeignEquipment&&e.requiresInfrastructure&&(r="high"),r}},XQ=YQ;const JQ=new class{constructor(){this.supabase=null,this.organizationId=null,this.currentUser=null}async initialize(e,t,r){this.supabase=e,this.organizationId=t,this.currentUser=r,console.log("\ud83e\udd16 SmartSchedulerService inicializado:",{organizationId:t,userId:null===r||void 0===r?void 0:r.id})}async generateSmartSchedule(e){try{var t;if(console.log("\ud83e\udd16 AISchedulerService: Generando cronograma inteligente:",e),console.log("\ud83d\udd0d AISchedulerService: projectType =",e.projectType),console.log('\ud83d\udd0d AISchedulerService: projectType === "equipment_installation"?',"equipment_installation"===e.projectType),"equipment_installation"===e.projectType)return console.log("\ud83c\udfed AISchedulerService: Proyecto de compra de equipos detectado - usando template real"),await XQ.generateTemplateBasedSchedule(e);const r=await this.getBaseTemplate(e);if(console.log("\ud83d\udccb Template seleccionado:",null===r||void 0===r?void 0:r.name),!r)throw new Error("No se pudo seleccionar un template v\xe1lido");console.log("\ud83d\udd0d Template antes de ajustar actividades:",{hasTemplateData:!!r.template_data,hasActivities:!!r.activities,activitiesLength:(null===(t=r.activities)||void 0===t?void 0:t.length)||0,templateKeys:Object.keys(r)}),console.log("\ud83d\udccb Usando actividades del template base");const n=await this.extractActivitiesFromTemplate(r,e),a=await this.adjustActivitiesByContext(r,e,n);console.log("\u2699\ufe0f Actividades ajustadas:",a.length);const s=await this.generateSmartMilestones(a,e);console.log("\ud83c\udfaf Hitos generados:",s.length);const i=this.calculateCriticalPath(a);console.log("\ud83d\udd17 Ruta cr\xedtica calculada:",i.length,"actividades");const o=this.generateRecommendations(e,a);console.log("\ud83d\udca1 Recomendaciones generadas:",o.length);let l=a;"equipment_installation"===e.projectType&&(l=this.sortMachineryActivities(a,e),console.log("\ud83d\udccb Actividades ordenadas l\xf3gicamente"));const c={activities:l,milestones:s,criticalPath:i,recommendations:o,metadata:{templateUsed:null===r||void 0===r?void 0:r.name,templateId:null===r||void 0===r?void 0:r.id,generatedAt:(new Date).toISOString(),wizardData:e,estimatedDuration:this.calculateTotalDuration(l),complexity:this.assessComplexity(e,l)}};return await this.saveGenerationHistory(e,c),console.log("\u2705 Cronograma generado exitosamente"),c}catch(r){throw console.error("\u274c Error generando cronograma:",r),new Error("Error generando cronograma: ".concat(r.message))}}async getBaseTemplate(e){try{const{projectType:t,industry:r,methodology:n}=e;if(!this.supabase){console.log("\ud83d\udccb Usando template gen\xe9rico (Sin Supabase)");const t={id:"generic-template",name:"Template Gen\xe9rico de Proyecto",description:"Template gen\xe9rico basado en mejores pr\xe1cticas de gesti\xf3n de proyectos",project_type:e.projectType||"general",industry:e.industry||"general",methodology:e.methodology||"waterfall",template_data:this.getGenericTemplateData(e)};return t.template_data&&t.template_data.phases&&(t.activities=this.extractActivitiesFromPhases(t.template_data.phases),t.milestones=this.extractMilestonesFromPhases(t.template_data.phases)),t}let a=this.supabase.from("schedule_templates").select("*");a=this.organizationId?a.or("organization_id.eq.".concat(this.organizationId,",organization_id.is.null")):a.is("organization_id",null),t&&(a=a.eq("project_type",t)),r&&(a=a.eq("industry",r)),n&&(a=a.eq("methodology",n));const{data:s,error:i}=await a;if(i)throw console.error("Error obteniendo templates:",i),i;if(console.log("\ud83d\udccb Templates encontrados:",(null===s||void 0===s?void 0:s.length)||0),!s||0===s.length){console.warn("No se encontraron templates espec\xedficos, usando template gen\xe9rico");let t=this.supabase.from("schedule_templates").select("*");t=this.organizationId?t.or("organization_id.eq.".concat(this.organizationId,",organization_id.is.null")):t.is("organization_id",null);const{data:r}=await t.limit(1);if(null!==r&&void 0!==r&&r[0])return r[0];console.log("\ud83d\udccb Creando template gen\xe9rico para el proyecto");const n={id:"generic-template",name:"Template Gen\xe9rico de Proyecto",description:"Template gen\xe9rico basado en mejores pr\xe1cticas de gesti\xf3n de proyectos",project_type:e.projectType||"general",industry:e.industry||"general",methodology:e.methodology||"waterfall",template_data:this.getGenericTemplateData(e)};return n.template_data&&n.template_data.phases&&(n.activities=this.extractActivitiesFromPhases(n.template_data.phases),n.milestones=this.extractMilestonesFromPhases(n.template_data.phases)),n}const o=this.rankTemplates(s,e)[0];return o&&o.template_data&&o.template_data.phases&&(o.activities=this.extractActivitiesFromPhases(o.template_data.phases),o.milestones=this.extractMilestonesFromPhases(o.template_data.phases)),o}catch(t){return console.error("Error obteniendo template base:",t),null}}async adjustActivitiesByContext(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return console.warn("Template no v\xe1lido para ajustar actividades"),[];let n=r;if(n||(n=e.activities,!n&&e.template_data&&e.template_data.phases&&(n=this.extractActivitiesFromPhases(e.template_data.phases))),!n||0===n.length)return console.warn("No hay actividades disponibles en el template"),[];const a=[];let s=1;const i=this.calculateTeamSizeMultiplier(t.teamSize),o=this.calculateExperienceMultiplier(t.teamExperience);return n.forEach((e,r)=>{let n=e.duration;n=Math.ceil(n*i*o),"equipment_installation"===t.projectType&&(n=this.adjustMachineryActivityDuration(e,n,t)),"low"===t.riskTolerance?n=Math.ceil(1.2*n):"high"===t.riskTolerance&&(n=Math.ceil(.8*n));const l={id:"ai-".concat(s++),name:e.name,description:this.generateActivityDescription(e,t),duration:Math.max(1,n),category:e.category||"execution",phase:e.phase||"General",phaseIndex:e.phaseIndex||0,activityIndex:r,isMilestone:e.isMilestone||!1,priority:this.determinePriority(e,t),assignedTo:this.suggestAssignee(e,t),dependencies:e.dependencies||[],estimatedCost:this.estimateCost(e,t),requiredSkills:e.requiredSkills||[],parallel:e.parallel||!1,generatedBy:"ai",confidence:this.calculateConfidence(e,t)};a.push(l)}),a.forEach((e,t)=>{e.dependencies&&e.dependencies.length>0?e.dependencies=this.adjustDependencies(e.dependencies,a):t>0&&(e.dependencies=[a[t-1].id],console.log("\ud83d\udd17 Agregando dependencia secuencial: ".concat(e.name," depende de ").concat(a[t-1].name)))}),a}async generateSmartMilestones(e,t){const r=[];let n=1;const a={};e.forEach(e=>{a[e.phase]||(a[e.phase]=[]),a[e.phase].push(e)}),Object.entries(a).forEach(e=>{let[a,s]=e;const i={id:"milestone-".concat(n++),name:"HITO: ".concat(a," Completada"),description:"Completar todas las actividades de la fase: ".concat(a),phase:a,isMilestone:!0,duration:0,startDate:null,endDate:null,progress:0,status:"pending",priority:"high",assignedTo:t.projectManager||"Pendiente",dependencies:[],criteria:this.generateMilestoneCriteria(a,s),generatedBy:"ai",confidence:.9};r.push(i)});const s=this.generateSpecificMilestones(t,e);return r.push(...s),r}calculateCriticalPath(e){return e.filter(e=>"high"===e.priority||e.dependencies.length>2||e.estimatedCost>1e4).map(e=>e.id)}generateRecommendations(e,t){const r=[];e.teamSize<3&&r.push({type:"team",priority:"high",title:"Equipo Peque\xf1o",description:"Con un equipo peque\xf1o, considera reducir el paralelismo de actividades para evitar sobrecarga.",action:"Revisar actividades paralelas y secuencializar si es necesario"}),"junior"===e.teamExperience&&r.push({type:"experience",priority:"medium",title:"Equipo Junior",description:"Equipo con poca experiencia. Considera agregar tiempo de capacitaci\xf3n y mentor\xeda.",action:"Agregar actividades de capacitaci\xf3n y revisi\xf3n adicional"});this.calculateTotalDuration(t)>180&&r.push({type:"duration",priority:"high",title:"Proyecto de Larga Duraci\xf3n",description:"Proyecto de m\xe1s de 6 meses. Considera dividir en fases m\xe1s peque\xf1as.",action:"Implementar hitos de control mensuales"});const n=t.filter(e=>"high"===e.priority).length;return n>.3*t.length&&r.push({type:"complexity",priority:"medium",title:"Alta Complejidad",description:"Muchas actividades de alta complejidad. Considera agregar buffers de tiempo.",action:"Agregar 15% de buffer en estimaciones de tiempo"}),r}async saveGenerationHistory(e,t){try{const r={project_id:e.projectId,template_id:t.metadata.templateId||null,input_data:e,generated_schedule:t,created_by:this.currentUser.id,organization_id:this.organizationId},{error:n}=await this.supabase.from("ai_schedule_generations").insert(r);n?console.error("Error guardando historial de generaci\xf3n:",n):console.log("\u2705 Historial de generaci\xf3n guardado")}catch(r){console.error("Error guardando historial:",r)}}calculateTeamSizeMultiplier(e){return e<=2?1.3:e<=5?1:e<=8?.9:.8}calculateExperienceMultiplier(e){switch(e){case"junior":return 1.4;case"intermediate":return 1.1;case"senior":return.9;case"expert":return.8;default:return 1}}generateActivityDescription(e,t){const r=e.description||"Ejecutar ".concat(e.name);return t.projectDescription?"".concat(r," para el proyecto: ").concat(t.projectDescription):r}determinePriority(e,t){return"planning"===e.category||"testing"===e.category||e.isMilestone?"high":(e.parallel,"medium")}suggestAssignee(e,t){if(t.projectManager)return t.projectManager;switch(e.category){case"planning":case"delivery":return"Project Manager";case"execution":return"Team Lead";case"testing":return"QA Lead";default:return"Pendiente"}}adjustDependencies(e,t){if(!e||!Array.isArray(e))return console.log("\ud83d\udd17 Dependencias no definidas o inv\xe1lidas, usando array vac\xedo"),[];const r=e.map(e=>{if("string"===typeof e&&e.startsWith("activity-"))return e;if("number"===typeof e)return e;const r=t.find(t=>t.name===e);return r?(console.log('\ud83d\udd17 Mapeando dependencia "'.concat(e,'" a ID "').concat(r.id,'"')),r.id):(console.warn('\u26a0\ufe0f Dependencia "'.concat(e,'" no encontrada en actividades existentes')),null)}).filter(e=>null!==e);return console.log("\ud83d\udd17 Dependencias ajustadas: [".concat(r.join(", "),"]")),r}estimateCost(e,t){return(e.estimatedCost||1e3)*(t.teamSize||1)*(e.duration||1)*.1}calculateConfidence(e,t){let r=.7;return t.projectType&&t.industry&&(r+=.2),"senior"!==t.teamExperience&&"expert"!==t.teamExperience||(r+=.1),Math.min(1,r)}generateMilestoneCriteria(e,t){const r=t.map(e=>e.name).join(", ");return"Completar exitosamente: ".concat(r)}generateSpecificMilestones(e,t){const r=[];let n=1e3;switch(e.projectType){case"equipment_installation":r.push({id:"milestone-".concat(n++),name:"HITO: Equipo Recibido y Verificado",description:"Equipo recibido, inspeccionado y verificado seg\xfan especificaciones",isMilestone:!0,duration:0,progress:0,status:"pending",priority:"high",assignedTo:"Quality Inspector",criteria:"Equipo recibido, inspecci\xf3n de calidad aprobada, documentaci\xf3n verificada",generatedBy:"ai",confidence:.9});break;case"development":r.push({id:"milestone-".concat(n++),name:"HITO: C\xf3digo en Producci\xf3n",description:"C\xf3digo desplegado y funcionando en ambiente de producci\xf3n",isMilestone:!0,duration:0,progress:0,status:"pending",priority:"high",assignedTo:"DevOps Lead",criteria:"Deployment exitoso, pruebas de humo pasando, monitoreo activo",generatedBy:"ai",confidence:.9})}return r}calculateTotalDuration(e){return e.reduce((e,t)=>e+(t.duration||0),0)}assessComplexity(e,t){let r="medium";const n=this.calculateTotalDuration(t),a=t.filter(e=>"high"===e.priority).length,s=e.teamSize||1;return n>120||a>5||s<3?r="high":n<30&&a<3&&s>=5&&(r="low"),r}rankTemplates(e,t){return e.sort((e,r)=>{let n=0,a=0;return e.project_type===t.projectType&&(n+=3),r.project_type===t.projectType&&(a+=3),e.industry===t.industry&&(n+=2),r.industry===t.industry&&(a+=2),e.methodology===t.methodology&&(n+=1),r.methodology===t.methodology&&(a+=1),a-n})}getGenericTemplateData(e){const{projectType:t="general",teamSize:r=5}=e,n={manufacturing:[{name:"Planificaci\xf3n",activities:[{name:"Definici\xf3n de requerimientos",duration:5,category:"planning"},{name:"Dise\xf1o conceptual",duration:10,category:"design"},{name:"Planificaci\xf3n de recursos",duration:3,category:"planning"}]},{name:"Dise\xf1o y Desarrollo",activities:[{name:"Dise\xf1o detallado",duration:15,category:"design"},{name:"Especificaciones t\xe9cnicas",duration:8,category:"design"},{name:"Prototipo",duration:20,category:"development"}]},{name:"Implementaci\xf3n",activities:[{name:"Compra e instalaci\xf3n de maquinas y equipos",duration:30,category:"procurement",isMilestone:!0},{name:"Instalaci\xf3n y configuraci\xf3n",duration:15,category:"implementation"},{name:"Pruebas de funcionamiento",duration:10,category:"testing"}]},{name:"Cierre",activities:[{name:"Capacitaci\xf3n del personal",duration:5,category:"training"},{name:"Documentaci\xf3n final",duration:3,category:"documentation"},{name:"Entrega del proyecto",duration:2,category:"delivery",isMilestone:!0}]}],general:[{name:"Inicio",activities:[{name:"Kick-off del proyecto",duration:1,category:"planning",isMilestone:!0},{name:"Definici\xf3n de alcance",duration:5,category:"planning"},{name:"Planificaci\xf3n inicial",duration:7,category:"planning"}]},{name:"Ejecuci\xf3n",activities:[{name:"Desarrollo de actividades principales",duration:20,category:"execution"},{name:"Seguimiento y control",duration:15,category:"monitoring"},{name:"Gesti\xf3n de cambios",duration:8,category:"management"}]},{name:"Cierre",activities:[{name:"Pruebas finales",duration:5,category:"testing"},{name:"Entrega del proyecto",duration:3,category:"delivery",isMilestone:!0}]}]};return{phases:n[t]||n.general,estimatedDuration:60,complexity:"medium",riskLevel:"medium"}}async getAvailableTemplates(){try{let e=this.supabase.from("schedule_templates").select("*");e=this.organizationId?e.or("organization_id.eq.".concat(this.organizationId,",organization_id.is.null")):e.is("organization_id",null);const{data:t,error:r}=await e.order("name");return r?(console.error("Error obteniendo templates:",r),[]):t||[]}catch(e){return console.error("Error obteniendo templates:",e),[]}}async getGenerationHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=this.supabase.from("ai_schedule_generations").select("*").eq("organization_id",this.organizationId).order("created_at",{ascending:!1});e&&(t=t.eq("project_id",e));const{data:r,error:n}=await t;return n?(console.error("Error obteniendo historial:",n),[]):r||[]}catch(t){return console.error("Error obteniendo historial:",t),[]}}async provideFeedback(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const{error:n}=await this.supabase.from("ai_schedule_generations").update({feedback_score:t,feedback_comments:r,updated_at:(new Date).toISOString()}).eq("id",e).eq("organization_id",this.organizationId);return n?(console.error("Error guardando feedback:",n),!1):(console.log("\u2705 Feedback guardado exitosamente"),!0)}catch(n){return console.error("Error guardando feedback:",n),!1}}extractActivitiesFromPhases(e){if(!e||!Array.isArray(e))return[];const t=[];let r=1;return e.forEach((e,n)=>{e.activities&&Array.isArray(e.activities)&&e.activities.forEach((a,s)=>{t.push({id:"activity-".concat(r),name:a.name,duration:a.duration||1,category:a.category||"general",phase:e.name,phaseIndex:n,activityIndex:s,isMilestone:a.isMilestone||!1,priority:a.priority||"medium",dependencies:a.dependencies||[]}),r++})}),t.forEach((e,r)=>{e.dependencies&&0!==e.dependencies.length||(e.dependencies=0===r?[]:[t[r-1].id])}),console.log("\ud83d\udccb Actividades extra\xeddas de fases: ".concat(t.length)),console.log("\ud83d\udd17 Dependencias generadas autom\xe1ticamente para ".concat(t.length," actividades")),t}async extractActivitiesFromTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];if(e.activities&&e.activities.length>0)r=e.activities;else{if(!e.template_data||!e.template_data.phases)return console.warn("No se pudieron extraer actividades del template"),[];r=this.extractActivitiesFromPhases(e.template_data.phases)}return t&&"equipment_installation"===t.projectType&&(r=this.addMachinerySpecificActivities(r,t)),r}extractMilestonesFromPhases(e){if(!e||!Array.isArray(e))return[];const t=[];let r=1;return e.forEach((e,n)=>{e.activities&&Array.isArray(e.activities)&&e.activities.forEach((a,s)=>{a.isMilestone&&(t.push({id:"milestone-".concat(r),name:a.name,phase:e.name,phaseIndex:n,activityIndex:s,description:a.description||"Hito: ".concat(a.name)}),r++)})}),console.log("\ud83d\udccb Hitos extra\xeddos de fases: ".concat(t.length)),t}adjustMachineryActivityDuration(e,t,r){const n=e.name.toLowerCase();let a=t;if(n.includes("fabricaci\xf3n")||n.includes("manufactura")||n.includes("producci\xf3n")||n.includes("manufacturing"))if(r.deliveryTime&&r.deliveryTimeUnit){a=this.convertToDays(r.deliveryTime,r.deliveryTimeUnit),console.log('\ud83d\udd27 Ajustando "'.concat(e.name,'": ').concat(t,"d \u2192 ").concat(a,"d (tiempo de entrega: ").concat(r.deliveryTime," ").concat(r.deliveryTimeUnit,")"))}else console.log('\u26a0\ufe0f No se pudo ajustar "'.concat(e.name,'": deliveryTime=').concat(r.deliveryTime,", deliveryTimeUnit=").concat(r.deliveryTimeUnit));return(n.includes("aprobaci\xf3n")||n.includes("aprobaci\xf3n de compras")||n.includes("autorizaci\xf3n")||n.includes("firma de contratos"))&&(a=Math.min(a,5),console.log('\ud83d\udccb Ajustando "'.concat(e.name,'": ').concat(t,"d \u2192 ").concat(a,"d (actividad administrativa)"))),r.isForeignEquipment&&(n.includes("importaci\xf3n")||n.includes("aduana")||n.includes("embarque")||n.includes("transporte"))&&(a=Math.max(a,15),console.log('\ud83c\udf0d Ajustando "'.concat(e.name,'": ').concat(t,"d \u2192 ").concat(a,"d (importaci\xf3n)"))),r.requiresInfrastructure&&(n.includes("instalaci\xf3n")||n.includes("infraestructura")||n.includes("preparaci\xf3n")||n.includes("cimentaci\xf3n"))&&(a=Math.max(a,10),console.log('\ud83d\udd27 Ajustando "'.concat(e.name,'": ').concat(t,"d \u2192 ").concat(a,"d (infraestructura)"))),a}convertToDays(e,t){switch(t){case"days":default:return e;case"weeks":return 7*e;case"months":return 30*e}}addMachinerySpecificActivities(e,t){const r=[...e];let n=e.length+1;if(t.isForeignEquipment){const e=[{id:"activity-".concat(n++),name:"Proceso de importaci\xf3n y aduanas",duration:15,category:"procurement",phase:"Adquisici\xf3n",isMilestone:!1,priority:"high"},{id:"activity-".concat(n++),name:"Embarque y transporte internacional",duration:Math.max(10,this.convertToDays(t.deliveryTime||4,t.deliveryTimeUnit||"weeks")/3),category:"procurement",phase:"Adquisici\xf3n",isMilestone:!1,priority:"high"}];r.push(...e),console.log("\ud83c\udf0d Agregadas ".concat(e.length," actividades de importaci\xf3n"))}if(t.requiresInfrastructure){const e=[{id:"activity-".concat(n++),name:"Preparaci\xf3n del sitio de instalaci\xf3n",duration:10,category:"preparation",phase:"Implementaci\xf3n",isMilestone:!1,priority:"high"},{id:"activity-".concat(n++),name:"Modificaciones de infraestructura el\xe9ctrica",duration:8,category:"infrastructure",phase:"Implementaci\xf3n",isMilestone:!1,priority:"high"},{id:"activity-".concat(n++),name:"Cimentaci\xf3n y bases para equipos",duration:12,category:"infrastructure",phase:"Implementaci\xf3n",isMilestone:!1,priority:"high"}];r.push(...e),console.log("\ud83d\udd27 Agregadas ".concat(e.length," actividades de infraestructura"))}if(t.advancePayments&&t.advancePayments.length>0){const e=t.advancePayments.map((e,t)=>({id:"activity-".concat(n++),name:"".concat(e.percentage,"% - ").concat(e.description),duration:2,category:"financial",phase:this.getPaymentPhase(e.timing),isMilestone:!0,priority:"high",paymentInfo:{percentage:e.percentage,timing:e.timing,description:e.description}}));r.push(...e),console.log("\ud83d\udcb0 Agregadas ".concat(e.length," actividades de anticipos"))}return console.log("\ud83d\udcca Total actividades despu\xe9s de agregar espec\xedficas de maquinaria: ".concat(r.length)),r}getPaymentPhase(e){switch(e){case"order":default:return"Planificaci\xf3n";case"production":case"shipping":return"Adquisici\xf3n";case"delivery":case"installation":return"Implementaci\xf3n";case"performance":return"Cierre"}}getPaymentTimingOrder(e){switch(e){case"order":return 1;case"production":return 2;case"shipping":return 3;case"delivery":return 4;case"installation":return 5;case"performance":return 6;default:return 999}}sortMachineryActivities(e,t){console.log("\ud83d\udd04 Iniciando ordenamiento de actividades:",e.length);const r=e=>{const t=e.name.toLowerCase();if(t.includes("an\xe1lisis")||t.includes("necesidades")||t.includes("requerimientos"))return 100;if(e.paymentInfo)switch(e.paymentInfo.timing){case"order":default:return 200;case"production":return 800;case"shipping":return 900;case"delivery":return 1200;case"installation":return 1300;case"performance":return 1400}return t.includes("aprobaci\xf3n")||t.includes("autorizaci\xf3n")||t.includes("planificaci\xf3n")?300:t.includes("b\xfasqueda")||t.includes("proveedor")||t.includes("cotizaci\xf3n")?400:t.includes("compra")||t.includes("contrato")||t.includes("firma")?500:t.includes("fabricaci\xf3n")||t.includes("producci\xf3n")||t.includes("manufactura")?600:t.includes("importaci\xf3n")||t.includes("aduana")||t.includes("embarque")?700:t.includes("infraestructura")||t.includes("preparaci\xf3n")||t.includes("sitio")?1e3:t.includes("instalaci\xf3n")||t.includes("montaje")||t.includes("configuraci\xf3n")?1100:t.includes("capacitaci\xf3n")||t.includes("documentaci\xf3n")||t.includes("garant\xeda")||t.includes("soporte")?1500:t.includes("entrega")?1250:100*this.getPhaseOrder(e.phase)},n=e.sort((e,t)=>{const n=r(e),a=r(t);return console.log("\ud83d\udccb Ordenando: ".concat(e.name," (").concat(n,") vs ").concat(t.name," (").concat(a,")")),n!==a?n-a:e.name.localeCompare(t.name)});return console.log("\ud83d\udccb Actividades ordenadas:"),n.forEach((e,t)=>{console.log("".concat(t+1,". ").concat(e.name," (").concat(r(e),")"))}),n}getActivityOrder(e,t){const r={"Planificaci\xf3n":["an\xe1lisis","requerimientos","planificaci\xf3n","aprobaci\xf3n","orden","cotizaci\xf3n"],"Adquisici\xf3n":["cotizaci\xf3n","proveedor","compra","fabricaci\xf3n","producci\xf3n","importaci\xf3n","aduana","embarque","transporte"],"Implementaci\xf3n":["infraestructura","preparaci\xf3n","sitio","cimentaci\xf3n","el\xe9ctrica","instalaci\xf3n","configuraci\xf3n","prueba","entrega"],Cierre:["capacitaci\xf3n","documentaci\xf3n","garant\xeda","soporte","performance"]}[t]||[];for(let n=0;n<r.length;n++)if(e.includes(r[n]))return n;return 999}getPhaseOrder(e){return{"Planificaci\xf3n":1,"Adquisici\xf3n":2,"Implementaci\xf3n":3,Cierre:4,General:5}[e]||5}getPaymentRelativePosition(e){switch(e){case"order":return 500;case"production":return 2500;case"shipping":return 2800;case"delivery":return 3500;case"installation":return 3800;case"performance":return 4500;default:return 9999}}},ZQ=JQ,QQ=e=>{let{isOpen:r,onClose:n,onComplete:a,projectId:i,currentProject:o=null,organizationId:l,userId:c}=e;const[d,u]=(0,t.useState)(1),[h,f]=(0,t.useState)({}),[p,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),[b,x]=(0,t.useState)(null),[y,w]=(0,t.useState)([]),[j,N]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r&&_()},[r]),(0,t.useEffect)(()=>{4!==d||C()&&j||p||g||(console.log("\ud83e\udd16 Generando cronograma autom\xe1ticamente en paso 4..."),A())},[d,h,p,g,j]);const _=async()=>{try{u(1),f({}),m(null),x(null),v(!1),N(!1),await S(),f(o?{projectId:i,projectName:o.name,projectDescription:o.description,projectManager:o.manager||"Pendiente",startDate:o.startDate||(new Date).toISOString().split("T")[0],endDate:o.endDate||null}:{projectId:i,startDate:(new Date).toISOString().split("T")[0]})}catch(b){console.error("Error inicializando wizard:",b),x("Error inicializando el asistente de cronogramas")}},S=async()=>{try{const e=await ZQ.getAvailableTemplates();w(e),console.log("\ud83d\udccb Templates cargados:",e.length)}catch(b){console.error("Error cargando templates:",b)}},k=(0,t.useCallback)(e=>{f(t=>(0,s.A)((0,s.A)({},t),e))},[]),A=async()=>{try{var e,t;if(v(!0),x(null),console.log("\ud83e\udd16 Iniciando generaci\xf3n de cronograma..."),console.log("\ud83d\udcca Datos del wizard:",h),!h.projectType)throw new Error("Tipo de proyecto no definido");const r=await ZQ.generateSmartSchedule(h);if(!r)throw new Error("No se pudo generar el cronograma");m(r),u(5),console.log("\u2705 Cronograma generado exitosamente:",r),console.log("\ud83d\udcca Actividades generadas:",(null===(e=r.activities)||void 0===e?void 0:e.length)||0),console.log("\ud83c\udfaf Hitos generados:",(null===(t=r.milestones)||void 0===t?void 0:t.length)||0)}catch(b){console.error("\u274c Error generando cronograma:",b),x("Error generando cronograma: ".concat(b.message))}finally{v(!1)}},E=()=>{u(1),f({}),m(null),x(null),v(!1),n()},C=()=>"equipment_installation"===h.projectType,T=()=>{switch(d){case 1:return h.projectName&&h.projectType;case 2:return h.teamSize&&h.teamExperience;case 3:return h.milestones&&h.milestones.length>0;case 4:return C()&&j?h.deliveryTime&&h.advancePayments:null!==p;default:return!1}};return r?(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl h-[95vh] max-h-[95vh] overflow-hidden flex flex-col",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83e\udd16"}),"Asistente Inteligente de Cronogramas"]}),(0,At.jsx)("p",{className:"text-purple-100 mt-1",children:"Genera cronogramas autom\xe1ticamente con IA"})]}),(0,At.jsx)("button",{onClick:E,className:"text-white hover:text-purple-200 transition-colors",children:(0,At.jsx)("span",{className:"text-2xl",children:"\xd7"})})]}),(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between text-sm text-purple-100 mb-2",children:[(0,At.jsxs)("span",{children:["Paso ",d," de ",4]}),(0,At.jsxs)("span",{children:[Math.round(d/4*100),"% completado"]})]}),(0,At.jsx)("div",{className:"w-full bg-purple-300 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:"".concat(d/4*100,"%")}})})]})]}),(0,At.jsxs)("div",{className:"p-6 overflow-y-auto flex-1",children:[b&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-red-500 text-xl mr-3",children:"\u26a0\ufe0f"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-red-800 font-semibold",children:"Error"}),(0,At.jsx)("p",{className:"text-red-600",children:b})]})]})}),1===d&&(0,At.jsx)(HQ,{wizardData:h,onUpdate:k,availableTemplates:y}),2===d&&(0,At.jsx)(VQ,{wizardData:h,onUpdate:k}),3===d&&(0,At.jsx)(GQ,{wizardData:h,onUpdate:k}),4===d&&C()&&j&&(0,At.jsx)(KQ,{wizardData:h,onUpdate:k}),4===d&&(!C()||!j)&&(0,At.jsx)($Q,{wizardData:h,generatedSchedule:p,isGenerating:g,onGenerate:A})]}),(0,At.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t",children:[(0,At.jsx)("div",{className:"flex items-center space-x-4",children:d>1&&(0,At.jsx)("button",{onClick:()=>{d>1&&u(e=>e-1)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"\u2190 Anterior"})}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("button",{onClick:E,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),d<4||4===d&&C()&&j?(0,At.jsx)("button",{onClick:()=>{d<4?u(e=>e+1):4===d&&C()&&!j?N(!0):4===d&&C()&&j&&N(!1)},disabled:!T(),className:"px-6 py-2 rounded-lg font-semibold transition-colors ".concat(T()?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Siguiente \u2192"}):(0,At.jsx)("button",{onClick:()=>{p&&a&&(a(p),n())},disabled:!p,className:"px-6 py-2 rounded-lg font-semibold transition-colors ".concat(p?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"\u2705 Aplicar Cronograma"})]})]})]})}):null},e0=864e5,t0=50,r0=e=>"string"!==typeof e?e:e.replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/[<>]/g,"").trim().substring(0,1e3),n0=e=>e&&"string"===typeof e?e.length<2?{valid:!1,error:"Nombre debe tener al menos 2 caracteres"}:e.length>255?{valid:!1,error:"Nombre muy largo (m\xe1ximo 255 caracteres)"}:{valid:!0,sanitized:r0(e)}:{valid:!1,error:"Nombre de tarea requerido"},a0=e=>{const t=parseInt(e);return isNaN(t)||t<0||t>365?{valid:!1,error:"Duraci\xf3n debe ser un n\xfamero entre 0 y 365 d\xedas"}:{valid:!0,value:t}},s0=e=>{if(!e)return{valid:!1,error:"Fecha requerida"};const t=new Date(e);if(isNaN(t.getTime()))return{valid:!1,error:"Fecha inv\xe1lida"};const r=(new Date).getFullYear();return t.getFullYear()<2020||t.getFullYear()>r+10?{valid:!1,error:"Fecha fuera del rango permitido (2020-"+(r+10)+")"}:{valid:!0,value:o0(t)}},i0=e=>[...e].sort((e,t)=>{const r=e=>{if(!e)return 0;if("number"===typeof e)return e;const t=String(e).match(/\d+/);return t?parseInt(t[0],10):String(e).toLowerCase().includes("sin")?999999:0},n=r(e.wbsCode),a=r(t.wbsCode);return n===a?0:n-a}),o0=e=>{if(!e)return(new Date).toISOString().split("T")[0];const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date in toISO:",e),(new Date).toISOString().split("T")[0]):t.toISOString().split("T")[0]},l0=e=>{const t=new Date(e).getDay();return t>=1&&t<=5},c0=function(e,t){if(0===t)return e;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const r=new Date(e);return r.setDate(r.getDate()+t),o0(r)}return d0(e,t)},d0=(e,t)=>{if(0===t)return e;let r=new Date(e+"T00:00:00"),n=0;if(l0(r)&&(n=1),n>=t)return o0(r);for(;n<t;){r.setDate(r.getDate()+1);l0(r)&&n++}return o0(r)},u0=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const r=new Date(o0(e)),n=new Date(o0(t));return Math.max(0,Math.round((n.getTime()-r.getTime())/e0))}return f0(e,t)},h0=(e,t,r)=>{const n=new Date(o0(e)),a=new Date(t);let s=0,i=new Date(a);const o=o0(e).includes("2025-09-01");if(o&&(console.log("\ud83d\udd0d findColumnIndex DEBUG:"),console.log("   targetDate:",o0(e)),console.log("   referenceStartDate:",t),console.log("   includeWeekends:",r),console.log("   isTargetBeforeStart:",n<a)),n<a){let e=new Date(n);for(;e<a;)(r||l0(e))&&(s--,o&&console.log("\ud83d\udcc5 Columna negativa:",o0(e),"\xedndice:",s)),e.setDate(e.getDate()+1)}else for(;i<=n;)r||l0(i)?(s++,o&&console.log("\ud83d\udcc5 Columna contada:",o0(i),"\xedndice:",s)):o&&console.log("\ud83d\udcc5 D\xeda saltado (fin de semana):",o0(i)),i.setDate(i.getDate()+1);return o&&console.log("\ud83c\udfaf findColumnIndex resultado final:",s),s},f0=(e,t)=>{const r=new Date(o0(e)),n=new Date(o0(t));return Math.max(0,Math.round((n.getTime()-r.getTime())/e0))},p0=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?u0(e,c0(t,1,!0),!0):m0(e,t)},m0=(e,t)=>{const r=new Date(o0(e)),n=new Date(o0(t));return Math.max(1,Math.round((n.getTime()-r.getTime())/e0)+1)},g0=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=[],n=new Set;let a=0;for(const c of e)n.has(c.id)?(console.warn("\u26a0\ufe0f Tarea duplicada detectada en CPM: ".concat(c.id," - ").concat(c.name)),a++):(n.add(c.id),r.push(c));a>0&&console.warn("\ud83d\udd27 Se eliminaron ".concat(a," tareas duplicadas en CPM"));const s=new Map(r.map(e=>[e.id,{id:e.id,wbsCode:e.wbsCode,name:e.name,duration:e.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,predecessors:[...e.predecessors||[]],cost:e.cost,priority:e.priority,assignedTo:e.assignedTo,isMilestone:e.isMilestone,isCritical:e.isCritical,originalDuration:e.originalDuration,earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,totalFloat:e.totalFloat,freeFloat:e.freeFloat,description:e.description,resources:[...e.resources||[]],workPackageId:e.workPackageId,status:e.status,successors:[...e.successors||[]]}])),i=Array.from(s.values()),o=()=>{const e=new Set,r=new Set,n=a=>{if(e.has(a))return;if(r.has(a))return console.warn("Dependencia circular detectada en la tarea: ".concat(a,". Saltando c\xe1lculo.")),e.add(a),void r.delete(a);r.add(a);const i=s.get(a);if(!i)return;if(i.templateCalculated&&0===i.predecessors.length)return void console.log("\ud83d\udd12 Respetando fechas calculadas por template para tarea sin predecesoras: ".concat(i.name));let o;o=0===i.predecessors.length?new Date(i.startDate):new Date("1900-01-01");for(const e of i.predecessors){n(e);const t=s.get(e);if(t){let e=new Date(t.earlyFinish);e>o&&(o=e)}}i.predecessors.length>0&&!i.isMilestone&&o.setDate(o.getDate()+1),t||(o=(e=>{let t=new Date(e);for(;!l0(t);)t.setDate(t.getDate()+1);return t})(o)),i.earlyStart=o0(o),i.isMilestone?(i.earlyFinish=i.earlyStart,i.startDate=i.earlyStart,i.endDate=i.earlyFinish):(i.earlyFinish=c0(i.earlyStart,i.duration,t),i.startDate=i.earlyStart,i.endDate=i.earlyFinish),r.delete(a),e.add(a)};for(const t of i)n(t.id)};try{o(),(()=>{const e=i.filter(e=>0===e.successors.length);let t=new Date("1900-01-01");for(const a of e){const e=new Date(a.earlyFinish);e>t&&(t=e)}const r=new Set,n=e=>{if(r.has(e))return;const t=s.get(e);if(t){if(0===t.successors.length)t.lateFinish=t.earlyFinish;else{let e=new Date("2100-01-01");for(const r of t.successors){n(r);const t=s.get(r);if(t){let r=new Date(t.lateStart);t.isMilestone||r.setDate(r.getDate()-1),r<e&&(e=r)}}t.lateFinish=o0(e)}if(t.isMilestone)t.lateStart=t.lateFinish;else{const e=new Date(t.lateFinish);e.setDate(e.getDate()-t.duration),t.lateStart=o0(e)}r.add(e)}};for(const a of e)n(a.id);for(const a of i)r.has(a.id)||n(a.id);for(const a of i)if(0===a.predecessors.length)if(a.lateStart=a.earlyStart,a.isMilestone)a.lateFinish=a.earlyStart;else{const e=new Date(a.earlyStart);e.setDate(e.getDate()+a.duration),a.lateFinish=o0(e)}})();let e=0;const t=[];for(const a of i){const e=new Date(a.earlyStart),r=new Date(a.lateStart),n=Math.round((r-e)/e0);a.totalFloat=Math.max(0,n),a.isCritical=0===a.totalFloat;let o=new Date("2100-01-01");if(0===a.successors.length)a.freeFloat=a.totalFloat;else{for(const r of a.successors){const e=s.get(r);if(e){const t=new Date(e.earlyStart);t<o&&(o=t)}}const e=new Date(a.earlyFinish),t=Math.round((o-e)/e0);a.freeFloat=Math.max(0,t)}a.isCritical&&(t.push(a.id),a.criticalImpact={delayCost:.1*a.cost,resourceImpact:a.resources.length>0?"Alto":"Bajo",successorImpact:a.successors.length}),a.safetyFloat=Math.max(0,a.totalFloat-a.freeFloat),a.sensitivity=b0(a,i)}if(i.length>0){const r=i.map(e=>new Date(e.startDate)),n=i.map(e=>new Date(e.endDate)),a=new Date(Math.min(...r)),s=new Date(Math.max(...n)),o=s.getTime()-a.getTime();e=Math.max(0,Math.round(o/864e5)),console.log("\ud83d\udd0d CPM DEBUG - Ruta Cr\xedtica:",{totalTasks:i.length,criticalTasks:t.length,minStart:a&&!isNaN(a.getTime())?a.toISOString().split("T")[0]:"N/A",maxEnd:s&&!isNaN(s.getTime())?s.toISOString().split("T")[0]:"N/A",criticalPathLength:e})}const r=x0(i),n=y0(i,t);return console.log("\ud83d\udd0d DEBUG - Tareas y fechas de fin:",i.map(e=>({name:e.name,endDate:e.endDate,endDateObj:e.endDate&&null!==e.endDate&&void 0!==e.endDate?new Date(e.endDate).toISOString().split("T")[0]:"N/A"}))),{tasks:i,error:null,criticalPath:t,criticalPathLength:e,criticalPaths:r,projectMetrics:n}}catch(l){return{tasks:i,error:l.message}}},v0=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=new Map;for(const[n,a]of e.entries()){let e=0;for(const r of a)e+=u0(r.startDate,c0(r.endDate,1,t),t);r.set(n,e)}return Object.fromEntries(r)},b0=(e,t)=>{let r=0;e.isCritical&&(r+=3),0===e.predecessors.length&&(r+=1),0===e.successors.length&&(r+=1),e.resources.length>2&&(r+=2),e.duration>10&&(r+=1);const n=e.predecessors.filter(e=>{const r=t.find(t=>t.id===e);return r&&r.successors.length>1}).length;return r+=n,Math.min(10,r)},x0=e=>{const t=[],r=new Set,n=(a,s)=>{if(r.has(a))return;const i=e.find(e=>e.id===a);if(i){if(r.add(a),s.push(a),0===i.successors.length){const r=s.reduce((t,r)=>{const n=e.find(e=>e.id===r);return t+(n?n.duration:0)},0);r===Math.max(...e.map(e=>new Date(e.earlyFinish)-new Date(e.startDate)/e0))&&t.push(s.slice())}else for(const e of i.successors)n(e,s);s.pop(),r.delete(a)}},a=e.filter(e=>0===e.predecessors.length);for(const s of a)n(s.id,[]);return t},y0=(e,t)=>{let r=0;if(e.length>0){const t=e.map(e=>new Date(e.startDate)),n=e.map(e=>new Date(e.endDate)),a=new Date(Math.min(...t)),s=new Date(Math.max(...n)).getTime()-a.getTime();r=Math.max(0,Math.round(s/864e5))}const n=t.reduce((t,r)=>{const n=e.find(e=>e.id===r);return t+(n?n.duration:0)},0),a=Math.max(r,n),s=e.reduce((e,t)=>e+(t.cost||0),0),i=t.reduce((t,r)=>{const n=e.find(e=>e.id===r);return t+(n&&n.cost||0)},0);return{totalDuration:a,criticalDuration:Math.round(n),totalCost:s,criticalCost:i,criticalPercentage:Math.round(i/s*100),averageFloat:Math.round(e.reduce((e,t)=>e+t.totalFloat,0)/e.length),maxFloat:Math.max(...e.map(e=>e.totalFloat)),criticalTasksCount:t.length,originalDuration:r,criticalPathLength:n,durationDifference:a-r}},w0=e=>{var r,n,a,i,o,l;let{tasks:c,setTasks:d,importTasks:u,projectData:h,onScheduleDataChange:f,includeWeekends:p,setIncludeWeekends:m,useSupabase:g=!0,updateProjectMinutas:v}=e;(0,t.useCallback)(e=>{if(!Array.isArray(e)||0===e.length)return e;console.log("\ud83d\udd04 MIGRACI\xd3N AUTOM\xc1TICA - Iniciando migraci\xf3n de proyecto existente..."),console.log("\ud83d\udcca Tareas a migrar: ".concat(e.length));const t=e.every((e,t)=>parseInt(e.wbsCode)===t+1);if(t)return console.log("\u2705 MIGRACI\xd3N AUTOM\xc1TICA - Proyecto ya migrado, no se requiere migraci\xf3n"),e;const r=new Map;e.forEach((e,t)=>{const n="".concat(t+1);r.set(e.id,n)}),console.log("\ud83d\udd04 MIGRACI\xd3N AUTOM\xc1TICA - Mapeo de ID a wbsCode:",Array.from(r.entries()));const n=e.map((t,r)=>{const n="".concat(r+1);let a=[];t.predecessors&&t.predecessors.length>0&&(a=t.predecessors.map(t=>{const r=e.find(e=>e.id===t);return r?(console.log("\u2705 Predecesora v\xe1lida encontrada: ".concat(r.name," (ID: ").concat(t,")")),t):(console.warn("\u26a0\ufe0f Predecesora no encontrada: ID ".concat(t)),null)}).filter(Boolean));const i=(0,s.A)((0,s.A)({},t),{},{wbsCode:n,predecessors:a});return a.length>0&&console.log('\ud83d\udd04 Tarea "'.concat(t.name,'": wbsCode ').concat(t.wbsCode," \u2192 ").concat(n,", predecesoras: [").concat(a.join(", "),"]")),i});return console.log("\u2705 MIGRACI\xd3N AUTOM\xc1TICA - Migraci\xf3n completada exitosamente"),n},[]);(0,t.useEffect)(()=>{if(console.log("\ud83d\udd27 useEffect EJECUT\xc1NDOSE - TAREAS:",(null===c||void 0===c?void 0:c.length)||0),c&&c.length>0){const e=c.filter(e=>e.isMilestone&&e.startDate!==e.endDate);console.log("\ud83d\udd27 HITOS CON FECHAS INCORRECTAS DETECTADOS:",e.length),e.length>0&&(console.log("\ud83d\udd27 EJECUTANDO CORRECCI\xd3N AUTOM\xc1TICA DE HITOS"),d(e=>e.map(e=>e.isMilestone&&e.startDate!==e.endDate?(console.log("\ud83d\udd27 CORRIGIENDO HITO AUTOM\xc1TICAMENTE:",{taskId:e.id,taskName:e.name,startDateOriginal:e.startDate,endDateOriginal:e.endDate,endDateCorregida:e.startDate}),(0,s.A)((0,s.A)({},e),{},{endDate:e.startDate,updatedAt:(new Date).toISOString()})):e)))}},[c.length]),(0,t.useEffect)(()=>{if(f&&c.length>0){const e={tasks:c,projectStart:null===h||void 0===h?void 0:h.startDate,projectEnd:null===h||void 0===h?void 0:h.endDate,totalTasks:c.length,completedTasks:c.filter(e=>"completed"===e.status).length,inProgressTasks:c.filter(e=>"in-progress"===e.status).length,delayedTasks:c.filter(e=>"delayed"===e.status).length,totalProgress:c.reduce((e,t)=>e+(t.progress||0),0)/c.length};f(e),console.log("\ud83d\udcca Datos del cronograma enviados a FinancialManagement")}},[c,f,h]);const b={projectName:h.projectName,startDate:h.startDate,plannedEndDate:h.endDate,totalInvestment:h.totalBudget},[x,y]=(0,t.useState)(null),[w,j]=(0,t.useState)(""),[N,_]=(0,t.useState)("excel"),[S,k]=(0,t.useState)(null),[A,E]=(0,t.useState)(""),[C,T]=(0,t.useState)(null),[P,D]=(0,t.useState)(""),[O,I]=(0,t.useState)(""),M=(0,t.useRef)(null),[R,L]=((0,t.useRef)(null),(0,t.useState)("days")),[F,B]=(0,t.useState)(!0),[z,U]=(0,t.useState)(!0),[q,W]=(0,t.useState)([]),[H,V]=(0,t.useState)(!1),[G,K]=(0,t.useState)(!1),[$,Y]=(0,t.useState)(!1),[X,J]=(0,t.useState)(null),[Z,Q]=(0,t.useState)(!1),[ee,te]=(0,t.useState)([]),[re,ne]=(0,t.useState)(!1),[ae,se]=(0,t.useState)(null),[ie,oe]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(!1),{logMinutaTaskCreated:de,logMinutaTaskUpdated:ue,addAuditEvent:he}=AQ(null===h||void 0===h?void 0:h.id,g),[fe,pe]=(0,t.useState)("hierarchical"),[me,ge]=(0,t.useState)("TB"),[ve,be]=(0,t.useState)(!1),[xe,ye]=(0,t.useState)(!0),[we,je]=(0,t.useState)(!1),[Ne,_e]=(0,t.useState)(!1),[Se,ke]=(0,t.useState)(!0),[Ae,Ee]=(0,t.useState)(1),[Ce,Te]=(0,t.useState)({x:0,y:0}),[Pe,De]=(0,t.useState)(null),[Oe,Ie]=(0,t.useState)({x:0,y:0}),[Me,Re]=(0,t.useState)(!1),[Le,Fe]=(0,t.useState)({x:0,y:0}),[Be,ze]=(0,t.useState)({x:0,y:0}),Ue=(0,t.useRef)(null),qe=(0,t.useRef)(null),We=(0,t.useRef)(null),He=(0,t.useRef)(null),Ve=(0,t.useMemo)(()=>new Map(q.map(e=>[e.id,e])),[q]),Ge=(0,t.useMemo)(()=>{console.log("\ud83d\udd04 Recalculando CPM con tareas:",c.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors,endDate:e.endDate}))),console.log("\ud83d\ude80 DEBUG - Tareas ANTES de calculateCPM:",c.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors,endDate:e.endDate})));const e=g0(c,p);console.log("\ud83d\ude80 DEBUG - Tareas DESPU\xc9S de calculateCPM:",e.tasks.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors,endDate:e.endDate}))),console.log("\ud83d\ude80 DEBUG - Resultado CPM:",{criticalPath:e.criticalPath,criticalPathLength:e.criticalPathLength,totalTasks:e.tasks.length}),console.log("\ud83d\ude80 CORRECCI\xd3N SCHEDULE - Aplicando fechas calculadas por CPM como MS Project");const t=c.map(t=>{const r=e.tasks.find(e=>e.id===t.id);return r?{id:r.id,wbsCode:r.wbsCode,name:r.name,duration:r.duration,startDate:r.earlyStart,endDate:r.earlyFinish,progress:r.progress,predecessors:r.predecessors||[],cost:r.cost,priority:r.priority,assignedTo:r.assignedTo,isMilestone:r.isMilestone,isCritical:r.isCritical,originalDuration:r.originalDuration,earlyStart:r.earlyStart,earlyFinish:r.earlyFinish,lateStart:r.lateStart,lateFinish:r.lateFinish,totalFloat:r.totalFloat,freeFloat:r.freeFloat,description:r.description,resources:[...r.resources||[]],workPackageId:r.workPackageId,status:r.status,successors:r.successors||[]}:(console.warn("\u26a0\ufe0f Tarea no encontrada en resultado CPM: ".concat(t.name," (").concat(t.id,")")),t)});return console.log("\ud83d\udd04 Tareas con dependencias FORZADAS despu\xe9s de CPM:",t.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors,endDate:e.endDate}))),{criticalPath:e.criticalPath,criticalPathLength:e.criticalPathLength,tasks:t}},[c,p,c.length]),Ke=(0,t.useMemo)(()=>Ge.tasks.map(e=>{const t=(0,s.A)((0,s.A)({},e),{},{startDate:e.earlyStart,endDate:e.earlyFinish});return e.isMilestone&&(console.log("\ud83d\udd0d HITO DETECTADO:",{id:e.id,name:e.name,startDate:e.startDate,endDate:e.endDate,isMilestone:e.isMilestone}),t.startDate!==t.endDate)?(console.log("\ud83d\udd27 CORRIGIENDO HITO - FORZANDO endDate = startDate"),(0,s.A)((0,s.A)({},t),{},{endDate:t.startDate})):t}),[Ge.tasks]);(0,t.useEffect)(()=>{if(Ke.length>0&&d){const e=Ke.some(e=>{const t=c.find(t=>t.id===e.id);return!!t&&(t.startDate!==e.startDate||t.endDate!==e.endDate)});e&&(console.log("\ud83d\udd04 Actualizando tareas con fechas calculadas por CPM..."),d(Ke))}},[Ke,c,d]);(0,t.useEffect)(()=>{J(Ge.error)},[Ge.error]),(0,t.useEffect)(()=>{if(c&&c.length>0){const e=new Set,t=new Set,r=[],n=function(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.has(a)){const e=s.indexOf(a),t=s.slice(e).concat([a]);return r.push({taskId:a,cycle:t}),!0}if(e.has(a))return!1;t.add(a),e.add(a);const i=c.find(e=>e.id===a);if(i)for(const e of i.predecessors)if(n(e,[...s,a]))return!0;return t.delete(a),!1};c.forEach(t=>{e.has(t.id)||n(t.id)}),r.length>0?(console.warn("\ud83d\udea8 DEPENDENCIAS CIRCULARES REALES detectadas: ".concat(r.length)),r.forEach(e=>{console.warn("  \u2022 Tarea ".concat(e.taskId,": Ciclo ").concat(e.cycle.join(" \u2192 ")))}),console.warn('\ud83d\udca1 Usa el bot\xf3n "Limpiar Dependencias Circulares" para corregir manualmente')):console.log("\u2705 Sin dependencias circulares detectadas")}},[c]);const $e=(0,t.useMemo)(()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=new Map,n=[];for(const a of e)if(a&&a.resources&&Array.isArray(a.resources))for(const e of a.resources)r.has(e)||r.set(e,[]),r.get(e).push({taskId:a.id,taskName:a.name,startDate:a.startDate,endDate:a.endDate,allocation:100});for(const[a,s]of r.entries()){const e=s.sort((e,t)=>new Date(e.startDate)-new Date(t.startDate));for(let r=0;r<e.length-1;r++){const s=e[r],i=e[r+1];new Date(s.endDate)>new Date(i.startDate)&&n.push({resource:a,task1:s.taskId,task2:i.taskId,overlapDays:u0(i.startDate,s.endDate,t)})}}return{resourceLoad:Object.fromEntries(r),conflicts:n,utilization:v0(r,t)}}(Ke,p),[Ke,p]),Ye=(0,t.useRef)(p);(0,t.useEffect)(()=>{const e=e=>{console.log("\ud83d\udd04 EVENTO tasksUpdated recibido:",e.detail),d(e=>[...e])};return window.addEventListener("tasksUpdated",e),()=>{window.removeEventListener("tasksUpdated",e)}},[]),(0,t.useEffect)(()=>{if(console.log("\ud83d\udd04 CHECKBOX CAMBI\xd3:",p),Ye.current!==p&&c&&c.length>0){console.log("\ud83d\udd04 RECALCULANDO FECHAS..."),Ye.current=p;const e=c.map((e,t)=>{if(e.isMilestone)return(0,s.A)((0,s.A)({},e),{},{endDate:e.startDate});if(e.startDate&&e.duration){const t=c0(e.startDate,e.duration,p);return(0,s.A)((0,s.A)({},e),{},{endDate:t})}return e}),t=e.some((e,t)=>e.endDate!==c[t].endDate);console.log("\ud83d\udd04 hasChanges:",t),t?(console.log("\ud83d\udd04 ACTUALIZANDO TABLA..."),d(e)):console.log("\ud83d\udd04 NO HAY CAMBIOS - las fechas son iguales")}},[p]);const Xe=(0,t.useMemo)(()=>{if(0===Ke.length)return[];let e=Ke;we&&(e=e.filter(e=>e.isCritical));const t=Ne?100:140,r=Ne?60:80,n=Ne?150:200,a=Ne?100:120,s=[],i=new Map,o=new Set,l=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(o.has(t))return i.get(t)||0;if(r.has(t))return console.warn("Dependencia circular detectada en tarea:",t),i.set(t,0),o.add(t),0;const n=e.find(e=>e.id===t);if(!n)return 0;if(0===n.predecessors.length)return i.set(t,0),o.add(t),0;r.add(t);try{const e=(n.predecessors&&n.predecessors.length>0?Math.max(...n.predecessors.map(e=>l(e,r))):0)+1;return i.set(t,e),o.add(t),e}finally{r.delete(t)}};e.forEach(e=>l(e.id));const c=new Map;e.forEach(e=>{const t=i.get(e.id);c.has(t)||c.set(t,[]),c.get(t).push(e)});const d=Math.max(...Array.from(c.keys()));return c.forEach((e,i)=>{const o=(e.length-1)*n,l=100+50*(d-i);e.forEach((e,c)=>{const d=l+o/2-o/2+c*n,u=100+i*a;s.push({id:e.id,x:d,y:u,width:t,height:r,level:i,task:e})})}),console.log("\ud83d\udccd NODOS GENERADOS MEJORADOS:",s.map(e=>({id:e.id,x:e.x,y:e.y,level:e.level,center:"".concat(e.x+e.width/2,",").concat(e.y+e.height/2)}))),s},[Ke,we,Ne]),Je=Xe,Ze=()=>{if(!Je||!Array.isArray(Je))return console.log("\u26a0\ufe0f networkNodes no disponible a\xfan, usando fallback"),Te({x:0,y:0}),void Ee(1);if(console.log("\ud83c\udfaf centerNetwork llamado:",{hasSvgRef:!!He.current,nodesLength:Je.length,nodes:Je.slice(0,3).map(e=>({id:e.id,x:e.x,y:e.y}))}),He.current&&Je.length>0){let e=1/0,t=1/0,r=-1/0,n=-1/0;Je.forEach(a=>{e=Math.min(e,a.x),t=Math.min(t,a.y),r=Math.max(r,a.x+a.width),n=Math.max(n,a.y+a.height)}),console.log("\ud83d\udcd0 Bounding box calculado:",{minX:e,minY:t,maxX:r,maxY:n});const a=100,s=r-e+2*a,i=n-t+2*a,o=e-a,l=t-a;console.log("\ud83c\udfaf Centrando en:",{centerX:o,centerY:l,contentWidth:s,contentHeight:i}),Te({x:o,y:l}),Ee(1)}else console.log("\u26a0\ufe0f Fallback: no hay nodos o SVG ref"),Te({x:0,y:0}),Ee(1)};(0,t.useEffect)(()=>{"network"===N&&He.current&&setTimeout(()=>{Ze()},100)},[N]),(0,t.useEffect)(()=>{"network"===N&&Je.length>0&&setTimeout(()=>{Ze()},100)},[Je,N]),(0,t.useEffect)(()=>{"network"===N&&setTimeout(()=>{Se?Rt():Ze()},200)},[we,Ne,N,Se,Je]),(0,t.useEffect)(()=>{if("network"===N&&He.current){He.current.setAttribute("viewBox","".concat(Ce.x," ").concat(Ce.y," ").concat(1200/Ae," ").concat(600/Ae))}},[Ae,Ce,N]),(0,t.useEffect)(()=>{(async()=>{if(null!==h&&void 0!==h&&h.id){ne(!0);try{if(g){console.log("\ud83d\udd0d DEBUG: Cargando minutas para proyecto:",h.id);const{success:e,minutas:t}=await kt.default.loadMinutasByProject(h.id);e?(console.log("\ud83d\udd0d DEBUG: Minutas recibidas de Supabase:",t),te(t),v&&v(h.id,t),console.log("\u2705 Minutas cargadas desde Supabase: ".concat(t.length))):console.warn("\u26a0\ufe0f Error cargando minutas desde Supabase")}else{var e;const t=(null===(e=JSON.parse(localStorage.getItem("portfolioData")||"{}").minutasByProject)||void 0===e?void 0:e[h.id])||[];te(t),console.log("\u2705 Minutas cargadas desde localStorage: ".concat(t.length))}}catch(t){console.error("\u274c Error cargando minutas:",t)}finally{ne(!1)}}})()},[null===h||void 0===h?void 0:h.id,g]);const Qe=(0,t.useRef)(null),et=(0,t.useRef)(!1),tt=(0,t.useCallback)((e,t,r)=>{console.log("\ud83d\udd04 updateTask llamado:",{taskId:e,field:t,value:r,selectedTaskId:null===x||void 0===x?void 0:x.id}),e?(d(n=>{const a=n.map(n=>{if(n.id!==e)return n;const a={id:n.id,wbsCode:n.wbsCode,name:n.name,duration:n.duration,startDate:n.startDate,endDate:n.endDate,progress:n.progress,predecessors:[...n.predecessors||[]],cost:n.cost,priority:n.priority,assignedTo:n.assignedTo,isMilestone:n.isMilestone,isCritical:n.isCritical,originalDuration:n.originalDuration,earlyStart:n.earlyStart,earlyFinish:n.earlyFinish,lateStart:n.lateStart,lateFinish:n.lateFinish,totalFloat:n.totalFloat,freeFloat:n.freeFloat,description:n.description,resources:[...n.resources||[]],workPackageId:n.workPackageId,status:n.status,successors:[...n.successors||[]]},s=parseFloat(r);switch(t){case"duration":{const e=Number.isFinite(s)?Math.max(0,Math.round(s)):0;a.duration=e,a.isMilestone?a.endDate=a.startDate:a.endDate=c0(a.startDate,e,p);break}case"startDate":a.startDate=r,a.isMilestone?a.endDate=r:a.endDate=c0(r,a.duration,p);break;case"progress":{const e=Number.isFinite(s)?Math.round(s):0;a.progress=Math.min(100,Math.max(0,e));break}case"cost":a.cost=Number.isFinite(s)?s:0;break;case"resources":a.resources=Array.isArray(r)?r:[];break;default:a[t]=r,"name"===t?console.log("\ud83d\udd24 CAMPO NOMBRE - Actualizando en tasks array:",{taskId:e,valorAnterior:n[t],valorNuevo:r,taskCompleta:a}):console.log("\ud83d\udd04 Campo '".concat(t,"' actualizado a:"),r)}return a});return a}),x&&x.id===e&&(console.log("\ud83d\udd04 Actualizando selectedTask para:",e),y(n=>{const a={id:n.id,wbsCode:n.wbsCode,name:n.name,duration:n.duration,startDate:n.startDate,endDate:n.endDate,progress:n.progress,predecessors:[...n.predecessors||[]],cost:n.cost,priority:n.priority,assignedTo:n.assignedTo,isMilestone:n.isMilestone,isCritical:n.isCritical,originalDuration:n.originalDuration,earlyStart:n.earlyStart,earlyFinish:n.earlyFinish,lateStart:n.lateStart,lateFinish:n.lateFinish,totalFloat:n.totalFloat,freeFloat:n.freeFloat,description:n.description,resources:[...n.resources||[]],workPackageId:n.workPackageId,status:n.status,successors:[...n.successors||[]]},s=parseFloat(r);switch(t){case"duration":{const e=Number.isFinite(s)?Math.max(0,Math.round(s)):0;a.duration=e,a.isMilestone?a.endDate=a.startDate:a.endDate=c0(a.startDate,e,p);break}case"startDate":a.startDate=r,a.isMilestone?a.endDate=r:a.endDate=c0(r,a.duration,p);break;case"progress":{const e=Number.isFinite(s)?Math.round(s):0;a.progress=Math.min(100,Math.max(0,e));break}case"cost":a.cost=Number.isFinite(s)?s:0;break;case"resources":a.resources=Array.isArray(r)?r:[];break;default:a[t]=r,"name"===t?console.log("\ud83d\udd24 CAMPO NOMBRE - Actualizando selectedTask:",{taskId:e,valorAnterior:n[t],valorNuevo:r,selectedTaskCompleta:a}):console.log("\ud83d\udd04 selectedTask campo '".concat(t,"' actualizado a:"),r)}return console.log("\ud83d\udd04 selectedTask actualizado:",a),a}))):console.error("\u274c taskId es null o undefined")},[x]),rt={FS:{name:"Finish-to-Start",description:"La tarea predecesora debe terminar antes de que la sucesora pueda comenzar",color:"#3b82f6"},SS:{name:"Start-to-Start",description:"La tarea sucesora puede comenzar cuando la predecesora comience",color:"#10b981"},FF:{name:"Finish-to-Finish",description:"La tarea sucesora debe terminar cuando la predecesora termine",color:"#f59e0b"},SF:{name:"Start-to-Finish",description:"La tarea sucesora debe terminar cuando la predecesora comience",color:"#8b5cf6"}},nt=(0,t.useCallback)((e,t)=>{const r=new Set,n=new Set,a=e=>{if(n.has(e))return!0;if(r.has(e))return!1;r.add(e),n.add(e);const t=Ke.find(t=>t.id===e);if(t)for(const r of t.predecessors)if(a(r))return!0;return n.delete(e),!1},s=Ke.find(t=>t.id===e),i=s?{id:s.id,wbsCode:s.wbsCode,name:s.name,duration:s.duration,startDate:s.startDate,endDate:s.endDate,progress:s.progress,predecessors:[...s.predecessors||[]],cost:s.cost,priority:s.priority,assignedTo:s.assignedTo,isMilestone:s.isMilestone,isCritical:s.isCritical,originalDuration:s.originalDuration,earlyStart:s.earlyStart,earlyFinish:s.earlyFinish,lateStart:s.lateStart,lateFinish:s.lateFinish,totalFloat:s.totalFloat,freeFloat:s.freeFloat,description:s.description,resources:[...s.resources||[]],workPackageId:s.workPackageId,status:s.status,successors:[...s.successors||[]]}:null;return!!i&&(i.predecessors=[...i.predecessors||[],t],a(t))},[Ke]),at=(0,t.useCallback)(()=>{console.log("\ud83e\uddf9 Limpiando dependencias circulares...");const e=new Set,t=new Set,r=new Set,n=a=>{if(t.has(a))return r.add(a),!0;if(e.has(a))return!1;t.add(a),e.add(a);const s=c.find(e=>e.id===a);if(s)for(const e of s.predecessors)if(n(e))return r.add(a),!0;return t.delete(a),!1};if(c.forEach(t=>{e.has(t.id)||n(t.id)}),r.size>0){console.warn("\ud83d\udea8 Se encontraron ".concat(r.size," tareas con dependencias circulares:"),Array.from(r));const e=c.map(e=>r.has(e.id)?(console.warn("\ud83d\udd27 Limpiando dependencias circulares de tarea: ".concat(e.name," (").concat(e.id,")")),(0,s.A)((0,s.A)({},e),{},{predecessors:[],successors:[]})):e);return d(e),!0}return!1},[c]);(0,t.useEffect)(()=>{const e=()=>{const e=document.getElementById("newDependencyType"),t=document.getElementById("dependencyTypeInfo");if(e&&t){const r=e.value,n=rt[r];n&&(t.textContent=n.description)}},t=document.getElementById("newDependencyType");if(t)return t.addEventListener("change",e),e(),()=>{t.removeEventListener("change",e)}},[x]);(0,t.useCallback)((e,t)=>{console.log("\ud83c\udd95 NUEVA FUNCI\xd3N handleTaskEdit - INICIANDO:",{taskId:e,updates:t}),d(r=>{console.log("\ud83d\udd0d SETTASKS #3 - NUEVA FUNCI\xd3N handleTaskEdit:",e,t),console.log("\ud83d\udd0d SETTASKS #3 - Estado ANTES:",JSON.stringify(r.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors})),null,2));const n=r.map(r=>{if(r.id===e){const e=(0,s.A)({id:r.id,wbsCode:r.wbsCode,name:r.name,duration:r.duration,startDate:r.startDate,endDate:r.endDate,progress:r.progress,predecessors:[...r.predecessors||[]],cost:r.cost,priority:r.priority,assignedTo:r.assignedTo,isMilestone:r.isMilestone,isCritical:r.isCritical,originalDuration:r.originalDuration,earlyStart:r.earlyStart,earlyFinish:r.earlyFinish,lateStart:r.lateStart,lateFinish:r.lateFinish,totalFloat:r.totalFloat,freeFloat:r.freeFloat,description:r.description,resources:[...r.resources||[]],workPackageId:r.workPackageId,status:r.status,successors:[...r.successors||[]]},t||{});return console.log("\ud83c\udd95 NUEVA FUNCI\xd3N - Tarea actualizada:",{id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors}),e}return r});return console.log("\ud83d\udd0d SETTASKS #3 - Estado DESPU\xc9S:",JSON.stringify(n.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors})),null,2)),console.log("\ud83c\udd95 NUEVA FUNCI\xd3N - Estado actualizado correctamente"),n})},[]),(0,t.useCallback)(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FS";console.warn("\ud83d\udea8 updateSuccessors INICIADO:",{taskId:e,successorsString:t,dependencyType:r}),console.error("\ud83d\udea8 updateSuccessors INICIADO:",{taskId:e,successorsString:t,dependencyType:r});const n=t.split(",").map(e=>e.trim()).filter(t=>t&&t!==e);console.log("\ud83d\udd04 Sucesoras procesadas:",n);for(const a of n)if(nt(e,a))return console.error("\u274c DEPENDENCIA CIRCULAR DETECTADA:",{taskId:e,succId:a}),void alert("\u274c No se puede crear la dependencia: se detectar\xeda una dependencia circular entre ".concat(e," y ").concat(a));d(t=>{console.log("\ud83d\udd04 Estado anterior de tareas:",t.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors})));const r=new Map(t.map(e=>[e.id,new Set(e.predecessors)]));for(const[,n]of r)n.delete(e);for(const i of n){var a;null===(a=r.get(i))||void 0===a||a.add(e)}const s=t.map(t=>({id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:Array.from(r.get(t.id)||[]),cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:t.id===e?n:t.successors}));return console.log("\ud83d\udd04 Estado actualizado de tareas:",s.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors}))),s}),console.warn("\ud83d\udea8 updateSuccessors COMPLETADO"),console.error("\ud83d\udea8 updateSuccessors COMPLETADO")},[nt]);const st=(0,t.useCallback)(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FS";console.warn("\ud83d\udea8 updatePredecessors INICIADO:",{taskId:e,predecessorsString:t,dependencyType:r}),console.error("\ud83d\udea8 updatePredecessors INICIADO:",{taskId:e,predecessorsString:t,dependencyType:r});const n=t.split(",").map(e=>e.trim()).filter(t=>t&&t!==e);console.log("\ud83d\udd04 Predecesoras procesadas:",n);for(const a of n){const t=ot(e,a);if(!t.valid)return console.error("\u274c VALIDACI\xd3N FALLIDA:",{taskId:e,predId:a,error:t.error}),void alert(t.error)}d(t=>{console.log("\ud83d\udd04 Estado anterior de tareas:",t.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors})));const a=t.map(t=>t.id===e?{id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:n,cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]],dependencyType:r}:n.includes(t.id)&&!t.successors.includes(e)?{id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:t.successors.slice().concat([e])}:t);if(console.log("\ud83d\udd04 Estado actualizado de tareas:",a.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,successors:e.successors,dependencyType:e.dependencyType}))),x&&x.id===e){const t=a.find(t=>t.id===e);t&&y(t)}return a})},[nt]),it=((0,t.useCallback)(e=>{const t=e.target.value;console.log("\ud83d\udd24 CAMPO NOMBRE - handleNameChange:",{valorAnterior:w,valorNuevo:t,taskId:null===x||void 0===x?void 0:x.id}),j(t)},[w,null===x||void 0===x?void 0:x.id]),(0,t.useCallback)(()=>{x&&w!==x.name&&(console.log("\ud83d\udd24 CAMPO NOMBRE - handleNameBlur - Guardando:",{valorAnterior:x.name,valorNuevo:w,taskId:x.id}),tt(x.id,"name",w))},[x,w,tt]),(0,t.useCallback)(()=>{x&&(console.log("\ud83d\udd24 CAMPO NOMBRE - handleNameFocus - Restaurando:",{valor:x.name,taskId:x.id}),j(x.name))},[x]),(0,t.useCallback)(e=>{const t=[],r=[];for(const n of e)if(n.predecessors&&0!==n.predecessors.length)for(const a of n.predecessors){let s=e.find(e=>e.id===a);if(!s&&!isNaN(a)){const t=parseInt(a);t>0&&t<=e.length&&(s=e[t-1])}if(!s){t.push('\u274c Tarea "'.concat(n.name,'": La predecesora "').concat(a,'" no existe'));continue}if(n.id===a||n===s){t.push('\u274c Tarea "'.concat(n.name,'": No puede ser predecesora de s\xed misma'));continue}if(nt(n.id,s.id)){t.push('\u274c Tarea "'.concat(n.name,'": Dependencia circular con "').concat(s.name,'"'));continue}const i=new Date(n.startDate);new Date(s.endDate)>i&&r.push('\u26a0\ufe0f Tarea "'.concat(n.name,'": La predecesora "').concat(s.name,'" termina despu\xe9s de que inicia la tarea actual'))}return{errors:t,warnings:r}},[nt])),ot=(0,t.useCallback)((e,t)=>{const r=c.find(e=>e.id===t);if(!r)return{valid:!1,error:"\u274c La tarea predecesora ".concat(t," no existe")};if(e===t)return{valid:!1,error:"\u274c Una tarea no puede ser predecesora de s\xed misma"};const n=c.find(t=>t.id===e);if(n&&r){const e=new Date(n.startDate);if(new Date(r.endDate)>e)return{valid:!1,error:"\u274c La tarea predecesora termina despu\xe9s de que inicia la tarea actual"}}return nt(e,t)?{valid:!1,error:"\u274c Se detectar\xeda una dependencia circular entre ".concat(e," y ").concat(t)}:{valid:!0,error:null}},[c,nt]);(0,t.useCallback)(e=>{console.log("\ud83d\udd17 SELECT PREDECESORA - EVENTO CAPTURADO:",{event:e,type:e.type,target:e.target,value:e.target.value,selectedTask:null===x||void 0===x?void 0:x.id});const t=e.target.value;if(D(t),t&&x&&!x.predecessors.includes(t)){var r;const e=ot(x.id,t);if(!e.valid)return alert(e.error),void(M.current&&(M.current.value=""));const n=[...x.predecessors||[],t],a=(null===(r=document.getElementById("newDependencyType"))||void 0===r?void 0:r.value)||"FS";console.log("\ud83d\udd04 Agregando predecesora desde select:",{tarea:x.id,nuevaPredecesora:t,predecesorasAntes:x.predecessors,predecesorasDespues:n,dependencyType:a}),console.log("\ud83d\udd04 ACTUALIZANDO selectedTask con nuevas predecesoras:",{tarea:x.id,predecesorasAntes:x.predecessors,predecesorasDespues:n,dependencyType:a});const s={id:x.id,wbsCode:x.wbsCode,name:x.name,duration:x.duration,startDate:x.startDate,endDate:x.endDate,progress:x.progress,predecessors:n,cost:x.cost,priority:x.priority,assignedTo:x.assignedTo,isMilestone:x.isMilestone,isCritical:x.isCritical,originalDuration:x.originalDuration,earlyStart:x.earlyStart,earlyFinish:x.earlyFinish,lateStart:x.lateStart,lateFinish:x.lateFinish,totalFloat:x.totalFloat,freeFloat:x.freeFloat,description:x.description,resources:[...x.resources||[]],workPackageId:x.workPackageId,status:x.status,successors:[...x.successors||[]]};console.warn("\ud83d\udea8 ACTUALIZANDO selectedTask:",{antes:x.predecessors,despues:s.predecessors,count:s.predecessors.length}),d(e=>{console.log("\ud83d\udd0d SETTASKS #2 - ACTUALIZANDO ESTADO GLOBAL:",x.id);const t=e.map(e=>e.id===x.id?s:e),r=t.find(e=>e.id===x.id);return r&&y(r),t}),M.current&&(M.current.value="")}},[nt]);(0,t.useEffect)(()=>{const e=document.getElementById("newSuccessor");if(e){const t=e=>{console.log("\ud83c\udfaf EVENT LISTENER DIRECTO - SUCESORA:",e.target.value,"TIPO:",e.type);const t=e.target.value;if(t&&""!==t.trim()&&"Seleccionar tarea sucesora..."!==t){console.log("\ud83c\udfaf PROCESANDO SUCESORA V\xc1LIDA DIRECTO:",t);let e=x;if(!e){var r;const n=null===(r=document.querySelector("[data-task-id]"))||void 0===r?void 0:r.getAttribute("data-task-id");e=n?c.find(e=>e.id===n):c.find(e=>e.id&&e.id!==t)}if(e&&!e.successors.includes(t)){const r=e.successors.slice().concat([t]);console.log("\ud83c\udfaf Agregando sucesora desde event listener directo:",{tarea:e.id,nuevaSucesora:t,sucesorasAntes:e.successors,sucesorasDespues:r});const n={id:e.id,wbsCode:e.wbsCode,name:e.name,duration:e.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,predecessors:[...e.predecessors||[]],cost:e.cost,priority:e.priority,assignedTo:e.assignedTo,isMilestone:e.isMilestone,isCritical:e.isCritical,originalDuration:e.originalDuration,earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,totalFloat:e.totalFloat,freeFloat:e.freeFloat,description:e.description,resources:[...e.resources||[]],workPackageId:e.workPackageId,status:e.status,successors:r};y(n),console.log("\ud83c\udfaf SUCESORA AGREGADA A selectedTask (NO al estado global a\xfan)"),console.log("\ud83c\udfaf SUCESORA AGREGADA EXITOSAMENTE DESDE EVENT LISTENER DIRECTO")}}};return e.addEventListener("change",t),e.addEventListener("input",t),()=>{e.removeEventListener("change",t),e.removeEventListener("input",t)}}},[x,c]);const lt=(0,t.useRef)(x),ct=(0,t.useRef)(nt),dt=(0,t.useRef)(st);(0,t.useEffect)(()=>{lt.current=x,ct.current=nt,dt.current=st},[x,nt]),(0,t.useEffect)(()=>{console.log("\ud83d\udd27 EVENT DELEGATION GLOBAL DESHABILITADO TEMPORALMENTE")},[]);(0,t.useCallback)((e,t)=>{console.log("updateBusinessCase called:",e,t)},[]);const ut=(0,t.useCallback)(()=>{const e=Ke.map(e=>{var t;return{ID:e.id,WBS:e.wbsCode,Name:e.name,Duration:e.duration,StartDate:e.startDate,EndDate:e.endDate,Progress:e.progress,Predecessors:(null===(t=e.predecessors)||void 0===t?void 0:t.join(", "))||"",Resources:e.resources.join(", "),Cost:e.cost,IsMilestone:e.isMilestone,IsCritical:e.isCritical,Status:e.status,EarlyStart:e.earlyStart,EarlyFinish:e.earlyFinish,LateStart:e.lateStart,LateFinish:e.lateFinish,TotalFloat:e.totalFloat,FreeFloat:e.freeFloat}}),t=zw.json_to_sheet(e),r=zw.book_new();zw.book_append_sheet(r,t,"Cronograma");const n=[["Campo","Valor"],["Nombre del Proyecto",b.projectName],["Objetivo",b.objective],["Patrocinador",b.sponsor],["Gerente del Proyecto",b.manager],["Inversi\xf3n Total",b.totalInvestment],["Beneficios Esperados",b.expectedBenefits],["TIR (%)",b.irr],["ROI (%)",b.roi],["Tiempo de Retorno (a\xf1os)",b.paybackPeriod],["VPN",b.npv]],a=zw.aoa_to_sheet(n);zw.book_append_sheet(r,a,"Caso de Negocio"),Ew(r,"".concat(h.projectName,"-").concat((new Date).toISOString().split("T")[0],".xlsx"))},[Ke,h]),ht=(0,t.useCallback)(()=>{const e=zw.book_new(),t=[["#","Tarea","Duraci\xf3n","Inicio","Fin","Progreso (%)","Prioridad","Asignado","Costo","Predecesoras","Hito","Cr\xedtica","Ruta Cr\xedtica"]];Ke.forEach((e,r)=>{var n;t.push([r+1,e.name,"".concat(e.duration,"d"),e.startDate,e.endDate,e.progress||0,e.priority||"Media",e.assignedTo||"Sin asignar",e.cost||0,(null===(n=e.predecessors)||void 0===n?void 0:n.join(", "))||"Sin",e.isMilestone?"S\xed":"No",e.isCritical?"S\xed":"No",e.isCritical?"S\xed":"No"])});const r=zw.aoa_to_sheet(t);r["!cols"]=[{wch:5},{wch:40},{wch:10},{wch:12},{wch:12},{wch:12},{wch:12},{wch:20},{wch:12},{wch:30},{wch:8},{wch:8},{wch:12}],zw.book_append_sheet(e,r,"Cronograma");const n=[["INFORMACI\xd3N DEL PROYECTO"],["Nombre del Proyecto",h.projectName],["Fecha de Inicio",h.startDate],["Fecha de Fin",h.endDate],["Presupuesto Total",h.totalBudget],[""],["ESTAD\xcdSTICAS DEL CRONOGRAMA"],["Total de Tareas",Ke.length],["Tareas Cr\xedticas",Ke.filter(e=>e.isCritical).length],["Hitos",Ke.filter(e=>e.isMilestone).length],["Duraci\xf3n Total (d\xedas)",Math.max(...Ke.map(e=>new Date(e.endDate).getTime()))-Math.min(...Ke.map(e=>new Date(e.startDate).getTime()))/864e5],[""],["FECHA DE EXPORTACI\xd3N"],["Exportado el",(new Date).toLocaleString("es-ES")]],a=zw.aoa_to_sheet(n);a["!cols"]=[{wch:25},{wch:30}],zw.book_append_sheet(e,a,"Resumen"),Ew(e,"Cronograma-".concat(h.projectName,"-").concat((new Date).toISOString().split("T")[0],".xlsx"))},[Ke,h]),ft=((0,t.useCallback)(e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;const n=new FileReader;n.onload=e=>{try{const a=JSON.parse(e.target.result);var t,r,n;if(a.tasks&&d(a.tasks),a.baseline&&W(a.baseline),a.settings)_(a.settings.viewMode||"excel"),L(a.settings.ganttScale||"days"),B(null===(t=a.settings.showCriticalPath)||void 0===t||t),U(null===(r=a.settings.showDependencies)||void 0===r||r),V(null!==(n=a.settings.showBaseline)&&void 0!==n&&n);alert("Proyecto cargado exitosamente")}catch(a){alert("Error al cargar el proyecto. Verifica el formato del archivo.")}},n.readAsText(r)},[]),(0,t.useMemo)(()=>{var e,t;if(0===c.length)return{start:new Date,end:new Date};const r=c.flatMap(e=>[new Date(e.startDate),new Date(e.endDate)]),n={start:new Date(Math.min(...r.map(e=>e.getTime()))),end:new Date(Math.max(...r.map(e=>e.getTime())))};return console.log("\ud83d\udcc5 PROJECT DATES CALCULADO (FECHAS ORIGINALES):",{start:o0(n.start),end:o0(n.end),totalTasks:c.length,firstTaskDate:null===(e=c[0])||void 0===e?void 0:e.startDate,lastTaskDate:null===(t=c[c.length-1])||void 0===t?void 0:t.endDate,allStartDates:c.map(e=>e.startDate),minStartDate:Math.min(...c.map(e=>new Date(e.startDate).getTime())),minStartDateISO:o0(new Date(Math.min(...c.map(e=>new Date(e.startDate).getTime()))))}),n},[c])),pt=(0,t.useMemo)(()=>{const e=o0(ft.start),t=o0(ft.end);return Math.max(1,u0(e,c0(t,1,p),p))},[ft]),mt=(0,t.useMemo)(()=>{switch(R){case"days":return 28;case"weeks":return 10;case"months":return 4;default:return 20}},[R]),gt=(0,t.useMemo)(()=>pt*mt,[pt,mt]),vt=(0,t.useMemo)(()=>{const e=Ke.filter(e=>e.isCritical).length,t=Ke.filter(e=>100===e.progress).length,r=Ke.reduce((e,t)=>e+t.cost,0),n=o0(new Date),a=Ke.reduce((e,t)=>{const r=Math.max(1,p0(t.startDate,t.endDate,p)),a=(e=>Math.min(1,Math.max(0,e)))(u0(t.startDate,n,p)/r);return e+t.cost*a},0),s=Ke.reduce((e,t)=>e+t.cost*(t.progress/100),0),i=a>0?s/a:1,o=s>0?s/s:1,l=Ke.length>0?t/Ke.length*100:0,c=r,d=h.totalBudget>0?r/h.totalBudget*100:0;return{totalTasks:Ke.length,criticalTasks:e,completedTasks:t,totalCost:r,earnedValue:Math.round(s),plannedValue:Math.round(a),spi:i.toFixed(2),cpi:o.toFixed(2),progressPercentage:l.toFixed(1),investmentToDate:c,projectedROI:d.toFixed(1)}},[Ke,h]),[bt,xt]=(0,t.useState)(!1),[yt,wt]=(0,t.useState)({name:"",duration:5,startDate:o0(new Date),endDate:c0(o0(new Date),5),description:"",priority:"medium",assignedTo:"",cost:0,selectedPredecessors:[]}),jt=e=>{console.log("\ud83d\udcca FALLBACK: Intentando con FileReader...");const t=new FileReader;t.onload=e=>{try{console.log("\ud83d\udcca FileReader fallback: datos recibidos");const t=new Uint8Array(e.target.result);if(console.log("\ud83d\udcca Datos convertidos a Uint8Array, tama\xf1o:",t.length),0===t.length)throw new Error("El archivo est\xe1 vac\xedo");const r=ww(t,{type:"array"});console.log("\ud83d\udcca Workbook creado exitosamente en fallback"),Nt(r)}catch(t){console.error("\u274c Error procesando en fallback:",t),alert("\u274c No se pudo procesar el archivo Excel. Verifica que el archivo no est\xe9 corrupto y que sea un formato v\xe1lido (.xlsx o .xls).")}},t.onerror=e=>{var t;console.error("\u274c Error en FileReader fallback:",e),console.error("\u274c Detalles del error fallback:",null===(t=e.target)||void 0===t?void 0:t.error),alert("\u274c No se pudo leer el archivo con ning\xfan m\xe9todo. Por favor intenta con otro archivo o verifica que no est\xe9 corrupto.")},t.readAsDataURL(e)},Nt=e=>{try{console.log("\ud83d\udcca Procesando workbook, hojas disponibles:",e.SheetNames);const t=e.Sheets[e.SheetNames[0]],r=zw.sheet_to_json(t,{header:1});if(console.log("\ud83d\udcca Datos convertidos a JSON, filas:",r.length),console.log("\ud83d\udcca Datos Excel importados:",r),r.length<2)return void alert("El archivo Excel debe tener al menos una fila de encabezados y una fila de datos");const n=r[0];console.log("\ud83d\udcca Encabezados encontrados:",n);const a={nombre:n.findIndex(e=>e&&e.toString().toLowerCase().includes("nombre")),duracion:n.findIndex(e=>e&&e.toString().toLowerCase().includes("duraci")),inicio:n.findIndex(e=>e&&e.toString().toLowerCase().includes("inicio")),fin:n.findIndex(e=>e&&e.toString().toLowerCase().includes("fin")),progreso:n.findIndex(e=>e&&e.toString().toLowerCase().includes("progreso")),prioridad:n.findIndex(e=>e&&e.toString().toLowerCase().includes("prioridad")),asignado:n.findIndex(e=>e&&e.toString().toLowerCase().includes("asignado")),costo:n.findIndex(e=>e&&e.toString().toLowerCase().includes("costo")),predecesoras:n.findIndex(e=>e&&e.toString().toLowerCase().includes("predecesor")),hitos:n.findIndex(e=>e&&e.toString().toLowerCase().includes("hito"))};console.log("\ud83d\udcca Mapeo de columnas:",a);const s=[];(new Date).toISOString();for(let e=1;e<r.length;e++){const t=r[e];if(!t||t.every(e=>!e))continue;const n=parseInt(t[a.duracion])||5;let i=0===n;if(-1!==a.hitos&&t[a.hitos]){const e=t[a.hitos].toString().toLowerCase().trim();i="s\xed"===e||"si"===e||"yes"===e||"1"===e||"true"===e}const o=e=>{if(!e)return(new Date).toISOString().split("T")[0];if("number"===typeof e)try{return jd.parse_date_code(e)}catch(t){return console.warn("Error parsing date code:",e,t),(new Date).toISOString().split("T")[0]}try{const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date value:",e),(new Date).toISOString().split("T")[0]):t.toISOString().split("T")[0]}catch(t){return console.warn("Error parsing date:",e,t),(new Date).toISOString().split("T")[0]}},l=o(t[a.inicio]),c=i?l:o(t[a.fin]),d=t[a.nombre]||"Tarea ".concat(e),u=n0(d);if(!u.valid){console.error("\u274c Error en fila ".concat(e+1,": ").concat(u.error));continue}const h=a0(n);if(!h.valid){console.error("\u274c Error en fila ".concat(e+1,": ").concat(h.error));continue}const f=s0(l);if(!f.valid){console.error("\u274c Error en fila ".concat(e+1,": ").concat(f.error));continue}const m={id:crypto.randomUUID(),wbsCode:"".concat(e),name:u.sanitized,duration:i?0:Math.max(1,p0(l,c,p)),startDate:f.value,endDate:c,progress:Math.max(0,Math.min(100,parseInt(t[a.progreso])||0)),priority:r0(t[a.prioridad]||"medium"),assignedTo:r0(t[a.asignado]||""),cost:Math.max(0,parseFloat(t[a.costo])||0),predecessors:[],successors:[],isMilestone:i,originalDuration:i?1:n,description:"",resources:[],status:"pending"};if(t[a.predecesoras]){const r=t[a.predecesoras].toString();console.log("\ud83d\udd0d Procesando predecesoras para tarea ".concat(e,': "').concat(r,'"'));const n=r.split(",").map(e=>e.trim()).filter(Boolean);console.log("\ud83d\udd0d Valores de predecesoras procesados: [".concat(n.join(", "),"]")),m.predecessors=n,console.log("\ud83d\udd0d Predecesoras temporales (wbsCode): [".concat(m.predecessors.join(", "),"]"))}s.push(m)}if(console.log("\ud83d\udcca Tareas procesadas:",s),0===s.length)return void alert("No se encontraron tareas v\xe1lidas en el archivo Excel");console.log("\ud83d\udd04 Procesando predecesoras con wbsCode como referencia..."),s.forEach(e=>{if(e.predecessors&&e.predecessors.length>0){const t=e.predecessors.map(e=>{const t=s.find(t=>t.wbsCode===e);return t?(console.log("\u2705 Predecesora encontrada: wbsCode ".concat(e," \u2192 ID ").concat(t.id)),t.id):(console.warn("\u26a0\ufe0f Predecesora no encontrada: wbsCode ".concat(e)),null)}).filter(Boolean);e.predecessors=t,console.log('\ud83d\udd17 Tarea "'.concat(e.name,'": predecesoras convertidas a IDs: [').concat(t.join(", "),"]"))}}),console.log("\ud83d\udd0d Validando predecesoras del Excel...");const i=it(s);if(i.errors.length>0){const e="\u274c ERRORES ENCONTRADOS EN EL ARCHIVO EXCEL:\n\n".concat(i.errors.join("\n"));return void alert(e)}if(i.warnings.length>0){const e="\u26a0\ufe0f ADVERTENCIAS ENCONTRADAS:\n\n".concat(i.warnings.join("\n"),"\n\n\xbfDeseas continuar con la importaci\xf3n?");if(!window.confirm(e))return}console.log("\u2705 Validaci\xf3n de predecesoras completada exitosamente"),console.log("\ud83d\udcca IMPORTACI\xd3N - REEMPLAZANDO CRONOGRAMA COMPLETO"),console.log("\ud83d\udcca IMPORTACI\xd3N - Tareas anteriores:",(null===c||void 0===c?void 0:c.length)||0),console.log("\ud83d\udcca IMPORTACI\xd3N - Nuevas tareas:",s.length),console.log("\ud83d\udcca IMPORTACI\xd3N - Primeras 3 tareas nuevas:",s.slice(0,3)),console.log("\ud83d\udcca IMPORTACI\xd3N - importTasks es funci\xf3n?",typeof u);const o="\u26a0\ufe0f IMPORTACI\xd3N DE CRONOGRAMA COMPLETO\n\n"+"Tareas actuales: ".concat((null===c||void 0===c?void 0:c.length)||0,"\n")+"Nuevas tareas: ".concat(s.length,"\n\n")+"Esto REEMPLAZAR\xc1 COMPLETAMENTE el cronograma actual.\nLas tareas de minuta existentes podr\xedan quedar sin hito asignado.\n\n\xbfContinuar con la importaci\xf3n?";if(!window.confirm(o))return void console.log("\ud83d\udcca IMPORTACI\xd3N - Cancelada por el usuario");const l=i0(s);if(console.log("\ud83d\udcca IMPORTACI\xd3N - Tareas ordenadas por wbsCode:",l.map(e=>({name:e.name,wbsCode:e.wbsCode}))),"function"===typeof u)u(l),console.log("\ud83d\udcca IMPORTACI\xd3N - importTasks llamado exitosamente - CRONOGRAMA REEMPLAZADO");else{if(console.error("\u274c IMPORTACI\xd3N - importTasks no est\xe1 disponible, usando setTasks como fallback"),"function"!==typeof d)return console.error("\u274c IMPORTACI\xd3N - Ni importTasks ni setTasks est\xe1n disponibles"),void alert("Error: No se puede completar la importaci\xf3n. Las funciones de actualizaci\xf3n no est\xe1n disponibles.");d(l),console.log("\ud83d\udcca IMPORTACI\xd3N - setTasks llamado como fallback - CRONOGRAMA REEMPLAZADO")}const h=new CustomEvent("dataChange",{detail:{type:"schedule_imported",taskCount:s.length,timestamp:(new Date).toISOString()}});window.dispatchEvent(h);const m=s.map(e=>new Date(e.startDate)),g=s.map(e=>new Date(e.endDate)),v=new Date(Math.min(...m)),b=new Date(Math.max(...g));f&&f({tasks:s,projectStart:v.toISOString().split("T")[0],projectEnd:b.toISOString().split("T")[0],totalTasks:s.length,completedTasks:s.filter(e=>"completed"===e.status).length,totalCost:s.reduce((e,t)=>e+(t.cost||0),0)}),alert("\u2705 CRONOGRAMA REEMPLAZADO EXITOSAMENTE!\n\n\ud83d\udcca ".concat(s.length," tareas cargadas (cronograma anterior eliminado)\n\ud83d\udcc5 Proyecto: ").concat(v.toLocaleDateString("es")," - ").concat(b.toLocaleDateString("es"),"\n\n\u26a0\ufe0f Las tareas de minuta existentes podr\xedan necesitar reasignaci\xf3n de hitos."))}catch(t){console.error("\u274c Error al procesar workbook:",t),alert("Error al procesar el archivo Excel. Verifica que tenga el formato correcto.")}},_t=(e,t,r)=>{if(k({taskId:e,field:t}),"startDate"===t||"endDate"===t)if(r)if(r.match(/^\d{4}-\d{2}-\d{2}$/))E(r);else{const e=r.split("/");if(3===e.length){const t=e[0].padStart(2,"0"),r=e[1].padStart(2,"0"),n=e[2];E("".concat(n,"-").concat(r,"-").concat(t))}else E(r)}else E("");else E(r)},St=()=>{Q(!0)},Et=e=>{se(e),oe(!0)};(0,t.useEffect)(()=>{(async()=>{if(g&&null!==h&&void 0!==h&&h.id)try{var e;console.log("\ud83d\udd0d DEBUG - Inicializando servicio de IA:",{projectId:h.id,organizationId:h.organizationId,organizationIdType:typeof h.organizationId,hasOrganizationId:!!h.organizationId,currentUser:null===(e=kt.default.currentUser)||void 0===e?void 0:e.email}),await ZQ.initialize(kt.default.supabase,h.organizationId,kt.default.currentUser),console.log("\ud83e\udd16 Servicio de IA inicializado para proyecto:",h.id)}catch(t){console.error("\u274c Error inicializando servicio de IA:",t)}else console.log("\u26a0\ufe0f No se puede inicializar servicio de IA:",{useSupabase:g,hasProjectId:!(null===h||void 0===h||!h.id),projectData:h})})()},[g,null===h||void 0===h?void 0:h.id,null===h||void 0===h?void 0:h.organizationId]);const Ct=()=>{if(!S)return;const{taskId:e,field:t}=S,r=A;if(console.log("\ud83d\udcbe SAVEEDIT - INICIANDO:",{taskId:e,field:t,newValue:r,tasksLength:c?c.length:"UNDEFINED"}),"dependencies"===t)return void Dt();d(n=>(console.log("\ud83d\udcbe SAVEEDIT - Estado ANTES de actualizar:",{prevLength:n?n.length:"UNDEFINED",prevTasks:n?n.map(e=>({id:e.id,name:e.name})):"UNDEFINED"}),n.map(n=>{if(n.id===e){const e={id:n.id,wbsCode:n.wbsCode,name:n.name,duration:n.duration,startDate:n.startDate,endDate:n.endDate,progress:n.progress,predecessors:[...n.predecessors||[]],cost:n.cost,priority:n.priority,assignedTo:n.assignedTo,isMilestone:n.isMilestone,isCritical:n.isCritical,originalDuration:n.originalDuration,earlyStart:n.earlyStart,earlyFinish:n.earlyFinish,lateStart:n.lateStart,lateFinish:n.lateFinish,totalFloat:n.totalFloat,freeFloat:n.freeFloat,description:n.description,resources:[...n.resources||[]],workPackageId:n.workPackageId,status:n.status,successors:[...n.successors||[]]};switch(t){case"name":e.name=r;break;case"duration":const t=parseInt(r)||1;if(e.duration=t,e.isMilestone)e.endDate=e.startDate;else if(p){const r=new Date(e.startDate);r.setDate(r.getDate()+t-1),e.endDate=o0(r)}else e.endDate=c0(e.startDate,t,p);break;case"startDate":if(e.startDate=r,e.isMilestone)e.endDate=r;else if(p){const t=new Date(r);t.setDate(t.getDate()+e.duration-1),e.endDate=o0(t)}else e.endDate=c0(r,e.duration,p);break;case"endDate":e.endDate=r;break;case"progress":e.progress=Math.max(0,Math.min(100,parseInt(r)||0));break;case"priority":e.priority=r;break;case"assignedTo":e.assignedTo=r;break;case"cost":e.cost=parseFloat(r)||0}return e}return n})));const n=new CustomEvent("dataChange",{detail:{type:"taskUpdated",taskId:e,field:t,newValue:r,timestamp:(new Date).toISOString()}});window.dispatchEvent(n),console.log("\ud83d\udcbe SAVEEDIT - COMPLETADO"),k(null),E("")},Tt=()=>{k(null),E("")},Pt=e=>{S&&("Enter"===e.key?(e.preventDefault(),Ct()):"Escape"===e.key&&(e.preventDefault(),Tt()))},Dt=()=>{if(!S||"dependencies"!==S.field)return;const{taskId:e}=S;try{const t=A.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e)&&e>0);console.log("\ud83d\udcbe Guardando dependencias para tarea ".concat(e,": n\xfameros wbsCode [").concat(t.join(", "),"]"));const r=t.map(e=>{const t=c.find(t=>parseInt(t.wbsCode)===e);return t?(console.log("\u2705 Predecesora encontrada: wbsCode ".concat(e," \u2192 ID ").concat(t.id)),t.id):(console.warn("\u26a0\ufe0f Predecesora no encontrada: wbsCode ".concat(e)),null)}).filter(e=>e);d(t=>t.map(t=>{if(t.id===e){const n={id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]]};return n.predecessors=r,n.successors=[],((e,t)=>{d(r=>r.map(r=>{if(r.id===e)return{id:r.id,wbsCode:r.wbsCode,name:r.name,duration:r.duration,startDate:r.startDate,endDate:r.endDate,progress:r.progress,predecessors:[...t||[]],cost:r.cost,priority:r.priority,assignedTo:r.assignedTo,isMilestone:r.isMilestone,isCritical:r.isCritical,originalDuration:r.originalDuration,earlyStart:r.earlyStart,earlyFinish:r.earlyFinish,lateStart:r.lateStart,lateFinish:r.lateFinish,totalFloat:r.totalFloat,freeFloat:r.freeFloat,description:r.description,resources:[...r.resources||[]],workPackageId:r.workPackageId,status:r.status,successors:[]};let n={id:r.id,wbsCode:r.wbsCode,name:r.name,duration:r.duration,startDate:r.startDate,endDate:r.endDate,progress:r.progress,predecessors:[...r.predecessors||[]],cost:r.cost,priority:r.priority,assignedTo:r.assignedTo,isMilestone:r.isMilestone,isCritical:r.isCritical,originalDuration:r.originalDuration,earlyStart:r.earlyStart,earlyFinish:r.earlyFinish,lateStart:r.lateStart,lateFinish:r.lateFinish,totalFloat:r.totalFloat,freeFloat:r.freeFloat,description:r.description,resources:[...r.resources||[]],workPackageId:r.workPackageId,status:r.status,successors:[...r.successors||[]]};return t.includes(r.id)?n.successors.includes(e)||(n.successors=n.successors.slice().concat([e])):n.successors=n.successors.filter(t=>t!==e),n}))})(e,r),n}return t})),k(null),E("")}catch(t){console.error("Error al guardar dependencias:",t),k(null),E("")}},Ot=(0,t.useMemo)(()=>{const e=o0(ft.start),t=e;return console.log("\ud83c\udfaf TIMELINE REFERENCE DATE CALCULADO (CORREGIDO):",{originalProjectStart:e,includeWeekends:p,referenceDate:t,isShifted:e!==t,shiftDays:e!==t?Math.round((new Date(t)-new Date(e))/864e5):0,note:"Usando fecha original sin aplicar findFirstWorkingDay para alineaci\xf3n perfecta con tabla"}),t},[ft.start,p]),It=(0,t.useMemo)(()=>{const e=o0(new Date),t=h0(e,Ot,p);return Math.min(Math.max(0,t*mt),gt)},[Ot,mt,gt,p]),Mt=()=>{const e=Ot;return console.log("\ud83c\udfaf GANTT BARS REFERENCIA:",{pStart:e,projectDatesStart:o0(ft.start),includeWeekends:p,pxPerDay:mt}),Ke.map(t=>{const r=t.startDate,n=t.endDate,a=h0(r,e,p),s=h0(n,e,p),i=Math.max(1,s-a+1);if(t.name.includes("Aprobaci\xf3n")||t.name.includes("Generaci\xf3n")||t.name.includes("Env\xedo")||t.name.includes("Soluci\xf3n")){console.log("\ud83c\udd95 GANTT USANDO FECHAS DE TABLA (CORREGIDO DEFINITIVAMENTE):"),console.log("   taskName:",t.name),console.log("   \ud83d\udccb FECHAS DE TABLA (las que rigen):"),console.log("   - tableStartDate:",r),console.log("   - tableEndDate:",n),console.log("   \ud83e\uddee FECHAS CALCULADAS POR CPM (solo informativas):"),console.log("   - earlyStart:",t.earlyStart),console.log("   - earlyFinish:",t.earlyFinish),console.log("   \ud83d\udcca C\xc1LCULOS GANTT (usando findColumnIndex corregido para alineaci\xf3n perfecta):"),console.log("   - projectStart:",e),console.log("   - includeWeekends:",p),console.log("   - leftDays (findColumnIndex corregido):",a),console.log("   - endColumnIndex (findColumnIndex corregido):",s),console.log("   - durDays (diferencia de columnas):",i),console.log("   - leftPx calculado:",a*mt),console.log("   - widthPx calculado:",i*mt),t.name.includes("Aprobaci\xf3n")&&(console.log("\ud83d\udd0d DEBUG ESPEC\xcdFICO TAREA 1:"),console.log("   - Fecha inicio tabla:",r),console.log("   - Fecha referencia proyecto:",e),console.log("   - includeWeekends:",p),console.log("   - leftDays (findColumnIndex corregido):",a),console.log("   - leftPx calculado:",a*mt),console.log("   - \xbfDeber\xeda ser 1?",r===e?"S\xcd (ahora corregido)":"NO"));const o=new Date(r).toLocaleDateString("es-ES"),l=new Date(n).toLocaleDateString("es-ES");console.log("   \ud83d\udcc5 FECHAS MOSTRADAS EN TABLA:"),console.log("   - Inicio:",o),console.log("   - Fin:",l),console.log("   - \xbfLas barras se alinean con estas fechas?","S\xcd (usando findColumnIndex corregido)"),console.log("   - \xbfRespeta includeWeekends?","S\xcd (usando findColumnIndex corregido)"),console.log("   - \xbfDesfase de un d\xeda corregido?","S\xcd (cambio de < a <= en findColumnIndex)"),r===t.earlyStart&&n===t.earlyFinish||(console.log("   \u26a0\ufe0f DIFERENCIA ENTRE TABLA Y CPM:"),console.log("   - Tabla inicio:",r,"vs CPM inicio:",t.earlyStart),console.log("   - Tabla fin:",n,"vs CPM fin:",t.earlyFinish),console.log("   \u2705 GANTT USAR\xc1 FECHAS DE TABLA (correcto)"))}return{id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:r,endDate:n,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]],leftPx:a*mt,widthPx:t.isMilestone?12:Math.max(1,i*mt)}})},Rt=((0,t.useMemo)(()=>{if(0===Ke.length)return[];const e=[];return Ke.forEach(t=>{t.predecessors.forEach(r=>{const n=Ke.find(e=>e.id===r);n&&e.push({id:"".concat(r,"-").concat(t.id),source:r,target:t.id,type:"predecessor",isCritical:t.isCritical&&n.isCritical})})}),e},[Ke]),()=>{if(!He.current||0===Je.length)return;let e=1/0,t=1/0,r=-1/0,n=-1/0;Je.forEach(a=>{e=Math.min(e,a.x),t=Math.min(t,a.y),r=Math.max(r,a.x+a.width),n=Math.max(n,a.y+a.height)});const a=r-e,s=n-t;if(0===a||0===s)return;const i=1200/a,o=600/s,l=Math.min(i,o,2),c=Math.max(.3,l);Ee(c);Te({x:(e+r)/2-1200/(2*c),y:(t+n)/2-600/(2*c)})});(0,t.useMemo)(()=>{const e=Ke.length,t=Ke.reduce((e,t)=>e+t.predecessors.length,0),r=Ke.filter(e=>e.isCritical).length;console.log("\ud83d\udcca M\xc9TRICAS DEL DIAGRAMA:",{totalNodes:e,totalEdges:t,criticalPathLength:r,tareasConDeps:Ke.filter(e=>e.predecessors.length>0).length,detalleDeps:Ke.map(e=>({id:e.id,name:e.name,predecessors:e.predecessors,count:e.predecessors.length}))});const n=new Map,a=new Set,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(a.has(e))return n.get(e)||0;if(r.has(e))return console.warn("Dependencia circular detectada en tarea (an\xe1lisis):",e),n.set(e,t),a.add(e),t;r.add(e),a.add(e);const i=Ke.find(t=>t.id===e);if(!i)return r.delete(e),t;let o=t;for(const n of i.predecessors){const e=s(n,t+1,r);o=Math.max(o,e)}return n.set(e,o),r.delete(e),o};for(const i of Ke)s(i.id);return{totalNodes:e,totalEdges:t,criticalPathLength:r,maxDepth:Math.max(...n.values(),0)}},[Ke]);return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-2xl shadow-lg p-6 mb-8 border border-blue-200 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-indigo-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsxs)("div",{className:"relative z-10",children:[(0,At.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-blue-100 rounded-2xl p-3 mr-4",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Cronograma del Proyecto"}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Gesti\xf3n de tiempo, dependencias y recursos integrada con EVM"})]})]}),(0,At.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,At.jsxs)("button",{onClick:ut,className:"bg-white text-gray-700 px-4 py-2 rounded-xl hover:bg-blue-50 flex items-center space-x-2 transition-all duration-300 border border-gray-300 hover:border-blue-300 text-sm shadow-sm",children:[(0,At.jsx)("span",{children:"\ud83d\udce5"}),(0,At.jsx)("span",{children:"Exportar"})]}),(0,At.jsxs)("button",{onClick:()=>(()=>{const e=Ke.filter(e=>e.isCritical);if(0===e.length)return void alert("No hay tareas cr\xedticas para comprimir");const t=e.map(e=>({id:e.id,wbsCode:e.wbsCode,name:e.name,duration:e.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,predecessors:[...e.predecessors||[]],cost:e.cost,priority:e.priority,assignedTo:e.assignedTo,isMilestone:e.isMilestone,isCritical:e.isCritical,originalDuration:e.originalDuration,earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,totalFloat:e.totalFloat,freeFloat:e.freeFloat,description:e.description,resources:[...e.resources||[]],workPackageId:e.workPackageId,status:e.status,successors:[...e.successors||[]],compressionPotential:Math.min(.3*e.duration,5),compressionCost:.2*e.cost})).sort((e,t)=>t.compressionPotential-e.compressionPotential),r=t.slice(0,3).map(e=>"".concat(e.name,": -").concat(e.compressionPotential," d\xedas ($").concat(e.compressionCost.toFixed(2),"/d\xeda)")).join("\n"),n=prompt("\xbfCu\xe1ntos d\xedas quieres comprimir del cronograma?\n\nOpciones de compresi\xf3n:\n".concat(r,"\n\nIngresa el n\xfamero de d\xedas:"),"1");if(n&&!isNaN(n)){const e=parseInt(n);let t=0,r=0;const a=Ke.map(n=>{if(n.isCritical&&t<e){const a=Math.min(n.compressionPotential,e-t);if(a>0)return t+=a,r+=a*n.compressionCost,{id:n.id,wbsCode:n.wbsCode,name:n.name,duration:Math.max(1,n.duration-a),startDate:n.startDate,endDate:n.endDate,progress:n.progress,predecessors:[...n.predecessors||[]],cost:n.cost,priority:n.priority,assignedTo:n.assignedTo,isMilestone:n.isMilestone,isCritical:n.isCritical,originalDuration:n.originalDuration,earlyStart:n.earlyStart,earlyFinish:n.earlyFinish,lateStart:n.lateStart,lateFinish:n.lateFinish,totalFloat:n.totalFloat,freeFloat:n.freeFloat,description:n.description,resources:[...n.resources||[]],workPackageId:n.workPackageId,status:n.status,successors:[...n.successors||[]],compressedDays:(n.compressedDays||0)+a,compressionCost:(n.compressionCost||0)+a*n.compressionCost}}return n});t>0?(d(a),alert("\u2705 Cronograma comprimido ".concat(t," d\xedas\n\ud83d\udcb0 Costo adicional: $").concat(r.toFixed(2)))):alert("No se pudo comprimir el cronograma con los par\xe1metros especificados")}})(),className:"bg-white text-gray-700 px-4 py-2 rounded-xl hover:bg-blue-50 flex items-center space-x-2 transition-all duration-300 border border-gray-300 hover:border-blue-300 text-sm shadow-sm",title:"Comprimir cronograma (en desarrollo)",children:[(0,At.jsx)("span",{children:"\ud83d\ude80"}),(0,At.jsx)("span",{children:"Comprimir"})]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4 mb-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udcc5"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Inicio"})]}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-800",children:Ke.length>0?(()=>{const e=Ke.map(e=>new Date(e.startDate));return new Date(Math.min(...e)).toLocaleDateString("es")})():null!==h&&void 0!==h&&h.startDate?new Date(h.startDate).toLocaleDateString("es"):"N/A"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udcc5"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Fin"})]}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-800",children:(()=>{if(Ke.length>0){const e=Ke.filter(e=>e.endDate&&null!==e.endDate&&void 0!==e.endDate).map(e=>{const[t,r,n]=e.endDate.split("-");return new Date(parseInt(t),parseInt(r)-1,parseInt(n))}).filter(e=>!isNaN(e.getTime())),t=new Date(Math.max(...e)),r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),s="".concat(a,"/").concat(n,"/").concat(r);return console.log("\ud83d\udd0d DEBUG - Fecha de fin del cronograma (usando fechas de tabla):",{totalTasks:Ke.length,originalEndDates:e.map(e=>e&&!isNaN(e.getTime())?e.toISOString().split("T")[0]:"N/A"),maxEndDate:t&&!isNaN(t.getTime())?t.toISOString().split("T")[0]:"N/A",year:r,month:n,day:a,formattedDate:s}),s}return null!==h&&void 0!==h&&h.endDate?new Date(h.endDate).toLocaleDateString("es"):"N/A"})()})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udcb0"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Presupuesto"})]}),(0,At.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["$",Ke.reduce((e,t)=>e+(t.cost||0),0).toLocaleString()]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-red-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83d\udd25"}),(0,At.jsx)("span",{className:"text-sm font-medium text-red-600",children:"Ruta Cr\xedtica"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===Ge||void 0===Ge?void 0:Ge.criticalPathLength)||0}),(0,At.jsx)("div",{className:"text-sm text-red-600",children:"d\xedas"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-red-200 hover:shadow-md transition-all duration-300",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("span",{className:"text-lg",children:"\u26a0\ufe0f"}),(0,At.jsx)("span",{className:"text-sm font-medium text-red-600",children:"Tareas Cr\xedticas"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===Ge||void 0===Ge||null===(r=Ge.criticalPath)||void 0===r?void 0:r.length)||0}),(0,At.jsx)("div",{className:"text-sm text-red-600",children:"tareas"})]})]}),(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-xl p-4 border border-blue-200 mb-4",children:(0,At.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-4",children:[(0,At.jsxs)("div",{className:"text-center lg:text-left",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-1 flex items-center justify-center lg:justify-start",children:[(0,At.jsx)("span",{className:"mr-2 text-xl",children:"\ud83d\udcca"}),"Selecciona la Vista"]}),(0,At.jsx)("p",{className:"text-gray-600 text-sm",children:"Elige la visualizaci\xf3n que mejor se adapte a tu an\xe1lisis"})]}),(0,At.jsxs)("div",{className:"flex flex-wrap justify-center lg:justify-end gap-2",children:[(0,At.jsxs)("button",{onClick:()=>_("gantt"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-300 flex items-center space-x-2 ".concat("gantt"===N?"bg-indigo-600 text-white shadow-md hover:shadow-lg":"bg-white text-gray-600 hover:bg-indigo-50 hover:text-indigo-700 border border-gray-300 hover:border-indigo-300"),children:[(0,At.jsx)("span",{children:"\ud83d\udcca"}),(0,At.jsx)("span",{children:"Gantt"})]}),(0,At.jsxs)("button",{onClick:()=>_("excel"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-300 flex items-center space-x-2 ".concat("excel"===N?"bg-indigo-600 text-white shadow-md hover:shadow-lg":"bg-white text-gray-600 hover:bg-indigo-50 hover:text-indigo-700 border border-gray-300 hover:border-indigo-300"),children:[(0,At.jsx)("span",{children:"\ud83d\udccb"}),(0,At.jsx)("span",{children:"Tabla"})]}),(0,At.jsxs)("button",{onClick:()=>_("minutas"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-300 flex items-center space-x-2 ".concat("minutas"===N?"bg-indigo-600 text-white shadow-md hover:shadow-lg":"bg-white text-gray-600 hover:bg-indigo-50 hover:text-indigo-700 border border-gray-300 hover:border-indigo-300"),children:[(0,At.jsx)("span",{children:"\ud83d\udccb"}),(0,At.jsx)("span",{children:"Tareas de minutas"})]})]})]})}),(0,At.jsxs)("div",{className:"space-y-3",children:[X&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"mr-2 text-red-500",children:"\u26a0\ufe0f"}),(0,At.jsxs)("span",{className:"text-sm text-red-700",children:["Error CPM: ",X]})]})}),$e.conflicts.length>0&&(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"mr-2 text-yellow-500",children:"\u26a0\ufe0f"}),(0,At.jsxs)("span",{className:"text-sm text-yellow-700",children:[$e.conflicts.length," conflicto(s) de recursos detectado(s)"]})]})})]})]})]}),"excel"===N&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold",children:"\ud83d\udccb Vista Tabla - Cronograma"}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-2",children:[(0,At.jsx)("input",{type:"checkbox",id:"includeWeekends",checked:p,onChange:e=>{e.stopPropagation(),console.log("\ud83d\udd04 CHECKBOX CLICK:",e.target.checked),m(e.target.checked)},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,At.jsx)("label",{htmlFor:"includeWeekends",className:"text-sm font-medium text-gray-700",children:"S\xe1bados y domingos son laborables"})]}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,At.jsx)("span",{className:"text-blue-600",children:"\ud83d\udcc5 Configuraci\xf3n actual:"}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(p?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:p?"Lunes a Domingo":"Lunes a Viernes"})]})}),(0,At.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg px-3 py-2",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,At.jsx)("span",{className:"text-green-600",children:"\ud83d\udd17 Validaci\xf3n:"}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Predecesoras validadas"})]})})]}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsxs)("button",{onClick:()=>{console.log("\ud83d\udcca GENERANDO ARCHIVO EXCEL DE EJEMPLO");const e=zw.book_new(),t=zw.aoa_to_sheet([["#","Nombre","Duraci\xf3n","Inicio","Fin","Progreso","Prioridad","Asignado","Costo","Predecesoras","Hitos"],[1,"Inicio del Proyecto",0,"2024-01-01","2024-01-01",100,"Alta","PM",0,"","S\xed"],[2,"An\xe1lisis de Requisitos",5,"2024-01-02","2024-01-08",80,"Alta","Analista",5e3,"1","No"],[3,"Dise\xf1o del Sistema",7,"2024-01-09","2024-01-17",60,"Alta","Arquitecto",8e3,"2","No"],[4,"Aprobaci\xf3n del Dise\xf1o",0,"2024-01-18","2024-01-18",0,"Alta","Cliente",0,"3","S\xed"],[5,"Desarrollo Frontend",10,"2024-01-19","2024-01-30",40,"Media","Dev Frontend",12e3,"4","No"],[6,"Desarrollo Backend",12,"2024-01-22","2024-02-06",30,"Media","Dev Backend",15e3,"4","No"],[7,"Integraci\xf3n",3,"2024-02-07","2024-02-11",0,"Alta","Dev Lead",3e3,"5,6","No"],[8,"Pruebas Unitarias",4,"2024-02-12","2024-02-17",0,"Media","QA",2e3,"7","No"],[9,"Pruebas de Integraci\xf3n",0,"2024-02-18","2024-02-18",0,"Alta","QA Lead",0,"8","S\xed"],[10,"Despliegue en Producci\xf3n",2,"2024-02-19","2024-02-22",0,"Alta","DevOps",1e3,"9","No"],[11,"Cierre del Proyecto",0,"2024-02-23","2024-02-23",0,"Alta","PM",0,"10","S\xed"]]);t["!cols"]=[{wch:5},{wch:25},{wch:10},{wch:12},{wch:12},{wch:10},{wch:12},{wch:15},{wch:10},{wch:15},{wch:8}],zw.book_append_sheet(e,t,"Cronograma");const r="Cronograma_Ejemplo_".concat((new Date).toISOString().split("T")[0],".xlsx");Ew(e,r),console.log("\ud83d\udcca Archivo Excel de ejemplo generado:",r)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",title:"Descargar archivo Excel de ejemplo con hitos",children:[(0,At.jsx)("span",{children:"\ud83d\udccb"}),(0,At.jsx)("span",{children:"Descargar Ejemplo"})]}),(0,At.jsxs)("button",{onClick:()=>{var e;return null===(e=We.current)||void 0===e?void 0:e.click()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",title:"Importar cronograma desde Excel (reemplaza datos existentes)",children:[(0,At.jsx)("span",{children:"\ud83d\udcca"}),(0,At.jsx)("span",{children:"Importar Cronograma"})]}),(0,At.jsxs)("button",{onClick:()=>ce(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 flex items-center space-x-2 transition-all transform hover:scale-105",title:"Generar cronograma autom\xe1ticamente con Asistente de IA",children:[(0,At.jsx)("span",{children:"\ud83e\udd16"}),(0,At.jsx)("span",{children:"Asistente de IA"})]}),(0,At.jsx)("input",{ref:We,type:"file",accept:".xlsx,.xls",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&(e=>{if(console.log("\ud83d\udcca IMPORTANDO CRONOGRAMA COMPLETO desde:",e.name),console.log("\ud83d\udcca Tama\xf1o del archivo:",e.size,"bytes"),console.log("\ud83d\udcca Tipo de archivo:",e.type),e)if(e.size>10485760)alert("\u274c El archivo es demasiado grande. El tama\xf1o m\xe1ximo es 10MB");else if(0!==e.size)if(e.type.includes("sheet")||e.type.includes("excel")||e.name.endsWith(".xlsx")||e.name.endsWith(".xls")){console.log("\u2705 Validaciones de archivo pasadas, iniciando lectura...");try{const t=URL.createObjectURL(e);console.log("\ud83d\udcca URL del archivo creada:",t),fetch(t).then(e=>{if(console.log("\ud83d\udcca Fetch response status:",e.status),!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.arrayBuffer()}).then(e=>{console.log("\ud83d\udcca ArrayBuffer recibido, tama\xf1o:",e.byteLength);try{const r=new Uint8Array(e);if(console.log("\ud83d\udcca Datos convertidos a Uint8Array, tama\xf1o:",r.length),0===r.length)throw new Error("El archivo est\xe1 vac\xedo");const n=ww(r,{type:"array"});console.log("\ud83d\udcca Workbook creado exitosamente, hojas disponibles:",n.SheetNames),Nt(n),URL.revokeObjectURL(t)}catch(r){console.error("\u274c Error procesando datos:",r),URL.revokeObjectURL(t),alert("\u274c No se pudo procesar el archivo Excel. Verifica que el archivo no est\xe9 corrupto y que sea un formato v\xe1lido (.xlsx o .xls).")}}).catch(r=>{console.error("\u274c Error en fetch:",r),URL.revokeObjectURL(t),console.log("\ud83d\udcca Intentando fallback con FileReader..."),jt(e)})}catch(t){console.error("\u274c Error creando URL del objeto:",t),console.log("\ud83d\udcca Intentando fallback con FileReader..."),jt(e)}}else alert("\u274c Por favor selecciona un archivo Excel v\xe1lido (.xlsx o .xls)");else alert("\u274c El archivo est\xe1 vac\xedo");else alert("\u274c No se seleccion\xf3 ning\xfan archivo")})(r)},style:{display:"none"}}),(0,At.jsxs)("button",{onClick:ht,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udcca"}),(0,At.jsx)("span",{children:"Descargar Excel"})]})]})]}),(0,At.jsx)("div",{className:"overflow-x-auto overflow-y-auto max-h-[85vh] border border-gray-200 rounded-lg",children:(0,At.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-50",children:[(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-8",children:"#"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-12",children:"Acci\xf3n"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-48",children:"Tarea"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-12",children:"\ud83c\udff9"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-16",children:"Duraci\xf3n"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-24",children:"Inicio"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-24",children:"Fin"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-16",children:"Progreso"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-16",children:"Prioridad"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-24",children:"Asignado"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-16",children:"Costo"}),(0,At.jsx)("th",{className:"border border-gray-300 px-2 py-1.5 text-left text-sm font-medium text-gray-700 w-20",children:"Predecesoras"})]})}),(0,At.jsx)("tbody",{onKeyDown:Pt,children:(()=>{console.log("\ud83d\udd0d DEBUG - Valores de wbsCode antes del ordenamiento:",Ke.map(e=>({name:e.name,wbsCode:e.wbsCode,wbsCodeType:typeof e.wbsCode})));const e=i0(Ke);return console.log("\ud83d\udd0d DEBUG - Valores de wbsCode despu\xe9s del ordenamiento:",e.map(e=>({name:e.name,wbsCode:e.wbsCode,wbsCodeType:typeof e.wbsCode}))),e})().concat([{id:"add-new-task",isAddButton:!0}]).map((e,t)=>e.isAddButton?(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-sm text-gray-400 text-center",children:"+"}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,At.jsx)("div",{className:"flex justify-center",children:(0,At.jsxs)("button",{onClick:e=>{e.stopPropagation(),(()=>{console.log("\ud83d\ude80 AGREGANDO TAREA AL FINAL");let e=o0(new Date),t=c0(e,5,p);if(c.length>0){const r=c[c.length-1];e=c0(r.endDate,1,p),t=c0(e,5,p)}const r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n=(()=>{let e,t=1;do{e=t,t++}while(c.some(t=>t.wbsCode===e));return e})(),a={id:r,wbsCode:n,name:"Nueva Tarea ".concat(n),duration:5,startDate:e,endDate:t,progress:0,predecessors:c.length>0?[c[c.length-1].id]:[],successors:[],resources:[],cost:0,isMilestone:!1,isCritical:!1,originalDuration:5,earlyStart:e,earlyFinish:t,lateStart:e,lateFinish:t,totalFloat:0,freeFloat:0,status:"pending",workPackageId:r,plannedValue:0,earnedValue:0,actualCost:0,description:"",priority:"medium",assignedTo:"",createdDate:o0(new Date),lastModified:o0(new Date)};console.log("\ud83d\ude80 NUEVA TAREA AL FINAL CREADA:",a),d(e=>{const t=[...e,a];if(e.length>0){const n=e[e.length-1].id,a=t.map(e=>e.id===n?(0,s.A)((0,s.A)({},e),{},{successors:[...e.successors||[],r]}):e);return console.log("\u2705 Tarea agregada al final exitosamente"),a}return console.log("\u2705 Primera tarea agregada exitosamente"),t})})()},className:"bg-blue-500 hover:bg-blue-600 text-white text-sm px-4 py-2 rounded-md shadow-sm transition-colors duration-200 flex items-center space-x-2",title:"Agregar nueva tarea al final",children:[(0,At.jsx)("span",{children:"\u2795"}),(0,At.jsx)("span",{children:"Nueva Tarea"})]})})}),(0,At.jsx)("td",{colSpan:"10",className:"border border-gray-300 px-2 py-1 text-sm text-gray-400 text-center",children:"Agregar nueva tarea al final del cronograma"})]},"add-new-task"):(0,At.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(C===e.id?"bg-blue-50":""),onClick:()=>T(e.id),children:[(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-sm text-gray-600 text-center",children:t+1}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,At.jsxs)("div",{className:"flex space-x-1 justify-center",children:[(0,At.jsx)("button",{onClick:r=>{r.stopPropagation(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("\ud83d\ude80 AGREGANDO TAREA - Insertando despu\xe9s de:",e,"en \xedndice visual:",t);const r=c.find(t=>t.id===e);if(!r)return void console.error("\u274c No se encontr\xf3 la tarea de referencia");const n=c0(r.endDate,1,p),a=c0(n,5,p),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),o=(e=>{if(0===e)return 1;const t=c[e-1];if(t&&t.wbsCode){if("number"===typeof t.wbsCode)return t.wbsCode+1;const r=String(t.wbsCode).split(".");if(2===r.length){const e=parseInt(r[0]),t=parseInt(r[1])+1;return"".concat(e,".").concat(t)}return e+1}return e+1})(null!==t?t+1:c.length),l={id:i,wbsCode:o,name:"Nueva Tarea ".concat(o),duration:5,startDate:n,endDate:a,progress:0,predecessors:[e],successors:[],resources:[],cost:0,isMilestone:!1,isCritical:!1,originalDuration:5,earlyStart:n,earlyFinish:a,lateStart:n,lateFinish:a,totalFloat:0,freeFloat:0,status:"pending",workPackageId:i,plannedValue:0,earnedValue:0,actualCost:0,description:"",priority:"medium",assignedTo:"",createdDate:o0(new Date),lastModified:o0(new Date)};console.log("\ud83d\ude80 NUEVA TAREA CREADA:",l),d(t=>{console.log("\ud83d\udd0d DEBUG - Array antes de inserci\xf3n:",t.map((e,t)=>({index:t,id:e.id,name:e.name,wbsCode:e.wbsCode})));const r=t.findIndex(t=>t.id===e);if(-1===r)return console.error("\u274c No se encontr\xf3 la tarea de referencia en el array"),t;const n=r+1,a=[...t.slice(0,n),l,...t.slice(n)];console.log("\ud83d\udd0d DEBUG - Tarea insertada en posici\xf3n:",n),console.log("\ud83d\udd0d DEBUG - Array despu\xe9s de inserci\xf3n:",a.map((e,t)=>({index:t,id:e.id,name:e.name,wbsCode:e.wbsCode})));const o=a.map(t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{successors:[...t.successors||[],i]}):t),c=o.map((e,t)=>(0,s.A)((0,s.A)({},e),{},{wbsCode:t+1}));return console.log("\ud83d\udd0d DEBUG - Array final con wbsCode actualizado:",c.map((e,t)=>({index:t,id:e.id,name:e.name,wbsCode:e.wbsCode}))),console.log("\u2705 Tarea agregada exitosamente en posici\xf3n correcta"),c})}(e.id,t)},className:"bg-green-500 hover:bg-green-600 text-white text-sm px-2 py-1 rounded-md shadow-sm transition-colors duration-200 flex items-center justify-center min-w-[32px]",title:"Insertar fila despu\xe9s (como MS Project)",children:"\u2795"}),(0,At.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=c.find(t=>t.id===e);if(!t)return void console.error("\u274c Tarea no encontrada para eliminar");const r=c.filter(t=>{var r,n;return(null===(r=t.predecessors)||void 0===r?void 0:r.includes(e))||(null===(n=t.successors)||void 0===n?void 0:n.includes(e))});let n='\xbfEst\xe1s seguro de que quieres eliminar la tarea "'.concat(t.name,'"?');r.length>0&&(n+="\n\n\u26a0\ufe0f ADVERTENCIA: Esta tarea tiene dependencias:\n",r.forEach(t=>{var r,a;null!==(r=t.predecessors)&&void 0!==r&&r.includes(e)&&(n+='\u2022 "'.concat(t.name,'" depende de esta tarea\n')),null!==(a=t.successors)&&void 0!==a&&a.includes(e)&&(n+='\u2022 Esta tarea depende de "'.concat(t.name,'"\n'))}),n+="\nLas dependencias se limpiar\xe1n autom\xe1ticamente."),n+="\n\nEsta acci\xf3n no se puede deshacer.",window.confirm(n)&&(console.log("\ud83d\uddd1\ufe0f ELIMINANDO TAREA:",t.name,"ID:",e),console.log("\ud83d\udd17 Tareas dependientes encontradas:",r.length),d(t=>{const r=t.filter(t=>t.id!==e),n=r.map(t=>{var r,n;return(0,s.A)((0,s.A)({},t),{},{predecessors:(null===(r=t.predecessors)||void 0===r?void 0:r.filter(t=>t!==e))||[],successors:(null===(n=t.successors)||void 0===n?void 0:n.filter(t=>t!==e))||[]})}),a=n.map((e,t)=>(0,s.A)((0,s.A)({},e),{},{wbsCode:t+1}));return console.log("\u2705 Tarea eliminada exitosamente"),console.log("\ud83d\udd27 wbsCode reasignados despu\xe9s de eliminaci\xf3n:",a.map(e=>({name:e.name,wbsCode:e.wbsCode}))),a}))})(e.id)},className:"bg-red-500 hover:bg-red-600 text-white text-sm px-2 py-1 rounded-md shadow-sm transition-colors duration-200 flex items-center justify-center min-w-[32px]",title:"Eliminar tarea (como MS Project)",children:"\ud83d\uddd1\ufe0f"})]})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(null===S||void 0===S?void 0:S.taskId)===e.id&&"name"===(null===S||void 0===S?void 0:S.field)?(0,At.jsx)("input",{type:"text",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,At.jsx)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center",onClick:()=>_t(e.id,"name",e.name),title:"Click para editar nombre (como MS Project)",children:e.name})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-center",children:(0,At.jsx)("button",{onClick:()=>(e=>{d(t=>t.map(t=>{if(t.id!==e)return t;if(!t.isMilestone)return console.log("\ud83d\udd0d DEBUG - Creando hito:",{taskId:e,taskName:t.name,startDate:t.startDate,endDate:t.startDate,duration:0}),{id:t.id,wbsCode:t.wbsCode,name:t.name,duration:0,startDate:t.startDate,endDate:t.startDate,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:!0,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]],updatedAt:(new Date).toISOString()};{const e=t.originalDuration||1,r=c0(t.startDate,e,p);return{id:t.id,wbsCode:t.wbsCode,name:t.name,duration:e,startDate:t.startDate,endDate:r,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:!1,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]],updatedAt:(new Date).toISOString()}}}));const t=new CustomEvent("dataChange",{detail:{type:"milestone_toggled",taskId:e,timestamp:(new Date).toISOString()}});window.dispatchEvent(t)})(e.id),className:"w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-200 ".concat(e.isMilestone?"bg-indigo-500 border-indigo-500 text-white shadow-lg":"bg-white border-gray-300 text-gray-400 hover:border-indigo-300 hover:text-indigo-400"),title:e.isMilestone?"Quitar hito":"Marcar como hito",children:"\ud83c\udff9"})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:e.isMilestone?(0,At.jsx)("div",{className:"px-2 py-1 rounded bg-purple-100 text-purple-800 text-center font-medium",children:"0d"}):(null===S||void 0===S?void 0:S.taskId)===e.id&&"duration"===(null===S||void 0===S?void 0:S.field)?(0,At.jsx)("input",{type:"number",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,At.jsxs)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center",onClick:()=>_t(e.id,"duration",e.duration),title:"Click para editar duraci\xf3n (como MS Project)",children:[e.duration,"d"]})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(null===S||void 0===S?void 0:S.taskId)===e.id&&"startDate"===(null===S||void 0===S?void 0:S.field)?(0,At.jsx)("input",{type:"date",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,At.jsx)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center text-sm",onClick:()=>_t(e.id,"startDate",e.startDate),title:"Click para editar fecha de inicio (como MS Project)",children:e.startDate&&null!==e.startDate&&void 0!==e.startDate?e.startDate.split("-").reverse().join("/"):""})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:e.isMilestone?(0,At.jsx)("div",{className:"px-2 py-1 rounded bg-purple-100 text-purple-800 text-center font-medium text-sm",children:(()=>{if(!e.startDate||null===e.startDate||void 0===e.startDate)return"";const[t,r,n]=e.startDate.split("-");return new Date(t,r-1,n).toLocaleDateString("es")})()}):(null===S||void 0===S?void 0:S.taskId)===e.id&&"endDate"===(null===S||void 0===S?void 0:S.field)?(0,At.jsx)("input",{type:"date",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,At.jsx)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center text-sm",onClick:()=>_t(e.id,"endDate",e.endDate),title:"Click para editar fecha de fin (como MS Project)",children:e.isMilestone?e.startDate&&null!==e.startDate&&void 0!==e.startDate?e.startDate.split("-").reverse().join("/"):"":e.endDate&&null!==e.endDate&&void 0!==e.endDate?e.endDate.split("-").reverse().join("/"):""})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(null===S||void 0===S?void 0:S.taskId)===e.id&&"progress"===(null===S||void 0===S?void 0:S.field)?(0,At.jsx)("input",{type:"number",min:"0",max:"100",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,At.jsx)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center",onClick:()=>_t(e.id,"progress",e.progress),children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.progress,"%")}})}),(0,At.jsxs)("span",{className:"text-xs",children:[e.progress,"%"]})]})})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(null===S||void 0===S?void 0:S.taskId)===e.id&&"priority"===(null===S||void 0===S?void 0:S.field)?(0,At.jsxs)("select",{value:A,onChange:e=>E(e.target.value),onBlur:Ct,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,children:[(0,At.jsx)("option",{value:"low",children:"Baja"}),(0,At.jsx)("option",{value:"medium",children:"Media"}),(0,At.jsx)("option",{value:"high",children:"Alta"}),(0,At.jsx)("option",{value:"critical",children:"Cr\xedtica"})]}):(0,At.jsx)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center",onClick:()=>_t(e.id,"priority",e.priority),children:(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("critical"===e.priority?"bg-red-100 text-red-800":"high"===e.priority?"bg-orange-100 text-orange-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"critical"===e.priority?"Cr\xedtica":"high"===e.priority?"Alta":"medium"===e.priority?"Media":"Baja"})})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(null===S||void 0===S?void 0:S.taskId)===e.id&&"assignedTo"===(null===S||void 0===S?void 0:S.field)?(0,At.jsx)("input",{type:"text",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,At.jsx)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center",onClick:()=>_t(e.id,"assignedTo",e.assignedTo),children:e.assignedTo||"Sin asignar"})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(null===S||void 0===S?void 0:S.taskId)===e.id&&"cost"===(null===S||void 0===S?void 0:S.field)?(0,At.jsx)("input",{type:"number",step:"0.01",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,At.jsxs)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center",onClick:()=>_t(e.id,"cost",e.cost),children:["$",e.cost.toLocaleString()]})}),(0,At.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(null===S||void 0===S?void 0:S.taskId)===e.id&&"dependencies"===(null===S||void 0===S?void 0:S.field)?(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Escribe los n\xfameros de fila separados por comas (ej: 1, 2, 3)"}),(0,At.jsx)("input",{type:"text",value:A,onChange:e=>E(e.target.value),onBlur:Ct,onKeyDown:Pt,className:"w-full px-2 py-1 border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"1, 2, 3",autoFocus:!0}),(0,At.jsxs)("div",{className:"flex space-x-1",children:[(0,At.jsx)("button",{onClick:Ct,className:"text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600",children:"Guardar"}),(0,At.jsx)("button",{onClick:Tt,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]}):(0,At.jsx)("div",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded min-h-[24px] flex items-center",onClick:()=>(e=>{const t=c.find(t=>t.id===e);if(!t)return;const r=t.predecessors.map(e=>{const t=c.find(t=>t.id===e);return t?parseInt(t.wbsCode):null}).filter(Boolean);k({taskId:e,field:"dependencies"}),E(r.join(", ")),console.log("\ud83d\udd0d Editando dependencias de tarea ".concat(t.wbsCode,": mostrando n\xfameros wbsCode [").concat(r.join(", "),"]"))})(e.id),title:"Click para editar predecesoras",children:(0,At.jsx)("div",{className:"flex items-center space-x-2 text-xs",children:e.predecessors.length>0?(0,At.jsx)("div",{className:"flex flex-wrap gap-1",children:e.predecessors.map(e=>{const t=c.find(t=>t.id===e),r=t?parseInt(t.wbsCode):e;return(0,At.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium",children:r},e)})}):(0,At.jsx)("span",{className:"text-gray-400",children:"Sin predecesoras"})})})})]},e.id))})]})}),(0,At.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium text-gray-700",children:"Total Tareas:"}),(0,At.jsx)("span",{className:"ml-2 text-gray-600",children:Ke.length})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium text-gray-700",children:"Duraci\xf3n Total:"}),(0,At.jsxs)("span",{className:"ml-2 text-gray-600",children:[Ke.reduce((e,t)=>e+t.duration,0)," d\xedas"]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium text-gray-700",children:"Progreso Promedio:"}),(0,At.jsxs)("span",{className:"ml-2 text-gray-600",children:[Math.round(Ke.reduce((e,t)=>e+t.progress,0)/Ke.length),"%"]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium text-gray-700",children:"Costo Total:"}),(0,At.jsxs)("span",{className:"ml-2 text-gray-600",children:["$",Ke.reduce((e,t)=>e+t.cost,0).toLocaleString()]})]})]})})]}),"gantt"===N&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold",children:"Diagrama Gantt"}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-700",children:[(0,At.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,At.jsx)("span",{children:"Solo lectura - Edita desde la Vista Tabla"})]})})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsxs)("select",{value:R,onChange:e=>L(e.target.value),className:"px-3 py-2 border rounded-lg",children:[(0,At.jsx)("option",{value:"days",children:"D\xedas"}),(0,At.jsx)("option",{value:"weeks",children:"Semanas"}),(0,At.jsx)("option",{value:"months",children:"Meses"})]}),(0,At.jsx)("button",{onClick:()=>V(!H),className:"px-3 py-2 rounded-lg transition-colors duration-200 ".concat(H?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),disabled:0===q.length,children:"Baseline"}),(0,At.jsxs)("button",{onClick:()=>{try{const e=Ke.map(e=>({id:e.id,wbsCode:e.wbsCode,name:e.name,duration:e.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,priority:e.priority,assignedTo:e.assignedTo,cost:e.cost,predecessors:[...e.predecessors||[]],successors:[...e.successors||[]],isMilestone:e.isMilestone,originalDuration:e.originalDuration,description:e.description,resources:[...e.resources||[]],earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,isCritical:e.isCritical,slack:e.slack}));W(e),V(!0),alert("Baseline guardado exitosamente")}catch(e){console.error("Error al guardar baseline:",e),alert("Error al guardar el baseline. Por favor intenta de nuevo.")}},className:"bg-indigo-600 text-white px-3 py-2 rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\ud83d\udcbe"}),(0,At.jsx)("span",{children:"Guardar Baseline"})]})]}),(0,At.jsx)("div",{className:"flex space-x-2",children:(0,At.jsxs)("button",{onClick:at,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2",title:"Limpiar dependencias circulares que causan duplicaci\xf3n de tareas",children:[(0,At.jsx)("span",{children:"\ud83e\uddf9"}),(0,At.jsx)("span",{children:"Limpiar Dependencias Circulares"})]})})]}),(0,At.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden max-w-full",children:[(0,At.jsx)("div",{className:"bg-blue-50 border-b border-blue-200 p-2",children:(0,At.jsxs)("div",{className:"flex items-center justify-center text-sm text-blue-700",children:[(0,At.jsx)("span",{className:"mr-2",children:"\u2194\ufe0f"}),(0,At.jsx)("span",{children:"Usa el scroll horizontal para navegar por el cronograma completo"})]})}),(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)("div",{ref:Ue,onScroll:e=>{qe.current&&(qe.current.scrollTop=e.currentTarget.scrollTop)},className:"w-80 bg-gray-50 border-r overflow-y-auto",style:{height:"600px"},children:(0,At.jsxs)("div",{className:"p-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"TAREAS DEL PROYECTO"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[Ke.length," tareas"]})]}),Mt().map((e,t)=>(0,At.jsx)("div",{className:"mb-2",children:(0,At.jsxs)("div",{className:"group flex items-center p-3 rounded-lg transition-all duration-200 border ".concat((null===x||void 0===x?void 0:x.id)===e.id?"bg-indigo-100 border-indigo-300 shadow-md":"hover:bg-white hover:border-gray-300 hover:shadow-sm"),onClick:()=>{console.log("\ud83d\udd24 SELECCI\xd3N TAREA - Tarea seleccionada para ver:",{taskId:e.id,nombre:e.name,tareaCompleta:e}),y(e)},style:{height:t0},children:[(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"font-medium text-sm text-gray-900 truncate mb-1",children:[e.name,e.isMilestone&&(0,At.jsx)("span",{className:"ml-2 text-indigo-600 text-lg",children:"\ud83c\udff9"})]}),e.isCritical&&(0,At.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"\ud83d\udd25 Tarea Cr\xedtica"})]}),e.isCritical&&(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsx)("span",{className:"inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:"\ud83d\udd25 Cr\xedtica"})})]})},e.id)),(0,At.jsxs)("div",{className:"mt-4 p-3 bg-white rounded-lg border border-gray-200",children:[(0,At.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"RESUMEN"}),(0,At.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"Progreso Total:"}),(0,At.jsxs)("span",{className:"font-medium",children:[vt.progressPercentage,"%"]})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"Tareas Cr\xedticas:"}),(0,At.jsx)("span",{className:"font-medium text-red-600",children:vt.criticalTasks})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"Completadas:"}),(0,At.jsx)("span",{className:"font-medium text-green-600",children:vt.completedTasks})]})]})]})]})}),(0,At.jsxs)("div",{className:"flex-1 flex flex-col max-w-full",style:{height:"600px",maxWidth:"calc(100vw - 400px)"},children:[(0,At.jsx)("div",{className:"bg-gray-100 border-b p-2 flex-shrink-0",style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:(0,At.jsx)("div",{ref:Qe,onScroll:e=>{qe.current&&!et.current&&(et.current=!0,console.log("\ud83d\udd04 SINCRONIZANDO CONTENIDO - scrollLeft:",e.currentTarget.scrollLeft),console.log("\ud83d\udccf ANCHOS CONTENEDORES (desde headers):",{headerContainerWidth:e.currentTarget.scrollWidth,headerContainerClientWidth:e.currentTarget.clientWidth,rightContainerWidth:qe.current.scrollWidth,rightContainerClientWidth:qe.current.clientWidth,chartWidthPx:gt}),qe.current.scrollLeft=e.currentTarget.scrollLeft,setTimeout(()=>{et.current=!1},10))},className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",style:{width:"100%",maxWidth:"100%"},children:(0,At.jsx)("div",{className:"flex",style:{width:Math.max(gt+100,800),minWidth:Math.max(gt+100,800)},children:(()=>{const e=[],t=Ot,r=new Date(t),n=new Date(o0(ft.end));if(console.log("\ud83c\udfc1 TIMELINE HEADERS RANGO:",{startDate:o0(r),endDate:o0(n),ganttScale:R,projectDatesStart:o0(ft.start),projectDatesEnd:o0(ft.end),includeWeekends:p,startReference:o0(t),pxPerDay:mt,chartWidthPx:gt}),"days"===R){const t=new Date(r);for(;t<=n;)(p||l0(t))&&e.push({label:t.getDate(),sub:t.toLocaleDateString("es",{month:"short"}),width:mt}),t.setDate(t.getDate()+1)}else if("weeks"===R){const t=new Date(r);for(;t<=n;){const r=new Date(t),a=new Date(t);a.setDate(a.getDate()+6);const s=Math.min(7,u0(r,c0(n,1,p),p));e.push({label:"S ".concat(r.getDate(),"\u2014").concat(a.getDate()),sub:r.toLocaleDateString("es",{month:"short"}),width:s*mt}),t.setDate(t.getDate()+7)}}else{const t=new Date(r.getFullYear(),r.getMonth(),1);for(;t<=n;){const r=new Date(t.getFullYear(),t.getMonth()+1,1),n=u0(o0(t),o0(r),p);e.push({label:t.toLocaleDateString("es",{month:"short"}),sub:t.getFullYear(),width:n*mt}),t.setMonth(t.getMonth()+1)}}return console.log("\ud83c\udfc1 TIMELINE HEADERS GENERADOS:",{totalHeaders:e.length,totalWidth:e.reduce((e,t)=>e+t.width,0),firstHeader:e[0],lastHeader:e[e.length-1]}),e})().map((e,t)=>(0,At.jsxs)("div",{className:"text-xs text-gray-600 text-center border-r border-gray-200 flex-shrink-0",style:{width:e.width,minWidth:e.width},children:[(0,At.jsx)("div",{className:"font-medium",children:e.label}),(0,At.jsx)("div",{className:"text-gray-400",children:e.sub})]},t))})})}),(0,At.jsx)("div",{ref:qe,onScroll:e=>{Ue.current&&(Ue.current.scrollTop=e.currentTarget.scrollTop),Qe.current&&!et.current&&(et.current=!0,console.log("\ud83d\udd04 SINCRONIZANDO HEADERS - scrollLeft:",e.currentTarget.scrollLeft),console.log("\ud83d\udccf ANCHOS CONTENEDORES:",{headerContainerWidth:Qe.current.scrollWidth,headerContainerClientWidth:Qe.current.clientWidth,rightContainerWidth:e.currentTarget.scrollWidth,rightContainerClientWidth:e.currentTarget.clientWidth,chartWidthPx:gt}),Qe.current.scrollLeft=e.currentTarget.scrollLeft,setTimeout(()=>{et.current=!1},10))},className:"flex-1 overflow-x-auto overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",children:(0,At.jsx)("div",{style:{width:Math.max(gt+100,800)},children:(0,At.jsxs)("div",{className:"relative",children:[It>0&&It<gt&&(0,At.jsx)("div",{className:"absolute z-10 w-0.5 bg-red-500",style:{left:It,top:0,height:"600px"},children:(0,At.jsx)("div",{className:"bg-red-500 text-white text-xs px-1 py-0.5 rounded -mt-2 -ml-6",children:"HOY"})}),Mt().map((e,t)=>(0,At.jsxs)("div",{className:"absolute",style:{left:e.leftPx,top:58*t+10+5,width:e.widthPx,height:40},children:[(0,At.jsxs)("div",{className:"h-8 transition-all duration-200 cursor-default hover:opacity-80 ".concat(e.isMilestone?"rounded-full":"rounded-lg"),title:"Solo lectura - Edita desde la Vista Tabla",style:{width:e.isMilestone?"12px":"100%",height:"100%",background:e.isMilestone?"linear-gradient(45deg, #8b5cf6, #7c3aed)":e.isCritical&&F?"linear-gradient(45deg, #ef4444, #dc2626)":e.isCritical?"linear-gradient(45deg, #f97316, #ea580c)":"linear-gradient(45deg, #6366f1, #4f46e5)",border:e.isCritical&&F?"2px solid #dc2626":"none",boxShadow:e.isCritical&&F?"0 0 10px rgba(239, 68, 68, 0.5)":"none"},children:[(0,At.jsx)("div",{className:"h-full bg-green-400 rounded-l transition-all duration-200",style:{width:"".concat(e.progress,"%"),background:"linear-gradient(45deg, #4ade80, #22c55e)"}}),(0,At.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-medium px-2",children:(0,At.jsx)("span",{className:"truncate",children:e.name})})]}),H&&Ve.has(e.id)&&(0,At.jsx)("div",{className:"absolute top-0 h-full border-2 border-dashed border-gray-700 opacity-90",style:{left:"".concat(u0(o0(ft.start),Ve.get(e.id).startDate,p)*mt,"px"),width:"".concat(Math.max(1,p0(Ve.get(e.id).startDate,Ve.get(e.id).endDate,p)*mt),"px"),boxShadow:"0 0 4px rgba(55, 65, 81, 0.4)"}}),z&&e.predecessors.length>0&&(0,At.jsx)("div",{className:"absolute -top-2 left-0 w-full",children:e.predecessors.map((r,n)=>{const a=Ke.find(e=>e.id===r);if(!a)return null;const s=Mt().find(e=>e.id===r);if(!s)return null;const i=s.leftPx+s.widthPx,o=58*Ke.findIndex(e=>e.id===r)+10+5+20,l=e.leftPx,c=58*t+10+5+20;return(0,At.jsxs)("svg",{className:"absolute pointer-events-none",style:{left:0,top:0,width:"100%",height:"100%"},children:[(0,At.jsx)("defs",{children:(0,At.jsx)("marker",{id:"arrow-".concat(e.id,"-").concat(r),markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:(0,At.jsx)("polygon",{points:"0,0 0,6 9,3",fill:e.isCritical?"#ef4444":"#6366f1"})})}),(0,At.jsx)("line",{x1:i,y1:o,x2:l,y2:c,stroke:e.isCritical?"#ef4444":"#6366f1",strokeWidth:"2",markerEnd:"url(#arrow-".concat(e.id,"-").concat(r,")"),strokeDasharray:e.isCritical?"none":"5,5"})]},n)})})]},e.id))]})})})]})]})]})]}),!1,"minutas"===N&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 pb-32",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udccb Tareas de Minutas"}),(0,At.jsxs)("button",{onClick:St,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center space-x-2 transition-all duration-300",children:[(0,At.jsx)("span",{children:"\u2795"}),(0,At.jsx)("span",{children:"Nueva Minuta"})]})]}),re?(0,At.jsx)("div",{className:"text-center py-12",children:(0,At.jsxs)("div",{className:"bg-gray-100 rounded-xl p-8",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Cargando minutas..."}),(0,At.jsxs)("p",{className:"text-gray-500",children:["Obteniendo datos desde ",g?"Supabase":"localStorage"]})]})}):0===ee.length?(0,At.jsx)("div",{className:"text-center py-12",children:(0,At.jsxs)("div",{className:"bg-gray-100 rounded-xl p-8",children:[(0,At.jsx)("span",{className:"text-6xl mb-4 block",children:"\ud83d\udcdd"}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No hay tareas de minutas"}),(0,At.jsx)("p",{className:"text-gray-500 mb-4",children:'Crea tu primera minuta haciendo clic en "Nueva Minuta"'}),(0,At.jsx)("button",{onClick:St,className:"bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors",children:"\u2795 Crear Primera Minuta"})]})}):(0,At.jsxs)("div",{className:"space-y-6",children:[c.filter(e=>e.isMilestone).map(e=>{const t=ee.filter(t=>t.hitoId===e.id);return 0===t.length?null:(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,At.jsx)("div",{className:"bg-blue-50 px-4 py-3 border-b border-gray-200",children:(0,At.jsxs)("h3",{className:"font-semibold text-gray-800",children:["\ud83c\udfaf ",e.wbsCode," - ",e.name]})}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/3",children:"Tarea"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/6",children:"Responsable"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Fecha"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Estatus"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Creada"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Acciones"})]})}),(0,At.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.sort((e,t)=>new Date(e.fecha)-new Date(t.fecha)).map((e,t)=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.tarea}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.responsable}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:(()=>{try{const t=new Date(e.fecha);return isNaN(t.getTime())?"Fecha inv\xe1lida":t.toLocaleDateString("es-ES")}catch(t){return"Fecha inv\xe1lida"}})()}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,At.jsxs)("select",{value:e.estatus,onChange:async t=>{const r=t.target.value;if(te(t=>{const n=t.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},t),{},{estatus:r}):t);return v&&v(null===h||void 0===h?void 0:h.id,n),n}),g)try{const t=await kt.default.updateMinutaStatus(e.id,r);t.success?(console.log("\ud83d\udd04 Disparando evento minutaStatusChanged:",{tareaId:e.id,newStatus:r}),window.dispatchEvent(new CustomEvent("minutaStatusChanged",{detail:{tareaId:e.id,newStatus:r,projectId:null===h||void 0===h?void 0:h.id,timestamp:Date.now()}})),console.log("\ud83d\udd04 Disparando evento autoSaveTrigger para minuta"),window.dispatchEvent(new CustomEvent("autoSaveTrigger",{detail:{source:"minutaUpdate",data:{minutasTasks:ee}}}))):(console.error("\u274c Error actualizando estatus en Supabase:",t.error),te(t=>t.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},t),{},{estatus:r}):t)))}catch(n){console.error("\u274c Error actualizando estatus:",n)}else console.log("\ud83d\udd04 Disparando evento minutaStatusChanged (modo local):",{tareaId:e.id,newStatus:r}),window.dispatchEvent(new CustomEvent("minutaStatusChanged",{detail:{tareaId:e.id,newStatus:r,projectId:null===h||void 0===h?void 0:h.id,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("autoSaveTrigger",{detail:{source:"minutaUpdate",data:{minutasTasks:ee}}}))},className:"px-3 py-1 rounded-full text-xs font-medium border-none ".concat("Pendiente"===e.estatus?"bg-yellow-100 text-yellow-800":"En Proceso"===e.estatus?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:[(0,At.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,At.jsx)("option",{value:"En Proceso",children:"En Proceso"}),(0,At.jsx)("option",{value:"Completado",children:"Completado"})]})}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:(()=>{try{const t=new Date(e.fechaCreacion);return isNaN(t.getTime())?"Fecha inv\xe1lida":t.toLocaleDateString("es-ES")}catch(t){return"Fecha inv\xe1lida"}})()}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,At.jsx)("button",{onClick:()=>Et(e),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar minuta",children:"\u270f\ufe0f Editar"})})]},e.id))})]})})]},e.id)}),(()=>{const e=ee.filter(e=>{if(!e.hitoId)return!0;const t=c.find(t=>t.id===e.hitoId&&t.isMilestone);return t||(console.log("\ud83d\udd0d DEBUG: Tarea ".concat(e.id," busca hito ").concat(e.hitoId," pero no se encuentra")),console.log("\ud83d\udd0d DEBUG: Hitos disponibles:",c.filter(e=>e.isMilestone).map(e=>({id:e.id,name:e.name})))),!t});return e.length>0})()&&(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,At.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,At.jsx)("h3",{className:"font-semibold text-gray-800",children:"\ud83d\udccb Sin hito asignado"})}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/3",children:"Tarea"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/6",children:"Responsable"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Fecha"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Estatus"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Creada"}),(0,At.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/8",children:"Acciones"})]})}),(0,At.jsx)("tbody",{className:"divide-y divide-gray-200",children:ee.filter(e=>{if(!e.hitoId)return!0;const t=c.find(t=>t.id===e.hitoId&&t.isMilestone);return!t}).sort((e,t)=>new Date(e.fecha)-new Date(t.fecha)).map(e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.tarea}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.responsable}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:(()=>{try{const t=new Date(e.fecha);return isNaN(t.getTime())?"Fecha inv\xe1lida":t.toLocaleDateString("es-ES")}catch(t){return"Fecha inv\xe1lida"}})()}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,At.jsxs)("select",{value:e.estatus,onChange:async t=>{const r=t.target.value;if(te(t=>t.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},t),{},{estatus:r}):t)),g)try{const t=await kt.default.updateMinutaStatus(e.id,r);t.success?(console.log("\ud83d\udd04 Disparando evento minutaStatusChanged (tabla 2):",{tareaId:e.id,newStatus:r}),window.dispatchEvent(new CustomEvent("minutaStatusChanged",{detail:{tareaId:e.id,newStatus:r,projectId:null===h||void 0===h?void 0:h.id,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("autoSaveTrigger",{detail:{source:"minutaUpdate",data:{minutasTasks:ee}}}))):(console.error("\u274c Error actualizando estatus en Supabase:",t.error),te(t=>t.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},t),{},{estatus:r}):t)))}catch(n){console.error("\u274c Error actualizando estatus:",n)}else console.log("\ud83d\udd04 Disparando evento minutaStatusChanged (modo local, tabla 2):",{tareaId:e.id,newStatus:r}),window.dispatchEvent(new CustomEvent("minutaStatusChanged",{detail:{tareaId:e.id,newStatus:r,projectId:null===h||void 0===h?void 0:h.id,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("autoSaveTrigger",{detail:{source:"minutaUpdate",data:{minutasTasks:ee}}}))},className:"px-3 py-1 rounded-full text-xs font-medium border-none ".concat("Pendiente"===e.estatus?"bg-yellow-100 text-yellow-800":"En Proceso"===e.estatus?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:[(0,At.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,At.jsx)("option",{value:"En Proceso",children:"En Proceso"}),(0,At.jsx)("option",{value:"Completado",children:"Completado"})]})}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:(()=>{try{const t=new Date(e.fechaCreacion);return isNaN(t.getTime())?"Fecha inv\xe1lida":t.toLocaleDateString("es-ES")}catch(t){return"Fecha inv\xe1lida"}})()}),(0,At.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,At.jsx)("button",{onClick:()=>Et(e),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar minuta",children:"\u270f\ufe0f Editar"})})]},e.id))})]})})]})]})]}),x&&"gantt"===N&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\ud83d\udcca Vista Solo Lectura"}),(0,At.jsx)("button",{onClick:()=>y(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udc41\ufe0f"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:x.name}),(0,At.jsx)("p",{className:"text-gray-600 mb-4",children:"Esta es la vista de solo lectura del diagrama Gantt."}),(0,At.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Para editar esta tarea, cambia a la ",(0,At.jsx)("strong",{children:"Vista Tabla"}),"."]}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsx)("button",{onClick:()=>_("excel"),className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"\ud83d\udccb Ir a Vista Tabla"}),(0,At.jsx)("button",{onClick:()=>y(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"})]})]})]})}),x&&"gantt"!==N&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold",children:x.name}),(0,At.jsx)("button",{onClick:()=>y(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Informaci\xf3n B\xe1sica"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Tarea"}),(0,At.jsx)("input",{type:"text",value:x.name,onChange:e=>y(t=>({id:t.id,wbsCode:t.wbsCode,name:e.target.value,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duraci\xf3n (d\xedas)"}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("button",{onClick:()=>y(e=>({id:e.id,wbsCode:e.wbsCode,name:e.name,duration:Math.max(1,e.duration-1),startDate:e.startDate,endDate:e.endDate,progress:e.progress,predecessors:[...e.predecessors||[]],cost:e.cost,priority:e.priority,assignedTo:e.assignedTo,isMilestone:e.isMilestone,isCritical:e.isCritical,originalDuration:e.originalDuration,earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,totalFloat:e.totalFloat,freeFloat:e.freeFloat,description:e.description,resources:[...e.resources||[]],workPackageId:e.workPackageId,status:e.status,successors:[...e.successors||[]]})),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"-"}),(0,At.jsx)("input",{type:"number",value:x.duration,onChange:e=>y(t=>({id:t.id,wbsCode:t.wbsCode,name:t.name,duration:parseInt(e.target.value)||1,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]]})),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-indigo-500",min:"1"}),(0,At.jsx)("button",{onClick:()=>y(e=>({id:e.id,wbsCode:e.wbsCode,name:e.name,duration:e.duration+1,startDate:e.startDate,endDate:e.endDate,progress:e.progress,predecessors:[...e.predecessors||[]],cost:e.cost,priority:e.priority,assignedTo:e.assignedTo,isMilestone:e.isMilestone,isCritical:e.isCritical,originalDuration:e.originalDuration,earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,totalFloat:e.totalFloat,freeFloat:e.freeFloat,description:e.description,resources:[...e.resources||[]],workPackageId:e.workPackageId,status:e.status,successors:[...e.successors||[]]})),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"+"})]})]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Dependencias"}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Predecesoras (",(null===(n=x.predecessors)||void 0===n?void 0:n.length)||0,")"]}),(0,At.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-2",children:c.filter(e=>e.id!==x.id).map(e=>{var t;return(0,At.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[(0,At.jsx)("input",{type:"checkbox",checked:(null===(t=x.predecessors)||void 0===t?void 0:t.includes(e.id))||!1,onChange:t=>{const r=x.predecessors||[];t.target.checked?y(t=>({id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:[...r||[],e.id],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]]})):y(t=>({id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:r.filter(t=>t!==e.id),cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:[...t.successors||[]]}))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,At.jsxs)("span",{className:"text-sm",children:[e.wbsCode," - ",e.name]})]},e.id)})})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sucesoras (",(null===(a=x.successors)||void 0===a?void 0:a.length)||0,")"]}),(0,At.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-2",children:c.filter(e=>e.id!==x.id).map(e=>{var t;return(0,At.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[(0,At.jsx)("input",{type:"checkbox",checked:(null===(t=x.successors)||void 0===t?void 0:t.includes(e.id))||!1,onChange:t=>{const r=x.successors||[];t.target.checked?y(t=>({id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:r.slice().concat([e.id])})):y(t=>({id:t.id,wbsCode:t.wbsCode,name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,progress:t.progress,predecessors:[...t.predecessors||[]],cost:t.cost,priority:t.priority,assignedTo:t.assignedTo,isMilestone:t.isMilestone,isCritical:t.isCritical,originalDuration:t.originalDuration,earlyStart:t.earlyStart,earlyFinish:t.earlyFinish,lateStart:t.lateStart,lateFinish:t.lateFinish,totalFloat:t.totalFloat,freeFloat:t.freeFloat,description:t.description,resources:[...t.resources||[]],workPackageId:t.workPackageId,status:t.status,successors:r.filter(t=>t!==e.id)}))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,At.jsxs)("span",{className:"text-sm",children:[e.wbsCode," - ",e.name]})]},e.id)})})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[(0,At.jsx)("button",{onClick:()=>y(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{console.log("\ud83c\udd95 MODAL NUEVO - Guardando tarea:",x),d(e=>e.map(e=>e.id===x.id?{id:e.id,wbsCode:e.wbsCode,name:x.name,duration:x.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,predecessors:[...e.predecessors||[]],cost:e.cost,priority:e.priority,assignedTo:e.assignedTo,isMilestone:e.isMilestone,isCritical:e.isCritical,originalDuration:e.originalDuration,earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,totalFloat:e.totalFloat,freeFloat:e.freeFloat,description:e.description,resources:[...e.resources||[]],workPackageId:e.workPackageId,status:e.status,successors:[...e.successors||[]],predecessors:x.predecessors||[],successors:x.successors||[]}:e)),y(null)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Guardar Cambios"})]})]})}),!1,console.log("\ud83d\udd0d RENDERIZADO - selectedTask existe?",!!x,x),!1,G&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Caso de Negocio"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Informaci\xf3n del Proyecto"}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Nombre:"})," ",b.projectName]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Fecha de Inicio:"})," ",new Date(b.startDate).toLocaleDateString("es")]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Fecha de Fin Planificada:"})," ",new Date(b.plannedEndDate).toLocaleDateString("es")]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Inversi\xf3n Total:"})," $",b.totalInvestment.toLocaleString()]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Beneficios Esperados"}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Objetivo:"})," ",b.objective]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Patrocinador:"})," ",b.sponsor]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Gerente del Proyecto:"})," ",b.manager]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Beneficios:"})," ",b.expectedBenefits]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"TIR (%):"})," ",b.irr]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"ROI (%):"})," ",b.roi]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Tiempo de Retorno (a\xf1os):"})," ",b.paybackPeriod]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"VPN:"})," $",b.npv.toLocaleString()]})]})]}),(0,At.jsx)("div",{className:"flex justify-end mt-4",children:(0,At.jsx)("button",{onClick:()=>K(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cerrar"})})]}),$&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"An\xe1lisis de Recursos"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Carga de Recursos"}),Object.entries($e.resourceLoad).map(e=>{let[t,r]=e;return(0,At.jsxs)("div",{children:[(0,At.jsxs)("p",{children:[(0,At.jsxs)("strong",{children:[t,":"]})," ",r.length," tareas"]}),(0,At.jsx)("ul",{children:r.map(e=>(0,At.jsxs)("li",{children:[e.taskName," (D\xedas: ",u0(e.startDate,c0(e.endDate,1,p),p),")"]},e.taskId))})]},t)})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Conflictos de Recursos"}),$e.conflicts.map(e=>(0,At.jsxs)("p",{className:"text-red-600 text-sm",children:["Conflicto entre ",e.task1," y ",e.task2,' por el recurso "',e.resource,'" por ',e.overlapDays," d\xedas."]},e.resource))]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Utilizaci\xf3n de Recursos"}),Object.entries($e.utilization).map(e=>{let[t,r]=e;return(0,At.jsxs)("p",{children:[(0,At.jsxs)("strong",{children:[t,":"]})," ",r," d\xedas"]},t)})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"M\xe9tricas de Recursos"}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Total de Recursos:"})," ",Object.keys($e.utilization).length]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Total de D\xedas Asignados:"})," ",Object.values($e.utilization).reduce((e,t)=>e+t,0)," d\xedas"]})]})]}),(0,At.jsx)("div",{className:"flex justify-end mt-4",children:(0,At.jsx)("button",{onClick:()=>Y(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cerrar"})})]}),!1,bt&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:yt.insertAfterTaskId?"\ud83d\ude80 Insertar Nueva Tarea":"\ud83d\ude80 Agregar Nueva Tarea"}),yt.insertAfterTaskId&&(0,At.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["La tarea se insertar\xe1 despu\xe9s de: ",(0,At.jsx)("span",{className:"font-medium text-indigo-600",children:(null===(i=Ke.find(e=>e.id===yt.insertAfterTaskId))||void 0===i?void 0:i.name)||"Tarea anterior"})]})]}),(0,At.jsx)("button",{onClick:()=>xt(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"\ud83d\udccb Informaci\xf3n B\xe1sica"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Tarea *"}),(0,At.jsx)("input",{type:"text",value:yt.name,onChange:e=>wt(t=>({name:e.target.value,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:t.priority,assignedTo:t.assignedTo,cost:t.cost,selectedPredecessors:[...t.selectedPredecessors||[]],selectedSuccessors:[...t.selectedSuccessors||[]]})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingresa el nombre de la tarea"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("textarea",{value:yt.description,onChange:e=>wt(t=>({name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:e.target.value,priority:t.priority,assignedTo:t.assignedTo,cost:t.cost,selectedPredecessors:[...t.selectedPredecessors||[]],selectedSuccessors:[...t.selectedSuccessors||[]]})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Describe la tarea..."})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duraci\xf3n (d\xedas) *"}),(0,At.jsx)("input",{type:"number",min:"1",value:yt.duration,onChange:e=>{const t=parseInt(e.target.value)||1,r=c0(yt.startDate,t,p);wt(e=>({name:e.name,duration:t,startDate:e.startDate,endDate:r,description:e.description,priority:e.priority,assignedTo:e.assignedTo,cost:e.cost,selectedPredecessors:[...e.selectedPredecessors||[]],selectedSuccessors:[...e.selectedSuccessors||[]]}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Costo ($)"}),(0,At.jsx)("input",{type:"number",min:"0",step:"0.01",value:yt.cost,onChange:e=>wt(t=>({name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:t.priority,assignedTo:t.assignedTo,cost:parseFloat(e.target.value)||0,selectedPredecessors:[...t.selectedPredecessors||[]],selectedSuccessors:[...t.selectedSuccessors||[]]})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Inicio *"}),(0,At.jsx)("input",{type:"date",value:yt.startDate,onChange:e=>{const t=e.target.value,r=c0(t,yt.duration,p);wt(e=>({name:e.name,duration:e.duration,startDate:t,endDate:r,description:e.description,priority:e.priority,assignedTo:e.assignedTo,cost:e.cost,selectedPredecessors:[...e.selectedPredecessors||[]],selectedSuccessors:[...e.selectedSuccessors||[]]}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Fin"}),(0,At.jsx)("input",{type:"date",value:yt.endDate,onChange:e=>{const t=e.target.value,r=Math.ceil((new Date(t)-new Date(yt.startDate))/864e5);wt(e=>({name:e.name,duration:r>0?r:1,startDate:e.startDate,endDate:t,description:e.description,priority:e.priority,assignedTo:e.assignedTo,cost:e.cost,selectedPredecessors:[...e.selectedPredecessors||[]],selectedSuccessors:[...e.selectedSuccessors||[]]}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),(0,At.jsxs)("select",{value:yt.priority,onChange:e=>wt(t=>({name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:e.target.value,assignedTo:t.assignedTo,cost:t.cost,selectedPredecessors:[...t.selectedPredecessors||[]],selectedSuccessors:[...t.selectedSuccessors||[]]})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"low",children:"\ud83d\udfe2 Baja"}),(0,At.jsx)("option",{value:"medium",children:"\ud83d\udfe1 Media"}),(0,At.jsx)("option",{value:"high",children:"\ud83d\udd34 Alta"}),(0,At.jsx)("option",{value:"critical",children:"\ud83d\udea8 Cr\xedtica"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignado a"}),(0,At.jsx)("input",{type:"text",value:yt.assignedTo,onChange:e=>wt(t=>({name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:t.priority,assignedTo:e.target.value,cost:t.cost,selectedPredecessors:[...t.selectedPredecessors||[]],selectedSuccessors:[...t.selectedSuccessors||[]]})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del responsable"})]})]})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"\ud83d\udd17 Dependencias"}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Predecesoras (",yt.selectedPredecessors.length,")"]}),(0,At.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3 bg-gray-50",children:0===c.length?(0,At.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No hay tareas existentes"}):c.map(e=>(0,At.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-white p-2 rounded",children:[(0,At.jsx)("input",{type:"checkbox",checked:yt.selectedPredecessors.includes(e.id),onChange:t=>{t.target.checked?(console.log("\ud83d\ude80 NUEVO SISTEMA - Agregando predecesora:",e.id,e.wbsCode,e.name),wt(t=>{const r=t.selectedPredecessors.slice().concat([e.id]);return console.log("\ud83d\ude80 NUEVO SISTEMA - Predecesoras actualizadas:",r),{name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:t.priority,assignedTo:t.assignedTo,cost:t.cost,selectedPredecessors:r,selectedSuccessors:[...t.selectedSuccessors||[]]}})):(console.log("\ud83d\ude80 NUEVO SISTEMA - Removiendo predecesora:",e.id,e.wbsCode,e.name),wt(t=>{const r=t.selectedPredecessors.filter(t=>t!==e.id);return console.log("\ud83d\ude80 NUEVO SISTEMA - Predecesoras actualizadas:",r),{name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:t.priority,assignedTo:t.assignedTo,cost:t.cost,selectedPredecessors:r,selectedSuccessors:[...t.selectedSuccessors||[]]}}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,At.jsxs)("span",{className:"text-sm",children:[(0,At.jsx)("span",{className:"font-medium",children:e.wbsCode})," - ",e.name]})]},e.id))})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sucesoras (",yt.selectedSuccessors.length,")"]}),(0,At.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3 bg-gray-50",children:0===c.length?(0,At.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No hay tareas existentes"}):c.map(e=>(0,At.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-white p-2 rounded",children:[(0,At.jsx)("input",{type:"checkbox",checked:yt.selectedSuccessors.includes(e.id),onChange:t=>{t.target.checked?(console.log("\ud83d\ude80 NUEVO SISTEMA - Agregando sucesora:",e.id,e.wbsCode,e.name),wt(t=>{const r=t.selectedSuccessors.slice().concat([e.id]);return console.log("\ud83d\ude80 NUEVO SISTEMA - Sucesoras actualizadas:",r),{name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:t.priority,assignedTo:t.assignedTo,cost:t.cost,selectedPredecessors:[...t.selectedPredecessors||[]],selectedSuccessors:r}})):(console.log("\ud83d\ude80 NUEVO SISTEMA - Removiendo sucesora:",e.id,e.wbsCode,e.name),wt(t=>{const r=t.selectedSuccessors.filter(t=>t!==e.id);return console.log("\ud83d\ude80 NUEVO SISTEMA - Sucesoras actualizadas:",r),{name:t.name,duration:t.duration,startDate:t.startDate,endDate:t.endDate,description:t.description,priority:t.priority,assignedTo:t.assignedTo,cost:t.cost,selectedPredecessors:[...t.selectedPredecessors||[]],selectedSuccessors:r}}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,At.jsxs)("span",{className:"text-sm",children:[(0,At.jsx)("span",{className:"font-medium",children:e.wbsCode})," - ",e.name]})]},e.id))})]}),(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"\ud83d\udca1 Informaci\xf3n sobre Dependencias"}),(0,At.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Predecesoras:"})," Tareas que deben completarse antes de esta"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Sucesoras:"})," Tareas que dependen de esta tarea"]}),(0,At.jsx)("li",{children:"\u2022 Las dependencias se sincronizan autom\xe1ticamente"})]})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,At.jsx)("button",{onClick:()=>xt(!1),className:"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,At.jsxs)("button",{onClick:()=>{const e=c||[],t=yt.insertAfterTaskId;let r=null;if(t){const n=e.findIndex(e=>e.id===t);-1!==n&&(r=n+1,console.log("\ud83d\ude80 DEBUG - Calculando insertIndex en el momento del clic:",{insertAfterTaskId:t,insertAfterIndex:n,calculatedInsertIndex:r,totalTasks:e.length}))}!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{console.log("\ud83d\ude80 NUEVO SISTEMA - Creando tarea desde modal"),console.log("\ud83d\ude80 NUEVO SISTEMA - Datos completos del modal:",yt),console.log("\ud83d\ude80 NUEVO SISTEMA - Predecesoras seleccionadas:",yt.selectedPredecessors),console.log("\ud83d\ude80 NUEVO SISTEMA - Sucesoras seleccionadas:",yt.selectedSuccessors);const t=null!==e?e:yt.insertIndex;if(yt.insertAfterTaskId,console.log("\ud83d\ude80 DEBUG - Valores de inserci\xf3n:",{insertIndex:yt.insertIndex,insertAfterTaskId:yt.insertAfterTaskId,insertIndexType:typeof yt.insertIndex,insertAfterTaskIdType:typeof yt.insertAfterTaskId,insertIndexOverride:e,finalInsertIndex:t}),!yt.name.trim())return void alert("Por favor ingresa un nombre para la tarea");if(yt.duration<=0)return void alert("La duraci\xf3n debe ser mayor a 0");const r=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n=()=>{let e,t=1;do{e="1.".concat(t),t++}while(c.some(t=>t.wbsCode===e));return e},a=r(),i=n();console.log("\ud83d\ude80 DEBUG - IDs generados:",{newTaskId:a,newWbsCode:i,insertIndex:yt.insertIndex,insertAfterTaskId:yt.insertAfterTaskId}),console.log("\ud83d\ude80 DEBUG - Creando tarea con dependencias:",{selectedPredecessors:yt.selectedPredecessors,selectedSuccessors:yt.selectedSuccessors,predecessorsLength:yt.selectedPredecessors.length,successorsLength:yt.selectedSuccessors.length});const o={id:a,wbsCode:i,name:yt.name.trim(),duration:yt.duration,startDate:yt.startDate,endDate:yt.endDate,progress:0,predecessors:yt.selectedPredecessors.slice(),successors:yt.selectedSuccessors.slice(),resources:[],cost:yt.cost,isMilestone:!1,isCritical:!1,originalDuration:yt.duration,earlyStart:yt.startDate,earlyFinish:yt.endDate,lateStart:yt.startDate,lateFinish:yt.endDate,totalFloat:0,freeFloat:0,status:"pending",workPackageId:a,plannedValue:0,earnedValue:0,actualCost:0,description:yt.description,priority:yt.priority,assignedTo:yt.assignedTo,createdDate:o0(new Date),lastModified:o0(new Date)};console.log("\ud83d\ude80 NUEVO SISTEMA - Tarea creada:",o),console.log("\ud83d\ude80 DEBUG - Dependencias en la tarea creada:",{predecessors:o.predecessors,successors:o.successors,predecessorsLength:o.predecessors.length,successorsLength:o.successors.length}),console.log("\ud83d\ude80 NUEVO SISTEMA - Dependencias seleccionadas:",{predecessors:yt.selectedPredecessors,successors:yt.selectedSuccessors}),console.log("\ud83d\ude80 NUEVO SISTEMA - Llamando a setTasks con nueva tarea"),console.log("\ud83d\ude80 NUEVO SISTEMA - Tareas actuales antes de agregar:",c.length),d(e=>{var r,n;let i;if(console.log("\ud83d\ude80 NUEVO SISTEMA - setTasks ejecut\xe1ndose, tareas previas:",e.length),console.log("\ud83d\ude80 DEBUG - Tarea a insertar:",{id:o.id,name:o.name,wbsCode:o.wbsCode}),console.log("\ud83d\ude80 DEBUG - Verificando insertIndex:",{insertIndex:yt.insertIndex,insertIndexUndefined:void 0===yt.insertIndex,insertAfterTaskId:yt.insertAfterTaskId,finalInsertIndex:t,finalInsertIndexUndefined:void 0===t}),void 0!==t&&null!==t){const r=e.slice();r.splice(t,0,o),i=r,console.log("\ud83d\ude80 NUEVA FUNCI\xd3N - Tarea insertada en posici\xf3n:",t)}else if(yt.insertAfterTaskId){const t=e.findIndex(e=>e.id===yt.insertAfterTaskId);if(-1!==t){const r=e.slice();r.splice(t+1,0,o),i=r,console.log("\ud83d\ude80 NUEVA FUNCI\xd3N - Tarea insertada despu\xe9s de:",t+1)}else{const t=e.slice();t.push(o),i=t,console.log("\ud83d\ude80 NUEVA FUNCI\xd3N - Tarea agregada al final (posici\xf3n no encontrada)")}}else{const t=e.slice();t.push(o),i=t,console.log("\ud83d\ude80 NUEVO SISTEMA - Tarea agregada al final. Total tareas:",i.length)}i=i0(i),i=i.map((e,t)=>(0,s.A)((0,s.A)({},e),{},{wbsCode:t+1})),console.log("\ud83d\ude80 NUEVA FUNCI\xd3N - wbsCode actualizados para mantener secuencia:",i.map(e=>({name:e.name,wbsCode:e.wbsCode})));const l=i.find(e=>e.id===a),c=i.findIndex(e=>e.id===a);return console.log("\ud83d\ude80 DEBUG - Tarea en el estado despu\xe9s de agregar:",{id:null===l||void 0===l?void 0:l.id,name:null===l||void 0===l?void 0:l.name,position:c,wbsCode:null===l||void 0===l?void 0:l.wbsCode,predecessors:null===l||void 0===l?void 0:l.predecessors,successors:null===l||void 0===l?void 0:l.successors,predecessorsLength:null===l||void 0===l||null===(r=l.predecessors)||void 0===r?void 0:r.length,successorsLength:null===l||void 0===l||null===(n=l.successors)||void 0===n?void 0:n.length}),console.log("\ud83d\ude80 DEBUG - Primeras 15 tareas despu\xe9s de inserci\xf3n:",i.slice(0,15).map((e,t)=>({position:t,wbsCode:e.wbsCode,name:e.name,id:e.id}))),yt.selectedPredecessors.length>0||yt.selectedSuccessors.length>0?(console.log("\ud83d\ude80 NUEVO SISTEMA - Sincronizando dependencias..."),i.map(e=>{if(e.id===a)return e;let t={id:e.id,wbsCode:e.wbsCode,name:e.name,duration:e.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,predecessors:[...e.predecessors||[]],cost:e.cost,priority:e.priority,assignedTo:e.assignedTo,isMilestone:e.isMilestone,isCritical:e.isCritical,originalDuration:e.originalDuration,earlyStart:e.earlyStart,earlyFinish:e.earlyFinish,lateStart:e.lateStart,lateFinish:e.lateFinish,totalFloat:e.totalFloat,freeFloat:e.freeFloat,description:e.description,resources:[...e.resources||[]],workPackageId:e.workPackageId,status:e.status,successors:[...e.successors||[]]};return yt.selectedPredecessors.includes(e.id)&&(t.successors.includes(a)||(t.successors=t.successors.slice().concat([a]),console.log("\ud83d\ude80 NUEVO SISTEMA - Agregando ".concat(a," como sucesora de ").concat(e.id)))),yt.selectedSuccessors.includes(e.id)&&(t.predecessors.includes(a)||(t.predecessors=[...t.predecessors||[],a],console.log("\ud83d\ude80 NUEVO SISTEMA - Agregando ".concat(a," como predecesora de ").concat(e.id)))),t})):(console.log("\ud83d\ude80 DEBUG - setTasks retornando:",{totalTasks:i.length,newTaskIncluded:i.some(e=>e.id===a),newTaskPosition:i.findIndex(e=>e.id===a)}),i)}),setTimeout(()=>{console.log("\ud83d\ude80 DEBUG - Estado despu\xe9s de setTasks:",{tasksLength:c.length,newTaskExists:c.some(e=>e.id===a)})},100),xt(!1),wt({name:"",duration:5,startDate:o0(new Date),endDate:c0(o0(new Date),5),description:"",priority:"medium",assignedTo:"",cost:0,selectedPredecessors:[],insertAfterTaskId:null}),console.log("\ud83d\ude80 NUEVO SISTEMA - Proceso completado exitosamente"),setTimeout(()=>{console.log("\ud83d\ude80 DEBUG - Estado final de todas las tareas:"),d(e=>(console.log("\ud83d\ude80 DEBUG - Total de tareas despu\xe9s de crear:",e.length),console.log("\ud83d\ude80 DEBUG - \xdaltimas 3 tareas:",e.slice(-3).map(e=>({name:e.name,wbsCode:e.wbsCode,id:e.id}))),e.forEach(e=>{var t,r;console.log("\ud83d\ude80 DEBUG - Tarea ".concat(e.name," (").concat(e.id,"):"),{predecessors:e.predecessors,successors:e.successors,predecessorsLength:(null===(t=e.predecessors)||void 0===t?void 0:t.length)||0,successorsLength:(null===(r=e.successors)||void 0===r?void 0:r.length)||0})}),e))},100)}catch(t){console.error("\u274c NUEVO SISTEMA - Error al crear tarea:",t),alert("Error al crear la tarea. Por favor intenta de nuevo.")}}(r)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"\u2705"}),(0,At.jsx)("span",{children:"Crear Tarea"})]})]})]})})}),(0,At.jsx)(qQ,{isOpen:Z,onClose:()=>{Q(!1)},hitos:c.filter(e=>e.isMilestone),onSave:async e=>{console.log("\ud83d\udcbe Guardando tareas de minuta:",e);try{if(g&&null!==h&&void 0!==h&&h.id){const t=await kt.default.saveMinutas(h.id,e);if(!t.success)return console.error("\u274c Error guardando en Supabase:",t.error),void alert("\u274c Error guardando las minutas: ".concat(t.error.message||"Error desconocido"));if(te(t=>[...t,...e]),v){const t=[...ee||[],...e];v(h.id,t)}e.forEach(e=>{de(e,h)}),alert("\u2705 Se han guardado ".concat(e.length," tareas de la minuta en Supabase."))}else te(t=>[...t,...e]),alert("\ud83d\udcdd Se han guardado ".concat(e.length," tareas de la minuta localmente."));if("undefined"!==typeof window){const t=new CustomEvent("dataChange",{detail:{type:"minutasUpdated",projectId:null===h||void 0===h?void 0:h.id,minutasCount:e.length}});window.dispatchEvent(t)}}catch(t){console.error("\u274c Error guardando minutas:",t),alert("\u274c Error guardando las minutas: ".concat(t.message))}}}),(0,At.jsx)(WQ,{isOpen:ie,onClose:()=>{se(null),oe(!1)},minuta:ae,hitos:c.filter(e=>e.isMilestone),onUpdate:async e=>{try{if(g){const t=await kt.default.updateMinuta(e.id,{task_description:e.tarea,responsible_person:e.responsable,due_date:e.fecha,milestone_id:e.hitoId,status:e.estatus});if(t.success){if(te(t=>t.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},e),{},{fechaCreacion:t.fechaCreacion}):t)),v){const t=(ee||[]).map(t=>t.id===e.id?(0,s.A)((0,s.A)({},e),{},{fechaCreacion:t.fechaCreacion}):t);v(h.id,t)}const t={task_description:e.tarea,responsible_person:e.responsable,due_date:e.fecha,milestone_id:e.hitoId,status:e.estatus};ue(e,t,h),alert("\u2705 Minuta actualizada correctamente")}else console.error("\u274c Error actualizando minuta:",t.error),alert("\u274c Error actualizando minuta: ".concat(t.error.message||"Error desconocido"))}else te(t=>t.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},e),{},{fechaCreacion:t.fechaCreacion}):t)),alert("\u2705 Minuta actualizada localmente")}catch(t){console.error("\u274c Error actualizando minuta:",t),alert("\u274c Error actualizando minuta: ".concat(t.message))}}}),le&&console.log("\ud83d\udd0d DEBUG - ScheduleWizard props:",{projectId:null===h||void 0===h?void 0:h.id,organizationId:null===h||void 0===h?void 0:h.organizationId,userId:null===(o=kt.default.currentUser)||void 0===o?void 0:o.id,projectDataKeys:h?Object.keys(h):"null",projectData:h}),(0,At.jsx)(QQ,{isOpen:le,onClose:()=>ce(!1),onComplete:async e=>{try{var t,r,n,a;console.log("\ud83e\udd16 Aplicando cronograma generado por IA:",e);const o=new Date,l=o0(o),c=e.activities.map((e,t)=>{const r=c0(l,t,p),n=c0(r,(e.duration||1)-1,p);return{id:e.id,name:e.name,description:e.description||"",duration:e.duration||1,startDate:r,endDate:n,progress:0,status:"pending",priority:e.priority||"medium",assignedTo:e.assignedTo||"Pendiente",dependencies:e.dependencies||[],predecessors:e.dependencies||[],successors:[],isMilestone:!1,estimatedCost:e.estimatedCost||0,category:e.category||"execution",phase:e.phase||"General",generatedBy:"ai",confidence:e.confidence||.8,criteria:e.criteria||""}}),u=(e.milestones||[]).map((e,t)=>{const r=c0(l,c.length+t,p);return{id:e.id,name:e.name,description:e.description||"",duration:0,startDate:r,endDate:r,progress:0,status:"pending",priority:e.priority||"high",assignedTo:e.assignedTo||"Pendiente",dependencies:e.dependencies||[],predecessors:e.dependencies||[],successors:[],isMilestone:!0,estimatedCost:e.estimatedCost||0,category:e.category||"milestone",phase:e.phase||"General",generatedBy:"ai",confidence:e.confidence||.9,criteria:e.criteria||""}}),h=[],f=new Set,m={};c.forEach(e=>{const t=e.phase||"General";m[t]||(m[t]=[]),m[t].push(e)}),Object.entries(m).forEach(e=>{let[t,r]=e;h.push(...r);const n=u.filter(e=>e.phase===t&&!f.has(e.id));h.push(...n),n.forEach(e=>f.add(e.id))});const g=u.filter(e=>!e.phase||"General"===e.phase);h.push(...g),console.log("\ud83d\udd04 Cronograma IA procesado:",{totalItems:h.length,activities:h.filter(e=>!e.isMilestone).length,milestones:h.filter(e=>e.isMilestone).length,phases:[...new Set(h.map(e=>e.phase))]}),console.log("\ud83d\udd0d DEBUG - Orden de tareas antes de CPM:",{activitiesByPhase:Object.keys(m),allAITasksOrder:h.map((e,t)=>({index:t,id:e.id,name:e.name,isMilestone:e.isMilestone,phase:e.phase}))});const v=h.filter(e=>!e.isMilestone).length,b=h.filter(e=>e.isMilestone).length,x="\ud83e\udd16 CRONOGRAMA GENERADO POR IA\n\n"+"Actividades: ".concat(v,"\n")+"Hitos: ".concat(b,"\n")+"Duraci\xf3n estimada: ".concat(Math.round((null===(t=e.metadata)||void 0===t?void 0:t.estimatedDuration)||0)," d\xedas\n\n")+"Esto REEMPLAZAR\xc1 COMPLETAMENTE el cronograma actual.\n\xbfContinuar con la aplicaci\xf3n del cronograma generado por IA?";if(!window.confirm(x))return void console.log("\ud83e\udd16 Aplicaci\xf3n de cronograma IA cancelada por el usuario");const y=g0(h,p),w=y.tasks||y,j=[],N=new Map(w.map(e=>[e.id,e]));if(h.forEach(e=>{const t=N.get(e.id);t&&j.push(t)}),w.forEach(e=>{N.has(e.id)&&h.find(t=>t.id===e.id)||j.push(e)}),console.log("\ud83d\udd0d DEBUG - Resultado CPM:",{cpmResultType:typeof y,cpmResultKeys:Object.keys(y),tasksType:typeof w,tasksIsArray:Array.isArray(w),tasksLength:Array.isArray(w)?w.length:"N/A",orderedTasksLength:j.length,orderPreserved:h.length===j.length}),console.log("\ud83d\udd04 Orden preservado despu\xe9s de CPM:",{originalOrder:h.map(e=>({id:e.id,name:e.name,isMilestone:e.isMilestone})),finalOrder:j.map(e=>({id:e.id,name:e.name,isMilestone:e.isMilestone}))}),console.log("\ud83d\udd0d DEBUG - Verificaci\xf3n de intercalado:",{milestonesPositions:j.map((e,t)=>e.isMilestone?{index:t,name:e.name,phase:e.phase}:null).filter(Boolean),activitiesBeforeMilestones:j.map((e,t)=>{if(e.isMilestone){const r=j.slice(0,t).filter(e=>!e.isMilestone);return{milestone:e.name,activitiesBefore:r.length}}return null}).filter(Boolean),sampleTasksWithDates:j.slice(0,5).map(e=>({id:e.id,name:e.name,startDate:e.startDate,endDate:e.endDate,isMilestone:e.isMilestone}))}),d(j),he({category:"ai-scheduler",action:"schedule-applied",description:"Cronograma generado por IA aplicado al proyecto",details:{activitiesCount:v,milestonesCount:b,templateUsed:null===(r=e.metadata)||void 0===r?void 0:r.templateUsed,estimatedDuration:null===(n=e.metadata)||void 0===n?void 0:n.estimatedDuration,complexity:null===(a=e.metadata)||void 0===a?void 0:a.complexity}}),e.recommendations&&e.recommendations.length>0){var s;const t=e.recommendations.map(e=>"\u2022 ".concat(e.title,": ").concat(e.description)).join("\n");alert("\u2705 CRONOGRAMA DE IA APLICADO EXITOSAMENTE!\n\n"+"\ud83d\udcca ".concat(h.length," elementos generados\n")+"\ud83c\udfaf ".concat(b," hitos creados\n")+"\u23f1\ufe0f Duraci\xf3n estimada: ".concat(Math.round((null===(s=e.metadata)||void 0===s?void 0:s.estimatedDuration)||0)," d\xedas\n\n")+"\ud83d\udca1 RECOMENDACIONES:\n".concat(t))}else{var i;alert("\u2705 CRONOGRAMA DE IA APLICADO EXITOSAMENTE!\n\n"+"\ud83d\udcca ".concat(h.length," elementos generados\n")+"\ud83c\udfaf ".concat(b," hitos creados\n")+"\u23f1\ufe0f Duraci\xf3n estimada: ".concat(Math.round((null===(i=e.metadata)||void 0===i?void 0:i.estimatedDuration)||0)," d\xedas"))}console.log("\u2705 Cronograma de IA aplicado exitosamente")}catch(o){console.error("\u274c Error aplicando cronograma de IA:",o),alert("\u274c Error aplicando cronograma de IA: ".concat(o.message))}},projectId:null===h||void 0===h?void 0:h.id,currentProject:h,organizationId:null===h||void 0===h?void 0:h.organizationId,userId:null===(l=kt.default.currentUser)||void 0===l?void 0:l.id})]})},j0=e=>{let{workPackages:n,setWorkPackages:a,currentProject:i,risks:o=[],scheduleData:l=null,includeWeekends:c=!1,purchaseOrders:d=[],setPurchaseOrders:u,advances:h=[],setAdvances:f,invoices:p=[],setInvoices:m,contracts:g=[],setContracts:v,useSupabase:b=!1}=e;const[x,y]=(0,t.useState)(!1),[w,j]=(0,t.useState)(!1),[N,_]=(0,t.useState)(!1),[S,k]=(0,t.useState)(null),[A,E]=(0,t.useState)(null),[C,T]=(0,t.useState)(null),[P,D]=(0,t.useState)(!1),[O,I]=(0,t.useState)(null),{logFinancialEvent:M}=AQ(null===i||void 0===i?void 0:i.id,b);t.useEffect(()=>{l&&(e=>{if(!e||!e.tasks)return;console.log("\ud83d\udd04 Sincronizando m\xe9tricas financieras con cronograma...");const t=n.map(t=>{const r=e.tasks.find(e=>e.workPackageId===t.id);return r?{id:t.id,name:t.name,description:t.description,startDate:t.startDate,endDate:t.endDate,budget:t.budget,actualCost:t.actualCost,status:t.status,priority:t.priority,percentComplete:r.progress||t.percentComplete,plannedValue:t.plannedValue,earnedValue:r.progress?t.plannedValue*r.progress/100:t.earnedValue,resources:t.resources,startDate:r.startDate||t.startDate,endDate:r.endDate||t.endDate,status:r.status||t.status}:t});a(t),console.log("\u2705 Work packages actualizados desde cronograma")})(l)},[l]);const R=()=>{if(!o||!Array.isArray(o))return.05*((null===i||void 0===i?void 0:i.budget)||0);const e=o.filter(e=>"active"===e.status);if(0===e.length)return.05*((null===i||void 0===i?void 0:i.budget)||0);return.05*((null===i||void 0===i?void 0:i.budget)||0)+e.reduce((e,t)=>e+(t.probability||0)*(t.costImpact||0)*("high"===t.priority?1.5:"medium"===t.priority?1.2:1),0)},L=()=>{if(!i)return 0;const e=i.budget||0;if(!o||!Array.isArray(o))return.1*e;const t=o.filter(e=>"active"===e.status);let r=.1*e;t.length>10?r*=1.2:t.length>5&&(r*=1.1);const n=t.filter(e=>"high"===e.priority).length;return n>3&&(r*=1.15),r},F=(0,t.useMemo)(()=>{const e=Array.isArray(d)?d:[],t=Array.isArray(h)?h:[],r=Array.isArray(p)?p:[];console.log("\ud83d\udd0d FINANCIAL METRICS DEBUG:",{purchaseOrdersType:typeof d,purchaseOrdersIsArray:Array.isArray(d),purchaseOrdersLength:e.length,advancesType:typeof h,advancesIsArray:Array.isArray(h),advancesLength:t.length,invoicesType:typeof p,invoicesIsArray:Array.isArray(p),invoicesLength:r.length});const n=e.reduce((e,t)=>e+(t.totalAmount||0),0),a=t.reduce((e,t)=>e+(t.amount||0),0),s=r.reduce((e,t)=>e+(t.amount||0),0),o=r.filter(e=>"paid"===e.status).reduce((e,t)=>e+(t.amount||0),0),l=s-o,c=(null===i||void 0===i?void 0:i.budget)||0,u=s,f=o,m=n+a,v=g.reduce((e,t)=>e+(t.value||0),0),b=g.filter(e=>"active"===e.status).reduce((e,t)=>e+(t.value||0),0),x=c-f,y=u+x;return{totalPO:n,totalAdvances:a,totalInvoices:s,paidInvoices:o,pendingInvoices:l,totalContracts:v,activeContracts:b,committedBudget:n+a+b,availableBudget:c-(n+a+b),BAC:c,AC:u,EV:f,PV:m,CV:f-u,SV:f-m,CPI:u>0?f/u:1,SPI:m>0?f/m:1,ETC:x,EAC:y,VAC:c-y,TCPI:(c-f)/(c-u),percentComplete:c>0?f/c*100:0,percentSpent:c>0?u/c*100:0,contingencyReserve:R(),managementReserve:L(),totalReserves:R()+L(),totalProjectBudget:((null===i||void 0===i?void 0:i.budget)||0)+R()+L()}},[d,h,p,g,i,o]),B=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-emerald-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udcb0"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800",children:"Gesti\xf3n Financiera"}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Control de costos, \xf3rdenes de compra, anticipos y facturas"})]})]}),(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl px-4 py-2 shadow-sm",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"\ud83d\udcc5 D\xedas laborables:"}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(c?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:c?"Lunes a Domingo":"Lunes a Viernes"})]})})]})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["BAC (Presupuesto)",(0,At.jsx)("span",{className:"ml-1 text-blue-500 cursor-help",title:"Budget at Completion: Presupuesto total aprobado para el proyecto",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",(F.BAC/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-blue-500 text-2xl",children:"\ud83d\udcb0"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["EV (Valor Ganado)",(0,At.jsx)("span",{className:"ml-1 text-green-500 cursor-help",title:"Earned Value: Valor del trabajo realmente completado",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",(F.EV/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-green-500 text-2xl",children:"\ud83d\udcc8"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-yellow-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["AC (Costo Real)",(0,At.jsx)("span",{className:"ml-1 text-yellow-500 cursor-help",title:"Actual Cost: Costo real incurrido hasta la fecha",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:["$",(F.AC/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-yellow-500 text-2xl",children:"\ud83d\udcb8"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["EAC (Estimaci\xf3n Final)",(0,At.jsx)("span",{className:"ml-1 text-purple-500 cursor-help",title:"Estimate at Completion: Estimaci\xf3n del costo total al terminar",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:["$",(F.EAC/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-purple-500 text-2xl",children:"\ud83c\udfaf"})]})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["CPI",(0,At.jsx)("span",{className:"ml-1 text-blue-500 cursor-help",title:"Cost Performance Index: EV/AC",children:"\u2753"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold ".concat(F.CPI>=1?"text-green-600":"text-red-600"),children:F.CPI.toFixed(2)}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Cost Performance"})]}),(0,At.jsx)("div",{className:"text-blue-500 text-2xl",children:"\ud83d\udcca"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-orange-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["SPI",(0,At.jsx)("span",{className:"ml-1 text-orange-500 cursor-help",title:"Schedule Performance Index: EV/PV",children:"\u2753"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold ".concat(F.SPI>=1?"text-green-600":"text-red-600"),children:F.SPI.toFixed(2)}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Schedule Performance"})]}),(0,At.jsx)("div",{className:"text-orange-500 text-2xl",children:"\u23f1\ufe0f"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["VAC",(0,At.jsx)("span",{className:"ml-1 text-red-500 cursor-help",title:"Variance at Completion: BAC-EAC",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold ".concat(F.VAC>=0?"text-green-600":"text-red-600"),children:["$",(F.VAC/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Variance at Completion"})]}),(0,At.jsx)("div",{className:"text-red-500 text-2xl",children:"\ud83d\udcc9"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-teal-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["TCPI",(0,At.jsx)("span",{className:"ml-1 text-teal-500 cursor-help",title:"To Complete Performance Index",children:"\u2753"})]}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:F.TCPI.toFixed(2)}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"To Complete Performance"})]}),(0,At.jsx)("div",{className:"text-teal-500 text-2xl",children:"\ud83c\udfaf"})]})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["Contratos Activos",(0,At.jsx)("span",{className:"ml-1 text-purple-500 cursor-help",title:"Valor total de contratos activos",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",(F.activeContracts/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Valor total"})]}),(0,At.jsx)("div",{className:"text-purple-500 text-2xl",children:"\ud83d\udccb"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["% Completado",(0,At.jsx)("span",{className:"ml-1 text-green-500 cursor-help",title:"Porcentaje de trabajo completado",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[F.percentComplete.toFixed(1),"%"]}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Progreso del proyecto"})]}),(0,At.jsx)("div",{className:"text-green-500 text-2xl",children:"\ud83d\udcc8"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-orange-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["% Gastado",(0,At.jsx)("span",{className:"ml-1 text-orange-500 cursor-help",title:"Porcentaje del presupuesto utilizado",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:[F.percentSpent.toFixed(1),"%"]}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Presupuesto utilizado"})]}),(0,At.jsx)("div",{className:"text-orange-500 text-2xl",children:"\ud83d\udcb8"})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udee1\ufe0f Reservas y Contingencias"}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Basado en an\xe1lisis de riesgos"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["Presupuesto Base",(0,At.jsx)("span",{className:"ml-1 text-gray-500 cursor-help",title:"Presupuesto inicial aprobado del proyecto",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",(((null===i||void 0===i?void 0:i.budget)||0)/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-gray-500 text-2xl",children:"\ud83d\udcb0"})]})}),(0,At.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["Reserva de Contingencia",(0,At.jsx)("span",{className:"ml-1 text-blue-500 cursor-help",title:"Reserva para riesgos identificados. F\xf3rmula: 5% base + impacto esperado de riesgos activos",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:["$",(F.contingencyReserve/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-blue-500 text-2xl",children:"\ud83d\udee1\ufe0f"})]})}),(0,At.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["Reserva de Gesti\xf3n",(0,At.jsx)("span",{className:"ml-1 text-green-500 cursor-help",title:"Reserva para riesgos no identificados. F\xf3rmula: 10% base + ajustes por complejidad",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-green-800",children:["$",(F.managementReserve/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-green-500 text-2xl",children:"\ud83d\udcca"})]})}),(0,At.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500 mb-1 flex items-center",children:["Presupuesto Total",(0,At.jsx)("span",{className:"ml-1 text-purple-500 cursor-help",title:"Presupuesto base + reservas de contingencia y gesti\xf3n",children:"\u2753"})]}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-purple-800",children:["$",(F.totalProjectBudget/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-purple-500 text-2xl",children:"\ud83c\udfaf"})]})})]}),(0,At.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udccb Detalles del C\xe1lculo"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-600",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Reserva de Contingencia:"})," 5% del presupuesto base + impacto esperado de riesgos activos"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Riesgos Activos:"})," ",(null===o||void 0===o?void 0:o.filter(e=>"active"===e.status).length)||0," identificados"]})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Reserva de Gesti\xf3n:"})," 10% del presupuesto base + ajustes por complejidad"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Riesgos de Alta Prioridad:"})," ",(null===o||void 0===o?void 0:o.filter(e=>"active"===e.status&&"high"===e.priority).length)||0," identificados"]})]})]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udccb \xd3rdenes de Compra"}),(0,At.jsx)("button",{onClick:()=>{k({id:"",number:"",supplier:"",description:"",totalAmount:0,currency:"USD",status:"pending",requestDate:(new Date).toISOString().split("T")[0],approvalDate:"",expectedDate:"",projectId:(null===i||void 0===i?void 0:i.id)||""}),y(!0)},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"+ Nueva"})]}),(0,At.jsx)("div",{className:"space-y-3",children:Array.isArray(d)&&0!==d.length?d.map(e=>{var t;return(0,At.jsx)("div",{className:"border rounded p-3",children:(0,At.jsxs)("div",{className:"flex justify-between items-start",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("div",{className:"font-medium text-sm",children:e.number}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:e.supplier}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:["$",null===(t=e.totalAmount)||void 0===t?void 0:t.toLocaleString()]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("approved"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"approved"===e.status?"Aprobada":"pending"===e.status?"Pendiente":"Rechazada"}),"approved"===e.status&&(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.approvalDate&&""!==e.approvalDate.trim()?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e.approvalDate&&""!==e.approvalDate.trim()?"\u2705 ".concat(new Date(e.approvalDate+"T00:00:00").toLocaleDateString("es-ES")):"\u26a0\ufe0f Sin fecha de aprobaci\xf3n"})]})]}),(0,At.jsxs)("div",{className:"flex space-x-1",children:[(0,At.jsx)("button",{onClick:()=>{k(e),y(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"\u270f\ufe0f"}),(0,At.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta orden de compra?"))try{const{default:t}=await Promise.resolve().then(r.bind(r,9874)),n=await t.deletePurchaseOrder(e);if(n.success){const t=(Array.isArray(d)?d:[]).filter(t=>t.id!==e);console.log("\ud83d\uddd1\ufe0f ELIMINANDO OC:",e,"\xd3rdenes restantes:",t.length),u(t),console.log("\u2705 Orden de compra eliminada localmente y de Supabase")}else console.error("\u274c Error eliminando orden de compra de Supabase:",n.error),alert("Error eliminando la orden de compra. Int\xe9ntalo de nuevo.")}catch(t){console.error("\u274c Error inesperado eliminando orden de compra:",t),alert("Error inesperado eliminando la orden de compra. Int\xe9ntalo de nuevo.")}})(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"\ud83d\uddd1\ufe0f"})]})]})},e.id)}):(0,At.jsx)("p",{className:"text-gray-500 text-sm",children:"No hay \xf3rdenes de compra"})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcb3 Anticipos"}),(0,At.jsx)("button",{onClick:()=>{E({}),j(!0)},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"+ Nuevo"})]}),(0,At.jsx)("div",{className:"space-y-3",children:0===h.length?(0,At.jsx)("p",{className:"text-gray-500 text-sm",children:"No hay anticipos"}):h.map(e=>{var t;return(0,At.jsx)("div",{className:"border rounded p-3",children:(0,At.jsxs)("div",{className:"flex justify-between items-start",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-sm",children:e.number}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:e.supplier}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:["$",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString()]})]}),(0,At.jsxs)("div",{className:"flex space-x-1",children:[(0,At.jsx)("button",{onClick:()=>{E(e),j(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"\u270f\ufe0f"}),(0,At.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este anticipo?"))try{const{default:t}=await Promise.resolve().then(r.bind(r,9874)),n=await t.deleteAdvance(e);if(n.success){const t=(Array.isArray(h)?h:[]).filter(t=>t.id!==e);f(t),console.log("\u2705 Anticipo eliminado localmente y de Supabase")}else console.error("\u274c Error eliminando anticipo de Supabase:",n.error),alert("Error eliminando el anticipo. Int\xe9ntalo de nuevo.")}catch(t){console.error("\u274c Error inesperado eliminando anticipo:",t),alert("Error inesperado eliminando el anticipo. Int\xe9ntalo de nuevo.")}})(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"\ud83d\uddd1\ufe0f"})]})]})},e.id)})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcc4 Facturas"}),(0,At.jsx)("button",{onClick:()=>{T({}),_(!0)},className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700",children:"+ Nueva"})]}),(0,At.jsx)("div",{className:"space-y-3",children:0===p.length?(0,At.jsx)("p",{className:"text-gray-500 text-sm",children:"No hay facturas"}):p.map(e=>{var t;return(0,At.jsx)("div",{className:"border rounded p-3",children:(0,At.jsxs)("div",{className:"flex justify-between items-start",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-sm",children:e.number}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:e.supplier}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:["$",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString()]}),(0,At.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat(B(e.status)),children:e.status})]}),(0,At.jsxs)("div",{className:"flex space-x-1",children:[(0,At.jsx)("button",{onClick:()=>{T(e),_(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"\u270f\ufe0f"}),(0,At.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta factura?"))try{const{default:t}=await Promise.resolve().then(r.bind(r,9874)),n=await t.deleteInvoice(e);if(n.success){const t=(Array.isArray(p)?p:[]).filter(t=>t.id!==e);m(t),console.log("\u2705 Factura eliminada localmente y de Supabase")}else console.error("\u274c Error eliminando factura de Supabase:",n.error),alert("Error eliminando la factura. Int\xe9ntalo de nuevo.")}catch(t){console.error("\u274c Error inesperado eliminando factura:",t),alert("Error inesperado eliminando la factura. Int\xe9ntalo de nuevo.")}})(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"\ud83d\uddd1\ufe0f"})]})]})},e.id)})})]})]}),x&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold",children:null!==S&&void 0!==S&&S.id?"Editar Orden de Compra":"Nueva Orden de Compra"}),(0,At.jsx)("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de OC *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:(null===S||void 0===S?void 0:S.number)||"",onChange:e=>k((0,s.A)((0,s.A)({},S),{},{number:e.target.value})),placeholder:"PO-2025-XXX"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proveedor *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:(null===S||void 0===S?void 0:S.supplier)||"",onChange:e=>k((0,s.A)((0,s.A)({},S),{},{supplier:e.target.value})),placeholder:"Nombre del proveedor"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto Total *"}),(0,At.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:(null===S||void 0===S?void 0:S.totalAmount)||"",onChange:e=>k((0,s.A)((0,s.A)({},S),{},{totalAmount:Number(e.target.value)})),min:"0",step:"0.01"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,At.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:(null===S||void 0===S?void 0:S.status)||"pending",onChange:e=>k((0,s.A)((0,s.A)({},S),{},{status:e.target.value})),children:[(0,At.jsx)("option",{value:"pending",children:"Pendiente"}),(0,At.jsx)("option",{value:"approved",children:"Aprobada"}),(0,At.jsx)("option",{value:"rejected",children:"Rechazada"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Fecha de Aprobaci\xf3n *",(0,At.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,At.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===S||void 0===S?void 0:S.approvalDate)||"",onChange:e=>k((0,s.A)((0,s.A)({},S),{},{approvalDate:e.target.value})),required:!0}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Fecha cuando la orden fue aprobada (usada para flujo de caja)"})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===S||void 0===S?void 0:S.description)||"",onChange:e=>k((0,s.A)((0,s.A)({},S),{},{description:e.target.value})),placeholder:"Descripci\xf3n de los productos/servicios"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{if(console.log("\ud83d\udcbe GUARDANDO OC - editingPO:",S),"approved"===S.status&&(!S.approvalDate||""===S.approvalDate.trim()))return void alert("\u26a0\ufe0f Error: Las \xf3rdenes de compra aprobadas deben tener una fecha de aprobaci\xf3n para el c\xe1lculo del flujo de caja.");const e=Array.isArray(d)?d:[];if(S.id){const t=e.map(e=>e.id===S.id?S:e);console.log("\ud83d\udcdd EDITANDO OC EXISTENTE:",S.id,"Total \xf3rdenes:",t.length),u(t)}else{const t={id:Date.now().toString(),number:S.number,supplier:S.supplier,description:S.description,totalAmount:S.totalAmount,currency:S.currency||"USD",status:S.status,requestDate:S.requestDate,approvalDate:S.approvalDate,expectedDate:S.expectedDate,projectId:S.projectId},r=[...e,t];console.log("\u2795 CREANDO NUEVA OC:",t.id,"Total \xf3rdenes:",r.length),u(r),M&&i&&M("purchase-order",t,i)}y(!1),k(null)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Guardar"})]})]})})}),w&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold",children:null!==A&&void 0!==A&&A.id?"Editar Anticipo":"Nuevo Anticipo"}),(0,At.jsx)("button",{onClick:()=>j(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de Anticipo *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:(null===A||void 0===A?void 0:A.number)||"",onChange:e=>E({id:A.id,number:A.number,supplier:A.supplier,amount:A.amount,paymentDate:A.paymentDate,description:A.description,projectId:A.projectId,number:e.target.value}),placeholder:"ADV-2025-XXX"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proveedor *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:(null===A||void 0===A?void 0:A.supplier)||"",onChange:e=>E({id:A.id,number:A.number,supplier:A.supplier,amount:A.amount,paymentDate:A.paymentDate,description:A.description,projectId:A.projectId,supplier:e.target.value}),placeholder:"Nombre del proveedor"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto *"}),(0,At.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:(null===A||void 0===A?void 0:A.amount)||"",onChange:e=>E({id:A.id,number:A.number,supplier:A.supplier,amount:A.amount,paymentDate:A.paymentDate,description:A.description,projectId:A.projectId,amount:Number(e.target.value)}),min:"0",step:"0.01"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Pago"}),(0,At.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2",value:(null===A||void 0===A?void 0:A.paymentDate)||"",onChange:e=>E({id:A.id,number:A.number,supplier:A.supplier,amount:A.amount,paymentDate:A.paymentDate,description:A.description,projectId:A.projectId,paymentDate:e.target.value})})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===A||void 0===A?void 0:A.description)||"",onChange:e=>E({id:A.id,number:A.number,supplier:A.supplier,amount:A.amount,paymentDate:A.paymentDate,description:A.description,projectId:A.projectId,description:e.target.value}),placeholder:"Descripci\xf3n del anticipo"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{const e=Array.isArray(h)?h:[];if(A.id){const t=e.map(e=>e.id===A.id?A:e);f(t)}else{const t={id:Date.now().toString(),number:A.number,supplier:A.supplier,amount:A.amount,paymentDate:A.paymentDate,description:A.description,projectId:A.projectId},r=[...e,t];f(r),M&&i&&M("advance",t,i)}j(!1),E(null)},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Guardar"})]})]})})}),N&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold",children:null!==C&&void 0!==C&&C.id?"Editar Factura":"Nueva Factura"}),(0,At.jsx)("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de Factura *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.number)||"",onChange:e=>T({id:C.id,number:C.number,supplier:C.supplier,amount:C.amount,status:C.status,receivedDate:C.receivedDate,dueDate:C.dueDate,description:C.description,projectId:C.projectId,number:e.target.value}),placeholder:"INV-2025-XXX"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proveedor *"}),(0,At.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.supplier)||"",onChange:e=>T({id:C.id,number:C.number,supplier:C.supplier,amount:C.amount,status:C.status,receivedDate:C.receivedDate,dueDate:C.dueDate,description:C.description,projectId:C.projectId,supplier:e.target.value}),placeholder:"Nombre del proveedor"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto *"}),(0,At.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.amount)||"",onChange:e=>T({id:C.id,number:C.number,supplier:C.supplier,amount:C.amount,status:C.status,receivedDate:C.receivedDate,dueDate:C.dueDate,description:C.description,projectId:C.projectId,amount:Number(e.target.value)}),min:"0",step:"0.01"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,At.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.status)||"pending",onChange:e=>T({id:C.id,number:C.number,supplier:C.supplier,amount:C.amount,status:C.status,receivedDate:C.receivedDate,dueDate:C.dueDate,description:C.description,projectId:C.projectId,status:e.target.value}),children:[(0,At.jsx)("option",{value:"pending",children:"Pendiente"}),(0,At.jsx)("option",{value:"paid",children:"Pagada"}),(0,At.jsx)("option",{value:"overdue",children:"Vencida"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Recepci\xf3n"}),(0,At.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.receivedDate)||"",onChange:e=>T({id:C.id,number:C.number,supplier:C.supplier,amount:C.amount,status:C.status,receivedDate:C.receivedDate,dueDate:C.dueDate,description:C.description,projectId:C.projectId,receivedDate:e.target.value})})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Vencimiento"}),(0,At.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2",value:(null===C||void 0===C?void 0:C.dueDate)||"",onChange:e=>T({id:C.id,number:C.number,supplier:C.supplier,amount:C.amount,status:C.status,receivedDate:C.receivedDate,dueDate:C.dueDate,description:C.description,projectId:C.projectId,dueDate:e.target.value})})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,At.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:"3",value:(null===C||void 0===C?void 0:C.description)||"",onChange:e=>T({id:C.id,number:C.number,supplier:C.supplier,amount:C.amount,status:C.status,receivedDate:C.receivedDate,dueDate:C.dueDate,description:C.description,projectId:C.projectId,description:e.target.value}),placeholder:"Descripci\xf3n de la factura"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>_(!1),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{const e=Array.isArray(p)?p:[];if(C.id){const t=e.map(e=>e.id===C.id?C:e);m(t)}else{const t={id:Date.now().toString(),number:C.number,supplier:C.supplier,amount:C.amount,dueDate:C.dueDate,description:C.description,projectId:C.projectId},r=[...e,t];m(r),M&&i&&M("invoice",t,i)}_(!1),T(null)},className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Guardar"})]})]})})})]})},N0=e=>{let{projects:r,workPackages:n,currentProject:a,globalResources:s,setGlobalResources:i,includeWeekends:o=!1,getCurrentProjectResourceAssignments:l,updateCurrentProjectResourceAssignments:c,getCurrentProjectResources:d,getAvailableResources:u,calculateResourceWorkload:h}=e;const f=s||[],[p,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[b,x]=(0,t.useState)(!1),[y,w]=(0,t.useState)(!1),[j,N]=(0,t.useState)(null),[_,S]=(0,t.useState)(null),[k,A]=(0,t.useState)(""),[E,C]=(0,t.useState)("all"),[T,P]=(0,t.useState)({name:"",role:"",skills:"",availability:100,hourlyRate:0,status:"active"}),[D,O]=(0,t.useState)({resourceId:"",projectId:"",workPackageId:"",allocation:0,startDate:"",endDate:""}),I=(0,t.useMemo)(()=>f.filter(e=>{const t=!k||e.name.toLowerCase().includes(k.toLowerCase())||e.role.toLowerCase().includes(k.toLowerCase()),r="all"===E||e.role===E;return t&&r}),[f,k,E]),M=(0,t.useMemo)(()=>{const e=f.map(e=>e.role);return Array.from(new Set(e))},[f]),R=(0,t.useMemo)(()=>{const e=f.length,t=f.filter(e=>"active"===e.status).length,r=f.filter(e=>h(e.id)>90).length,n=f.filter(e=>h(e.id)<50).length,a=f.reduce((e,t)=>e+160*t.availability*t.hourlyRate,0),s=f.length>0?f.reduce((e,t)=>e+h(t.id),0)/f.length:0;return{totalResources:e,activeResources:t,overworkedResources:r,availableResources:n,totalCost:a,averageWorkload:s}},[f,h]),L=e=>{N({id:e.id,name:e.name,role:e.role,availability:e.availability,hourlyRate:e.hourlyRate,skills:Array.isArray(e.skills)?e.skills.join(", "):e.skills,email:e.email,phone:e.phone,department:e.department,experience:e.experience,certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications,notes:e.notes,status:e.status}),x(!0)};return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-teal-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-teal-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsx)("div",{className:"flex items-center justify-between",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udc65"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800",children:"Gesti\xf3n de Recursos"}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Administraci\xf3n de recursos humanos y asignaci\xf3n de proyectos"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl px-4 py-2 shadow-sm",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"\ud83d\udcc5 D\xedas laborables:"}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(o?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:o?"Lunes a Domingo":"Lunes a Viernes"})]})}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:R.totalResources}),(0,At.jsx)("div",{className:"text-gray-600",children:"Recursos Totales"})]})]})]})})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Recursos Activos"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:R.activeResources})]}),(0,At.jsx)("div",{className:"text-green-500 text-2xl",children:"\ud83d\udc65"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Sobrecargados"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:R.overworkedResources})]}),(0,At.jsx)("div",{className:"text-red-500 text-2xl",children:"\u26a0\ufe0f"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Disponibles"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:R.availableResources})]}),(0,At.jsx)("div",{className:"text-blue-500 text-2xl",children:"\u2705"})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Costo Mensual"}),(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",(R.totalCost/1e3).toFixed(0),"K"]})]}),(0,At.jsx)("div",{className:"text-purple-500 text-2xl",children:"\ud83d\udcb0"})]})})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:(0,At.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,At.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,At.jsx)("input",{type:"text",placeholder:"Buscar recursos...",value:k,onChange:e=>A(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm"}),(0,At.jsxs)("select",{value:E,onChange:e=>C(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,At.jsx)("option",{value:"all",children:"Todos los roles"}),M.map(e=>(0,At.jsx)("option",{value:e,children:e},e))]})]}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"\ud83d\udccb Asignar Recurso"}),(0,At.jsx)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"\u2795 Agregar Recurso"})]})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recurso"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Carga de Trabajo"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proyectos"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Costo/Hora"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(e=>{return(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,At.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name.split(" ").map(e=>e[0]).join("")})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-blue-600",onClick:()=>{S(e),w(!0)},children:e.name}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:Array.isArray(e.skills)?e.skills.slice(0,2).join(", "):e.skills})]})]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.role})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"mr-2",children:(t=h(e.id),t>90?"\ud83d\udd34":t>75?"\ud83d\udfe1":t>50?"\ud83d\udd35":"\ud83d\udfe2")}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("div",{className:"flex justify-between text-sm",children:(0,At.jsxs)("span",{children:[h(e.id),"%"]})}),(0,At.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full ".concat(h(e.id)>90?"bg-red-500":h(e.id)>75?"bg-yellow-500":h(e.id)>50?"bg-blue-500":"bg-green-500"),style:{width:"".concat(h(e.id),"%")}})})]})]})}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[l().filter(t=>t.resourceId===e.id).length," asignaciones"]}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.hourlyRate,"/h"]}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"inactive"===e.status?"bg-gray-100 text-gray-800":"on-leave"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"active"===e.status?"Activo":"inactive"===e.status?"Inactivo":"on-leave"===e.status?"Licencia":"Terminado"})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:()=>L(e),className:"text-green-600 hover:text-green-900",title:"Editar recurso",children:"\u270f\ufe0f"}),(0,At.jsx)("button",{onClick:()=>{S(e),v(!0)},className:"text-blue-600 hover:text-blue-900",title:"Asignar a proyecto",children:"\ud83d\udccb"}),(0,At.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este recurso?")&&i(e=>e.filter(e=>e.id!==t)));var t},className:"text-red-600 hover:text-red-900",title:"Eliminar recurso",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id);var t})})]})})}),p&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Agregar Nuevo Recurso"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,At.jsx)("input",{type:"text",value:T.name,onChange:e=>P({name:e.target.value,role:T.role,skills:T.skills,availability:T.availability,hourlyRate:T.hourlyRate,email:T.email,phone:T.phone,department:T.department,experience:T.experience,certifications:T.certifications,notes:T.notes}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rol"}),(0,At.jsx)("input",{type:"text",value:T.role,onChange:e=>P({name:T.name,role:e.target.value,skills:T.skills,availability:T.availability,hourlyRate:T.hourlyRate,email:T.email,phone:T.phone,department:T.department,experience:T.experience,certifications:T.certifications,notes:T.notes}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Habilidades (separadas por comas)"}),(0,At.jsx)("input",{type:"text",value:T.skills,onChange:e=>P({name:T.name,role:T.role,skills:T.skills,availability:T.availability,hourlyRate:T.hourlyRate,email:T.email,phone:T.phone,department:T.department,experience:T.experience,certifications:T.certifications,notes:T.notes,skills:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Disponibilidad (%)"}),(0,At.jsx)("input",{type:"number",value:T.availability,onChange:e=>P({name:T.name,role:T.role,skills:T.skills,availability:T.availability,hourlyRate:T.hourlyRate,email:T.email,phone:T.phone,department:T.department,experience:T.experience,certifications:T.certifications,notes:T.notes,availability:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Costo por Hora ($)"}),(0,At.jsx)("input",{type:"number",value:T.hourlyRate,onChange:e=>P({name:T.name,role:T.role,skills:T.skills,availability:T.availability,hourlyRate:T.hourlyRate,email:T.email,phone:T.phone,department:T.department,experience:T.experience,certifications:T.certifications,notes:T.notes,hourlyRate:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{if(!T.name||!T.role)return;const e={id:"res-"+String(Date.now()).slice(-6),name:T.name,role:T.role,availability:T.availability,hourlyRate:T.hourlyRate,skills:T.skills.split(",").map(e=>e.trim()),email:T.email||"",phone:T.phone||"",department:T.department||"",experience:T.experience||"",certifications:T.certifications?T.certifications.split(",").map(e=>e.trim()):[],notes:T.notes||""};i(t=>{const r=t.slice();return r.push(e),r}),m(!1),P({name:"",role:"",skills:"",availability:100,hourlyRate:0,status:"active",email:"",phone:"",department:"",experience:"",certifications:"",notes:""})},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Agregar"})]})]})})}),g&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Asignar Recurso a Proyecto"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Recurso"}),(0,At.jsxs)("select",{value:D.resourceId,onChange:e=>O({resourceId:e.target.value,projectId:D.projectId,taskId:D.taskId,allocation:D.allocation,hourlyRate:D.hourlyRate,startDate:D.startDate,endDate:D.endDate,notes:D.notes}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,At.jsx)("option",{value:"",children:"Seleccionar recurso"}),f.map(e=>(0,At.jsxs)("option",{value:e.id,children:[e.name," (",e.role,")"]},e.id))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Proyecto"}),(0,At.jsxs)("select",{value:D.projectId,onChange:e=>O({resourceId:D.resourceId,projectId:D.projectId,taskId:D.taskId,allocation:D.allocation,hourlyRate:D.hourlyRate,startDate:D.startDate,endDate:D.endDate,notes:D.notes,projectId:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,At.jsx)("option",{value:"",children:"Seleccionar proyecto"}),r.map(e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Asignaci\xf3n (%)"}),(0,At.jsx)("input",{type:"number",value:D.allocation,onChange:e=>O({resourceId:D.resourceId,projectId:D.projectId,taskId:D.taskId,allocation:D.allocation,hourlyRate:D.hourlyRate,startDate:D.startDate,endDate:D.endDate,notes:D.notes,allocation:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Inicio"}),(0,At.jsx)("input",{type:"date",value:D.startDate,onChange:e=>O({resourceId:D.resourceId,projectId:D.projectId,taskId:D.taskId,allocation:D.allocation,hourlyRate:D.hourlyRate,startDate:D.startDate,endDate:D.endDate,notes:D.notes,startDate:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Fin"}),(0,At.jsx)("input",{type:"date",value:D.endDate,onChange:e=>O({resourceId:D.resourceId,projectId:D.projectId,taskId:D.taskId,allocation:D.allocation,hourlyRate:D.hourlyRate,startDate:D.startDate,endDate:D.endDate,notes:D.notes,endDate:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{if(!D.resourceId||!D.projectId)return;const e=l(),t={id:"assign-"+String(Date.now()).slice(-6),projectId:(null===a||void 0===a?void 0:a.id)||"",resourceId:D.resourceId,workPackageId:D.workPackageId,role:D.role,allocation:D.allocation,startDate:D.startDate,endDate:D.endDate,hourlyRate:D.hourlyRate,status:"active",notes:D.notes||""};c(()=>{const r=e.slice();return r.push(t),r}),v(!1),O({resourceId:"",projectId:"",workPackageId:"",allocation:0,startDate:"",endDate:"",role:"",hourlyRate:0,notes:""})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Asignar"})]})]})})}),b&&j&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Editar Recurso"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,At.jsx)("input",{type:"text",value:j.name,onChange:e=>N({id:j.id,name:j.name,role:j.role,availability:j.availability,hourlyRate:j.hourlyRate,skills:j.skills,email:j.email,phone:j.phone,department:j.department,experience:j.experience,certifications:j.certifications,notes:j.notes,status:j.status,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rol"}),(0,At.jsx)("input",{type:"text",value:j.role,onChange:e=>N({id:j.id,name:j.name,role:j.role,availability:j.availability,hourlyRate:j.hourlyRate,skills:j.skills,email:j.email,phone:j.phone,department:j.department,experience:j.experience,certifications:j.certifications,notes:j.notes,status:j.status,role:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Habilidades (separadas por comas)"}),(0,At.jsx)("input",{type:"text",value:j.skills,onChange:e=>N({id:j.id,name:j.name,role:j.role,availability:j.availability,hourlyRate:j.hourlyRate,skills:j.skills,email:j.email,phone:j.phone,department:j.department,experience:j.experience,certifications:j.certifications,notes:j.notes,status:j.status,skills:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Disponibilidad (%)"}),(0,At.jsx)("input",{type:"number",value:j.availability,onChange:e=>N({id:j.id,name:j.name,role:j.role,availability:j.availability,hourlyRate:j.hourlyRate,skills:j.skills,email:j.email,phone:j.phone,department:j.department,experience:j.experience,certifications:j.certifications,notes:j.notes,status:j.status,availability:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Costo por Hora ($)"}),(0,At.jsx)("input",{type:"number",value:j.hourlyRate,onChange:e=>N({id:j.id,name:j.name,role:j.role,availability:j.availability,hourlyRate:j.hourlyRate,skills:j.skills,email:j.email,phone:j.phone,department:j.department,experience:j.experience,certifications:j.certifications,notes:j.notes,status:j.status,hourlyRate:Number(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),(0,At.jsxs)("select",{value:j.status,onChange:e=>N({id:j.id,name:j.name,role:j.role,availability:j.availability,hourlyRate:j.hourlyRate,skills:j.skills,email:j.email,phone:j.phone,department:j.department,experience:j.experience,certifications:j.certifications,notes:j.notes,status:j.status,status:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,At.jsx)("option",{value:"active",children:"Activo"}),(0,At.jsx)("option",{value:"inactive",children:"Inactivo"}),(0,At.jsx)("option",{value:"on-leave",children:"En licencia"}),(0,At.jsx)("option",{value:"terminated",children:"Terminado"})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>{x(!1),N(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>{j&&(i(e=>e.map(e=>e.id===j.id?{id:e.id,name:j.name,role:j.role,availability:j.availability,hourlyRate:j.hourlyRate,skills:j.skills.split(",").map(e=>e.trim()),email:j.email||e.email,phone:j.phone||e.phone,department:j.department||e.department,experience:j.experience||e.experience,certifications:j.certifications?j.certifications.split(",").map(e=>e.trim()):e.certifications,notes:j.notes||e.notes,status:j.status}:e)),x(!1),N(null))},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Guardar Cambios"})]})]})})}),y&&_&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles del Recurso"}),(0,At.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-300 flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-lg font-medium text-gray-700",children:_.name.split(" ").map(e=>e[0]).join("")})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:_.name}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:_.role})]})]}),(0,At.jsxs)("div",{className:"border-t pt-4",children:[(0,At.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Informaci\xf3n General"}),(0,At.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Estado:"}),(0,At.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("active"===_.status?"bg-green-100 text-green-800":"inactive"===_.status?"bg-gray-100 text-gray-800":"on-leave"===_.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"active"===_.status?"Activo":"inactive"===_.status?"Inactivo":"on-leave"===_.status?"Licencia":"Terminado"})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Disponibilidad:"}),(0,At.jsxs)("span",{className:"font-medium",children:[_.availability,"%"]})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Costo por hora:"}),(0,At.jsxs)("span",{className:"font-medium",children:["$",_.hourlyRate]})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Carga actual:"}),(0,At.jsxs)("span",{className:"font-medium ".concat(h(_.id)>90?"text-red-600":h(_.id)>75?"text-yellow-600":h(_.id)>50?"text-blue-600":"text-green-600"),children:[h(_.id),"%"]})]})]})]}),(0,At.jsxs)("div",{className:"border-t pt-4",children:[(0,At.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Habilidades"}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.isArray(_.skills)?_.skills.map((e,t)=>(0,At.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e},t)):(0,At.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:_.skills})})]}),(0,At.jsxs)("div",{className:"border-t pt-4",children:[(0,At.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Proyectos Asignados"}),(0,At.jsx)("div",{className:"space-y-1",children:l().filter(e=>e.resourceId===_.id).length>0?l().filter(e=>e.resourceId===_.id).map((e,t)=>{const n=r.find(t=>t.id===e.projectId);return n?(0,At.jsxs)("div",{className:"text-sm text-gray-600",children:["\u2022 ",n.name]},t):null}):(0,At.jsx)("div",{className:"text-sm text-gray-500 italic",children:"No hay proyectos asignados"})})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{onClick:()=>L(_),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"\u270f\ufe0f Editar"}),(0,At.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cerrar"})]})]})})})]})},_0=e=>{let{projects:r,currentProjectId:n,workPackages:a,risks:s,tasks:i,purchaseOrders:o,advances:l,invoices:c,contracts:d,resourceAssignments:u,useSupabase:h=!0}=e;const[f,p]=(0,t.useState)("overview"),[m,g]=(0,t.useState)("all"),[v,b]=(0,t.useState)("all"),[x,y]=(0,t.useState)(""),w=r.find(e=>e.id===n),{auditLog:j,exportAuditLog:N,clearAuditLog:_}=AQ(n,h),S=(0,t.useMemo)(()=>{if(!w)return[];const e=[],t=new Date(w.updatedAt||w.createdAt);return e.push(...j),"active"!==w.status||j.find(e=>"project-activated"===e.action)||e.push({id:"event-".concat(Date.now(),"-1"),timestamp:t,category:"project-status",action:"project-activated",description:'Proyecto "'.concat(w.name,'" activado'),details:{previousStatus:"inactive",newStatus:"active",manager:w.manager,budget:w.budget,startDate:w.startDate,endDate:w.endDate},severity:"high",user:w.manager}),a.forEach((r,n)=>{"active"!==r.status&&"in-progress"!==r.status&&"completed"!==r.status||e.push({id:"event-".concat(Date.now(),"-wp-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"work-package",action:"work-package-created",description:'Work Package "'.concat(r.name,'" creado'),details:{workPackageId:r.id,name:r.name,budget:r.budget,status:r.status,progress:r.progress||0},severity:"medium",user:w.manager})}),s.forEach((r,n)=>{"active"!==r.status&&"mitigated"!==r.status||e.push({id:"event-".concat(Date.now(),"-risk-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"risk",action:"risk-identified",description:'Riesgo "'.concat(r.name,'" identificado'),details:{riskId:r.id,name:r.name,probability:r.probability,impact:r.impact,priority:r.priority,status:r.status},severity:"high"===r.priority?"high":"medium",user:w.manager})}),i.forEach((r,n)=>{"active"!==r.status&&"in-progress"!==r.status&&"completed"!==r.status||e.push({id:"event-".concat(Date.now(),"-task-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"schedule",action:"task-created",description:'Tarea "'.concat(r.name,'" creada'),details:{taskId:r.id,name:r.name,duration:r.duration,status:r.status,startDate:r.startDate,endDate:r.endDate},severity:"medium",user:w.manager})}),o.forEach((r,n)=>{e.push({id:"event-".concat(Date.now(),"-po-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"financial",action:"purchase-order-created",description:'Orden de Compra "'.concat(r.description,'" creada'),details:{poId:r.id,description:r.description,amount:r.amount,status:r.status,supplier:r.supplier},severity:"high",user:w.manager})}),l.forEach((r,n)=>{e.push({id:"event-".concat(Date.now(),"-advance-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"financial",action:"advance-created",description:'Anticipo "'.concat(r.description,'" creado'),details:{advanceId:r.id,description:r.description,amount:r.amount,status:r.status,recipient:r.recipient},severity:"high",user:w.manager})}),c.forEach((r,n)=>{e.push({id:"event-".concat(Date.now(),"-invoice-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"financial",action:"invoice-created",description:'Factura "'.concat(r.description,'" creada'),details:{invoiceId:r.id,description:r.description,amount:r.amount,status:r.status,supplier:r.supplier},severity:"high",user:w.manager})}),d.forEach((r,n)=>{e.push({id:"event-".concat(Date.now(),"-contract-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"contracts",action:"contract-created",description:'Contrato "'.concat(r.name,'" creado'),details:{contractId:r.id,name:r.name,value:r.value,status:r.status,contractor:r.contractor},severity:"high",user:w.manager})}),u.forEach((r,n)=>{e.push({id:"event-".concat(Date.now(),"-resource-").concat(n),timestamp:new Date(r.updatedAt||r.createdAt||t),category:"resources",action:"resource-assigned",description:"Recurso asignado al proyecto",details:{assignmentId:r.id,resourceId:r.resourceId,role:r.role,startDate:r.startDate,endDate:r.endDate,allocation:r.allocation},severity:"medium",user:w.manager})}),e.sort((e,t)=>t.timestamp-e.timestamp)},[w,a,s,i,o,l,c,d,u,j]),k=(0,t.useMemo)(()=>{let e=S;if("all"!==v&&(e=e.filter(e=>e.category===v)),"all"!==m){new Date;const t=new Date;switch(m){case"today":t.setHours(0,0,0,0),e=e.filter(e=>e.timestamp>=t);break;case"week":t.setDate(t.getDate()-7),e=e.filter(e=>e.timestamp>=t);break;case"month":t.setMonth(t.getMonth()-1),e=e.filter(e=>e.timestamp>=t);break;case"quarter":t.setMonth(t.getMonth()-3),e=e.filter(e=>e.timestamp>=t)}}return x&&(e=e.filter(e=>{var t,r;return e.description.toLowerCase().includes(x.toLowerCase())||(null===(t=e.details)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(x.toLowerCase()))||e.category.toLowerCase().includes(x.toLowerCase())})),e},[S,v,m,x]),A=e=>{switch(e){case"project-status":return"\ud83c\udfe2";case"work-package":return"\ud83d\udce6";case"risk":return"\u26a0\ufe0f";case"schedule":return"\ud83d\udcc5";case"financial":return"\ud83d\udcb0";case"contracts":return"\ud83d\udccb";case"resources":return"\ud83d\udc65";case"minutes":return"\ud83d\udcdd";default:return"\ud83d\udcc4"}},E=e=>{switch(e){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},C=e=>{switch(e){case"project-activated":return"Proyecto Activado";case"work-package-created":return"Work Package Creado";case"risk-identified":return"Riesgo Identificado";case"task-created":return"Tarea Creada";case"purchase-order-created":return"Orden de Compra Creada";case"advance-created":return"Anticipo Creado";case"invoice-created":return"Factura Creada";case"contract-created":return"Contrato Creado";case"resource-assigned":return"Recurso Asignado";case"minute-task-created":return"Tarea de Minuta Creada";case"minute-task-updated":return"Tarea de Minuta Actualizada";case"created":return"Creado";case"modified":return"Modificado";default:return e}};return w?(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-indigo-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udccb"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800",children:"Auditor\xeda Documental"}),(0,At.jsxs)("p",{className:"text-gray-600 text-lg",children:['Registro completo de movimientos del proyecto "',w.name,'"']})]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-4xl font-bold text-gray-800",children:k.length}),(0,At.jsx)("div",{className:"text-gray-600",children:"Eventos Registrados"})]})]})})]}),(0,At.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"text-purple-600 text-xl mr-3",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{className:"text-purple-800",children:[(0,At.jsx)("strong",{children:"Sistema de Auditor\xeda Autom\xe1tica:"}),' Este sistema registra autom\xe1ticamente todos los movimientos del proyecto desde que cambia a estado "Activo". Los eventos se guardan localmente y se pueden exportar para an\xe1lisis externos o cumplimiento regulatorio.']})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categor\xeda"}),(0,At.jsxs)("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:v,onChange:e=>b(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"Todas las categor\xedas"}),(0,At.jsx)("option",{value:"project-status",children:"Estado del Proyecto"}),(0,At.jsx)("option",{value:"work-package",children:"Work Packages"}),(0,At.jsx)("option",{value:"risk",children:"Riesgos"}),(0,At.jsx)("option",{value:"schedule",children:"Cronograma"}),(0,At.jsx)("option",{value:"financial",children:"Financiero"}),(0,At.jsx)("option",{value:"contracts",children:"Contratos"}),(0,At.jsx)("option",{value:"resources",children:"Recursos"}),(0,At.jsx)("option",{value:"minutes",children:"Minutas"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Per\xedodo"}),(0,At.jsxs)("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:m,onChange:e=>g(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"Todo el per\xedodo"}),(0,At.jsx)("option",{value:"today",children:"Hoy"}),(0,At.jsx)("option",{value:"week",children:"\xdaltima semana"}),(0,At.jsx)("option",{value:"month",children:"\xdaltimo mes"}),(0,At.jsx)("option",{value:"quarter",children:"\xdaltimo trimestre"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),(0,At.jsx)("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Buscar eventos...",value:x,onChange:e=>y(e.target.value)})]}),(0,At.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,At.jsx)("button",{onClick:()=>{N()},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"\ud83d\udcc4 Exportar Reporte"}),(0,At.jsx)("button",{onClick:()=>{window.confirm("\xbfEst\xe1 seguro de limpiar todo el log de auditor\xeda? Esta acci\xf3n no se puede deshacer.")&&_()},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",title:"Limpiar log de auditor\xeda",children:"\ud83d\uddd1\ufe0f"})]})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:[(0,At.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Total Eventos"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:k.length})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:[(0,At.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Eventos Financieros"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:k.filter(e=>"financial"===e.category).length})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500",children:[(0,At.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Alta Severidad"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:k.filter(e=>"high"===e.severity).length})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500",children:[(0,At.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"\xdaltimo Evento"}),(0,At.jsx)("div",{className:"text-sm font-bold text-gray-800",children:k.length>0?new Date(k[0].timestamp).toLocaleDateString():"N/A"})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,At.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Registro de Eventos"})}),(0,At.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===k.length?(0,At.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,At.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udced"}),(0,At.jsx)("div",{className:"text-lg mb-2",children:"No hay eventos que coincidan con los filtros"})]}):(0,At.jsx)("div",{className:"divide-y divide-gray-200",children:k.map(e=>(0,At.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,At.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,At.jsx)("div",{className:"text-2xl",children:A(e.category)}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-900",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(E(e.severity)),children:e.severity.toUpperCase()}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,At.jsx)("strong",{children:"Acci\xf3n:"})," ",C(e.action)]}),(0,At.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,At.jsx)("strong",{children:"Usuario:"})," ",e.user]}),e.details&&(0,At.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,At.jsx)("div",{className:"text-sm text-gray-700",children:(0,At.jsx)("strong",{children:"Detalles:"})}),(0,At.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(e.details).map(e=>{let[t,r]=e;return(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsxs)("span",{className:"font-medium",children:[t,":"]}),(0,At.jsx)("span",{children:String(r)})]},t)})})]})]})]})},e.id))})})]})]}):(0,At.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,At.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udccb"}),(0,At.jsx)("div",{className:"text-lg mb-2",children:"Selecciona un proyecto para ver su auditor\xeda"})]})},S0=(e,r)=>({applyChangeToProject:(0,t.useCallback)((e,t)=>{if(!r||!t)return console.warn("No se puede aplicar el cambio: onUpdateProject o project no disponible"),null;const n=(0,s.A)({},t);if(e.impactCost){const t=parseFloat(e.impactCost);n.budget=(n.budget||0)+t,n.budgetHistory=[...n.budgetHistory||[],{date:(new Date).toISOString(),amount:t,reason:"Cambio ".concat(e.changeNumber,": ").concat(e.title),type:"change_request",changeId:e.id}]}if(e.impactSchedule&&n.endDate){const t=parseFloat(e.impactSchedule),r=new Date(n.endDate),a=new Date(r.getTime()+24*t*60*60*1e3);n.scheduleHistory=[...n.scheduleHistory||[],{date:(new Date).toISOString(),days:t,reason:"Cambio ".concat(e.changeNumber,": ").concat(e.title),oldEndDate:n.endDate,newEndDate:a.toISOString().split("T")[0],changeId:e.id}],n.endDate=a.toISOString().split("T")[0]}return"scope"===e.category&&e.impactScope&&(n.scopeChanges=[...n.scopeChanges||[],{date:(new Date).toISOString(),changeId:e.id,changeNumber:e.changeNumber,description:e.impactScope,status:"implemented"}]),n.appliedChanges=[...n.appliedChanges||[],{changeId:e.id,changeNumber:e.changeNumber,title:e.title,appliedDate:(new Date).toISOString(),impactSummary:{cost:e.impactCost,schedule:e.impactSchedule,scope:e.impactScope,category:e.category}}],r(n),n},[r])}),k0={OWNER:"owner",ADMIN:"admin",MEMBER_WRITE:"organization_member_write",MEMBER_READ:"organization_member_read"},A0={EXECUTIVE:"executive",SPONSOR:"sponsor",PROJECT_MANAGER:"project_manager",FINANCE_MANAGER:"finance_manager",QUALITY_MANAGER:"quality_manager",TECHNICAL_LEAD:"technical_lead",PMO_ASSISTANT:"pmo_assistant",PROJECT_COORDINATOR:"project_coordinator",TEAM_MEMBER:"team_member",AUDITOR:"auditor"},E0={[A0.EXECUTIVE]:{label:"Ejecutivo",description:"Toma decisiones estrat\xe9gicas y aprueba cambios cr\xedticos",icon:"\ud83d\udc54",color:"purple",badge:"bg-purple-100 text-purple-800"},[A0.SPONSOR]:{label:"Patrocinador",description:"Aprueba cambios mayores del proyecto",icon:"\ud83c\udfaf",color:"blue",badge:"bg-blue-100 text-blue-800"},[A0.PROJECT_MANAGER]:{label:"Project Manager",description:"Gestiona proyectos y aprueba cambios menores",icon:"\ud83d\udcca",color:"indigo",badge:"bg-indigo-100 text-indigo-800"},[A0.FINANCE_MANAGER]:{label:"Gerente Financiero",description:"Aprueba impacto financiero de cambios",icon:"\ud83d\udcb0",color:"green",badge:"bg-green-100 text-green-800"},[A0.QUALITY_MANAGER]:{label:"Gerente de Calidad",description:"Valida impacto en calidad",icon:"\u2b50",color:"yellow",badge:"bg-yellow-100 text-yellow-800"},[A0.TECHNICAL_LEAD]:{label:"L\xedder T\xe9cnico",description:"Realiza an\xe1lisis t\xe9cnico de cambios",icon:"\ud83d\udd27",color:"cyan",badge:"bg-cyan-100 text-cyan-800"},[A0.PMO_ASSISTANT]:{label:"Asistente PMO",description:"Soporte operativo y seguimiento",icon:"\ud83d\udccb",color:"teal",badge:"bg-teal-100 text-teal-800"},[A0.PROJECT_COORDINATOR]:{label:"Coordinador de Proyectos",description:"Coordina tareas y actividades",icon:"\ud83d\udcc5",color:"orange",badge:"bg-orange-100 text-orange-800"},[A0.TEAM_MEMBER]:{label:"Miembro de Equipo",description:"Participa en el proyecto y solicita cambios",icon:"\ud83d\udc64",color:"gray",badge:"bg-gray-100 text-gray-800"},[A0.AUDITOR]:{label:"Auditor",description:"Solo lectura para auditor\xeda",icon:"\ud83d\udd0d",color:"slate",badge:"bg-slate-100 text-slate-800"}},C0={[k0.OWNER]:{canCreate:!0,canApprove:!0,canReject:!0,canImplement:!0,canVoteInCCB:!0,canAssign:!0,canComment:!0,canViewAll:!0,approvalLimit:{cost:1/0,schedule:1/0},changeRole:"executive_board",level:"unlimited"},[k0.ADMIN]:{canCreate:!0,canApprove:!0,canReject:!0,canImplement:!0,canVoteInCCB:!0,canAssign:!0,canComment:!0,canViewAll:!0,approvalLimit:{cost:1/0,schedule:1/0},changeRole:"executive_board",level:"unlimited"},[k0.MEMBER_WRITE]:{default:{canCreate:!0,canApprove:!1,canReject:!1,canImplement:!0,canVoteInCCB:!1,canAssign:!1,canComment:!0,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:"team_member",level:"basic"},[A0.EXECUTIVE]:{canCreate:!0,canApprove:!0,canReject:!0,canImplement:!1,canVoteInCCB:!0,canAssign:!0,canComment:!0,canViewAll:!0,approvalLimit:{cost:1/0,schedule:1/0},changeRole:"executive_board",level:"executive"},[A0.SPONSOR]:{canCreate:!0,canApprove:!0,canReject:!0,canImplement:!1,canVoteInCCB:!0,canAssign:!0,canComment:!0,canViewAll:!0,approvalLimit:{cost:1e5,schedule:30},changeRole:"sponsor",level:"high"},[A0.PROJECT_MANAGER]:{canCreate:!0,canApprove:!0,canReject:!0,canImplement:!0,canVoteInCCB:!0,canAssign:!0,canComment:!0,canViewAll:!0,approvalLimit:{cost:25e3,schedule:15},changeRole:"project_manager",level:"medium"},[A0.FINANCE_MANAGER]:{canCreate:!0,canApprove:!0,canReject:!0,canImplement:!1,canVoteInCCB:!0,canAssign:!1,canComment:!0,canViewAll:!0,approvalLimit:{cost:1e5,schedule:0},changeRole:"finance_manager",level:"specialized"},[A0.QUALITY_MANAGER]:{canCreate:!0,canApprove:!0,canReject:!0,canImplement:!1,canVoteInCCB:!0,canAssign:!1,canComment:!0,canViewAll:!0,approvalLimit:{cost:0,schedule:0},changeRole:"quality_manager",level:"specialized"},[A0.TECHNICAL_LEAD]:{canCreate:!0,canApprove:!1,canReject:!1,canImplement:!0,canVoteInCCB:!0,canAssign:!1,canComment:!0,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:"technical_lead",level:"technical"},[A0.PMO_ASSISTANT]:{canCreate:!0,canApprove:!1,canReject:!1,canImplement:!0,canVoteInCCB:!1,canAssign:!1,canComment:!0,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:"pmo_assistant",level:"operational"},[A0.PROJECT_COORDINATOR]:{canCreate:!0,canApprove:!1,canReject:!1,canImplement:!0,canVoteInCCB:!1,canAssign:!1,canComment:!0,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:"project_coordinator",level:"operational"},[A0.TEAM_MEMBER]:{canCreate:!0,canApprove:!1,canReject:!1,canImplement:!1,canVoteInCCB:!1,canAssign:!1,canComment:!0,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:"team_member",level:"basic"}},[k0.MEMBER_READ]:{default:{canCreate:!0,canApprove:!1,canReject:!1,canImplement:!1,canVoteInCCB:!1,canAssign:!1,canComment:!0,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:"observer",level:"readonly"},[A0.AUDITOR]:{canCreate:!1,canApprove:!1,canReject:!1,canImplement:!1,canVoteInCCB:!1,canAssign:!1,canComment:!0,canViewAll:!0,approvalLimit:{cost:0,schedule:0},changeRole:"auditor",level:"audit"}}},T0=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return{canCreate:!1,canApprove:!1,canReject:!1,canImplement:!1,canVoteInCCB:!1,canAssign:!1,canComment:!1,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:"none",level:"none"};const r=C0[e];return r?e===k0.OWNER||e===k0.ADMIN?r:t&&r[t]?r[t]:r.default||r:C0[k0.MEMBER_READ].default},P0=e=>{var t;return e?(null===(t=E0[e])||void 0===t?void 0:t.label)||e:"Sin rol espec\xedfico"},D0=()=>{const[e,r]=(0,t.useState)({canCreate:!1,canApprove:!1,canReject:!1,canImplement:!1,canVoteInCCB:!1,canAssign:!1,canComment:!1,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:null,level:"none",userId:null,userName:null,userEmail:null,orgRole:null,functionalRole:null}),[n,a]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),l=(0,t.useRef)(!1),c=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=async()=>{if(!l.current)try{var t;l.current=!0,a(!0),o(null);const i=kt.default.getCurrentUser();if(!i||!i.email)return void r({canCreate:!1,canApprove:!1,canReject:!1,canImplement:!1,canVoteInCCB:!1,canAssign:!1,canComment:!1,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:null,level:"none",userId:null,userName:null,userEmail:null,orgRole:null,functionalRole:null});const c=kt.default.getCurrentOrganization();if(!c)return void setTimeout(()=>{l.current||e()},1e3);const{data:d,error:u}=await kt.default.supabase.from("organization_members").select("role, functional_role, user_id, status").eq("user_email",i.email).eq("organization_id",c).eq("status","active").maybeSingle();if(u)return console.error("Error obteniendo membership:",u),void o("Error cargando permisos");var n;if(!d)return console.warn("No se encontr\xf3 membership activo para el usuario"),void r({canCreate:!1,canApprove:!1,canReject:!1,canImplement:!1,canVoteInCCB:!1,canAssign:!1,canComment:!1,canViewAll:!1,approvalLimit:{cost:0,schedule:0},changeRole:null,level:"none",userId:i.id,userName:(null===(n=i.user_metadata)||void 0===n?void 0:n.name)||i.email,userEmail:i.email,orgRole:null,functionalRole:null});const h=d.role,f=d.functional_role,p=T0(h,f);r((0,s.A)((0,s.A)({},p),{},{userId:d.user_id||i.id,userName:(null===(t=i.user_metadata)||void 0===t?void 0:t.name)||i.email,userEmail:i.email,orgRole:h,functionalRole:f}))}catch(i){console.error("Error inesperado en useChangePermissions:",i),o("Error inesperado cargando permisos")}finally{a(!1),l.current=!1}};e();const t=setInterval(()=>{const t=kt.default.getCurrentUser(),r=null===t||void 0===t?void 0:t.email;r!==c.current&&(c.current=r,e())},2e3);return()=>{clearInterval(t),l.current=!1}},[]);return{permissions:e,loading:n,error:i,canApproveSpecificChange:(t,r)=>{if(!e.canApprove)return!1;const n=parseFloat(t)||0,a=parseFloat(r)||0,s=n<=e.approvalLimit.cost,i=a<=e.approvalLimit.schedule;return s&&i}}},O0=e=>{const t=e.filter(e=>["approved","rejected","implemented"].includes(e.status));if(0===t.length)return 0;return(t.reduce((e,t)=>{const r=new Date(t.createdAt),n=new Date(t.updatedAt);return e+Math.ceil((n-r)/864e5)},0)/t.length).toFixed(1)},I0=e=>{const t=e.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+1,e),{});return Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,3)},M0=e=>{const t=e.filter(e=>{var t,r;if("implemented"!==e.status||!e.expectedImplementationDate)return!1;const n=new Date(e.expectedImplementationDate),a=null===(t=e.statusHistory)||void 0===t||null===(r=t.find(e=>"implemented"===e.status))||void 0===r?void 0:r.date;return!!a&&new Date(a)<=n}).length,r=e.filter(e=>"implemented"===e.status).length;return r>0?(t/r*100).toFixed(0):0},R0=e=>{const{permissions:r,loading:n}=D0(),[a,i]=(0,t.useState)(!1),o=(0,t.useCallback)(()=>{return r.userId?(e=r)&&e.userId?{userId:e.userId,userName:e.userName||e.userEmail,userEmail:e.userEmail,userRole:e.orgRole,changeRole:e.changeRole,functionalRole:e.functionalRole,timestamp:(new Date).toISOString()}:null:null;var e},[r]),l=(0,t.useCallback)(()=>r.canCreate&&!n,[r.canCreate,n]),c=(0,t.useCallback)(e=>{if(!r.canApprove)return!1;const t=parseFloat(e.impactCost)||0,n=parseFloat(e.impactSchedule)||0,a=t<=r.approvalLimit.cost,s=n<=r.approvalLimit.schedule;return a&&s},[r]),d=(0,t.useCallback)(()=>r.canReject&&!n,[r.canReject,n]),u=(0,t.useCallback)(()=>r.canImplement&&!n,[r.canImplement,n]),h=(0,t.useCallback)(()=>r.canVoteInCCB&&!n,[r.canVoteInCCB,n]),f=(0,t.useCallback)(()=>r.canAssign&&!n,[r.canAssign,n]),p=(0,t.useCallback)(e=>{const t=o();return t?(0,s.A)((0,s.A)({},e),{},{createdBy:t,createdByUser:t.userName,createdByEmail:t.userEmail}):e},[o]),m=(0,t.useCallback)(async(e,t,r)=>{if(e&&t){i(!0);try{const n=o();if(!n)return;await mQ({userEmail:t,userId:r,change:e,assignedBy:n.userName})}catch(n){console.error("Error notificando asignaci\xf3n:",n)}finally{i(!1)}}},[o]),g=(0,t.useCallback)(async(e,t,r)=>{if(e&&t){i(!0);try{await gQ({userEmail:t,userId:r,change:e})}catch(n){console.error("Error notificando aprobaci\xf3n:",n)}finally{i(!1)}}},[]),v=(0,t.useCallback)(async(e,t)=>{if(e&&t&&0!==t.length){i(!0);try{for(const r of t)r.userEmail&&await vQ({userEmail:r.userEmail,userId:r.userId,change:e})}catch(r){console.error("Error notificando CCB:",r)}finally{i(!1)}}},[]),b=(0,t.useCallback)(async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e){i(!0);try{const s=o();if(!s)return;var a;if(e.createdByEmail&&e.createdByEmail!==s.userEmail)await bQ({userEmail:e.createdByEmail,userId:null===(a=e.createdBy)||void 0===a?void 0:a.userId,change:e,oldStatus:t,newStatus:r,changedBy:s.userName});for(const a of n)a.email&&a.email!==s.userEmail&&await bQ({userEmail:a.email,userId:a.id,change:e,oldStatus:t,newStatus:r,changedBy:s.userName})}catch(s){console.error("Error notificando cambio de estado:",s)}finally{i(!1)}}},[o]);return{permissions:r,permissionsLoading:n,canCreate:l,canApprove:c,canReject:d,canImplement:u,canVoteInCCB:h,canAssign:f,getCurrentUserInfo:o,enrichChangeWithUser:p,notifyAssignment:m,notifyApproval:g,notifyCCBMembers:v,notifyStatusChange:b,processing:a}},L0={low:{threshold:5e3,approver:"project_manager",label:"Project Manager"},medium:{threshold:25e3,approver:"sponsor",label:"Sponsor"},high:{threshold:1e5,approver:"ccb",label:"CCB"},critical:{threshold:1/0,approver:"executive_board",label:"Executive Board"}},F0={low:{threshold:5,approver:"project_manager",label:"Project Manager"},medium:{threshold:15,approver:"sponsor",label:"Sponsor"},high:{threshold:30,approver:"ccb",label:"CCB"},critical:{threshold:1/0,approver:"executive_board",label:"Executive Board"}},B0=[{id:"pm",name:"Project Manager",role:"pm",required:!0},{id:"tech",name:"Technical Lead",role:"tech",required:!0},{id:"finance",name:"Finance Manager",role:"finance",required:!1},{id:"quality",name:"Quality Manager",role:"quality",required:!1},{id:"sponsor",name:"Sponsor",role:"sponsor",required:!0}],z0=e=>{let{change:r,currentUserPermissions:n,onUpdateVotes:a}=e;const i=null===n||void 0===n?void 0:n.functionalRole;console.log("\ud83d\udc64 Rol funcional del usuario en CCB:",i);const[o,l]=(0,t.useState)(r.ccbVotes||B0.map(e=>(0,s.A)((0,s.A)({},e),{},{vote:null,comments:"",votedAt:null})));(0,t.useEffect)(()=>{r.ccbVotes&&l(r.ccbVotes)},[r.ccbVotes]);const c=(e,t)=>{const r=o.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{vote:t,votedAt:(new Date).toISOString()}):r);l(r),a(r)},d={pm:{name:"Project Manager",icon:"\ud83d\udcca",required:!0},tech:{name:"Technical Lead",icon:"\ud83d\udd27",required:!0},finance:{name:"Finance Manager",icon:"\ud83d\udcb0",required:!1},quality:{name:"Quality Manager",icon:"\u2b50",required:!1},sponsor:{name:"Sponsor",icon:"\ud83c\udfaf",required:!0}},u=(()=>{if(!o||0===o.length)return{totalMembers:Object.keys(d).length,votedCount:0,approveCount:0,rejectCount:0,abstainCount:0,quorumPercentage:0,approvePercentage:0,rejectPercentage:0,abstainPercentage:0,hasQuorum:!1,hasMajority:!1,result:"pending"};const e=o.length,t=o.filter(e=>e.vote).length,r=o.filter(e=>"approve"===e.vote).length,n=o.filter(e=>"reject"===e.vote).length,a=o.filter(e=>"abstain"===e.vote).length,s=t/e*100,i=r/e*100,l=s>=60,c=l&&i>50;let u="pending";return t===e&&(u=l&&c?"approved":"rejected"),{totalMembers:e,votedCount:t,approveCount:r,rejectCount:n,abstainCount:a,quorumPercentage:s,approvePercentage:i,rejectPercentage:n/e*100,abstainPercentage:a/e*100,hasQuorum:l,hasMajority:c,result:u}})(),h=o.filter(e=>"approve"===e.vote).length,f=o.filter(e=>"reject"===e.vote).length,p=o.filter(e=>e.required).length;return(0,At.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-2",children:"\ud83c\udfdb\ufe0f"}),"Comit\xe9 de Control de Cambios (CCB)"]}),i&&(0,At.jsxs)("div",{className:"bg-blue-100 border border-blue-300 rounded-lg px-4 py-2",children:[(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Tu rol en CCB:"}),(0,At.jsx)("div",{className:"font-semibold text-blue-800",children:P0(i)})]})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Votaci\xf3n para aprobar o rechazar el cambio"}),(0,At.jsxs)("div",{className:"mb-6 bg-white rounded-xl p-6 border-2 border-indigo-300 shadow-lg",children:[(0,At.jsx)("h4",{className:"font-bold text-gray-800 mb-4 text-lg",children:"\ud83d\udcca Resultados en Tiempo Real"}),(0,At.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,At.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,At.jsx)("div",{className:"text-3xl font-bold text-green-700",children:u.approveCount}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"\u2705 Aprobar"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[u.approvePercentage.toFixed(1),"% del total"]})]}),(0,At.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,At.jsx)("div",{className:"text-3xl font-bold text-red-700",children:u.rejectCount}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"\u274c Rechazar"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[u.rejectPercentage.toFixed(1),"% del total"]})]}),(0,At.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,At.jsx)("div",{className:"text-3xl font-bold text-gray-700",children:u.abstainCount}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"\u26aa Abstenci\xf3n"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[u.abstainPercentage.toFixed(1),"% del total"]})]})]}),(0,At.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,At.jsx)("span",{className:"text-gray-700 font-medium",children:"\ud83d\udcca Participaci\xf3n (M\xednimo: 60% para quorum)"}),(0,At.jsxs)("span",{className:"font-bold ".concat(u.hasQuorum?"text-green-600":"text-red-600"),children:[u.votedCount,"/",u.totalMembers," miembros (",u.quorumPercentage.toFixed(1),"%)",u.hasQuorum?" \u2713":" \u2717"]})]}),(0,At.jsxs)("div",{className:"w-full bg-gray-200 rounded-full h-4 relative",children:[(0,At.jsx)("div",{className:"h-4 rounded-full transition-all ".concat(u.hasQuorum?"bg-green-500":"bg-red-500"),style:{width:"".concat(u.quorumPercentage,"%")}}),(0,At.jsx)("div",{className:"absolute top-0 left-[60%] w-0.5 h-4 bg-gray-600"}),(0,At.jsx)("div",{className:"absolute top-4 left-[60%] transform -translate-x-1/2 text-xs text-gray-600",children:"60%"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,At.jsx)("span",{className:"text-gray-700 font-medium",children:"\u2705 Aprobaci\xf3n (M\xednimo: >50% del total para aprobar)"}),(0,At.jsxs)("span",{className:"font-bold ".concat(u.hasMajority?"text-green-600":"text-gray-600"),children:[u.approveCount,"/",u.totalMembers," aprueban (",u.approvePercentage.toFixed(1),"%)",u.hasMajority?" \u2713":""]})]}),(0,At.jsxs)("div",{className:"w-full bg-gray-200 rounded-full h-4 relative",children:[(0,At.jsx)("div",{className:"h-4 rounded-full transition-all ".concat(u.hasMajority?"bg-green-500":u.hasQuorum?"bg-yellow-500":"bg-gray-400"),style:{width:"".concat(u.approvePercentage,"%")}}),(0,At.jsx)("div",{className:"absolute top-0 left-[50%] w-0.5 h-4 bg-gray-600"}),(0,At.jsx)("div",{className:"absolute top-4 left-[50%] transform -translate-x-1/2 text-xs text-gray-600",children:"50%"})]})]})]}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-blue-600 text-lg",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h5",{className:"font-semibold text-blue-800 text-sm mb-1",children:"Estado Actual"}),(0,At.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[!u.hasQuorum&&(0,At.jsxs)("p",{className:"font-medium",children:["\u26a0\ufe0f A\xfan no hay quorum. Se requiere que al menos ",Math.ceil(.6*u.totalMembers)," de ",u.totalMembers," miembros voten. Faltan ",Math.ceil(.6*u.totalMembers)-u.votedCount," votos."]}),u.hasQuorum&&!u.hasMajority&&(0,At.jsxs)("p",{className:"font-medium",children:["\u2713 Hay quorum, pero NO hay mayor\xeda. Se requiere que m\xe1s de ",Math.floor(u.totalMembers/2)," miembros aprueben.",u.votedCount<u.totalMembers&&" Faltan ".concat(u.totalMembers-u.votedCount," votos por emitir.")]}),u.hasMajority&&(0,At.jsxs)("p",{className:"font-medium text-green-700",children:["\u2713 Hay quorum Y mayor\xeda. El cambio ser\xe1 aprobado.",u.votedCount<u.totalMembers&&" (Faltan ".concat(u.totalMembers-u.votedCount," votos, pero ya se alcanz\xf3 mayor\xeda)")]})]})]})]})}),"pending"!==u.result&&(0,At.jsxs)("div",{className:"p-4 rounded-lg text-center font-bold text-lg ".concat("approved"===u.result?"bg-green-100 text-green-800 border-2 border-green-300":"bg-red-100 text-red-800 border-2 border-red-300"),children:["approved"===u.result?"\u2705 CAMBIO APROBADO POR CCB":"\u274c CAMBIO RECHAZADO POR CCB",(0,At.jsxs)("div",{className:"text-sm font-normal mt-2",children:["Votaci\xf3n completa: ",u.approveCount," a favor, ",u.rejectCount," en contra, ",u.abstainCount," abstenciones"]})]}),u.votedCount>0&&!u.hasQuorum&&(0,At.jsx)("div",{className:"mt-4 bg-yellow-50 border border-yellow-300 rounded-lg p-3 text-center",children:(0,At.jsx)("p",{className:"text-yellow-800 font-medium text-sm",children:"\u26a0\ufe0f Sin quorum, la votaci\xf3n NO es v\xe1lida. Todos los miembros CCB deben participar."})})]}),(0,At.jsx)("div",{className:"mb-6 bg-gray-50 border border-gray-300 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-gray-600 text-lg",children:"\ud83d\udcd0"}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-800 text-sm mb-2",children:"Reglas de Votaci\xf3n CCB"}),(0,At.jsxs)("ul",{className:"text-xs text-gray-700 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Quorum:"})," M\xednimo 60% de miembros deben votar (\u2265",Math.ceil(.6*u.totalMembers)," de ",u.totalMembers,")"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Mayor\xeda:"})," M\xe1s del 50% del TOTAL de miembros deben aprobar (>",Math.floor(u.totalMembers/2)," de ",u.totalMembers,")"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Resultado:"})," Solo es v\xe1lido si hay quorum Y mayor\xeda"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Importante:"})," Los porcentajes se calculan sobre el total de miembros, no sobre los que ya votaron"]})]})]})]})}),(0,At.jsx)("div",{className:"space-y-3 mb-6",children:o.map(e=>{const t=(r=e.id,!!i&&{executive:"executive",sponsor:"sponsor",project_manager:"pm",finance_manager:"finance",quality_manager:"quality",technical_lead:"tech"}[i]===r);var r;return(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold text-gray-800",children:e.name}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:[e.role," ",e.required&&(0,At.jsx)("span",{className:"text-red-500",children:"*"})]})]}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:()=>c(e.id,"approve"),disabled:!t,className:"px-4 py-2 rounded-lg transition-colors ".concat(t?"approve"===e.vote?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-green-50":"bg-gray-200 text-gray-400 cursor-not-allowed"),title:t?"Aprobar":"No tienes este rol para votar",children:"\u2705 Aprobar"}),(0,At.jsx)("button",{onClick:()=>c(e.id,"reject"),disabled:!t,className:"px-4 py-2 rounded-lg transition-colors ".concat(t?"reject"===e.vote?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-red-50":"bg-gray-200 text-gray-400 cursor-not-allowed"),title:t?"Rechazar":"No tienes este rol para votar",children:"\u274c Rechazar"})]})]}),e.vote&&(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("input",{type:"text",placeholder:"Comentarios opcionales...",value:e.comments||"",onChange:t=>((e,t)=>{const r=o.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{comments:t}):r);l(r)})(e.id,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Votado: ",new Date(e.votedAt).toLocaleString()]})]})]},e.id)})}),(0,At.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[(0,At.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:h}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"A favor"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-red-600",children:f}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"En contra"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:p}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Requeridos"})]})]}),h>=p&&(0,At.jsx)("div",{className:"mt-3 text-center text-sm font-medium text-green-600",children:"\u2705 Se alcanz\xf3 el qu\xf3rum de aprobaci\xf3n"})]}),(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-yellow-600 text-lg",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-semibold text-yellow-800 text-sm mb-1",children:"Restricci\xf3n de Votaci\xf3n"}),(0,At.jsx)("p",{className:"text-xs text-yellow-700",children:"Solo puedes votar con tu rol funcional asignado. Los dem\xe1s roles est\xe1n deshabilitados para ti. Si necesitas cambiar tu voto, contacta a un administrador."})]})]})})]})},U0=e=>{let{title:t,icon:r,value:n,color:a,details:s}=e;return(0,At.jsxs)("div",{className:"bg-gradient-to-br ".concat(a," rounded-lg p-4 border"),children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:r}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-xs text-gray-600",children:t}),(0,At.jsx)("div",{className:"text-2xl font-bold",children:n})]})]}),s&&(0,At.jsx)("div",{className:"space-y-1 text-xs text-gray-700",children:s.map((e,t)=>(0,At.jsx)("div",{children:e},t))})]})},q0=e=>{let{change:t,project:r}=e;const n=((e,t)=>{const r=parseFloat(e.impactCost)||0,n=parseFloat(e.impactSchedule)||0,a=null!==t&&void 0!==t&&t.budget?r/t.budget*100:0,s=null!==t&&void 0!==t&&t.budget?t.budget-r:0;let i=null,o=0;if(null!==t&&void 0!==t&&t.endDate&&n>0){const e=new Date(t.endDate);i=new Date(e.getTime()+24*n*60*60*1e3),o=n/Math.ceil((e-new Date(t.startDate))/864e5)*100}const l=.4*a+.3*o+(e.impactScope?15:0)+(e.impactQuality?10:0)+(e.impactResources?5:0);let c="approve",d="El impacto es aceptable para los beneficios esperados";return l>50?(c="reject",d="El impacto es demasiado alto. Considere alternativas."):l>30&&(c="review",d="Requiere an\xe1lisis detallado de alternativas y beneficios."),{cost:r,costPercentage:a.toFixed(1),remainingBudget:s.toFixed(0),schedule:n,newEndDate:i?i.toISOString().split("T")[0]:null,delayPercentage:o.toFixed(1),scope:e.impactScope||"Sin impacto especificado",affectedDeliverables:e.affectedDeliverables||0,newRequirements:e.newRequirements||0,complexity:e.complexity||"Media",risks:e.impactRisks||"A evaluar",stakeholders:e.impactStakeholders||"Todos los stakeholders",totalImpactScore:l.toFixed(1),recommendation:c,recommendationReason:d}})(t,r);return(0,At.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-2",children:"\ud83d\udcca"}),"An\xe1lisis de Impacto Detallado"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,At.jsx)(U0,{title:"Impacto en Costo",icon:"\ud83d\udcb0",value:"$".concat(n.cost,"K"),color:"from-emerald-50 to-emerald-100 border-emerald-200",details:["% del presupuesto: ".concat(n.costPercentage,"%"),"Presupuesto restante: $".concat(n.remainingBudget,"K")]}),(0,At.jsx)(U0,{title:"Impacto en Tiempo",icon:"\ud83d\udcc5",value:"".concat(n.schedule," d\xedas"),color:"from-blue-50 to-blue-100 border-blue-200",details:["% de retraso: ".concat(n.delayPercentage,"%"),n.newEndDate?"Nueva fecha: ".concat(n.newEndDate):"Sin cambio de fecha"]}),(0,At.jsx)(U0,{title:"Impacto en Alcance",icon:"\ud83d\udccb",value:t.impactScope?"Alto":"Bajo",color:"from-purple-50 to-purple-100 border-purple-200",details:["Entregables: ".concat(n.affectedDeliverables),"Complejidad: ".concat(n.complexity)]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-700 mb-2",children:"\u2b50 Impacto en Calidad"}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:t.impactQuality||"Sin impacto especificado"})]}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-700 mb-2",children:"\ud83d\udc65 Impacto en Recursos"}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:t.impactResources||"Sin impacto especificado"})]}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-700 mb-2",children:"\ud83d\udee1\ufe0f Impacto en Riesgos"}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:n.risks})]}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-700 mb-2",children:"\ud83d\udc54 Impacto en Stakeholders"}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:n.stakeholders})]})]}),(0,At.jsxs)("div",{className:"rounded-lg p-4 border ".concat((a=n.totalImpactScore,a<20?"from-green-50 to-green-100 border-green-200":a<40?"from-yellow-50 to-yellow-100 border-yellow-200":a<60?"from-orange-50 to-orange-100 border-orange-200":"from-red-50 to-red-100 border-red-200")),children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("div",{className:"font-bold text-gray-800",children:"Puntuaci\xf3n de Impacto Total"}),(0,At.jsx)("div",{className:"text-3xl font-bold",children:n.totalImpactScore})]}),(0,At.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,At.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 via-yellow-500 to-red-500",style:{width:"".concat(Math.min(100,n.totalImpactScore),"%")}})})]}),(0,At.jsx)("div",{className:"mt-4 p-4 rounded-lg border ".concat("approve"===n.recommendation?"bg-green-50 border-green-200":"review"===n.recommendation?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"),children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:"approve"===n.recommendation?"\u2705":"review"===n.recommendation?"\u26a0\ufe0f":"\u274c"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-bold text-gray-800 mb-1",children:"Recomendaci\xf3n del Sistema"}),(0,At.jsx)("div",{className:"text-sm text-gray-700",children:n.recommendationReason})]})]})})]});var a},W0=e=>{let{change:r,onComplete:n,onUpdateAlternatives:a}=e;const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(null===e||void 0===e||""===e)return"0";const r=parseFloat(e);return isNaN(r)?"0":r.toFixed(t)},[o,l]=(0,t.useState)({costDetails:r.impactCost||"",scheduleDetails:r.impactSchedule||"",scopeDetails:r.impactScope||"",qualityDetails:r.impactQuality||"",resourcesDetails:r.impactResources||""}),[c,d]=(0,t.useState)(r.alternatives||[]),[u,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)({name:"",description:"",cost:"",schedule:"",pros:[""],cons:[""]});return(0,At.jsxs)("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-xl p-6 border border-cyan-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,At.jsx)("span",{children:"An\xe1lisis de Impacto Completo"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Completa todas las secciones y agrega m\xednimo 3 alternativas"})]}),(()=>{const e=o.costDetails&&o.scheduleDetails&&o.scopeDetails&&o.qualityDetails&&o.resourcesDetails,t=c.length>=3;return e&&t})()?(0,At.jsx)("button",{onClick:n,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold shadow-lg animate-pulse",children:"\u2705 Completar An\xe1lisis"}):(0,At.jsxs)("div",{className:"text-sm text-gray-500 text-right",children:[(0,At.jsx)("div",{className:"font-semibold",children:"Pendiente:"}),(0,At.jsxs)("div",{children:[c.length,"/3 alternativas"]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcb0 Impacto en Costos (Detalle)"}),(0,At.jsx)("textarea",{value:o.costDetails,onChange:e=>l((0,s.A)((0,s.A)({},o),{},{costDetails:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500",placeholder:"Describe el impacto detallado en costos..."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcc5 Impacto en Cronograma (Detalle)"}),(0,At.jsx)("textarea",{value:o.scheduleDetails,onChange:e=>l((0,s.A)((0,s.A)({},o),{},{scheduleDetails:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500",placeholder:"Describe el impacto detallado en cronograma..."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udccb Impacto en Alcance (Detalle)"}),(0,At.jsx)("textarea",{value:o.scopeDetails,onChange:e=>l((0,s.A)((0,s.A)({},o),{},{scopeDetails:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500",placeholder:"Describe el impacto detallado en alcance..."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u2b50 Impacto en Calidad (Detalle)"}),(0,At.jsx)("textarea",{value:o.qualityDetails,onChange:e=>l((0,s.A)((0,s.A)({},o),{},{qualityDetails:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500",placeholder:"Describe el impacto detallado en calidad..."})]}),(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udc65 Impacto en Recursos (Detalle)"}),(0,At.jsx)("textarea",{value:o.resourcesDetails,onChange:e=>l((0,s.A)((0,s.A)({},o),{},{resourcesDetails:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500",placeholder:"Describe el impacto detallado en recursos humanos y materiales..."})]})]}),(0,At.jsxs)("div",{className:"border-t pt-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("h4",{className:"font-semibold text-gray-800",children:["\ud83d\udd04 Alternativas (",c.length,"/3 m\xednimo)"]}),(0,At.jsx)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"\u2795 Agregar Alternativa"})]}),(0,At.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,At.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2",children:["Opci\xf3n ",t+1,": ",e.name]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udcb0 Costo:"}),(0,At.jsxs)("div",{className:"font-medium",children:["$",i(e.cost),"K"]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udcc5 Tiempo:"}),(0,At.jsxs)("div",{className:"font-medium",children:[i(e.schedule,0)," d\xedas"]})]})]})]},e.id||t))}),u&&(0,At.jsxs)("div",{className:"mt-4 bg-white rounded-lg p-6 border-2 border-blue-300",children:[(0,At.jsx)("h5",{className:"font-semibold text-gray-800 mb-4",children:"Nueva Alternativa"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("input",{type:"text",value:f.name,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{name:e.target.value})),placeholder:"Nombre de la alternativa",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),(0,At.jsx)("textarea",{value:f.description,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{description:e.target.value})),placeholder:"Descripci\xf3n detallada",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,At.jsx)("input",{type:"number",value:f.cost,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{cost:e.target.value})),placeholder:"Costo (K)",className:"px-4 py-2 border border-gray-300 rounded-lg"}),(0,At.jsx)("input",{type:"number",value:f.schedule,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{schedule:e.target.value})),placeholder:"Tiempo (d\xedas)",className:"px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsx)("button",{onClick:()=>{if(!f.name||!f.description)return void alert("\u274c Completa nombre y descripci\xf3n de la alternativa");const e=(0,s.A)((0,s.A)({},f),{},{id:"alt-".concat(Date.now()),addedAt:(new Date).toISOString()}),t=[...c,e];d(t),a(t),p({name:"",description:"",cost:"",schedule:"",pros:[""],cons:[""]}),h(!1)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\u2705 Agregar"}),(0,At.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})]}),(0,At.jsx)("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-yellow-600 text-lg",children:"\ud83d\udca1"}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h5",{className:"font-semibold text-yellow-800 text-sm mb-1",children:"Requerimientos del An\xe1lisis"}),(0,At.jsxs)("ul",{className:"text-xs text-yellow-700 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Completa el an\xe1lisis detallado de las 5 \xe1reas de impacto"}),(0,At.jsx)("li",{children:'\u2022 Agrega m\xednimo 3 alternativas (incluyendo "No hacer nada" si aplica)'}),(0,At.jsx)("li",{children:'\u2022 Una vez completo, el bot\xf3n "Completar An\xe1lisis" se habilitar\xe1'}),(0,At.jsx)("li",{children:'\u2022 El cambio pasar\xe1 a estado "Listo para Revisi\xf3n"'})]})]})]})})]})},H0=e=>{let{change:r,onUpdateAlternatives:n,currentUserPermissions:a,onSelectAlternative:i,canSelect:o}=e;const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(null===e||void 0===e||""===e)return"0";const r=parseFloat(e);return isNaN(r)?"0":r.toFixed(t)},[c,d]=(0,t.useState)(r.alternatives||[{id:1,name:"No hacer nada (Status Quo)",cost:0,schedule:0,pros:["Sin costos adicionales","Sin retrasos"],cons:["Problema sin resolver","Riesgo de escalamiento"]},{id:2,name:"Implementar cambio completo",cost:parseFloat(r.impactCost)||0,schedule:parseFloat(r.impactSchedule)||0,pros:["Soluci\xf3n completa","Satisface todos los requisitos"],cons:["Costo elevado","Mayor tiempo de implementaci\xf3n"]},{id:3,name:"Soluci\xf3n parcial / Iterativa",cost:.6*(parseFloat(r.impactCost)||0),schedule:.5*(parseFloat(r.impactSchedule)||0),pros:["Menor impacto inicial","M\xe1s flexible"],cons:["Soluci\xf3n incompleta","Puede requerir cambios futuros"]}]),[u,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)({name:"",cost:0,schedule:0,pros:"",cons:""}),m=()=>{if(!a)return!1;const e=a.functionalRole,t=r.requiredApprover;if("ccb"===t||"executive_board"===t){return["executive","sponsor","project_manager","finance_manager","quality_manager","technical_lead"].includes(e)}return"sponsor"===t?["executive","sponsor"].includes(e):"project_manager"===t&&["executive","sponsor","project_manager"].includes(e)};return(0,At.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-2",children:"\ud83d\udd04"}),"An\xe1lisis de Alternativas"]}),(0,At.jsx)("div",{className:"space-y-4 mb-4",children:c.map((e,t)=>(0,At.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[(0,At.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"font-semibold text-gray-800 text-lg mb-1",children:["Opci\xf3n ",t+1,": ",e.name]}),(0,At.jsxs)("div",{className:"flex space-x-4 text-sm text-gray-600",children:[(0,At.jsxs)("span",{children:["\ud83d\udcb0 Costo: $",l(e.cost),"K"]}),(0,At.jsxs)("span",{children:["\ud83d\udcc5 Tiempo: ",l(e.schedule,0)," d\xedas"]})]})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,At.jsxs)("div",{className:"text-sm font-semibold text-green-700 mb-2 flex items-center",children:[(0,At.jsx)("span",{className:"mr-1",children:"\u2705"})," Ventajas"]}),(0,At.jsx)("ul",{className:"text-sm space-y-1 text-gray-700",children:e.pros.map((e,t)=>(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-1",children:"\u2022"}),(0,At.jsx)("span",{children:e})]},t))})]}),(0,At.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,At.jsxs)("div",{className:"text-sm font-semibold text-red-700 mb-2 flex items-center",children:[(0,At.jsx)("span",{className:"mr-1",children:"\u274c"})," Desventajas"]}),(0,At.jsx)("ul",{className:"text-sm space-y-1 text-gray-700",children:e.cons.map((e,t)=>(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-1",children:"\u2022"}),(0,At.jsx)("span",{children:e})]},t))})]})]}),o&&(0,At.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:m()?(0,At.jsx)("button",{onClick:()=>(e=>{if(i)i(e);else{const t=c.map((t,r)=>(0,s.A)((0,s.A)({},t),{},{selected:r===e}));d(t),n(t)}})(t),disabled:e.selected,className:"w-full px-4 py-2 rounded-lg transition-colors text-sm font-medium ".concat(e.selected?"bg-green-100 text-green-800 cursor-default border-2 border-green-300":"bg-blue-600 text-white hover:bg-blue-700"),children:e.selected?"\u2705 Seleccionada":"\ud83d\udccc Seleccionar esta alternativa"}):(0,At.jsx)("div",{className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg text-sm text-center",children:"\ud83d\udd12 Solo los aprobadores pueden seleccionar alternativas"})}),!o&&e.selected&&(0,At.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,At.jsx)("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-lg text-sm text-center font-medium border-2 border-green-300",children:"\u2705 Esta es la alternativa seleccionada"})})]},e.id))}),(()=>{const e=null===a||void 0===a?void 0:a.functionalRole;return["executive","sponsor","project_manager","technical_lead","pmo_assistant"].includes(e)})()?u?(0,At.jsxs)("div",{className:"border-2 border-purple-300 rounded-lg p-4 bg-purple-50",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Nueva Alternativa"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("input",{type:"text",placeholder:"Nombre de la alternativa",value:f.name,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,At.jsx)("input",{type:"number",placeholder:"Costo (K)",value:f.cost,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{cost:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg"}),(0,At.jsx)("input",{type:"number",placeholder:"Tiempo (d\xedas)",value:f.schedule,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{schedule:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,At.jsx)("textarea",{placeholder:"Ventajas (una por l\xednea)",value:f.pros,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{pros:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,At.jsx)("textarea",{placeholder:"Desventajas (una por l\xednea)",value:f.cons,onChange:e=>p((0,s.A)((0,s.A)({},f),{},{cons:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:()=>{const e={id:c.length+1,name:f.name,cost:parseFloat(f.cost)||0,schedule:parseFloat(f.schedule)||0,pros:f.pros.split("\n").filter(e=>e.trim()),cons:f.cons.split("\n").filter(e=>e.trim()),selected:!1},t=[...c,e];d(t),n(t),p({name:"",cost:0,schedule:0,pros:"",cons:""}),h(!1)},className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Agregar"}),(0,At.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancelar"})]})]})]}):(0,At.jsx)("button",{onClick:()=>h(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors text-gray-600 hover:text-purple-700 font-medium",children:"\u2795 Agregar Alternativa"}):(0,At.jsx)("div",{className:"border-2 border-gray-300 rounded-lg p-4 bg-gray-50 text-center",children:(0,At.jsx)("p",{className:"text-sm text-gray-500 italic",children:"\ud83d\udd12 Solo el equipo de proyecto puede agregar alternativas"})}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-blue-600 text-lg",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h4",{className:"font-semibold text-blue-800 text-sm mb-1",children:"Proceso de Alternativas"}),(0,At.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Equipo de proyecto:"})," Puede agregar y analizar alternativas"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Aprobadores/CCB:"})," Seleccionan cu\xe1l alternativa implementar"]}),(0,At.jsx)("li",{children:"\u2022 La alternativa seleccionada ser\xe1 la que se implemente si se aprueba el cambio"})]})]})]})})]})},V0=e=>{let{change:t,onSelectAlternative:r}=e;const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(null===e||void 0===e||""===e)return"0";const r=parseFloat(e);return isNaN(r)?"0":r.toFixed(t)};return t.alternatives&&0!==t.alternatives.length?(0,At.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 rounded-xl p-6 border border-emerald-200",children:[(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"}),(0,At.jsx)("span",{children:"Seleccionar Alternativa a Implementar"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"El cambio ha sido aprobado. Selecciona cu\xe1l alternativa se implementar\xe1."})]}),(0,At.jsx)("div",{className:"space-y-4",children:t.alternatives.map((e,a)=>(0,At.jsx)("div",{className:"bg-white rounded-lg p-6 border-2 transition-all ".concat(t.selectedAlternative===a?"border-green-500 bg-green-50":"border-gray-200 hover:border-emerald-300 hover:shadow-md"),children:(0,At.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("h4",{className:"font-bold text-gray-800 text-lg mb-2",children:["Opci\xf3n ",a+1,": ",e.name]}),(0,At.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"\ud83d\udcb0 Costo:"}),(0,At.jsxs)("div",{className:"font-semibold text-gray-800",children:["$",n(e.cost),"K"]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"\ud83d\udcc5 Tiempo:"}),(0,At.jsxs)("div",{className:"font-semibold text-gray-800",children:[n(e.schedule,0)," d\xedas"]})]})]}),e.pros&&e.pros.length>0&&(0,At.jsxs)("div",{className:"mb-3",children:[(0,At.jsx)("div",{className:"text-sm font-semibold text-green-700 mb-1",children:"\u2705 Ventajas:"}),(0,At.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:e.pros.map((e,t)=>(0,At.jsxs)("li",{children:["\u2022 ",e]},t))})]}),e.cons&&e.cons.length>0&&(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-sm font-semibold text-red-700 mb-1",children:"\u274c Desventajas:"}),(0,At.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:e.cons.map((e,t)=>(0,At.jsxs)("li",{children:["\u2022 ",e]},t))})]})]}),(0,At.jsx)("button",{onClick:()=>r(a),disabled:t.selectedAlternative===a,className:"ml-4 px-6 py-3 rounded-lg font-semibold transition-all ".concat(t.selectedAlternative===a?"bg-green-600 text-white cursor-default":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-lg"),children:t.selectedAlternative===a?"\u2705 Seleccionada":"\ud83d\udccc Seleccionar"})]})},e.id||a))}),(0,At.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-blue-600 text-lg",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h5",{className:"font-semibold text-blue-800 text-sm mb-1",children:"Siguiente Paso"}),(0,At.jsx)("p",{className:"text-xs text-blue-700",children:'Una vez seleccionada la alternativa, el cambio pasar\xe1 autom\xe1ticamente a estado "Implementando" y se podr\xe1 iniciar la ejecuci\xf3n del cambio aprobado.'})]})]})})]}):(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:(0,At.jsx)("p",{className:"text-yellow-800",children:"\u26a0\ufe0f No hay alternativas registradas para este cambio."})})},G0=e=>{let{title:t,value:r,icon:n,description:a,trend:s}=e;return(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-3xl",children:n}),s&&(0,At.jsxs)("span",{className:"text-sm font-medium ".concat(s>0?"text-green-600":"text-red-600"),children:[s>0?"\u2197":"\u2198"," ",Math.abs(s),"%"]})]}),(0,At.jsx)("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:r}),(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:t}),a&&(0,At.jsx)("div",{className:"text-xs text-gray-500",children:a})]})},K0=e=>{let{changes:r}=e;const n=(0,t.useMemo)(()=>{const e=r.length,t=r.filter(e=>"approved"===e.status||"implemented"===e.status).length,n=e>0?t/e*100:0;return{avgProcessingTime:O0(r),approvalRate:n.toFixed(1),topCategories:I0(r),efficiency:M0(r),totalChanges:e,pendingReview:r.filter(e=>"underReview"===e.status).length}},[r]);return(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsx)(G0,{title:"Tiempo Promedio",value:"".concat(n.avgProcessingTime," d\xedas"),icon:"\u23f1\ufe0f",description:"De solicitud a decisi\xf3n"}),(0,At.jsx)(G0,{title:"Tasa de Aprobaci\xf3n",value:"".concat(n.approvalRate,"%"),icon:"\u2705",description:"Cambios aprobados/total"}),(0,At.jsx)(G0,{title:"Eficiencia",value:"".concat(n.efficiency,"%"),icon:"\u26a1",description:"Implementados a tiempo"}),(0,At.jsx)(G0,{title:"En Revisi\xf3n",value:n.pendingReview,icon:"\ud83d\udd0d",description:"Requieren atenci\xf3n"})]})},$0=e=>{var r,n,a,i,o,l;let{currentProjectId:c,projects:d,workPackages:u,tasks:h,purchaseOrders:f,advances:p,invoices:m,contracts:g,onUpdateProject:v}=e;const[b,x]=(0,t.useState)([]),[y,w]=(0,t.useState)(!1),[j,N]=(0,t.useState)(null),[_,S]=(0,t.useState)("all"),[k,A]=(0,t.useState)("all"),[E,C]=(0,t.useState)(""),[T,P]=(0,t.useState)(null),[D,O]=(0,t.useState)(!1),[I,M]=(0,t.useState)(!1),[R,L]=(0,t.useState)(!1),{addAuditEvent:F}=AQ(c),{applyChangeToProject:B}=S0(c,v),{permissions:z,permissionsLoading:U,canCreate:q,canApprove:W,canReject:H,canImplement:V,canVoteInCCB:G,canAssign:K,getCurrentUserInfo:$,enrichChangeWithUser:Y,notifyAssignment:X,notifyApproval:J,notifyCCBMembers:Z,notifyStatusChange:Q,processing:ee}=R0(c),te=(0,t.useMemo)(()=>null===d||void 0===d?void 0:d.find(e=>e.id===c),[d,c]);(0,t.useEffect)(()=>{c||console.warn("\u26a0\ufe0f No hay proyecto seleccionado para Control de Cambios")},[c]);const[re,ne]=(0,t.useState)({title:"",description:"",justification:"",impactScope:"",impactSchedule:"",impactCost:"",impactQuality:"",impactResources:"",priority:"medium",category:"scope",requestedBy:"",requestedDate:(new Date).toISOString().split("T")[0],expectedImplementationDate:"",attachments:[],stakeholders:[]}),ae=(e,t)=>{ne(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))};(0,t.useEffect)(()=>{if(!c)return console.warn("No hay proyecto activo, no se pueden cargar cambios"),void x([]);const e=localStorage.getItem("project-changes-".concat(c));if(e)try{const t=JSON.parse(e);x(Array.isArray(t)?t:[])}catch(t){console.error("Error parseando cambios guardados:",t),x([])}else x([])},[c]);const se=e=>{if(c)try{localStorage.setItem("project-changes-".concat(c),JSON.stringify(e))}catch(t){console.error("Error guardando cambios:",t)}else console.warn("No hay proyecto activo, no se pueden guardar cambios")},ie={scope:{label:"Alcance",icon:"\ud83d\udccb",color:"bg-blue-100 text-blue-800"},schedule:{label:"Cronograma",icon:"\ud83d\udcc5",color:"bg-green-100 text-green-800"},cost:{label:"Costos",icon:"\ud83d\udcb0",color:"bg-yellow-100 text-yellow-800"},quality:{label:"Calidad",icon:"\u2b50",color:"bg-purple-100 text-purple-800"},resources:{label:"Recursos",icon:"\ud83d\udc65",color:"bg-indigo-100 text-indigo-800"},risk:{label:"Riesgos",icon:"\ud83d\udee1\ufe0f",color:"bg-red-100 text-red-800"},procurement:{label:"Adquisiciones",icon:"\ud83d\uded2",color:"bg-orange-100 text-orange-800"},communication:{label:"Comunicaciones",icon:"\ud83d\udce2",color:"bg-teal-100 text-teal-800"}},oe={submitted:{label:"Solicitado",icon:"\ud83d\udce4",color:"bg-blue-100 text-blue-800"},impactAnalysis:{label:"An\xe1lisis de Impacto",icon:"\ud83d\udcca",color:"bg-cyan-100 text-cyan-800"},readyForReview:{label:"Listo para Revisi\xf3n",icon:"\u2705",color:"bg-green-100 text-green-800"},underReview:{label:"En Revisi\xf3n CCB",icon:"\ud83d\uddf3\ufe0f",color:"bg-indigo-100 text-indigo-800"},approved:{label:"Aprobado - Seleccionar Alternativa",icon:"\u2714\ufe0f",color:"bg-emerald-100 text-emerald-800"},implementing:{label:"Implementando",icon:"\ud83d\ude80",color:"bg-purple-100 text-purple-800"},implemented:{label:"Implementado",icon:"\u2728",color:"bg-green-100 text-green-800"},rejected:{label:"Rechazado",icon:"\u274c",color:"bg-red-100 text-red-800"},cancelled:{label:"Cancelado",icon:"\u26d4",color:"bg-gray-100 text-gray-600"}},le={low:{label:"Baja",icon:"\ud83d\udfe2",color:"bg-green-100 text-green-800"},medium:{label:"Media",icon:"\ud83d\udfe1",color:"bg-yellow-100 text-yellow-800"},high:{label:"Alta",icon:"\ud83d\udfe0",color:"bg-orange-100 text-orange-800"},critical:{label:"Cr\xedtica",icon:"\ud83d\udd34",color:"bg-red-100 text-red-800"}},ce=(0,t.useMemo)(()=>{let e=b;return"all"!==_&&(e=e.filter(e=>e.status===_)),"all"!==k&&(e=e.filter(e=>e.priority===k)),E&&(e=e.filter(e=>e.title.toLowerCase().includes(E.toLowerCase())||e.description.toLowerCase().includes(E.toLowerCase())||e.requestedBy.toLowerCase().includes(E.toLowerCase()))),e.sort((e,t)=>new Date(t.requestedDate)-new Date(e.requestedDate))},[b,_,k,E]),de=(0,t.useMemo)(()=>{const e=b.length,t=b.filter(e=>["submitted","initialReview","impactAnalysis","underReview","approvalPending"].includes(e.status)).length,r=b.filter(e=>"approved"===e.status).length,n=b.filter(e=>"implemented"===e.status).length,a=b.filter(e=>"rejected"===e.status).length,s=b.filter(e=>"approved"===e.status||"implemented"===e.status).reduce((e,t)=>e+(parseFloat(t.impactCost)||0),0),i=b.filter(e=>"approved"===e.status||"implemented"===e.status).reduce((e,t)=>e+(parseFloat(t.impactSchedule)||0),0);return{totalChanges:e,pendingChanges:t,approvedChanges:r,implementedChanges:n,rejectedChanges:a,totalCostImpact:s,totalScheduleImpact:i}},[b]),ue=()=>{var e;if(!q())return void alert("No tienes permisos para crear cambios");const t=parseFloat(re.impactCost)||0,r=parseFloat(re.impactSchedule)||0,{approver:n,level:a}=((e,t)=>{let r="project_manager",n="low";return e>=L0.critical.threshold?(r=L0.critical.approver,n="critical"):e>=L0.high.threshold?(r=L0.high.approver,n="high"):e>=L0.medium.threshold&&(r=L0.medium.approver,n="medium"),t>=F0.critical.threshold?(r=F0.critical.approver,n="critical"):t>=F0.high.threshold&&"critical"!==n?(r=F0.high.approver,n="high"):t>=F0.medium.threshold&&"low"===n&&(r=F0.medium.approver,n="medium"),{approver:r,level:n}})(t,r),i=Y(re),o=t>=25e3||r>=15,l=o?"impactAnalysis":"readyForReview",d=(0,s.A)((0,s.A)({id:"change-".concat(Date.now()),projectId:c,projectName:(null===te||void 0===te?void 0:te.name)||"Sin nombre"},i),{},{status:l,requiredApprover:n,authorityLevel:a,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),changeNumber:"CHG-".concat(String(b.length+1).padStart(6,"0")),ccbVotes:null,alternatives:null,impactAnalysisComplete:!1,selectedAlternative:null}),u=[d,...b];x(u),se(u),F("change_management","change_created",{changeId:d.id,changeTitle:d.title,changeNumber:d.changeNumber,createdBy:null===(e=d.createdBy)||void 0===e?void 0:e.userName,requiredApprover:n,needsAnalysis:o}),ne({title:"",description:"",justification:"",impactScope:"",impactSchedule:"",impactCost:"",impactQuality:"",impactResources:"",priority:"medium",category:"scope",requestedBy:"",requestedDate:(new Date).toISOString().split("T")[0],expectedImplementationDate:"",attachments:[],stakeholders:[]}),w(!1),o?alert("\u2705 Cambio creado. Requiere an\xe1lisis de impacto completo antes de la revisi\xf3n."):alert("\u2705 Cambio creado. Listo para aprobaci\xf3n directa.")},he=e=>"ccb"===e.requiredApprover||"executive_board"===e.requiredApprover||"high"===e.authorityLevel||"critical"===e.authorityLevel||(parseFloat(e.impactCost)||0)>1e5||(parseFloat(e.impactSchedule)||0)>30,fe=(e,t)=>{var r;const n=b.find(t=>t.id===e);if(!n)return;if("approved"!==n.status)return void alert("\u274c Solo se puede seleccionar alternativa despu\xe9s de aprobar el cambio");const a=b.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{selectedAlternative:t,status:"implementing",updatedAt:(new Date).toISOString()}):r);x(a),se(a),F("change_management","alternative_selected",{changeId:e,changeNumber:n.changeNumber,alternativeIndex:t,alternativeName:null===(r=n.alternatives[t])||void 0===r?void 0:r.name}),alert("\u2705 Alternativa seleccionada. El cambio pasa a implementaci\xf3n.")},pe=async function(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=b.find(t=>t.id===e);if(!a)return;const i=a.status;if("approved"===t&&!W(a))return void alert("No tienes permisos para aprobar este cambio o excede tu l\xedmite de aprobaci\xf3n");if("rejected"===t&&!H())return void alert("No tienes permisos para rechazar cambios");if("implemented"===t&&!V())return void alert("No tienes permisos para implementar cambios");const o=$(),l=b.map(r=>{if(r.id===e){const e=(0,s.A)((0,s.A)({},r),{},{status:t,updatedAt:(new Date).toISOString(),statusHistory:[...r.statusHistory||[],{status:t,date:(new Date).toISOString(),comments:n,updatedBy:(null===o||void 0===o?void 0:o.userName)||"Sistema",userEmail:null===o||void 0===o?void 0:o.userEmail}]});return"approved"===t&&B(e,te),e}return r});x(l),se(l),F("change_management","change_status_updated",{changeId:e,oldStatus:i,newStatus:t,comments:n,updatedBy:null===o||void 0===o?void 0:o.userName}),null!==(r=a.createdBy)&&void 0!==r&&r.userEmail&&await Q((0,s.A)((0,s.A)({},a),{},{changeNumber:a.changeNumber,title:a.title}),i,t,[{email:a.createdBy.userEmail,id:a.createdBy.userId}])},me=(e,t)=>{const r=b.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{alternatives:t}):r);x(r),se(r)},ge=e=>e<10?"text-green-600":e<25?"text-yellow-600":e<50?"text-orange-600":"text-red-600";return(0,At.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,At.jsx)("div",{className:"max-w-7xl mx-auto",children:c?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-100 rounded-2xl shadow-lg p-8 mb-8 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-indigo-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udd04"})}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,At.jsx)("h1",{className:"text-4xl font-bold text-gray-800",children:"Control de Cambios"}),te&&(0,At.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:["\ud83d\udcc1 ",te.name]})]}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"Gesti\xf3n integral de cambios del proyecto seg\xfan PMBOK v7"}),(0,At.jsxs)("div",{className:"mt-4 flex items-center space-x-6 text-sm text-gray-700",children:[(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udccb"}),(0,At.jsxs)("span",{children:["Total: ",de.totalChanges]})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\u23f3"}),(0,At.jsxs)("span",{children:["Pendientes: ",de.pendingChanges]})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\u2705"}),(0,At.jsxs)("span",{children:["Aprobados: ",de.approvedChanges]})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\ude80"}),(0,At.jsxs)("span",{children:["Implementados: ",de.implementedChanges]})]})]})]})]}),(0,At.jsx)("button",{onClick:()=>w(!0),disabled:!q(),className:"px-8 py-4 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 font-semibold border ".concat(q()?"bg-white text-purple-700 hover:bg-purple-50 border-purple-200":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"),title:q()?"":"No tienes permisos para crear cambios",children:"\ud83d\udcdd Solicitar Cambio"}),z.changeRole&&(0,At.jsxs)("div",{className:"text-sm bg-white/80 px-4 py-2 rounded-lg border border-purple-200",children:[(0,At.jsx)("div",{className:"text-gray-600",children:"Tu rol:"}),(0,At.jsx)("div",{className:"font-semibold text-purple-700",children:P0(z.functionalRole)||z.changeRole})]})]})})]}),(0,At.jsx)("div",{className:"mb-8",children:(0,At.jsx)(K0,{changes:b})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:de.totalChanges}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Cambios"})]}),(0,At.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udd04"})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:de.pendingChanges}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Pendientes"})]}),(0,At.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\u23f3"})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",de.totalCostImpact.toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Impacto en Costos"})]}),(0,At.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-yellow-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:de.totalScheduleImpact}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"D\xedas de Impacto"})]}),(0,At.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"})})]})})]}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[(0,At.jsx)("div",{className:"lg:col-span-2",children:(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,At.jsx)("span",{className:"text-gray-400",children:"\ud83d\udd0d"})}),(0,At.jsx)("input",{type:"text",placeholder:"Buscar cambios por t\xedtulo, descripci\xf3n o solicitante...",value:E,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[(0,At.jsx)("option",{value:"all",children:"Todos los Estados"}),Object.entries(oe).map(e=>{let[t,r]=e;return(0,At.jsxs)("option",{value:t,children:[r.icon," ",r.label]},t)})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{value:k,onChange:e=>A(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[(0,At.jsx)("option",{value:"all",children:"Todas las Prioridades"}),Object.entries(le).map(e=>{let[t,r]=e;return(0,At.jsxs)("option",{value:t,children:[r.icon," ",r.label]},t)})]})})]})}),(0,At.jsx)("div",{className:"space-y-4",children:0===ce.length?(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[(0,At.jsx)("div",{className:"text-6xl mb-6",children:"\ud83d\udd0d"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-700 mb-2",children:"No hay cambios registrados"}),(0,At.jsx)("div",{className:"text-gray-500",children:E||"all"!==_||"all"!==k?"No se encontraron cambios con los filtros aplicados":"Comienza solicitando el primer cambio del proyecto"})]}):ce.map(e=>{var t,r,n,a,s,i,o,l,c;return(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200",children:(0,At.jsx)("div",{className:"p-6",children:(0,At.jsxs)("div",{className:"flex items-start justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,At.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(null===(t=ie[e.category])||void 0===t?void 0:t.color),children:[null===(r=ie[e.category])||void 0===r?void 0:r.icon," ",null===(n=ie[e.category])||void 0===n?void 0:n.label]}),(0,At.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(null===(a=oe[e.status])||void 0===a?void 0:a.color),children:[null===(s=oe[e.status])||void 0===s?void 0:s.icon," ",null===(i=oe[e.status])||void 0===i?void 0:i.label]}),(0,At.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(null===(o=le[e.priority])||void 0===o?void 0:o.color),children:[null===(l=le[e.priority])||void 0===l?void 0:l.icon," ",null===(c=le[e.priority])||void 0===c?void 0:c.label]}),he(e)&&(0,At.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 border border-purple-300",children:"\ud83d\uddf3\ufe0f Requiere CCB"}),(0,At.jsx)("span",{className:"text-sm text-gray-500 font-mono",children:e.changeNumber})]}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.title}),(0,At.jsx)("p",{className:"text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"Solicitante:"}),(0,At.jsx)("div",{className:"font-medium",children:e.requestedBy})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"Fecha:"}),(0,At.jsx)("div",{className:"font-medium",children:new Date(e.requestedDate).toLocaleDateString()})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"Impacto Costo:"}),(0,At.jsxs)("div",{className:"font-medium ".concat(ge(e.impactCost)),children:["$",e.impactCost||0,"K"]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"Impacto Cronograma:"}),(0,At.jsxs)("div",{className:"font-medium ".concat(ge(e.impactSchedule)),children:[e.impactSchedule||0," d\xedas"]})]})]}),e.requiredApprover&&(0,At.jsxs)("div",{className:"mt-3 text-xs text-gray-600",children:["\ud83c\udfaf Aprobador requerido: ",(0,At.jsx)("span",{className:"font-medium",children:e.requiredApprover})]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[(0,At.jsx)("button",{onClick:()=>P(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver detalles",children:"\ud83d\udc41\ufe0f"}),"impactAnalysis"===e.status&&(0,At.jsx)("button",{onClick:()=>P(e),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors text-sm",children:"\ud83d\udcca Completar An\xe1lisis"}),"readyForReview"===e.status&&!he(e)&&(0,At.jsxs)(At.Fragment,{children:[W(e)&&(0,At.jsx)("button",{onClick:()=>pe(e.id,"approved","Cambio aprobado directamente"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"\u2705 Aprobar"}),H()&&(0,At.jsx)("button",{onClick:()=>pe(e.id,"rejected","Cambio rechazado"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"\u274c Rechazar"})]}),"readyForReview"===e.status&&he(e)&&(0,At.jsx)("button",{onClick:()=>pe(e.id,"underReview","Enviado a CCB para votaci\xf3n"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm",children:"\ud83d\uddf3\ufe0f Enviar a CCB"}),"underReview"===e.status&&(0,At.jsx)("button",{onClick:()=>P(e),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"\ud83d\uddf3\ufe0f Ver Panel CCB"}),"approved"===e.status&&!e.selectedAlternative&&(0,At.jsx)("button",{onClick:()=>P(e),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm animate-pulse",children:"\ud83c\udfaf Seleccionar Alternativa"}),"implementing"===e.status&&V()&&(0,At.jsx)("button",{onClick:()=>pe(e.id,"implemented","Cambio implementado exitosamente"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"\u2728 Completar Implementaci\xf3n"})]})]})})},e.id)})}),y&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-8",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"\ud83d\udcdd Solicitar Cambio"}),(0,At.jsx)("button",{onClick:()=>w(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:"\u2715"})]}),(0,At.jsxs)("form",{onSubmit:e=>{e.preventDefault(),ue()},className:"space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udccb T\xedtulo del Cambio *"}),(0,At.jsx)("input",{type:"text",required:!0,value:re.title,onChange:e=>ae("title",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"T\xedtulo descriptivo del cambio"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83c\udff7\ufe0f Categor\xeda *"}),(0,At.jsx)("select",{required:!0,value:re.category,onChange:e=>ae("category",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",children:Object.entries(ie).map(e=>{let[t,r]=e;return(0,At.jsxs)("option",{value:t,children:[r.icon," ",r.label]},t)})})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u26a1 Prioridad *"}),(0,At.jsx)("select",{required:!0,value:re.priority,onChange:e=>ae("priority",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",children:Object.entries(le).map(e=>{let[t,r]=e;return(0,At.jsxs)("option",{value:t,children:[r.icon," ",r.label]},t)})})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udc64 Solicitante *"}),(0,At.jsx)("input",{type:"text",required:!0,value:re.requestedBy,onChange:e=>ae("requestedBy",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"Nombre del solicitante"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcdd Descripci\xf3n Detallada *"}),(0,At.jsx)("textarea",{required:!0,rows:4,value:re.description,onChange:e=>ae("description",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors resize-none",placeholder:"Describe detalladamente el cambio solicitado, incluyendo el contexto y la necesidad"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83c\udfaf Justificaci\xf3n del Cambio *"}),(0,At.jsx)("textarea",{required:!0,rows:3,value:re.justification,onChange:e=>ae("justification",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors resize-none",placeholder:"Explica por qu\xe9 es necesario este cambio y qu\xe9 beneficios aportar\xe1"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcb0 Impacto en Costos (K)"}),(0,At.jsx)("input",{type:"number",value:re.impactCost,onChange:e=>ae("impactCost",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"0",min:"0",step:"0.1"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcc5 Impacto en Cronograma (d\xedas)"}),(0,At.jsx)("input",{type:"number",value:re.impactSchedule,onChange:e=>ae("impactSchedule",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"0",min:"0",step:"0.5"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udccb Impacto en Alcance"}),(0,At.jsx)("textarea",{rows:2,value:re.impactScope,onChange:e=>ae("impactScope",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors resize-none",placeholder:"Describe el impacto en el alcance del proyecto"})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcc5 Fecha de Solicitud"}),(0,At.jsx)("input",{type:"date",value:re.requestedDate,onChange:e=>ae("requestedDate",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83c\udfaf Fecha Esperada de Implementaci\xf3n"}),(0,At.jsx)("input",{type:"date",value:re.expectedImplementationDate,onChange:e=>ae("expectedImplementationDate",e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,At.jsx)("button",{type:"button",onClick:()=>w(!1),className:"px-6 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-colors font-medium",children:"Cancelar"}),(0,At.jsx)("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"\ud83d\udce4 Enviar Solicitud"})]})]})]})})}),T&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,At.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto my-8",children:(0,At.jsxs)("div",{className:"p-8",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsxs)("h2",{className:"text-3xl font-bold text-gray-800",children:["\ud83d\udccb Detalles del Cambio: ",T.changeNumber]}),(0,At.jsx)("button",{onClick:()=>P(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\ud83d\udccb Informaci\xf3n B\xe1sica"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"T\xedtulo:"}),(0,At.jsx)("div",{className:"font-medium",children:T.title})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Categor\xeda:"}),(0,At.jsxs)("div",{className:"font-medium",children:[null===(r=ie[T.category])||void 0===r?void 0:r.icon," ",null===(n=ie[T.category])||void 0===n?void 0:n.label]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Prioridad:"}),(0,At.jsxs)("div",{className:"font-medium",children:[null===(a=le[T.priority])||void 0===a?void 0:a.icon," ",null===(i=le[T.priority])||void 0===i?void 0:i.label]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Estado:"}),(0,At.jsxs)("div",{className:"font-medium",children:[null===(o=oe[T.status])||void 0===o?void 0:o.icon," ",null===(l=oe[T.status])||void 0===l?void 0:l.label]})]}),T.requiredApprover&&(0,At.jsxs)("div",{className:"md:col-span-2",children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Aprobador Requerido:"}),(0,At.jsxs)("div",{className:"font-medium text-purple-700",children:["\ud83c\udfaf ",T.requiredApprover," (Nivel: ",T.authorityLevel,")"]})]})]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\ud83d\udcdd Descripci\xf3n y Justificaci\xf3n"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Descripci\xf3n:"}),(0,At.jsx)("div",{className:"mt-1",children:T.description})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Justificaci\xf3n:"}),(0,At.jsx)("div",{className:"mt-1",children:T.justification})]})]})]}),te&&(0,At.jsx)(At.Fragment,{children:"impactAnalysis"===T.status?(0,At.jsx)(W0,{change:T,onComplete:()=>(e=>{const t=b.find(t=>t.id===e);if(!t)return;if(!t.alternatives||t.alternatives.length<3)return void alert("\u274c Debes agregar al menos 3 alternativas antes de completar el an\xe1lisis");const r=b.map(t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{status:"readyForReview",impactAnalysisComplete:!0,updatedAt:(new Date).toISOString()}):t);x(r),se(r),F("change_management","impact_analysis_completed",{changeId:e,changeNumber:t.changeNumber,alternativesCount:t.alternatives.length}),alert("\u2705 An\xe1lisis de impacto completado. El cambio est\xe1 listo para revisi\xf3n.")})(T.id),onUpdateAlternatives:e=>me(T.id,e)}):(0,At.jsx)(q0,{change:T,project:te})}),"underReview"===T.status&&(0,At.jsx)(z0,{change:T,currentUserPermissions:z,onUpdateVotes:e=>((e,t)=>{const r=b.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{ccbVotes:t}):r);x(r),se(r)})(T.id,e)}),"approved"!==T.status||T.selectedAlternative?(0,At.jsx)(H0,{change:T,currentUserPermissions:z,onUpdateAlternatives:e=>me(T.id,e),onSelectAlternative:e=>fe(T.id,e),canSelect:!1}):(0,At.jsx)(V0,{change:T,onSelectAlternative:e=>fe(T.id,e)}),T.statusHistory&&T.statusHistory.length>0&&(0,At.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\ud83d\udcc8 Historial de Estados"}),(0,At.jsx)("div",{className:"space-y-3",children:T.statusHistory.map((e,t)=>{var r,n,a;return(0,At.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg",children:[(0,At.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(null===(r=oe[e.status])||void 0===r?void 0:r.color),children:[null===(n=oe[e.status])||void 0===n?void 0:n.icon," ",null===(a=oe[e.status])||void 0===a?void 0:a.label]}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),e.comments&&(0,At.jsxs)("span",{className:"text-sm text-gray-600",children:["- ",e.comments]})]},t)})})]}),(0,At.jsx)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:(0,At.jsx)("button",{onClick:()=>P(null),className:"px-6 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-colors font-medium",children:"Cerrar"})})]})]})})})]}):(0,At.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[(0,At.jsx)("div",{className:"text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,At.jsx)("h3",{className:"text-xl font-bold text-yellow-800 mb-2",children:"No hay proyecto seleccionado"}),(0,At.jsx)("p",{className:"text-yellow-700",children:"Selecciona un proyecto desde el men\xfa principal para gestionar sus cambios"})]})})})},Y0=e=>{let{currentProjectId:r,currentProject:n,projects:a,workPackages:s,tasks:i,purchaseOrders:o,advances:l,invoices:c,contracts:d}=e;const u=(0,t.useMemo)(()=>Math.random().toString(36).substr(2,9),[]);console.log("\ud83d\udd0d CASHFLOW COMPONENT - INSTANCIA ".concat(u," INICIANDO:"),{currentProject:null===n||void 0===n?void 0:n.name,tasksCount:(null===i||void 0===i?void 0:i.length)||0,timestamp:(new Date).toISOString()}),console.log("\ud83d\udd0d CASHFLOW COMPONENT [".concat(u,"] - TAREAS RECIBIDAS:"),{totalTasks:(null===i||void 0===i?void 0:i.length)||0,tasksWithCosts:(null===i||void 0===i?void 0:i.filter(e=>e.cost>0).length)||0,tasksWithCostsDetails:(null===i||void 0===i?void 0:i.filter(e=>e.cost>0).map(e=>({id:e.id,name:e.name,cost:e.cost,startDate:e.startDate,endDate:e.endDate,isMilestone:e.isMilestone})))||[]});const[h,f]=(0,t.useState)("12"),[p,m]=(0,t.useState)((new Date).toISOString().split("T")[0]),[g,v]=(0,t.useState)(!1),[b,x]=(0,t.useState)({paymentTerms:"milestone",revenueRecognition:"percentage_completion"}),{addAuditEvent:y}=AQ(r);console.log("\ud83d\udd0d CASHFLOW DEBUG - currentProject recibido:",n),console.log("\ud83d\udd0d CASHFLOW DEBUG - currentProjectId:",r);const w=e=>{if(!n||!i)return console.log("\ud83d\udd0d CashFlow: No hay proyecto o tareas:",{currentProject:!!n,tasks:!!i}),0;const t=new Date(e.getFullYear(),e.getMonth(),1);t.setHours(0,0,0,0);const r=new Date(e.getFullYear(),e.getMonth()+1,0);if(r.setHours(23,59,59,999),console.log("\ud83d\udd0d CashFlow: Calculando gasto planificado para mes:",{month:e.toLocaleDateString("es-ES",{year:"numeric",month:"long"}),monthStart:t.toISOString().split("T")[0],monthEnd:r.toISOString().split("T")[0],totalTasks:i.length}),6===e.getMonth()&&2026===e.getFullYear()){console.log("\ud83d\udd0d DEBUG JULIO 2026 - AN\xc1LISIS COMPLETO DE TAREAS:"),console.log("\ud83d\udd0d Rango del mes julio 2026:",{monthStart:t.toISOString().split("T")[0],monthEnd:r.toISOString().split("T")[0]});let e=0,n=0,a=[];i.forEach((s,i)=>{if(s.cost&&s.cost>0){e+=s.cost;const o=new Date(s.startDate),l=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0),c=new Date(s.endDate),d=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999);let u=!1;u=s.isMilestone||0===s.duration?l>=t&&l<=r:l<=r&&d>=t,u?(n++,console.log("  \u2705 INCLUIDA - Tarea ".concat(i+1,":"),{name:s.name||s.title,cost:s.cost,startDate:s.startDate,endDate:s.endDate,isMilestone:s.isMilestone,duration:s.duration,taskStart:o.toISOString().split("T")[0],taskEnd:c.toISOString().split("T")[0]})):a.push({index:i+1,name:s.name||s.title,cost:s.cost,startDate:s.startDate,taskStart:o.toISOString().split("T")[0],isMilestone:s.isMilestone,razon:s.isMilestone?"Hito fuera del rango: ".concat(o.toISOString().split("T")[0]," no est\xe1 entre ").concat(t.toISOString().split("T")[0]," y ").concat(r.toISOString().split("T")[0]):"Tarea normal sin intersecci\xf3n: ".concat(o.toISOString().split("T")[0]," - ").concat(c.toISOString().split("T")[0]," no intersecta con ").concat(t.toISOString().split("T")[0]," - ").concat(r.toISOString().split("T")[0])})}}),console.log("\ud83d\udd0d JULIO 2026 - Resumen:",{totalTareas:i.length,tareasConCosto:i.filter(e=>e.cost>0).length,tareasEnJulio:n,costoTotalEsperado:e,costoPromedioPorTarea:e/i.filter(e=>e.cost>0).length}),console.log("\ud83d\udd0d JULIO 2026 - Tareas EXCLUIDAS (posibles causas del error):",a)}let a=0,s=0,o=0;return i.forEach((n,i)=>{if(console.log("\ud83d\udd0d CashFlow: Tarea ".concat(i+1,":"),{name:n.name||n.title,cost:n.cost,startDate:n.startDate,endDate:n.endDate,hasCost:!!n.cost,hasDates:!(!n.startDate||!n.endDate),isMilestone:n.isMilestone,duration:n.duration}),44===i){const a=e.toLocaleDateString("es-ES",{year:"numeric",month:"long"});console.log("\ud83d\udea8 DEBUG TAREA 45 ESPEC\xcdFICA:",{taskName:n.name||n.title,taskCost:n.cost,taskStartDate:n.startDate,taskEndDate:n.endDate,isMilestone:n.isMilestone,duration:n.duration,monthStart:t.toISOString().split("T")[0],monthEnd:r.toISOString().split("T")[0],monthName:a}),"agosto de 2026"===a&&n.cost>0&&console.log("\ud83d\udd0d CASHFLOW [".concat(u,"] - TAREA CON COSTO EN AGOSTO 2026:"),{taskIndex:i,taskId:n.id,taskName:n.name,taskCost:n.cost,taskStartDate:n.startDate,taskEndDate:n.endDate,isMilestone:n.isMilestone,duration:n.duration,monthName:a,monthStart:t.toISOString().split("T")[0],monthEnd:r.toISOString().split("T")[0]})}if(n.cost&&n.startDate&&n.endDate){s++;const l=new Date(n.startDate),c=new Date(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0,0),d=new Date(n.endDate),h=new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59,999),f=e.toLocaleDateString("es-ES",{year:"numeric",month:"long"});("julio de 2026"===f||"agosto de 2026"===f)&&n.cost>0&&console.log("\ud83d\udd0d CASHFLOW [".concat(u,"] - TAREA CON COSTO EN ").concat(f.toUpperCase(),":"),{taskIndex:i,taskId:n.id,taskName:n.name,taskCost:n.cost,taskStartDate:n.startDate,taskEndDate:n.endDate,isMilestone:n.isMilestone,duration:n.duration,monthName:f,monthStart:t.toISOString().split("T")[0],monthEnd:r.toISOString().split("T")[0]});let p=!1;if(n.isMilestone||0===n.duration?(p=c>=t&&c<=r,n.cost>0&&("julio de 2026"===f||"agosto de 2026"===f)&&console.log("\ud83c\udfaf DEBUG HITO [".concat(u,"] - Verificaci\xf3n de mes:"),{taskName:n.name||n.title,taskStartDate:n.startDate,taskStart:l.toISOString().split("T")[0],monthStart:t.toISOString().split("T")[0],monthEnd:r.toISOString().split("T")[0],isInMonth:p,monthName:f,comparison:{taskStartGreaterEqualMonthStart:c>=t,taskStartLessEqualMonthEnd:c<=r,taskStartTime:c.getTime(),monthStartTime:t.getTime(),monthEndTime:r.getTime()}})):p=c<=r&&h>=t,p)if(o++,n.isMilestone||0===n.duration){const e=n.cost||0;a+=e,console.log('\ud83d\udcb0 CashFlow: HITO "'.concat(n.name||n.title,'" en mes:'),{taskCost:n.cost,isMilestone:!0,startDate:n.startDate,endDate:n.endDate,costInMonth:e.toFixed(2)}),n.cost&&n.cost>3e5&&console.log("\ud83d\udea8 DEBUG HITO PROBLEM\xc1TICO:",{taskName:n.name||n.title,taskCost:n.cost,taskStartDate:n.startDate,taskEndDate:n.endDate,monthStart:t.toISOString().split("T")[0],monthEnd:r.toISOString().split("T")[0],isInMonth:c<=r&&h>=t,plannedExpenseBefore:a-e,plannedExpenseAfter:a})}else{const e=h-c+1,s=new Date(Math.max(c.getTime(),t.getTime())),i=new Date(Math.min(h.getTime(),r.getTime()))-s+1;if(i>0){const t=i/e,r=(n.cost||0)*t;a+=r,console.log('\ud83d\udcb0 CashFlow: Tarea "'.concat(n.name||n.title,'" en mes:'),{taskCost:n.cost,percentageInMonth:(100*t).toFixed(1)+"%",costInMonth:r.toFixed(2)})}}}}),console.log("\ud83d\udd0d CashFlow: Resumen del mes:",{totalTasks:i.length,tasksWithCosts:s,tasksInMonth:o,plannedExpense:a.toFixed(2)}),6===e.getMonth()&&2026===e.getFullYear()&&console.log("\ud83c\udfaf JULIO 2026 - VALOR FINAL CALCULADO:",{plannedExpense:a,plannedExpenseFixed:a.toFixed(3),valorEsperadoPorUsuario:385953.528,diferencia:a-385953.528,porcentajeDelEsperado:(a/385953.528*100).toFixed(2)+"%"}),a},j=(e,t)=>{if(!n)return 0;console.log("\ud83d\udd0d CASHFLOW PROJECTION - calculateMonthCommittedExpense iniciando:",{monthDate:e.toISOString().substring(0,7),purchaseOrdersLength:(null===o||void 0===o?void 0:o.length)||0,purchaseOrders:o});const r=(null===o||void 0===o?void 0:o.filter(e=>"approved"===e.status))||[];console.log("\ud83d\udd0d CASHFLOW PROJECTION - \xd3rdenes de compra aprobadas:",r.map(e=>({id:e.id,number:e.number,status:e.status,totalAmount:e.totalAmount,approvalDate:e.approvalDate,requestDate:e.requestDate,hasApprovalDate:!(!e.approvalDate||""===e.approvalDate.trim()),hasRequestDate:!(!e.requestDate||""===e.requestDate.trim())})));let a=0;const s=new Date(e.getFullYear(),e.getMonth(),1);s.setHours(0,0,0,0);const i=new Date(e.getFullYear(),e.getMonth()+1,0);i.setHours(23,59,59,999),console.log("\ud83d\udd0d CASHFLOW PROJECTION - Rango de fechas:",{monthStart:s.toISOString().split("T")[0],monthEnd:i.toISOString().split("T")[0]});const l=(null===o||void 0===o?void 0:o.filter(e=>{if("approved"!==e.status)return!1;if(!e.approvalDate||""===e.approvalDate.trim())return console.log("\u26a0\ufe0f CASHFLOW PROJECTION - OC sin fecha de aprobaci\xf3n:",{id:e.id,number:e.number,status:e.status,totalAmount:e.totalAmount,approvalDate:e.approvalDate}),!1;const r=new Date(e.approvalDate+"T00:00:00"),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0),a=new Date(n);a.setDate(n.getDate()+t),a.setHours(0,0,0,0);const o=a>=s&&a<=i;return console.log("\ud83d\udd0d CASHFLOW PROJECTION - Evaluando OC:",{id:e.id,number:e.number,approvalDate:e.approvalDate,approvalDateParsed:r.toISOString().split("T")[0],adjustedDate:a.toISOString().split("T")[0],monthStart:s.toISOString().split("T")[0],monthEnd:i.toISOString().split("T")[0],daysToPayment:t,status:e.status,totalAmount:e.totalAmount,isInMonth:o,willInclude:o}),o}))||[];return a+=l.reduce((e,t)=>(console.log("\u2705 CASHFLOW PROJECTION - INCLUYENDO OC ".concat(t.number,": $").concat(t.totalAmount)),e+(t.totalAmount||0)),0),console.log("\ud83d\udd0d CASHFLOW PROJECTION - Resultado final:",{monthPOsCount:l.length,committedExpense:a}),a},N=e=>{if(!n)return 0;let t=0;const r=new Date(e.getFullYear(),e.getMonth(),1);r.setHours(0,0,0,0);const a=new Date(e.getFullYear(),e.getMonth()+1,0);a.setHours(23,59,59,999);t+=((null===l||void 0===l?void 0:l.filter(e=>{if("paid"!==e.status)return!1;const t=new Date(e.paymentDate||e.date),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0);return n>=r&&n<=a}))||[]).reduce((e,t)=>e+(t.amount||0),0);return t+=((null===c||void 0===c?void 0:c.filter(e=>{if("paid"!==e.status)return!1;const t=new Date(e.paymentDate||e.date),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0);return n>=r&&n<=a}))||[]).reduce((e,t)=>e+(t.amount||0),0),t},_=(0,t.useMemo)(()=>Date.now(),[n,i,h,p]),S=(0,t.useMemo)(()=>{if(!n)return null;console.log("\ud83d\udd04 CASHFLOW PROJECTION [".concat(u,"] - FORZANDO REC\xc1LCULO COMPLETO:"),{currentProject:null===n||void 0===n?void 0:n.name,projectionPeriod:h,projectionStartDate:p,purchaseOrders:(null===o||void 0===o?void 0:o.length)||0,advances:(null===l||void 0===l?void 0:l.length)||0,invoices:(null===c||void 0===c?void 0:c.length)||0,tasks:(null===i||void 0===i?void 0:i.length)||0,forceRecalculation:_,timestamp:(new Date).toISOString()});const e=new Date(p),t=parseInt(h),r=[],a={net30:30,net60:60,net90:90,advance:-15,milestone:0}[b.paymentTerms];console.log("\ud83d\udd0d CASHFLOW PROJECTION - CONFIGURACI\xd3N COMPLETA:",{startDate:e.toISOString().split("T")[0],months:t,projectionStartDate:p,projectionPeriod:h,currentProject:null===n||void 0===n?void 0:n.name});for(let n=0;n<t;n++){const t=new Date(e.getFullYear(),e.getMonth()+n,1),s=t.toISOString().slice(0,7),i=t.toLocaleDateString("es-ES",{year:"numeric",month:"long"});console.log("\ud83d\udd0d CASHFLOW PROJECTION - Procesando mes ".concat(n+1,": ").concat(s," (").concat(i,")")),"2026-07"===s&&console.log("\ud83c\udfaf JULIO 2026 DETECTADO - Iniciando c\xe1lculo detallado...");const o=w(t);console.log("\ud83d\udd0d CASHFLOW PROJECTION [".concat(u,"] - RESULTADO calculateMonthPlannedExpense para ").concat(s,": $").concat(o)),console.log("\ud83d\udd0d CASHFLOW PROJECTION - LLAMANDO calculateMonthCommittedExpense para mes ".concat(s));const l=j(t,a);console.log("\ud83d\udd0d CASHFLOW PROJECTION - RESULTADO calculateMonthCommittedExpense: $".concat(l));const c=N(t),d={month:n+1,monthKey:s,monthLabel:i,date:t,revenue:o,expenses:l,realExpenses:c,netCashFlow:o-c,cumulativeBalance:(n>0?r[n-1].cumulativeBalance:0)+o,cashIn:o,cashOut:c};"2026-07"!==s&&"2026-08"!==s||console.log("\ud83d\udd0d CASHFLOW PROJECTION [".concat(u,"] - ASIGNANDO VALORES para ").concat(s,":"),{monthPlannedExpense:o,revenue:d.revenue,monthLabel:d.monthLabel,monthKey:d.monthKey}),r.push(d)}return console.log("\ud83d\udd0d CASHFLOW PROJECTION [".concat(u,"] - PROYECCI\xd3N FINAL COMPLETA:"),{totalMonths:r.length,julio2026:r.find(e=>"2026-07"===e.monthKey),agosto2026:r.find(e=>"2026-08"===e.monthKey),timestamp:(new Date).toISOString()}),r},[n,h,p,b,o,l,c,d,i,_]),k=(0,t.useMemo)(()=>{if(!S)return null;const e=S.reduce((e,t)=>e+t.revenue,0),t=S.reduce((e,t)=>e+t.expenses,0),r=S.reduce((e,t)=>e+t.realExpenses,0),n=e-r,a=Math.min(...S.map(e=>e.cumulativeBalance)),s=Math.max(...S.map(e=>e.cumulativeBalance)),i=S.filter(e=>e.netCashFlow>0).length,o=S.filter(e=>e.netCashFlow<0).length;return{totalRevenue:e,totalPlannedExpense:e,totalCommittedExpenses:t,totalRealExpenses:r,totalExpenses:t,totalNetCashFlow:n,maxCashOutflow:a,maxCashInflow:s,positiveMonths:i,negativeMonths:o,averageMonthlyRevenue:e/S.length,averageMonthlyExpenses:t/S.length,averageMonthlyRealExpenses:r/S.length,projectDuration:S.length}},[S]),A=e=>{if(null===e||void 0===e||isNaN(e))return"$0,00";const t=new Intl.NumberFormat("es-MX",{minimumFractionDigits:2,maximumFractionDigits:3}).format(e);return"$".concat(t)},E=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",C=e=>e>0?"text-green-700":e<0?"text-red-700":"text-gray-700";return n?(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-2xl shadow-lg p-8 mb-8 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-emerald-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udcb0"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-4xl font-bold mb-3 text-gray-800",children:"Proyecci\xf3n de Flujo de Caja"}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:"An\xe1lisis financiero del proyecto seg\xfan PMBOK v7 - Gesti\xf3n de Costos"}),(0,At.jsxs)("div",{className:"mt-4 flex items-center space-x-6 text-sm text-gray-700",children:[(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udcca"}),(0,At.jsxs)("span",{children:["Proyecto: ",n.name]})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udcc5"}),(0,At.jsxs)("span",{children:["Per\xedodo: ",h," meses"]})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udcb5"}),(0,At.jsxs)("span",{children:["Presupuesto: $",(n.budget/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udee1\ufe0f"}),(0,At.jsxs)("span",{children:["Reserva: $",((n.contingencyReserve+n.managementReserve)/1e3).toFixed(0),"K"]})]})]})]})]}),(0,At.jsx)("div",{className:"flex items-center space-x-4",children:(0,At.jsx)("button",{onClick:()=>{if(!S)return;const e=[["Mes","Gasto Planificado","Gasto Comprometido (OCs)","Gasto Real","Saldo Acumulado"],...S.map(e=>[e.monthLabel,A(e.revenue),A(e.expenses),A(e.realExpenses),A(e.cumulativeBalance)])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="proyeccion-flujo-caja-".concat((null===n||void 0===n?void 0:n.name)||"proyecto",".csv"),s.click(),window.URL.revokeObjectURL(a),y("cash_flow","projection_exported",{projectId:r,period:h,startDate:p})},className:"px-6 py-3 bg-white text-green-700 rounded-xl hover:bg-green-50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 font-semibold border border-green-200",children:"\ud83d\udcca Exportar"})})]})})]}),k&&(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-orange-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:A(k.totalRevenue)}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Gasto Planificado Total"})]}),(0,At.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-red-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:A(k.totalExpenses)}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Gastos Totales"})]}),(0,At.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc9"})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold ".concat(E(k.totalNetCashFlow)),children:A(k.totalNetCashFlow)}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Flujo Neto"})]}),(0,At.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"text-2xl font-bold ".concat(C(k.maxCashOutflow)),children:A(k.maxCashOutflow)}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"M\xe1ximo D\xe9ficit"})]}),(0,At.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,At.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"})})]})})]}),(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcc5 Per\xedodo de Proyecci\xf3n (meses)"}),(0,At.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",children:[(0,At.jsx)("option",{value:"6",children:"6 meses"}),(0,At.jsx)("option",{value:"12",children:"12 meses"}),(0,At.jsx)("option",{value:"18",children:"18 meses"}),(0,At.jsx)("option",{value:"24",children:"24 meses"}),(0,At.jsx)("option",{value:"36",children:"36 meses"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\ude80 Fecha de Inicio"}),(0,At.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors"})]}),(0,At.jsx)("div",{className:"flex items-end",children:(0,At.jsx)("button",{onClick:()=>v(!0),className:"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-sm hover:shadow-md",children:"\u2699\ufe0f Configuraci\xf3n Avanzada"})})]})}),S&&(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcca Proyecci\xf3n Mensual de Flujo de Caja"})}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full",children:[(0,At.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mes"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gasto Planificado"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gasto Comprometido (OCs)"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gasto Real"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo Acumulado"}),(0,At.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),(0,At.jsx)("tbody",{className:"divide-y divide-gray-100",children:S.map(e=>("2026-07"!==e.monthKey&&"2026-08"!==e.monthKey||console.log("\ud83d\udd0d CASHFLOW RENDER [".concat(u,"] - RENDERIZANDO ").concat(e.monthKey,":"),{monthLabel:e.monthLabel,revenue:e.revenue,formattedRevenue:A(e.revenue),monthObject:e}),(0,At.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,At.jsxs)("td",{className:"px-6 py-4",children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:e.monthLabel}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["Mes ",e.month]})]}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("div",{className:"text-orange-600 font-medium",children:A(e.revenue)})}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("div",{className:"text-blue-600 font-medium",children:A(e.expenses)})}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("div",{className:"text-red-600 font-medium",children:A(e.realExpenses)})}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("div",{className:"font-medium ".concat(C(e.cumulativeBalance)),children:A(e.cumulativeBalance)})}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.cumulativeBalance>0?"bg-green-100 text-green-800":e.cumulativeBalance<0?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.cumulativeBalance>0?"\u2705 Positivo":e.cumulativeBalance<0?"\u26a0\ufe0f D\xe9ficit":"\u2696\ufe0f Equilibrio"})})]},e.month)))})]})})]}),S&&(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 mt-8",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"\ud83d\udcc8 Gr\xe1fico de Flujo de Caja"}),(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"\ud83d\udcb0 Flujo Neto Mensual"}),(0,At.jsx)("div",{className:"h-48 flex items-end justify-between space-x-2",children:S.map(e=>{const t=Math.max(...S.map(e=>Math.abs(e.netCashFlow)));let r=0;return t>0&&(r=Math.abs(e.netCashFlow)/t*192),0===e.netCashFlow&&(r=2),(0,At.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-500 mb-2 text-center",children:e.monthLabel.slice(0,3)}),(0,At.jsx)("div",{className:"w-full rounded-t transition-all duration-300 ".concat(e.netCashFlow>0?"bg-green-500":e.netCashFlow<0?"bg-red-500":"bg-gray-400"),style:{height:"".concat(r,"px")}}),(0,At.jsx)("div",{className:"text-xs font-medium mt-1 ".concat(E(e.netCashFlow)),children:A(e.netCashFlow)})]},"net-".concat(e.month))})})]}),(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"\ud83d\udcca Saldo Acumulado (L\xednea de Tiempo)"}),(0,At.jsxs)("div",{className:"h-48 relative",children:[(0,At.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 ".concat(100*S.length," 200"),children:[(0,At.jsx)("line",{x1:"0",y1:"100",x2:100*S.length,y2:"100",stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"5,5"}),(()=>{const e=Math.min(...S.map(e=>e.cumulativeBalance)),t=Math.max(...S.map(e=>e.cumulativeBalance)),r=t-e,n=S.map((t,n)=>{const a=200-180*(r>0?(t.cumulativeBalance-e)/r:.5);return"".concat(100*n+50,",").concat(a)}).join(" ");return(0,At.jsx)("polyline",{points:n,fill:"none",stroke:"#3b82f6",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})(),(()=>{const e=Math.min(...S.map(e=>e.cumulativeBalance)),t=Math.max(...S.map(e=>e.cumulativeBalance)),r=t-e;return S.map((t,n)=>{const a=200-180*(r>0?(t.cumulativeBalance-e)/r:.5);return(0,At.jsx)("circle",{cx:100*n+50,cy:a,r:"4",fill:t.cumulativeBalance>0?"#10b981":t.cumulativeBalance<0?"#ef4444":"#6b7280",stroke:"white",strokeWidth:"2"},"point-".concat(t.month))})})()]}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-4",children:S.map(e=>(0,At.jsx)("div",{className:"text-xs text-gray-500",children:e.monthLabel.slice(0,3)},"label-".concat(e.month)))})]})]})]})]}),g&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,At.jsxs)("div",{className:"p-8",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"\u2699\ufe0f Configuraci\xf3n de Proyecci\xf3n"}),(0,At.jsx)("button",{onClick:()=>v(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcca T\xe9rminos de Pago para \xd3rdenes de Compra"}),(0,At.jsxs)("select",{value:b.paymentTerms,onChange:e=>x({projectId:b.projectId,startDate:b.startDate,endDate:b.endDate,paymentTerms:e.target.value,revenueRecognition:b.revenueRecognition,expenseTiming:b.expenseTiming,cashFlowBuffer:b.cashFlowBuffer}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",children:[(0,At.jsx)("option",{value:"net30",children:"Net 30 d\xedas"}),(0,At.jsx)("option",{value:"net60",children:"Net 60 d\xedas"}),(0,At.jsx)("option",{value:"net90",children:"Net 90 d\xedas"}),(0,At.jsx)("option",{value:"advance",children:"Anticipado (15 d\xedas antes)"}),(0,At.jsx)("option",{value:"milestone",children:"Por hitos"})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Define cu\xe1ndo se registran los gastos de las \xf3rdenes de compra en el flujo de caja"}),(0,At.jsxs)("div",{className:"text-xs text-gray-400 mt-2 space-y-1",children:[(0,At.jsxs)("div",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Por hitos:"})," Usa la fecha de aprobaci\xf3n directamente"]}),(0,At.jsxs)("div",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Net 30/60/90:"})," Fecha de aprobaci\xf3n + d\xedas de pago"]}),(0,At.jsxs)("div",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Anticipado:"})," Fecha de aprobaci\xf3n - 15 d\xedas"]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcc8 Reconocimiento de Ingresos"}),(0,At.jsxs)("select",{value:b.revenueRecognition,onChange:e=>x({projectId:b.projectId,startDate:b.startDate,endDate:b.endDate,paymentTerms:b.paymentTerms,revenueRecognition:e.target.value,expenseTiming:b.expenseTiming,cashFlowBuffer:b.cashFlowBuffer}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",children:[(0,At.jsx)("option",{value:"uniform",children:"Distribuci\xf3n Uniforme"}),(0,At.jsx)("option",{value:"percentage_completion",children:"Por Progreso del Proyecto"})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"C\xf3mo se distribuye el presupuesto del proyecto a lo largo del tiempo"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t mt-8",children:[(0,At.jsx)("button",{onClick:()=>v(!1),className:"px-6 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-colors font-medium",children:"Cancelar"}),(0,At.jsx)("button",{onClick:()=>v(!1),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"\ud83d\udcbe Guardar Configuraci\xf3n"})]})]})})})]}):(0,At.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,At.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[(0,At.jsx)("div",{className:"text-6xl mb-6",children:"\ud83d\udcb0"}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-700 mb-2",children:"Proyecto no seleccionado"}),(0,At.jsx)("div",{className:"text-gray-500",children:"Selecciona un proyecto para ver la proyecci\xf3n de flujo de caja"})]})})})},X0=e=>{let{orphanedTasks:r,availableMilestones:n,onReassign:a,updateMinutaTaskHito:i}=e;const[o,l]=(0,t.useState)({});return 0===r.length?null:(0,At.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsxs)("h3",{className:"text-yellow-800 font-semibold flex items-center",children:[(0,At.jsx)("span",{className:"mr-2",children:"\u26a0\ufe0f"}),"Tareas de Minuta sin Hito Asignado"]}),(0,At.jsxs)("span",{className:"text-sm bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full",children:[r.length," tareas"]})]}),(0,At.jsx)("p",{className:"text-yellow-700 text-sm mb-3",children:"Estas tareas perdieron su hito asignado. Reas\xedgnalas para mantener la organizaci\xf3n."}),(0,At.jsx)("div",{className:"space-y-2",children:r.map(e=>{const t=Math.ceil((new Date(e.fecha)-new Date)/864e5),r=t<=3?"text-red-600 bg-red-100":t<=7?"text-orange-600 bg-orange-100":"text-yellow-600 bg-yellow-100";return(0,At.jsx)("div",{className:"bg-white p-3 rounded border border-yellow-200",children:(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.tarea}),(0,At.jsxs)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full flex items-center",children:[(0,At.jsx)("span",{className:"mr-1",children:"\ud83d\udcdd"}),"Minuta"]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,At.jsxs)("span",{children:["\ud83d\udc64 ",e.responsable]}),(0,At.jsxs)("span",{children:["\ud83d\udcc5 ",new Date(e.fecha).toLocaleDateString("es-ES")]}),(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Completado"===e.estatus?"bg-green-100 text-green-800":"En Proceso"===e.estatus?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.estatus})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(r),children:0===t?"Hoy":1===t?"Ma\xf1ana":"".concat(t," d\xedas")}),(0,At.jsxs)("select",{value:e.hitoId||"",onChange:t=>(async(e,t)=>{if(t){l(t=>(0,s.A)((0,s.A)({},t),{},{[e]:!0}));try{await i(e,t)?(a(e,t),alert("\u2705 Tarea reasignada exitosamente")):alert("\u274c Error al reasignar tarea")}catch(r){console.error("Error en reasignaci\xf3n:",r),alert("\u274c Error al reasignar tarea")}finally{l(t=>(0,s.A)((0,s.A)({},t),{},{[e]:!1}))}}})(e.id,t.target.value),disabled:o[e.id],className:"text-xs border border-gray-300 rounded px-2 py-1 min-w-[200px]",children:[(0,At.jsx)("option",{value:"",children:"Seleccionar hito..."}),n.map(e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id))]}),o[e.id]&&(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600"})]})]})},e.id)})})]})},J0=e=>{var n;let{projects:a,currentProjectId:i,setCurrentProjectId:o,workPackages:l,setWorkPackages:c,risks:d,setRisks:u,reportingDate:h,setReportingDate:f,tasks:p,setTasks:m,importTasks:g,includeWeekends:v,setIncludeWeekends:b,purchaseOrders:x,setPurchaseOrders:y,advances:w,setAdvances:j,invoices:N,setInvoices:_,contracts:S,setContracts:k,resourceAssignments:A,useSupabase:E=!1,updateProjectMinutas:C}=e;const{permissions:T,isReadOnly:P}=Ot(),[D,O]=(0,t.useState)("summary"),[I,M]=(0,t.useState)(null),[R,L]=(0,t.useState)([]),[F,B]=(0,t.useState)([]),[z,U]=(0,t.useState)(!1),q=[{id:"summary",name:"Dashboard Resumen",icon:"\ud83d\udcca",requiresEdit:!1},{id:"risks",name:"Gesti\xf3n de Riesgos",icon:"\ud83d\udee1\ufe0f",requiresEdit:!0},{id:"schedule",name:"Cronograma",icon:"\ud83d\udcc5",requiresEdit:!0},{id:"financial",name:"Gesti\xf3n Financiera",icon:"\ud83d\udcb0",requiresEdit:!0},{id:"resources",name:"Gesti\xf3n de Recursos",icon:"\ud83d\udc65",requiresEdit:!0},{id:"changes",name:"Control de Cambios",icon:"\ud83d\udd04",requiresEdit:!0},{id:"cashflow",name:"Flujo de Caja",icon:"\ud83d\udcb8",requiresEdit:!1},{id:"files",name:"Archivos",icon:"\ud83d\udcce",requiresEdit:!1},{id:"audit",name:"Auditor\xeda Documental",icon:"\ud83d\udccb",requiresEdit:!1}].filter(e=>!e.requiresEdit||!P());(0,t.useEffect)(()=>{const e=e=>{const t=e.detail;t&&t!==D&&O(t)};return window.addEventListener("changeTab",e),()=>{window.removeEventListener("changeTab",e)}},[D]),(0,t.useEffect)(()=>{const e=e=>{const{tareaId:t,newStatus:r,projectId:n}=e.detail;n===i&&(console.log("\ud83d\udd04 ProjectManagementTabs: Actualizando estado de minuta:",{tareaId:t,newStatus:r}),B(e=>e.map(e=>e.id===t?(0,s.A)((0,s.A)({},e),{},{estatus:r}):e)))};return window.addEventListener("minutaStatusChanged",e),()=>{window.removeEventListener("minutaStatusChanged",e)}},[i]),(0,t.useEffect)(()=>{const e=q.map(e=>e.id);e.includes(D)||e.length>0&&O(e[0])},[q,D]),(0,t.useEffect)(()=>{(async()=>{if(i){U(!0);try{if(E){console.log("\ud83d\udd0d DEBUG: Cargando minutas para proyecto:",i);const{default:e}=await Promise.resolve().then(r.bind(r,9874)),{success:t,minutas:n}=await e.loadMinutasByProject(i);t?(console.log("\ud83d\udd0d DEBUG: Minutas recibidas de Supabase:",n),B(n),console.log("\u2705 Minutas cargadas desde Supabase: ".concat(n.length))):(console.warn("\u26a0\ufe0f Error cargando minutas desde Supabase"),B([]))}else{var e;const t=(null===(e=JSON.parse(localStorage.getItem("portfolioData")||"{}").minutasByProject)||void 0===e?void 0:e[i])||[];B(t),C&&C(i,t),console.log("\u2705 Minutas cargadas desde localStorage: ".concat(t.length))}}catch(t){console.error("\u274c Error cargando minutas:",t),B([])}finally{U(!1)}}})()},[i,E]);const W=(e,t)=>{if(!e||!t)return 0;const r=e.progress||0;return console.log("\ud83c\udfaf C\xc1LCULO PROGRESO HITO CORREGIDO:",{milestoneName:e.name,milestoneId:e.id,milestoneProgress:r,milestoneStatus:e.status,milestoneProgressField:e.progress}),r},H=(e,t)=>e&&t?e.filter(e=>{const r=t.find(t=>t.id===e.hitoId&&t.isMilestone);return!r}):[],V=async(e,t)=>{try{if(E){const{default:n}=await Promise.resolve().then(r.bind(r,9874)),{success:a}=await n.updateMinuta(e,{milestone_id:t});if(!a)throw new Error("Error actualizando en Supabase")}else{var n;const r=JSON.parse(localStorage.getItem("portfolioData")||"{}"),a=((null===(n=r.minutasByProject)||void 0===n?void 0:n[i])||[]).map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{hitoId:t}):r);r.minutasByProject=(0,s.A)((0,s.A)({},r.minutasByProject),{},{[i]:a}),localStorage.setItem("portfolioData",JSON.stringify(r))}return B(r=>r.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{hitoId:t}):r)),!0}catch(a){return console.error("Error actualizando tarea de minuta:",a),!1}},G=(e,t)=>{const r=(e=>{if(!e)return[];const t=new Date,r=new Date;r.setDate(t.getDate()+15);const n=e.filter(e=>{if(e.isMilestone)return!1;if(e.progress>=100)return!1;const n=new Date(e.endDate);return n<t||n>=t&&n<=r}),a={},s=e.filter(e=>e.isMilestone).sort((e,t)=>new Date(e.startDate)-new Date(t.startDate));return s.forEach(e=>{const t=new Date(e.startDate),r=n.filter(e=>new Date(e.endDate)<=t),s=new Set;Object.values(a).forEach(e=>{e.tasks.forEach(e=>s.add(e.id))});const i=r.filter(e=>!s.has(e.id));i.length>0&&(a[e.id]={milestone:e,tasks:i})}),console.log("\ud83c\udfaf TAREAS AGRUPADAS POR HITO (CORREGIDO):",{tasksNearDeadline:n.length,tasksByMilestone:Object.keys(a).length,details:Object.values(a).map(e=>({milestoneName:e.milestone.name,milestoneId:e.milestone.id,tasksCount:e.tasks.length,tasksNames:e.tasks.map(e=>e.name)}))}),Object.values(a)})(e),n=((e,t)=>{if(!t||0===t.length)return[];const r=new Date,n=new Date;n.setDate(r.getDate()+15);const a=t.filter(e=>{if("Completado"===e.estatus)return!1;const t=new Date(e.fecha);return t<r||t>=r&&t<=n}),s={};return a.forEach(t=>{const r=e.find(e=>e.id===t.hitoId&&e.isMilestone);if(r){s[r.id]||(s[r.id]={milestone:r,tasks:[]});const e={id:t.id,name:t.tarea,endDate:t.fecha,progress:"Completado"===t.estatus?100:"En Proceso"===t.estatus?50:0,responsable:t.responsable,estatus:t.estatus,source:"minuta"};s[r.id].tasks.push(e)}}),Object.values(s)})(e,t),a=r.map(e=>(0,s.A)((0,s.A)({},e),{},{source:"cronograma",tasks:e.tasks.map(e=>(0,s.A)((0,s.A)({},e),{},{source:"cronograma"}))})),i=n.map(e=>(0,s.A)((0,s.A)({},e),{},{source:"minuta",tasks:e.tasks.map(e=>(0,s.A)((0,s.A)({},e),{},{source:"minuta"}))})),o=[...a,...i],l={};o.forEach(e=>{const t=e.milestone.id;l[t]||(l[t]={milestone:e.milestone,tasks:[]}),l[t].tasks.push(...e.tasks)});const c=Object.values(l).sort((e,t)=>new Date(e.milestone.startDate)-new Date(t.milestone.startDate));return console.log("\ud83c\udfaf HITOS ORDENADOS POR FECHA:",{totalGroups:c.length,order:c.map(e=>({milestoneName:e.milestone.name,milestoneDate:e.milestone.startDate,tasksCount:e.tasks.length}))}),c},K=(null===a||void 0===a?void 0:a.find(e=>e.id===i))||a[0],$=Array.isArray(l)?l:[],Y=(0,t.useMemo)(()=>(console.log("\ud83d\udd04 ProjectManagementTabs - Recalculando projectTasks:",(null===p||void 0===p?void 0:p.length)||0),Array.isArray(p)?p:[]),[p]),X=Array.isArray(x)?x:[],J=Array.isArray(w)?w:[],Z=Array.isArray(N)?N:[],Q=Array.isArray(S)?S:[],ee=Array.isArray(d)?d:[],te=(Array.isArray(A),(0,t.useMemo)(()=>a?a.filter(e=>"active"===e.status).sort((e,t)=>e.name.localeCompare(t.name,void 0,{numeric:!0,sensitivity:"base"})):[],[a])),re=(()=>{if(!K)return{};const e=Array.isArray(p)?p:[];if(0===e.length)return{percentComplete:0};const t=e.filter(e=>!e.isMilestone);if(0===t.length)return{percentComplete:0};const r=t.reduce((e,t)=>e+(t.progress||0),0),n=Math.round(r/t.length);if(Array.isArray($)&&$.length>0){const e=$.reduce((e,t)=>e+(t.budget||0),0),t=$.reduce((e,t)=>e+(t.plannedValue||0),0),r=$.reduce((e,t)=>e+(t.earnedValue||0),0),a=$.reduce((e,t)=>e+(t.actualCost||0),0);return{BAC:e,PV:t,EV:r,AC:a,CV:r-a,SV:r-t,CPI:a>0?r/a:0,SPI:t>0?r/t:0,percentComplete:n,percentSpent:e>0?a/e*100:0}}return{percentComplete:n}})(),ne=(()=>{if(!p||0===p.length)return null;const e=p.filter(e=>!e.startDate||null===e.startDate||void 0===e.startDate);e.length>0&&console.log("\u26a0\ufe0f Tareas con fechas de inicio inv\xe1lidas:",e.map(e=>({id:e.id,name:e.name,startDate:e.startDate,isMilestone:e.isMilestone})));const t=p.filter(e=>e.startDate&&null!==e.startDate&&void 0!==e.startDate).map(e=>new Date(e.startDate)).filter(e=>!isNaN(e.getTime()));if(0===t.length)return console.log("\u26a0\ufe0f No se encontraron fechas de inicio v\xe1lidas"),null;const r=new Date(Math.min(...t));return isNaN(r.getTime())?(console.log("\u26a0\ufe0f Fecha m\xednima calculada es inv\xe1lida"),null):(console.log("\u2705 Fecha de inicio calculada:",r.toISOString().split("T")[0]),r.toISOString().split("T")[0])})(),ae=(()=>{if(!p||0===p.length)return null;const e=p.filter(e=>!e.endDate||null===e.endDate||void 0===e.endDate);e.length>0&&console.log("\u26a0\ufe0f Tareas con fechas de fin inv\xe1lidas:",e.map(e=>({id:e.id,name:e.name,endDate:e.endDate,isMilestone:e.isMilestone})));const t=p.filter(e=>e.endDate&&null!==e.endDate&&void 0!==e.endDate).map(e=>new Date(e.endDate)).filter(e=>!isNaN(e.getTime()));if(0===t.length)return console.log("\u26a0\ufe0f No se encontraron fechas de fin v\xe1lidas"),null;const r=new Date(Math.max(...t));return isNaN(r.getTime())?(console.log("\u26a0\ufe0f Fecha m\xe1xima calculada es inv\xe1lida"),null):(console.log("\u2705 Fecha de fin calculada:",r.toISOString().split("T")[0]),r.toISOString().split("T")[0])})();return K?(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-100/30 rounded-full -translate-y-16 translate-x-16"}),(0,At.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-purple-100/30 rounded-full translate-y-12 -translate-x-12"}),(0,At.jsx)("div",{className:"relative z-10",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm",children:(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udcca"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800",children:K.name}),(0,At.jsx)("p",{className:"text-gray-600 text-lg",children:K.description||"Gesti\xf3n integral del proyecto - PMBOK v7"}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-700",children:[(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\ud83d\udc64"}),(0,At.jsx)("span",{children:K.manager})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-yellow-600",children:"\ud83d\udcb0"}),(0,At.jsxs)("span",{children:["$",(K.budget/1e3).toFixed(0),"K"]})]}),(0,At.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-green-500",children:"\ud83d\udcbc"}),(0,At.jsxs)("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-800 ml-2",children:[(null===(n=re.percentComplete)||void 0===n?void 0:n.toFixed(1))||0,"% completado"]})]})]}),(0,At.jsx)("div",{className:"mt-3",children:(0,At.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)("span",{className:"text-green-600 text-lg",children:"\ud83d\udcbc"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"Caso de Negocio"}),(0,At.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:K.businessCase||"Sin caso de negocio definido"})]})]})})})]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Fecha de Reporte"}),(0,At.jsx)("input",{type:"date",value:h,onChange:e=>f(e.target.value),className:"px-3 py-1 rounded bg-white text-gray-800 text-sm border border-gray-300 shadow-sm"})]})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Proyecto Activo"}),(0,At.jsx)("div",{className:"px-4 py-2 rounded-lg text-sm font-medium ".concat(E?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"),children:E?"\ud83d\udfe2 Estado: Online":"\ud83d\udd34 Estado: Offline"})]}),(0,At.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"",disabled:!0,children:"Seleccionar proyecto activo"}),te.map(e=>(0,At.jsxs)("option",{value:e.id,children:[e.name," - ",e.manager]},e.id))]}),i&&(0,At.jsx)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center text-green-800 text-sm",children:[(0,At.jsx)("span",{className:"mr-2",children:"\u2705"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"Filtrado por proyecto implementado:"})," Todas las pesta\xf1as muestran \xfanicamente la informaci\xf3n de",(0,At.jsxs)("strong",{children:[" ",null===K||void 0===K?void 0:K.name]}),". Los datos de otros proyectos NO se incluyen en las m\xe9tricas ni en los m\xf3dulos."]})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,At.jsx)("div",{className:"border-b border-gray-200",children:(0,At.jsx)("nav",{className:"flex flex-wrap gap-1 px-4 overflow-x-auto scrollbar-hide tab-container",children:q.map(e=>(0,At.jsxs)("button",{onClick:()=>O(e.id),className:"\n                  py-3 px-2 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap min-w-fit\n                  ".concat(D===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n                "),children:[(0,At.jsx)("span",{className:"mr-1 sm:mr-2",children:e.icon}),(0,At.jsx)("span",{className:"hidden sm:inline",children:e.name}),(0,At.jsx)("span",{className:"sm:hidden",children:e.name.split(" ")[0]})]},e.id))})}),(0,At.jsxs)("div",{children:["summary"===D&&(0,At.jsxs)("div",{className:"space-y-8",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\ud83d\udcca Dashboard Resumen"}),(0,At.jsxs)("p",{className:"text-indigo-100 text-lg",children:[(null===K||void 0===K?void 0:K.name)||"Proyecto no seleccionado"," - Vista ejecutiva del estado del proyecto"]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcc8"}),"Informaci\xf3n del Proyecto"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Presupuesto"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-blue-800",children:["$",(((null===K||void 0===K?void 0:K.budget)||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-blue-600 mt-1",children:"Presupuesto asignado"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"}),(0,At.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Inicio"})]}),(0,At.jsx)("div",{className:"text-xl font-bold text-green-800",children:ne?new Date(ne).toLocaleDateString("es-ES"):"N/A"}),(0,At.jsx)("div",{className:"text-sm text-green-600 mt-1",children:"Fecha de inicio del cronograma"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83c\udfc1"}),(0,At.jsx)("span",{className:"text-sm font-medium text-purple-600",children:"Fin"})]}),(0,At.jsx)("div",{className:"text-xl font-bold text-purple-800",children:ae?new Date(ae).toLocaleDateString("es-ES"):"N/A"}),(0,At.jsx)("div",{className:"text-sm text-purple-600 mt-1",children:"Fecha de fin del cronograma"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb3"}),"Gesti\xf3n Financiera"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-lg border border-emerald-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udccb"}),(0,At.jsx)("span",{className:"text-sm font-medium text-emerald-600",children:"\xd3rdenes de Compra"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-emerald-800",children:["$",(((null===X||void 0===X?void 0:X.reduce((e,t)=>e+(t.totalAmount||0),0))||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-emerald-600 mt-1",children:"Monto en OC aprobadas"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-lg border border-amber-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb8"}),(0,At.jsx)("span",{className:"text-sm font-medium text-amber-600",children:"Anticipos"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-amber-800",children:["$",(((null===J||void 0===J?void 0:J.reduce((e,t)=>e+(t.amount||0),0))||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-amber-600 mt-1",children:"Anticipos solicitados"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 p-6 rounded-lg border border-cyan-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83e\uddfe"}),(0,At.jsx)("span",{className:"text-sm font-medium text-cyan-600",children:"Facturas"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-cyan-800",children:["$",(((null===Z||void 0===Z?void 0:Z.reduce((e,t)=>e+(t.amount||0),0))||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-cyan-600 mt-1",children:"Facturas ingresadas"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udee1\ufe0f"}),"Reservas y Riesgos"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,At.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Reserva de Contingencia"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-orange-800",children:["$",(.05*((null===K||void 0===K?void 0:K.budget)||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-orange-600 mt-1",children:"5% del presupuesto total"})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-6 rounded-lg border border-pink-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"}),(0,At.jsx)("span",{className:"text-sm font-medium text-pink-600",children:"Reserva de Gesti\xf3n"})]}),(0,At.jsxs)("div",{className:"text-3xl font-bold text-pink-800",children:["$",(.1*((null===K||void 0===K?void 0:K.budget)||0)/1e3).toFixed(0),"K"]}),(0,At.jsx)("div",{className:"text-sm text-pink-600 mt-1",children:"10% del presupuesto total"})]})]}),(0,At.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-lg border border-red-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udea8"}),(0,At.jsx)("span",{className:"text-sm font-medium text-red-600",children:"Principales Riesgos"})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[null===ee||void 0===ee?void 0:ee.slice(0,3).map((e,t)=>{const r=(e.probability||0)*(e.costImpact||0);return(0,At.jsxs)("div",{className:"p-3 bg-white rounded-lg border",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("span",{className:"w-3 h-3 rounded-full ".concat("high"===e.priority?"bg-red-500":"medium"===e.priority?"bg-yellow-500":"bg-green-500")}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-800 truncate",children:e.name})]}),(0,At.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.priority})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,At.jsx)("span",{children:"Costo probable:"}),(0,At.jsxs)("span",{className:"font-semibold text-red-600",children:["$",(r/1e3).toFixed(1),"K"]})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-1",children:[(0,At.jsxs)("span",{children:["Prob: ",(100*(e.probability||0)).toFixed(0),"%"]}),(0,At.jsxs)("span",{children:["Impacto: $",((e.costImpact||0)/1e3).toFixed(0),"K"]})]})]},e.id)}),(!ee||0===ee.length)&&(0,At.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No hay riesgos registrados"})]})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\ud83c\udfaf"}),"Hitos del Proyecto"]}),(0,At.jsxs)("span",{className:"text-sm bg-purple-100 text-purple-800 px-3 py-1 rounded-full",children:[(null===Y||void 0===Y?void 0:Y.filter(e=>e.isMilestone).length)||0," hitos"]})]}),(0,At.jsxs)("div",{className:"space-y-4 max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[(()=>{const e=(null===Y||void 0===Y?void 0:Y.filter(e=>e.isMilestone))||[];return console.log("\ud83c\udfaf Dashboard - Hitos actualizados:",e.map(e=>({id:e.id,name:e.name,startDate:e.startDate,endDate:e.endDate}))),e})().sort((e,t)=>new Date(e.startDate||e.endDate||"1900-01-01")-new Date(t.startDate||t.endDate||"1900-01-01")).map((e,t)=>(0,At.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg border border-gray-200",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("div",{className:"w-4 h-4 rounded-full ".concat("completed"===e.status?"bg-green-500":"in-progress"===e.status?"bg-yellow-500":"delayed"===e.status?"bg-red-500":"bg-gray-400")}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"font-semibold text-gray-800",children:[e.name,(0,At.jsxs)("span",{className:"ml-2 text-sm font-medium text-blue-600",children:["[",W(e,Y),"%]"]})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:e.endDate?new Date(e.endDate).toLocaleDateString("es-ES"):"Sin fecha"})]})]}),(0,At.jsx)("div",{className:"flex items-center space-x-2",children:T.canEdit?(0,At.jsxs)("select",{value:e.status||"in-progress",onChange:t=>{const r=t.target.value;console.log("\ud83c\udfaf CAMBIO DE ESTADO DE HITO:",{milestoneId:e.id,milestoneName:e.name,oldStatus:e.status,newStatus:r,currentProjectId:i});const n=Y.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},t),{},{status:r}):t);console.log("\ud83c\udfaf TAREAS ACTUALIZADAS:",{totalTasks:n.length,milestoneTasks:n.filter(e=>e.isMilestone).length,updatedMilestone:n.find(t=>t.id===e.id)}),m(n)},className:"px-3 py-1 rounded-full text-xs font-medium border-0 focus:ring-2 focus:ring-blue-500 ".concat("completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-yellow-100 text-yellow-800":"delayed"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:[(0,At.jsx)("option",{value:"in-progress",className:"bg-yellow-100 text-yellow-800",children:"En Proceso"}),(0,At.jsx)("option",{value:"completed",className:"bg-green-100 text-green-800",children:"Realizado"}),(0,At.jsx)("option",{value:"delayed",className:"bg-red-100 text-red-800",children:"Atrasado"})]}):(0,At.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-yellow-100 text-yellow-800":"delayed"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:["completed"===e.status?"Realizado":"in-progress"===e.status?"En Proceso":"delayed"===e.status?"Atrasado":"Pendiente",(0,At.jsx)("span",{className:"ml-1 text-gray-500",children:"\ud83d\udc40"})]})})]})},e.id)),(!Y||0===Y.filter(e=>e.isMilestone).length)&&(0,At.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,At.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83c\udfaf"}),(0,At.jsx)("p",{children:"No hay hitos definidos para este proyecto"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500",children:[(0,At.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-3xl mr-3",children:"\u26a0\ufe0f"}),"Alerta Tareas por Vencer",(0,At.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"(Vencidas + Pr\xf3ximas a vencer - Cronograma + Minutas)"})]}),(0,At.jsx)("span",{className:"text-sm bg-orange-100 text-orange-800 px-3 py-1 rounded-full",children:(()=>{const e=H(F,Y),t=G(Y,F).reduce((e,t)=>e+t.tasks.length,0)+e.length;return"".concat(t," tareas")})()})]}),(()=>{const e=H(F,Y),t=G(Y,F);return t.length>0||e.length>0?(0,At.jsxs)("div",{className:"space-y-6",children:[e.length>0&&(0,At.jsx)(X0,{orphanedTasks:e,availableMilestones:Y.filter(e=>e.isMilestone),onReassign:(e,t)=>{B(r=>r.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{hitoId:t}):r))},updateMinutaTaskHito:V}),t.map((e,t)=>(0,At.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-4 rounded-lg border border-orange-200",children:[(0,At.jsxs)("div",{className:"flex items-center mb-3",children:[(0,At.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500 mr-3"}),(0,At.jsx)("h3",{className:"font-semibold text-gray-800 text-lg",children:e.milestone.name}),(0,At.jsxs)("span",{className:"ml-2 text-sm text-orange-600",children:["(",e.tasks.length," tareas)"]})]}),(0,At.jsx)("div",{className:"space-y-2",children:e.tasks.map((e,t)=>{const r=Math.ceil((new Date(e.endDate)-new Date)/864e5),n=r<0,a=n?"text-red-700 bg-red-200 border-red-300":0===r?"text-red-600 bg-red-100 border-red-200":r<=3?"text-orange-600 bg-orange-100 border-orange-200":r<=7?"text-yellow-600 bg-yellow-100 border-yellow-200":"text-blue-600 bg-blue-100 border-blue-200";return(0,At.jsx)("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),"cronograma"===e.source?(0,At.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full flex items-center",children:[(0,At.jsx)("span",{className:"mr-1",children:"\ud83d\udccb"}),"Cronograma"]}):(0,At.jsxs)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full flex items-center",children:[(0,At.jsx)("span",{className:"mr-1",children:"\ud83d\udcdd"}),"Minuta"]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600",children:[(0,At.jsxs)("span",{children:["\ud83d\udcc5 ",new Date(e.endDate).toLocaleDateString("es-ES")]}),(0,At.jsxs)("span",{children:["\ud83d\udc64 ",e.assignedTo||e.responsable||"Sin asignar"]}),(0,At.jsxs)("span",{children:["\ud83d\udcca ",e.progress||0,"% completado"]}),e.estatus&&(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Completado"===e.estatus?"bg-green-100 text-green-800":"En Proceso"===e.estatus?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.estatus})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(a),children:n?"Vencida hace ".concat(Math.abs(r)," d\xedas"):0===r?"Vence hoy":1===r?"Vence ma\xf1ana":"Vence en ".concat(r," d\xedas")}),(0,At.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.progress||0,"%")}})})]})]})},e.id)})})]},e.milestone.id))]}):(0,At.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,At.jsx)("span",{className:"text-4xl mb-4 block",children:"\u2705"}),(0,At.jsx)("p",{children:"\xa1Excelente! No hay tareas pr\xf3ximas a vencer"}),(0,At.jsx)("p",{className:"text-sm mt-2",children:"Todas las tareas del cronograma y minutas est\xe1n al d\xeda o completadas"})]})})()]})]}),"risks"===D&&(0,At.jsx)(UQ,{projects:a,currentProjectId:i,setCurrentProjectId:o,risks:ee,setRisks:u,useSupabase:E}),"schedule"===D&&(0,At.jsx)(w0,{tasks:Y,setTasks:m,importTasks:g,projectData:K,onScheduleDataChange:M,includeWeekends:v,setIncludeWeekends:b,useSupabase:E,updateProjectMinutas:C}),"financial"===D&&(0,At.jsx)(j0,{workPackages:$,setWorkPackages:c,currentProject:K,risks:ee,scheduleData:I,includeWeekends:v,purchaseOrders:x,setPurchaseOrders:y,advances:w,setAdvances:j,invoices:N,setInvoices:_,contracts:S,setContracts:k,useSupabase:E}),"resources"===D&&(0,At.jsx)(N0,{projects:a,workPackages:$,currentProject:K,includeWeekends:v}),"changes"===D&&(0,At.jsx)($0,{currentProjectId:i,projects:a,workPackages:$,tasks:Y,purchaseOrders:X,advances:J,invoices:Z,contracts:Q,onUpdateProject:()=>{console.log("Proyecto actualizado por cambio aprobado")}}),"cashflow"===D&&(0,At.jsx)(Y0,{currentProjectId:null===K||void 0===K?void 0:K.id,currentProject:K,projects:a,workPackages:$,tasks:p,purchaseOrders:X,advances:J,invoices:Z,contracts:Q}),"files"===D&&(0,At.jsx)(JH,{projectId:i,category:"general",onFileUploaded:()=>{}}),"audit"===D&&(0,At.jsx)(_0,{projects:a,currentProjectId:i,workPackages:l,risks:d,tasks:p,purchaseOrders:x,advances:w,invoices:N,contracts:S,resourceAssignments:A,useSupabase:E})]})]})]}):(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcca"}),(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Selecciona un Proyecto"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Elige un proyecto activo para ver su gesti\xf3n detallada"})]})},Z0=e=>{let{useSupabase:r,supabaseInitialized:n,isAuthenticated:a}=e;const[s,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=e=>{i(!0),d(new Date),setTimeout(()=>{i(!1)},2e3)},t=e=>{l(!0),h(new Date),setTimeout(()=>{l(!1)},1500)},r=()=>{p(!0),setTimeout(()=>p(!1),3e3)};return window.addEventListener("dataSync",e),window.addEventListener("dataSave",t),window.addEventListener("dataChange",r),()=>{window.removeEventListener("dataSync",e),window.removeEventListener("dataSave",t),window.removeEventListener("dataChange",r)}},[]);const m=void 0!==r;return f||s||o||m?(0,At.jsxs)("div",{className:"fixed bottom-4 left-4 z-50 space-y-2",children:[o&&(0,At.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg shadow-lg bg-orange-500 text-white transition-all duration-300",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:"Guardando..."})]}),s&&(0,At.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg shadow-lg bg-blue-500 text-white transition-all duration-300",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:"Sincronizando..."})]}),m&&!s&&!o&&(0,At.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg shadow-lg text-white transition-all duration-300 ".concat(r&&a?"bg-green-500":r&&!a?"bg-yellow-500":"bg-gray-500"),children:[(0,At.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(r&&a?"bg-white":r&&!a?"bg-orange-300":"bg-white")}),(0,At.jsx)("span",{className:"text-sm font-medium",children:r&&a?"\u2601\ufe0f Nube":r&&!a?"\u26a0\ufe0f Sin autenticar":"\ud83d\udcbe Local"})]}),!s&&!o&&f&&(0,At.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg shadow-lg bg-green-500 text-white transition-all duration-300",children:[(0,At.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,At.jsxs)("span",{className:"text-sm font-medium",children:["Guardado ",u&&"(".concat(u.toLocaleTimeString(),")")]})]})]}):null},Q0=e=>{let{projects:r,workPackagesByProject:n,risksByProject:a,tasksByProject:s,purchaseOrdersByProject:i,advancesByProject:o,invoicesByProject:l,contractsByProject:c,globalResources:d,resourceAssignmentsByProject:u,viewMode:h,currentProjectId:f}=e;const[p,m]=(0,t.useState)([]),[g,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{b()},[]);const b=()=>{const e=localStorage.getItem("mi-dashboard-backups");if(e)try{m(JSON.parse(e))}catch(t){console.error("Error cargando backups:",t)}},x=e=>{localStorage.setItem("mi-dashboard-backups",JSON.stringify(e)),m(e)},y=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(new Date).toISOString(),m={id:"backup-".concat(Date.now()),name:e?"Backup Autom\xe1tico - ".concat((new Date).toLocaleString()):"Backup Manual - ".concat((new Date).toLocaleString()),timestamp:t,data:{projects:r,currentProjectId:f,workPackagesByProject:n,risksByProject:a,tasksByProject:s,purchaseOrdersByProject:i,advancesByProject:o,invoicesByProject:l,contractsByProject:c,globalResources:d,resourceAssignmentsByProject:u,viewMode:h},size:JSON.stringify({projects:r,workPackagesByProject:n,risksByProject:a,tasksByProject:s,purchaseOrdersByProject:i,advancesByProject:o,invoicesByProject:l,contractsByProject:c,globalResources:d,resourceAssignmentsByProject:u}).length,isAutomatic:e},g="mi-dashboard-backup-".concat((new Date).toISOString().split("T")[0],"-").concat(Date.now(),".json"),v=JSON.stringify(m.data,null,2),b=new Blob([v],{type:"application/json"}),y=URL.createObjectURL(b),w=document.createElement("a");w.href=y,w.download=g,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(y);const j=[m,...p].slice(0,10);x(j);const N=new CustomEvent("backupCreated",{detail:{backupId:m.id,isAutomatic:e,timestamp:t,fileName:g}});return window.dispatchEvent(N),m},w=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return g?(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udcbe Gesti\xf3n de Backups"}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:()=>y(!1),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"\ud83d\udce5 Crear Backup Manual"}),(0,At.jsx)("button",{onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const r=JSON.parse(e.target.result);if(window.confirm("\xbfEst\xe1 seguro de importar este backup? Esto reemplazar\xe1 todos los datos actuales.")){const e=new CustomEvent("dataImport",{detail:{fileName:t.name,timestamp:(new Date).toISOString(),data:r}});window.dispatchEvent(e),alert('\u2705 Backup "'.concat(t.name,'" importado exitosamente. Recarga la p\xe1gina para ver los cambios.'))}}catch(r){alert("\u274c Error al importar el backup. Verifique que el archivo sea v\xe1lido."),console.error("Error importing backup:",r)}},e.readAsText(t)}},e.click()},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"\ud83d\udce4 Importar Backup"}),(0,At.jsx)("button",{onClick:()=>v(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"\u2715 Cerrar"})]})]}),(0,At.jsx)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:0===p.length?(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcbe"}),(0,At.jsx)("div",{children:"No hay backups disponibles"}),(0,At.jsx)("div",{className:"text-sm mt-2",children:"Los backups autom\xe1ticos se crean cada 30 minutos"})]}):(0,At.jsx)("div",{className:"space-y-4",children:p.map(e=>{return(0,At.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),e.isAutomatic&&(0,At.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"Autom\xe1tico"})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(0,At.jsxs)("div",{children:["\ud83d\udcc5 ",(t=e.timestamp,new Date(t).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))]}),(0,At.jsxs)("div",{children:["\ud83d\udcca ",w(e.size)]}),(0,At.jsxs)("div",{children:["\ud83c\udd94 ",e.id]})]})]}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:()=>(e=>{const t=p.find(t=>t.id===e);if(t&&window.confirm('\xbfEst\xe1 seguro de restaurar el backup "'.concat(t.name,'"? Esto reemplazar\xe1 todos los datos actuales.'))){const{data:r}=t,n=new CustomEvent("dataRestore",{detail:{backupId:e,backupName:t.name,timestamp:(new Date).toISOString(),data:r}});window.dispatchEvent(n),alert('\u2705 Backup "'.concat(t.name,'" restaurado exitosamente. Recarga la p\xe1gina para ver los cambios.'))}})(e.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",title:"Restaurar este backup",children:"\ud83d\udd04 Restaurar"}),(0,At.jsx)("button",{onClick:()=>(e=>{if(window.confirm("\xbfEst\xe1 seguro de eliminar este backup?")){const t=p.filter(t=>t.id!==e);x(t)}})(e.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",title:"Eliminar este backup",children:"\ud83d\uddd1\ufe0f Eliminar"})]})]})},e.id);var t})})}),(0,At.jsx)("div",{className:"p-6 border-t bg-gray-50",children:(0,At.jsx)("div",{className:"text-sm text-gray-600",children:(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("span",{children:["\ud83d\udcca Total de backups: ",p.length]}),(0,At.jsx)("span",{children:"\ud83d\udd04 Backups autom\xe1ticos cada 30 minutos"}),(0,At.jsx)("span",{children:"\ud83d\udcbe M\xe1ximo 10 backups guardados"})]})})})]})}):null},e1=lV("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),t1=lV("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),r1=()=>{const[e,r]=(0,t.useState)({isInitialized:!1,isSyncing:!1,lastSave:null,lastBackup:null,error:null,isUsingSupabase:!1,supabaseConnected:!1});(0,t.useEffect)(()=>{const e=e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{lastSave:e.detail.timestamp,error:null,isSyncing:!1}))},t=e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{lastBackup:e.detail.timestamp,error:null}))},n=e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{lastSave:e.detail.timestamp,error:null,isSyncing:!1}))},a=e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{error:e.detail.message,isSyncing:!1}))},i=e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{lastSave:e.detail.timestamp,error:null,isSyncing:!1,isUsingSupabase:!0,supabaseConnected:!0}))},o=e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{error:e.detail.message,isSyncing:!1,isUsingSupabase:!0}))},l=e=>{r(e=>(0,s.A)((0,s.A)({},e),{},{isSyncing:!0,isUsingSupabase:!0,error:null}))},c=()=>{const e="true"===localStorage.getItem("useSupabase")||window.location.search.includes("supabase=true")||document.querySelector("[data-supabase-active]")||!0===window.supabaseActive;r(t=>(0,s.A)((0,s.A)({},t),{},{isUsingSupabase:e}))},d=()=>{c()};return window.addEventListener("storage",d),window.addEventListener("fileDataSaved",e),window.addEventListener("autoBackupCreated",t),window.addEventListener("fileDataImported",n),window.addEventListener("filePersistenceError",a),window.addEventListener("supabaseDataSaved",i),window.addEventListener("supabaseError",o),window.addEventListener("supabaseSyncing",l),c(),setTimeout(()=>{r(e=>(0,s.A)((0,s.A)({},e),{},{isInitialized:!0,isSyncing:!e.isUsingSupabase}))},1e3),()=>{window.removeEventListener("fileDataSaved",e),window.removeEventListener("autoBackupCreated",t),window.removeEventListener("fileDataImported",n),window.removeEventListener("filePersistenceError",a),window.removeEventListener("supabaseDataSaved",i),window.removeEventListener("supabaseError",o),window.removeEventListener("supabaseSyncing",l),window.removeEventListener("storage",d)}},[]);const n=e=>e?new Date(e).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Nunca";return(0,At.jsxs)("div",{className:"fixed bottom-4 right-4 bg-white rounded-lg shadow-lg border p-3 z-40",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-1 ".concat(e.error?"text-red-600":e.isUsingSupabase&&e.supabaseConnected?"text-green-600":e.isInitialized&&e.isSyncing?"text-blue-600":e.isInitialized?"text-yellow-600":"text-gray-600"),children:[e.error?(0,At.jsx)(pV,{className:"w-4 h-4"}):e.isUsingSupabase&&e.supabaseConnected?(0,At.jsx)(e1,{className:"w-4 h-4"}):e.isInitialized&&e.isSyncing?(0,At.jsx)(t1,{className:"w-4 h-4"}):e.isInitialized?(0,At.jsx)(fV,{className:"w-4 h-4"}):(0,At.jsx)(t1,{className:"w-4 h-4"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:e.error?e.isUsingSupabase?"Error en Supabase":"Error en archivos":e.isUsingSupabase&&e.isSyncing?"Sincronizando con Supabase":e.isUsingSupabase&&e.supabaseConnected?"Conectado a Supabase":e.isInitialized&&e.isSyncing?"Sincronizando":e.isInitialized?"Inicializado":"Conectando..."})]}),e.isInitialized&&(0,At.jsxs)("div",{className:"text-xs text-gray-500 ml-2",children:[(0,At.jsxs)("div",{children:[e.isUsingSupabase?"\u2601\ufe0f":"\ud83d\udcbe"," ",n(e.lastSave)]}),e.lastBackup&&!e.isUsingSupabase&&(0,At.jsxs)("div",{children:["\ud83d\udce6 ",n(e.lastBackup)]})]})]}),e.error&&(0,At.jsx)("div",{className:"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded",children:e.error})]})},n1=()=>{const[e,r]=(0,t.useState)("idle"),[n,a]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=()=>r("saving"),t=e=>{r("saved"),a(new Date),setTimeout(()=>r("idle"),3e3)},n=()=>{r("error"),setTimeout(()=>r("idle"),5e3)};return window.addEventListener("autoSaveStart",e),window.addEventListener("autoSaveComplete",t),window.addEventListener("autoSaveError",n),window.addEventListener("supabaseSyncing",e),window.addEventListener("supabaseSynced",t),()=>{window.removeEventListener("autoSaveStart",e),window.removeEventListener("autoSaveComplete",t),window.removeEventListener("autoSaveError",n),window.removeEventListener("supabaseSyncing",e),window.removeEventListener("supabaseSynced",t)}},[]);return"idle"!==e||n?(0,At.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,At.jsxs)("div",{className:"\n        px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2\n        transition-all duration-300 ease-in-out\n        ".concat("saving"===e?"bg-blue-500 text-white":"","\n        ").concat("saved"===e?"bg-green-500 text-white":"","\n        ").concat("error"===e?"bg-red-500 text-white":"","\n        ").concat("idle"===e?"bg-gray-200 text-gray-600":"","\n      "),children:["saving"===e&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,At.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,At.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),(0,At.jsx)("span",{children:"Guardando..."})]}),"saved"===e&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,At.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,At.jsx)("span",{children:"Guardado"})]}),"error"===e&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,At.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,At.jsx)("span",{children:"Error al guardar"})]}),"idle"===e&&n&&(0,At.jsxs)("span",{className:"text-sm",children:["Guardado a las ",(e=>e?e.toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"}):"")(n)]})]})}):null},a1=e=>{var r;let{onAuthSuccess:n,onAuthCancel:a}=e;const{login:s,register:i,loading:o}=Pt(),[l]=wt(),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[v,b]=(0,t.useState)(!1),[x,y]=(0,t.useState)(""),[w,j]=(0,t.useState)(""),[N,_]=(0,t.useState)(!1),[S,k]=(0,t.useState)(null);(0,t.useEffect)(()=>{y(""),j("")},[c]),(0,t.useEffect)(()=>{const e=l.get("email"),t="true"===l.get("invited"),r=l.get("org");t&&e&&(_(!0),h(e),d(!1),A(e,r))},[l]);const A=async(e,t)=>{try{const{data:t,error:r}=await kt.default.supabase.from("organization_members").select("\n          role,\n          status,\n          organizations (\n            name\n          )\n        ").eq("user_email",e).eq("status","pending").maybeSingle();t&&k(t)}catch(r){console.error("Error cargando invitaci\xf3n:",r)}},E=()=>{console.log("\u274c Autenticaci\xf3n cancelada por usuario"),a&&a()};return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[(0,At.jsxs)("div",{className:"text-center mb-6",children:[(0,At.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mb-4",children:(0,At.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c?(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}):(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:N?"Completa tu Registro":c?"Iniciar Sesi\xf3n":"Crear Cuenta"}),(0,At.jsx)("p",{className:"text-gray-600",children:N?"Has sido invitado a unirte a nuestra organizaci\xf3n":c?"Accede a tu cuenta de StrategiaPM":"Crea tu cuenta para sincronizar en la nube"})]}),N&&S&&(0,At.jsxs)("div",{className:"invitation-banner",children:[(0,At.jsx)("h3",{children:"\ud83c\udf89 \xa1Has sido invitado!"}),(0,At.jsxs)("p",{children:["Has sido invitado a unirte a"," ",(0,At.jsx)("strong",{children:null===(r=S.organizations)||void 0===r?void 0:r.name})]}),(0,At.jsxs)("p",{className:"invitation-note",children:["Completa tu registro con el email ",(0,At.jsx)("strong",{children:u})," para obtener acceso autom\xe1tico."]})]}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b(!0),y(""),j("");try{let e;if(c){console.log("\ud83d\udd10 Iniciando sesi\xf3n con AuthContext...");try{e=await s(u,f),e&&e.success?(j("\xa1Sesi\xf3n iniciada exitosamente! \ud83c\udf89"),setTimeout(()=>{n&&n(e.user)},1e3)):y("Error al iniciar sesi\xf3n. Verifica tus credenciales.")}catch(t){console.error("\u274c Error en login:",t),y(t.message||"Error al iniciar sesi\xf3n")}}else{if(console.log("\ud83d\udcdd Registrando usuario con AuthContext..."),!m.trim())return y("El nombre es requerido"),void b(!1);try{if(e=await i(u,f,m),e&&e.success){const t=e.invitationActivation;if(t&&t.activated>0){const e=t.organizations.map(e=>e.name).join(", ");j("\xa1Cuenta creada exitosamente! \ud83c\udf89\n\nHas sido agregado autom\xe1ticamente a: ".concat(e,"\n\nYa puedes acceder a los proyectos de tu organizaci\xf3n."))}else j("\xa1Cuenta creada exitosamente! \ud83c\udf89\n\nTu cuenta ha sido configurada y est\xe1 lista para usar.");setTimeout(()=>{n&&n(e.user)},2500)}else y("Error al crear la cuenta. Intenta nuevamente.")}catch(t){console.error("\u274c Error en registro:",t),y(t.message||"Error al crear la cuenta")}}}catch(x){console.error("\u274c Error inesperado:",x),y("Error inesperado: "+x.message)}finally{b(!1)}},className:"space-y-4",children:[!c&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),(0,At.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tu nombre completo",required:!c,disabled:v||o})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico"}),(0,At.jsx)("input",{type:"email",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(N?"bg-gray-100 cursor-not-allowed":""),placeholder:"tu@email.com",required:!0,readOnly:N,disabled:v||o}),N&&(0,At.jsx)("p",{className:"email-locked-note",children:"\u26a0\ufe0f Debes usar este email para activar tu invitaci\xf3n"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,At.jsx)("input",{type:"password",value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,minLength:6,disabled:v||o}),!c&&(0,At.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"M\xednimo 6 caracteres"})]}),x&&(0,At.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md flex items-start",children:[(0,At.jsx)("svg",{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,At.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,At.jsx)("span",{className:"text-sm",children:x})]}),w&&(0,At.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md flex items-start",children:[(0,At.jsx)("svg",{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,At.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,At.jsx)("span",{className:"text-sm whitespace-pre-line",children:w})]}),(0,At.jsxs)("div",{className:"flex space-x-3 pt-2",children:[(0,At.jsx)("button",{type:"submit",disabled:v||o,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2.5 px-4 rounded-md hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:v||o?(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),c?"Iniciando...":N?"Registrando...":"Creando..."]}):(0,At.jsx)("span",{children:c?"Iniciar Sesi\xf3n":N?"\u2728 Registrarme y Unirme":"Crear Cuenta"})}),(0,At.jsx)("button",{type:"button",onClick:E,disabled:v||o,className:"px-6 py-2.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 transition-colors duration-200",children:"Cancelar"})]})]}),(0,At.jsx)("div",{className:"mt-6 text-center",children:(0,At.jsx)("button",{onClick:()=>d(!c),disabled:v||o,className:"text-blue-600 hover:text-blue-800 text-sm font-medium hover:underline transition-colors duration-200 disabled:opacity-50",children:c?"\xbfNo tienes cuenta? Crear una":"\xbfYa tienes cuenta? Iniciar sesi\xf3n"})}),(0,At.jsx)("div",{className:"mt-4 text-center",children:(0,At.jsx)("button",{onClick:E,disabled:v||o,className:"text-gray-500 hover:text-gray-700 text-sm hover:underline transition-colors duration-200 disabled:opacity-50",children:"Continuar sin cuenta (modo local)"})}),(0,At.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,At.jsx)("p",{className:"text-xs text-center text-gray-500",children:"Al crear una cuenta, aceptas sincronizar tus datos de forma segura con Supabase"})})]})})},s1={OWNER:"owner",ADMIN:"admin",MEMBER_WRITE:"member_write",MEMBER_READ:"member_read"},i1={[s1.OWNER]:"\ud83d\udc51 Propietario",[s1.ADMIN]:"\ud83d\udc51 Administrador",[s1.MEMBER_WRITE]:"\u270f\ufe0f Miembro (Editar)",[s1.MEMBER_READ]:"\ud83d\udc40 Miembro (Solo lectura)"},o1={[s1.OWNER]:"Control total de la organizaci\xf3n, puede gestionar miembros y proyectos",[s1.ADMIN]:"Puede gestionar usuarios y proyectos de la organizaci\xf3n",[s1.MEMBER_WRITE]:"Puede crear, editar y eliminar proyectos de la organizaci\xf3n",[s1.MEMBER_READ]:"Solo puede ver proyectos de la organizaci\xf3n"},l1={[s1.OWNER]:{canInvite:!0,canEditRoles:!0,canRemoveMembers:!0,canEditProjects:!0,canDeleteProjects:!0,canViewAll:!0},[s1.ADMIN]:{canInvite:!0,canEditRoles:!0,canRemoveMembers:!1,canEditProjects:!0,canDeleteProjects:!0,canViewAll:!0},[s1.MEMBER_WRITE]:{canInvite:!1,canEditRoles:!1,canRemoveMembers:!1,canEditProjects:!0,canDeleteProjects:!1,canViewAll:!0},[s1.MEMBER_READ]:{canInvite:!1,canEditRoles:!1,canRemoveMembers:!1,canEditProjects:!1,canDeleteProjects:!1,canViewAll:!0}},c1={organization_owner:s1.OWNER,organization_member_write:s1.MEMBER_WRITE,organization_member_read:s1.MEMBER_READ,admin:s1.ADMIN,owner:s1.OWNER,member:s1.MEMBER_WRITE},d1=[{value:s1.OWNER,label:i1[s1.OWNER],description:o1[s1.OWNER]},{value:s1.ADMIN,label:i1[s1.ADMIN],description:o1[s1.ADMIN]},{value:s1.MEMBER_WRITE,label:i1[s1.MEMBER_WRITE],description:o1[s1.MEMBER_WRITE]},{value:s1.MEMBER_READ,label:i1[s1.MEMBER_READ],description:o1[s1.MEMBER_READ]}],u1=e=>c1[e]||s1.MEMBER_READ,h1=e=>Object.values(s1).includes(e),f1=e=>l1[e]||l1[s1.MEMBER_READ],p1=(e,t)=>!0===f1(e)[t],m1=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{fallbackFromProject:r=null,required:n=!0}=e,[a,s]=(0,t.useState)(null),[i,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async()=>{try{if(console.log("\ud83d\udd0d useOrganizationId - Iniciando detecci\xf3n",{fallbackFromProject:r,required:n}),o(!0),c(null),r)return console.log("\u2705 Organization ID detectado desde proyecto:",r),s(r),void o(!1);console.log("\u23ed\ufe0f No hay fallbackFromProject, intentando desde servicio...");const e=kt.default.getCurrentOrganization();if(e)return console.log("\u2705 Organization ID detectado desde servicio:",e),s(e),void o(!1);console.log("\ud83d\udd0d Intentando detectar organizaci\xf3n autom\xe1ticamente...");const t=await kt.default.detectUserOrganization();if(t&&t.id)return console.log("\u2705 Organization ID auto-detectado:",t.id),console.log("\u2705 Nombre de organizaci\xf3n:",t.name),console.log("\u2705 Rol del usuario:",t.role),s(t.id),void o(!1);const a="No se pudo detectar organization_id. El usuario no pertenece a ninguna organizaci\xf3n.";console.error("\u274c",a),n&&c(a),s(null),o(!1)}catch(e){console.error("\u274c Error detectando organizaci\xf3n:",e),c(e.message),s(null),o(!1)}})()},[r,n]),{organizationId:a,loading:i,error:l,isValid:!!a,hasError:!!l}},g1=()=>(0,t.useMemo)(()=>({mapRole:e=>e?u1(e):"member_read",isValidRole:h1,getRolePermissions:f1,hasPermission:p1,validateRoleConsistency:e=>{const t=[],r={total:e.length,valid:0,invalid:0,legacy:0};return e.forEach(e=>{const n=e.role,a=u1(n);n!==a&&r.legacy++,h1(a)?r.valid++:(r.invalid++,t.push({user:e.user_email||e.email,originalRole:n,mappedRole:a,issue:"Mapped role is not valid"}))}),{issues:t,stats:r,isConsistent:0===t.length}}}),[]),v1=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{mapRole:r,hasPermission:n}=g1();return(0,t.useMemo)(()=>{const t=kt.default.getCurrentUser();if(!t||!t.email)return{currentUser:null,currentUserMembership:null,currentUserRole:null,mappedRole:null,isOwnerOrAdmin:!1,isOwner:!1,isAdmin:!1,isMember:!1,canInvite:!1,canEditRoles:!1,canRemoveMembers:!1};const a=e.find(e=>e.user_email===t.email);if(!a)return{currentUser:t,currentUserMembership:null,currentUserRole:null,mappedRole:null,isOwnerOrAdmin:!1,isOwner:!1,isAdmin:!1,isMember:!1,canInvite:!1,canEditRoles:!1,canRemoveMembers:!1};const s=a.role,i=r(s),o=i===s1.OWNER,l=i===s1.ADMIN;return{currentUser:t,currentUserMembership:a,currentUserRole:s,mappedRole:i,isOwnerOrAdmin:o||l,isOwner:o,isAdmin:l,isMember:i===s1.MEMBER_WRITE||i===s1.MEMBER_READ,canInvite:n(i,"canInvite"),canEditRoles:n(i,"canEditRoles"),canRemoveMembers:n(i,"canRemoveMembers"),canEditMember:e=>{if(!n(i,"canEditRoles"))return!1;if(o)return!0;return r(null===e||void 0===e?void 0:e.role)!==s1.OWNER},canRemoveMember:e=>{if(!n(i,"canRemoveMembers"))return!1;if((null===e||void 0===e?void 0:e.user_email)===t.email)return!1;if(o)return!0;const a=r(null===e||void 0===e?void 0:e.role);return a!==s1.OWNER&&a!==s1.ADMIN}}},[e])},b1={showModal:!1,email:"",role:"organization_member_write",functionalRole:"",isLoading:!1,error:null},x1="OPEN_MODAL",y1="CLOSE_MODAL",w1="SET_EMAIL",j1="SET_ROLE",N1="SET_FUNCTIONAL_ROLE",_1="SET_LOADING",S1="SET_ERROR",k1="RESET_FORM";function A1(e,t){switch(t.type){case x1:return(0,s.A)((0,s.A)({},e),{},{showModal:!0});case y1:return(0,s.A)((0,s.A)({},e),{},{showModal:!1});case w1:return(0,s.A)((0,s.A)({},e),{},{email:t.payload});case j1:return(0,s.A)((0,s.A)({},e),{},{role:t.payload});case N1:return(0,s.A)((0,s.A)({},e),{},{functionalRole:t.payload});case _1:return(0,s.A)((0,s.A)({},e),{},{isLoading:t.payload});case S1:return(0,s.A)((0,s.A)({},e),{},{error:t.payload});case k1:return(0,s.A)((0,s.A)({},b1),{},{showModal:e.showModal});default:return e}}const E1=()=>{const[e,r]=(0,t.useReducer)(A1,b1);return{state:e,actions:{openModal:()=>r({type:x1}),closeModal:()=>r({type:y1}),setEmail:e=>r({type:w1,payload:e}),setRole:e=>r({type:j1,payload:e}),setFunctionalRole:e=>r({type:N1,payload:e}),setLoading:e=>r({type:_1,payload:e}),setError:e=>r({type:S1,payload:e}),resetForm:()=>r({type:k1})}}};function C1(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=function(){const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL;if(e)return e;const t=window.location.hostname;return"localhost"===t||"127.0.0.1"===t?"http://".concat(t,":").concat(window.location.port||3e3):window.location.origin}(),r=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(r)}const T1=function(e){let{isOpen:r,onClose:n,invitation:a}=e;const[s,i]=(0,t.useState)(!1);if(!r||!a)return null;const o=C1("/signup?email=".concat(encodeURIComponent(a.user_email),"&invited=true&org=").concat(a.organization_id));return(0,At.jsx)("div",{className:"invitation-modal-overlay",onClick:n,children:(0,At.jsxs)("div",{className:"invitation-modal",onClick:e=>e.stopPropagation(),children:[(0,At.jsxs)("div",{className:"invitation-modal-header",children:[(0,At.jsx)("h2",{children:"\u2705 Invitaci\xf3n Creada"}),(0,At.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,At.jsxs)("div",{className:"invitation-modal-body",children:[(0,At.jsxs)("div",{className:"invitation-info",children:[(0,At.jsxs)("p",{className:"invited-email",children:["\ud83d\udce7 ",(0,At.jsx)("strong",{children:a.user_email})]}),(0,At.jsxs)("p",{className:"invited-role",children:["Rol: ",(0,At.jsx)("span",{className:"role-badge",children:a.role})]})]}),(0,At.jsxs)("div",{className:"invitation-instructions",children:[(0,At.jsx)("h3",{children:"\ud83d\udccb C\xf3mo compartir esta invitaci\xf3n:"}),(0,At.jsxs)("ol",{children:[(0,At.jsx)("li",{children:"Copia el enlace de abajo"}),(0,At.jsx)("li",{children:"Env\xedalo al usuario por WhatsApp, email, o Slack"}),(0,At.jsx)("li",{children:"El usuario solo debe hacer clic y registrarse"}),(0,At.jsx)("li",{children:"Una vez registrado, tendr\xe1 acceso autom\xe1tico"})]})]}),(0,At.jsxs)("div",{className:"invitation-link-section",children:[(0,At.jsx)("label",{children:"\ud83d\udd17 Enlace de invitaci\xf3n:"}),(0,At.jsxs)("div",{className:"link-container",children:[(0,At.jsx)("input",{type:"text",value:o,readOnly:!0,className:"invitation-link-input"}),(0,At.jsx)("button",{className:"copy-button ".concat(s?"copied":""),onClick:async()=>{try{await navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),3e3)}catch(e){console.error("Error copiando enlace:",e);const t=document.createElement("textarea");t.value=o,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),i(!0),setTimeout(()=>i(!1),3e3)}},children:s?"\u2705 Copiado":"\ud83d\udccb Copiar"})]})]}),(0,At.jsxs)("div",{className:"share-options",children:[(0,At.jsx)("h4",{children:"O compartir directamente:"}),(0,At.jsxs)("div",{className:"share-buttons",children:[(0,At.jsx)("button",{className:"share-btn whatsapp",onClick:()=>{const e=encodeURIComponent("\ud83c\udf89 \xa1Has sido invitado a unirte a nuestra organizaci\xf3n en StrategiaPM!\n\n"+"Haz clic en este enlace para registrarte:\n".concat(o,"\n\n")+"Importante: Usa el email ".concat(a.user_email," al registrarte."));window.open("https://wa.me/?text=".concat(e),"_blank")},children:"\ud83d\udcac WhatsApp"}),(0,At.jsx)("button",{className:"share-btn email",onClick:()=>{const e=encodeURIComponent("Invitaci\xf3n a StrategiaPM"),t=encodeURIComponent("Has sido invitado a unirte a nuestra organizaci\xf3n en StrategiaPM.\n\n"+"Haz clic en este enlace para registrarte:\n".concat(o,"\n\n")+"Importante: Debes registrarte usando el email ".concat(a.user_email,"\n\n")+"Una vez registrado, tendr\xe1s acceso autom\xe1tico a la organizaci\xf3n.");window.location.href="mailto:".concat(a.user_email,"?subject=").concat(e,"&body=").concat(t)},children:"\ud83d\udce7 Email"})]})]}),(0,At.jsx)("div",{className:"invitation-note",children:(0,At.jsxs)("p",{children:["\u26a0\ufe0f ",(0,At.jsx)("strong",{children:"Importante:"})," El usuario debe registrarse usando exactamente el email ",(0,At.jsx)("strong",{children:a.user_email})]})})]}),(0,At.jsx)("div",{className:"invitation-modal-footer",children:(0,At.jsx)("button",{className:"btn-primary",onClick:n,children:"Entendido"})})]})})},P1=e=>{let{currentProject:n,useSupabase:a=!1,onMemberAdded:s}=e;const[i,o]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),{state:d,actions:u}=E1(),h=d.showModal,f=d.email,p=d.role,m=d.functionalRole,g=e=>e?u.openModal():u.closeModal(),v=u.setEmail,b=u.setRole,x=u.setFunctionalRole,[y,w]=(0,t.useState)(!1),[j,N]=(0,t.useState)(null),[_,S]=(0,t.useState)(""),[k,A]=(0,t.useState)(!1),[E,C]=(0,t.useState)(null),[T,P]=(0,t.useState)(null),[D,O]=(0,t.useState)(""),[I,M]=(0,t.useState)(!1),[R,L]=(0,t.useState)(null),{addAuditEvent:F}=AQ(null===n||void 0===n?void 0:n.id,a),{organizationId:B,loading:z,error:U}=m1({fallbackFromProject:null===n||void 0===n?void 0:n.organization_id,required:!0});(0,t.useEffect)(()=>{console.log("\ud83d\udd0d OrganizationMembers - Estado actual:",{hasCurrentProject:!!n,currentProjectOrgId:null===n||void 0===n?void 0:n.organization_id,organizationId:B,orgLoading:z,orgError:U,useSupabase:a})},[n,B,z,U,a]);const{isOwnerOrAdmin:q,canInvite:W,canEditRoles:H,canRemoveMembers:V,canEditMember:G,canRemoveMember:K}=v1(i),$=async()=>{if(console.log("\ud83d\udd04 loadOrganizationMembers ejecut\xe1ndose",{useSupabase:a,organizationId:B}),a){if(!B)return console.warn("\u26a0\ufe0f organizationId es null/undefined, esperando detecci\xf3n..."),void console.warn("\u26a0\ufe0f Estado actual:",{orgLoading:z,orgError:U,currentProjectOrgId:null===n||void 0===n?void 0:n.organization_id});console.log("\u2705 Iniciando carga de miembros para organization_id:",B);try{A(!0);const{default:e}=await Promise.resolve().then(r.bind(r,9874));if(e.isAuthenticated()){e.getCurrentUser();const{data:t,error:r}=await e.supabase.from("organization_members").select("*"),{data:n,error:a}=await e.supabase.from("organization_members").select("*").eq("organization_id",B).order("joined_at",{ascending:!1});if(a)C("Error cargando miembros de la organizaci\xf3n");else{const e=(n||[]).filter(e=>"active"===e.status);o(e);const t=(n||[]).filter(e=>"pending"===e.status);c(t),console.log("\u2705 Total de miembros cargados:",(null===n||void 0===n?void 0:n.length)||0),console.log("\u2705 Miembros activos:",e.length),console.log("\u23f3 Invitaciones pendientes:",t.length)}}}catch(E){C("Error cargando miembros de la organizaci\xf3n")}finally{A(!1)}}else console.warn("\u26a0\ufe0f Supabase no est\xe1 habilitado, no se cargar\xe1n miembros")},Y=e=>{var t;let{member:r,isInviteForm:n=!1,value:a,onChange:s}=e;const o=null===(t=i.find(e=>{var t;return e.user_email===(null===(t=kt.default.getCurrentUser())||void 0===t?void 0:t.email)}))||void 0===t?void 0:t.role,l="owner"===o||"admin"===o;if(n)return(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol Funcional (Opcional)"}),(0,At.jsxs)("select",{value:a||"",onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Sin rol espec\xedfico"}),(0,At.jsxs)("optgroup",{label:"Roles de Gesti\xf3n",children:[(0,At.jsxs)("option",{value:A0.EXECUTIVE,children:[E0[A0.EXECUTIVE].icon," ",E0[A0.EXECUTIVE].label]}),(0,At.jsxs)("option",{value:A0.SPONSOR,children:[E0[A0.SPONSOR].icon," ",E0[A0.SPONSOR].label]}),(0,At.jsxs)("option",{value:A0.PROJECT_MANAGER,children:[E0[A0.PROJECT_MANAGER].icon," ",E0[A0.PROJECT_MANAGER].label]})]}),(0,At.jsxs)("optgroup",{label:"Roles Especializados",children:[(0,At.jsxs)("option",{value:A0.FINANCE_MANAGER,children:[E0[A0.FINANCE_MANAGER].icon," ",E0[A0.FINANCE_MANAGER].label]}),(0,At.jsxs)("option",{value:A0.QUALITY_MANAGER,children:[E0[A0.QUALITY_MANAGER].icon," ",E0[A0.QUALITY_MANAGER].label]}),(0,At.jsxs)("option",{value:A0.TECHNICAL_LEAD,children:[E0[A0.TECHNICAL_LEAD].icon," ",E0[A0.TECHNICAL_LEAD].label]})]}),(0,At.jsxs)("optgroup",{label:"Roles Operativos",children:[(0,At.jsxs)("option",{value:A0.PMO_ASSISTANT,children:[E0[A0.PMO_ASSISTANT].icon," ",E0[A0.PMO_ASSISTANT].label]}),(0,At.jsxs)("option",{value:A0.PROJECT_COORDINATOR,children:[E0[A0.PROJECT_COORDINATOR].icon," ",E0[A0.PROJECT_COORDINATOR].label]}),(0,At.jsxs)("option",{value:A0.TEAM_MEMBER,children:[E0[A0.TEAM_MEMBER].icon," ",E0[A0.TEAM_MEMBER].label]})]}),(0,At.jsx)("optgroup",{label:"Roles de Supervisi\xf3n",children:(0,At.jsxs)("option",{value:A0.AUDITOR,children:[E0[A0.AUDITOR].icon," ",E0[A0.AUDITOR].label]})})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a&&E0[a]?E0[a].description:"El rol funcional determina los permisos en control de cambios"})]});if(T===r.id)return(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsxs)("select",{value:D,onChange:e=>O(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,At.jsx)("option",{value:"",children:"Sin rol espec\xedfico"}),(0,At.jsxs)("optgroup",{label:"Gesti\xf3n",children:[(0,At.jsxs)("option",{value:A0.EXECUTIVE,children:[E0[A0.EXECUTIVE].icon," ",E0[A0.EXECUTIVE].label]}),(0,At.jsxs)("option",{value:A0.SPONSOR,children:[E0[A0.SPONSOR].icon," ",E0[A0.SPONSOR].label]}),(0,At.jsxs)("option",{value:A0.PROJECT_MANAGER,children:[E0[A0.PROJECT_MANAGER].icon," ",E0[A0.PROJECT_MANAGER].label]})]}),(0,At.jsxs)("optgroup",{label:"Especializados",children:[(0,At.jsxs)("option",{value:A0.FINANCE_MANAGER,children:[E0[A0.FINANCE_MANAGER].icon," ",E0[A0.FINANCE_MANAGER].label]}),(0,At.jsxs)("option",{value:A0.QUALITY_MANAGER,children:[E0[A0.QUALITY_MANAGER].icon," ",E0[A0.QUALITY_MANAGER].label]}),(0,At.jsxs)("option",{value:A0.TECHNICAL_LEAD,children:[E0[A0.TECHNICAL_LEAD].icon," ",E0[A0.TECHNICAL_LEAD].label]})]}),(0,At.jsxs)("optgroup",{label:"Operativos",children:[(0,At.jsxs)("option",{value:A0.PMO_ASSISTANT,children:[E0[A0.PMO_ASSISTANT].icon," ",E0[A0.PMO_ASSISTANT].label]}),(0,At.jsxs)("option",{value:A0.PROJECT_COORDINATOR,children:[E0[A0.PROJECT_COORDINATOR].icon," ",E0[A0.PROJECT_COORDINATOR].label]}),(0,At.jsxs)("option",{value:A0.TEAM_MEMBER,children:[E0[A0.TEAM_MEMBER].icon," ",E0[A0.TEAM_MEMBER].label]})]}),(0,At.jsx)("optgroup",{label:"Supervisi\xf3n",children:(0,At.jsxs)("option",{value:A0.AUDITOR,children:[E0[A0.AUDITOR].icon," ",E0[A0.AUDITOR].label]})})]}),(0,At.jsx)("button",{onClick:()=>(async(e,t)=>{try{A(!0);const{error:r}=await kt.default.supabase.from("organization_members").update({functional_role:t||null,updated_at:(new Date).toISOString()}).eq("id",e).eq("organization_id",B);if(r)return console.error("Error actualizando rol funcional:",r),void alert("Error actualizando rol funcional: "+r.message);await $(),P(null),O(""),alert("Rol funcional actualizado exitosamente")}catch(E){console.error("Error actualizando rol funcional:",E),alert("Error actualizando rol funcional")}finally{A(!1)}})(r.id,D),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"\u2713"}),(0,At.jsx)("button",{onClick:()=>{P(null),O("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400",children:"\u2715"})]});const c=r.functional_role?E0[r.functional_role]:null;return(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("div",{children:c?(0,At.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(c.badge),children:[c.icon," ",c.label]}):(0,At.jsx)("span",{className:"text-gray-400 text-sm italic",children:"Sin rol espec\xedfico"})}),l&&"active"===r.status&&(0,At.jsx)("button",{onClick:()=>{P(r.id),O(r.functional_role||"")},className:"ml-2 text-blue-600 hover:text-blue-800 text-sm",title:"Editar rol funcional",children:"\u270f\ufe0f"})]})};if((0,t.useEffect)(()=>{$()},[B,a]),!a)return(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-yellow-600 text-xl mr-3",children:"\u26a0\ufe0f"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-yellow-800 font-medium",children:"Supabase no habilitado"}),(0,At.jsx)("p",{className:"text-yellow-700 text-sm",children:"Para compartir proyectos con otros usuarios, necesitas habilitar Supabase en la configuraci\xf3n."})]})]})});if(z)return(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"}),(0,At.jsx)("p",{className:"text-blue-700",children:"Detectando organizaci\xf3n..."})]})});if(!B||U)return(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-red-600 text-xl mr-3",children:"\u274c"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-red-800 font-medium",children:"No se detect\xf3 organizaci\xf3n"}),(0,At.jsx)("p",{className:"text-red-700 text-sm",children:U||"Este usuario no pertenece a ninguna organizaci\xf3n. Por favor, solicita una invitaci\xf3n."})]})]})});const X=e=>{switch(e){case"owner":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";case"member":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},J=e=>{const t=u1(e);return i1[t]||e};return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Miembros de la Organizaci\xf3n"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Gestiona qui\xe9n puede ver y editar los proyectos de tu organizaci\xf3n"})]}),W?(0,At.jsxs)("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,At.jsx)("span",{children:"+"}),(0,At.jsx)("span",{children:"Invitar Miembro"})]}):(0,At.jsxs)("div",{className:"text-sm text-gray-500 italic bg-gray-50 px-3 py-2 rounded-lg border",children:[(0,At.jsx)("span",{children:"\ud83d\udd12"})," Solo administradores pueden invitar miembros"]})]}),E&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-red-600 text-xl mr-3",children:"\u274c"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,At.jsx)("p",{className:"text-red-700 text-sm",children:E})]})]})}),(0,At.jsx)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-blue-500 text-xl mr-3",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Roles Funcionales en Control de Cambios"}),(0,At.jsx)("p",{className:"text-sm text-blue-700 mb-2",children:"Los roles funcionales determinan los permisos espec\xedficos en el m\xf3dulo de Control de Cambios:"}),(0,At.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"Ejecutivo/Sponsor:"})," Aprueban cambios mayores sin l\xedmite"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"Project Manager:"})," Aprueban cambios hasta $25K / 15 d\xedas"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"Gerente Financiero:"})," Validan impacto financiero"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"Miembro de Equipo:"})," Solo pueden solicitar cambios"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"Sin rol espec\xedfico:"})," Permisos b\xe1sicos seg\xfan rol organizacional"]})]})]})]})}),l.length>0&&(0,At.jsxs)("div",{className:"bg-yellow-50 rounded-lg shadow-sm border border-yellow-200",children:[(0,At.jsxs)("div",{className:"p-4 border-b border-yellow-200",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold text-yellow-800 flex items-center",children:[(0,At.jsx)("span",{className:"mr-2",children:"\u23f3"}),"Invitaciones Pendientes (",l.length,")"]}),(0,At.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Estas personas fueron invitadas pero a\xfan no han aceptado"})]}),(0,At.jsx)("div",{className:"divide-y divide-yellow-200",children:l.map(e=>{var t,r;return(0,At.jsx)("div",{className:"p-4",children:(0,At.jsxs)("div",{className:"flex items-start justify-between",children:[(0,At.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,At.jsx)("div",{className:"w-12 h-12 bg-yellow-300 rounded-full flex items-center justify-center flex-shrink-0",children:(0,At.jsx)("span",{className:"text-yellow-800 font-bold text-lg",children:"\u2709\ufe0f"})}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,At.jsx)("p",{className:"font-semibold text-yellow-900 text-lg",children:e.user_email}),(0,At.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-200 text-yellow-800",children:"\u23f3 Pendiente"})]}),(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,At.jsx)("span",{className:"font-medium",children:"Rol:"})," ",J(e.role)]}),e.functional_role&&(0,At.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,At.jsx)("span",{className:"font-medium",children:"Rol Funcional:"})," ",null===(t=E0[e.functional_role])||void 0===t?void 0:t.icon," ",null===(r=E0[e.functional_role])||void 0===r?void 0:r.label]}),e.invited_by&&(0,At.jsxs)("p",{className:"text-xs text-yellow-600 mt-2",children:["Invitado por ",(0,At.jsx)("span",{className:"font-medium",children:e.invited_by}),e.invited_at&&(0,At.jsxs)("span",{children:[" el ",new Date(e.invited_at).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"})]})]}),e.created_at&&!e.invited_at&&(0,At.jsxs)("p",{className:"text-xs text-yellow-600 mt-2",children:["Invitado el ",new Date(e.created_at).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"})]})]})]})]}),V&&(0,At.jsxs)("div",{className:"flex flex-col space-y-2 ml-4",children:[(0,At.jsxs)("button",{onClick:()=>(async e=>{try{const t=l.find(t=>t.id===e);if(!t)return;console.log("Reenviando invitaci\xf3n:",e);const r="localhost"===window.location.hostname?"https://strategiapm.vercel.app":window.location.origin;alert("\ud83d\udce7 Recordatorio de invitaci\xf3n\n      \nSe ha notificado nuevamente a ".concat(t.user_email,"\n\nComparte este enlace para que se registren:\n").concat(r,"\n\nUna vez registrado con ese email, tendr\xe1 acceso autom\xe1ticamente."))}catch(E){console.error("Error reenviando invitaci\xf3n:",E),alert("Error al reenviar invitaci\xf3n")}})(e.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium flex items-center space-x-1 transition-colors",title:"Reenviar invitaci\xf3n",children:[(0,At.jsx)("span",{children:"\ud83d\udd04"}),(0,At.jsx)("span",{children:"Reenviar"})]}),(0,At.jsxs)("button",{onClick:()=>(async(e,t)=>{try{if(!window.confirm("\xbfEst\xe1s seguro de cancelar la invitaci\xf3n para ".concat(t,"?")))return;console.log("\ud83d\uddd1\ufe0f Cancelando invitaci\xf3n:",e);const{error:r}=await kt.default.supabase.from("organization_members").delete().eq("id",e);if(r)return console.error("\u274c Error cancelando invitaci\xf3n:",r),void alert("Error al cancelar invitaci\xf3n: ".concat(r.message));console.log("\u2705 Invitaci\xf3n cancelada exitosamente"),alert("\u2705 Invitaci\xf3n cancelada"),$()}catch(r){console.error("\u274c Error inesperado:",r),alert("Error: ".concat(r.message))}})(e.id,e.user_email),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium flex items-center space-x-1 transition-colors",title:"Cancelar invitaci\xf3n",children:[(0,At.jsx)("span",{children:"\u274c"}),(0,At.jsx)("span",{children:"Cancelar"})]})]})]})},e.id)})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,At.jsx)("div",{className:"p-4 border-b",children:(0,At.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Miembros Activos (",i.length,")"]})}),(0,At.jsx)("div",{className:"divide-y divide-gray-200",children:k?(0,At.jsxs)("div",{className:"p-8 text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,At.jsx)("p",{className:"text-gray-600 mt-2",children:"Cargando miembros..."})]}):0===i.length?(0,At.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,At.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83d\udc65"}),(0,At.jsx)("p",{children:"No hay miembros en la organizaci\xf3n"}),(0,At.jsx)("p",{className:"text-sm",children:"Invita a otros usuarios para compartir tus proyectos"})]}):i.map(e=>(0,At.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-gray-600 font-medium",children:e.user_email.charAt(0).toUpperCase()})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"font-medium text-gray-900",children:e.user_email}),(0,At.jsxs)("p",{className:"text-sm text-gray-500",children:["Se uni\xf3 el ",new Date(e.joined_at).toLocaleDateString()]})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(X(e.role)),children:J(e.role)}),(0,At.jsx)(Y,{member:e}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[G(e)&&(0,At.jsx)("button",{onClick:()=>(e=>{N(e),S(e.role),w(!0)})(e),className:"text-blue-600 hover:text-blue-800 text-sm",title:"Cambiar rol",children:"\u270f\ufe0f"}),K(e)&&(0,At.jsx)("button",{onClick:()=>(async(e,t)=>{const n=i.find(t=>t.id===e);if(!K(n))return void(u1(null===n||void 0===n?void 0:n.role)===s1.OWNER?alert("\u274c No se puede eliminar al propietario de la organizaci\xf3n."):alert("\u274c No tienes permisos para eliminar este miembro."));if(window.confirm("\u26a0\ufe0f ELIMINACI\xd3N COMPLETA DE USUARIO\n\n\xbfEst\xe1s seguro de que quieres eliminar COMPLETAMENTE a ".concat(t,"?\n\nEsto eliminar\xe1:\n\u2022 Su membres\xeda en la organizaci\xf3n\n\u2022 Todos sus roles y permisos\n\u2022 Su acceso a todos los proyectos\n\nEsta acci\xf3n NO se puede deshacer.")))try{A(!0);const{default:n}=await Promise.resolve().then(r.bind(r,9874));if(n.isAuthenticated()){const{error:r}=await n.supabase.from("organization_members").delete().eq("id",e);if(r)throw new Error("Error eliminando membres\xeda: ".concat(r.message));const{error:i}=await n.supabase.from("user_organization_roles").delete().eq("user_email",t).eq("organization_id",B);i&&console.warn("\u26a0\ufe0f Error eliminando de user_organization_roles (puede no existir):",i);const{error:o}=await n.supabase.from("tasks").update({assigned_to:null}).eq("assigned_to",t);o&&console.warn("\u26a0\ufe0f Error actualizando tareas:",o);const{error:l}=await n.supabase.from("risks").update({owner:null}).eq("owner",t);l&&console.warn("\u26a0\ufe0f Error actualizando riesgos:",l);try{["mi-dashboard-portfolio","lastSelectedProjectId","portfolioData","audit-log-"+t,"user-preferences-"+t].forEach(e=>{const r=localStorage.getItem(e);if(r)try{const n=JSON.parse(r);JSON.stringify(n).includes(t)&&(console.log("\ud83d\uddd1\ufe0f Limpiando localStorage key: ".concat(e)),localStorage.removeItem(e))}catch(f2){console.log("\ud83d\uddd1\ufe0f Limpiando localStorage key (raw): ".concat(e)),localStorage.removeItem(e)}}),["currentUser","userSession","organizationData"].forEach(e=>{const r=sessionStorage.getItem(e);r&&r.includes(t)&&(console.log("\ud83d\uddd1\ufe0f Limpiando sessionStorage key: ".concat(e)),sessionStorage.removeItem(e))})}catch(s){}var a;F&&F({category:"organization",action:"member-completely-removed",description:'Usuario "'.concat(t,'" eliminado COMPLETAMENTE de la organizaci\xf3n'),details:{userEmail:t,organizationId:B,tablesCleaned:["organization_members","user_organization_roles","tasks","risks"],localCacheCleaned:!0},severity:"high",user:(null===(a=n.getCurrentUser())||void 0===a?void 0:a.email)||"Sistema"});const c="\u2705 Usuario ".concat(t," eliminado COMPLETAMENTE de la organizaci\xf3n\n\nSe elimin\xf3 de:\n\u2022 organization_members (membres\xeda principal)\n\u2022 user_organization_roles (roles y permisos)\n\u2022 Referencias en tareas y riesgos\n\u2022 Cach\xe9 local del navegador\n\n\u26a0\ufe0f IMPORTANTE: El usuario eliminado debe:\n1. Cerrar sesi\xf3n completamente\n2. Cerrar el navegador\n3. Volver a abrir el navegador\n4. Iniciar sesi\xf3n nuevamente\n\nSolo as\xed ver\xe1 que ya no tiene acceso a la organizaci\xf3n.");alert(c),await $()}}catch(E){console.error("\u274c Error eliminando miembro:",E),C("Error eliminando miembro: ".concat(E.message)),alert("\u274c Error eliminando usuario: ".concat(E.message,"\n\nPor favor, intenta nuevamente o contacta al administrador."))}finally{A(!1)}})(e.id,e.user_email),className:"text-red-600 hover:text-red-800 text-sm",title:"Eliminar miembro",children:"\ud83d\uddd1\ufe0f"})]})]})]},e.id))})]}),h&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,At.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold",children:"Invitar Miembro"}),(0,At.jsx)("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"\u2715"})]}),(0,At.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f&&B)if(W)try{A(!0),C(null);const{default:e}=await Promise.resolve().then(r.bind(r,9874));if(e.isAuthenticated()){var t;e.getCurrentUser();const{data:r,error:a}=await e.supabase.from("user_organization_roles").select("role, organization_id").eq("user_id",null===(t=e.getCurrentUser())||void 0===t?void 0:t.id),{data:i,error:o}=await e.supabase.from("organization_members").select("*").eq("organization_id",B).eq("user_email",f).single();if(i)return void alert("\u26a0\ufe0f El usuario ".concat(f," ya es miembro de esta organizaci\xf3n."));const{data:l,error:c}=await e.supabase.rpc("invite_member",{p_organization_id:B,p_user_email:f,p_role:p,p_functional_role:m||null});if(c)throw c;if(l&&!l.success)throw new Error(l.error||"Error al invitar miembro");var n;if(F)F({category:"organization",action:"member-invited",description:'Invitaci\xf3n enviada a "'.concat(f,'" con rol "').concat(p,'"'),details:{userEmail:f,role:p,organizationId:B},severity:"medium",user:(null===(n=e.getCurrentUser())||void 0===n?void 0:n.email)||"Sistema"});L({user_email:f,role:p,organization_id:B}),M(!0),await $(),u.resetForm(),u.closeModal(),s&&s()}}catch(E){console.error("Error invitando miembro:",E),C("Error invitando miembro: ".concat(E.message))}finally{A(!1)}else alert("\u274c No tienes permisos para invitar miembros. Solo owners y administradores pueden realizar esta acci\xf3n.")},children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email del Usuario *"}),(0,At.jsx)("input",{type:"email",className:"w-full border rounded px-3 py-2",value:f,onChange:e=>v(e.target.value),placeholder:"usuario@ejemplo.com",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),(0,At.jsx)("select",{className:"w-full border rounded px-3 py-2",value:p,onChange:e=>b(e.target.value),children:d1.map(e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,At.jsx)(Y,{isInviteForm:!0,value:m,onChange:e=>x(e)}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,At.jsx)("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",disabled:k,children:"Cancelar"}),(0,At.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",disabled:k,children:k?"Enviando...":"Invitar"})]})]})]})})}),y&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold",children:"Cambiar Rol de Usuario"}),(0,At.jsx)("button",{onClick:()=>{w(!1),N(null),S("")},className:"text-gray-500 hover:text-gray-700 text-xl",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsxs)("p",{className:"text-gray-600 mb-2",children:["Cambiando rol de: ",(0,At.jsx)("strong",{children:null===j||void 0===j?void 0:j.user_email})]}),(0,At.jsxs)("p",{className:"text-sm text-gray-500",children:["Rol actual: ",(0,At.jsx)("span",{className:"font-medium",children:j?J(j.role):""})]})]}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nuevo Rol"}),(0,At.jsx)("select",{value:_,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:d1.map(e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Solo lectura:"})," Puede ver proyectos pero no editarlos"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Editar:"})," Puede ver y modificar proyectos"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Administrador:"})," Puede gestionar usuarios y proyectos"]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsx)("button",{onClick:()=>{w(!1),N(null),S("")},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",disabled:k,children:"Cancelar"}),(0,At.jsx)("button",{onClick:async()=>{if(j&&_){if(!G(j)){return void(u1(j.role)===s1.OWNER?alert("\u274c No se puede cambiar el rol del propietario de la organizaci\xf3n."):alert("\u274c No tienes permisos para cambiar el rol de este miembro."))}try{A(!0);const{default:t}=await Promise.resolve().then(r.bind(r,9874));if(t.isAuthenticated()){const{error:r}=await t.supabase.from("organization_members").update({role:_}).eq("id",j.id);if(r)throw r;var e;if(F)F({category:"organization",action:"member-role-updated",description:'Rol de "'.concat(j.user_email,'" cambiado a "').concat(J(_),'"'),details:{userEmail:j.user_email,oldRole:j.role,newRole:_,organizationId:B},severity:"medium",user:(null===(e=t.getCurrentUser())||void 0===e?void 0:e.email)||"Sistema"});alert("\u2705 Rol de ".concat(j.user_email," actualizado exitosamente")),await $(),w(!1),N(null),S("")}}catch(E){console.error("Error actualizando rol:",E),C("Error actualizando rol: ".concat(E.message))}finally{A(!1)}}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",disabled:k||!_||_===(null===j||void 0===j?void 0:j.role),children:k?"Actualizando...":"Cambiar Rol"})]})]})})}),(0,At.jsx)(T1,{isOpen:I,onClose:()=>M(!1),invitation:R})]})},D1=()=>{const[e,r]=(0,t.useState)(null),[n,a]=(0,t.useState)("all");return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\ud83d\udd04 Flujo del Control de Cambios"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Entiende c\xf3mo participan los roles funcionales en cada tipo de cambio"})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Filtrar por tipo:"}),(0,At.jsx)("button",{onClick:()=>a("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("all"===n?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:"Todos"}),(0,At.jsx)("button",{onClick:()=>a("small"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("small"===n?"bg-green-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:"\ud83d\udcd7 Peque\xf1os"}),(0,At.jsx)("button",{onClick:()=>a("medium"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("medium"===n?"bg-yellow-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:"\ud83d\udcd9 Medianos"}),(0,At.jsx)("button",{onClick:()=>a("large"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("large"===n?"bg-red-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:"\ud83d\udcd5 Grandes"})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udcb0 L\xedmites de Aprobaci\xf3n por Rol"}),(0,At.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcd7"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold text-green-800",children:"$0 - $25,000"}),(0,At.jsx)("div",{className:"text-gray-600",children:"\ud83d\udcca Project Manager"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcd9"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold text-yellow-800",children:"$25K - $100K"}),(0,At.jsx)("div",{className:"text-gray-600",children:"\ud83c\udfaf Sponsor"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcd5"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-semibold text-red-800",children:"> $100,000"}),(0,At.jsx)("div",{className:"text-gray-600",children:"\ud83d\udc54 Executive / CCB"})]})]})]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-700 mb-4 text-lg",children:"\ud83d\udccb Pasos Iniciales (Comunes a Todos los Cambios)"}),(0,At.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{id:1,title:"Solicitar Cambio",icon:"\ud83d\udcdd",roles:["Team Member","Coordinator","PMO Assistant"],description:"Cualquier miembro del equipo puede solicitar un cambio",color:"bg-blue-100 border-blue-300",textColor:"text-blue-800"},{id:2,title:"Evaluar Impacto",icon:"\ud83d\udcca",roles:["Project Manager"],description:"El PM eval\xfaa costo, cronograma, alcance y calidad",color:"bg-purple-100 border-purple-300",textColor:"text-purple-800"}].map(t=>(0,At.jsxs)("div",{onMouseEnter:()=>r(t.id),onMouseLeave:()=>r(null),className:"border-2 rounded-lg p-4 transition-all cursor-pointer ".concat(t.color," ").concat(e===t.id?"shadow-lg scale-[1.02] transform":"shadow-sm"),children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,At.jsx)("span",{className:"text-3xl",children:t.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-bold text-lg ".concat(t.textColor),children:t.title}),(0,At.jsxs)("div",{className:"text-xs text-gray-600",children:["Paso ",t.id]})]})]}),(0,At.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:t.description}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1",children:t.roles.map((e,t)=>(0,At.jsx)("span",{className:"text-xs bg-white/70 px-2 py-1 rounded-full font-medium",children:e},t))})]},t.id))})]}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"flex items-center justify-center",children:(0,At.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg px-8 py-5 border-2 border-gray-400 shadow-md",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-3xl mb-2",children:"\ud83e\udd14"}),(0,At.jsx)("div",{className:"font-bold text-gray-800 text-lg",children:"\xbfCu\xe1nto cuesta el cambio?"}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Se eval\xfaa el impacto econ\xf3mico"})]})})}),(0,At.jsx)("div",{className:"flex items-center justify-center mt-6",children:(0,At.jsxs)("div",{className:"flex space-x-16",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"w-1 h-16 bg-green-400 mx-auto rounded-full"}),(0,At.jsx)("div",{className:"text-sm text-green-600 font-bold mt-2",children:"\u2193 Peque\xf1o"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"w-1 h-16 bg-yellow-400 mx-auto rounded-full"}),(0,At.jsx)("div",{className:"text-sm text-yellow-600 font-bold mt-2",children:"\u2193 Mediano"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"w-1 h-16 bg-red-400 mx-auto rounded-full"}),(0,At.jsx)("div",{className:"text-sm text-red-600 font-bold mt-2",children:"\u2193 Grande"})]})]})})]}),(0,At.jsx)("div",{className:"space-y-6",children:Object.entries({small:{name:"Cambio Peque\xf1o",icon:"\ud83d\udcd7",monto:"$0 - $25,000",color:"bg-green-100 border-green-300",textColor:"text-green-800",steps:[{title:"Aprobar/Rechazar",icon:"\u2705",roles:["Project Manager"],description:"El PM puede aprobar directamente",time:"1-2 d\xedas"},{title:"Implementar",icon:"\ud83d\ude80",roles:["Technical Lead","PM","Coordinator"],description:"Se implementa el cambio aprobado",time:"2-3 d\xedas"}]},medium:{name:"Cambio Mediano",icon:"\ud83d\udcd9",monto:"$25,001 - $100,000",color:"bg-yellow-100 border-yellow-300",textColor:"text-yellow-800",steps:[{title:"Escalar a Sponsor",icon:"\u2b06\ufe0f",roles:["Project Manager"],description:"El PM escala por exceder su l\xedmite",time:"1 d\xeda"},{title:"Aprobar/Rechazar",icon:"\u2705",roles:["Sponsor"],description:"El Sponsor revisa y decide",time:"2-3 d\xedas"},{title:"Implementar",icon:"\ud83d\ude80",roles:["Technical Lead","PM","Coordinator"],description:"Se implementa el cambio aprobado",time:"2-3 d\xedas"}]},large:{name:"Cambio Grande",icon:"\ud83d\udcd5",monto:"M\xe1s de $100,000",color:"bg-red-100 border-red-300",textColor:"text-red-800",steps:[{title:"Escalar a CCB",icon:"\u2b06\ufe0f",roles:["Project Manager"],description:"Requiere votaci\xf3n del Change Control Board",time:"1 d\xeda"},{title:"Votaci\xf3n CCB",icon:"\ud83d\uddf3\ufe0f",roles:["Executive","Sponsor","PM","Finance","Quality","Technical"],description:"Miembros del CCB votan (Quorum: 60%, Mayor\xeda: >50%)",time:"5-7 d\xedas"},{title:"Implementar",icon:"\ud83d\ude80",roles:["Technical Lead","PM","Coordinator"],description:"Se implementa el cambio aprobado",time:"3-5 d\xedas"}]}}).map(e=>{let[t,r]=e;return"all"!==n&&n!==t?null:(0,At.jsx)("div",{children:(0,At.jsxs)("div",{className:"border-2 rounded-lg p-6 ".concat(r.color," shadow-md"),children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("span",{className:"text-4xl",children:r.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"font-bold text-xl ".concat(r.textColor),children:r.name}),(0,At.jsx)("div",{className:"text-sm text-gray-700 font-medium",children:r.monto})]})]}),(0,At.jsxs)("div",{className:"bg-white/80 px-4 py-2 rounded-lg border border-gray-300",children:[(0,At.jsx)("div",{className:"text-xs text-gray-600",children:"Tiempo estimado"}),(0,At.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["\u23f1\ufe0f ",r.steps.reduce((e,t)=>e+(parseInt(t.time.split("-")[1])||1),0)," d\xedas"]})]})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.steps.map((e,t)=>(0,At.jsxs)("div",{className:"bg-white rounded-lg p-5 border-2 border-gray-300 hover:shadow-xl hover:border-blue-400 transition-all transform hover:scale-105",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,At.jsx)("span",{className:"text-3xl",children:e.icon}),(0,At.jsx)("div",{className:"font-bold text-gray-800 text-base",children:e.title})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-4 min-h-[40px]",children:e.description}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\u23f1\ufe0f"}),(0,At.jsx)("span",{className:"font-medium text-gray-700",children:e.time})]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2",children:e.roles.map((e,t)=>(0,At.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold border border-blue-200",children:e},t))})]})]},t))})]})},t)})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-700 mb-4 text-lg",children:"\ud83c\udfaf Paso Final (Todos los Cambios)"}),(0,At.jsxs)("div",{className:"border-2 rounded-lg p-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-300 shadow-md",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,At.jsx)("span",{className:"text-4xl",children:"\ud83d\udccb"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-bold text-green-800 text-xl",children:"Actualizar Proyecto"}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Paso Final - Cierre del Cambio"})]})]}),(0,At.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:"El cambio implementado se refleja autom\xe1ticamente en el proyecto: cronograma actualizado, presupuesto ajustado, alcance modificado y documentaci\xf3n generada."}),(0,At.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,At.jsx)("span",{className:"text-xs bg-white/70 px-3 py-1 rounded-full font-medium border border-green-200",children:"\ud83d\udcca Project Manager"}),(0,At.jsx)("span",{className:"text-xs bg-white/70 px-3 py-1 rounded-full font-medium border border-green-200",children:"\ud83e\udd16 Sistema Autom\xe1tico"})]})]})]}),(0,At.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-lg p-6 shadow-md",children:(0,At.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,At.jsx)("span",{className:"text-3xl",children:"\ud83d\udccc"}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h3",{className:"font-bold text-blue-900 mb-3 text-lg",children:"Notas Importantes"}),(0,At.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-2",children:"\ud83d\udd14"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"Notificaciones autom\xe1ticas:"})," Se env\xedan en cada cambio de estado a todos los involucrados"]})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-2",children:"\ud83d\uddf3\ufe0f"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"CCB Quorum:"})," Requiere al menos 60% de participaci\xf3n y mayor\xeda simple (>50%) para aprobar"]})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-2",children:"\ud83d\udcb0"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"L\xedmites acumulativos:"})," Si un cambio afecta costo Y cronograma, se usa el l\xedmite m\xe1s restrictivo"]})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-2",children:"\u2b50"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"Roles especializados:"})," Finance y Quality Managers participan en CCB con criterios espec\xedficos de validaci\xf3n"]})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"Trazabilidad completa:"})," Cada acci\xf3n queda registrada en el historial de auditor\xeda del cambio"]})]})]})]})]})})]})},O1=e=>{let{currentProject:r,useSupabase:n=!1,projects:a=[]}=e;const[i,o]=(0,t.useState)("members"),[l,c]=(0,t.useState)({totalMembers:0,pendingInvitations:0,activeProjects:0});(0,t.useEffect)(()=>{if(a&&a.length>0){const e=a.filter(e=>"active"===e.status).length;c(t=>(0,s.A)((0,s.A)({},t),{},{activeProjects:e}))}},[a]);const d=e=>{switch(e){case"super_admin":return"Acceso total al sistema, puede gestionar todas las organizaciones";case"organization_owner":return"Control total de la organizaci\xf3n, puede gestionar miembros y proyectos";case"organization_member_write":return"Puede crear, editar y eliminar proyectos de la organizaci\xf3n";case"organization_member_read":return"Solo puede ver proyectos de la organizaci\xf3n";default:return"Rol no definido"}},u=e=>{switch(e){case"super_admin":return"bg-red-100 text-red-800 border-red-200";case"organization_owner":return"bg-purple-100 text-purple-800 border-purple-200";case"organization_member_write":return"bg-blue-100 text-blue-800 border-blue-200";case"organization_member_read":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},h=e=>{switch(e){case"super_admin":return"Super Administrador";case"organization_owner":return"Propietario de Organizaci\xf3n";case"organization_member_write":return"Miembro con Escritura";case"organization_member_read":return"Miembro de Solo Lectura";default:return e}};return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Gesti\xf3n de Usuarios"}),(0,At.jsx)("p",{className:"text-gray-600 mt-2",children:"Administra usuarios, roles y permisos de tu organizaci\xf3n"})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l.activeProjects}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"Proyectos Activos"})]})]})}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,At.jsx)("div",{className:"border-b border-gray-200",children:(0,At.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"members",name:"Miembros",icon:"\ud83d\udc65",description:"Gestionar usuarios y roles"},{id:"roles",name:"Roles",icon:"\ud83d\udd10",description:"Configurar permisos y accesos"},{id:"invitations",name:"Invitaciones",icon:"\ud83d\udce7",description:"Ver invitaciones pendientes"},{id:"process",name:"Proceso de Cambios",icon:"\ud83d\udd04",description:"Flujo del control de cambios"}].map(e=>(0,At.jsx)("button",{onClick:()=>o(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat(i===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-lg",children:e.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium",children:e.name}),(0,At.jsx)("div",{className:"text-xs text-gray-400",children:e.description})]})]})},e.id))})}),(0,At.jsxs)("div",{className:"p-6",children:["members"===i&&(0,At.jsx)(P1,{currentProject:r,useSupabase:n,onMemberAdded:()=>{console.log("Miembro agregado, actualizando estad\xedsticas...")}}),"roles"===i&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Roles Disponibles en el Sistema"}),(0,At.jsx)("p",{className:"text-gray-600 mb-6",children:"Los roles determinan qu\xe9 acciones puede realizar cada usuario en la organizaci\xf3n."})]}),(0,At.jsx)("div",{className:"grid gap-4",children:[{role:"super_admin",permissions:["Acceso total a todas las organizaciones","Puede gestionar usuarios y roles globalmente","Puede ver, crear, editar y eliminar cualquier dato","Acceso a configuraciones del sistema"]},{role:"organization_owner",permissions:["Control total de su organizaci\xf3n","Puede gestionar miembros de la organizaci\xf3n","Puede crear, editar y eliminar proyectos","Puede asignar roles a otros miembros"]},{role:"organization_member_write",permissions:["Puede crear, editar y eliminar proyectos","Puede gestionar tareas y cronogramas","Puede gestionar riesgos y finanzas","No puede gestionar otros miembros"]},{role:"organization_member_read",permissions:["Solo puede ver proyectos y datos","No puede crear, editar o eliminar","Acceso de solo lectura a la organizaci\xf3n","Ideal para consultores o revisores"]}].map(e=>{let{role:t,permissions:r}=e;return(0,At.jsxs)("div",{className:"border rounded-lg p-4 ".concat(u(t)),children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("h4",{className:"font-semibold text-lg",children:h(t)}),(0,At.jsx)("span",{className:"text-sm font-medium",children:t})]}),(0,At.jsx)("p",{className:"text-sm mb-3 opacity-80",children:d(t)}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-medium mb-2",children:"Permisos:"}),(0,At.jsx)("ul",{className:"text-sm space-y-1",children:r.map((e,t)=>(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),e]},t))})]})]},t)})})]}),"invitations"===i&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Sistema de Invitaciones"}),(0,At.jsx)("p",{className:"text-gray-600 mb-6",children:"Las invitaciones permiten agregar nuevos usuarios a tu organizaci\xf3n de forma segura."})]}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-blue-500 text-xl mr-3",children:"\u2139\ufe0f"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"C\xf3mo Funciona el Sistema de Invitaciones"}),(0,At.jsxs)("ol",{className:"text-sm text-blue-700 space-y-2",children:[(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"1. Invitar Usuario:"})," Env\xedas una invitaci\xf3n con el email y rol deseado"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"2. Estado Pendiente:"}),' La invitaci\xf3n queda en estado "pendiente" hasta que el usuario se registre']}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"3. Registro del Usuario:"})," Cuando el usuario se registra con ese email, autom\xe1ticamente se une a la organizaci\xf3n"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"4. Acceso Inmediato:"})," El usuario obtiene acceso seg\xfan el rol asignado"]})]})]})]})}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udce7 Enviar Invitaci\xf3n"}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:'Para invitar un nuevo usuario, ve a la pesta\xf1a "Miembros" y haz clic en "Invitar Miembro".'}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,At.jsx)("p",{children:"\u2022 Ingresa el email del usuario"}),(0,At.jsx)("p",{children:"\u2022 Selecciona el rol apropiado"}),(0,At.jsx)("p",{children:"\u2022 El usuario recibir\xe1 acceso al registrarse"})]})]}),(0,At.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udd17 Compartir Enlace"}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Puedes compartir este enlace para que los usuarios se registren:"}),(0,At.jsx)("div",{className:"bg-gray-100 rounded p-2 text-sm font-mono break-all",children:"localhost"===window.location.hostname?"https://strategiapm.vercel.app":window.location.origin}),"localhost"===window.location.hostname&&(0,At.jsx)("p",{className:"text-xs text-amber-600 mt-2",children:"\u26a0\ufe0f En desarrollo local - Usa el enlace de producci\xf3n para compartir"})]})]})]}),"process"===i&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\ud83d\udd04 Proceso de Control de Cambios"}),(0,At.jsx)("p",{className:"text-gray-600 mb-6",children:"Este diagrama muestra c\xf3mo participan los roles funcionales en el proceso de gesti\xf3n de cambios. \xdasalo como referencia al asignar roles a los miembros de tu organizaci\xf3n."})]}),(0,At.jsx)(D1,{}),(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-yellow-600 text-xl mr-3",children:"\ud83d\udca1"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Tip: Asigna Roles Estrat\xe9gicamente"}),(0,At.jsx)("p",{className:"text-sm text-yellow-700",children:"Al asignar roles funcionales a tus miembros, considera el nivel de autoridad que necesitan en el control de cambios. Por ejemplo, un Project Manager puede aprobar cambios hasta $25K, mientras que un Sponsor puede aprobar hasta $100K."})]})]})})]})]})]})]})},I1=e=>{let{onComplete:r}=e;const[n,a]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{const e=setTimeout(()=>{a(!1),setTimeout(()=>{r()},500)},6e3);return()=>clearTimeout(e)},[r]),n?(0,At.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-indigo-500 to-purple-600 overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-radial-gradient from-indigo-400/10 to-transparent animate-pulse"}),(0,At.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute top-[10%] left-[10%] w-15 h-15 bg-blue-500 rotate-45 opacity-10 animate-float"}),(0,At.jsx)("div",{className:"absolute top-[20%] right-[15%] w-10 h-10 bg-red-500 rounded-full opacity-10 animate-float",style:{animationDelay:"1s"}}),(0,At.jsx)("div",{className:"absolute bottom-[20%] left-[20%] w-0 h-0 border-l-[30px] border-r-[30px] border-b-[50px] border-l-transparent border-r-transparent border-b-orange-500 opacity-10 animate-float",style:{animationDelay:"2s"}}),(0,At.jsx)("div",{className:"absolute bottom-[15%] right-[10%] w-12 h-8 bg-purple-500 rounded-full opacity-10 animate-float",style:{animationDelay:"3s"}})]}),(0,At.jsxs)("div",{className:"relative z-10 w-full max-w-md h-[400px] bg-white/95 backdrop-blur-lg rounded-2xl shadow-xl flex flex-col items-center justify-center text-center p-8",children:[(0,At.jsx)("div",{className:"absolute top-5 right-5 bg-slate-800 text-white px-4 py-2 rounded-full text-sm font-bold tracking-wider",children:"PMBOK BASED"}),(0,At.jsx)("div",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent mb-2 tracking-tight",children:"StrategiaPM"}),(0,At.jsx)("div",{className:"text-lg text-gray-600 mb-6 font-light",children:"Donde la estrategia se convierte en resultados"}),(0,At.jsxs)("div",{className:"flex justify-around w-full mt-6",children:[(0,At.jsxs)("div",{className:"flex flex-col items-center opacity-80",children:[(0,At.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-lg mb-1 shadow-md shadow-indigo-500/30",children:"\ud83d\udcca"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 font-medium text-center",children:["Planificaci\xf3n",(0,At.jsx)("br",{}),"Estrat\xe9gica"]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center opacity-80",children:[(0,At.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-lg mb-1 shadow-md shadow-indigo-500/30",children:"\u26a1"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 font-medium text-center",children:["Ejecuci\xf3n",(0,At.jsx)("br",{}),"Eficiente"]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center opacity-80",children:[(0,At.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-lg mb-1 shadow-md shadow-indigo-500/30",children:"\ud83c\udfaf"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 font-medium text-center",children:["Resultados",(0,At.jsx)("br",{}),"Medibles"]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center opacity-80",children:[(0,At.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-lg mb-1 shadow-md shadow-indigo-500/30",children:"\ud83d\udc65"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 font-medium text-center",children:["Colaboraci\xf3n",(0,At.jsx)("br",{}),"en Equipo"]})]})]}),(0,At.jsx)("div",{className:"absolute bottom-5 right-5 text-gray-400 text-sm",children:"v1.0"})]}),(0,At.jsx)("style",{children:"\n        @keyframes float {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          50% { transform: translateY(-20px) rotate(10deg); }\n        }\n        .animate-float {\n          animation: float 6s ease-in-out infinite;\n        }\n        .bg-radial-gradient {\n          background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);\n        }\n      "})]}):null};const M1=new class{async isSuperAdmin(){try{const e=kt.default.getCurrentUser();if(!e)return!1;const{data:t}=await kt.default.supabase.from("super_admins").select("id").eq("user_id",e.id).single();if(t)return!0;const{data:r}=await kt.default.supabase.from("user_organization_roles").select("role").eq("user_id",e.id).eq("role","super_admin").single();return null!==r}catch(e){return console.error("Error verificando super-admin:",e),!1}}async listAllOrganizations(){try{const{data:e,error:t}=await kt.default.supabase.from("organizations").select("\n          *,\n          members_count:organization_members(count),\n          projects_count:projects(count)\n        ").order("created_at",{ascending:!1});if(t)throw t;return{data:null===e||void 0===e?void 0:e.map(e=>{var t,r,n,a;return(0,s.A)((0,s.A)({},e),{},{member_count:(null===(t=e.members_count)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.count)||0,project_count:(null===(n=e.projects_count)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.count)||0})}),error:null}}catch(e){return console.error("Error listando organizaciones:",e),{data:null,error:e}}}async getOrganizationDetails(e){try{const{data:t,error:r}=await kt.default.supabase.from("organizations").select("\n          *,\n          members:organization_members(\n            id,\n            user_email,\n            user_id,\n            role,\n            status,\n            invited_at,\n            accepted_at,\n            created_at\n          ),\n          projects:projects(\n            id,\n            name,\n            status,\n            progress,\n            manager,\n            start_date,\n            end_date,\n            budget\n          )\n        ").eq("id",e).single();if(r)throw r;return{data:t,error:null}}catch(t){return console.error("Error obteniendo detalles:",t),{data:null,error:t}}}async getOrganizationMetrics(e){try{const[t,r,n,a]=await Promise.all([kt.default.supabase.from("projects").select("id",{count:"exact",head:!0}).eq("organization_id",e),kt.default.supabase.from("tasks").select("id",{count:"exact",head:!0}),kt.default.supabase.from("organization_members").select("id",{count:"exact",head:!0}).eq("organization_id",e).eq("status","active"),kt.default.supabase.from("risks").select("id",{count:"exact",head:!0})]);return{projectsCount:t.count||0,tasksCount:r.count||0,activeMembersCount:n.count||0,risksCount:a.count||0}}catch(t){return console.error("Error obteniendo m\xe9tricas:",t),{projectsCount:0,tasksCount:0,activeMembersCount:0,risksCount:0}}}async getGlobalStats(){try{var e;const{data:t,error:r}=await kt.default.supabase.rpc("get_super_admin_stats");if(r&&"42883"!==r.code)throw r;if(t)return t;const[n,a,s,i]=await Promise.all([kt.default.supabase.from("organizations").select("*"),kt.default.supabase.from("projects").select("id",{count:"exact",head:!0}),kt.default.supabase.from("tasks").select("id",{count:"exact",head:!0}),kt.default.supabase.from("organization_members").select("id",{count:"exact",head:!0})]);return{total_organizations:(null===(e=n.data)||void 0===e?void 0:e.length)||0,total_projects:a.count||0,total_tasks:s.count||0,active_members:i.count||0,organizations_by_status:n.data||[]}}catch(t){return console.error("Error obteniendo estad\xedsticas globales:",t),{total_organizations:0,total_projects:0,total_tasks:0,active_members:0,organizations_by_status:[]}}}async updateOrganization(e,t){try{const{data:r,error:n}=await kt.default.supabase.from("organizations").update((0,s.A)((0,s.A)({},t),{},{updated_at:(new Date).toISOString()})).eq("id",e).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error actualizando organizaci\xf3n:",r),{data:null,error:r}}}async deleteOrganization(e){try{const{error:t}=await kt.default.supabase.from("organizations").delete().eq("id",e);if(t)throw t;return{error:null}}catch(t){return console.error("Error eliminando organizaci\xf3n:",t),{error:t}}}},R1=e=>{let{children:r}=e;const{isAuthenticated:n,loading:a}=Pt(),[s,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!0);(0,t.useEffect)(()=>{c()},[n]);const c=async()=>{if(!n)return i(!1),void l(!1);try{const e=await M1.isSuperAdmin();i(e)}catch(e){console.error("Error verificando autorizaci\xf3n:",e),i(!1)}finally{l(!1)}};return a||o?(0,At.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto"}),(0,At.jsx)("p",{className:"mt-4 text-gray-600",children:"Verificando permisos..."})]})}):n?s?r:(0,At.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,At.jsxs)("div",{className:"text-center max-w-md",children:[(0,At.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acceso Denegado"}),(0,At.jsx)("p",{className:"text-gray-600 mb-6",children:"No tienes permisos de super-administrador para acceder a esta secci\xf3n."}),(0,At.jsx)("a",{href:"/",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Volver al Dashboard"})]})}):(0,At.jsx)(Te,{to:"/login",replace:!0})},L1=lV("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),F1=lV("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),B1=lV("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),z1=lV("folder-kanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),U1=lV("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),q1=lV("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),W1=e=>{let{organizations:r,onRefresh:n}=e;const a=he(),[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),f=(null===r||void 0===r?void 0:r.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase())}))||[];return(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,At.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\ud83d\udcca Organizaciones"}),(0,At.jsxs)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:[f.length," total"]})]}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)(RQ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,At.jsx)("input",{type:"text",placeholder:"Buscar organizaci\xf3n...",value:s,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"})]})]}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organizaci\xf3n"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Miembros"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proyectos"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Creaci\xf3n"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===f.length?(0,At.jsx)("tr",{children:(0,At.jsxs)("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[(0,At.jsx)(B1,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,At.jsx)("p",{className:"text-gray-500",children:s?"No se encontraron organizaciones":"No hay organizaciones registradas"})]})}):f.map(e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(B1,{className:"w-8 h-8 text-purple-600"})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id.substring(0,8),"..."]})]})]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(TQ,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:e.member_count||0})]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(z1,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:e.project_count||0})]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("es-MX")}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("button",{onClick:()=>(e=>{a("/admin/organizations/".concat(e.id))})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver detalles",children:(0,At.jsx)(q1,{className:"w-4 h-4"})}),(0,At.jsx)("button",{onClick:()=>(e=>{l(e),d(!0)})(e),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:(0,At.jsx)(FQ,{className:"w-4 h-4"})})]})})]},e.id))})]})}),c&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,At.jsxs)("div",{className:"flex items-center mb-4",children:[(0,At.jsx)(pV,{className:"w-6 h-6 text-red-600 mr-3"}),(0,At.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Confirmar Eliminaci\xf3n"})]}),(0,At.jsxs)("p",{className:"text-gray-600 mb-4",children:["\xbfEst\xe1s seguro que deseas eliminar la organizaci\xf3n ",(0,At.jsxs)("strong",{children:['"',null===o||void 0===o?void 0:o.name,'"']}),"?"]}),(0,At.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:[(0,At.jsx)("p",{className:"text-sm text-red-800",children:"\u26a0\ufe0f Esta acci\xf3n eliminar\xe1:"}),(0,At.jsxs)("ul",{className:"text-sm text-red-700 ml-4 mt-2 list-disc",children:[(0,At.jsx)("li",{children:"Todos los proyectos"}),(0,At.jsx)("li",{children:"Todas las tareas"}),(0,At.jsx)("li",{children:"Todos los miembros"}),(0,At.jsx)("li",{children:"Todos los archivos"})]}),(0,At.jsx)("p",{className:"text-sm text-red-800 font-bold mt-2",children:"Esta acci\xf3n NO se puede deshacer."})]}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsx)("button",{onClick:()=>{d(!1),l(null)},disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,At.jsx)("button",{onClick:async()=>{if(o){h(!0);try{const{error:e}=await M1.deleteOrganization(o.id);e?alert("Error al eliminar: ".concat(e.message)):(alert("Organizaci\xf3n eliminada exitosamente"),d(!1),l(null),null===n||void 0===n||n())}catch(e){console.error("Error eliminando organizaci\xf3n:",e),alert("Error al eliminar la organizaci\xf3n")}finally{h(!1)}}},disabled:u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:u?"Eliminando...":"Eliminar"})]})]})})]})},H1=()=>{const e=he(),[r,n]=(0,t.useState)(null),[a,s]=(0,t.useState)(!0);(0,t.useEffect)(()=>{i()},[]);const i=async()=>{s(!0);try{const e=await M1.getGlobalStats();n(e)}catch(e){console.error("Error cargando estad\xedsticas:",e)}finally{s(!1)}},o=e=>{let{title:t,value:r,icon:n,color:a,subtitle:s}=e;return(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t}),(0,At.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:r}),s&&(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:s})]}),(0,At.jsx)("div",{className:"p-3 rounded-lg bg-gradient-to-r ".concat(a),children:(0,At.jsx)(n,{className:"w-6 h-6 text-white"})})]})})};return a?(0,At.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,At.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,At.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,At.jsx)(L1,{className:"w-5 h-5 text-gray-600"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\ud83d\udd27 Panel de Super-Admin"}),(0,At.jsx)("p",{className:"text-gray-600 mt-1",children:"Gesti\xf3n global de StrategiaPM"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(F1,{className:"w-5 h-5 text-green-600"}),(0,At.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Sistema Operativo"})]})]})})}),(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,At.jsx)(o,{title:"Organizaciones Totales",value:(null===r||void 0===r?void 0:r.total_organizations)||0,icon:B1,color:"from-blue-600 to-cyan-600"}),(0,At.jsx)(o,{title:"Proyectos Totales",value:(null===r||void 0===r?void 0:r.total_projects)||0,icon:z1,color:"from-purple-600 to-indigo-600"}),(0,At.jsx)(o,{title:"Tareas Totales",value:(null===r||void 0===r?void 0:r.total_tasks)||0,icon:U1,color:"from-green-600 to-emerald-600"}),(0,At.jsx)(o,{title:"Miembros Activos",value:(null===r||void 0===r?void 0:r.active_members)||0,icon:TQ,color:"from-orange-600 to-red-600"})]}),(0,At.jsx)(W1,{organizations:(null===r||void 0===r?void 0:r.organizations_by_status)||[],onRefresh:i})]})]})},V1=lV("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),G1=()=>{var e,r,n,a,s;const{orgId:i}=fe(),o=he(),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null),[h,f]=(0,t.useState)(!0),[p,m]=(0,t.useState)("overview");(0,t.useEffect)(()=>{g()},[i]);const g=async()=>{f(!0);try{const[e,t]=await Promise.all([M1.getOrganizationDetails(i),M1.getOrganizationMetrics(i)]);e.data&&c(e.data),t&&u(t)}catch(e){console.error("Error cargando datos:",e),alert("Error al cargar los datos de la organizaci\xf3n")}finally{f(!1)}},v=e=>{let{title:t,value:r,icon:n,color:a}=e;return(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r})]}),(0,At.jsx)("div",{className:"p-3 rounded-lg bg-gradient-to-r ".concat(a),children:(0,At.jsx)(n,{className:"w-5 h-5 text-white"})})]})})};return h?(0,At.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):l?(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,At.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,At.jsx)("button",{onClick:()=>o("/admin"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,At.jsx)(L1,{className:"w-5 h-5 text-gray-600"})}),(0,At.jsx)(B1,{className:"w-8 h-8 text-purple-600"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:l.name}),(0,At.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",l.id]})]})]}),(0,At.jsxs)("div",{className:"flex space-x-4 border-b border-gray-200",children:[(0,At.jsx)("button",{onClick:()=>m("overview"),className:"px-4 py-2 border-b-2 font-medium text-sm transition-colors ".concat("overview"===p?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Vista General"}),(0,At.jsxs)("button",{onClick:()=>m("members"),className:"px-4 py-2 border-b-2 font-medium text-sm transition-colors ".concat("members"===p?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:["Miembros (",(null===(e=l.members)||void 0===e?void 0:e.length)||0,")"]}),(0,At.jsxs)("button",{onClick:()=>m("projects"),className:"px-4 py-2 border-b-2 font-medium text-sm transition-colors ".concat("projects"===p?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:["Proyectos (",(null===(r=l.projects)||void 0===r?void 0:r.length)||0,")"]})]})]})}),(0,At.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===p&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,At.jsx)(v,{title:"Proyectos",value:(null===d||void 0===d?void 0:d.projectsCount)||0,icon:z1,color:"from-blue-600 to-cyan-600"}),(0,At.jsx)(v,{title:"Tareas",value:(null===d||void 0===d?void 0:d.tasksCount)||0,icon:U1,color:"from-green-600 to-emerald-600"}),(0,At.jsx)(v,{title:"Miembros Activos",value:(null===d||void 0===d?void 0:d.activeMembersCount)||0,icon:TQ,color:"from-purple-600 to-indigo-600"}),(0,At.jsx)(v,{title:"Riesgos",value:(null===d||void 0===d?void 0:d.risksCount)||0,icon:DQ,color:"from-orange-600 to-red-600"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,At.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Informaci\xf3n General"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,At.jsx)(cV,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Fecha de Creaci\xf3n"}),(0,At.jsx)("p",{className:"text-sm font-medium text-gray-900",children:new Date(l.created_at).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,At.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,At.jsx)(OQ,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"Owner ID"}),(0,At.jsx)("p",{className:"text-sm font-medium text-gray-900 font-mono text-xs",children:l.owner_id||"N/A"})]})]})]})]})]}),"members"===p&&(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usuario"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rol"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha de Ingreso"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(n=l.members)||void 0===n?void 0:n.map(e=>{return(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(V1,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-900",children:e.user_email})]})}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat((r=e.role,{owner:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",organization_member_write:"bg-green-100 text-green-800",organization_member_read:"bg-gray-100 text-gray-800"}[r]||"bg-gray-100 text-gray-800")),children:e.role})}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat((t=e.status,{active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",inactive:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800")),children:e.status})}),(0,At.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.accepted_at?new Date(e.accepted_at).toLocaleDateString("es-MX"):e.invited_at?"Invitado: ".concat(new Date(e.invited_at).toLocaleDateString("es-MX")):"N/A"})]},e.id);var t,r})})]})})}),"projects"===p&&(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proyecto"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Manager"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Progreso"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fechas"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===(null===(a=l.projects)||void 0===a?void 0:a.length)?(0,At.jsx)("tr",{children:(0,At.jsxs)("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[(0,At.jsx)(z1,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,At.jsx)("p",{className:"text-gray-500",children:"No hay proyectos en esta organizaci\xf3n"})]})}):null===(s=l.projects)||void 0===s?void 0:s.map(e=>{return(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsxs)("td",{className:"px-6 py-4",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.id.substring(0,8),"..."]})]}),(0,At.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.manager||"N/A"}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat((t=e.status,{active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800","on-hold":"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800")),children:e.status})}),(0,At.jsx)("td",{className:"px-6 py-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:(0,At.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"".concat(e.progress||0,"%")}})}),(0,At.jsxs)("span",{className:"text-sm text-gray-600",children:[e.progress||0,"%"]})]})}),(0,At.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.start_date&&e.end_date?(0,At.jsxs)("div",{className:"text-xs",children:[(0,At.jsx)("div",{children:new Date(e.start_date).toLocaleDateString("es-MX")}),(0,At.jsx)("div",{children:new Date(e.end_date).toLocaleDateString("es-MX")})]}):"N/A"})]},e.id);var t})})]})})})]})]}):(0,At.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)(DQ,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Organizaci\xf3n no encontrada"}),(0,At.jsx)("button",{onClick:()=>o("/admin"),className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Volver al Panel"})]})})};const K1=new class{constructor(){this.dataFileName="portfolio-data.json",this.backupDir="backups",this.syncInterval=3e4,this.isInitialized=!1,this.syncTimer=null,this.fileCreated=!1,this.lastBackupTime=null,this.dbName="MiDashboardDB",this.dbVersion=1,this.storeName="portfolioData"}async initialize(){if(!this.isInitialized)try{await this.createBackupDirectory(),this.startAutoSync(),this.isInitialized=!0,console.log("\u2705 FilePersistenceService inicializado correctamente")}catch(e){console.error("\u274c Error inicializando FilePersistenceService:",e)}}async createBackupDirectory(){try{console.log("\ud83d\udcc1 Directorio de respaldos creado/verificado")}catch(e){console.error("Error creando directorio de respaldos:",e)}}async loadData(){try{if(this.isSafari()){console.log("\ud83c\udf4e Safari detectado - cargando desde IndexedDB");const t=await this.loadFromIndexedDB();var e;if(t)return console.log("\ud83d\udcc2 Datos cargados desde IndexedDB - globalResources:",t.globalResources),console.log("\ud83d\udcc2 Cantidad de recursos cargados:",(null===(e=t.globalResources)||void 0===e?void 0:e.length)||0),t;const r=localStorage.getItem("mi-dashboard-portfolio");if(r){const e=JSON.parse(r);return console.log("\ud83d\udcc2 Datos cargados desde localStorage (fallback)"),e}return null}if("showOpenFilePicker"in window)try{const[e]=await window.showOpenFilePicker({types:[{description:"JSON files",accept:{"application/json":[".json"]}}]});this.fileHandle=e;const t=await e.getFile(),r=await t.text(),n=JSON.parse(r);return console.log("\ud83d\udcc2 Datos cargados desde archivo del sistema:",n),n}catch(r){console.log("File System Access API no disponible, usando localStorage")}console.log("\ud83d\udcc2 Cargando datos desde localStorage...");const n=localStorage.getItem("mi-dashboard-portfolio");if(n){var t;const e=JSON.parse(n);return console.log("\ud83d\udcc2 Datos cargados - globalResources:",e.globalResources),console.log("\ud83d\udcc2 Cantidad de recursos cargados:",(null===(t=e.globalResources)||void 0===t?void 0:t.length)||0),e}return console.log("\ud83d\udcc2 No hay datos guardados"),null}catch(r){return console.error("\u274c Error cargando datos:",r),null}}async loadFromFile(){try{if(console.log("\ud83d\udcc2 Intentando cargar desde archivo..."),"showOpenFilePicker"in window)try{const[e]=await window.showOpenFilePicker({types:[{description:"JSON files",accept:{"application/json":[".json"]}}]}),t=await e.getFile(),r=await t.text(),n=JSON.parse(r);return console.log("\ud83d\udcc2 Datos cargados desde archivo del sistema:",n),n}catch(e){console.log("File System Access API no disponible, usando input de archivo")}const t=document.createElement("input");return t.type="file",t.accept=".json",t.style.display="none",new Promise(r=>{t.onchange=t=>{const n=t.target.files[0];if(n){const t=new FileReader;t.onload=t=>{try{const e=JSON.parse(t.target.result);console.log("\ud83d\udcc2 Datos cargados desde archivo:",e),r(e)}catch(e){console.error("\u274c Error parseando archivo:",e),r(null)}},t.readAsText(n)}else r(null)},document.body.appendChild(t),t.click(),document.body.removeChild(t)})}catch(e){return console.error("\u274c Error cargando desde archivo:",e),null}}async saveData(e){try{const r=JSON.stringify(e,null,2),n=new Blob([r]).size;n>5242880&&(console.warn("\u26a0\ufe0f Datos exceden l\xedmite de memoria:",n,"bytes"),this.cleanOldData(e)),localStorage.setItem("mi-dashboard-portfolio",r);try{await this.saveToIndexedDB(e),this.fileCreated=!0,console.log("\u2705 Datos guardados exitosamente en IndexedDB")}catch(t){console.error("\u274c Error guardando en IndexedDB:",t),console.log("\u26a0\ufe0f Los datos se mantienen en localStorage como respaldo")}const a=new CustomEvent("fileDataSaved",{detail:{fileName:this.dataFileName,timestamp:(new Date).toISOString(),dataSize:r.length,path:"IndexedDB + localStorage"}});return window.dispatchEvent(a),!0}catch(t){return console.error("Error guardando datos:",t),!1}}async createDataFile(e){try{const t=JSON.stringify(e,null,2);localStorage.setItem("mi-dashboard-portfolio",t),await this.saveToIndexedDB(e),this.fileCreated=!0,console.log("\u2705 Archivo de datos creado en IndexedDB (persistencia local)")}catch(t){console.error("Error creando archivo de datos:",t)}}downloadDataFile(e,t){const r=JSON.stringify(e,null,2),n=new Blob([r],{type:"application/json"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download=t,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),console.log("\ud83d\udcbe Archivo ".concat(t," descargado para actualizaci\xf3n"))}isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}cleanDataForIndexedDB(e){try{return JSON.parse(JSON.stringify(e))}catch(t){console.warn("\u26a0\ufe0f Error limpiando datos, usando clonaci\xf3n manual:",t);const n={};for(const a in e)if(e.hasOwnProperty(a))try{Array.isArray(e[a])?n[a]=e[a].map(e=>"object"===typeof e&&null!==e?JSON.parse(JSON.stringify(e)):e):"object"===typeof e[a]&&null!==e[a]?n[a]=JSON.parse(JSON.stringify(e[a])):n[a]=e[a]}catch(r){console.warn("\u26a0\ufe0f Saltando propiedad no serializable: ".concat(a),r)}return n}}async saveToIndexedDB(e){return new Promise((t,r)=>{console.log("\ud83d\udd0d Abriendo IndexedDB para guardar...");const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{console.error("\u274c Error abriendo IndexedDB:",n.error),r(n.error)},n.onsuccess=()=>{console.log("\u2705 IndexedDB abierto para guardar");const a=n.result.transaction([this.storeName],"readwrite").objectStore(this.storeName);console.log("\ud83d\udcbe Guardando datos en IndexedDB..."),console.log("\ud83d\udcbe Datos a guardar:",Object.keys(e));const s=this.cleanDataForIndexedDB(e),i=a.put(s,"portfolio-data");i.onsuccess=()=>{console.log("\ud83d\udcbe Datos guardados en IndexedDB (persistencia real)"),console.log("\ud83d\udcbe Clave guardada: portfolio-data"),t()},i.onerror=()=>{console.error("\u274c Error guardando en IndexedDB:",i.error),r(i.error)}},n.onupgradeneeded=e=>{console.log("\ud83d\udd27 Creando/actualizando estructura de IndexedDB para guardar...");const t=e.target.result;t.objectStoreNames.contains(this.storeName)||(t.createObjectStore(this.storeName),console.log("\u2705 ObjectStore creado para guardar:",this.storeName))}})}async loadFromIndexedDB(){return new Promise((e,t)=>{console.log("\ud83d\udd0d Intentando abrir IndexedDB...");const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>{console.error("\u274c Error abriendo IndexedDB:",r.error),t(r.error)},r.onsuccess=()=>{console.log("\u2705 IndexedDB abierto correctamente");const n=r.result.transaction([this.storeName],"readonly").objectStore(this.storeName);console.log("\ud83d\udd0d Buscando datos en IndexedDB...");const a=n.get("portfolio-data");a.onsuccess=()=>{console.log("\ud83d\udd0d Resultado de b\xfasqueda en IndexedDB:",a.result),a.result?(console.log("\ud83d\udcc2 Datos cargados desde IndexedDB (persistencia real)"),console.log("\ud83d\udcc2 Datos encontrados:",Object.keys(a.result)),e(a.result)):(console.log("\ud83d\udcc2 No hay datos en IndexedDB"),e(null))},a.onerror=()=>{console.error("\u274c Error cargando desde IndexedDB:",a.error),t(a.error)}},r.onupgradeneeded=e=>{console.log("\ud83d\udd27 Creando/actualizando estructura de IndexedDB...");const t=e.target.result;t.objectStoreNames.contains(this.storeName)||(t.createObjectStore(this.storeName),console.log("\u2705 ObjectStore creado:",this.storeName))}})}async createBackup(e){try{const t=(new Date).toISOString(),r="backup-".concat(t.split("T")[0],"-").concat(Date.now(),".json"),n=new Date;if(this.lastBackupTime&&n-this.lastBackupTime<6e5)return console.log("\ud83d\udce6 Respaldo omitido - muy reciente"),!0;const a=JSON.stringify(e,null,2),s=new Blob([a],{type:"application/json"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=r,o.style.display="none";const l=window.location.origin.replace("localhost:3000","mi-dashboard");o.setAttribute("data-path",l),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),this.lastBackupTime=n,console.log("\ud83d\udce6 Respaldo autom\xe1tico creado:",r),console.log("\ud83d\udce6 Respaldo guardado en la ra\xedz del proyecto");const c=new CustomEvent("autoBackupCreated",{detail:{fileName:r,timestamp:t,dataSize:JSON.stringify(e).length,path:"ra\xedz del proyecto"}});return window.dispatchEvent(c),!0}catch(t){return console.error("Error creando respaldo:",t),!1}}startAutoSync(){this.syncTimer&&clearInterval(this.syncTimer),this.syncTimer=setInterval(()=>{this.performAutoSync()},this.syncInterval),console.log("\ud83d\udd04 Sincronizaci\xf3n autom\xe1tica iniciada cada 30 segundos")}stopAutoSync(){this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null,console.log("\u23f9\ufe0f Sincronizaci\xf3n autom\xe1tica detenida"))}async performAutoSync(){try{console.log("\ud83d\udd04 Ejecutando sincronizaci\xf3n autom\xe1tica...");const e=localStorage.getItem("mi-dashboard-portfolio");if(e){const t=JSON.parse(e);await this.saveToIndexedDB(t),console.log("\u2705 Sincronizaci\xf3n autom\xe1tica completada (IndexedDB)")}else console.log("\u26a0\ufe0f No hay datos para sincronizar")}catch(e){console.error("\u274c Error en sincronizaci\xf3n autom\xe1tica:",e)}}cleanOldData(e){try{if(console.log("\ud83e\uddf9 Limpiando datos antiguos para reducir tama\xf1o..."),e.auditLogsByProject)for(const t in e.auditLogsByProject){const r=e.auditLogsByProject[t];Array.isArray(r)&&r.length>100&&(e.auditLogsByProject[t]=r.slice(-100),console.log("\ud83e\uddf9 Limpiados logs antiguos del proyecto ".concat(t)))}if(e.filesByProject)for(const t in e.filesByProject){const r=e.filesByProject[t];Array.isArray(r)&&r.length>50&&(e.filesByProject[t]=r.slice(-50),console.log("\ud83e\uddf9 Limpiados archivos antiguos del proyecto ".concat(t)))}console.log("\u2705 Limpieza de datos completada")}catch(t){console.error("\u274c Error limpiando datos antiguos:",t)}}exportData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=(new Date).toISOString(),n=t||"strategiapm-backup-".concat(r.split("T")[0],".json"),a=JSON.stringify(e,null,2),s=new Blob([a],{type:"application/json"}),i=URL.createObjectURL(s),o=document.createElement("a");return o.href=i,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),console.log("\ud83d\udce4 Backup manual creado:",n),!0}catch(r){return console.error("Error exportando datos:",r),!1}}async createManualBackup(e){try{const t=(new Date).toISOString(),r="strategiapm-backup-".concat(t.split("T")[0],"-").concat(Date.now(),".json");return this.exportData(e,r),console.log("\ud83d\udce6 Backup manual creado:",r),!0}catch(t){return console.error("Error creando backup manual:",t),!1}}async importData(e){try{return new Promise((t,r)=>{const n=new FileReader;n.onload=async n=>{try{const r=JSON.parse(n.target.result);await this.saveData(r);const a=new CustomEvent("fileDataImported",{detail:{fileName:e.name,timestamp:(new Date).toISOString(),dataSize:JSON.stringify(r).length}});window.dispatchEvent(a),t(r)}catch(a){r(a)}},n.onerror=r,n.readAsText(e)})}catch(t){throw console.error("Error importando datos:",t),t}}getStatus(){return{isInitialized:this.isInitialized,isSyncing:null!==this.syncTimer,syncInterval:this.syncInterval,dataFileName:this.dataFileName,backupDir:this.backupDir}}},$1=K1,Y1={projects:[],currentProjectId:null,workPackages:[],purchaseOrders:[],advances:[],invoices:[],risks:[],viewMode:"dashboard",reportingDate:(new Date).toISOString().split("T")[0],isLoading:!1,error:null},X1={SET_PROJECTS:"SET_PROJECTS",SET_CURRENT_PROJECT:"SET_CURRENT_PROJECT",SET_WORK_PACKAGES:"SET_WORK_PACKAGES",SET_PURCHASE_ORDERS:"SET_PURCHASE_ORDERS",SET_ADVANCES:"SET_ADVANCES",SET_INVOICES:"SET_INVOICES",SET_RISKS:"SET_RISKS",SET_VIEW_MODE:"SET_VIEW_MODE",SET_REPORTING_DATE:"SET_REPORTING_DATE",SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",ADD_PROJECT:"ADD_PROJECT",UPDATE_PROJECT:"UPDATE_PROJECT",DELETE_PROJECT:"DELETE_PROJECT",ADD_WORK_PACKAGE:"ADD_WORK_PACKAGE",UPDATE_WORK_PACKAGE:"UPDATE_WORK_PACKAGE",DELETE_WORK_PACKAGE:"DELETE_WORK_PACKAGE",ADD_PURCHASE_ORDER:"ADD_PURCHASE_ORDER",UPDATE_PURCHASE_ORDER:"UPDATE_PURCHASE_ORDER",DELETE_PURCHASE_ORDER:"DELETE_PURCHASE_ORDER",ADD_ADVANCE:"ADD_ADVANCE",UPDATE_ADVANCE:"UPDATE_ADVANCE",DELETE_ADVANCE:"DELETE_ADVANCE",ADD_INVOICE:"ADD_INVOICE",UPDATE_INVOICE:"UPDATE_INVOICE",DELETE_INVOICE:"DELETE_INVOICE",ADD_RISK:"ADD_RISK",UPDATE_RISK:"UPDATE_RISK",DELETE_RISK:"DELETE_RISK"};function J1(e,t){switch(t.type){case X1.SET_PROJECTS:return Object.assign({},e,{projects:t.payload});case X1.SET_CURRENT_PROJECT:return Object.assign({},e,{currentProjectId:t.payload});case X1.SET_WORK_PACKAGES:return Object.assign({},e,{workPackages:t.payload});case X1.SET_PURCHASE_ORDERS:return Object.assign({},e,{purchaseOrders:t.payload});case X1.SET_ADVANCES:return Object.assign({},e,{advances:t.payload});case X1.SET_INVOICES:return Object.assign({},e,{invoices:t.payload});case X1.SET_RISKS:return Object.assign({},e,{risks:t.payload});case X1.SET_VIEW_MODE:return Object.assign({},e,{viewMode:t.payload});case X1.SET_REPORTING_DATE:return Object.assign({},e,{reportingDate:t.payload});case X1.SET_LOADING:return Object.assign({},e,{isLoading:t.payload});case X1.SET_ERROR:return Object.assign({},e,{error:t.payload});case X1.ADD_PROJECT:return Object.assign({},e,{projects:e.projects.slice().concat([t.payload])});case X1.UPDATE_PROJECT:return Object.assign({},e,{projects:e.projects.map(e=>e.id===t.payload.id?t.payload:e)});case X1.DELETE_PROJECT:return Object.assign({},e,{projects:e.projects.filter(e=>e.id!==t.payload)});case X1.ADD_WORK_PACKAGE:return Object.assign({},e,{workPackages:e.workPackages.slice().concat([t.payload])});case X1.UPDATE_WORK_PACKAGE:return Object.assign({},e,{workPackages:e.workPackages.map(e=>e.id===t.payload.id?t.payload:e)});case X1.DELETE_WORK_PACKAGE:return Object.assign({},e,{workPackages:e.workPackages.filter(e=>e.id!==t.payload)});case X1.ADD_PURCHASE_ORDER:return Object.assign({},e,{purchaseOrders:e.purchaseOrders.slice().concat([t.payload])});case X1.UPDATE_PURCHASE_ORDER:return Object.assign({},e,{purchaseOrders:e.purchaseOrders.map(e=>e.id===t.payload.id?t.payload:e)});case X1.DELETE_PURCHASE_ORDER:return Object.assign({},e,{purchaseOrders:e.purchaseOrders.filter(e=>e.id!==t.payload)});case X1.ADD_ADVANCE:return Object.assign({},e,{advances:e.advances.slice().concat([t.payload])});case X1.UPDATE_ADVANCE:return Object.assign({},e,{advances:e.advances.map(e=>e.id===t.payload.id?t.payload:e)});case X1.DELETE_ADVANCE:return Object.assign({},e,{advances:e.advances.filter(e=>e.id!==t.payload)});case X1.ADD_INVOICE:return Object.assign({},e,{invoices:e.invoices.slice().concat([t.payload])});case X1.UPDATE_INVOICE:return Object.assign({},e,{invoices:e.invoices.map(e=>e.id===t.payload.id?t.payload:e)});case X1.DELETE_INVOICE:return Object.assign({},e,{invoices:e.invoices.filter(e=>e.id!==t.payload)});case X1.ADD_RISK:return Object.assign({},e,{risks:e.risks.slice().concat([t.payload])});case X1.UPDATE_RISK:return Object.assign({},e,{risks:e.risks.map(e=>e.id===t.payload.id?t.payload:e)});case X1.DELETE_RISK:return Object.assign({},e,{risks:e.risks.filter(e=>e.id!==t.payload)});default:return e}}const Z1=(0,t.createContext)();function Q1(e){let{children:r}=e;const[n,a]=(0,t.useReducer)(J1,Y1),i=(0,s.A)((0,s.A)({},n),{},{dispatch:a,getCurrentProject:()=>n.projects.find(e=>e.id===n.currentProjectId)||n.projects[0],getWorkPackagesByProject:e=>n.workPackages.filter(t=>t.projectId===e),getPurchaseOrdersByWorkPackage:e=>n.purchaseOrders.filter(t=>t.workPackageId===e),getInvoicesByPurchaseOrder:e=>n.invoices.filter(t=>t.purchaseOrderId===e),getAdvancesByPurchaseOrder:e=>n.advances.filter(t=>t.purchaseOrderId===e),getRisksByProject:e=>n.risks.filter(t=>t.projectId===e),ACTIONS:X1});return(0,At.jsx)(Z1.Provider,{value:i,children:r})}const e2=(0,t.createContext)(null),t2=()=>{const e=(0,t.useContext)(e2);if(!e)throw new Error("useProjects debe usarse dentro de ProjectsProvider");return e},r2=e=>{let{children:r}=e;const[n,a]=(0,t.useState)([]),i=(0,t.useCallback)(()=>{const e=localStorage.getItem("lastSelectedProjectId");if(e){const t=n.find(t=>t.id===e);if(t&&"active"===t.status)return e}const t=n.find(e=>"active"===e.status);return t?t.id:n.length>0?n[0].id:null},[n]),[o,l]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(n.length>0&&!o){const e=i();e&&l(e)}},[n,o,i]),(0,t.useEffect)(()=>{if(n&&n.length>0&&o){const e=n.find(e=>e.id===o);if(!e){const e=n.find(e=>"active"===e.status),t=e?e.id:n[0].id;console.log("\ud83d\udd27 CORRIGIENDO currentProjectId:",{currentProjectId:o,availableProjects:n.map(e=>({id:e.id,name:e.name,status:e.status})),fallbackTo:t,reason:"Proyecto no encontrado, usando primer proyecto disponible"}),l(t)}}},[n,o]),(0,t.useEffect)(()=>{o&&localStorage.setItem("lastSelectedProjectId",o)},[o]);const c=(0,t.useCallback)(()=>o&&n.find(e=>e.id===o)||null,[n,o]),d=(0,t.useCallback)(()=>n.filter(e=>"active"===e.status),[n]),u=(0,t.useCallback)(e=>n.filter(t=>t.status===e),[n]),h=(0,t.useCallback)((e,t)=>{a(r=>r.map(r=>r.id===e?(0,s.A)((0,s.A)({},r),t):r))},[]),f=(0,t.useCallback)(e=>{a(t=>[...t,e])},[]),p=(0,t.useCallback)(e=>{if(a(t=>t.filter(t=>t.id!==e)),e===o){const t=n.filter(t=>t.id!==e);t.length>0?l(t[0].id):l(null)}},[o,n]),m={projects:n,currentProjectId:o,setProjects:a,setCurrentProjectId:l,getCurrentProject:c,getActiveProjects:d,getProjectsByStatus:u,updateProject:h,addProject:f,removeProject:p};return(0,At.jsx)(e2.Provider,{value:m,children:r})},n2=(0,t.createContext)(null),a2=e=>{let{children:r}=e;const[n,a]=(0,t.useState)({}),[i,o]=(0,t.useState)({}),[l,c]=(0,t.useState)({}),[d,u]=(0,t.useState)({}),[h,f]=(0,t.useState)([]),[p,m]=(0,t.useState)({}),{currentProjectId:g}=t2(),v=(0,t.useCallback)(()=>n[g]||[],[n,g]),b=(0,t.useCallback)(()=>i[g]||[],[i,g]),x=(0,t.useCallback)(()=>l[g]||[],[l,g]),y=(0,t.useCallback)(()=>d[g]||[],[d,g]),w=(0,t.useCallback)(()=>p[g]||[],[p,g]),j=(0,t.useCallback)(e=>{g&&a(t=>(0,s.A)((0,s.A)({},t),{},{[g]:e}))},[g]),N=(0,t.useCallback)(e=>{g&&o(t=>(0,s.A)((0,s.A)({},t),{},{[g]:e}))},[g]),_=(0,t.useCallback)(e=>{g&&c(t=>(0,s.A)((0,s.A)({},t),{},{[g]:e}))},[g]),S=(0,t.useCallback)(e=>{g&&u(t=>(0,s.A)((0,s.A)({},t),{},{[g]:e}))},[g]),k=(0,t.useCallback)(e=>{g&&m(t=>(0,s.A)((0,s.A)({},t),{},{[g]:e}))},[g]),A=(0,t.useCallback)(e=>{j([...v(),e])},[v,j]),E=(0,t.useCallback)(e=>{N([...b(),e])},[b,N]),C=(0,t.useCallback)(e=>{_([...x(),e])},[x,_]),T=(0,t.useCallback)(e=>{S([...y(),e])},[y,S]),P=(0,t.useCallback)(e=>{f(t=>[...t,e])},[]),D=(0,t.useCallback)(e=>{k([...w(),e])},[w,k]),O={purchaseOrdersByProject:n,setPurchaseOrdersByProject:a,advancesByProject:i,setAdvancesByProject:o,invoicesByProject:l,setInvoicesByProject:c,contractsByProject:d,setContractsByProject:u,globalResources:h,setGlobalResources:f,resourceAssignmentsByProject:p,setResourceAssignmentsByProject:m,getCurrentProjectPurchaseOrders:v,getCurrentProjectAdvances:b,getCurrentProjectInvoices:x,getCurrentProjectContracts:y,getCurrentProjectResourceAssignments:w,updateCurrentProjectPurchaseOrders:j,updateCurrentProjectAdvances:N,updateCurrentProjectInvoices:_,updateCurrentProjectContracts:S,updateCurrentProjectResourceAssignments:k,addPurchaseOrder:A,addAdvance:E,addInvoice:C,addContract:T,addGlobalResource:P,addResourceAssignment:D};return(0,At.jsx)(n2.Provider,{value:O,children:r})},s2=(0,t.createContext)(null),i2=e=>{let{children:r}=e;const[n,a]=(0,t.useState)({}),[i,o]=(0,t.useState)({}),[l,c]=(0,t.useState)({}),[d,u]=(0,t.useState)({}),[h,f]=(0,t.useState)({}),{currentProjectId:p}=t2(),m=(0,t.useCallback)(()=>{const e=n[p]||[];return Array.isArray(e)?e:(console.warn("\u26a0\ufe0f Datos corruptos detectados en getCurrentProjectTasks:",{currentProjectId:p,tasksType:typeof e,tasksValue:e}),[])},[n,p]),g=(0,t.useCallback)(()=>i[p]||[],[i,p]),v=(0,t.useCallback)(()=>l[p]||[],[l,p]),b=(0,t.useCallback)(()=>d[p]||!1,[d,p]),x=(0,t.useCallback)(()=>h[p]||[],[h,p]),y=(0,t.useCallback)(e=>{if(!p)return;const t=Array.isArray(e)?e:[];a(e=>(0,s.A)((0,s.A)({},e),{},{[p]:t}))},[p]),w=(0,t.useCallback)(e=>{p&&o(t=>(0,s.A)((0,s.A)({},t),{},{[p]:e}))},[p]),j=(0,t.useCallback)(e=>{p&&c(t=>(0,s.A)((0,s.A)({},t),{},{[p]:e}))},[p]),N=(0,t.useCallback)(e=>{p&&u(t=>(0,s.A)((0,s.A)({},t),{},{[p]:e}))},[p]),_=(0,t.useCallback)(e=>{p&&f(t=>(0,s.A)((0,s.A)({},t),{},{[p]:e}))},[p]),S=(0,t.useCallback)(e=>{p&&(console.log("\ud83d\udce5 Importando tareas al proyecto:",{projectId:p,tasksCount:null===e||void 0===e?void 0:e.length}),y(e))},[p,y]),k=(0,t.useCallback)(e=>{if(!e||"object"!==typeof e)return void console.warn("\u26a0\ufe0f safeSetTasksByProject: datos inv\xe1lidos",typeof e);const t={};let r=!1;Object.keys(e).forEach(n=>{const a=e[n];Array.isArray(a)?t[n]=a:(console.warn("\u26a0\ufe0f Corrupci\xf3n detectada en proyecto ".concat(n,":"),typeof a),t[n]=[],r=!0)}),r&&console.log("\ud83e\uddf9 Datos limpiados autom\xe1ticamente"),a(t)},[]),A={tasksByProject:n,setTasksByProject:a,safeSetTasksByProject:k,minutasByProject:i,setMinutasByProject:o,risksByProject:l,setRisksByProject:c,includeWeekendsByProject:d,setIncludeWeekendsByProject:u,auditLogsByProject:h,setAuditLogsByProject:f,getCurrentProjectTasks:m,getCurrentProjectMinutas:g,getCurrentProjectRisks:v,getCurrentProjectIncludeWeekends:b,getCurrentProjectAuditLogs:x,updateCurrentProjectTasks:y,updateCurrentProjectMinutas:w,updateCurrentProjectRisks:j,updateCurrentProjectIncludeWeekends:N,updateCurrentProjectAuditLogs:_,importTasksToCurrentProject:S};return(0,At.jsx)(s2.Provider,{value:A,children:r})},o2=(0,t.createContext)(null),l2=e=>{let{children:r}=e;const[n,a]=(0,t.useState)("portfolio"),[s,i]=(0,t.useState)("dashboard"),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!1),m={portfolioViewMode:n,setPortfolioViewMode:a,viewMode:s,setViewMode:i,useSupabase:o,setUseSupabase:l,supabaseInitialized:c,setSupabaseInitialized:d,showAuthModal:u,setShowAuthModal:h,dataLoaded:f,setDataLoaded:p};return(0,At.jsx)(o2.Provider,{value:m,children:r})};function c2(){const{user:e,showSplash:r,completeSplash:n}=Pt(),{isReadOnly:a,userRole:i,isLoading:o}=Ot(),{projects:l,setProjects:c,currentProjectId:d,setCurrentProjectId:u,getCurrentProject:h}=t2(),{purchaseOrdersByProject:f,setPurchaseOrdersByProject:p,advancesByProject:m,setAdvancesByProject:g,invoicesByProject:v,setInvoicesByProject:b,contractsByProject:x,setContractsByProject:y,globalResources:w,setGlobalResources:j,resourceAssignmentsByProject:N,setResourceAssignmentsByProject:_,getCurrentProjectPurchaseOrders:S,getCurrentProjectAdvances:k,getCurrentProjectInvoices:A,getCurrentProjectContracts:E,getCurrentProjectResourceAssignments:C,updateCurrentProjectPurchaseOrders:T,updateCurrentProjectAdvances:P,updateCurrentProjectInvoices:D,updateCurrentProjectContracts:O,updateCurrentProjectResourceAssignments:I}=(()=>{const e=(0,t.useContext)(n2);if(!e)throw new Error("useFinancial debe usarse dentro de FinancialProvider");return e})(),{tasksByProject:M,setTasksByProject:R,safeSetTasksByProject:L,minutasByProject:F,setMinutasByProject:B,risksByProject:z,setRisksByProject:U,includeWeekendsByProject:q,setIncludeWeekendsByProject:W,auditLogsByProject:H,setAuditLogsByProject:V,getCurrentProjectTasks:G,getCurrentProjectMinutas:K,getCurrentProjectRisks:$,getCurrentProjectIncludeWeekends:Y,getCurrentProjectAuditLogs:X,updateCurrentProjectTasks:J,updateCurrentProjectMinutas:Z,updateCurrentProjectRisks:Q,updateCurrentProjectIncludeWeekends:ee,updateCurrentProjectAuditLogs:te,importTasksToCurrentProject:re}=(()=>{const e=(0,t.useContext)(s2);if(!e)throw new Error("useTasks debe usarse dentro de TasksProvider");return e})(),{portfolioViewMode:ne,setPortfolioViewMode:ae,viewMode:se,setViewMode:ie,useSupabase:oe,setUseSupabase:le,supabaseInitialized:ce,setSupabaseInitialized:de,showAuthModal:ue,setShowAuthModal:he,dataLoaded:fe,setDataLoaded:pe}=(()=>{const e=(0,t.useContext)(o2);if(!e)throw new Error("useConfig debe usarse dentro de ConfigProvider");return e})();(0,t.useEffect)(()=>{0},[]);const me=(0,t.useCallback)((0,St.debounce)(async e=>{if(!oe||!kt.default.isAuthenticated())return void console.log("\u23ed\ufe0f Saltando guardado - No autenticado o Supabase deshabilitado");console.log("\ud83d\udcbe Auto-guardando cambios...");const t=Date.now();try{if(await kt.default.savePortfolioData(e)){const e=Date.now()-t;console.log("\u2705 Auto-guardado exitoso en ".concat(e,"ms"));const r=new CustomEvent("autoSaveComplete",{detail:{duration:e,timestamp:(new Date).toISOString()}});window.dispatchEvent(r)}else console.warn("\u26a0\ufe0f Auto-guardado fall\xf3")}catch(r){console.error("\u274c Error en auto-guardado:",r)}},2e3),[oe]);(0,t.useEffect)(()=>()=>{me.cancel()},[me]);(0,t.useEffect)(()=>{(async()=>{try{console.log("\ud83d\ude80 Iniciando carga de datos..."),console.log("\ud83d\udd27 Inicializando Supabase...");const e=await kt.default.initialize();if(de(e),e)if(kt.default.getCurrentUser()){console.log("\u2705 Supabase inicializado con usuario autenticado"),le(!0),console.log("\ud83d\udd0d Cargando datos desde Supabase...");const e=await kt.default.loadPortfolioData();if(console.log("\ud83d\udd0d Resultado de loadPortfolioData():",e),e&&e.organization)return console.log("\ud83d\udcc2 Datos encontrados en Supabase, cargando..."),e.organization&&console.log("\u2705 Datos sincronizados desde Supabase"),e.projects&&Array.isArray(e.projects)&&e.projects.length>0&&(console.log("\ud83d\udcc2 Cargando proyectos desde Supabase:",e.projects.length),c(e.projects)),e.currentProjectId&&u(e.currentProjectId),e.tasksByProject&&L(e.tasksByProject),e.minutasByProject&&B(e.minutasByProject),e.risksByProject&&U(e.risksByProject),e.purchaseOrdersByProject&&p(e.purchaseOrdersByProject),e.advancesByProject&&g(e.advancesByProject),e.invoicesByProject&&b(e.invoicesByProject),e.contractsByProject&&y(e.contractsByProject),e.globalResources&&j(e.globalResources),void pe(!0);console.warn("\u26a0\ufe0f No se pudieron cargar datos desde Supabase"),console.warn("\u26a0\ufe0f Continuando con datos locales..."),le(!1)}else console.log("\u26a0\ufe0f Supabase disponible pero sin usuario autenticado"),he(!0);console.log("\u26a0\ufe0f Supabase no disponible, usando localStorage..."),le(!1),console.log("\ud83d\udd27 Inicializando filePersistenceService..."),await $1.initialize(),console.log("\u2705 filePersistenceService inicializado"),console.log("\ud83d\udd0d Llamando a filePersistenceService.loadData()...");const t=await $1.loadData();console.log("\ud83d\udd0d Resultado de loadData():",t),t?(console.log("\ud83d\udcc2 Datos encontrados, cargando..."),console.log("\ud83d\udcc2 globalResources en datos guardados:",t.globalResources),t.projects&&Array.isArray(t.projects)&&t.projects.length>0?(console.log("\ud83d\udcc2 Cargando proyectos guardados:",t.projects.length),c(t.projects)):console.log("\ud83d\udcc2 No hay proyectos guardados v\xe1lidos, manteniendo proyectos iniciales"),t.currentProjectId&&u(t.currentProjectId),t.tasksByProject&&L(t.tasksByProject),t.minutasByProject&&B(t.minutasByProject),t.includeWeekendsByProject&&W(t.includeWeekendsByProject),t.risksByProject&&U(t.risksByProject),t.purchaseOrdersByProject&&p(t.purchaseOrdersByProject),t.advancesByProject&&g(t.advancesByProject),t.invoicesByProject&&b(t.invoicesByProject),t.contractsByProject&&y(t.contractsByProject),t.globalResources&&(console.log("\ud83d\udcc2 Estableciendo globalResources:",t.globalResources),j(t.globalResources)),t.resourceAssignmentsByProject&&_(t.resourceAssignmentsByProject),t.auditLogsByProject&&V(t.auditLogsByProject)):(console.log("\ud83d\udcc2 No se encontraron datos guardados"),console.log("\ud83d\udcc2 savedData es:",t)),console.log("\u2705 Marcando dataLoaded como true"),pe(!0)}catch(e){console.error("\u274c Error al cargar datos:",e),console.error("\u274c Stack trace:",e.stack),pe(!0)}})()},[]),(0,t.useEffect)(()=>{if(!fe||!oe||!kt.default.isAuthenticated())return;(async()=>{try{console.log("\ud83d\udd04 Recargando datos para el proyecto actual:",d);const e=await kt.default.loadPortfolioData();e&&(e.purchaseOrdersByProject&&p(e.purchaseOrdersByProject),e.risksByProject&&U(e.risksByProject),e.tasksByProject&&L(e.tasksByProject),e.advancesByProject&&g(e.advancesByProject),e.invoicesByProject&&b(e.invoicesByProject),e.contractsByProject&&y(e.contractsByProject))}catch(e){console.error("\u274c Error recargando datos del proyecto:",e)}})()},[d,fe,oe]),(0,t.useEffect)(()=>{const e=e=>{const{data:t}=e.detail;t.projects&&c(t.projects),t.currentProjectId&&u(t.currentProjectId),t.tasksByProject&&L(t.tasksByProject),t.risksByProject&&U(t.risksByProject),t.purchaseOrdersByProject&&p(t.purchaseOrdersByProject),t.advancesByProject&&g(t.advancesByProject),t.invoicesByProject&&b(t.invoicesByProject),t.contractsByProject&&y(t.contractsByProject),t.globalResources&&j(t.globalResources),t.resourceAssignmentsByProject&&_(t.resourceAssignmentsByProject),t.auditLogsByProject&&V(t.auditLogsByProject)},t=e=>{const{data:t}=e.detail;t.projects&&c(t.projects),t.currentProjectId&&u(t.currentProjectId),t.tasksByProject&&L(t.tasksByProject),t.risksByProject&&U(t.risksByProject),t.purchaseOrdersByProject&&p(t.purchaseOrdersByProject),t.advancesByProject&&g(t.advancesByProject),t.invoicesByProject&&b(t.invoicesByProject),t.contractsByProject&&y(t.contractsByProject),t.globalResources&&j(t.globalResources),t.resourceAssignmentsByProject&&_(t.resourceAssignmentsByProject),t.auditLogsByProject&&V(t.auditLogsByProject)},r=e=>{const{useSupabase:t}=e.detail;console.log("\ud83d\udd04 Toggle Supabase desde ProjectManagementTabs:",t),le(t)},n=e=>{const{action:t}=e.detail;console.log("\ud83d\udd10 Solicitud de autenticaci\xf3n Supabase:",t),"activate"===t&&(kt.default.isAuthenticated()?(console.log("\u2705 Ya est\xe1 autenticado, activando Supabase..."),le(!0),alert("\u2705 Supabase activado\n\nLos datos se sincronizar\xe1n autom\xe1ticamente con la base de datos en la nube.")):(console.log("\ud83d\udd10 No est\xe1 autenticado, mostrando modal..."),he(!0)))};return window.addEventListener("dataRestore",e),window.addEventListener("dataImport",t),window.addEventListener("toggleSupabase",r),window.addEventListener("requestSupabaseAuth",n),()=>{window.removeEventListener("dataRestore",e),window.removeEventListener("dataImport",t),window.removeEventListener("toggleSupabase",r),window.removeEventListener("requestSupabaseAuth",n)}},[]);const ge=(0,t.useRef)(null),ve=(0,t.useRef)(null),be=(0,t.useRef)(!1),xe=(0,t.useCallback)(e=>{if(ge.current&&clearTimeout(ge.current),t=e,(r=ve.current)&&!["projects","currentProjectId","tasksByProject","risksByProject","globalResources","purchaseOrdersByProject","advancesByProject","invoicesByProject","contractsByProject","resourceAssignmentsByProject","auditLogsByProject"].some(e=>{const n=t[e],a=r[e];if("tasksByProject"===e){if(!n||!a)return n!==a;const e=Object.values(n).reduce((e,t)=>e+((null===t||void 0===t?void 0:t.length)||0),0),t=Object.values(a).reduce((e,t)=>e+((null===t||void 0===t?void 0:t.length)||0),0);if(e!==t)return console.log("\ud83d\udcca Cambio detectado en tareas: ".concat(t," \u2192 ").concat(e)),!0;for(const r in n){const e=n[r]||[],t=a[r]||[];if(e.length!==t.length)return console.log("\ud83d\udcca Cambio en n\xfamero de tareas del proyecto ".concat(r,": ").concat(t.length," \u2192 ").concat(e.length)),!0;const s=e.map(e=>JSON.stringify({id:e.id,name:e.name,duration:e.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,status:e.status,predecessors:e.predecessors,successors:e.successors})).sort(),i=t.map(e=>JSON.stringify({id:e.id,name:e.name,duration:e.duration,startDate:e.startDate,endDate:e.endDate,progress:e.progress,status:e.status,predecessors:e.predecessors,successors:e.successors})).sort();if(JSON.stringify(s)!==JSON.stringify(i))return console.log("\ud83d\udcca Cambio detectado en contenido de tareas del proyecto ".concat(r)),!0}return!1}return"projects"===e||"risksByProject"===e||"globalResources"===e||"purchaseOrdersByProject"===e||"advancesByProject"===e||"invoicesByProject"===e||"contractsByProject"===e||"resourceAssignmentsByProject"===e||"auditLogsByProject"===e||"minutasByProject"===e?JSON.stringify(n)!==JSON.stringify(a):n!==a}))return void console.log("\u23ed\ufe0f Datos sin cambios, omitiendo guardado");var t,r;if(be.current)return void console.log("\u23f3 Ya hay un guardado en progreso, omitiendo");const n=e.tasksByProject||{},a=Object.values(n).reduce((e,t)=>e+((null===t||void 0===t?void 0:t.length)||0),0),s=Object.keys(n).length,i=s>0?a/s:0;if(a>1e3&&i>800)return console.error("\ud83d\udea8 ALERTA: Posible duplicaci\xf3n masiva detectada:"),console.error("  \u2022 Total tareas: ".concat(a)),console.error("  \u2022 Proyectos: ".concat(s)),console.error("  \u2022 Promedio por proyecto: ".concat(i.toFixed(1))),void console.error("  \u2022 Cancelando guardado por seguridad");a>500&&console.log("\ud83d\udcca Proyecto grande detectado: ".concat(a," tareas en ").concat(s," proyectos (promedio: ").concat(i.toFixed(1)," tareas/proyecto)")),ge.current=setTimeout(async()=>{try{if(be.current=!0,console.log("\ud83d\udcbe Guardando datos con throttling..."),oe&&kt.default.isAuthenticated()){console.log("\ud83d\udcbe Guardando en Supabase...");if(!await kt.default.savePortfolioData(e))throw new Error("Error guardando en Supabase");console.log("\u2705 Datos guardados en Supabase")}else{try{localStorage.setItem("mi-dashboard-portfolio",JSON.stringify(e)),console.log("\u2705 Datos guardados en localStorage")}catch(t){throw console.error("\u274c Error guardando en localStorage:",t),"QuotaExceededError"===t.name&&console.log("\ud83e\uddf9 Espacio insuficiente, limpiando datos antiguos..."),t}let r=3;for(;r>0;)try{await $1.saveData(e);break}catch(t){if(r--,0===r)throw t;console.log("\ud83d\udd04 Reintentando guardado... (".concat(r," intentos restantes)")),await new Promise(e=>setTimeout(e,1e3))}}if(ve.current=e,console.log("\u2705 Datos guardados exitosamente"),fe){const e=new CustomEvent("dataSync",{detail:{type:"portfolio_data_saved",timestamp:(new Date).toISOString(),source:"throttled_save"}});window.dispatchEvent(e)}}catch(t){console.error("\u274c Error guardando datos:",t)}finally{be.current=!1}},1e3)},[fe]);(0,t.useEffect)(()=>{if(!fe)return void console.log("\u23f3 Esperando a que se carguen los datos iniciales...");console.log("\ud83d\udd04 useEffect GUARDADO - EJECUT\xc1NDOSE:",{tasksByProjectKeys:Object.keys(M),tasksForCurrentProject:M[d]?M[d].length:"UNDEFINED",currentProjectId:d,totalTasks:Object.values(M).reduce((e,t)=>e+((null===t||void 0===t?void 0:t.length)||0),0)});const e={projects:l,currentProjectId:d,tasksByProject:M,minutasByProject:F,includeWeekendsByProject:q,risksByProject:z,purchaseOrdersByProject:f,advancesByProject:m,invoicesByProject:v,contractsByProject:x,globalResources:w,resourceAssignmentsByProject:N,auditLogsByProject:H,timestamp:(new Date).toISOString()};xe(e)},[l,d,M,F,q,z,f,m,v,x,w,N,H,fe]),(0,t.useEffect)(()=>()=>{ge.current&&clearTimeout(ge.current)},[]),(0,t.useEffect)(()=>{if(!fe||!M)return;console.log("\ud83d\udd04 ACTUALIZANDO PROGRESO AUTOM\xc1TICO DE PROYECTOS");let e=!1;const t=[];l.forEach(r=>{if("active"===r.status){const n=ye(r.id);n!==r.progress&&(console.log("\ud83d\udcca Actualizando progreso del proyecto ".concat(r.name,": ").concat(r.progress,"% \u2192 ").concat(n,"%")),t.push({id:r.id,progress:n}),e=!0)}}),e&&c(e=>e.map(e=>{const r=t.find(t=>t.id===e.id);return r?(0,s.A)((0,s.A)({},e),{},{progress:r.progress,updatedAt:(new Date).toISOString()}):e}))},[M,fe]);const ye=e=>{const t=M[e]||[];if(0===t.length)return 0;const r=t.filter(e=>!e.isMilestone);if(0===r.length)return 0;const n=r.reduce((e,t)=>e+(t.progress||0),0),a=Math.round(n/r.length);return console.log("\ud83d\udd04 C\xc1LCULO PROGRESO AUTOM\xc1TICO:",{projectId:e,totalTasks:t.length,regularTasks:r.length,totalProgress:n,averageProgress:a,tasksDetails:r.map(e=>({name:e.name,progress:e.progress,isMilestone:e.isMilestone}))}),Math.min(100,Math.max(0,a))},we=(0,t.useMemo)(()=>{const e=l.length,t=l.filter(e=>"active"===e.status).length,r=l.filter(e=>"completed"===e.status).length,n=l.reduce((e,t)=>e+(t.budget||0),0),a=l.reduce((e,t)=>e+(t.progress||0),0),s=e>0?a/e:0;return{totalProjects:e,activeProjects:t,completedProjects:r,totalBudget:n,averageProgress:s,healthScore:s>80?"excellent":s>60?"good":"needs_attention"}},[l]),[je,Ne]=(0,t.useState)(""),[_e,Se]=(0,t.useState)("all"),[ke,Ae]=(0,t.useState)(!1),[Ee,Ce]=(0,t.useState)(!1),[Te,Pe]=(0,t.useState)((new Date).toISOString().split("T")[0]),[De,Oe]=(0,t.useState)(!1),[Ie,Me]=(0,t.useState)("portfolio"),[Re,Le]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!o&&i){const e=Ie,t=a();console.log("\ud83d\udd0d Verificando redirecci\xf3n autom\xe1tica:",{userRole:i,isReadOnlyUser:t,currentSection:e,permissionsLoading:o}),!t||"portfolio"!==e&&"user-management"!==e||(console.log("\ud83d\udd04 Redirigiendo usuario de solo lectura de",e,"a Dashboard Ejecutivo"),Me("executive"))}},[o,i,a,Ie]),(0,t.useEffect)(()=>{const e=e=>{const{tareaId:t,newStatus:r,projectId:n,timestamp:a}=e.detail;console.log("\ud83d\udd04 Evento minutaStatusChanged recibido:",{tareaId:t,newStatus:r,projectId:n,timestamp:a}),console.log("\ud83d\udd04 Forzando rec\xe1lculo del Dashboard resumen...")},t=e=>{const{source:t,data:r}=e.detail;if(console.log("\ud83d\udd04 Evento autoSaveTrigger recibido:",{source:t,data:r}),"minutaUpdate"===t){console.log("\ud83d\udd04 Activando auto-save por actualizaci\xf3n de minuta...");const e={projects:l,tasksByProject:M,risksByProject:z,purchaseOrdersByProject:f,advancesByProject:m,invoicesByProject:v,contractsByProject:x,minutasByProject:(null===r||void 0===r?void 0:r.minutasTasks)||F};console.log("\ud83d\udd04 Ejecutando auto-save manual para minutas..."),me(e)}};return window.addEventListener("minutaStatusChanged",e),window.addEventListener("autoSaveTrigger",t),()=>{window.removeEventListener("minutaStatusChanged",e),window.removeEventListener("autoSaveTrigger",t)}},[me]);const[Fe,Be]=(0,t.useState)(!1),[ze,Ue]=(0,t.useState)(!1),[qe,We]=(0,t.useState)(!1),[He,Ve]=(0,t.useState)(null),[Ge,Ke]=(0,t.useState)(null),[$e,Ye]=(0,t.useState)(null),Xe=h();if(!Xe&&l.length>0){const e=l[0];return u(e.id),(0,At.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Seleccionando proyecto..."})]})})}return Xe||0!==l.length?(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[ue&&(0,At.jsx)(a1,{onAuthSuccess:async e=>{console.log("\u2705 Usuario autenticado:",e),le(!0),he(!1);const t=await kt.default.loadPortfolioData();t&&(t.projects&&Array.isArray(t.projects)&&t.projects.length>0&&c(t.projects),t.currentProjectId&&u(t.currentProjectId),t.tasksByProject&&L(t.tasksByProject),t.risksByProject&&U(t.risksByProject),t.globalResources&&j(t.globalResources))},onAuthCancel:()=>{console.log("\u274c Usuario cancel\xf3 autenticaci\xf3n, usando modo local"),he(!1),le(!1)}}),(0,At.jsx)(Z0,{useSupabase:oe,supabaseInitialized:ce,isAuthenticated:kt.default.isAuthenticated()}),!oe&&ce&&(0,At.jsx)("div",{className:"fixed top-20 right-4 z-40",children:(0,At.jsx)("button",{onClick:()=>he(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-blue-700 transition-colors",children:"\u2601\ufe0f Conectar con la Nube"})}),(0,At.jsx)(r1,{}),(0,At.jsx)(n1,{}),(0,At.jsx)(Q0,{onRestoreData:e=>{try{e.projects&&c(e.projects),e.currentProjectId&&u(e.currentProjectId),e.tasksByProject&&L(e.tasksByProject),e.includeWeekendsByProject&&W(e.includeWeekendsByProject),e.risksByProject&&U(e.risksByProject),e.purchaseOrdersByProject&&p(e.purchaseOrdersByProject),e.advancesByProject&&g(e.advancesByProject),e.invoicesByProject&&b(e.invoicesByProject),e.contractsByProject&&y(e.contractsByProject),e.globalResources&&j(e.globalResources),e.resourceAssignmentsByProject&&_(e.resourceAssignmentsByProject),e.auditLogsByProject&&V(e.auditLogsByProject);const t=new CustomEvent("dataSync",{detail:{type:"data_imported",timestamp:(new Date).toISOString()}});return window.dispatchEvent(t),!0}catch(t){return console.error("Error al importar datos:",t),!1}}}),(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(It,{activeSection:Ie,onSectionChange:e=>{Me(e),Le(!0)},projects:l,currentProjectId:d,workPackages:[],risks:$(),isCollapsed:Re,onToggleCollapse:()=>Le(!Re)}),(0,At.jsx)("main",{className:"flex-1 transition-all duration-300 ".concat(Re?"ml-16":"ml-80 lg:ml-72"),children:(0,At.jsxs)("div",{className:"transition-all duration-300 ".concat(Re?"p-4":"p-6"),children:["executive"===Ie&&(0,At.jsx)($H,{projects:l,portfolioMetrics:we,workPackages:[],risks:Object.values(z).flat(),purchaseOrders:Object.values(f).flat(),advances:Object.values(m).flat(),invoices:Object.values(v).flat(),tasksByProject:M,purchaseOrdersByProject:f,advancesByProject:m,invoicesByProject:v}),"user-management"===Ie&&(0,At.jsx)(O1,{currentProject:Xe,useSupabase:oe,projects:l}),"portfolio"===Ie&&(0,At.jsx)(kQ,{projects:l,currentProjectId:d,setCurrentProjectId:u,workPackages:[],risks:$(),globalResources:w,setGlobalResources:j,createProject:e=>{const t={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),name:e.name,description:e.description,startDate:e.startDate,endDate:e.endDate,budget:e.budget,status:e.status,priority:e.priority,manager:e.manager,sponsor:e.sponsor||"",objective:e.objective||"",businessCase:e.businessCase||"",irr:e.irr||0,roi:e.roi||0,contingencyReserve:e.contingencyReserve||0,managementReserve:e.managementReserve||0,kickoffDate:e.kickoffDate||"",stakeholders:e.stakeholders||[],team:e.team||[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:"1.0.0",progress:0};return c(e=>{const r=e.slice();return r.push(t),r}),R(e=>{const r=Object.assign({},e);return r[t.id]=[],r}),W(e=>{const r=Object.assign({},e);return r[t.id]=!1,r}),U(e=>{const r=Object.assign({},e);return r[t.id]=[],r}),t},updateProject:(e,t)=>{const r=void 0!==t.progress?t.progress:ye(e);c(n=>n.map(n=>n.id===e?{id:n.id,name:t.name||n.name,description:t.description||n.description,startDate:t.startDate||n.startDate,endDate:t.endDate||n.endDate,budget:t.budget||n.budget,status:t.status||n.status,priority:t.priority||n.priority,manager:t.manager||n.manager,sponsor:t.sponsor||n.sponsor,irr:void 0!==t.irr?t.irr:n.irr,objective:t.objective||n.objective,businessCase:t.businessCase||n.businessCase,team:t.team||n.team,createdAt:n.createdAt,updatedAt:(new Date).toISOString(),version:n.version,progress:r}:n))},deleteProject:async e=>{if(oe&&kt.default.isAuthenticated()){console.log("\ud83d\uddd1\ufe0f Eliminando proyecto ".concat(e," de Supabase..."));await kt.default.deleteProject(e)?console.log("\u2705 Proyecto ".concat(e," eliminado de Supabase")):console.warn("\u26a0\ufe0f Error eliminando proyecto ".concat(e," de Supabase"))}c(t=>t.filter(t=>t.id!==e)),R(t=>{const r=Object.assign({},t);return delete r[e],r}),U(t=>{const r=Object.assign({},t);return delete r[e],r})},tasks:G(),tasksByProject:M,minutasByProject:F,purchaseOrders:S(),advances:k(),invoices:A(),contracts:E(),auditLogs:X(),includeWeekendsByProject:q,setIncludeWeekendsByProject:W,getCurrentProjectIncludeWeekends:Y,useSupabase:oe}),"project-management"===Ie&&(0,At.jsx)(J0,{projects:l,currentProjectId:d,setCurrentProjectId:u,workPackages:[],setWorkPackages:()=>{},risks:$(),setRisks:Q,reportingDate:Te,setReportingDate:Pe,tasks:G(),setTasks:e=>{if("function"===typeof e){const t=e(G());J(t)}else J(e)},importTasks:re,includeWeekends:Y(),setIncludeWeekends:ee,purchaseOrders:S(),setPurchaseOrders:T,advances:k(),setAdvances:P,invoices:A(),setInvoices:D,contracts:E(),setContracts:O,resourceAssignments:C(),useSupabase:oe,updateProjectMinutas:(e,t)=>{B(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))}}),"organization-members"===Ie&&(0,At.jsx)(P1,{currentProject:Xe,useSupabase:oe,onMemberAdded:()=>{console.log("\u2705 Nuevo miembro agregado a la organizaci\xf3n")}})]})})]})]}):(0,At.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:(0,At.jsxs)("div",{className:"text-center max-w-md mx-auto p-8",children:[(0,At.jsx)("div",{className:"text-6xl mb-6",children:"\ud83d\udcc1"}),(0,At.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"\xa1Bienvenido al Sistema de Gesti\xf3n de Proyectos!"}),(0,At.jsx)("p",{className:"text-gray-600 mb-8 text-lg",children:"Comienza creando tu primer proyecto para gestionar cronogramas, riesgos, presupuestos y m\xe1s."}),(0,At.jsx)("button",{onClick:()=>{const t={id:"proj-".concat(Date.now()),name:"Mi Primer Proyecto",description:"Proyecto inicial para familiarizarse con el sistema",status:"active",priority:"medium",startDate:(new Date).toISOString().split("T")[0],endDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],budget:1e5,contingencyReserve:1e4,managementReserve:5e3,manager:(null===e||void 0===e?void 0:e.email)||"Usuario",sponsor:"Organizaci\xf3n",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:"1.0.0",progress:0};c([t]),u(t.id)},className:"bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 text-lg font-semibold shadow-lg transition-colors",children:"\u2795 Crear Mi Primer Proyecto"})]})})}function d2(){const{showSplash:e,completeSplash:t,isAuthenticated:r}=Pt();return e?(0,At.jsx)(I1,{onComplete:t}):(0,At.jsx)(c2,{})}const u2=function(){return(0,At.jsx)(pt,{children:(0,At.jsx)(l2,{children:(0,At.jsx)(Dt,{children:(0,At.jsx)(r2,{children:(0,At.jsx)(a2,{children:(0,At.jsx)(i2,{children:(0,At.jsx)(Q1,{children:(0,At.jsxs)(Oe,{children:[(0,At.jsx)(Pe,{path:"/admin",element:(0,At.jsx)(R1,{children:(0,At.jsx)(H1,{})})}),(0,At.jsx)(Pe,{path:"/admin/organizations/:orgId",element:(0,At.jsx)(R1,{children:(0,At.jsx)(G1,{})})}),(0,At.jsx)(Pe,{path:"/*",element:(0,At.jsx)(d2,{})})]})})})})})})})})},h2=e=>{e&&e instanceof Function&&r.e(206).then(r.bind(r,8206)).then(t=>{let{getCLS:r,getFID:n,getFCP:a,getLCP:s,getTTFB:i}=t;r(e),n(e),a(e),s(e),i(e)})};window.supabaseService=kt.default,window.debugAppState=()=>{var e,t;console.log("=== DEBUG APP STATE ==="),console.log("Supabase service:",window.supabaseService),console.log("Current user:",null===(e=window.supabaseService)||void 0===e?void 0:e.getCurrentUser()),console.log("Current organization:",null===(t=window.supabaseService)||void 0===t?void 0:t.getCurrentOrganization())};a.createRoot(document.getElementById("root")).render((0,At.jsx)(t.StrictMode,{children:(0,At.jsx)(u2,{})})),h2()})()})();