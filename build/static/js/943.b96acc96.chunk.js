"use strict";(self.webpackChunkmi_dashboard=self.webpackChunkmi_dashboard||[]).push([[943],{6943:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(9950),l=(s(2331),s(4634),s(6187)),r=s(2146),n=s(5271),o=s(4414);r.t1.register(r.PP,r.kc,r.E8,r.hE,r.m_,r.s$);const d=e=>{let{projects:t=[],tasksByProject:s={},purchaseOrdersByProject:r={},advancesByProject:d={},invoicesByProject:i={}}=e;const[c,x]=(0,a.useState)("12"),[m,h]=(0,a.useState)((new Date).toISOString().split("T")[0]),g=t.filter(e=>"active"===e.status);console.log("\ud83d\udd0d CONSOLIDATED CASHFLOW DEBUG:",{projects:(null===t||void 0===t?void 0:t.length)||0,activeProjects:g.length,tasksByProject:Object.keys(s||{}).length,purchaseOrdersByProject:Object.keys(r||{}).length,advancesByProject:Object.keys(d||{}).length,invoicesByProject:Object.keys(i||{}).length,activeProjectIds:g.map(e=>e.id)}),Object.keys(r||{}).forEach(e=>{const t=r[e]||[];console.log("\ud83d\udd0d \xd3RDENES DE COMPRA para proyecto ".concat(e,":"),{total:t.length,orders:t.map(e=>({id:e.id,number:e.number,approvalDate:e.approvalDate,date:e.date,status:e.status,totalAmount:e.totalAmount}))})});const u=(e,t)=>{if(!e||0===e.length)return 0;const s=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);return e.reduce((e,t)=>{const l=new Date(t.startDate),r=new Date(t.endDate);return l<=a&&r>=s?e+(t.cost||0):e},0)},p=(e,t)=>{if(console.log("\ud83d\udd0d CALCULANDO GASTO COMPROMETIDO - Iniciando funci\xf3n:",{purchaseOrdersLength:(null===e||void 0===e?void 0:e.length)||0,monthDate:t.toISOString().substring(0,7),purchaseOrders:e}),!e||0===e.length)return console.log("\ud83d\udd0d No hay \xf3rdenes de compra para calcular gasto comprometido"),0;const s=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);return s.setHours(0,0,0,0),a.setHours(23,59,59,999),console.log("\ud83d\udd0d Calculando gasto comprometido para mes:",{month:t.toISOString().substring(0,7),monthStart:s.toISOString().split("T")[0],monthEnd:a.toISOString().split("T")[0],totalPOs:e.length}),console.log("\ud83d\udd0d DETALLE COMPLETO DE \xd3RDENES DE COMPRA:"),e.forEach((e,t)=>{console.log("\ud83d\udd0d OC ".concat(t+1,":"),{id:e.id,number:e.number,approvalDate:e.approvalDate,date:e.date,status:e.status,totalAmount:e.totalAmount,allFields:Object.keys(e)})}),e.reduce((e,l)=>{const r="approved"===l.status||"delivered"===l.status;if(!r)return e;let n;if(l.approvalDate&&""!==l.approvalDate.trim())n=new Date(l.approvalDate+"T00:00:00");else{if(!l.date||""===l.date.trim())return console.log("\u26a0\ufe0f OC sin fecha v\xe1lida:",{id:l.id,number:l.number,approvalDate:l.approvalDate,date:l.date}),e;n=new Date(l.date+"T00:00:00")}if(isNaN(n.getTime()))return console.log("\u26a0\ufe0f OC con fecha inv\xe1lida:",{id:l.id,number:l.number,approvalDate:l.approvalDate,date:l.date,poDate:n}),e;const o=n>=s&&n<=a;return console.log("\ud83d\udd0d Evaluando OC:",{id:l.id,number:l.number,approvalDate:l.approvalDate,date:l.date,poDate:n.toISOString().split("T")[0],monthStart:s.toISOString().split("T")[0],monthEnd:a.toISOString().split("T")[0],status:l.status,totalAmount:l.totalAmount,isInMonth:o,isApproved:r,willInclude:o&&r}),o?(console.log("\u2705 INCLUYENDO OC ".concat(l.number,": $").concat(l.totalAmount," en mes ").concat(t.toISOString().substring(0,7))),e+(l.totalAmount||0)):e},0)},b=(e,t,s)=>{if(!e&&!t)return 0;const a=new Date(s.getFullYear(),s.getMonth(),1),l=new Date(s.getFullYear(),s.getMonth()+1,0);let r=0;return e&&e.length>0&&(r+=e.reduce((e,t)=>{if(!t.paymentDate||""===t.paymentDate.trim())return e;const s=new Date(t.paymentDate+"T00:00:00");if(isNaN(s.getTime()))return e;const r=s>=a&&s<=l,n="paid"===t.status;return r&&n?e+(t.amount||0):e},0)),t&&t.length>0&&(r+=t.reduce((e,t)=>{if(!t.paymentDate||""===t.paymentDate.trim())return e;const s=new Date(t.paymentDate+"T00:00:00");if(isNaN(s.getTime()))return e;const r=s>=a&&s<=l,n="pagada"===t.status;return r&&n?e+(t.amount||0):e},0)),r},j=(0,a.useMemo)(()=>{if(0===g.length)return{projection:[],metrics:{}};const e=[],t=new Date(m);for(let a=0;a<parseInt(c);a++){const l=new Date(t.getFullYear(),t.getMonth()+a,1),n=l.toISOString().split("T")[0].substring(0,7);let o=0,c=0,x=0;g.forEach(e=>{const t=s[e.id]||[],a=r[e.id]||[],m=d[e.id]||[],h=i[e.id]||[];console.log("\ud83d\udd0d Proyecto ".concat(e.id," (").concat(e.name,"):"),{tasks:t.length,purchaseOrders:a.length,advances:m.length,invoices:h.length});const g=u(t,l);o+=g,console.log("\ud83d\udd0d LLAMANDO calculateMonthCommittedExpense para proyecto ".concat(e.id," en mes ").concat(n));const j=p(a,l);console.log("\ud83d\udd0d RESULTADO calculateMonthCommittedExpense: $".concat(j)),c+=j;const f=b(m,h,l);x+=f,console.log("\ud83d\udd0d Gastos del mes ".concat(n," para proyecto ").concat(e.id,":"),{planned:g,committed:j,real:f})}),e.push({month:l.toLocaleDateString("es-ES",{month:"long",year:"numeric"}),monthKey:n,revenue:o,expenses:c,realExpenses:x,netFlow:o-x})}return{projection:e,metrics:{totalPlannedExpense:e.reduce((e,t)=>e+t.revenue,0),totalCommittedExpenses:e.reduce((e,t)=>e+t.expenses,0),totalRealExpenses:e.reduce((e,t)=>e+t.realExpenses,0),totalNetCashFlow:e.reduce((e,t)=>e+t.netFlow,0)}}},[g,s,r,d,i,c,m]);return 0===g.length?(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb0"}),"Flujo de Caja Consolidado"]}),(0,o.jsx)("div",{className:"text-center py-8",children:(0,o.jsx)("div",{className:"text-gray-500 text-lg",children:"No hay proyectos activos para mostrar el flujo de caja consolidado"})})]}):(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb0"}),"Flujo de Caja Consolidado"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Per\xedodo:"}),(0,o.jsxs)("select",{value:c,onChange:e=>x(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"6",children:"6 meses"}),(0,o.jsx)("option",{value:"12",children:"12 meses"}),(0,o.jsx)("option",{value:"18",children:"18 meses"}),(0,o.jsx)("option",{value:"24",children:"24 meses"})]})]}),(0,o.jsxs)("button",{onClick:()=>{const e=j.projection.map(e=>({Mes:e.month,"Gasto Planificado":e.revenue,"Gasto Comprometido (OCs)":e.expenses,"Gasto Real":e.realExpenses,"Flujo Neto":e.netFlow})),t=n.Wp.json_to_sheet(e),s=n.Wp.book_new();n.Wp.book_append_sheet(s,t,"Flujo de Caja Consolidado");const a="Flujo_Caja_Consolidado_".concat((new Date).toISOString().split("T")[0],".xlsx");n._h(s,a)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[(0,o.jsx)("span",{children:"\ud83d\udcca"}),(0,o.jsx)("span",{children:"Exportar Excel"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-lg",children:"\ud83d\udcb0"}),(0,o.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Gasto Planificado Total"})]}),(0,o.jsxs)("div",{className:"text-2xl font-bold text-orange-800",children:["$",(j.metrics.totalPlannedExpense/1e3).toFixed(0),"K"]})]}),(0,o.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-lg",children:"\ud83d\udccb"}),(0,o.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Gasto Comprometido Total"})]}),(0,o.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:["$",(j.metrics.totalCommittedExpenses/1e3).toFixed(0),"K"]})]}),(0,o.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-lg",children:"\ud83d\udcb8"}),(0,o.jsx)("span",{className:"text-sm font-medium text-red-600",children:"Gasto Real Total"})]}),(0,o.jsxs)("div",{className:"text-2xl font-bold text-red-800",children:["$",(j.metrics.totalRealExpenses/1e3).toFixed(0),"K"]})]}),(0,o.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-lg",children:"\ud83d\udcc8"}),(0,o.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Flujo Neto Total"})]}),(0,o.jsxs)("div",{className:"text-2xl font-bold text-green-800",children:["$",(j.metrics.totalNetCashFlow/1e3).toFixed(0),"K"]})]})]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Gasto Planificado vs Gasto Comprometido vs Gasto Real"}),(0,o.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,o.jsx)(l.yP,{data:{labels:j.projection.map(e=>e.month),datasets:[{label:"Gasto Planificado",data:j.projection.map(e=>e.revenue),backgroundColor:"rgba(255, 159, 64, 0.8)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1},{label:"Gasto Comprometido (OCs)",data:j.projection.map(e=>e.expenses),backgroundColor:"rgba(54, 162, 235, 0.8)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Gasto Real",data:j.projection.map(e=>e.realExpenses),backgroundColor:"rgba(255, 99, 132, 0.8)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}},scales:{x:{stacked:!1,title:{display:!0,text:"Meses"},ticks:{maxRotation:60,minRotation:60,padding:15,font:{size:9}}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Monto (USD)"},ticks:{callback:function(e){return"$"+e.toLocaleString()}}}}},height:400})})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full border-collapse",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"bg-gray-50",children:[(0,o.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Mes"}),(0,o.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Gasto Planificado"}),(0,o.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Gasto Comprometido (OCs)"}),(0,o.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Gasto Real"}),(0,o.jsx)("th",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700",children:"Flujo Neto"})]})}),(0,o.jsx)("tbody",{children:j.projection.map((e,t)=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 font-medium text-gray-800",children:e.month}),(0,o.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right text-orange-600 font-medium",children:["$",e.revenue.toLocaleString()]}),(0,o.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right text-blue-600 font-medium",children:["$",e.expenses.toLocaleString()]}),(0,o.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right text-red-600 font-medium",children:["$",e.realExpenses.toLocaleString()]}),(0,o.jsxs)("td",{className:"w-1/5 border border-gray-300 px-4 py-3 text-right font-medium ".concat(e.netFlow>=0?"text-green-600":"text-red-600"),children:["$",e.netFlow.toLocaleString()]})]},t))})]})})]})};var i=s(1052),c=s(6270),x=s(1847),m=s(2528),h=s(2174),g=s(7202);const u=function(e){const t=(e/1e3).toFixed(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"$".concat(t.join("."),"K")},p=e=>{let{totalPurchaseOrders:t,totalAdvances:s,totalInvoices:l}=e;const r=(0,a.useMemo)(()=>{const e=t-(s+l);return[{name:"Anticipos",value:s,color:"#3B82F6"},{name:"Facturaci\xf3n",value:l,color:"#9CA3AF"},{name:"Por pagar",value:Math.max(0,e),color:"#1E3A8A"}]},[t,s,l]),n=e=>{let{active:t,payload:s}=e;return t&&s&&s.length?(0,o.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[(0,o.jsx)("p",{className:"font-semibold text-gray-800",children:s[0].name}),(0,o.jsx)("p",{className:"text-lg font-bold",style:{color:s[0].payload.color},children:u(s[0].value)})]}):null};return(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-cyan-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb5"}),"Flujo de Caja $M MXN"]}),(0,o.jsx)("div",{className:"w-full",style:{height:"400px"},children:(0,o.jsx)(i.u,{width:"100%",height:"100%",children:(0,o.jsxs)(c.r,{children:[(0,o.jsx)(x.F,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:t,cy:s,midAngle:a,innerRadius:l,outerRadius:r,value:n}=e;const d=Math.PI/180,i=l+.5*(r-l),c=t+i*Math.cos(-a*d),x=s+i*Math.sin(-a*d);return(0,o.jsx)("text",{x:c,y:x,fill:"black",textAnchor:c>t?"start":"end",dominantBaseline:"central",className:"font-bold text-sm",children:u(n)})},outerRadius:120,innerRadius:70,fill:"#8884d8",dataKey:"value",children:r.map((e,t)=>(0,o.jsx)(m.f,{fill:e.color},"cell-".concat(t)))}),(0,o.jsx)(h.m,{content:(0,o.jsx)(n,{})}),(0,o.jsx)(g.s,{content:e=>{const{payload:t}=e;return(0,o.jsx)("div",{className:"flex justify-center items-center space-x-6 mt-4",children:t.map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.value})]},"legend-".concat(t)))})}})]})})}),(0,o.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,o.jsx)("div",{className:"grid grid-cols-3 gap-4",children:r.map((e,t)=>(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,o.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-600",children:e.name})]}),(0,o.jsx)("div",{className:"text-xl font-bold",style:{color:e.color},children:u(e.value)})]},t))})})]})},b=e=>{let{projects:t,portfolioMetrics:s,workPackages:l=[],risks:r=[],purchaseOrders:n=[],advances:i=[],invoices:c=[],tasksByProject:x={},purchaseOrdersByProject:m={},advancesByProject:h={},invoicesByProject:g={}}=e;const[u,b]=(0,a.useState)(0);(0,a.useEffect)(()=>{const e=e=>{const{tareaId:t,newStatus:s,projectId:a,timestamp:l}=e.detail;console.log("\ud83d\udd04 ConsolidatedDashboard: Evento minutaStatusChanged recibido:",{tareaId:t,newStatus:s,projectId:a,timestamp:l}),console.log("\ud83d\udd04 ConsolidatedDashboard: Forzando re-render del Dashboard..."),b(e=>e+1)};return window.addEventListener("minutaStatusChanged",e),()=>{window.removeEventListener("minutaStatusChanged",e)}},[]);const j=(null===t||void 0===t?void 0:t.filter(e=>"active"===e.status))||[],f=j.reduce((e,t)=>e+(t.budget||0),0),N=j.reduce((e,t)=>e+.15*(t.budget||0),0),v=j.map(e=>({start:e.startDate?new Date(e.startDate):null,end:e.endDate?new Date(e.endDate):null})).filter(e=>e.start&&e.end),y=v.length>0?new Date(Math.min(...v.map(e=>e.start.getTime()))):null,w=v.length>0?new Date(Math.max(...v.map(e=>e.end.getTime()))):null,D=(null===n||void 0===n?void 0:n.reduce((e,t)=>e+(t.totalAmount||0),0))||0,C=(null===i||void 0===i?void 0:i.reduce((e,t)=>e+(t.amount||0),0))||0,P=(null===c||void 0===c?void 0:c.reduce((e,t)=>e+(t.amount||0),0))||0,E=(null===r||void 0===r?void 0:r.filter(e=>"active"===e.status))||[],S=E.filter(e=>"high"===e.priority),O=E.filter(e=>"medium"===e.priority),A=E.filter(e=>"low"===e.priority),F=Object.values(x||{}).flat(),k=F.filter(e=>e.isMilestone),M=k.filter(e=>(e.progress||0)>=100),I=k.filter(e=>(e.progress||0)>0),T=new Date,L=k.filter(e=>{const t=e.progress||0;if(t>=100)return!1;if(e.endDate){return new Date(e.endDate)<T&&t<100}return!1}),R=k.filter(e=>0===(e.progress||0)&&!L.includes(e));let B,G,$;if(console.log("\ud83d\udd0d DEBUG HITOS PORTFOLIO MEJORADO:",{totalTasks:F.length,totalMilestones:k.length,completed:M.length,inProgress:I.length,delayed:L.length,pending:R.length,currentDate:T.toISOString().split("T")[0],milestonesData:k.slice(0,5).map(e=>({id:e.id,name:e.name,progress:e.progress,endDate:e.endDate,isDelayed:!!e.endDate&&(new Date(e.endDate)<T&&(e.progress||0)<100),classification:(e.progress||0)>=100?"completed":(e.progress||0)>0?"in-progress":"pending"})),progressDistribution:{"0%":k.filter(e=>0===(e.progress||0)).length,"1-99%":k.filter(e=>(e.progress||0)>0&&(e.progress||0)<100).length,"100%":k.filter(e=>(e.progress||0)>=100).length},dateAnalysis:{milestonesWithEndDate:k.filter(e=>e.endDate).length,milestonesPastDueDate:k.filter(e=>e.endDate&&new Date(e.endDate)<T).length,milestonesPastDueAndIncomplete:L.length}}),l&&l.length>0)B=l.reduce((e,t)=>e+(t.budget||0),0),G=l.reduce((e,t)=>e+(t.earnedValue||0),0),$=l.reduce((e,t)=>e+(t.actualCost||0),0);else{const e=Object.values(x||{}).flat();B=e.reduce((e,t)=>e+(t.cost||0),0),G=e.reduce((e,t)=>{const s=(t.progress||0)/100;return e+(t.cost||0)*s},0),$=e.reduce((e,t)=>{const s=(t.progress||0)/100;return e+(t.cost||0)*s*.8},0)}const K=$>0?G/$:1,_=B>0?G/B:1,H=B-($+(B-G)),W=B/K;console.log("\ud83d\udcca M\xc9TRICAS EVM CALCULADAS:",{dataSource:l&&l.length>0?"workPackages":"tasks",workPackagesCount:(null===l||void 0===l?void 0:l.length)||0,tasksCount:Object.values(x||{}).flat().length,totalWorkPackageBudget:B,totalWorkPackageEarned:G,totalWorkPackageActual:$,consolidatedCPI:K,consolidatedSPI:_,consolidatedVAC:H,consolidatedEAC:W});const V=(e,t)=>"cpi"===t||"spi"===t?e>=1?"text-green-600":e>=.9?"text-yellow-600":"text-red-600":"variance"===t?e>=0?"text-green-600":"text-red-600":"text-gray-600",Y=e=>{switch(e){case"active":return"\ud83d\udd04";case"completed":return"\u2705";case"on-hold":default:return"\u23f8\ufe0f";case"cancelled":return"\u274c"}};return(0,o.jsxs)("div",{className:"space-y-8",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\ud83d\udcc8 Dashboard Consolidado"}),(0,o.jsx)("p",{className:"text-indigo-100 text-lg",children:"Vista ejecutiva del estado general del portfolio de proyectos"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83c\udfe2"}),"Vista General del Portfolio"]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,o.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Proyectos Activos"})]}),(0,o.jsx)("div",{className:"text-3xl font-bold text-blue-800",children:j.length}),(0,o.jsxs)("div",{className:"text-sm text-blue-600 mt-1",children:["de ",(null===t||void 0===t?void 0:t.length)||0," total"]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"}),(0,o.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Presupuesto Total"})]}),(0,o.jsxs)("div",{className:"text-3xl font-bold text-green-800",children:["$",(f/1e3).toFixed(0),"K"]}),(0,o.jsx)("div",{className:"text-sm text-green-600 mt-1",children:"Presupuesto asignado"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"}),(0,o.jsx)("span",{className:"text-sm font-medium text-purple-600",children:"Inicio M\xe1s Temprano"})]}),(0,o.jsx)("div",{className:"text-xl font-bold text-purple-800",children:y?y.toLocaleDateString("es-ES"):"N/A"}),(0,o.jsx)("div",{className:"text-sm text-purple-600 mt-1",children:"Fecha de inicio del portfolio"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83c\udfc1"}),(0,o.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Fin M\xe1s Tard\xedo"})]}),(0,o.jsx)("div",{className:"text-xl font-bold text-orange-800",children:w?w.toLocaleDateString("es-ES"):"N/A"}),(0,o.jsx)("div",{className:"text-sm text-orange-600 mt-1",children:"Fecha de fin del portfolio"})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcca"}),"Indicadores por Proyecto"]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full text-sm",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"bg-gray-50",children:[(0,o.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Proyecto"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Estatus"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Presupuesto"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Inicio"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Fin"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Progreso"})]})}),(0,o.jsx)("tbody",{children:j.map((e,t)=>(0,o.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-3",children:(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("span",{className:"text-lg",children:Y(e.status)}),(0,o.jsx)("span",{className:"font-medium text-gray-800",children:e.name})]})}),(0,o.jsx)("td",{className:"px-4 py-3",children:(0,o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-blue-100 text-blue-800":"on-hold"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"active"===e.status?"Activo":"completed"===e.status?"Completado":"on-hold"===e.status?"En Pausa":"Cancelado"})}),(0,o.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-800",children:["$",((e.budget||0)/1e3).toFixed(0),"K"]}),(0,o.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.startDate?new Date(e.startDate).toLocaleDateString("es-ES"):"N/A"}),(0,o.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.endDate?new Date(e.endDate).toLocaleDateString("es-ES"):"N/A"}),(0,o.jsx)("td",{className:"px-4 py-3",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,o.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(Math.min(100,Math.max(0,e.progress||0)),"%")}})}),(0,o.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.round(e.progress||0),"%"]})]})})]},e.id))})]})})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-emerald-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcb3"}),"Indicadores Financieros Consolidados"]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-lg border border-emerald-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udccb"}),(0,o.jsx)("span",{className:"text-sm font-medium text-emerald-600",children:"\xd3rdenes de Compra"})]}),(0,o.jsxs)("div",{className:"text-3xl font-bold text-emerald-800",children:["$",(D/1e3).toFixed(0),"K"]}),(0,o.jsx)("div",{className:"text-sm text-emerald-600 mt-1",children:"Total en OC aprobadas"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-lg border border-amber-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb8"}),(0,o.jsx)("span",{className:"text-sm font-medium text-amber-600",children:"Anticipos"})]}),(0,o.jsxs)("div",{className:"text-3xl font-bold text-amber-800",children:["$",(C/1e3).toFixed(0),"K"]}),(0,o.jsx)("div",{className:"text-sm text-amber-600 mt-1",children:"Anticipos solicitados"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 p-6 rounded-lg border border-cyan-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83e\uddfe"}),(0,o.jsx)("span",{className:"text-sm font-medium text-cyan-600",children:"Facturas"})]}),(0,o.jsxs)("div",{className:"text-3xl font-bold text-cyan-800",children:["$",(P/1e3).toFixed(0),"K"]}),(0,o.jsx)("div",{className:"text-sm text-cyan-600 mt-1",children:"Facturas ingresadas"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udee1\ufe0f"}),(0,o.jsx)("span",{className:"text-sm font-medium text-purple-600",children:"Reservas"})]}),(0,o.jsxs)("div",{className:"text-3xl font-bold text-purple-800",children:["$",(N/1e3).toFixed(0),"K"]}),(0,o.jsx)("div",{className:"text-sm text-purple-600 mt-1",children:"Contingencia + Gesti\xf3n"})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udee1\ufe0f"}),"Indicadores de Riesgos del Portfolio"]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-lg border border-red-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udea8"}),(0,o.jsx)("span",{className:"text-sm font-medium text-red-600",children:"Riesgos Activos"})]}),(0,o.jsx)("div",{className:"text-3xl font-bold text-red-800",children:E.length}),(0,o.jsx)("div",{className:"text-sm text-red-600 mt-1",children:"Total de riesgos identificados"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,o.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Alta Prioridad"})]}),(0,o.jsx)("div",{className:"text-3xl font-bold text-orange-800",children:S.length}),(0,o.jsx)("div",{className:"text-sm text-orange-600 mt-1",children:"Requieren atenci\xf3n inmediata"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-lg border border-yellow-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,o.jsx)("span",{className:"text-sm font-medium text-yellow-600",children:"Distribuci\xf3n"})]}),(0,o.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,o.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,o.jsxs)("span",{children:["Alta: ",S.length]}),(0,o.jsxs)("span",{children:["Media: ",O.length]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("span",{children:["Baja: ",A.length]}),(0,o.jsxs)("span",{children:["Total: ",E.length]})]})]})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83c\udfaf"}),"Hitos del Portafolio"]}),(0,o.jsx)("div",{className:"space-y-6",children:t&&t.length>0?t.filter(e=>"active"===e.status).map(e=>{const t=((null===x||void 0===x?void 0:x[e.id])||[]).filter(e=>e.isMilestone),s=t.filter(e=>(e.progress||0)>=100),a=t.filter(e=>(e.progress||0)>0),l=new Date,r=t.filter(e=>{const t=e.progress||0;if(t>=100)return!1;if(e.endDate){return new Date(e.endDate)<l&&t<100}return!1}),n=t.length>0?Math.round(s.length/t.length*100):0;return(0,o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,o.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udccb"}),e.name,(0,o.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",t.length," hitos)"]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\u2705"}),(0,o.jsx)("span",{className:"text-xs font-medium text-green-600",children:"Completados"})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-green-800",children:s.length}),(0,o.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Hitos realizados"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\ud83d\udd04"}),(0,o.jsx)("span",{className:"text-xs font-medium text-yellow-600",children:"En Proceso"})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:a.length}),(0,o.jsx)("div",{className:"text-xs text-yellow-600 mt-1",children:"Hitos en ejecuci\xf3n"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg border border-red-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\u26a0\ufe0f"}),(0,o.jsx)("span",{className:"text-xs font-medium text-red-600",children:"Atrasados"})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-red-800",children:r.length}),(0,o.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Hitos retrasados"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\ud83d\udcc8"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-600",children:"Progreso"})]}),(0,o.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:[n,"%"]}),(0,o.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Completitud"})]})]})]},e.id)}):(0,o.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,o.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83d\udccb"}),(0,o.jsx)("p",{children:"No hay proyectos activos con hitos"})]})}),t&&t.filter(e=>"active"===e.status).length>1&&(0,o.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,o.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udcca"}),"Resumen Consolidado"]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\u2705"}),(0,o.jsx)("span",{className:"text-xs font-medium text-green-600",children:"Total Completados"})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-green-800",children:M.length}),(0,o.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Hitos realizados"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\ud83d\udd04"}),(0,o.jsx)("span",{className:"text-xs font-medium text-yellow-600",children:"Total En Proceso"})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:I.length}),(0,o.jsx)("div",{className:"text-xs text-yellow-600 mt-1",children:"Hitos en ejecuci\xf3n"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg border border-red-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\u26a0\ufe0f"}),(0,o.jsx)("span",{className:"text-xs font-medium text-red-600",children:"Total Atrasados"})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-red-800",children:L.length}),(0,o.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Hitos retrasados"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-xl",children:"\ud83d\udcc8"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-600",children:"Progreso General"})]}),(0,o.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:[k.length>0?Math.round(M.length/k.length*100):0,"%"]}),(0,o.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Completitud general"})]})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-indigo-500",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,o.jsx)("span",{className:"text-3xl mr-3",children:"\ud83d\udcca"}),"Indicadores PMBOK v7 - Gesti\xf3n de Costos"]}),(0,o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"text-blue-600 text-xl mr-3",children:"\u2139\ufe0f"}),(0,o.jsxs)("div",{className:"text-blue-800",children:[(0,o.jsx)("strong",{children:"Fuente de datos:"})," ",l&&l.length>0?"Calculado basado en ".concat(l.length," paquetes de trabajo"):"Calculado basado en ".concat(Object.values(x||{}).flat().length," tareas del cronograma"),!(l&&l.length>0)&&(0,o.jsx)("span",{className:"block text-sm mt-1",children:'Los costos se estiman bas\xe1ndose en el campo "Costo" de cada tarea y su progreso actual.'})]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"CPI - Cost Performance Index"}),(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})]}),(0,o.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-2",children:K.toFixed(2)}),(0,o.jsx)("div",{className:"text-sm font-medium mb-2 ".concat(V(K,"cpi")),children:K>=1?"\u2705 Eficiencia de costos positiva":K>=.9?"\u26a0\ufe0f Eficiencia de costos aceptable":"\u274c Eficiencia de costos deficiente"}),(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,o.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Mide la eficiencia del costo del trabajo realizado. Valores \u2265 1.0 indican que el proyecto est\xe1 dentro del presupuesto."]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"SPI - Schedule Performance Index"}),(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"})]}),(0,o.jsx)("div",{className:"text-3xl font-bold text-green-800 mb-2",children:_.toFixed(2)}),(0,o.jsx)("div",{className:"text-sm font-medium mb-2 ".concat(V(_,"spi")),children:_>=1?"\u2705 Eficiencia de cronograma positiva":_>=.9?"\u26a0\ufe0f Eficiencia de cronograma aceptable":"\u274c Eficiencia de cronograma deficiente"}),(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,o.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Mide la eficiencia del cronograma del trabajo realizado. Valores \u2265 1.0 indican que el proyecto est\xe1 adelantado."]})]})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:"VAC - Variance at Completion"}),(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})]}),(0,o.jsxs)("div",{className:"text-3xl font-bold mb-2 ".concat(V(H,"variance")),children:["$",(H/1e3).toFixed(0),"K"]}),(0,o.jsx)("div",{className:"text-sm font-medium mb-2 ".concat(V(H,"variance")),children:H>=0?"\u2705 Proyecto dentro del presupuesto":"\u274c Proyecto exceder\xe1 el presupuesto"}),(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,o.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Predice la diferencia entre el presupuesto total y el costo final estimado. Valores positivos indican ahorro proyectado."]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-orange-800",children:"EAC - Estimate at Completion"}),(0,o.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"})]}),(0,o.jsxs)("div",{className:"text-3xl font-bold text-orange-800 mb-2",children:["$",(W/1e3).toFixed(0),"K"]}),(0,o.jsx)("div",{className:"text-sm font-medium mb-2 text-orange-700",children:"Costo total estimado del proyecto"}),(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,o.jsx)("strong",{children:"\xbfQu\xe9 significa?"})," Predice el costo total del proyecto basado en el rendimiento actual. Se calcula como: Presupuesto Total \xf7 CPI."]})]})]})]})]}),(0,o.jsx)(p,{totalPurchaseOrders:D,totalAdvances:C,totalInvoices:P}),(0,o.jsx)(d,{projects:t,tasksByProject:x,purchaseOrdersByProject:m,advancesByProject:h,invoicesByProject:g})]})}}}]);