{"version":3,"file":"static/js/187.b6c40fce.chunk.js","mappings":"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","sources":["components/CashFlowProjection.js"],"sourcesContent":["import { logger } from '../utils/logger';\n\nimport React, { useState, useMemo } from 'react';\nimport useAuditLog from '../hooks/useAuditLog';\n\nconst CashFlowProjection = ({ \n  currentProjectId,\n  currentProject,\n  projects,\n  workPackages,\n  tasks,\n  purchaseOrders,\n  advances,\n  invoices,\n  contracts\n}) => {\n  // Generar ID √∫nico para esta instancia del componente\n  const componentId = useMemo(() => Math.random().toString(36).substr(2, 9), []);\n  \n  logger.debug(`üîç CASHFLOW COMPONENT - INSTANCIA ${componentId} INICIANDO:`, {\n    currentProject: currentProject?.name,\n    tasksCount: tasks?.length || 0,\n    timestamp: new Date().toISOString()\n  });\n  \n  // DEBUG: Logging detallado de las tareas recibidas\n  logger.debug(`üîç CASHFLOW COMPONENT [${componentId}] - TAREAS RECIBIDAS:`, {\n    totalTasks: tasks?.length || 0,\n    tasksWithCosts: tasks?.filter(t => t.cost > 0).length || 0,\n    tasksWithCostsDetails: tasks?.filter(t => t.cost > 0).map(t => ({\n      id: t.id,\n      name: t.name,\n      cost: t.cost,\n      startDate: t.startDate,\n      endDate: t.endDate,\n      isMilestone: t.isMilestone\n    })) || []\n  });\n  \n  const [projectionPeriod, setProjectionPeriod] = useState('12'); // meses\n  const [projectionStartDate, setProjectionStartDate] = useState(new Date().toISOString().split('T')[0]);\n  const [showProjectionSettings, setShowProjectionSettings] = useState(false);\n  const [projectionSettings, setProjectionSettings] = useState({\n    // Configuraci√≥n simplificada para tu flujo de negocio\n    paymentTerms: 'milestone', // Cambiado a milestone para que use la fecha de aprobaci√≥n directamente\n    revenueRecognition: 'percentage_completion' // 'uniform' o 'percentage_completion'\n  });\n  \n  const { addAuditEvent } = useAuditLog(currentProjectId);\n\n  // Usar el proyecto actual que se pasa como prop (ya procesado por ProjectManagementTabs)\n  logger.debug('üîç CASHFLOW DEBUG - currentProject recibido:', currentProject);\n  logger.debug('üîç CASHFLOW DEBUG - currentProjectId:', currentProjectId);\n\n  // Calcular progreso del proyecto\n  const calculateProjectProgress = (date) => {\n    if (!currentProject) return 0;\n    \n    const startDate = new Date(currentProject.startDate);\n    const endDate = new Date(currentProject.endDate);\n    const totalDuration = endDate - startDate;\n    const elapsed = date - startDate;\n    \n    if (totalDuration <= 0) return 0;\n    if (elapsed <= 0) return 0;\n    if (elapsed >= totalDuration) return 100;\n    \n    return Math.min(100, Math.max(0, (elapsed / totalDuration) * 100));\n  };\n\n  // Calcular gasto planificado del mes basado en costos del cronograma\n  const calculateMonthPlannedExpense = (monthDate) => {\n    if (!currentProject || !tasks) {\n      logger.debug('üîç CashFlow: No hay proyecto o tareas:', { currentProject: !!currentProject, tasks: !!tasks });\n      return 0;\n    }\n\n    // Normalizar fechas del rango mensual\n    const monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    monthStart.setHours(0, 0, 0, 0);\n    \n    const monthEnd = new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0);\n    monthEnd.setHours(23, 59, 59, 999);\n    \n    logger.debug('üîç CashFlow: Calculando gasto planificado para mes:', {\n      month: monthDate.toLocaleDateString('es-ES', { year: 'numeric', month: 'long' }),\n      monthStart: monthStart.toISOString().split('T')[0],\n      monthEnd: monthEnd.toISOString().split('T')[0],\n      totalTasks: tasks.length\n    });\n    \n    // DEBUG: Mostrar todas las tareas con costos para julio 2026\n    if (monthDate.getMonth() === 6 && monthDate.getFullYear() === 2026) {\n      logger.debug('üîç DEBUG JULIO 2026 - AN√ÅLISIS COMPLETO DE TAREAS:');\n      logger.debug('üîç Rango del mes julio 2026:', {\n        monthStart: monthStart.toISOString().split('T')[0],\n        monthEnd: monthEnd.toISOString().split('T')[0]\n      });\n\n      let totalCostoEsperado = 0;\n      let tareasEnJulio = 0;\n      let tareasExcluidasJulio = [];\n\n      tasks.forEach((task, index) => {\n        if (task.cost && task.cost > 0) {\n          totalCostoEsperado += task.cost;\n\n          // Verificar si la tarea est√° en julio 2026\n          const taskStart = new Date(task.startDate);\n          const normalizedTaskStart = new Date(\n            taskStart.getFullYear(), \n            taskStart.getMonth(), \n            taskStart.getDate(),\n            0, 0, 0, 0\n          );\n          \n          const taskEnd = new Date(task.endDate);\n          const normalizedTaskEnd = new Date(\n            taskEnd.getFullYear(), \n            taskEnd.getMonth(), \n            taskEnd.getDate(),\n            23, 59, 59, 999\n          );\n\n          let isInMonth = false;\n          if (task.isMilestone || task.duration === 0) {\n            isInMonth = normalizedTaskStart >= monthStart && normalizedTaskStart <= monthEnd;\n          } else {\n            isInMonth = normalizedTaskStart <= monthEnd && normalizedTaskEnd >= monthStart;\n          }\n\n          if (isInMonth) {\n            tareasEnJulio++;\n            logger.debug(`  ‚úÖ INCLUIDA - Tarea ${index + 1}:`, {\n              name: task.name || task.title,\n              cost: task.cost,\n              startDate: task.startDate,\n              endDate: task.endDate,\n              isMilestone: task.isMilestone,\n              duration: task.duration,\n              taskStart: taskStart.toISOString().split('T')[0],\n              taskEnd: taskEnd.toISOString().split('T')[0]\n            });\n          } else {\n            tareasExcluidasJulio.push({\n              index: index + 1,\n              name: task.name || task.title,\n              cost: task.cost,\n              startDate: task.startDate,\n              taskStart: taskStart.toISOString().split('T')[0],\n              isMilestone: task.isMilestone,\n              razon: task.isMilestone ?\n                `Hito fuera del rango: ${taskStart.toISOString().split('T')[0]} no est√° entre ${monthStart.toISOString().split('T')[0]} y ${monthEnd.toISOString().split('T')[0]}` :\n                `Tarea normal sin intersecci√≥n: ${taskStart.toISOString().split('T')[0]} - ${taskEnd.toISOString().split('T')[0]} no intersecta con ${monthStart.toISOString().split('T')[0]} - ${monthEnd.toISOString().split('T')[0]}`\n            });\n          }\n        }\n      });\n\n      logger.debug('üîç JULIO 2026 - Resumen:', {\n        totalTareas: tasks.length,\n        tareasConCosto: tasks.filter(t => t.cost > 0).length,\n        tareasEnJulio: tareasEnJulio,\n        costoTotalEsperado: totalCostoEsperado,\n        costoPromedioPorTarea: totalCostoEsperado / tasks.filter(t => t.cost > 0).length\n      });\n\n      logger.debug('üîç JULIO 2026 - Tareas EXCLUIDAS (posibles causas del error):', tareasExcluidasJulio);\n    }\n    \n    let plannedExpense = 0;\n    let tasksWithCosts = 0;\n    let tasksInMonth = 0;\n    \n    // Calcular gasto planificado basado en tareas del cronograma que se ejecutan en este mes\n    tasks.forEach((task, index) => {\n      logger.debug(`üîç CashFlow: Tarea ${index + 1}:`, {\n        name: task.name || task.title,\n        cost: task.cost,\n        startDate: task.startDate,\n        endDate: task.endDate,\n        hasCost: !!task.cost,\n        hasDates: !!(task.startDate && task.endDate),\n        isMilestone: task.isMilestone,\n        duration: task.duration\n      });\n      \n      // DEBUG ESPEC√çFICO: Para la tarea 45 (hito problem√°tico)\n      if (index === 44) { // Tarea 45 (√≠ndice 44)\n        const monthName = monthDate.toLocaleDateString('es-ES', { year: 'numeric', month: 'long' });\n        logger.debug('üö® DEBUG TAREA 45 ESPEC√çFICA:', {\n          taskName: task.name || task.title,\n          taskCost: task.cost,\n          taskStartDate: task.startDate,\n          taskEndDate: task.endDate,\n          isMilestone: task.isMilestone,\n          duration: task.duration,\n          monthStart: monthStart.toISOString().split('T')[0],\n          monthEnd: monthEnd.toISOString().split('T')[0],\n          monthName: monthName\n        });\n        \n        // DEBUG: Logging espec√≠fico para agosto 2026\n        if (monthName === 'agosto de 2026' && task.cost > 0) {\n          logger.debug(`üîç CASHFLOW [${componentId}] - TAREA CON COSTO EN AGOSTO 2026:`, {\n            taskIndex: index,\n            taskId: task.id,\n            taskName: task.name,\n            taskCost: task.cost,\n            taskStartDate: task.startDate,\n            taskEndDate: task.endDate,\n            isMilestone: task.isMilestone,\n            duration: task.duration,\n            monthName: monthName,\n            monthStart: monthStart.toISOString().split('T')[0],\n            monthEnd: monthEnd.toISOString().split('T')[0]\n          });\n        }\n      }\n      \n      if (task.cost && task.startDate && task.endDate) {\n        tasksWithCosts++;\n        const taskStart = new Date(task.startDate);\n        const normalizedTaskStart = new Date(\n          taskStart.getFullYear(), \n          taskStart.getMonth(), \n          taskStart.getDate(),\n          0, 0, 0, 0\n        );\n        \n        const taskEnd = new Date(task.endDate);\n        const normalizedTaskEnd = new Date(\n          taskEnd.getFullYear(), \n          taskEnd.getMonth(), \n          taskEnd.getDate(),\n          23, 59, 59, 999\n        );\n        \n        // DEBUG: Logging espec√≠fico para julio y agosto 2026\n        const monthName = monthDate.toLocaleDateString('es-ES', { year: 'numeric', month: 'long' });\n        if ((monthName === 'julio de 2026' || monthName === 'agosto de 2026') && task.cost > 0) {\n          logger.debug(`üîç CASHFLOW [${componentId}] - TAREA CON COSTO EN ${monthName.toUpperCase()}:`, {\n            taskIndex: index,\n            taskId: task.id,\n            taskName: task.name,\n            taskCost: task.cost,\n            taskStartDate: task.startDate,\n            taskEndDate: task.endDate,\n            isMilestone: task.isMilestone,\n            duration: task.duration,\n            monthName: monthName,\n            monthStart: monthStart.toISOString().split('T')[0],\n            monthEnd: monthEnd.toISOString().split('T')[0]\n          });\n        }\n        \n        // Verificar si la tarea se ejecuta en este mes\n        // CORRECCI√ìN: Para hitos, verificar que la fecha est√© exactamente en el mes\n        let isInMonth = false;\n        \n        if (task.isMilestone || task.duration === 0) {\n          // Para hitos: verificar que la fecha est√© dentro del mes\n          isInMonth = normalizedTaskStart >= monthStart && normalizedTaskStart <= monthEnd;\n          \n  // DEBUG: Logging detallado solo para tareas con costos altos y meses espec√≠ficos\n  if (task.cost > 0 && (monthName === 'julio de 2026' || monthName === 'agosto de 2026')) {\n    logger.debug(`üéØ DEBUG HITO [${componentId}] - Verificaci√≥n de mes:`, {\n      taskName: task.name || task.title,\n      taskStartDate: task.startDate,\n      taskStart: taskStart.toISOString().split('T')[0],\n      monthStart: monthStart.toISOString().split('T')[0],\n      monthEnd: monthEnd.toISOString().split('T')[0],\n      isInMonth: isInMonth,\n      monthName: monthName,\n      comparison: {\n        taskStartGreaterEqualMonthStart: normalizedTaskStart >= monthStart,\n        taskStartLessEqualMonthEnd: normalizedTaskStart <= monthEnd,\n        taskStartTime: normalizedTaskStart.getTime(),\n        monthStartTime: monthStart.getTime(),\n        monthEndTime: monthEnd.getTime()\n      }\n    });\n  }\n        } else {\n          // Para tareas normales: verificar intersecci√≥n de fechas\n          isInMonth = normalizedTaskStart <= monthEnd && normalizedTaskEnd >= monthStart;\n        }\n        \n        if (isInMonth) {\n          tasksInMonth++;\n          \n          // CORRECCI√ìN: Manejo especial para hitos (duraci√≥n 0)\n          if (task.isMilestone || task.duration === 0) {\n            // Para hitos: el costo completo se asigna al mes donde ocurre\n            const taskCostInMonth = task.cost || 0;\n            plannedExpense += taskCostInMonth;\n            \n            logger.debug(`üí∞ CashFlow: HITO \"${task.name || task.title}\" en mes:`, {\n              taskCost: task.cost,\n              isMilestone: true,\n              startDate: task.startDate,\n              endDate: task.endDate,\n              costInMonth: taskCostInMonth.toFixed(2)\n            });\n            \n            // DEBUG ESPEC√çFICO: Para el hito problem√°tico\n            if (task.cost && task.cost > 300000) {\n              logger.debug('üö® DEBUG HITO PROBLEM√ÅTICO:', {\n                taskName: task.name || task.title,\n                taskCost: task.cost,\n                taskStartDate: task.startDate,\n                taskEndDate: task.endDate,\n                monthStart: monthStart.toISOString().split('T')[0],\n                monthEnd: monthEnd.toISOString().split('T')[0],\n                isInMonth: normalizedTaskStart <= monthEnd && normalizedTaskEnd >= monthStart,\n                plannedExpenseBefore: plannedExpense - taskCostInMonth,\n                plannedExpenseAfter: plannedExpense\n              });\n            }\n          } else {\n            // Para tareas normales: calcular porcentaje basado en duraci√≥n\n            const monthDuration = monthEnd - monthStart + 1; // Duraci√≥n del mes en ms\n            const taskDuration = normalizedTaskEnd - normalizedTaskStart + 1; // Duraci√≥n de la tarea en ms\n            \n            // Calcular intersecci√≥n de fechas\n            const intersectionStart = new Date(Math.max(normalizedTaskStart.getTime(), monthStart.getTime()));\n            const intersectionEnd = new Date(Math.min(normalizedTaskEnd.getTime(), monthEnd.getTime()));\n            const intersectionDuration = intersectionEnd - intersectionStart + 1;\n            \n            if (intersectionDuration > 0) {\n              const percentageInMonth = intersectionDuration / taskDuration;\n              const taskCostInMonth = (task.cost || 0) * percentageInMonth;\n              plannedExpense += taskCostInMonth;\n              \n              logger.debug(`üí∞ CashFlow: Tarea \"${task.name || task.title}\" en mes:`, {\n                taskCost: task.cost,\n                percentageInMonth: (percentageInMonth * 100).toFixed(1) + '%',\n                costInMonth: taskCostInMonth.toFixed(2)\n              });\n            }\n          }\n        }\n      }\n    });\n    \n    logger.debug('üîç CashFlow: Resumen del mes:', {\n      totalTasks: tasks.length,\n      tasksWithCosts,\n      tasksInMonth,\n      plannedExpense: plannedExpense.toFixed(2)\n    });\n\n    // DEBUG ESPEC√çFICO PARA JULIO 2026\n    if (monthDate.getMonth() === 6 && monthDate.getFullYear() === 2026) {\n      logger.debug('üéØ JULIO 2026 - VALOR FINAL CALCULADO:', {\n        plannedExpense: plannedExpense,\n        plannedExpenseFixed: plannedExpense.toFixed(3),\n        valorEsperadoPorUsuario: 385953.528,\n        diferencia: plannedExpense - 385953.528,\n        porcentajeDelEsperado: ((plannedExpense / 385953.528) * 100).toFixed(2) + '%'\n      });\n    }\n\n    return plannedExpense;\n  };\n\n  // Calcular gasto comprometido del mes - √ìRDENES DE COMPRA APROBADAS\n  const calculateMonthCommittedExpense = (monthDate, daysToPayment) => {\n    if (!currentProject) return 0;\n\n    logger.debug('üîç CASHFLOW PROJECTION - calculateMonthCommittedExpense iniciando:', {\n      monthDate: monthDate.toISOString().substring(0, 7),\n      purchaseOrdersLength: purchaseOrders?.length || 0,\n      purchaseOrders: purchaseOrders\n    });\n\n    // DEBUG: Mostrar todas las √≥rdenes de compra aprobadas\n    const approvedPOs = purchaseOrders?.filter(po => po.status === 'approved') || [];\n    logger.debug('üîç CASHFLOW PROJECTION - √ìrdenes de compra aprobadas:', approvedPOs.map(po => ({\n      id: po.id,\n      number: po.number,\n      status: po.status,\n      totalAmount: po.totalAmount,\n      approvalDate: po.approvalDate,\n      requestDate: po.requestDate,\n      hasApprovalDate: !!(po.approvalDate && po.approvalDate.trim() !== ''),\n      hasRequestDate: !!(po.requestDate && po.requestDate.trim() !== '')\n    })));\n\n    let committedExpense = 0;\n    // Normalizar fechas del rango mensual\n    const monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    monthStart.setHours(0, 0, 0, 0);\n    \n    const monthEnd = new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0);\n    monthEnd.setHours(23, 59, 59, 999);\n\n    logger.debug('üîç CASHFLOW PROJECTION - Rango de fechas:', {\n      monthStart: monthStart.toISOString().split('T')[0],\n      monthEnd: monthEnd.toISOString().split('T')[0]\n    });\n\n    // GASTO COMPROMETIDO: Solo √≥rdenes de compra aprobadas con fecha de aprobaci√≥n\n    const monthPOs = purchaseOrders?.filter(po => {\n      if (po.status !== 'approved') return false;\n      \n      // SOLO usar approvalDate - si no existe, no incluir la orden\n      if (!po.approvalDate || po.approvalDate.trim() === '') {\n        logger.debug('‚ö†Ô∏è CASHFLOW PROJECTION - OC sin fecha de aprobaci√≥n:', {\n          id: po.id,\n          number: po.number,\n          status: po.status,\n          totalAmount: po.totalAmount,\n          approvalDate: po.approvalDate\n        });\n        return false;\n      }\n      \n      // CORREGIDO: Usar fecha local para evitar problemas de zona horaria\n      const approvalDate = new Date(po.approvalDate + 'T00:00:00');\n      const normalizedApprovalDate = new Date(\n        approvalDate.getFullYear(),\n        approvalDate.getMonth(),\n        approvalDate.getDate(),\n        0, 0, 0, 0\n      );\n      \n      const adjustedDate = new Date(normalizedApprovalDate);\n      adjustedDate.setDate(normalizedApprovalDate.getDate() + daysToPayment);\n      adjustedDate.setHours(0, 0, 0, 0);\n      \n      const isInMonth = adjustedDate >= monthStart && adjustedDate <= monthEnd;\n      \n      logger.debug('üîç CASHFLOW PROJECTION - Evaluando OC:', {\n        id: po.id,\n        number: po.number,\n        approvalDate: po.approvalDate,\n        approvalDateParsed: approvalDate.toISOString().split('T')[0],\n        adjustedDate: adjustedDate.toISOString().split('T')[0],\n        monthStart: monthStart.toISOString().split('T')[0],\n        monthEnd: monthEnd.toISOString().split('T')[0],\n        daysToPayment,\n        status: po.status,\n        totalAmount: po.totalAmount,\n        isInMonth,\n        willInclude: isInMonth\n      });\n      \n      return isInMonth;\n    }) || [];\n\n    // Sumar el total de las √≥rdenes de compra del mes\n    committedExpense += monthPOs.reduce((sum, po) => {\n      logger.debug(`‚úÖ CASHFLOW PROJECTION - INCLUYENDO OC ${po.number}: $${po.totalAmount}`);\n      return sum + (po.totalAmount || 0);\n    }, 0);\n\n    logger.debug('üîç CASHFLOW PROJECTION - Resultado final:', {\n      monthPOsCount: monthPOs.length,\n      committedExpense\n    });\n\n    return committedExpense;\n  };\n\n  // Calcular gasto real del mes - ANTICIPOS PAGADOS + FACTURAS PAGADAS\n  const calculateMonthRealExpense = (monthDate) => {\n    if (!currentProject) return 0;\n\n    let realExpense = 0;\n    // Normalizar fechas del rango mensual\n    const monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    monthStart.setHours(0, 0, 0, 0);\n    \n    const monthEnd = new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0);\n    monthEnd.setHours(23, 59, 59, 999);\n\n    // ANTICIPOS PAGADOS\n    const monthAdvances = advances?.filter(advance => {\n      if (advance.status !== 'paid') return false;\n      \n      const paymentDate = new Date(advance.paymentDate || advance.date);\n      const normalizedPaymentDate = new Date(\n        paymentDate.getFullYear(),\n        paymentDate.getMonth(),\n        paymentDate.getDate(),\n        0, 0, 0, 0\n      );\n      return normalizedPaymentDate >= monthStart && normalizedPaymentDate <= monthEnd;\n    }) || [];\n\n    realExpense += monthAdvances.reduce((sum, advance) => sum + (advance.amount || 0), 0);\n\n    // FACTURAS PAGADAS\n    const monthInvoices = invoices?.filter(invoice => {\n      if (invoice.status !== 'paid') return false;\n      \n      const paymentDate = new Date(invoice.paymentDate || invoice.date);\n      const normalizedPaymentDate = new Date(\n        paymentDate.getFullYear(),\n        paymentDate.getMonth(),\n        paymentDate.getDate(),\n        0, 0, 0, 0\n      );\n      return normalizedPaymentDate >= monthStart && normalizedPaymentDate <= monthEnd;\n    }) || [];\n\n    realExpense += monthInvoices.reduce((sum, invoice) => sum + (invoice.amount || 0), 0);\n\n    return realExpense;\n  };\n\n  // Calcular proyecci√≥n de flujo de caja\n  // FORZAR REC√ÅLCULO: Agregar timestamp para invalidar cache\n  const forceRecalculation = useMemo(() => Date.now(), [currentProject, tasks, projectionPeriod, projectionStartDate]);\n\n  const cashFlowProjection = useMemo(() => {\n    if (!currentProject) return null;\n\n    logger.debug(`üîÑ CASHFLOW PROJECTION [${componentId}] - FORZANDO REC√ÅLCULO COMPLETO:`, {\n      currentProject: currentProject?.name,\n      projectionPeriod,\n      projectionStartDate,\n      purchaseOrders: purchaseOrders?.length || 0,\n      advances: advances?.length || 0,\n      invoices: invoices?.length || 0,\n      tasks: tasks?.length || 0,\n      forceRecalculation,\n      timestamp: new Date().toISOString()\n    });\n\n    const startDate = new Date(projectionStartDate);\n    const months = parseInt(projectionPeriod);\n    const projection = [];\n\n    // Configuraci√≥n de t√©rminos de pago\n    const paymentTerms = {\n      net30: 30,\n      net60: 60,\n      net90: 90,\n      advance: -15, // 15 d√≠as antes\n      milestone: 0\n    };\n\n    const daysToPayment = paymentTerms[projectionSettings.paymentTerms];\n\n    // DEBUG: Mostrar configuraci√≥n de proyecci√≥n\n    logger.debug('üîç CASHFLOW PROJECTION - CONFIGURACI√ìN COMPLETA:', {\n      startDate: startDate.toISOString().split('T')[0],\n      months: months,\n      projectionStartDate: projectionStartDate,\n      projectionPeriod: projectionPeriod,\n      currentProject: currentProject?.name\n    });\n\n    // Calcular flujo de caja mes a mes\n    for (let i = 0; i < months; i++) {\n      // CORREGIDO: C√°lculo robusto de fechas para evitar repetici√≥n de meses\n      const currentDate = new Date(startDate.getFullYear(), startDate.getMonth() + i, 1);\n\n      const monthKey = currentDate.toISOString().slice(0, 7); // YYYY-MM\n      const monthLabel = currentDate.toLocaleDateString('es-ES', {\n        year: 'numeric',\n        month: 'long'\n      });\n\n      logger.debug(`üîç CASHFLOW PROJECTION - Procesando mes ${i + 1}: ${monthKey} (${monthLabel})`);\n\n      // DEBUG ESPEC√çFICO: Alertar cuando procesamos julio 2026\n      if (monthKey === '2026-07') {\n        logger.debug('üéØ JULIO 2026 DETECTADO - Iniciando c√°lculo detallado...');\n      }\n\n      // Calcular gasto planificado del mes\n      const monthPlannedExpense = calculateMonthPlannedExpense(currentDate);\n      logger.debug(`üîç CASHFLOW PROJECTION [${componentId}] - RESULTADO calculateMonthPlannedExpense para ${monthKey}: $${monthPlannedExpense}`);\n      \n      // Calcular gasto comprometido del mes (OCs)\n      logger.debug(`üîç CASHFLOW PROJECTION - LLAMANDO calculateMonthCommittedExpense para mes ${monthKey}`);\n      const monthCommittedExpense = calculateMonthCommittedExpense(currentDate, daysToPayment);\n      logger.debug(`üîç CASHFLOW PROJECTION - RESULTADO calculateMonthCommittedExpense: $${monthCommittedExpense}`);\n      \n      // Calcular gasto real del mes (anticipos pagados + facturas pagadas)\n      const monthRealExpense = calculateMonthRealExpense(currentDate);\n      \n      // Calcular diferencia (gasto planificado - gasto real)\n      const netCashFlow = monthPlannedExpense - monthRealExpense;\n      \n      // Calcular saldo acumulado\n      const previousBalance = i > 0 ? projection[i - 1].cumulativeBalance : 0;\n      const cumulativeBalance = previousBalance + monthPlannedExpense;\n\n      const monthProjection = {\n        month: i + 1,\n        monthKey,\n        monthLabel,\n        date: currentDate,\n        revenue: monthPlannedExpense, // Mantener 'revenue' para compatibilidad con el resto del c√≥digo\n        expenses: monthCommittedExpense, // Gasto comprometido (OCs)\n        realExpenses: monthRealExpense, // Gasto real (anticipos + facturas pagadas)\n        netCashFlow,\n        cumulativeBalance,\n        cashIn: monthPlannedExpense,\n        cashOut: monthRealExpense\n      };\n      \n      // DEBUG: Logging espec√≠fico para julio y agosto 2026\n      if (monthKey === '2026-07' || monthKey === '2026-08') {\n        logger.debug(`üîç CASHFLOW PROJECTION [${componentId}] - ASIGNANDO VALORES para ${monthKey}:`, {\n          monthPlannedExpense: monthPlannedExpense,\n          revenue: monthProjection.revenue,\n          monthLabel: monthProjection.monthLabel,\n          monthKey: monthProjection.monthKey\n        });\n      }\n      \n      projection.push(monthProjection);\n    }\n\n    // DEBUG: Logging final de la proyecci√≥n completa\n    logger.debug(`üîç CASHFLOW PROJECTION [${componentId}] - PROYECCI√ìN FINAL COMPLETA:`, {\n      totalMonths: projection.length,\n      julio2026: projection.find(m => m.monthKey === '2026-07'),\n      agosto2026: projection.find(m => m.monthKey === '2026-08'),\n      timestamp: new Date().toISOString()\n    });\n\n    return projection;\n  }, [currentProject, projectionPeriod, projectionStartDate, projectionSettings, purchaseOrders, advances, invoices, contracts, tasks, forceRecalculation]);\n\n  // Calcular m√©tricas de flujo de caja\n  const cashFlowMetrics = useMemo(() => {\n    if (!cashFlowProjection) return null;\n\n    // Calcular gasto planificado total\n    const totalPlannedExpense = cashFlowProjection.reduce((sum, month) => sum + month.revenue, 0);\n    \n    const totalCommittedExpenses = cashFlowProjection.reduce((sum, month) => sum + month.expenses, 0);\n    const totalRealExpenses = cashFlowProjection.reduce((sum, month) => sum + month.realExpenses, 0);\n    const totalNetCashFlow = totalPlannedExpense - totalRealExpenses;\n    \n    const maxCashOutflow = Math.min(...cashFlowProjection.map(m => m.cumulativeBalance));\n    const maxCashInflow = Math.max(...cashFlowProjection.map(m => m.cumulativeBalance));\n    \n    const positiveMonths = cashFlowProjection.filter(m => m.netCashFlow > 0).length;\n    const negativeMonths = cashFlowProjection.filter(m => m.netCashFlow < 0).length;\n    \n    const averageMonthlyPlannedExpense = totalPlannedExpense / cashFlowProjection.length;\n    const averageMonthlyCommittedExpenses = totalCommittedExpenses / cashFlowProjection.length;\n    const averageMonthlyRealExpenses = totalRealExpenses / cashFlowProjection.length;\n    \n    return {\n      totalRevenue: totalPlannedExpense, // Mantener 'totalRevenue' para compatibilidad\n      totalPlannedExpense,\n      totalCommittedExpenses,\n      totalRealExpenses,\n      totalExpenses: totalCommittedExpenses, // Mantener para compatibilidad\n      totalNetCashFlow,\n      maxCashOutflow,\n      maxCashInflow,\n      positiveMonths,\n      negativeMonths,\n      averageMonthlyRevenue: averageMonthlyPlannedExpense,\n      averageMonthlyExpenses: averageMonthlyCommittedExpenses,\n      averageMonthlyRealExpenses,\n      projectDuration: cashFlowProjection.length\n    };\n  }, [cashFlowProjection]);\n\n  // Exportar proyecci√≥n a Excel\n  const exportProjection = () => {\n    if (!cashFlowProjection) return;\n\n    const csvContent = [\n      ['Mes', 'Gasto Planificado', 'Gasto Comprometido (OCs)', 'Gasto Real', 'Saldo Acumulado'],\n      ...cashFlowProjection.map(month => [\n        month.monthLabel,\n        formatCurrency(month.revenue),\n        formatCurrency(month.expenses),\n        formatCurrency(month.realExpenses),\n        formatCurrency(month.cumulativeBalance)\n      ])\n    ].map(row => row.join(',')).join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `proyeccion-flujo-caja-${currentProject?.name || 'proyecto'}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n\n    // Registrar en audit log\n    addAuditEvent('cash_flow', 'projection_exported', {\n      projectId: currentProjectId,\n      period: projectionPeriod,\n      startDate: projectionStartDate\n    });\n  };\n\n  // Funci√≥n para formatear n√∫meros con formato mexicano: $1.234.567,89\n  const formatCurrency = (value) => {\n    if (value === null || value === undefined || isNaN(value)) return '$0,00';\n    \n    // Formatear con separadores de miles (punto) y decimales (coma)\n    // CORRECCI√ìN: Permitir hasta 3 decimales para preservar precisi√≥n de costos\n    const formatted = new Intl.NumberFormat('es-MX', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 3\n    }).format(value);\n    \n    return `$${formatted}`;\n  };\n\n  // Obtener color para el flujo de caja\n  const getCashFlowColor = (value) => {\n    if (value > 0) return 'text-green-600';\n    if (value < 0) return 'text-red-600';\n    return 'text-gray-600';\n  };\n\n  // Obtener color para el saldo acumulado\n  const getBalanceColor = (value) => {\n    if (value > 0) return 'text-green-700';\n    if (value < 0) return 'text-red-700';\n    return 'text-gray-700';\n  };\n\n  if (!currentProject) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 p-6\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"bg-white rounded-xl shadow-sm p-12 text-center\">\n            <div className=\"text-6xl mb-6\">üí∞</div>\n            <div className=\"text-2xl font-bold text-gray-700 mb-2\">\n              Proyecto no seleccionado\n            </div>\n            <div className=\"text-gray-500\">\n              Selecciona un proyecto para ver la proyecci√≥n de flujo de caja\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-green-50 to-emerald-100 rounded-2xl shadow-lg p-8 mb-8 text-gray-800 relative overflow-hidden\">\n          {/* Elementos decorativos de fondo */}\n          <div className=\"absolute top-0 right-0 w-32 h-32 bg-green-100/30 rounded-full -translate-y-16 translate-x-16\"></div>\n          <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-emerald-100/30 rounded-full translate-y-12 -translate-x-12\"></div>\n          \n          <div className=\"relative z-10\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <div className=\"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm\">\n                  <span className=\"text-3xl\">üí∞</span>\n                </div>\n                <div>\n                  <h1 className=\"text-4xl font-bold mb-3 text-gray-800\">Proyecci√≥n de Flujo de Caja</h1>\n                  <p className=\"text-gray-600 text-lg\">\n                    An√°lisis financiero del proyecto seg√∫n PMBOK v7 - Gesti√≥n de Costos\n                  </p>\n                  <div className=\"mt-4 flex items-center space-x-6 text-sm text-gray-700\">\n                    <span className=\"flex items-center space-x-1\">\n                      <span className=\"text-gray-500\">üìä</span>\n                      <span>Proyecto: {currentProject.name}</span>\n                    </span>\n                    <span className=\"flex items-center space-x-1\">\n                      <span className=\"text-gray-500\">üìÖ</span>\n                      <span>Per√≠odo: {projectionPeriod} meses</span>\n                    </span>\n                    <span className=\"flex items-center space-x-1\">\n                      <span className=\"text-gray-500\">üíµ</span>\n                      <span>Presupuesto: ${(currentProject.budget / 1000).toFixed(0)}K</span>\n                    </span>\n                    <span className=\"flex items-center space-x-1\">\n                      <span className=\"text-gray-500\">üõ°Ô∏è</span>\n                      <span>Reserva: ${((currentProject.contingencyReserve + currentProject.managementReserve) / 1000).toFixed(0)}K</span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-4\">\n                <button\n                  onClick={exportProjection}\n                  className=\"px-6 py-3 bg-white text-green-700 rounded-xl hover:bg-green-50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 font-semibold border border-green-200\"\n                >\n                  üìä Exportar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* M√©tricas principales */}\n        {cashFlowMetrics && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-orange-500\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-2xl font-bold text-gray-800\">{formatCurrency(cashFlowMetrics.totalRevenue)}</div>\n                  <div className=\"text-sm text-gray-600\">Gasto Planificado Total</div>\n                </div>\n                <div className=\"p-3 bg-orange-100 rounded-lg\">\n                  <span className=\"text-2xl\">üí∞</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-red-500\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-2xl font-bold text-gray-800\">{formatCurrency(cashFlowMetrics.totalExpenses)}</div>\n                  <div className=\"text-sm text-gray-600\">Gastos Totales</div>\n                </div>\n                <div className=\"p-3 bg-red-100 rounded-lg\">\n                  <span className=\"text-2xl\">üìâ</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className={`text-2xl font-bold ${getCashFlowColor(cashFlowMetrics.totalNetCashFlow)}`}>\n                    {formatCurrency(cashFlowMetrics.totalNetCashFlow)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Flujo Neto</div>\n                </div>\n                <div className=\"p-3 bg-blue-100 rounded-lg\">\n                  <span className=\"text-2xl\">üí∞</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className={`text-2xl font-bold ${getBalanceColor(cashFlowMetrics.maxCashOutflow)}`}>\n                    {formatCurrency(cashFlowMetrics.maxCashOutflow)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">M√°ximo D√©ficit</div>\n                </div>\n                <div className=\"p-3 bg-purple-100 rounded-lg\">\n                  <span className=\"text-2xl\">‚ö†Ô∏è</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Configuraci√≥n de proyecci√≥n */}\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                üìÖ Per√≠odo de Proyecci√≥n (meses)\n              </label>\n              <select\n                value={projectionPeriod}\n                onChange={(e) => setProjectionPeriod(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors\"\n              >\n                <option value=\"6\">6 meses</option>\n                <option value=\"12\">12 meses</option>\n                <option value=\"18\">18 meses</option>\n                <option value=\"24\">24 meses</option>\n                <option value=\"36\">36 meses</option>\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                üöÄ Fecha de Inicio\n              </label>\n              <input\n                type=\"date\"\n                value={projectionStartDate}\n                onChange={(e) => setProjectionStartDate(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors\"\n              />\n            </div>\n            \n            <div className=\"flex items-end\">\n              <button\n                onClick={() => setShowProjectionSettings(true)}\n                className=\"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n              >\n                ‚öôÔ∏è Configuraci√≥n Avanzada\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Tabla de proyecci√≥n */}\n        {cashFlowProjection && (\n          <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                üìä Proyecci√≥n Mensual de Flujo de Caja\n              </h3>\n            </div>\n            \n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gradient-to-r from-gray-50 to-gray-100\">\n                  <tr>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Mes</th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Gasto Comprometido (OCs)</th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Gasto Planificado</th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Gasto Real</th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Saldo Acumulado</th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Estado</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-100\">\n                  {cashFlowProjection.map((month) => {\n                    // DEBUG: Logging espec√≠fico para julio y agosto 2026 en el renderizado\n                    if (month.monthKey === '2026-07' || month.monthKey === '2026-08') {\n                      logger.debug(`üîç CASHFLOW RENDER [${componentId}] - RENDERIZANDO ${month.monthKey}:`, {\n                        monthLabel: month.monthLabel,\n                        revenue: month.revenue,\n                        formattedRevenue: formatCurrency(month.revenue),\n                        monthObject: month\n                      });\n                    }\n                    \n                    return (\n                    <tr key={month.month} className=\"hover:bg-gray-50 transition-colors\">\n                      <td className=\"px-6 py-4\">\n                        <div className=\"font-medium text-gray-900\">{month.monthLabel}</div>\n                        <div className=\"text-sm text-gray-500\">Mes {month.month}</div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"text-blue-600 font-medium\">{formatCurrency(month.expenses)}</div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"text-orange-600 font-medium\">{formatCurrency(month.revenue)}</div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"text-red-600 font-medium\">{formatCurrency(month.realExpenses)}</div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className={`font-medium ${getBalanceColor(month.cumulativeBalance)}`}>\n                          {formatCurrency(month.cumulativeBalance)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                          month.cumulativeBalance > 0\n                            ? 'bg-green-100 text-green-800'\n                            : month.cumulativeBalance < 0\n                            ? 'bg-red-100 text-red-800'\n                            : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {month.cumulativeBalance > 0 ? '‚úÖ Positivo' : month.cumulativeBalance < 0 ? '‚ö†Ô∏è D√©ficit' : '‚öñÔ∏è Equilibrio'}\n                        </span>\n                      </td>\n                    </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Gr√°fico de flujo de caja */}\n        {cashFlowProjection && (\n          <div className=\"bg-white rounded-xl shadow-sm p-6 mt-8\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-6\">üìà Gr√°fico de Flujo de Caja</h3>\n            \n            {/* Gr√°fico de barras - Flujo Neto Mensual */}\n            <div className=\"mb-8\">\n              <h4 className=\"text-md font-medium text-gray-700 mb-4\">üí∞ Flujo Neto Mensual</h4>\n              <div className=\"h-48 flex items-end justify-between space-x-2\">\n                {cashFlowProjection.map((month) => {\n                  // SOLUCI√ìN DEL USUARIO: Calcular altura basada en el valor m√°s alto\n                  const maxNetFlow = Math.max(\n                    ...cashFlowProjection.map(m => Math.abs(m.netCashFlow))\n                  );\n                  \n                  // Altura proporcional en p√≠xeles: valor actual / valor m√°s alto * altura del contenedor\n                  const containerHeight = 192; // h-48 = 192px\n                  let height = 0;\n                  if (maxNetFlow > 0) {\n                    height = (Math.abs(month.netCashFlow) / maxNetFlow) * containerHeight;\n                  }\n                  \n                  // Altura m√≠nima solo para valores exactamente cero\n                  if (month.netCashFlow === 0) {\n                    height = 2; // Altura m√≠nima para valores exactamente cero\n                  }\n                  \n                  return (\n                    <div key={`net-${month.month}`} className=\"flex-1 flex flex-col items-center\">\n                      <div className=\"text-xs text-gray-500 mb-2 text-center\">\n                        {month.monthLabel.slice(0, 3)}\n                      </div>\n                      <div \n                        className={`w-full rounded-t transition-all duration-300 ${\n                          month.netCashFlow > 0 \n                            ? 'bg-green-500' \n                            : month.netCashFlow < 0 \n                            ? 'bg-red-500'\n                            : 'bg-gray-400'\n                        }`}\n                        style={{ \n                          height: `${height}px`\n                        }}\n                      ></div>\n                      <div className={`text-xs font-medium mt-1 ${getCashFlowColor(month.netCashFlow)}`}>\n                        {formatCurrency(month.netCashFlow)}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n            \n            {/* Gr√°fico de l√≠neas - Saldo Acumulado */}\n            <div className=\"mb-8\">\n              <h4 className=\"text-md font-medium text-gray-700 mb-4\">üìä Saldo Acumulado (L√≠nea de Tiempo)</h4>\n              <div className=\"h-48 relative\">\n                <svg className=\"w-full h-full\" viewBox={`0 0 ${cashFlowProjection.length * 100} 200`}>\n                  {/* L√≠neas de referencia */}\n                  <line x1=\"0\" y1=\"100\" x2={cashFlowProjection.length * 100} y2=\"100\" \n                         stroke=\"#e5e7eb\" strokeWidth=\"1\" strokeDasharray=\"5,5\" />\n                  \n                  {/* L√≠nea del saldo acumulado */}\n                  {(() => {\n                    const minBalance = Math.min(...cashFlowProjection.map(m => m.cumulativeBalance));\n                    const maxBalance = Math.max(...cashFlowProjection.map(m => m.cumulativeBalance));\n                    const range = maxBalance - minBalance;\n                    \n                    const points = cashFlowProjection.map((month, index) => {\n                      const normalizedY = range > 0 ? (month.cumulativeBalance - minBalance) / range : 0.5;\n                      const y = 200 - (normalizedY * 180);\n                      return `${index * 100 + 50},${y}`;\n                    }).join(' ');\n                    \n                    return (\n                      <polyline\n                        points={points}\n                        fill=\"none\"\n                        stroke=\"#3b82f6\"\n                        strokeWidth=\"3\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                      />\n                    );\n                  })()}\n                  \n                  {/* Puntos de datos */}\n                  {(() => {\n                    const minBalance = Math.min(...cashFlowProjection.map(m => m.cumulativeBalance));\n                    const maxBalance = Math.max(...cashFlowProjection.map(m => m.cumulativeBalance));\n                    const range = maxBalance - minBalance;\n                    \n                    return cashFlowProjection.map((month, index) => {\n                      const normalizedY = range > 0 ? (month.cumulativeBalance - minBalance) / range : 0.5;\n                      const y = 200 - (normalizedY * 180);\n                      \n                      return (\n                        <circle\n                          key={`point-${month.month}`}\n                          cx={index * 100 + 50}\n                          cy={y}\n                          r=\"4\"\n                          fill={month.cumulativeBalance > 0 ? \"#10b981\" : month.cumulativeBalance < 0 ? \"#ef4444\" : \"#6b7280\"}\n                          stroke=\"white\"\n                          strokeWidth=\"2\"\n                        />\n                      );\n                    });\n                  })()}\n                </svg>\n                \n                {/* Etiquetas de meses en el eje X */}\n                <div className=\"absolute bottom-0 left-0 right-0 flex justify-between px-4\">\n                  {cashFlowProjection.map((month) => (\n                    <div key={`label-${month.month}`} className=\"text-xs text-gray-500\">\n                      {month.monthLabel.slice(0, 3)}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n            \n            \n          </div>\n        )}\n      </div>\n\n      {/* Modal de configuraci√≥n */}\n      {showProjectionSettings && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-8\">\n              <div className=\"flex items-center justify-between mb-8\">\n                <h2 className=\"text-3xl font-bold text-gray-800\">‚öôÔ∏è Configuraci√≥n de Proyecci√≥n</h2>\n                <button\n                  onClick={() => setShowProjectionSettings(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors\"\n                >\n                  ‚úï\n                </button>\n              </div>\n              \n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    üìä T√©rminos de Pago para √ìrdenes de Compra\n                  </label>\n                  <select\n                    value={projectionSettings.paymentTerms}\n                    onChange={(e) => setProjectionSettings({\n                      projectId: projectionSettings.projectId,\n                      startDate: projectionSettings.startDate,\n                      endDate: projectionSettings.endDate,\n                      paymentTerms: e.target.value,\n                      revenueRecognition: projectionSettings.revenueRecognition,\n                      expenseTiming: projectionSettings.expenseTiming,\n                      cashFlowBuffer: projectionSettings.cashFlowBuffer\n                    })}\n                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors\"\n                  >\n                    <option value=\"net30\">Net 30 d√≠as</option>\n                    <option value=\"net60\">Net 60 d√≠as</option>\n                    <option value=\"net90\">Net 90 d√≠as</option>\n                    <option value=\"advance\">Anticipado (15 d√≠as antes)</option>\n                    <option value=\"milestone\">Por hitos</option>\n                  </select>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Define cu√°ndo se registran los gastos de las √≥rdenes de compra en el flujo de caja\n                  </p>\n                  <div className=\"text-xs text-gray-400 mt-2 space-y-1\">\n                    <div>‚Ä¢ <strong>Por hitos:</strong> Usa la fecha de aprobaci√≥n directamente</div>\n                    <div>‚Ä¢ <strong>Net 30/60/90:</strong> Fecha de aprobaci√≥n + d√≠as de pago</div>\n                    <div>‚Ä¢ <strong>Anticipado:</strong> Fecha de aprobaci√≥n - 15 d√≠as</div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    üìà Reconocimiento de Ingresos\n                  </label>\n                  <select\n                    value={projectionSettings.revenueRecognition}\n                    onChange={(e) => setProjectionSettings({\n                      projectId: projectionSettings.projectId,\n                      startDate: projectionSettings.startDate,\n                      endDate: projectionSettings.endDate,\n                      paymentTerms: projectionSettings.paymentTerms,\n                      revenueRecognition: e.target.value,\n                      expenseTiming: projectionSettings.expenseTiming,\n                      cashFlowBuffer: projectionSettings.cashFlowBuffer\n                    })}\n                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors\"\n                  >\n                    <option value=\"uniform\">Distribuci√≥n Uniforme</option>\n                    <option value=\"percentage_completion\">Por Progreso del Proyecto</option>\n                  </select>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    C√≥mo se distribuye el presupuesto del proyecto a lo largo del tiempo\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex justify-end space-x-4 pt-6 border-t mt-8\">\n                <button\n                  onClick={() => setShowProjectionSettings(false)}\n                  className=\"px-6 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-colors font-medium\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  onClick={() => setShowProjectionSettings(false)}\n                  className=\"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl\"\n                >\n                  üíæ Guardar Configuraci√≥n\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CashFlowProjection;\n"],"names":["_ref","currentProjectId","currentProject","projects","workPackages","tasks","purchaseOrders","advances","invoices","contracts","componentId","useMemo","Math","random","toString","substr","logger","debug","concat","name","tasksCount","length","timestamp","Date","toISOString","totalTasks","tasksWithCosts","filter","t","cost","tasksWithCostsDetails","map","id","startDate","endDate","isMilestone","projectionPeriod","setProjectionPeriod","useState","projectionStartDate","setProjectionStartDate","split","showProjectionSettings","setShowProjectionSettings","projectionSettings","setProjectionSettings","paymentTerms","revenueRecognition","addAuditEvent","useAuditLog","calculateMonthPlannedExpense","monthDate","monthStart","getFullYear","getMonth","setHours","monthEnd","month","toLocaleDateString","year","totalCostoEsperado","tareasEnJulio","tareasExcluidasJulio","forEach","task","index","taskStart","normalizedTaskStart","getDate","taskEnd","normalizedTaskEnd","isInMonth","duration","title","push","razon","totalTareas","tareasConCosto","costoTotalEsperado","costoPromedioPorTarea","plannedExpense","tasksInMonth","hasCost","hasDates","monthName","taskName","taskCost","taskStartDate","taskEndDate","taskIndex","taskId","toUpperCase","comparison","taskStartGreaterEqualMonthStart","taskStartLessEqualMonthEnd","taskStartTime","getTime","monthStartTime","monthEndTime","taskCostInMonth","costInMonth","toFixed","plannedExpenseBefore","plannedExpenseAfter","taskDuration","intersectionStart","max","intersectionDuration","min","percentageInMonth","plannedExpenseFixed","valorEsperadoPorUsuario","diferencia","porcentajeDelEsperado","calculateMonthCommittedExpense","daysToPayment","substring","purchaseOrdersLength","approvedPOs","po","status","number","totalAmount","approvalDate","requestDate","hasApprovalDate","trim","hasRequestDate","committedExpense","monthPOs","normalizedApprovalDate","adjustedDate","setDate","approvalDateParsed","willInclude","reduce","sum","monthPOsCount","calculateMonthRealExpense","realExpense","advance","paymentDate","date","normalizedPaymentDate","amount","invoice","forceRecalculation","now","cashFlowProjection","months","parseInt","projection","net30","net60","net90","milestone","i","currentDate","monthKey","slice","monthLabel","monthPlannedExpense","monthCommittedExpense","monthRealExpense","monthProjection","revenue","expenses","realExpenses","netCashFlow","cumulativeBalance","cashIn","cashOut","totalMonths","julio2026","find","m","agosto2026","cashFlowMetrics","totalPlannedExpense","totalCommittedExpenses","totalRealExpenses","totalRevenue","totalExpenses","totalNetCashFlow","maxCashOutflow","maxCashInflow","positiveMonths","negativeMonths","averageMonthlyRevenue","averageMonthlyExpenses","averageMonthlyRealExpenses","projectDuration","formatCurrency","value","undefined","isNaN","formatted","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","getCashFlowColor","getBalanceColor","_jsxs","className","children","_jsx","budget","contingencyReserve","managementReserve","onClick","exportProjection","csvContent","row","join","blob","Blob","type","url","window","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","projectId","period","onChange","e","target","formattedRevenue","monthObject","maxNetFlow","abs","height","style","viewBox","x1","y1","x2","y2","stroke","strokeWidth","strokeDasharray","minBalance","range","points","y","fill","strokeLinecap","strokeLinejoin","cx","cy","r","expenseTiming","cashFlowBuffer"],"sourceRoot":""}