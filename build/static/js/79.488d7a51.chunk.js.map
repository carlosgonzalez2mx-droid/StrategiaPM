{"version":3,"file":"static/js/79.488d7a51.chunk.js","mappings":"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","sources":["components/ProjectAudit.js","components/ProjectManagementTabs.js"],"sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\nimport useAuditLog from '../hooks/useAuditLog';\n\nconst ProjectAudit = ({\n  projects,\n  currentProjectId,\n  workPackages,\n  risks,\n  tasks,\n  purchaseOrders,\n  advances,\n  invoices,\n  contracts,\n  resourceAssignments,\n  useSupabase = true\n}) => {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [dateFilter, setDateFilter] = useState('all');\n  const [categoryFilter, setCategoryFilter] = useState('all');\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const currentProject = projects.find(p => p.id === currentProjectId);\n  \n  // Usar el hook de auditorÃ­a\n  const { auditLog, exportAuditLog, clearAuditLog } = useAuditLog(currentProjectId, useSupabase);\n\n\n  // Combinar eventos generados automÃ¡ticamente con el log de auditorÃ­a\n  const auditEvents = useMemo(() => {\n    if (!currentProject) return [];\n\n    const events = [];\n    const projectStartDate = new Date(currentProject.updatedAt || currentProject.createdAt);\n\n    // Agregar eventos del log de auditorÃ­a\n    events.push(...auditLog);\n\n    // Evento de activaciÃ³n del proyecto (si no existe en el log)\n    if (currentProject.status === 'active' && !auditLog.find(e => e.action === 'project-activated')) {\n      events.push({\n        id: `event-${Date.now()}-1`,\n        timestamp: projectStartDate,\n        category: 'project-status',\n        action: 'project-activated',\n        description: `Proyecto \"${currentProject.name}\" activado`,\n        details: {\n          previousStatus: 'inactive',\n          newStatus: 'active',\n          manager: currentProject.manager,\n          budget: currentProject.budget,\n          startDate: currentProject.startDate,\n          endDate: currentProject.endDate\n        },\n        severity: 'high',\n        user: currentProject.manager\n      });\n    }\n\n    // Eventos de work packages\n    workPackages.forEach((wp, index) => {\n      if (wp.status === 'active' || wp.status === 'in-progress' || wp.status === 'completed') {\n        events.push({\n          id: `event-${Date.now()}-wp-${index}`,\n          timestamp: new Date(wp.updatedAt || wp.createdAt || projectStartDate),\n          category: 'work-package',\n          action: 'work-package-created',\n          description: `Work Package \"${wp.name}\" creado`,\n          details: {\n            workPackageId: wp.id,\n            name: wp.name,\n            budget: wp.budget,\n            status: wp.status,\n            progress: wp.progress || 0\n          },\n          severity: 'medium',\n          user: currentProject.manager\n        });\n      }\n    });\n\n    // Eventos de riesgos\n    risks.forEach((risk, index) => {\n      if (risk.status === 'active' || risk.status === 'mitigated') {\n        events.push({\n          id: `event-${Date.now()}-risk-${index}`,\n          timestamp: new Date(risk.updatedAt || risk.createdAt || projectStartDate),\n          category: 'risk',\n          action: 'risk-identified',\n          description: `Riesgo \"${risk.name}\" identificado`,\n          details: {\n            riskId: risk.id,\n            name: risk.name,\n            probability: risk.probability,\n            impact: risk.impact,\n            priority: risk.priority,\n            status: risk.status\n          },\n          severity: risk.priority === 'high' ? 'high' : 'medium',\n          user: currentProject.manager\n        });\n      }\n    });\n\n    // Eventos de tareas del cronograma\n    tasks.forEach((task, index) => {\n      if (task.status === 'active' || task.status === 'in-progress' || task.status === 'completed') {\n        events.push({\n          id: `event-${Date.now()}-task-${index}`,\n          timestamp: new Date(task.updatedAt || task.createdAt || projectStartDate),\n          category: 'schedule',\n          action: 'task-created',\n          description: `Tarea \"${task.name}\" creada`,\n          details: {\n            taskId: task.id,\n            name: task.name,\n            duration: task.duration,\n            status: task.status,\n            startDate: task.startDate,\n            endDate: task.endDate\n          },\n          severity: 'medium',\n          user: currentProject.manager\n        });\n      }\n    });\n\n    // Eventos financieros\n    purchaseOrders.forEach((po, index) => {\n      events.push({\n        id: `event-${Date.now()}-po-${index}`,\n        timestamp: new Date(po.updatedAt || po.createdAt || projectStartDate),\n        category: 'financial',\n        action: 'purchase-order-created',\n        description: `Orden de Compra \"${po.description}\" creada`,\n        details: {\n          poId: po.id,\n          description: po.description,\n          amount: po.amount,\n          status: po.status,\n          supplier: po.supplier\n        },\n        severity: 'high',\n        user: currentProject.manager\n      });\n    });\n\n    advances.forEach((advance, index) => {\n      events.push({\n        id: `event-${Date.now()}-advance-${index}`,\n        timestamp: new Date(advance.updatedAt || advance.createdAt || projectStartDate),\n        category: 'financial',\n        action: 'advance-created',\n        description: `Anticipo \"${advance.description}\" creado`,\n        details: {\n          advanceId: advance.id,\n          description: advance.description,\n          amount: advance.amount,\n          status: advance.status,\n          recipient: advance.recipient\n        },\n        severity: 'high',\n        user: currentProject.manager\n      });\n    });\n\n    invoices.forEach((invoice, index) => {\n      events.push({\n        id: `event-${Date.now()}-invoice-${index}`,\n        timestamp: new Date(invoice.updatedAt || invoice.createdAt || projectStartDate),\n        category: 'financial',\n        action: 'invoice-created',\n        description: `Factura \"${invoice.description}\" creada`,\n        details: {\n          invoiceId: invoice.id,\n          description: invoice.description,\n          amount: invoice.amount,\n          status: invoice.status,\n          supplier: invoice.supplier\n        },\n        severity: 'high',\n        user: currentProject.manager\n      });\n    });\n\n    // Eventos de contratos\n    contracts.forEach((contract, index) => {\n      events.push({\n        id: `event-${Date.now()}-contract-${index}`,\n        timestamp: new Date(contract.updatedAt || contract.createdAt || projectStartDate),\n        category: 'contracts',\n        action: 'contract-created',\n        description: `Contrato \"${contract.name}\" creado`,\n        details: {\n          contractId: contract.id,\n          name: contract.name,\n          value: contract.value,\n          status: contract.status,\n          contractor: contract.contractor\n        },\n        severity: 'high',\n        user: currentProject.manager\n      });\n    });\n\n    // Eventos de asignaciÃ³n de recursos\n    resourceAssignments.forEach((assignment, index) => {\n      events.push({\n        id: `event-${Date.now()}-resource-${index}`,\n        timestamp: new Date(assignment.updatedAt || assignment.createdAt || projectStartDate),\n        category: 'resources',\n        action: 'resource-assigned',\n        description: `Recurso asignado al proyecto`,\n        details: {\n          assignmentId: assignment.id,\n          resourceId: assignment.resourceId,\n          role: assignment.role,\n          startDate: assignment.startDate,\n          endDate: assignment.endDate,\n          allocation: assignment.allocation\n        },\n        severity: 'medium',\n        user: currentProject.manager\n      });\n    });\n\n    // Ordenar eventos por fecha (mÃ¡s recientes primero)\n    return events.sort((a, b) => b.timestamp - a.timestamp);\n  }, [currentProject, workPackages, risks, tasks, purchaseOrders, advances, invoices, contracts, resourceAssignments, auditLog]);\n\n  // Filtrar eventos\n  const filteredEvents = useMemo(() => {\n    let filtered = auditEvents;\n\n    // Filtro por categorÃ­a\n    if (categoryFilter !== 'all') {\n      filtered = filtered.filter(event => event.category === categoryFilter);\n    }\n\n    // Filtro por fecha\n    if (dateFilter !== 'all') {\n      const now = new Date();\n      const filterDate = new Date();\n\n      switch (dateFilter) {\n        case 'today':\n          filterDate.setHours(0, 0, 0, 0);\n          filtered = filtered.filter(event => event.timestamp >= filterDate);\n          break;\n        case 'week':\n          filterDate.setDate(filterDate.getDate() - 7);\n          filtered = filtered.filter(event => event.timestamp >= filterDate);\n          break;\n        case 'month':\n          filterDate.setMonth(filterDate.getMonth() - 1);\n          filtered = filtered.filter(event => event.timestamp >= filterDate);\n          break;\n        case 'quarter':\n          filterDate.setMonth(filterDate.getMonth() - 3);\n          filtered = filtered.filter(event => event.timestamp >= filterDate);\n          break;\n      }\n    }\n\n    // Filtro por bÃºsqueda\n    if (searchTerm) {\n      filtered = filtered.filter(event =>\n        event.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        event.details?.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        event.category.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    }\n\n    return filtered;\n  }, [auditEvents, categoryFilter, dateFilter, searchTerm]);\n\n  const getCategoryIcon = (category) => {\n    switch (category) {\n      case 'project-status': return 'ðŸ¢';\n      case 'work-package': return 'ðŸ“¦';\n      case 'risk': return 'âš ï¸';\n      case 'schedule': return 'ðŸ“…';\n      case 'financial': return 'ðŸ’°';\n      case 'contracts': return 'ðŸ“‹';\n      case 'resources': return 'ðŸ‘¥';\n      case 'minutes': return 'ðŸ“';\n      default: return 'ðŸ“„';\n    }\n  };\n\n  const getSeverityColor = (severity) => {\n    switch (severity) {\n      case 'high': return 'text-red-600 bg-red-50 border-red-200';\n      case 'medium': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n      case 'low': return 'text-green-600 bg-green-50 border-green-200';\n      default: return 'text-gray-600 bg-gray-50 border-gray-200';\n    }\n  };\n\n  const getActionDescription = (action) => {\n    switch (action) {\n      case 'project-activated': return 'Proyecto Activado';\n      case 'work-package-created': return 'Work Package Creado';\n      case 'risk-identified': return 'Riesgo Identificado';\n      case 'task-created': return 'Tarea Creada';\n      case 'purchase-order-created': return 'Orden de Compra Creada';\n      case 'advance-created': return 'Anticipo Creado';\n      case 'invoice-created': return 'Factura Creada';\n      case 'contract-created': return 'Contrato Creado';\n      case 'resource-assigned': return 'Recurso Asignado';\n      case 'minute-task-created': return 'Tarea de Minuta Creada';\n      case 'minute-task-updated': return 'Tarea de Minuta Actualizada';\n      case 'created': return 'Creado';\n      case 'modified': return 'Modificado';\n      default: return action;\n    }\n  };\n\n  const exportAuditReport = () => {\n    exportAuditLog();\n  };\n\n  if (!currentProject) {\n    return (\n      <div className=\"text-center py-12 text-gray-500\">\n        <div className=\"text-4xl mb-4\">ðŸ“‹</div>\n        <div className=\"text-lg mb-2\">Selecciona un proyecto para ver su auditorÃ­a</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-purple-50 to-indigo-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden\">\n        {/* Elementos decorativos de fondo */}\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-purple-100/30 rounded-full -translate-y-16 translate-x-16\"></div>\n        <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-indigo-100/30 rounded-full translate-y-12 -translate-x-12\"></div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <div className=\"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm\">\n                <span className=\"text-3xl\">ðŸ“‹</span>\n              </div>\n              <div>\n                <h1 className=\"text-4xl font-bold mb-2 text-gray-800\">AuditorÃ­a Documental</h1>\n                <p className=\"text-gray-600 text-lg\">\n                  Registro completo de movimientos del proyecto \"{currentProject.name}\"\n                </p>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-4xl font-bold text-gray-800\">\n                {filteredEvents.length}\n              </div>\n              <div className=\"text-gray-600\">Eventos Registrados</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Nota Informativa */}\n      <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n        <div className=\"flex items-center\">\n          <div className=\"text-purple-600 text-xl mr-3\">â„¹ï¸</div>\n          <div className=\"text-purple-800\">\n            <strong>Sistema de AuditorÃ­a AutomÃ¡tica:</strong> Este sistema registra automÃ¡ticamente todos los movimientos \n            del proyecto desde que cambia a estado \"Activo\". Los eventos se guardan localmente y se pueden exportar \n            para anÃ¡lisis externos o cumplimiento regulatorio.\n          </div>\n        </div>\n      </div>\n\n      {/* Filtros */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">CategorÃ­a</label>\n            <select \n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n              value={categoryFilter}\n              onChange={(e) => setCategoryFilter(e.target.value)}\n            >\n              <option value=\"all\">Todas las categorÃ­as</option>\n              <option value=\"project-status\">Estado del Proyecto</option>\n              <option value=\"work-package\">Work Packages</option>\n              <option value=\"risk\">Riesgos</option>\n              <option value=\"schedule\">Cronograma</option>\n              <option value=\"financial\">Financiero</option>\n              <option value=\"contracts\">Contratos</option>\n              <option value=\"resources\">Recursos</option>\n              <option value=\"minutes\">Minutas</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">PerÃ­odo</label>\n            <select \n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n              value={dateFilter}\n              onChange={(e) => setDateFilter(e.target.value)}\n            >\n              <option value=\"all\">Todo el perÃ­odo</option>\n              <option value=\"today\">Hoy</option>\n              <option value=\"week\">Ãšltima semana</option>\n              <option value=\"month\">Ãšltimo mes</option>\n              <option value=\"quarter\">Ãšltimo trimestre</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Buscar</label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n              placeholder=\"Buscar eventos...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n          </div>\n          \n          <div className=\"flex items-end space-x-2\">\n            <button\n              onClick={exportAuditReport}\n              className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\n            >\n              ðŸ“„ Exportar Reporte\n            </button>\n            <button\n              onClick={() => {\n                if (window.confirm('Â¿EstÃ¡ seguro de limpiar todo el log de auditorÃ­a? Esta acciÃ³n no se puede deshacer.')) {\n                  clearAuditLog();\n                }\n              }}\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\n              title=\"Limpiar log de auditorÃ­a\"\n            >\n              ðŸ—‘ï¸\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* EstadÃ­sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500\">\n          <div className=\"text-sm text-gray-500 mb-1\">Total Eventos</div>\n          <div className=\"text-2xl font-bold text-gray-800\">{filteredEvents.length}</div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500\">\n          <div className=\"text-sm text-gray-500 mb-1\">Eventos Financieros</div>\n          <div className=\"text-2xl font-bold text-gray-800\">\n            {filteredEvents.filter(e => e.category === 'financial').length}\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500\">\n          <div className=\"text-sm text-gray-500 mb-1\">Alta Severidad</div>\n          <div className=\"text-2xl font-bold text-gray-800\">\n            {filteredEvents.filter(e => e.severity === 'high').length}\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500\">\n          <div className=\"text-sm text-gray-500 mb-1\">Ãšltimo Evento</div>\n          <div className=\"text-sm font-bold text-gray-800\">\n            {filteredEvents.length > 0 \n              ? new Date(filteredEvents[0].timestamp).toLocaleDateString() \n              : 'N/A'\n            }\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Eventos */}\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h3 className=\"text-lg font-semibold text-gray-800\">Registro de Eventos</h3>\n        </div>\n        \n        <div className=\"max-h-96 overflow-y-auto\">\n          {filteredEvents.length === 0 ? (\n            <div className=\"text-center py-12 text-gray-500\">\n              <div className=\"text-4xl mb-4\">ðŸ“­</div>\n              <div className=\"text-lg mb-2\">No hay eventos que coincidan con los filtros</div>\n            </div>\n          ) : (\n            <div className=\"divide-y divide-gray-200\">\n              {filteredEvents.map((event) => (\n                <div key={event.id} className=\"p-6 hover:bg-gray-50\">\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"text-2xl\">\n                      {getCategoryIcon(event.category)}\n                    </div>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"font-semibold text-gray-900\">\n                          {event.description}\n                        </h4>\n                        <div className=\"flex items-center space-x-2\">\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium border ${getSeverityColor(event.severity)}`}>\n                            {event.severity.toUpperCase()}\n                          </span>\n                          <span className=\"text-sm text-gray-500\">\n                            {new Date(event.timestamp).toLocaleString()}\n                          </span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"text-sm text-gray-600 mb-2\">\n                        <strong>AcciÃ³n:</strong> {getActionDescription(event.action)}\n                      </div>\n                      \n                      <div className=\"text-sm text-gray-600 mb-2\">\n                        <strong>Usuario:</strong> {event.user}\n                      </div>\n                      \n                      {event.details && (\n                        <div className=\"bg-gray-50 rounded p-3\">\n                          <div className=\"text-sm text-gray-700\">\n                            <strong>Detalles:</strong>\n                          </div>\n                          <div className=\"text-xs text-gray-600 mt-1\">\n                            {Object.entries(event.details).map(([key, value]) => (\n                              <div key={key} className=\"flex justify-between\">\n                                <span className=\"font-medium\">{key}:</span>\n                                <span>{String(value)}</span>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProjectAudit;\n","import { logger } from '../utils/logger';\n\nimport React, { useState, useMemo, useEffect } from 'react';\nimport RiskManagement from './RiskManagement';\nimport ScheduleManagement from './ScheduleManagement';\nimport FinancialManagement from './FinancialManagement';\nimport ResourceManagement from './ResourceManagement';\nimport FileManager from './FileManager';\nimport ProjectAudit from './ProjectAudit';\nimport ChangeManagement from './ChangeManagement';\nimport CashFlowProjection from './CashFlowProjection';\nimport usePermissions from '../hooks/usePermissions';\n\n// Componente para manejar tareas huÃ©rfanas\nconst OrphanedTasksManager = ({ orphanedTasks, availableMilestones, onReassign, updateMinutaTaskHito }) => {\n  const [reassigning, setReassigning] = useState({});\n  \n  const handleReassign = async (taskId, newHitoId) => {\n    if (!newHitoId) return;\n    \n    setReassigning(prev => ({ ...prev, [taskId]: true }));\n    \n    try {\n      const success = await updateMinutaTaskHito(taskId, newHitoId);\n      \n      if (success) {\n        // Notificar al componente padre\n        onReassign(taskId, newHitoId);\n        \n        // Mostrar confirmaciÃ³n\n        alert('âœ… Tarea reasignada exitosamente');\n      } else {\n        alert('âŒ Error al reasignar tarea');\n      }\n    } catch (error) {\n      logger.error('Error en reasignaciÃ³n:', error);\n      alert('âŒ Error al reasignar tarea');\n    } finally {\n      setReassigning(prev => ({ ...prev, [taskId]: false }));\n    }\n  };\n  \n  if (orphanedTasks.length === 0) return null;\n  \n  return (\n    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className=\"text-yellow-800 font-semibold flex items-center\">\n          <span className=\"mr-2\">âš ï¸</span>\n          Tareas de Minuta sin Hito Asignado\n        </h3>\n        <span className=\"text-sm bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full\">\n          {orphanedTasks.length} tareas\n        </span>\n      </div>\n      \n      <p className=\"text-yellow-700 text-sm mb-3\">\n        Estas tareas perdieron su hito asignado. ReasÃ­gnalas para mantener la organizaciÃ³n.\n      </p>\n      \n      <div className=\"space-y-2\">\n        {orphanedTasks.map(task => {\n          const daysUntilDeadline = Math.ceil((new Date(task.fecha) - new Date()) / (1000 * 60 * 60 * 24));\n          const urgencyColor = daysUntilDeadline <= 3 ? 'text-red-600 bg-red-100' : \n                             daysUntilDeadline <= 7 ? 'text-orange-600 bg-orange-100' : \n                             'text-yellow-600 bg-yellow-100';\n          \n          return (\n            <div key={task.id} className=\"bg-white p-3 rounded border border-yellow-200\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-2 mb-1\">\n                    <span className=\"text-sm font-medium text-gray-800\">{task.tarea}</span>\n                    <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full flex items-center\">\n                      <span className=\"mr-1\">ðŸ“</span>\n                      Minuta\n                    </span>\n                  </div>\n                  <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\n                    <span>ðŸ‘¤ {task.responsable}</span>\n                    <span>ðŸ“… {new Date(task.fecha).toLocaleDateString('es-ES')}</span>\n                    <span className={`px-2 py-1 rounded-full text-xs ${\n                      task.estatus === 'Completado' ? 'bg-green-100 text-green-800' :\n                      task.estatus === 'En Proceso' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {task.estatus}\n                    </span>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${urgencyColor}`}>\n                    {daysUntilDeadline === 0 ? 'Hoy' : \n                     daysUntilDeadline === 1 ? 'MaÃ±ana' : \n                     `${daysUntilDeadline} dÃ­as`}\n                  </span>\n                  \n                  <select \n                    value={task.hitoId || ''} \n                    onChange={(e) => handleReassign(task.id, e.target.value)}\n                    disabled={reassigning[task.id]}\n                    className=\"text-xs border border-gray-300 rounded px-2 py-1 min-w-[200px]\"\n                  >\n                    <option value=\"\">Seleccionar hito...</option>\n                    {availableMilestones.map(milestone => (\n                      <option key={milestone.id} value={milestone.id}>\n                        {milestone.name}\n                      </option>\n                    ))}\n                  </select>\n                  \n                  {reassigning[task.id] && (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600\"></div>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst ProjectManagementTabs = ({\n  projects,\n  currentProjectId,\n  setCurrentProjectId,\n  workPackages,\n  setWorkPackages,\n  risks,\n  setRisks,\n  reportingDate,\n  setReportingDate,\n  tasks,\n  setTasks,\n  importTasks,\n  includeWeekends,\n  setIncludeWeekends,\n  purchaseOrders,\n  setPurchaseOrders,\n  advances,\n  setAdvances,\n  invoices,\n  setInvoices,\n  contracts,\n  setContracts,\n  resourceAssignments,\n  useSupabase = false,\n  updateProjectMinutas\n}) => {\n  // Hook de permisos\n  const { permissions, isReadOnly } = usePermissions();\n  \n  const [activeTab, setActiveTab] = useState('summary');\n  const [scheduleData, setScheduleData] = useState(null); // Nuevo estado para datos del cronograma\n  const [archivedProjects, setArchivedProjects] = useState([]); // Estado para proyectos archivados\n  \n  // Estado para las tareas de minuta del proyecto actual\n  const [minutaTasks, setMinutaTasks] = useState([]);\n  const [loadingMinutas, setLoadingMinutas] = useState(false);\n\n  // Definir pestaÃ±as con permisos ANTES de los useEffect\n  const allProjectTabs = [\n    { id: 'summary', name: 'Dashboard Resumen', icon: 'ðŸ“Š', requiresEdit: false },\n    { id: 'risks', name: 'GestiÃ³n de Riesgos', icon: 'ðŸ›¡ï¸', requiresEdit: true },\n    { id: 'schedule', name: 'Cronograma', icon: 'ðŸ“…', requiresEdit: true },\n    { id: 'financial', name: 'GestiÃ³n Financiera', icon: 'ðŸ’°', requiresEdit: true },\n    { id: 'resources', name: 'GestiÃ³n de Recursos', icon: 'ðŸ‘¥', requiresEdit: true },\n    { id: 'changes', name: 'Control de Cambios', icon: 'ðŸ”„', requiresEdit: true },\n    { id: 'cashflow', name: 'Flujo de Caja', icon: 'ðŸ’¸', requiresEdit: false },\n    { id: 'files', name: 'Archivos', icon: 'ðŸ“Ž', requiresEdit: false },\n    { id: 'audit', name: 'AuditorÃ­a Documental', icon: 'ðŸ“‹', requiresEdit: false }\n  ];\n\n  // Filtrar pestaÃ±as basado en permisos del usuario\n  const projectTabs = allProjectTabs.filter(tab => {\n    if (tab.requiresEdit && isReadOnly()) {\n      return false; // Ocultar pestaÃ±as de gestiÃ³n para usuarios de solo lectura\n    }\n    return true;\n  });\n\n  // Escuchar eventos para cambiar de pestaÃ±a desde otros componentes\n  useEffect(() => {\n    const handleTabChange = (event) => {\n      const tabName = event.detail;\n      if (tabName && tabName !== activeTab) {\n        setActiveTab(tabName);\n      }\n    };\n\n    window.addEventListener('changeTab', handleTabChange);\n    return () => {\n      window.removeEventListener('changeTab', handleTabChange);\n    };\n  }, [activeTab]);\n\n  // ðŸ”§ CORRECCIÃ“N: Escuchar cambios de estado de minutas para sincronizaciÃ³n con Dashboard\n  useEffect(() => {\n    const handleMinutaStatusUpdate = (event) => {\n      const { tareaId, newStatus, projectId } = event.detail;\n      \n      // Solo actualizar si es del proyecto actual\n      if (projectId === currentProjectId) {\n        logger.debug('ðŸ”„ ProjectManagementTabs: Actualizando estado de minuta:', { tareaId, newStatus });\n        setMinutaTasks(prev => prev.map(task => \n          task.id === tareaId ? { ...task, estatus: newStatus } : task\n        ));\n      }\n    };\n\n    window.addEventListener('minutaStatusChanged', handleMinutaStatusUpdate);\n    return () => {\n      window.removeEventListener('minutaStatusChanged', handleMinutaStatusUpdate);\n    };\n  }, [currentProjectId]);\n\n  // Redirigir a pestaÃ±a vÃ¡lida si el usuario estÃ¡ en una pestaÃ±a oculta\n  useEffect(() => {\n    const availableTabIds = projectTabs.map(tab => tab.id);\n    if (!availableTabIds.includes(activeTab)) {\n      // Si la pestaÃ±a actual no estÃ¡ disponible, ir a la primera disponible\n      if (availableTabIds.length > 0) {\n        setActiveTab(availableTabIds[0]);\n      }\n    }\n  }, [projectTabs, activeTab]);\n\n  // Cargar tareas de minuta del proyecto actual\n  useEffect(() => {\n    const loadMinutas = async () => {\n      if (!currentProjectId) return;\n\n      setLoadingMinutas(true);\n      try {\n        if (useSupabase) {\n          // Cargar desde Supabase si estÃ¡ habilitado\n          logger.debug('ðŸ” DEBUG: Cargando minutas para proyecto:', currentProjectId);\n          // Importar el servicio de Supabase dinÃ¡micamente\n          const { default: supabaseService } = await import('../services/SupabaseService');\n          const { success, minutas } = await supabaseService.loadMinutasByProject(currentProjectId);\n          if (success) {\n            logger.debug(`ðŸ” DEBUG: Minutas recibidas de Supabase:`, minutas);\n            setMinutaTasks(minutas);\n            logger.debug(`âœ… Minutas cargadas desde Supabase: ${minutas.length}`);\n          } else {\n            logger.warn('âš ï¸ Error cargando minutas desde Supabase');\n            setMinutaTasks([]);\n          }\n        } else {\n          // Cargar desde portfolioData si estÃ¡ en modo local\n          const portfolioData = JSON.parse(localStorage.getItem('portfolioData') || '{}');\n          const minutasFromStorage = portfolioData.minutasByProject?.[currentProjectId] || [];\n          setMinutaTasks(minutasFromStorage);\n          \n          // âœ… CORRECCIÃ“N: Actualizar el estado global minutasByProject\n          if (updateProjectMinutas) {\n            updateProjectMinutas(currentProjectId, minutasFromStorage);\n          }\n          \n          logger.debug(`âœ… Minutas cargadas desde localStorage: ${minutasFromStorage.length}`);\n        }\n      } catch (error) {\n        logger.error('âŒ Error cargando minutas:', error);\n        setMinutaTasks([]);\n      } finally {\n        setLoadingMinutas(false);\n      }\n    };\n\n    loadMinutas();\n  }, [currentProjectId, useSupabase]);\n\n  // FunciÃ³n para calcular el progreso de hitos\n  const calculateMilestoneProgress = (milestone, allTasks) => {\n    if (!milestone || !allTasks) return 0;\n    \n    // CORRECCIÃ“N: Un hito debe mostrar su propio progreso, no el de las tareas relacionadas\n    // El progreso del hito viene directamente del campo 'progress' de la tarea hito\n    const milestoneProgress = milestone.progress || 0;\n    \n    logger.debug('ðŸŽ¯ CÃLCULO PROGRESO HITO CORREGIDO:', {\n      milestoneName: milestone.name,\n      milestoneId: milestone.id,\n      milestoneProgress: milestoneProgress,\n      milestoneStatus: milestone.status,\n      milestoneProgressField: milestone.progress\n    });\n    \n    return milestoneProgress;\n  };\n\n  // FunciÃ³n para obtener tareas prÃ³ximas a vencer (menos de 15 dÃ­as) - SOLO CRONOGRAMA\n  const getTasksNearDeadline = (allTasks) => {\n    if (!allTasks) return [];\n    \n    const today = new Date();\n    const fifteenDaysFromNow = new Date();\n    fifteenDaysFromNow.setDate(today.getDate() + 15);\n    \n    // Filtrar tareas que vencen en menos de 15 dÃ­as Y tareas vencidas no completadas\n    const tasksNearDeadline = allTasks.filter(task => {\n      if (task.isMilestone) return false; // Excluir hitos\n      if (task.progress >= 100) return false; // Excluir tareas completadas\n      \n      const endDate = new Date(task.endDate);\n      \n      // Incluir tareas vencidas (ya pasÃ³ la fecha) que no estÃ¡n completadas\n      const isOverdue = endDate < today;\n      \n      // Incluir tareas que vencen en los prÃ³ximos 15 dÃ­as\n      const isUpcoming = endDate >= today && endDate <= fifteenDaysFromNow;\n      \n      return isOverdue || isUpcoming;\n    });\n    \n    // CORRECCIÃ“N: Agrupar tareas por hito - las tareas pertenecen al hito que las ANTECEDE\n    const tasksByMilestone = {};\n    \n    // Obtener todos los hitos ordenados por fecha de inicio\n    const milestones = allTasks\n      .filter(t => t.isMilestone)\n      .sort((a, b) => new Date(a.startDate) - new Date(b.startDate));\n    \n    // Para cada hito, encontrar todas las tareas que estÃ¡n ANTES de Ã©l\n    milestones.forEach(milestone => {\n      const milestoneDate = new Date(milestone.startDate);\n      \n      // Encontrar tareas que estÃ¡n antes de este hito (fecha de fin <= fecha del hito)\n      const tasksBeforeMilestone = tasksNearDeadline.filter(task => {\n        const taskEndDate = new Date(task.endDate);\n        return taskEndDate <= milestoneDate;\n      });\n      \n      // Excluir tareas que ya fueron asignadas a hitos anteriores\n      const alreadyAssignedTaskIds = new Set();\n      Object.values(tasksByMilestone).forEach(group => {\n        group.tasks.forEach(t => alreadyAssignedTaskIds.add(t.id));\n      });\n      \n      const unassignedTasks = tasksBeforeMilestone.filter(task => \n        !alreadyAssignedTaskIds.has(task.id)\n      );\n      \n      if (unassignedTasks.length > 0) {\n        tasksByMilestone[milestone.id] = {\n          milestone: milestone,\n          tasks: unassignedTasks\n        };\n      }\n    });\n    \n    logger.debug('ðŸŽ¯ TAREAS AGRUPADAS POR HITO (CORREGIDO):', {\n      tasksNearDeadline: tasksNearDeadline.length,\n      tasksByMilestone: Object.keys(tasksByMilestone).length,\n      details: Object.values(tasksByMilestone).map(group => ({\n        milestoneName: group.milestone.name,\n        milestoneId: group.milestone.id,\n        tasksCount: group.tasks.length,\n        tasksNames: group.tasks.map(t => t.name)\n      }))\n    });\n    \n    return Object.values(tasksByMilestone);\n  };\n\n\n  // FunciÃ³n para obtener tareas de minuta prÃ³ximas a vencer\n  const getMinutaTasksNearDeadline = (allTasks, minutaTasks) => {\n    if (!minutaTasks || minutaTasks.length === 0) return [];\n    \n    const today = new Date();\n    const fifteenDaysFromNow = new Date();\n    fifteenDaysFromNow.setDate(today.getDate() + 15);\n    \n    // Filtrar tareas de minuta que vencen en menos de 15 dÃ­as Y tareas vencidas no completadas\n    const minutaTasksNearDeadline = minutaTasks.filter(minutaTask => {\n      if (minutaTask.estatus === 'Completado') return false; // Excluir tareas completadas\n      \n      const endDate = new Date(minutaTask.fecha);\n      \n      // Incluir tareas vencidas (ya pasÃ³ la fecha) que no estÃ¡n completadas\n      const isOverdue = endDate < today;\n      \n      // Incluir tareas que vencen en los prÃ³ximos 15 dÃ­as\n      const isUpcoming = endDate >= today && endDate <= fifteenDaysFromNow;\n      \n      return isOverdue || isUpcoming;\n    });\n    \n    // Agrupar tareas por hito\n    const tasksByMilestone = {};\n    \n    minutaTasksNearDeadline.forEach(minutaTask => {\n      // Encontrar el hito al que pertenece esta tarea de minuta\n      const milestone = allTasks.find(task => task.id === minutaTask.hitoId && task.isMilestone);\n      \n      if (milestone) {\n        if (!tasksByMilestone[milestone.id]) {\n          tasksByMilestone[milestone.id] = {\n            milestone: milestone,\n            tasks: []\n          };\n        }\n        \n        // Convertir tarea de minuta al formato esperado\n        const convertedTask = {\n          id: minutaTask.id,\n          name: minutaTask.tarea,\n          endDate: minutaTask.fecha,\n          progress: minutaTask.estatus === 'Completado' ? 100 : \n                   minutaTask.estatus === 'En Proceso' ? 50 : 0,\n          responsable: minutaTask.responsable,\n          estatus: minutaTask.estatus,\n          source: 'minuta' // Identificador de origen\n        };\n        \n        tasksByMilestone[milestone.id].tasks.push(convertedTask);\n      }\n    });\n    \n    return Object.values(tasksByMilestone);\n  };\n\n  // FunciÃ³n para detectar tareas de minuta huÃ©rfanas\n  const getOrphanedMinutaTasks = (minutaTasks, allTasks) => {\n    if (!minutaTasks || !allTasks) return [];\n    \n    return minutaTasks.filter(minutaTask => {\n      // Buscar el hito al que estÃ¡ asignada la tarea\n      const milestone = allTasks.find(task => \n        task.id === minutaTask.hitoId && task.isMilestone\n      );\n      \n      // Si no se encuentra el hito, la tarea estÃ¡ huÃ©rfana\n      return !milestone;\n    });\n  };\n\n  // FunciÃ³n para actualizar el hito de una tarea de minuta\n  const updateMinutaTaskHito = async (taskId, newHitoId) => {\n    try {\n      if (useSupabase) {\n        // Actualizar en Supabase usando el mÃ©todo correcto\n        const { default: supabaseService } = await import('../services/SupabaseService');\n        const { success } = await supabaseService.updateMinuta(taskId, { milestone_id: newHitoId });\n        if (!success) throw new Error('Error actualizando en Supabase');\n      } else {\n        // Actualizar en localStorage\n        const portfolioData = JSON.parse(localStorage.getItem('portfolioData') || '{}');\n        const projectMinutas = portfolioData.minutasByProject?.[currentProjectId] || [];\n        \n        const updatedMinutas = projectMinutas.map(task => \n          task.id === taskId ? { ...task, hitoId: newHitoId } : task\n        );\n        \n        portfolioData.minutasByProject = {\n          ...portfolioData.minutasByProject,\n          [currentProjectId]: updatedMinutas\n        };\n        \n        localStorage.setItem('portfolioData', JSON.stringify(portfolioData));\n      }\n      \n      // Actualizar estado local\n      setMinutaTasks(prev => prev.map(task => \n        task.id === taskId ? { ...task, hitoId: newHitoId } : task\n      ));\n      \n      return true;\n    } catch (error) {\n      logger.error('Error actualizando tarea de minuta:', error);\n      return false;\n    }\n  };\n\n  // FunciÃ³n unificada para obtener todas las tareas prÃ³ximas a vencer\n  const getUnifiedTasksNearDeadline = (allTasks, minutaTasks) => {\n    const cronogramaTasks = getTasksNearDeadline(allTasks);\n    const minutaTasksNearDeadline = getMinutaTasksNearDeadline(allTasks, minutaTasks);\n    \n    // Agregar identificador de origen a las tareas del cronograma\n    const cronogramaWithSource = cronogramaTasks.map(group => ({\n      ...group,\n      source: 'cronograma',\n      tasks: group.tasks.map(task => ({ ...task, source: 'cronograma' }))\n    }));\n    \n    const minutaWithSource = minutaTasksNearDeadline.map(group => ({\n      ...group,\n      source: 'minuta',\n      tasks: group.tasks.map(task => ({ ...task, source: 'minuta' }))\n    }));\n    \n    // Combinar y agrupar por hito\n    const combinedGroups = [...cronogramaWithSource, ...minutaWithSource];\n    \n    // Agrupar por hito (combinar grupos del mismo hito)\n    const unifiedGroups = {};\n    \n    combinedGroups.forEach(group => {\n      const milestoneId = group.milestone.id;\n      \n      if (!unifiedGroups[milestoneId]) {\n        unifiedGroups[milestoneId] = {\n          milestone: group.milestone,\n          tasks: []\n        };\n      }\n      \n      unifiedGroups[milestoneId].tasks.push(...group.tasks);\n    });\n    \n    // CORRECCIÃ“N: Ordenar hitos por fecha de inicio para mantener consistencia con el cronograma\n    const sortedGroups = Object.values(unifiedGroups).sort((a, b) => {\n      const dateA = new Date(a.milestone.startDate);\n      const dateB = new Date(b.milestone.startDate);\n      return dateA - dateB; // Orden ascendente (mÃ¡s antiguo primero)\n    });\n    \n    logger.debug('ðŸŽ¯ HITOS ORDENADOS POR FECHA:', {\n      totalGroups: sortedGroups.length,\n      order: sortedGroups.map(group => ({\n        milestoneName: group.milestone.name,\n        milestoneDate: group.milestone.startDate,\n        tasksCount: group.tasks.length\n      }))\n    });\n    \n    return sortedGroups;\n  };\n\n  // Obtener proyecto actual\n  const currentProject = projects?.find(p => p.id === currentProjectId) || projects[0];\n\n  // IMPLEMENTACIÃ“N COMPLETA DEL FILTRADO POR PROYECTO\n  // Usar las funciones helper del backup para obtener datos del proyecto actual\n\n  // 1. Work Packages: Usar la funciÃ³n setWorkPackages que ya filtra por proyecto\n  const projectWorkPackages = Array.isArray(workPackages) ? workPackages : [];\n\n  // 2. Tasks: Usar la funciÃ³n setTasks que ya filtra por proyecto\n  // CORRECCIÃ“N: Usar useMemo para asegurar actualizaciÃ³n en tiempo real\n  const projectTasks = useMemo(() => {\n    logger.debug('ðŸ”„ ProjectManagementTabs - Recalculando projectTasks:', tasks?.length || 0);\n    return Array.isArray(tasks) ? tasks : [];\n  }, [tasks]);\n\n  // 3. Purchase Orders: Usar la funciÃ³n setPurchaseOrders que ya filtra por proyecto\n  const projectPurchaseOrders = Array.isArray(purchaseOrders) ? purchaseOrders : [];\n\n  // 4. Advances: Usar la funciÃ³n setAdvances que ya filtra por proyecto\n  const projectAdvances = Array.isArray(advances) ? advances : [];\n\n  // 5. Invoices: Usar la funciÃ³n setInvoices que ya filtra por proyecto\n  const projectInvoices = Array.isArray(invoices) ? invoices : [];\n\n  // 6. Contracts: Usar la funciÃ³n setContracts que ya filtra por proyecto\n  const projectContracts = Array.isArray(contracts) ? contracts : [];\n\n  // 7. Risks: Usar la funciÃ³n setRisks que ya filtra por proyecto\n  const projectRisks = Array.isArray(risks) ? risks : [];\n\n  // 8. Resource Assignments: Usar la funciÃ³n setResourceAssignments que ya filtra por proyecto\n  const projectResourceAssignments = Array.isArray(resourceAssignments) ? resourceAssignments : [];\n\n  // Solo mostrar proyectos activos ordenados alfabÃ©ticamente (con soporte numÃ©rico)\n  const activeProjects = useMemo(() => {\n    if (!projects) return [];\n    return projects\n      .filter(p => p.status === 'active')\n      .sort((a, b) => a.name.localeCompare(b.name, undefined, { \n        numeric: true,\n        sensitivity: 'base'\n      }));\n  }, [projects]);\n\n  // IMPORTANTE: Los datos deben filtrarse por proyecto seleccionado\n  // Actualmente se estÃ¡n usando todos los datos sin filtrar, lo que puede mostrar informaciÃ³n incorrecta\n  \n  // Calcular mÃ©tricas EVM del proyecto actual\n  const calculateEVMMetrics = () => {\n    if (!currentProject) return {};\n\n    // Calcular progreso basado en tareas del cronograma\n    const projectTasks = Array.isArray(tasks) ? tasks : [];\n    \n    if (projectTasks.length === 0) {\n      return { percentComplete: 0 };\n    }\n\n    // Calcular progreso promedio de las tareas (excluyendo hitos para consistencia)\n    const regularTasks = projectTasks.filter(task => !task.isMilestone);\n    \n    if (regularTasks.length === 0) {\n      return { percentComplete: 0 };\n    }\n    \n    const totalProgress = regularTasks.reduce((sum, task) => sum + (task.progress || 0), 0);\n    const percentComplete = Math.round(totalProgress / regularTasks.length);\n\n    // Si hay work packages, usar mÃ©tricas EVM tradicionales\n    if (Array.isArray(projectWorkPackages) && projectWorkPackages.length > 0) {\n      const BAC = projectWorkPackages.reduce((sum, wp) => sum + (wp.budget || 0), 0);\n      const PV = projectWorkPackages.reduce((sum, wp) => sum + (wp.plannedValue || 0), 0);\n      const EV = projectWorkPackages.reduce((sum, wp) => sum + (wp.earnedValue || 0), 0);\n      const AC = projectWorkPackages.reduce((sum, wp) => sum + (wp.actualCost || 0), 0);\n\n      const CV = EV - AC;\n      const SV = EV - PV;\n      const CPI = AC > 0 ? EV / AC : 0;\n      const SPI = PV > 0 ? EV / PV : 0;\n      const percentSpent = BAC > 0 ? (AC / BAC) * 100 : 0;\n\n      return { BAC, PV, EV, AC, CV, SV, CPI, SPI, percentComplete, percentSpent };\n    }\n\n    // Si no hay work packages, solo retornar el progreso basado en tareas\n    return { percentComplete };\n  };\n\n  const evmMetrics = calculateEVMMetrics();\n\n  // Calcular fecha de inicio real del cronograma basada en las tareas\n  const calculateProjectStartDate = () => {\n    if (!tasks || tasks.length === 0) return null;\n    \n    // DEBUG: Logging para identificar fechas invÃ¡lidas\n    const invalidTasks = tasks.filter(task => \n      !task.startDate || task.startDate === null || task.startDate === undefined\n    );\n    \n    if (invalidTasks.length > 0) {\n      logger.debug('âš ï¸ Tareas con fechas de inicio invÃ¡lidas:', invalidTasks.map(t => ({\n        id: t.id,\n        name: t.name,\n        startDate: t.startDate,\n        isMilestone: t.isMilestone\n      })));\n    }\n    \n    // Filtrar tareas con fechas vÃ¡lidas\n    const validStartDates = tasks\n      .filter(task => task.startDate && task.startDate !== null && task.startDate !== undefined)\n      .map(task => new Date(task.startDate))\n      .filter(date => !isNaN(date.getTime())); // Filtrar fechas invÃ¡lidas\n    \n    if (validStartDates.length === 0) {\n      logger.debug('âš ï¸ No se encontraron fechas de inicio vÃ¡lidas');\n      return null;\n    }\n    \n    const minStartDate = new Date(Math.min(...validStartDates));\n    \n    // Verificar que la fecha mÃ­nima sea vÃ¡lida\n    if (isNaN(minStartDate.getTime())) {\n      logger.debug('âš ï¸ Fecha mÃ­nima calculada es invÃ¡lida');\n      return null;\n    }\n    \n    logger.debug('âœ… Fecha de inicio calculada:', minStartDate.toISOString().split('T')[0]);\n    return minStartDate.toISOString().split('T')[0];\n  };\n\n  // Calcular fecha de fin real del cronograma basada en las tareas\n  const calculateProjectEndDate = () => {\n    if (!tasks || tasks.length === 0) return null;\n    \n    // DEBUG: Logging para identificar fechas invÃ¡lidas\n    const invalidTasks = tasks.filter(task => \n      !task.endDate || task.endDate === null || task.endDate === undefined\n    );\n    \n    if (invalidTasks.length > 0) {\n      logger.debug('âš ï¸ Tareas con fechas de fin invÃ¡lidas:', invalidTasks.map(t => ({\n        id: t.id,\n        name: t.name,\n        endDate: t.endDate,\n        isMilestone: t.isMilestone\n      })));\n    }\n    \n    // Filtrar tareas con fechas vÃ¡lidas\n    const validEndDates = tasks\n      .filter(task => task.endDate && task.endDate !== null && task.endDate !== undefined)\n      .map(task => new Date(task.endDate))\n      .filter(date => !isNaN(date.getTime())); // Filtrar fechas invÃ¡lidas\n    \n    if (validEndDates.length === 0) {\n      logger.debug('âš ï¸ No se encontraron fechas de fin vÃ¡lidas');\n      return null;\n    }\n    \n    const maxEndDate = new Date(Math.max(...validEndDates));\n    \n    // Verificar que la fecha mÃ¡xima sea vÃ¡lida\n    if (isNaN(maxEndDate.getTime())) {\n      logger.debug('âš ï¸ Fecha mÃ¡xima calculada es invÃ¡lida');\n      return null;\n    }\n    \n    logger.debug('âœ… Fecha de fin calculada:', maxEndDate.toISOString().split('T')[0]);\n    return maxEndDate.toISOString().split('T')[0];\n  };\n\n  const projectStartDate = calculateProjectStartDate();\n  const projectEndDate = calculateProjectEndDate();\n\n  const getPerformanceColor = (value) => {\n    if (value >= 0) return 'text-green-600';\n    return 'text-red-600';\n  };\n\n  if (!currentProject) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-4xl mb-4\">ðŸ“Š</div>\n        <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">Selecciona un Proyecto</h2>\n        <p className=\"text-gray-600\">Elige un proyecto activo para ver su gestiÃ³n detallada</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header del Proyecto */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-purple-100 rounded-2xl shadow-lg p-6 text-gray-800 relative overflow-hidden\">\n        {/* Elementos decorativos de fondo */}\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-blue-100/30 rounded-full -translate-y-16 translate-x-16\"></div>\n        <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-purple-100/30 rounded-full translate-y-12 -translate-x-12\"></div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <div className=\"bg-white/60 backdrop-blur rounded-2xl p-3 mr-4 shadow-sm\">\n                <span className=\"text-3xl\">ðŸ“Š</span>\n              </div>\n              <div>\n                <h1 className=\"text-4xl font-bold mb-2 text-gray-800\">{currentProject.name}</h1>\n                <p className=\"text-gray-600 text-lg\">\n                  {currentProject.description || 'GestiÃ³n integral del proyecto - PMBOK v7'}\n                </p>\n                <div className=\"flex items-center space-x-4 mt-2 text-sm text-gray-700\">\n                  <span className=\"flex items-center space-x-1\">\n                    <span className=\"text-gray-500\">ðŸ‘¤</span>\n                    <span>{currentProject.manager}</span>\n                  </span>\n                  <span className=\"flex items-center space-x-1\">\n                    <span className=\"text-yellow-600\">ðŸ’°</span>\n                    <span>${(currentProject.budget / 1000).toFixed(0)}K</span>\n                  </span>\n                  <span className=\"flex items-center space-x-1\">\n                    <span className=\"text-green-500\">ðŸ’¼</span>\n                    <span className=\"px-2 py-1 rounded bg-gray-100 text-gray-800 ml-2\">\n                      {evmMetrics.percentComplete?.toFixed(1) || 0}% completado\n                    </span>\n                  </span>\n                </div>\n                {/* Caso de negocio del proyecto */}\n                <div className=\"mt-3\">\n                  <div className=\"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200\">\n                    <div className=\"flex items-start space-x-2\">\n                      <span className=\"text-green-600 text-lg\">ðŸ’¼</span>\n                      <div>\n                        <h4 className=\"font-semibold text-green-800 mb-2\">Caso de Negocio</h4>\n                        <p className=\"text-gray-700 text-sm leading-relaxed\">\n                          {currentProject.businessCase || 'Sin caso de negocio definido'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-sm text-gray-600 mb-1\">Fecha de Reporte</div>\n              <input\n                type=\"date\"\n                value={reportingDate}\n                onChange={(e) => setReportingDate(e.target.value)}\n                className=\"px-3 py-1 rounded bg-white text-gray-800 text-sm border border-gray-300 shadow-sm\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Selector de Proyectos Activos */}\n      <div className=\"bg-white rounded-lg shadow-sm p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <label className=\"block text-sm font-medium text-gray-700\">\n            Proyecto Activo\n          </label>\n          <div\n            className={`px-4 py-2 rounded-lg text-sm font-medium ${\n              useSupabase \n                ? 'bg-green-100 text-green-800 border border-green-300' \n                : 'bg-red-100 text-red-800 border border-red-300'\n            }`}\n          >\n            {useSupabase ? 'ðŸŸ¢ Estado: Online' : 'ðŸ”´ Estado: Offline'}\n          </div>\n        </div>\n        <select\n          value={currentProjectId}\n          onChange={(e) => setCurrentProjectId(e.target.value)}\n          className=\"w-full p-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n        >\n          <option value=\"\" disabled>Seleccionar proyecto activo</option>\n          {activeProjects.map(project => (\n            <option key={project.id} value={project.id}>\n              {project.name} - {project.manager}\n            </option>\n          ))}\n        </select>\n        \n        {/* Mensaje informativo sobre filtrado implementado */}\n        {currentProjectId && (\n          <div className=\"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg\">\n            <div className=\"flex items-center text-green-800 text-sm\">\n              <span className=\"mr-2\">âœ…</span>\n              <span>\n                <strong>Filtrado por proyecto implementado:</strong> Todas las pestaÃ±as muestran Ãºnicamente la informaciÃ³n de \n                <strong> {currentProject?.name}</strong>. Los datos de otros proyectos NO se incluyen en las mÃ©tricas ni en los mÃ³dulos.\n              </span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* PestaÃ±as de NavegaciÃ³n */}\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"flex flex-wrap gap-1 px-4 overflow-x-auto scrollbar-hide tab-container\">\n            {projectTabs.map(tab => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`\n                  py-3 px-2 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap min-w-fit\n                  ${activeTab === tab.id\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }\n                `}\n              >\n                <span className=\"mr-1 sm:mr-2\">{tab.icon}</span>\n                <span className=\"hidden sm:inline\">{tab.name}</span>\n                <span className=\"sm:hidden\">{tab.name.split(' ')[0]}</span>\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        {/* Contenido de las PestaÃ±as */}\n        <div>\n          {activeTab === 'summary' && (\n            <div className=\"space-y-8\">\n              {/* Header del Dashboard */}\n              <div className=\"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-xl shadow-lg p-6 text-white\">\n                <h1 className=\"text-3xl font-bold mb-2\">ðŸ“Š Dashboard Resumen</h1>\n                <p className=\"text-indigo-100 text-lg\">\n                  {currentProject?.name || 'Proyecto no seleccionado'} - Vista ejecutiva del estado del proyecto\n                </p>\n              </div>\n\n              {/* 1. InformaciÃ³n del Proyecto */}\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500\">\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n                  <span className=\"text-3xl mr-3\">ðŸ“ˆ</span>\n                  InformaciÃ³n del Proyecto\n                </h2>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-2xl\">ðŸ’°</span>\n                      <span className=\"text-sm font-medium text-blue-600\">Presupuesto</span>\n                    </div>\n                    <div className=\"text-3xl font-bold text-blue-800\">\n                      ${((currentProject?.budget || 0) / 1000).toFixed(0)}K\n                    </div>\n                    <div className=\"text-sm text-blue-600 mt-1\">\n                      Presupuesto asignado\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border border-green-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-2xl\">ðŸ“…</span>\n                      <span className=\"text-sm font-medium text-green-600\">Inicio</span>\n                    </div>\n                    <div className=\"text-xl font-bold text-green-800\">\n                      {projectStartDate ? new Date(projectStartDate).toLocaleDateString('es-ES') : 'N/A'}\n                    </div>\n                    <div className=\"text-sm text-green-600 mt-1\">\n                      Fecha de inicio del cronograma\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-2xl\">ðŸ</span>\n                      <span className=\"text-sm font-medium text-purple-600\">Fin</span>\n                    </div>\n                    <div className=\"text-xl font-bold text-purple-800\">\n                      {projectEndDate ? new Date(projectEndDate).toLocaleDateString('es-ES') : 'N/A'}\n                    </div>\n                    <div className=\"text-sm text-purple-600 mt-1\">\n                      Fecha de fin del cronograma\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* 2. GestiÃ³n Financiera */}\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500\">\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n                  <span className=\"text-3xl mr-3\">ðŸ’³</span>\n                  GestiÃ³n Financiera\n                </h2>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-lg border border-emerald-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-2xl\">ðŸ“‹</span>\n                      <span className=\"text-sm font-medium text-emerald-600\">Ã“rdenes de Compra</span>\n                    </div>\n                    <div className=\"text-3xl font-bold text-emerald-800\">\n                      ${((projectPurchaseOrders?.reduce((sum, po) => sum + (po.totalAmount || 0), 0) || 0) / 1000).toFixed(0)}K\n                    </div>\n                    <div className=\"text-sm text-emerald-600 mt-1\">\n                      Monto en OC aprobadas\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-lg border border-amber-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-2xl\">ðŸ’¸</span>\n                      <span className=\"text-sm font-medium text-amber-600\">Anticipos</span>\n                    </div>\n                    <div className=\"text-3xl font-bold text-amber-800\">\n                      ${((projectAdvances?.reduce((sum, adv) => sum + (adv.amount || 0), 0) || 0) / 1000).toFixed(0)}K\n                    </div>\n                    <div className=\"text-sm text-amber-600 mt-1\">\n                      Anticipos solicitados\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gradient-to-br from-cyan-50 to-cyan-100 p-6 rounded-lg border border-cyan-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-2xl\">ðŸ§¾</span>\n                      <span className=\"text-sm font-medium text-cyan-600\">Facturas</span>\n                    </div>\n                    <div className=\"text-3xl font-bold text-cyan-800\">\n                      ${((projectInvoices?.reduce((sum, inv) => sum + (inv.amount || 0), 0) || 0) / 1000).toFixed(0)}K\n                    </div>\n                    <div className=\"text-sm text-cyan-600 mt-1\">\n                      Facturas ingresadas\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* 3. Reservas y Riesgos */}\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500\">\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n                  <span className=\"text-3xl mr-3\">ðŸ›¡ï¸</span>\n                  Reservas y Riesgos\n                </h2>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-lg border border-orange-200\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <span className=\"text-2xl\">âš ï¸</span>\n                        <span className=\"text-sm font-medium text-orange-600\">Reserva de Contingencia</span>\n                      </div>\n                      <div className=\"text-3xl font-bold text-orange-800\">\n                        ${((currentProject?.budget || 0) * 0.05 / 1000).toFixed(0)}K\n                      </div>\n                      <div className=\"text-sm text-orange-600 mt-1\">\n                        5% del presupuesto total\n                      </div>\n                    </div>\n\n                    <div className=\"bg-gradient-to-br from-pink-50 to-pink-100 p-6 rounded-lg border border-pink-200\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <span className=\"text-2xl\">ðŸŽ¯</span>\n                        <span className=\"text-sm font-medium text-pink-600\">Reserva de GestiÃ³n</span>\n                      </div>\n                      <div className=\"text-3xl font-bold text-pink-800\">\n                        ${((currentProject?.budget || 0) * 0.1 / 1000).toFixed(0)}K\n                      </div>\n                      <div className=\"text-sm text-pink-600 mt-1\">\n                        10% del presupuesto total\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-lg border border-red-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-2xl\">ðŸš¨</span>\n                      <span className=\"text-sm font-medium text-red-600\">Principales Riesgos</span>\n                    </div>\n                    <div className=\"space-y-3\">\n                      {projectRisks?.slice(0, 3).map((risk, index) => {\n                        // Calcular el Expected Monetary Value (EMV) = Probabilidad Ã— Impacto en Costos\n                        const emv = (risk.probability || 0) * (risk.costImpact || 0);\n                        return (\n                          <div key={risk.id} className=\"p-3 bg-white rounded-lg border\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <div className=\"flex items-center space-x-3\">\n                                <span className={`w-3 h-3 rounded-full ${\n                                  risk.priority === 'high' ? 'bg-red-500' : \n                                  risk.priority === 'medium' ? 'bg-yellow-500' : 'bg-green-500'\n                                }`}></span>\n                                <span className=\"text-sm font-medium text-gray-800 truncate\">\n                                  {risk.name}\n                                </span>\n                              </div>\n                              <span className={`text-xs px-2 py-1 rounded-full ${\n                                risk.priority === 'high' ? 'bg-red-100 text-red-800' : \n                                risk.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\n                              }`}>\n                                {risk.priority}\n                              </span>\n                            </div>\n                            <div className=\"flex items-center justify-between text-xs text-gray-600\">\n                              <span>Costo probable:</span>\n                              <span className=\"font-semibold text-red-600\">\n                                ${(emv / 1000).toFixed(1)}K\n                              </span>\n                            </div>\n                            <div className=\"flex items-center justify-between text-xs text-gray-500 mt-1\">\n                              <span>Prob: {((risk.probability || 0) * 100).toFixed(0)}%</span>\n                              <span>Impacto: ${((risk.costImpact || 0) / 1000).toFixed(0)}K</span>\n                            </div>\n                          </div>\n                        );\n                      })}\n                      {(!projectRisks || projectRisks.length === 0) && (\n                        <div className=\"text-center text-gray-500 py-4\">\n                          No hay riesgos registrados\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* 4. Hitos del Proyecto */}\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500\">\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <span className=\"text-3xl mr-3\">ðŸŽ¯</span>\n                    Hitos del Proyecto\n                  </div>\n                  <span className=\"text-sm bg-purple-100 text-purple-800 px-3 py-1 rounded-full\">\n                    {projectTasks?.filter(task => task.isMilestone).length || 0} hitos\n                  </span>\n                </h2>\n                <div className=\"space-y-4 max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100\">\n                  {(() => {\n                    const milestones = projectTasks?.filter(task => task.isMilestone) || [];\n                    logger.debug('ðŸŽ¯ Dashboard - Hitos actualizados:', milestones.map(m => ({ \n                      id: m.id, \n                      name: m.name, \n                      startDate: m.startDate, \n                      endDate: m.endDate \n                    })));\n                    return milestones;\n                  })()\n                    .sort((a, b) => {\n                      // CORRECCIÃ“N: Ordenar por fecha de inicio para seguir secuencia del cronograma\n                      const aDate = new Date(a.startDate || a.endDate || '1900-01-01');\n                      const bDate = new Date(b.startDate || b.endDate || '1900-01-01');\n                      return aDate - bDate;\n                    })\n                    .map((milestone, index) => (\n                    <div key={milestone.id} className=\"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg border border-gray-200\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-4\">\n                          <div className={`w-4 h-4 rounded-full ${\n                            milestone.status === 'completed' ? 'bg-green-500' : \n                            milestone.status === 'in-progress' ? 'bg-yellow-500' : \n                            milestone.status === 'delayed' ? 'bg-red-500' : 'bg-gray-400'\n                          }`}></div>\n                          <div>\n                            <h3 className=\"font-semibold text-gray-800\">\n                              {milestone.name}\n                              <span className=\"ml-2 text-sm font-medium text-blue-600\">\n                                [{calculateMilestoneProgress(milestone, projectTasks)}%]\n                              </span>\n                            </h3>\n                            <p className=\"text-sm text-gray-600\">\n                              {milestone.endDate ? new Date(milestone.endDate).toLocaleDateString('es-ES') : 'Sin fecha'}\n                            </p>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          {permissions.canEdit ? (\n                            <select\n                              value={milestone.status || 'in-progress'}\n                              onChange={(e) => {\n                                const newStatus = e.target.value;\n                                logger.debug('ðŸŽ¯ CAMBIO DE ESTADO DE HITO:', {\n                                  milestoneId: milestone.id,\n                                  milestoneName: milestone.name,\n                                  oldStatus: milestone.status,\n                                  newStatus: newStatus,\n                                  currentProjectId: currentProjectId\n                                });\n                                \n                                const updatedTasks = projectTasks.map(task => \n                                  task.id === milestone.id \n                                    ? { ...task, status: newStatus }\n                                    : task\n                                );\n                                \n                                logger.debug('ðŸŽ¯ TAREAS ACTUALIZADAS:', {\n                                  totalTasks: updatedTasks.length,\n                                  milestoneTasks: updatedTasks.filter(t => t.isMilestone).length,\n                                  updatedMilestone: updatedTasks.find(t => t.id === milestone.id)\n                                });\n                                \n                                setTasks(updatedTasks);\n                              }}\n                              className={`px-3 py-1 rounded-full text-xs font-medium border-0 focus:ring-2 focus:ring-blue-500 ${\n                                milestone.status === 'completed' ? 'bg-green-100 text-green-800' : \n                                milestone.status === 'in-progress' ? 'bg-yellow-100 text-yellow-800' : \n                                milestone.status === 'delayed' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'\n                              }`}\n                            >\n                              <option value=\"in-progress\" className=\"bg-yellow-100 text-yellow-800\">En Proceso</option>\n                              <option value=\"completed\" className=\"bg-green-100 text-green-800\">Realizado</option>\n                              <option value=\"delayed\" className=\"bg-red-100 text-red-800\">Atrasado</option>\n                            </select>\n                          ) : (\n                            <div className={`px-3 py-1 rounded-full text-xs font-medium ${\n                              milestone.status === 'completed' ? 'bg-green-100 text-green-800' : \n                              milestone.status === 'in-progress' ? 'bg-yellow-100 text-yellow-800' : \n                              milestone.status === 'delayed' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'\n                            }`}>\n                              {milestone.status === 'completed' ? 'Realizado' : \n                               milestone.status === 'in-progress' ? 'En Proceso' : \n                               milestone.status === 'delayed' ? 'Atrasado' : 'Pendiente'}\n                              <span className=\"ml-1 text-gray-500\">ðŸ‘€</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                  {(!projectTasks || projectTasks.filter(task => task.isMilestone).length === 0) && (\n                    <div className=\"text-center text-gray-500 py-8\">\n                      <span className=\"text-4xl mb-4 block\">ðŸŽ¯</span>\n                      <p>No hay hitos definidos para este proyecto</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* 5. Alerta Tareas por Vencer */}\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500\">\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <span className=\"text-3xl mr-3\">âš ï¸</span>\n                    Alerta Tareas por Vencer\n                    <span className=\"text-sm text-gray-500 ml-2\">(Vencidas + PrÃ³ximas a vencer - Cronograma + Minutas)</span>\n                  </div>\n                  <span className=\"text-sm bg-orange-100 text-orange-800 px-3 py-1 rounded-full\">\n                    {(() => {\n                      const orphanedTasks = getOrphanedMinutaTasks(minutaTasks, projectTasks);\n                      const unifiedTasks = getUnifiedTasksNearDeadline(projectTasks, minutaTasks);\n                      const totalTasks = unifiedTasks.reduce((total, group) => total + group.tasks.length, 0) + orphanedTasks.length;\n                      return `${totalTasks} tareas`;\n                    })()}\n                  </span>\n                </h2>\n                \n                {(() => {\n                  const orphanedTasks = getOrphanedMinutaTasks(minutaTasks, projectTasks);\n                  const unifiedTasks = getUnifiedTasksNearDeadline(projectTasks, minutaTasks);\n                  \n                  return unifiedTasks.length > 0 || orphanedTasks.length > 0 ? (\n                    <div className=\"space-y-6\">\n                      {/* Mostrar tareas huÃ©rfanas primero si las hay */}\n                      {orphanedTasks.length > 0 && (\n                        <OrphanedTasksManager \n                          orphanedTasks={orphanedTasks}\n                          availableMilestones={projectTasks.filter(t => t.isMilestone)}\n                          onReassign={(taskId, newHitoId) => {\n                            // Actualizar estado local\n                            setMinutaTasks(prev => prev.map(task => \n                              task.id === taskId ? { ...task, hitoId: newHitoId } : task\n                            ));\n                          }}\n                          updateMinutaTaskHito={updateMinutaTaskHito}\n                        />\n                      )}\n                      \n                      {/* Mostrar grupos normales */}\n                      {unifiedTasks.map((group, groupIndex) => (\n                      <div key={group.milestone.id} className=\"bg-gradient-to-r from-orange-50 to-red-50 p-4 rounded-lg border border-orange-200\">\n                        <div className=\"flex items-center mb-3\">\n                          <div className=\"w-3 h-3 rounded-full bg-orange-500 mr-3\"></div>\n                          <h3 className=\"font-semibold text-gray-800 text-lg\">\n                            {group.milestone.name}\n                          </h3>\n                          <span className=\"ml-2 text-sm text-orange-600\">\n                            ({group.tasks.length} tareas)\n                          </span>\n                        </div>\n                        \n                        <div className=\"space-y-2\">\n                          {group.tasks.map((task, taskIndex) => {\n                            const daysUntilDeadline = Math.ceil((new Date(task.endDate) - new Date()) / (1000 * 60 * 60 * 24));\n                            const isOverdue = daysUntilDeadline < 0;\n                            \n                            // Colores mejorados para distinguir tareas vencidas vs prÃ³ximas a vencer\n                            const urgencyColor = isOverdue ? 'text-red-700 bg-red-200 border-red-300' : // Tareas vencidas\n                                               daysUntilDeadline === 0 ? 'text-red-600 bg-red-100 border-red-200' : // Vence hoy\n                                               daysUntilDeadline <= 3 ? 'text-orange-600 bg-orange-100 border-orange-200' : // 1-3 dÃ­as\n                                               daysUntilDeadline <= 7 ? 'text-yellow-600 bg-yellow-100 border-yellow-200' : // 4-7 dÃ­as\n                                               'text-blue-600 bg-blue-100 border-blue-200'; // 8-15 dÃ­as\n                            \n                            return (\n                              <div key={task.id} className=\"bg-white p-3 rounded-lg border border-gray-200 shadow-sm\">\n                                <div className=\"flex items-center justify-between\">\n                                  <div className=\"flex-1\">\n                                    <div className=\"flex items-center space-x-2 mb-1\">\n                                      <h4 className=\"font-medium text-gray-800\">{task.name}</h4>\n                                      {/* Badge diferenciador de origen */}\n                                      {task.source === 'cronograma' ? (\n                                        <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full flex items-center\">\n                                          <span className=\"mr-1\">ðŸ“‹</span>\n                                          Cronograma\n                                        </span>\n                                      ) : (\n                                        <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full flex items-center\">\n                                          <span className=\"mr-1\">ðŸ“</span>\n                                          Minuta\n                                        </span>\n                                      )}\n                                    </div>\n                                    <div className=\"flex items-center space-x-4 mt-1 text-sm text-gray-600\">\n                                      <span>ðŸ“… {new Date(task.endDate).toLocaleDateString('es-ES')}</span>\n                                      <span>ðŸ‘¤ {task.assignedTo || task.responsable || 'Sin asignar'}</span>\n                                      <span>ðŸ“Š {task.progress || 0}% completado</span>\n                                      {task.estatus && (\n                                        <span className={`px-2 py-1 rounded-full text-xs ${\n                                          task.estatus === 'Completado' ? 'bg-green-100 text-green-800' :\n                                          task.estatus === 'En Proceso' ? 'bg-yellow-100 text-yellow-800' :\n                                          'bg-gray-100 text-gray-800'\n                                        }`}>\n                                          {task.estatus}\n                                        </span>\n                                      )}\n                                    </div>\n                                  </div>\n                                  <div className=\"flex items-center space-x-2\">\n                                    <span className={`px-2 py-1 rounded-full text-xs font-medium border ${urgencyColor}`}>\n                                      {isOverdue ? `Vencida hace ${Math.abs(daysUntilDeadline)} dÃ­as` :\n                                       daysUntilDeadline === 0 ? 'Vence hoy' : \n                                       daysUntilDeadline === 1 ? 'Vence maÃ±ana' : \n                                       `Vence en ${daysUntilDeadline} dÃ­as`}\n                                    </span>\n                                    <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                                      <div \n                                        className=\"bg-blue-500 h-2 rounded-full\" \n                                        style={{ width: `${task.progress || 0}%` }}\n                                      ></div>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center text-gray-500 py-8\">\n                      <span className=\"text-4xl mb-4 block\">âœ…</span>\n                      <p>Â¡Excelente! No hay tareas prÃ³ximas a vencer</p>\n                      <p className=\"text-sm mt-2\">Todas las tareas del cronograma y minutas estÃ¡n al dÃ­a o completadas</p>\n                    </div>\n                  );\n                })()}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'risks' && (\n            <RiskManagement\n              projects={projects}\n              currentProjectId={currentProjectId}\n              setCurrentProjectId={setCurrentProjectId}\n              risks={projectRisks}\n              setRisks={setRisks}\n              useSupabase={useSupabase}\n            />\n          )}\n\n          {activeTab === 'schedule' && (\n            <ScheduleManagement\n              tasks={projectTasks}\n              setTasks={setTasks}\n              importTasks={importTasks}\n              projectData={currentProject}\n              onScheduleDataChange={setScheduleData} // Nuevo prop para pasar datos del cronograma\n              includeWeekends={includeWeekends}\n              setIncludeWeekends={setIncludeWeekends}\n              useSupabase={useSupabase}\n              updateProjectMinutas={updateProjectMinutas}\n            />\n          )}\n\n          {activeTab === 'financial' && (\n            <FinancialManagement\n              workPackages={projectWorkPackages}\n              setWorkPackages={setWorkPackages}\n              currentProject={currentProject}\n              risks={projectRisks}\n              scheduleData={scheduleData} // Pasar datos del cronograma\n              includeWeekends={includeWeekends}\n              purchaseOrders={purchaseOrders}\n              setPurchaseOrders={setPurchaseOrders}\n              advances={advances}\n              setAdvances={setAdvances}\n              invoices={invoices}\n              setInvoices={setInvoices}\n              contracts={contracts}\n              setContracts={setContracts}\n              useSupabase={useSupabase}\n            />\n          )}\n\n\n          {activeTab === 'resources' && (\n            <ResourceManagement\n              projects={projects}\n              workPackages={projectWorkPackages}\n              currentProject={currentProject}\n              includeWeekends={includeWeekends}\n            />\n          )}\n\n          {activeTab === 'changes' && (\n            <ChangeManagement\n              currentProjectId={currentProjectId}\n              projects={projects}\n              workPackages={projectWorkPackages}\n              tasks={projectTasks}\n              purchaseOrders={projectPurchaseOrders}\n              advances={projectAdvances}\n              invoices={projectInvoices}\n              contracts={projectContracts}\n              onUpdateProject={() => {\n                // FunciÃ³n para actualizar el proyecto cuando se apruebe un cambio\n                logger.debug('Proyecto actualizado por cambio aprobado');\n              }}\n            />\n          )}\n\n          {activeTab === 'cashflow' && (\n            <CashFlowProjection\n              currentProjectId={currentProject?.id}\n              currentProject={currentProject}\n              projects={projects}\n              workPackages={projectWorkPackages}\n              tasks={tasks}\n              purchaseOrders={projectPurchaseOrders}\n              advances={projectAdvances}\n              invoices={projectInvoices}\n              contracts={projectContracts}\n            />\n          )}\n\n          {activeTab === 'files' && (\n            <FileManager\n              projectId={currentProjectId}\n              category=\"general\"\n              onFileUploaded={() => {\n                // Archivo subido exitosamente desde pestaÃ±a de archivos\n              }}\n            />\n          )}\n\n\n          {activeTab === 'audit' && (\n            <ProjectAudit\n              projects={projects}\n              currentProjectId={currentProjectId}\n              workPackages={workPackages}\n              risks={risks}\n              tasks={tasks}\n              purchaseOrders={purchaseOrders}\n              advances={advances}\n              invoices={invoices}\n              contracts={contracts}\n              resourceAssignments={resourceAssignments}\n              useSupabase={useSupabase}\n            />\n          )}\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProjectManagementTabs;\n"],"names":["_ref","projects","currentProjectId","workPackages","risks","tasks","purchaseOrders","advances","invoices","contracts","resourceAssignments","useSupabase","activeTab","setActiveTab","useState","dateFilter","setDateFilter","categoryFilter","setCategoryFilter","searchTerm","setSearchTerm","currentProject","find","p","id","auditLog","exportAuditLog","clearAuditLog","useAuditLog","auditEvents","useMemo","events","projectStartDate","Date","updatedAt","createdAt","push","status","e","action","concat","now","timestamp","category","description","name","details","previousStatus","newStatus","manager","budget","startDate","endDate","severity","user","forEach","wp","index","workPackageId","progress","risk","riskId","probability","impact","priority","task","taskId","duration","po","poId","amount","supplier","advance","advanceId","recipient","invoice","invoiceId","contract","contractId","value","contractor","assignment","assignmentId","resourceId","role","allocation","sort","a","b","filteredEvents","filtered","filter","event","filterDate","setHours","setDate","getDate","setMonth","getMonth","_event$details","_event$details$name","toLowerCase","includes","getCategoryIcon","getSeverityColor","getActionDescription","_jsxs","className","children","_jsx","length","onChange","target","type","placeholder","onClick","exportAuditReport","window","confirm","title","toLocaleDateString","map","toUpperCase","toLocaleString","Object","entries","_ref2","key","String","OrphanedTasksManager","orphanedTasks","availableMilestones","onReassign","updateMinutaTaskHito","reassigning","setReassigning","daysUntilDeadline","Math","ceil","fecha","urgencyColor","tarea","responsable","estatus","hitoId","async","newHitoId","prev","_objectSpread","alert","error","logger","handleReassign","disabled","milestone","_evmMetrics$percentCo","setCurrentProjectId","setWorkPackages","setRisks","reportingDate","setReportingDate","setTasks","importTasks","includeWeekends","setIncludeWeekends","setPurchaseOrders","setAdvances","setInvoices","setContracts","updateProjectMinutas","permissions","isReadOnly","usePermissions","scheduleData","setScheduleData","archivedProjects","setArchivedProjects","minutaTasks","setMinutaTasks","loadingMinutas","setLoadingMinutas","projectTabs","icon","requiresEdit","tab","useEffect","handleTabChange","tabName","detail","addEventListener","removeEventListener","handleMinutaStatusUpdate","tareaId","projectId","debug","availableTabIds","default","supabaseService","success","minutas","loadMinutasByProject","warn","_portfolioData$minuta","minutasFromStorage","JSON","parse","localStorage","getItem","minutasByProject","loadMinutas","calculateMilestoneProgress","allTasks","milestoneProgress","milestoneName","milestoneId","milestoneStatus","milestoneProgressField","getOrphanedMinutaTasks","minutaTask","isMilestone","updateMinuta","milestone_id","Error","_portfolioData$minuta2","portfolioData","updatedMinutas","setItem","stringify","getUnifiedTasksNearDeadline","cronogramaTasks","today","fifteenDaysFromNow","tasksNearDeadline","tasksByMilestone","t","milestoneDate","tasksBeforeMilestone","alreadyAssignedTaskIds","Set","values","group","add","unassignedTasks","has","keys","tasksCount","tasksNames","getTasksNearDeadline","minutaTasksNearDeadline","getMinutaTasksNearDeadline","convertedTask","source","combinedGroups","unifiedGroups","sortedGroups","totalGroups","order","projectWorkPackages","Array","isArray","projectTasks","projectPurchaseOrders","projectAdvances","projectInvoices","projectContracts","projectRisks","activeProjects","localeCompare","undefined","numeric","sensitivity","evmMetrics","calculateEVMMetrics","percentComplete","regularTasks","totalProgress","reduce","sum","round","BAC","PV","plannedValue","EV","earnedValue","AC","actualCost","CV","SV","CPI","SPI","percentSpent","calculateProjectStartDate","invalidTasks","validStartDates","date","isNaN","getTime","minStartDate","min","toISOString","split","projectEndDate","calculateProjectEndDate","validEndDates","maxEndDate","max","toFixed","businessCase","project","totalAmount","adv","inv","slice","emv","costImpact","milestones","m","canEdit","oldStatus","updatedTasks","totalTasks","milestoneTasks","updatedMilestone","total","unifiedTasks","groupIndex","taskIndex","isOverdue","assignedTo","abs","style","width","RiskManagement","ScheduleManagement","projectData","onScheduleDataChange","FinancialManagement","ResourceManagement","ChangeManagement","onUpdateProject","CashFlowProjection","FileManager","onFileUploaded","ProjectAudit"],"sourceRoot":""}